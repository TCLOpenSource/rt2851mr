/***************************************************************************
                          scalerVIP.c  -  description
                             -------------------
    begin                : Mon Dec 22 2008
    copyright           : (C) 2008 by hsliao
    email                : hsliao@realtek.com
 ***************************************************************************/
//oliver-
/*
#include <linux/version.h>	// kernel version

#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,0)
	#ifndef __KERNEL__
		#define __KERNEL__
	#endif
#endif

#include <linux/module.h>	// normal module use
#include <linux/kernel.h>	// printk()
*/
//#define VPQ_COMPILER_ERROR_ENABLE

/*******************************************************************************
 * Header include
******************************************************************************/
//#include <stdio.h> /***/
//#include <stdlib.h> /***/
//#include <string.h> /***/
//#include <rtd_types.h> /***/
//#include <rtd_gpio.h> /***/
#include <asm/div64.h>
#include "tvscalercontrol/vip/localcontrast.h"
#include <linux/pageremap.h>
//#include <kernel/ifd/ifdemod.h>//planck add for TV AutoNR.
//#include <kernel/scaler/scalerDrv.h>
//#include <kernel/scaler/scalerInfo.h>
#include "vgip_isr/scalerVideo.h"
#include "vgip_isr/scalerVIP.h"
//#include <kernel/scaler/scalerIRQ.h>
#include "vgip_isr/scalerDI.h"
#include "vgip_isr/scalerDCC.h"
//#include <kernel/scaler/smoothtoggle.h>
#ifdef CONFIG_KDRIVER_USE_NEW_COMMON
	#include <scaler/scalerDrvCommon.h>
	#include <scaler/vdcCommon.h>
#else
	#include <scalercommon/scalerDrvCommon.h>
	#include <scalercommon/vdcCommon.h>
#endif

#include <scaler/vipCommon.h>
#include <scaler/vipRPCCommon.h>

//#include <VP_ScalerVOCommon.h>
#include <tvscalercontrol/vip/di_ma.h>

#include <rbus/vdtop_reg.h>
#include <rbus/vdpq_reg.h>
#include <rbus/color_sharp_reg.h>
#include <rbus/color_dcc_reg.h>
#include <rbus/color_icm_reg.h>
#include <rbus/color_reg.h>
#include <rbus/histogram_reg.h>
#include <rbus/rgb2yuv_reg.h>
#include <rbus/scaledown_reg.h>
#include <rbus/scaleup_reg.h>
#include <rbus/yuv2rgb_reg.h>
//#include <rbus/srgb_reg.h> //k5l hw remove
#include <rbus/od_reg.h>
#include <rbus/vodma_reg.h>
#include <rbus/smartfit_reg.h>
#include <rbus/di_reg.h>
#include <rbus/nr_reg.h>
#include <rbus/mpegnr_reg.h>
#include <rbus/idcti_reg.h>
#include <rbus/vgip_reg.h>
#include <rbus/profile_reg.h>
#include <rbus/color_dlcti_reg.h>
#include <rbus/misc_pwm_reg.h>
#include <rbus/iso_misc_pwm_reg.h>
#include <rbus/smartfit_reg.h>
#include <rbus/iedge_smooth_reg.h>
#include <rbus/ppoverlay_reg.h>
#include <rbus/gamma_reg.h>
#include <rbus/inv_gamma_reg.h>
#include <rbus/dm_reg.h>
#include <rbus/hdr_all_top_reg.h>
#include <rbus/sys_reg_reg.h>
//#include "merlin2_reg.h"
#include <rbus/hsd_dither_reg.h>
#include <rbus/color_mb_peaking_reg.h>
#include <rbus/sub_dither_reg.h>
#include <rbus/color_temp_reg.h>
#include <rbus/dither_reg.h>
#include <rbus/memc_mux_reg.h>
#include <rbus/kme_me1_top2_reg.h>
#include <rbus/sub_vgip_reg.h>

#include <mach/rtk_log.h>
#define TAG_NAME "VPQ"

#include <tvscalercontrol/vip/vip_reg_def.h>
#include "tvscalercontrol/scaler/scalerstruct.h"
#include <tvscalercontrol/scalerdrv/scalerdrv.h>
#include <tvscalercontrol/vip/nr.h>
#include <tvscalercontrol/vip/peaking.h>

#include "memc_isr/scalerMEMC.h"
#include "tvscalercontrol/scaler_vpqmemcdev.h"
#include <tvscalercontrol/scaler/scalercolorlib_tv002.h>

#include <tvscalercontrol/scaler/scalercolorlib.h>
#include <tvscalercontrol/scalerdrv/scalermemory.h>
#include <tvscalercontrol/scalerdrv/scaler_i2rnd.h>

#include <gal/rtk_se_export.h>
#include <rbus/se_reg.h>
#include <gal/rtk_se_lib.h>
#include <rtk_kdriver/rtk_semaphore.h>

#include "vgip_isr/scalerAI.h"

/*******************************************************************************
* Macro
******************************************************************************/
//#define RES_DET_DEMO

#ifdef CONFIG_ARM64 //ARM32 compatible
// for register dump
#include <tvscalercontrol/io/ioregdrv.h>
#undef rtd_outl
#define rtd_outl(x, y)     								IoReg_Write32(x,y)
#undef rtd_inl
#define rtd_inl(x)     									IoReg_Read32(x)
#undef rtd_maskl
#define rtd_maskl(x, y, z)     							IoReg_Mask32(x,y,z)
#undef rtd_setbits
#define rtd_setbits(offset, Mask) rtd_outl(offset, (rtd_inl(offset) | Mask))
#undef rtd_clearbits
#define rtd_clearbits(offset, Mask) rtd_outl(offset, ((rtd_inl(offset) & ~(Mask))))
#endif

//#define false FALSE
//#define true TRUE
#undef ROSPrintf
#define ROSPrintf(fmt, args...)						VIPprintf(VIP_LOGLEVEL_DEBUG, VIP_LOGMODULE_VGIP_Video_DEBUG, MA_print_count, fmt,##args)
#define ROS_XCprintf_Info(fmt, args...)				VIPprintf(VIP_LOGLEVEL_DEBUG, VIP_LOGMODULE_VIP_XC_interface1_DEBUG, MA_print_count, fmt, ##args)

#define detect_pattern 0
#define motion_concentric_circles_log 0
#define black_white_pattern_log 0
extern unsigned char pattern_gen_pan_flag;
extern VIP_I_De_XC_TBL I_De_XC_TBL[I_De_XC_TBL_Max];
extern VIP_I_De_Contour_TBL I_De_Contour_TBL[I_De_Contour_TBL_Max];
extern unsigned char scalerVideo_readMode(void);
//extern unsigned char curr_motion_status;
extern unsigned char tv006_decontour_level;
extern DRV_di_smd_table_t gSMDtable[7];

unsigned char h_pan_vfir_value=0;
unsigned char Sony_radio_detect_flag=0;
unsigned char pan_detect_flag=0;
unsigned char hifraquency_flag=0;
unsigned char hifraquencyroof_flag=0;
unsigned char high_freq_condition = 0;
unsigned char	Corn_tone_result = 0; // added by Jerry Wu 20100128
unsigned char Line_girl_tone_result =0; // added by Jerry Wu 20100128
unsigned char m_film_clear_isr = 0;
int m_film_isr = 0;
unsigned char ini_ReadSrcDet=0;
unsigned char pq_reset=0;
unsigned int vcpu_smooth_toggle_update_flag = 1;

unsigned char mpeg_ratio=0;

#define ABS(x,y)((x > y) ? (x-y) : (y-x))
#define abs_value(x) ( (x>0) ? (x) : (-(x)) )
#define CLAMP(a,b,c) ( (a)<(b) ? (b) : ((a)>(c)?(c):(a)) )    //!< clamp a to the range of [b;c]
#ifndef max
#define max(a,b)            (((a) > (b)) ? (a) : (b))
#endif

unsigned char AutoMADebugMsg = FALSE; // Erin add for auto ma debug message 100624

unsigned char LineClothesGirl = 0;
char LineClothesGirlCount = 0;
unsigned char gSmd_weak_move=80,gSmd_offset=0x0f,gSmd_gain=2;

unsigned short PF_Trans_Sum=0;
unsigned char AutoMa_chessboard_log_en=0;

unsigned int MA_print_count = 0;

#ifdef CONFIG_I2RND_ENABLE
//for Dual HDR case, need to use 2 matrix
extern VIP_RGB2YUV_COEF_CSMatrix RGB2YUV_COEF_CSMatrix_s0;
extern VIP_RGB2YUV_COEF_CSMatrix RGB2YUV_COEF_CSMatrix_s1;
#endif
unsigned char g_hmcnr_mode2=0;

#define Print_Profile_Data 0
unsigned char Profile_Initial_Flag = 0;
unsigned int Profile1_Y_Print_Count = 0;
unsigned int Profile1_U_Print_Count = 0;
unsigned int Profile1_V_Print_Count = 0;
unsigned int Profile2_Y_Print_Count = 0;
unsigned int Profile2_U_Print_Count = 0;
unsigned int Profile2_V_Print_Count = 0;
unsigned int Profile3_Y_Print_Count = 0;
unsigned int Profile3_U_Print_Count = 0;
unsigned int Profile3_V_Print_Count = 0;
unsigned int Profile_Print_Count_1 = 0;
unsigned int Profile_Print_Count_2 = 0;
extern unsigned int static_move;
unsigned char di_double_buff_apply =0;
unsigned char decontour_double_buff_apply = 0;
//static int NEW_RTNR_Switch = 0;	//Elsie 20130523: negative value is acceptable.
//static int OLD_RTNR_Switch = 0;
//static int C_RTNR_Switch = 0;
int pure_color_weighting = 0;

unsigned int film_cnt[10];
static unsigned char g_fw_film_en = 1;
#if 0
unsigned char iniDCR_init = 0;
#endif
unsigned char DCR_reset_flag = 0;
#ifdef ISR_RTNR_SWITCH_CORRECTION_BIT_FUNCTION_ENABLE
static unsigned char pre_correction_flag=99;
#endif
#if 0//frank21127 reduce code
static unsigned short pre_APL_value=0;
#endif
static unsigned short log_count=0;

unsigned char vd_pwr_ok = 0;//check_vdc_power_ok

unsigned char TV_05_style_ON = 0;
unsigned char TV_057_style_ON = 0; //Panasonic
static unsigned char DccScurveLevel;

//TSB Active backlight control
unsigned short BlackAPL_a_HSCA=0xFF;
unsigned short BlackAPL_b_HSCB=0xFF;
unsigned short BlackAPL_c_HSCC=0xFD;
unsigned short BlackAPL_d_HSCD=0xC8;
unsigned short BlackAPL_e_HSCE=0x37;
unsigned short BlackAPL_f_HSCF=0;
unsigned short BlackAPL_g_HSCG=0;
unsigned short BlackAPL_h_HSCH=0;

unsigned short BlackAPL_BL_Th1_SABH=0x03;
unsigned short BlackAPL_BL_Th1_SABL=0xDE;
unsigned short BlackAPL_BL_Th2_EABH=0x03;
unsigned short BlackAPL_BL_Th2_EABL=0xF0;
unsigned short BlackAPL_BL_Th3_MLBL=0x32;
unsigned short BlackAPL_BL_Th1=0x03DE;
unsigned short BlackAPL_BL_Th2=0x03F0;
unsigned short BlackAPL_M_ATAB=16;
unsigned short BlackAPL_KU_USAB=56;
unsigned short BlackAPL_KD_DSAB=24;

unsigned char APL_BL_MAX = 99;
unsigned char APL_BL_MIN = 10;
unsigned char panalinecount=0;

//======= dark_area_AutoNR ========================
char Dark_level_autoNR = 0;
unsigned char film_for_rtnr=0;
unsigned char TableDCTI=0;

unsigned short Difference_H[16], Difference_V[16];
unsigned short very_motion_cnt=0;
unsigned short very_still_cnt=0;
//unsigned char source_timing_index = 0;
unsigned int Smartfit_Mean_value = 0;

//get R,G,B data for ambilight sensor with profile, elieli 20130131
#ifdef ISR_AMBILIGHT_ENABLE
#define AMBI_DEBUG_TPV 0
#define AMBI_PROFILE_DETECT_DEBUG_TPV 0
static unsigned char m_AmbilightMode = 0 ;

unsigned char Profile_RGB_data_flag_V=0, Profile_RGB_data_flag_H=0,flag_profile_read_status=0;
static unsigned short Profile_Y_V[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, Profile_U_V[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
static unsigned short Profile_V_V[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, Profile_Y_H[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
static unsigned short Profile_U_H[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, Profile_V_H[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
static unsigned short Profile_R_V[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, Profile_G_V[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
static unsigned short Profile_B_V[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, Profile_R_H[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
static unsigned short Profile_G_H[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, Profile_B_H[16]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
#endif
DRV_SNR_Veritcal_NR vlpf_table[6] =
{
//	 0	1	2	3	4	5	6	7	8	9		10	11	12	13		14	15	16	17	18	19	20	21	22	23	24	25	26
	{1,	0,	0,	0,	0,	10,	0,	0,	0,	0,		0,	0,	0,	0,		0,	0,	0,	0,	1,	10,	0,	0,	1,	0,	1,	0,	255}, //hdmi hd ori
	{1, 1, 0, 1, 1, 0, 0, 0, 0, 170, 6, 32, 1, 255, 6, 28, 16, 0, 0, 0, 0, 0, 0, 1, 1, 0, 255, }, //hdmi hd sd2hd
	{1,	0,	0,	0,	0,	22,	0,	0,	0,	0,		0,	0,	0,	0,		0,	0,	0,	0,	0,	1,	0,	0,	1,	0,	1,	0,	255}, //hdmi hd ori
        {1, 0, 0, 0, 0, 18, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 255, 0, 0, 100, 1, 1, 0, 255, },//for 1080i hmc teeth
        {1, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 255, 0, 0, 100, 1, 1, 0, 255, },//for passport fail #202
        {1, 1, 0, 1, 0, 0, 0, 0, 0, 170, 6, 32, 1, 255, 6, 28, 16, 0, 0, 0, 0, 0, 0, 1, 1, 0, 255, },


};

unsigned int step_count=0;

//sld-------------------------------
int thl_count_static_time = 400;
int thl_stop_global_drop_count_frame = 15;

#define BADUP_SCALING_ENTER 8000;
#define BADUP_SCALING_LEAVE 13000;
unsigned int BadUpScalingThreshold = BADUP_SCALING_ENTER;

//=================================================================================//
//=============== LeoChen add for DCR initial setting =================
//=================================================================================//

//======= DCR ========================
//===============DCR for TPV
//static unsigned char Profile_Motion_Detect_ON = _ON;		//roger add 20110826, for motion detect for all source
static unsigned char Profile_Motion_Detect_ON = _OFF;		//roger add 20110826, for motion detect for all source
static unsigned char Profile_Motion_Detect_Value = 0;		//roger add 20110826, range: 0-100

#define DCR_DEBUG_TPV 0
#define APL_Buf_NUM    10
#define DNR_Auto_Count_Num 30

unsigned char g_IsNot4KVO = 1;
unsigned char m_nTPV_New_DCR = 0;
static unsigned char m_bIsTVSource = FALSE;
static unsigned char m_nDCR_Mode = 1 ;
static short BL_current = 100,BL_prev=100;
//========fix memory===
#define fix_DCR_Table_memory 1
#define fix_DCR_Table_2694A_global 1
#ifdef fix_DCR_Table_memory
unsigned char DCR_Table_TPV_non_TV[DCR_TABLE_COL_NUM*DCR_TABLE_ROW_NUM];//20130502
#ifdef fix_DCR_Table_2694A_global
unsigned char DCR_Table_TPV_global_setting[DCR_TABLE_COL_NUM*2];//20130731
#endif
#endif
//===========
unsigned char DCR_Table_TPV[20];
unsigned char APL_Buf[APL_Buf_NUM]= {0,0,0,0,0,0,0,0,0,0};
unsigned char nAPL_Buf_index=0;
unsigned char m_nMotion_Th=3*DCR_TABLE_COL_NUM+1;
unsigned char m_nAPL_Tolerate=3*DCR_TABLE_COL_NUM+2;

unsigned char frame_idx = 0; //frame change

unsigned char m_bDefault_OFF = FALSE; //by customer
static unsigned char m_bDetectMotion = TRUE;//0:static 1:dynamic
static unsigned char m_bMotion_Par_Ini = TRUE;//0:static 1:dynamic
//=================================

static unsigned int m_PIN_BL_ADJ=0,m_PIN_BL_ON_OFF=0,m_BACKLIGHT_ON=0,m_isIncreaseMode=0,m_DCR_UI_Max_Value=0,m_DCR_UI_Min_Value=0;
static unsigned int m_BL_LV_From_User=0,m_BL_LV_Act_Max=0,m_BL_LV_Act_Min=0;

static unsigned char MV_ref[DCR_NODE_NUM]= {30,40,70,90,100},BL_ref[DCR_NODE_NUM]={30,40,70,90,100};
static unsigned char BL_Duty_ref[DCR_NODE_NUM]= {30,40,70,90,100},Duty_ref[DCR_NODE_NUM]={30,40,70,90,100};
static unsigned short m_frame_need_SC=8,m_frame_need_NML=20,m_stable_buf_thl=5,m_DZ_break_thl=10;
static unsigned char DCR_set_mapping=FALSE,m_DCR_refresh=FALSE;
static unsigned char m_DCR_On_Off=FALSE,m_last_DCR_On_Off=FALSE;
static unsigned char m_DCR_mode = DCR_MASTER_ISR;
unsigned char VIP_DCR_powersave_enable=0;
unsigned char still_piccture_auto_clean=0;

#define DCR_NUM_APL 12
#define DCR_NUM_OSD 12

unsigned char m_nTV057_New_DCR=0;//Panasonic DCR flag enable

unsigned char APL_LEVEL[DCR_NUM_APL] ={  0,  5,10, 20, 30, 40, 50, 60, 70, 80, 90, 100};
unsigned char OSD_LEVEL[DCR_NUM_OSD] ={  0,  5,10, 20, 30, 40, 50, 60, 70, 80, 90, 100};

unsigned char Duty_YMax[DCR_NUM_APL] ={   37,  70, 110, 190, 255, 255, 255, 255, 255, 255, 255, 255};

short  Current_Dutyvalue = 255;
unsigned char panaFlag = TRUE;
unsigned char DCR_refresh_TV057=FALSE;
char smarfit_APL_cout=0;

// Profiling
//global for others to use it. 090713 March
//unsigned short H_Block[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
//unsigned short V_Block[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
static unsigned int ProfSum = 0;

static unsigned int Profile1_Y_Sum = 0;
static unsigned int Profile1_U_Sum = 0;
static unsigned int Profile1_V_Sum = 0;
static unsigned int Profile2_Y_Sum = 0;
static unsigned int Profile2_U_Sum = 0;
static unsigned int Profile2_V_Sum = 0;
static unsigned int Profile3_Y_Sum = 0;
static unsigned int Profile3_U_Sum = 0;
static unsigned int Profile3_V_Sum = 0;

static unsigned int Profile1_H_Block_size = 0;
static unsigned char Noise_Level=0;
// Input source detection
unsigned int Step_Hist[20] = {0};
unsigned int Step_Hist_ratio[20] = {0};

//unsigned int PMH_Hist[6] = {0};
static UINT32 Step_sum=1;

static unsigned int Y_Main_Hist_pre[128] = {0};
static unsigned int Hue_Main_His_pre[COLOR_HUE_HISTOGRAM_LEVEL] = {0};

LEVEL_INFO nr_value={0,0,0};
unsigned char Film_status =0;

//Elsie 20140307
//    0<--------------------------->255
//natural<----------------------->artificial
//note:
//*********************** ID PATERN FOR  DEMO*******************************8//

unsigned char DynamicOptimizeSystem[255];
unsigned char DynamicOptimizeMEMC[255];
unsigned char DynamicOptimizeMEMC_pre[255];
unsigned char CITestPatch[1];
unsigned char LGBirdCRTNRPatch = 0, LGBirdCRTNRPatchPre = 0;
unsigned char LGBirdCRTNRPatchTrigger = 0;
unsigned char LGPTFatoryMultiC34 = 0;
unsigned char LGTVPALBGE52 = 0;
unsigned char SandM_Chroma_Zone_Plate = 0;
unsigned char ID_CB_NO[20];
unsigned char DI_Video_Broken = 0;
unsigned char DI_Res_Pat_pan_65ppf= 0;
unsigned char GMV_status_for_Filim = 0;

unsigned char Skyworth_Decont_Pattern = 0;
unsigned char Skyworth_Decont_BMPPattern = 0;
unsigned char Skyworth_decont_GRAYpattern = 0;
unsigned char Skyworth_Film_Pattern = 0;
unsigned char Eng_Skyworth_Decont_Pattern = 0;
unsigned char Skyworth_Speach_Man_Pattern = 0;
unsigned char Skyworth_Barrels_Pattern = 0;
unsigned char Sony_test_pattern[100];

unsigned char g_Inv_Gamma = 255;
unsigned char BlackDetection_main_en = 0;
unsigned char BlackDetection_sub_en = 0;
/*#ifdef LG_Demo_flag*/
//No.001
unsigned short DynamicOptimizeSystem_001_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 1, 3, 8, 8, 3, 17, 47, 49, 35, 37, 41, 47, 49, 51, 51, 53, 52, 54, 57, 59, 56, 55, 50, 87, 16, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 3, 8, 9, 3, 17, 53, 52, 35, 39, 47, 52, 56, 59, 59, 60, 62, 66, 68, 61, 57, 73, 54, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 2, 4, 10, 5, 4, 23, 51, 43, 31, 35, 42, 55, 51, 53, 53, 54, 55, 61, 64, 68, 53, 51, 51, 75, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 3, 8, 9, 4, 23, 61, 52, 46, 50, 53, 54, 56, 56, 58, 60, 68, 71, 66, 60, 68, 66, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 2, 4, 10, 5, 4, 23, 51, 43, 31, 35, 42, 55, 51, 53, 53, 54, 55, 61, 64, 68, 53, 51, 51, 75, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 1, 3, 8, 8, 3, 17, 47, 49, 35, 37, 41, 47, 49, 51, 51, 53, 52, 54, 57, 59, 56, 55, 50, 87, 16, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 3, 8, 9, 3, 17, 53, 52, 35, 39, 47, 52, 56, 59, 59, 60, 62, 66, 68, 61, 57, 73, 54, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 2, 4, 10, 5, 4, 23, 51, 43, 31, 35, 42, 55, 51, 53, 53, 54, 55, 61, 64, 68, 53, 51, 51, 75, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 2, 4, 10, 5, 4, 23, 51, 43, 31, 35, 42, 55, 51, 53, 53, 54, 55, 61, 64, 68, 53, 51, 51, 75, 0, 0, },


};

unsigned short DynamicOptimizeSystem_001_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 3, 133, 707, 91, 33, 16, 8, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 1, 80, 682, 129, 38, 35, 20, 7, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 2, 117, 718, 91, 27, 19, 12, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 2, 117, 718, 91, 27, 19, 12, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 2, 117, 718, 91, 27, 19, 12, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 3, 133, 707, 91, 33, 16, 8, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 1, 80, 682, 129, 38, 35, 20, 7, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 2, 117, 718, 91, 27, 19, 12, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 2, 117, 718, 91, 27, 19, 12, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

//No.002
unsigned short DynamicOptimizeSystem_002_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 8, 114, 81, 34, 24, 25, 36, 35, 33, 24, 18, 12, 11, 12, 13, 22, 105, 112, 60, 45, 36, 24, 34, 36, 24, 7, 2, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 1, 84, 111, 40, 25, 27, 42, 37, 31, 22, 17, 13, 13, 14, 21, 107, 120, 62, 47, 36, 27, 42, 30, 16, 3, 0, 0, 0, },
	/*2*/ {0, 0, 13, 119, 78, 30, 22, 24, 38, 32, 35, 23, 17, 11, 11, 12, 13, 24, 115, 104, 57, 43, 37, 22, 35, 37, 23, 8, 2, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 53, 134, 58, 30, 28, 41, 37, 37, 22, 16, 13, 12, 14, 39, 139, 86, 53, 43, 27, 40, 40, 23, 4, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 5, 114, 89, 46, 29, 26, 36, 33, 32, 22, 16, 11, 10, 9, 9, 18, 97, 109, 62, 45, 34, 25, 29, 38, 26, 14, 2, 0, 0, 0, },
	/*5*/ {43, 115, 78, 35, 25, 20, 31, 34, 29, 28, 18, 16, 10, 9, 10, 12, 16, 73, 111, 62, 43, 32, 26, 18, 31, 31, 19, 7, 2, 0, 0, 0, },
	/*6*/ {22, 0, 5, 112, 96, 37, 25, 24, 36, 32, 33, 25, 18, 13, 10, 11, 12, 19, 95, 111, 54, 43, 31, 22, 30, 34, 23, 9, 2, 0, 0, 0, },
	/*7*/ {0, 0, 2, 99, 92, 38, 22, 19, 33, 34, 31, 29, 19, 14, 10, 11, 12, 14, 49, 126, 85, 52, 41, 33, 20, 38, 34, 22, 6, 1, 0, 0, },
	/*8*/ {0, 0, 5, 114, 89, 46, 29, 26, 36, 33, 32, 22, 16, 11, 10, 9, 9, 18, 97, 109, 62, 45, 34, 25, 29, 38, 26, 14, 2, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_002_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 20, 198, 75, 78, 79, 51, 81, 56, 42, 82, 88, 61, 81, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 1, 12, 159, 99, 105, 63, 43, 76, 52, 45, 122, 85, 64, 65, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 2, 57, 190, 71, 57, 54, 53, 94, 48, 36, 61, 82, 72, 110, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 1, 3, 34, 178, 74, 77, 71, 58, 86, 55, 43, 75, 80, 63, 93, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {2, 3, 7, 48, 140, 95, 70, 57, 43, 60, 68, 50, 53, 81, 87, 113, 4, 1, 1, 1, 1, 1, 1, 1, },
	/*5*/ {0, 0, 1, 8, 150, 101, 98, 76, 47, 86, 56, 47, 119, 80, 66, 58, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 1, 12, 159, 99, 105, 63, 43, 76, 52, 45, 122, 85, 64, 65, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 1, 3, 34, 178, 74, 77, 71, 58, 86, 55, 43, 75, 80, 63, 93, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {2, 3, 7, 48, 140, 95, 70, 57, 43, 60, 68, 50, 53, 81, 87, 113, 4, 1, 1, 1, 1, 1, 1, 1, },
};

//No.003
unsigned short DynamicOptimizeSystem_003_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
	/*1*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
	/*2*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
	/*3*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
	/*4*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
	/*5*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
	/*6*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
	/*7*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
	/*8*/ {0, 218, 190, 88, 123, 97, 52, 31, 20, 14, 10, 7, 6, 6, 7, 9, 8, 8, 7, 6, 5, 5, 4, 4, 4, 16, 8, 6, 5, 4, 5, 10, },
};
unsigned short DynamicOptimizeSystem_003_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW

	/*0*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 1, 45, 543, 298, 60, 5, 3, 1, 0, 0, 0, 0, 0, 3, 16, 15, 0, 0, 0, 0, 0, 0, 0, },
};

//No.004
unsigned short DynamicOptimizeSystem_004_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 1, 9, 35, 59, 62, 58, 56, 57, 59, 61, 64, 71, 77, 80, 73, 62, 47, 29, 14, 7, 3, 2, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 3, 13, 36, 58, 62, 57, 54, 54, 55, 57, 60, 65, 70, 72, 68, 61, 51, 39, 24, 13, 7, 4, 2, 1, 0, 0, 0, },
	/*2*/ {0, 19, 6, 2, 5, 18, 46, 55, 52, 51, 50, 52, 53, 56, 60, 69, 82, 80, 69, 58, 46, 29, 15, 7, 3, 2, 1, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 1, 10, 50, 78, 71, 66, 64, 65, 69, 76, 91, 95, 85, 69, 50, 29, 13, 5, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 10, 50, 78, 71, 66, 64, 65, 69, 76, 91, 95, 85, 69, 50, 29, 13, 5, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {22, 2, 6, 18, 38, 49, 49, 48, 47, 48, 48, 49, 52, 56, 62, 68, 69, 64, 56, 48, 37, 24, 14, 7, 3, 2, 1, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 3, 13, 36, 58, 62, 57, 54, 54, 55, 57, 60, 65, 70, 72, 68, 61, 51, 39, 24, 13, 7, 4, 2, 1, 0, 0, 0, },
	/*7*/ {0, 0, 0, 1, 10, 50, 78, 71, 66, 64, 65, 69, 76, 91, 95, 85, 69, 50, 29, 13, 5, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 1, 10, 50, 78, 71, 66, 64, 65, 69, 76, 91, 95, 85, 69, 50, 29, 13, 5, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_004_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 224, 591, 119, 59, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 3, 387, 393, 107, 80, 23, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 340, 487, 101, 54, 14, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 441, 354, 108, 67, 22, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 441, 354, 108, 67, 22, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 224, 591, 119, 59, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 3, 387, 393, 107, 80, 23, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 441, 354, 108, 67, 22, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 441, 354, 108, 67, 22, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, }
};

//No.005
unsigned short DynamicOptimizeSystem_005_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 7, 26, 31, 32, 35, 39, 48, 47, 47, 50, 54, 56, 56, 51, 44, 35, 26, 65, 199, 7, 5, 8, 9, 4, 3, 2, 1, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 2, 26, 34, 36, 40, 45, 53, 53, 51, 57, 62, 61, 55, 47, 37, 27, 217, 46, 7, 8, 9, 5, 3, 4, 1, 0, 0, },
	/*2*/ {0, 0, 0, 9, 32, 34, 34, 37, 40, 48, 47, 45, 47, 52, 54, 54, 50, 43, 34, 26, 174, 87, 7, 5, 6, 6, 4, 3, 2, 0, 0, 0, },
	/*3*/ {0, 0, 0, 4, 25, 31, 31, 35, 38, 46, 46, 48, 48, 53, 57, 59, 55, 46, 37, 28, 24, 226, 18, 5, 5, 10, 5, 3, 2, 1, 0, 0, },
	/*4*/ {0, 0, 0, 17, 54, 43, 35, 33, 35, 42, 55, 72, 83, 92, 88, 73, 57, 44, 35, 29, 26, 23, 19, 17, 12, 3, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 7, 26, 31, 32, 35, 39, 48, 47, 47, 50, 54, 56, 56, 51, 44, 35, 26, 65, 199, 7, 5, 8, 9, 4, 3, 2, 1, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 2, 26, 34, 36, 40, 45, 53, 53, 51, 57, 62, 61, 55, 47, 37, 27, 217, 46, 7, 8, 9, 5, 3, 4, 1, 0, 0, },
	/*7*/ {0, 0, 0, 4, 25, 31, 31, 35, 38, 46, 46, 48, 48, 53, 57, 59, 55, 46, 37, 28, 24, 226, 18, 5, 5, 10, 5, 3, 2, 1, 0, 0, },
	/*8*/ {0, 0, 0, 17, 54, 43, 35, 33, 35, 42, 55, 72, 83, 92, 88, 73, 57, 44, 35, 29, 26, 23, 19, 17, 12, 3, 0, 0, 0, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_005_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 17, 278, 242, 109, 45, 15, 11, 12, 16, 16, 77, 155, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 11, 301, 230, 110, 32, 14, 10, 11, 13, 15, 73, 172, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 17, 397, 336, 111, 17, 0, 0, 0, 0, 0, 0, 117, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 2, 324, 347, 111, 33, 5, 0, 0, 1, 2, 56, 113, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 6, 162, 380, 298, 107, 31, 7, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 17, 278, 242, 109, 45, 15, 11, 12, 16, 16, 77, 155, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 11, 301, 230, 110, 32, 14, 10, 11, 13, 15, 73, 172, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 2, 324, 347, 111, 33, 5, 0, 0, 1, 2, 56, 113, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 6, 162, 380, 298, 107, 31, 7, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

//No.007
unsigned short DynamicOptimizeSystem_007_y[][32]= // ntsc 01:28  , pal 01:47
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 9, 45, 41, 51, 69, 71, 75, 75, 75, 88, 181, 129, 38, 14, 4, 3, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 4, 34, 37, 42, 51, 59, 69, 69, 78, 222, 238, 45, 12, 5, 3, 3, 3, 2, 2, 2, 3, 2, 2, 1, 0, 0, 0, },
	/*2*/ {0, 0, 0, 13, 45, 42, 48, 65, 70, 75, 74, 77, 107, 214, 96, 32, 5, 4, 3, 3, 2, 2, 2, 2, 3, 2, 1, 1, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 31, 47, 50, 68, 74, 80, 82, 92, 216, 178, 40, 7, 4, 4, 3, 2, 2, 2, 3, 3, 2, 1, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 6, 28, 32, 34, 40, 44, 51, 55, 61, 91, 282, 184, 41, 12, 4, 3, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0, },
	/*5*/ {21, 8, 35, 37, 43, 61, 75, 84, 77, 77, 81, 101, 158, 80, 20, 7, 3, 2, 2, 2, 1, 1, 1, 1, 2, 2, 1, 1, 0, 0, 0, 0, },
	/*6*/ {21, 1, 0, 7, 36, 35, 39, 49, 52, 60, 62, 65, 98, 280, 122, 29, 7, 4, 3, 2, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 6, 28, 32, 34, 40, 44, 51, 55, 61, 91, 282, 184, 41, 12, 4, 3, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0, },
	/*8*/ {0, 0, 0, 6, 28, 32, 34, 40, 44, 51, 55, 61, 91, 282, 184, 41, 12, 4, 3, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_007_hue[][COLOR_HUE_HISTOGRAM_LEVEL] = // 01:28
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 356, 566, 43, 26, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 1, 253, 663, 56, 20, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 326, 667, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 272, 680, 34, 8, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 272, 680, 34, 8, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 429, 504, 39, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 1, 253, 663, 56, 20, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 272, 680, 34, 8, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 272, 680, 34, 8, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

//No.007
unsigned short DynamicOptimizeSystem_007_y2[][32]= // ntsc 01:28  , pal 01:47
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 9, 30, 37, 44, 80, 114, 109, 93, 115, 97, 104, 95, 29, 6, 5, 3, 3, 2, 2, 2, 1, 2, 2, 2, 1, 1, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 3, 33, 42, 52, 88, 123, 111, 108, 111, 124, 117, 43, 9, 5, 3, 3, 2, 2, 2, 2, 3, 2, 2, 1, 0, 0, 0, },
	/*2*/ {0, 0, 0, 13, 45, 42, 48, 65, 70, 75, 74, 77, 107, 214, 96, 32, 5, 4, 3, 3, 2, 2, 2, 2, 3, 2, 1, 1, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 23, 47, 51, 89, 122, 113, 117, 113, 132, 114, 35, 7, 4, 4, 3, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 6, 26, 39, 41, 74, 111, 113, 93, 117, 103, 107, 92, 33, 8, 4, 3, 3, 2, 2, 2, 1, 2, 2, 2, 1, 1, 0, 0, 0, },
	/*5*/ {0, 0, 0, 9, 30, 37, 44, 80, 114, 109, 93, 115, 97, 104, 95, 29, 6, 5, 3, 3, 2, 2, 2, 1, 2, 2, 2, 1, 1, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 3, 33, 42, 52, 88, 123, 111, 108, 111, 124, 117, 43, 9, 5, 3, 3, 2, 2, 2, 2, 3, 2, 2, 1, 0, 0, 0, },
	/*7*/ {0, 0, 0, 6, 26, 39, 41, 74, 111, 113, 93, 117, 103, 107, 92, 33, 8, 4, 3, 3, 2, 2, 2, 1, 2, 2, 2, 1, 1, 0, 0, 0, },
	/*8*/ {0, 0, 0, 6, 26, 39, 41, 74, 111, 113, 93, 117, 103, 107, 92, 33, 8, 4, 3, 3, 2, 2, 2, 1, 2, 2, 2, 1, 1, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_007_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] = // 01:28
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 472, 445, 53, 21, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 476, 445, 49, 24, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 326, 667, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 552, 390, 37, 14, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 552, 390, 37, 14, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 472, 445, 53, 21, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 476, 445, 49, 24, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 552, 390, 37, 14, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 552, 390, 37, 14, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

//No.011
unsigned short DynamicOptimizeSystem_011_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 13, 4, 0, 0, 0, 0, 13, 38, 14, 12, 24, 54, 79, 99, 74, 58, 43, 18, 8, 6, 28, 27, 352, 25, 2, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 13, 4, 0, 0, 0, 0, 13, 38, 14, 12, 24, 54, 79, 99, 74, 58, 43, 18, 8, 6, 28, 27, 352, 25, 2, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 13, 4, 0, 0, 0, 0, 13, 38, 14, 12, 24, 54, 79, 99, 74, 58, 43, 18, 8, 6, 28, 27, 352, 25, 2, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 13, 4, 0, 0, 0, 0, 13, 38, 14, 12, 24, 54, 79, 99, 74, 58, 43, 18, 8, 6, 28, 27, 352, 25, 2, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 13, 4, 0, 0, 0, 0, 13, 38, 14, 12, 24, 54, 79, 99, 74, 58, 43, 18, 8, 6, 28, 27, 352, 25, 2, 0, 0, 0, 0, 0, 0, },
	/*5*/ {21, 0, 0, 0, 0, 4, 35, 18, 10, 15, 32, 55, 75, 81, 65, 52, 42, 26, 11, 5, 26, 21, 289, 94, 9, 2, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 13, 4, 0, 0, 0, 0, 13, 38, 14, 12, 24, 54, 79, 99, 74, 58, 43, 18, 8, 6, 28, 27, 352, 25, 2, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 27, 3, 0, 0, 0, 0, 14, 36, 14, 13, 25, 53, 78, 94, 75, 58, 41, 18, 7, 11, 28, 70, 309, 15, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 13, 4, 0, 0, 0, 0, 13, 38, 14, 12, 24, 54, 79, 99, 74, 58, 43, 18, 8, 6, 28, 27, 352, 25, 2, 0, 0, 0, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_011_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 301, 146, 34, 21, 5, 6, 12, 28, 13, 5, 5, 414, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 301, 146, 34, 21, 5, 6, 12, 28, 13, 5, 5, 414, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 409, 65, 12, 20, 5, 9, 19, 22, 8, 4, 2, 399, 19, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 301, 146, 34, 21, 5, 6, 12, 28, 13, 5, 5, 414, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 301, 146, 34, 21, 5, 6, 12, 28, 13, 5, 5, 414, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 307, 137, 32, 20, 5, 8, 18, 25, 8, 3, 5, 422, 2, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 301, 146, 34, 21, 5, 6, 12, 28, 13, 5, 5, 414, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 301, 146, 34, 21, 5, 6, 12, 28, 13, 5, 5, 414, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 301, 146, 34, 21, 5, 6, 12, 28, 13, 5, 5, 414, 3, 0, 0, 0, 0, 0, 0, 0, },
};

//No.012
unsigned short DynamicOptimizeSystem_012_y[][32]= //02:21
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 2, 20, 61, 92, 121, 124, 135, 120, 85, 60, 47, 36, 26, 18, 13, 8, 5, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 1, 17, 63, 99, 132, 146, 153, 115, 80, 59, 43, 30, 19, 12, 7, 4, 3, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 20, 7, 2, 28, 68, 103, 118, 123, 132, 113, 78, 58, 44, 32, 22, 14, 9, 6, 4, 3, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 1, 4, 14, 67, 98, 135, 131, 138, 114, 80, 59, 45, 31, 22, 15, 10, 7, 4, 3, 2, 2, 1, 1, 1, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 16, 57, 85, 126, 126, 141, 127, 86, 62, 48, 36, 25, 16, 10, 7, 5, 3, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, },
	/*5*/ {22, 3, 25, 64, 87, 115, 106, 120, 115, 87, 60, 48, 37, 29, 21, 14, 9, 6, 5, 3, 2, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {22, 0, 0, 2, 27, 70, 96, 124, 123, 129, 114, 76, 57, 43, 33, 23, 15, 10, 7, 5, 3, 2, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 1, 4, 25, 67, 93, 128, 127, 132, 116, 80, 57, 43, 34, 25, 18, 12, 8, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 1, 16, 57, 85, 126, 126, 141, 127, 86, 62, 48, 36, 25, 16, 10, 7, 5, 3, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_012_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 2, 45, 72, 180, 528, 134, 26, 5, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 2, 10, 62, 70, 183, 474, 146, 34, 8, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 1, 7, 72, 83, 144, 446, 199, 40, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 3, 18, 76, 88, 160, 456, 142, 35, 10, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*4*/ {0, 1, 4, 33, 88, 96, 166, 384, 149, 48, 12, 5, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 0, 1, 8, 63, 76, 169, 502, 139, 30, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 2, 10, 62, 70, 183, 474, 146, 34, 8, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 3, 18, 76, 88, 160, 456, 142, 35, 10, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*8*/ {0, 1, 4, 33, 88, 96, 166, 384, 149, 48, 12, 5, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
};

//No.014
unsigned short DynamicOptimizeSystem_014_y[][32]= //02:21
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 3, 2, 2, 3, 4, 123, 46, 42, 46, 56, 60, 60, 62, 71, 88, 93, 87, 69, 48, 20, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 3, 2, 2, 3, 4, 123, 46, 42, 46, 56, 60, 60, 62, 71, 88, 93, 87, 69, 48, 20, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 3, 2, 2, 3, 4, 123, 46, 42, 46, 56, 60, 60, 62, 71, 88, 93, 87, 69, 48, 20, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 3, 2, 2, 3, 4, 123, 46, 42, 46, 56, 60, 60, 62, 71, 88, 93, 87, 69, 48, 20, 0, 0, },//for_LG_demo
	/*4*/ {0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 5, 11, 9, 12, 158, 56, 49, 51, 51, 60, 59, 68, 91, 117, 102, 75, 13, 0, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 3, 2, 2, 3, 4, 123, 46, 42, 46, 56, 60, 60, 62, 71, 88, 93, 87, 69, 48, 20, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 3, 2, 2, 3, 4, 123, 46, 42, 46, 56, 60, 60, 62, 71, 88, 93, 87, 69, 48, 20, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 3, 2, 2, 3, 4, 123, 46, 42, 46, 56, 60, 60, 62, 71, 88, 93, 87, 69, 48, 20, 0, 0, },//for_LG_demo
	/*8*/ {0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 3, 2, 2, 3, 4, 123, 46, 42, 46, 56, 60, 60, 62, 71, 88, 93, 87, 69, 48, 20, 0, 0, },//for_LG_demo

};
unsigned short DynamicOptimizeSystem_014_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*4*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*8*/ {0, 0, 3, 4, 256, 459, 233, 28, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo

};

//No.023
unsigned short DynamicOptimizeSystem_023_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 5, 67, 90, 92, 78, 72, 64, 60, 57, 50, 43, 37, 33, 31, 28, 27, 26, 25, 22, 20, 18, 15, 12, 10, 6, 1, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 1, 55, 74, 86, 87, 80, 73, 74, 66, 57, 46, 38, 35, 32, 30, 27, 24, 24, 26, 23, 16, 10, 3, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 9, 50, 69, 82, 85, 79, 74, 73, 66, 54, 44, 38, 35, 32, 27, 25, 22, 18, 19, 19, 19, 19, 17, 9, 3, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 51, 94, 91, 94, 78, 69, 73, 64, 55, 44, 37, 35, 32, 30, 28, 26, 27, 22, 17, 13, 6, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 1, 86, 89, 101, 93, 78, 67, 69, 61, 48, 39, 36, 34, 31, 30, 26, 24, 23, 20, 15, 12, 6, 1, 0, 0, 0, 0, 0, },
	/*5*/ {16, 12, 71, 68, 78, 79, 70, 64, 59, 60, 51, 44, 36, 32, 29, 28, 26, 24, 23, 20, 18, 16, 16, 15, 14, 9, 6, 2, 0, 0, 0, 0, },
	/*6*/ {17, 0, 0, 33, 137, 145, 127, 84, 53, 37, 31, 28, 26, 28, 30, 32, 32, 25, 21, 20, 22, 19, 17, 14, 7, 2, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 3, 71, 57, 69, 76, 75, 72, 71, 70, 59, 49, 40, 34, 32, 29, 25, 23, 23, 23, 21, 19, 19, 15, 10, 4, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 42, 89, 69, 81, 77, 66, 59, 60, 56, 49, 41, 34, 33, 31, 29, 28, 26, 22, 20, 19, 17, 14, 13, 8, 2, 0, 0, 0, 0, },

};

unsigned short DynamicOptimizeSystem_023_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 3, 12, 11, 15, 28, 81, 79, 199, 563, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 4, 14, 10, 12, 22, 44, 55, 227, 608, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 21, 30, 170, 765, 4, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 7, 15, 13, 20, 25, 27, 52, 128, 706, 2, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 1, 4, 9, 14, 22, 32, 46, 48, 59, 106, 626, 23, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 3, 12, 11, 15, 28, 81, 79, 199, 563, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 4, 14, 10, 12, 22, 44, 55, 227, 608, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 7, 15, 13, 20, 25, 27, 52, 128, 706, 2, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 1, 4, 9, 14, 22, 32, 46, 48, 59, 106, 626, 23, 0, 0, 0, 0, 0, 0, 0, },
};

unsigned short DynamicOptimizeSystem_023_y2[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 40, 129, 150, 133, 78, 47, 33, 29, 27, 27, 27, 29, 32, 34, 30, 25, 26, 23, 22, 19, 14, 9, 3, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 12, 124, 157, 149, 89, 53, 37, 30, 29, 29, 35, 36, 39, 32, 27, 28, 26, 21, 17, 12, 6, 1, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 48, 136, 151, 126, 74, 47, 33, 29, 27, 28, 30, 34, 33, 31, 28, 23, 23, 24, 21, 15, 13, 10, 3, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 7, 118, 160, 148, 101, 56, 40, 36, 31, 30, 35, 38, 35, 28, 27, 27, 27, 20, 13, 8, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 8, 133, 170, 151, 93, 56, 38, 33, 31, 29, 33, 37, 35, 27, 25, 28, 22, 17, 15, 6, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {18, 51, 122, 131, 122, 85, 56, 37, 29, 27, 25, 25, 25, 29, 29, 27, 25, 20, 19, 20, 18, 16, 14, 11, 5, 2, 0, 0, 0, 0, 0, 0, },
	/*6*/ {16, 0, 0, 4, 76, 70, 72, 78, 75, 74, 69, 63, 55, 45, 37, 33, 32, 28, 25, 24, 21, 21, 18, 16, 12, 9, 7, 3, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 24, 127, 148, 142, 89, 53, 35, 30, 28, 26, 26, 27, 34, 33, 27, 23, 21, 22, 22, 19, 14, 11, 5, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 39, 141, 160, 132, 76, 47, 34, 29, 28, 28, 28, 29, 32, 30, 25, 23, 25, 22, 21, 19, 12, 7, 2, 0, 0, 0, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_023_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 5, 8, 45, 70, 260, 600, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 43, 47, 281, 621, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 141, 839, 16, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 9, 18, 34, 142, 763, 22, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 1, 3, 4, 7, 12, 24, 41, 111, 734, 52, 1, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 5, 8, 45, 70, 260, 600, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 43, 47, 281, 621, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 9, 18, 34, 142, 763, 22, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 1, 3, 4, 7, 12, 24, 41, 111, 734, 52, 1, 0, 0, 0, 0, 0, 0, },
};


//No.024
unsigned short DynamicOptimizeSystem_024_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 1, 4, 8, 26, 62, 76, 76, 83, 109, 101, 68, 56, 48, 43, 37, 32, 27, 23, 19, 15, 13, 10, 9, 8, 6, 6, 6, 9, 1, 0, 0, },
	/*1*/ {0, 0, 0, 0, 3, 8, 20, 63, 84, 87, 98, 122, 93, 66, 55, 48, 42, 38, 32, 26, 20, 16, 13, 11, 9, 8, 7, 7, 10, 2, 0, 0, },
	/*2*/ {0, 0, 2, 9, 29, 69, 80, 81, 89, 110, 95, 66, 54, 46, 40, 36, 31, 27, 22, 19, 15, 12, 10, 9, 8, 7, 6, 6, 7, 2, 0, 0, },
	/*3*/ {0, 0, 0, 3, 7, 17, 60, 87, 93, 99, 126, 98, 68, 56, 48, 40, 35, 29, 24, 19, 15, 13, 10, 9, 8, 8, 10, 4, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 5, 10, 47, 85, 92, 96, 122, 113, 73, 58, 49, 42, 36, 30, 25, 20, 16, 13, 11, 9, 8, 8, 10, 8, 1, 0, 0, 0, },
	/*5*/ {23, 5, 19, 52, 69, 70, 73, 88, 112, 77, 59, 49, 43, 39, 34, 30, 25, 21, 17, 14, 12, 10, 8, 7, 6, 5, 5, 5, 6, 1, 0, 0, },
	/*6*/ {22, 0, 1, 4, 20, 58, 71, 77, 81, 105, 112, 71, 56, 48, 43, 39, 33, 27, 22, 18, 15, 12, 10, 8, 8, 6, 6, 5, 8, 1, 0, 0, },
	/*7*/ {0, 1, 3, 7, 20, 57, 75, 78, 81, 102, 114, 71, 56, 47, 42, 38, 33, 29, 23, 19, 16, 13, 11, 9, 8, 7, 6, 6, 8, 5, 0, 0, },
	/*8*/ {0, 0, 2, 5, 15, 56, 82, 83, 84, 106, 110, 70, 55, 47, 41, 37, 32, 28, 24, 19, 16, 13, 11, 9, 8, 7, 6, 6, 8, 6, 0, 0, },
};
unsigned short DynamicOptimizeSystem_024_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 2, 9, 39, 153, 334, 182, 67, 35, 29, 30, 31, 37, 35, 8, 1, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 2, 9, 27, 161, 325, 184, 65, 41, 34, 34, 34, 39, 32, 6, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 1, 9, 42, 111, 324, 231, 77, 35, 27, 29, 32, 32, 31, 10, 2, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 4, 15, 55, 122, 324, 179, 74, 38, 27, 24, 32, 38, 46, 11, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*4*/ {0, 0, 2, 7, 21, 69, 128, 288, 169, 79, 40, 25, 26, 32, 37, 44, 18, 2, 1, 0, 0, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 0, 0, 2, 8, 29, 135, 344, 197, 75, 40, 27, 31, 34, 34, 26, 7, 2, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 2, 9, 27, 161, 325, 184, 65, 41, 34, 34, 34, 39, 32, 6, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 4, 15, 55, 122, 324, 179, 74, 38, 27, 24, 32, 38, 46, 11, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*8*/ {0, 0, 2, 7, 21, 69, 128, 288, 169, 79, 40, 25, 26, 32, 37, 44, 18, 2, 1, 0, 0, 0, 0, 0, },//for_LG_demo
};


//No.028
unsigned short DynamicOptimizeSystem_028_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 558, 29, 10, 12, 13, 11, 10, 11, 11, 12, 16, 21, 22, 32, 48, 35, 37, 35, 31, 15, 10, 2, 2, 1, 1, 0, 0, 1, 0, 0, 0, },
	/*1*/ {0, 21, 1, 344, 229, 13, 15, 14, 12, 11, 13, 12, 16, 24, 23, 33, 48, 37, 38, 35, 27, 13, 4, 2, 1, 1, 0, 0, 1, 0, 0, 0, },
	/*2*/ {0, 568, 26, 10, 12, 12, 11, 9, 10, 11, 12, 15, 21, 20, 33, 48, 34, 37, 35, 29, 15, 10, 2, 2, 1, 1, 0, 0, 1, 0, 0, 0, },
	/*3*/ {0, 0, 0, 583, 9, 12, 12, 12, 11, 11, 13, 17, 22, 25, 33, 55, 39, 43, 41, 25, 14, 4, 2, 2, 1, 1, 1, 1, 0, 0, 0, 0, },
	/*4*/ {0, 0, 577, 8, 10, 11, 10, 9, 10, 11, 12, 15, 21, 23, 24, 51, 36, 38, 37, 35, 22, 13, 5, 2, 2, 1, 1, 1, 1, 0, 0, 0, },
	/*5*/ {0, 558, 29, 10, 12, 13, 11, 10, 11, 11, 12, 16, 21, 22, 32, 48, 35, 37, 35, 31, 15, 10, 2, 2, 1, 1, 0, 0, 1, 0, 0, 0, },
	/*6*/ {0, 21, 1, 344, 229, 13, 15, 14, 12, 11, 13, 12, 16, 24, 23, 33, 48, 37, 38, 35, 27, 13, 4, 2, 1, 1, 0, 0, 1, 0, 0, 0, },
	/*7*/ {0, 289, 305, 7, 9, 10, 10, 8, 9, 10, 12, 15, 21, 21, 24, 50, 36, 37, 36, 32, 20, 12, 4, 2, 2, 1, 1, 1, 1, 1, 0, 0, },
	/*8*/ {0, 0, 577, 8, 10, 11, 10, 9, 10, 11, 12, 15, 21, 23, 24, 51, 36, 38, 37, 35, 22, 13, 5, 2, 2, 1, 1, 1, 1, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_028_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 3, 42, 807, 102, 16, 7, 4, 4, 5, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 1, 29, 828, 108, 19, 5, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {1, 4, 49, 834, 92, 7, 1, 0, 0, 3, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 2, 43, 805, 92, 14, 6, 6, 5, 3, 4, 5, 3, 1, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*4*/ {8, 24, 210, 713, 27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1, 2, 4, },//for_LG_demo
	/*5*/ {0, 3, 42, 807, 102, 16, 7, 4, 4, 5, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 1, 29, 828, 108, 19, 5, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 2, 43, 805, 92, 14, 6, 6, 5, 3, 4, 5, 3, 1, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*8*/ {8, 24, 210, 713, 27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1, 2, 4, },//for_LG_demo
};

//No.028
unsigned short DynamicOptimizeSystem_028_y2[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 51, 582, 9, 12, 12, 6, 3, 3, 3, 3, 5, 8, 10, 16, 24, 53, 55, 34, 26, 18, 15, 18, 11, 6, 1, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 20, 3, 3, 596, 10, 14, 12, 5, 3, 4, 4, 4, 9, 11, 16, 27, 61, 55, 35, 29, 15, 22, 13, 11, 1, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 91, 556, 8, 12, 12, 5, 3, 3, 3, 3, 5, 8, 10, 16, 23, 53, 54, 32, 25, 18, 13, 19, 9, 4, 1, 0, 0, 0, 1, 0, 0, },
	/*3*/ {0, 0, 0, 228, 22, 27, 25, 20, 19, 20, 22, 28, 37, 65, 109, 103, 103, 56, 40, 13, 4, 5, 14, 8, 6, 3, 4, 7, 0, 0, 0, 0, },
	/*4*/ {0, 0, 577, 8, 10, 11, 10, 9, 10, 11, 12, 15, 21, 23, 24, 51, 36, 38, 37, 35, 22, 13, 5, 2, 2, 1, 1, 1, 1, 0, 0, 0, },
	/*5*/ {616, 8, 12, 12, 7, 3, 3, 3, 3, 3, 7, 9, 11, 16, 23, 51, 55, 37, 25, 23, 12, 20, 11, 11, 2, 0, 0, 0, 0, 1, 0, 0, },
	/*6*/ {23, 13, 590, 9, 12, 12, 6, 3, 3, 3, 3, 5, 9, 11, 15, 25, 53, 52, 39, 27, 20, 15, 17, 10, 7, 1, 0, 0, 0, 1, 0, 0, },
	/*7*/ {0, 289, 305, 7, 9, 10, 10, 8, 9, 10, 12, 15, 21, 21, 24, 50, 36, 37, 36, 32, 20, 12, 4, 2, 2, 1, 1, 1, 1, 1, 0, 0, },
	/*8*/ {0, 0, 577, 8, 10, 11, 10, 9, 10, 11, 12, 15, 21, 23, 24, 51, 36, 38, 37, 35, 22, 13, 5, 2, 2, 1, 1, 1, 1, 0, 0, 0, }
};

unsigned short DynamicOptimizeSystem_028_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
    /*0*/ {1, 3, 22, 539, 133, 17, 5, 1, 0, 0, 1, 3, 18, 25, 42, 45, 49, 35, 48, 0, 0, 0, 0, 0, },
    /*1*/ {1, 3, 21, 542, 136, 17, 5, 1, 0, 0, 1, 3, 17, 24, 41, 46, 52, 36, 42, 0, 0, 0, 0, 0, },
    /*2*/ {0, 1, 13, 597, 118, 16, 1, 0, 0, 0, 0, 0, 3, 15, 131, 78, 22, 0, 0, 0, 0, 0, 0, 0, },
    /*3*/ {0, 2, 43, 805, 92, 14, 6, 6, 5, 3, 4, 5, 3, 1, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, },
    /*4*/ {8, 24, 210, 713, 27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1, 2, 4, },
    /*5*/ {0, 2, 26, 585, 105, 12, 3, 0, 0, 0, 0, 0, 4, 15, 51, 90, 81, 14, 2, 0, 0, 0, 0, 0, },
    /*6*/ {2, 4, 32, 599, 100, 11, 3, 0, 0, 0, 0, 0, 2, 8, 27, 58, 83, 45, 15, 0, 0, 0, 0, 1, },
    /*7*/ {0, 2, 43, 805, 92, 14, 6, 6, 5, 3, 4, 5, 3, 1, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, },
    /*8*/ {8, 24, 210, 713, 27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1, 2, 4, }
};


//No.032
unsigned short DynamicOptimizeSystem_032_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 70, 248, 73, 98, 108, 117, 66, 27, 20, 21, 21, 18, 16, 14, 13, 12, 12, 11, 8, 4, 3, 3, 1, 1, 0, 0, 0, 1, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 282, 97, 101, 109, 131, 67, 28, 24, 25, 19, 18, 16, 15, 13, 13, 11, 7, 4, 3, 2, 1, 1, 0, 0, 1, 0, 0, 0, },
	/*2*/ {0, 2, 32, 41, 78, 126, 129, 104, 66, 45, 38, 27, 23, 21, 17, 17, 15, 14, 16, 21, 30, 53, 40, 18, 7, 3, 1, 1, 1, 0, 0, 0, },
	/*3*/ {0, 2, 32, 41, 78, 126, 129, 104, 66, 45, 38, 27, 23, 21, 17, 17, 15, 14, 16, 21, 30, 53, 40, 18, 7, 3, 1, 1, 1, 0, 0, 0, },
	/*4*/ {0, 2, 32, 41, 78, 126, 129, 104, 66, 45, 38, 27, 23, 21, 17, 17, 15, 14, 16, 21, 30, 53, 40, 18, 7, 3, 1, 1, 1, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 70, 248, 73, 98, 108, 117, 66, 27, 20, 21, 21, 18, 16, 14, 13, 12, 12, 11, 8, 4, 3, 3, 1, 1, 0, 0, 0, 1, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 282, 97, 101, 109, 131, 67, 28, 24, 25, 19, 18, 16, 15, 13, 13, 11, 7, 4, 3, 2, 1, 1, 0, 0, 1, 0, 0, 0, },
	/*7*/ {0, 2, 32, 41, 78, 126, 129, 104, 66, 45, 38, 27, 23, 21, 17, 17, 15, 14, 16, 21, 30, 53, 40, 18, 7, 3, 1, 1, 1, 0, 0, 0, },
	/*8*/ {0, 2, 32, 41, 78, 126, 129, 104, 66, 45, 38, 27, 23, 21, 17, 17, 15, 14, 16, 21, 30, 53, 40, 18, 7, 3, 1, 1, 1, 0, 0, 0, },//for_LG_demo

};

//No.032
unsigned short DynamicOptimizeSystem_032_y2[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 38, 180, 117, 147, 118, 101, 49, 30, 26, 24, 22, 21, 20, 18, 14, 13, 13, 9, 7, 6, 4, 3, 2, 1, 1, 0, 1, 1, 0, 0, 0, },
	/*1*/ {0, 38, 180, 117, 147, 118, 101, 49, 30, 26, 24, 22, 21, 20, 18, 14, 13, 13, 9, 7, 6, 4, 3, 2, 1, 1, 0, 1, 1, 0, 0, 0, },
	/*2*/ {0, 1, 24, 32, 58, 111, 129, 108, 73, 50, 38, 27, 22, 22, 21, 19, 18, 18, 18, 24, 28, 47, 51, 24, 12, 5, 3, 1, 1, 0, 0, 0, },
	/*3*/ {0, 1, 24, 32, 58, 111, 129, 108, 73, 50, 38, 27, 22, 22, 21, 19, 18, 18, 18, 24, 28, 47, 51, 24, 12, 5, 3, 1, 1, 0, 0, 0, },
	/*4*/ {0, 1, 24, 32, 58, 111, 129, 108, 73, 50, 38, 27, 22, 22, 21, 19, 18, 18, 18, 24, 28, 47, 51, 24, 12, 5, 3, 1, 1, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 38, 180, 117, 147, 118, 101, 49, 30, 26, 24, 22, 21, 20, 18, 14, 13, 13, 9, 7, 6, 4, 3, 2, 1, 1, 0, 1, 1, 0, 0, 0, },
	/*6*/ {0, 38, 180, 117, 147, 118, 101, 49, 30, 26, 24, 22, 21, 20, 18, 14, 13, 13, 9, 7, 6, 4, 3, 2, 1, 1, 0, 1, 1, 0, 0, 0, },
	/*7*/ {0, 1, 24, 32, 58, 111, 129, 108, 73, 50, 38, 27, 22, 22, 21, 19, 18, 18, 18, 24, 28, 47, 51, 24, 12, 5, 3, 1, 1, 0, 0, 0, },
	/*8*/ {0, 1, 24, 32, 58, 111, 129, 108, 73, 50, 38, 27, 22, 22, 21, 19, 18, 18, 18, 24, 28, 47, 51, 24, 12, 5, 3, 1, 1, 0, 0, 0, },//for_LG_demo
};

//No.035
unsigned short DynamicOptimizeSystem_035_y[][32]= //ntst 04:47   pal 05:44
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 4, 229, 615, 108, 9, 5, 4, 3, 3, 3, 2, 1, 0, 1, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 35, 806, 142, 2, 2, 2, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 1, 154, 762, 59, 3, 3, 3, 2, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 1, 125, 697, 152, 6, 2, 2, 2, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 4, 244, 516, 187, 25, 3, 2, 2, 2, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 4, 229, 615, 108, 9, 5, 4, 3, 3, 3, 2, 1, 0, 1, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 35, 806, 142, 2, 2, 2, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 1, 125, 697, 152, 6, 2, 2, 2, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 4, 244, 516, 187, 25, 3, 2, 2, 2, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo


};

unsigned short DynamicOptimizeSystem_035_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 1, 1, 1, 10, 94, 479, 0, 0, 0, 0, 0, 20, 9, 16, 30, 188, 95, 38, 6, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 2, 18, 10, 6, 2, 5, 9, 10, 11, 38, 116, 253, 315, 181, 13, 1, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 199, 393, 311, 69, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 300, 226, 465, 1, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 34, 475, 467, 17, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 1, 1, 1, 10, 94, 479, 0, 0, 0, 0, 0, 20, 9, 16, 30, 188, 95, 38, 6, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 2, 18, 10, 6, 2, 5, 9, 10, 11, 38, 116, 253, 315, 181, 13, 1, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 300, 226, 465, 1, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 34, 475, 467, 17, 0, 0, 0, 0, 0, 0, },//for_LG_demo
};

unsigned short DynamicOptimizeSystem_035_y2[][32]= //nstc 04:51 pal:05:48
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW

	/*0*/ {0, 0, 59, 900, 32, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 16, 831, 144, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 62, 910, 17, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 43, 870, 79, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 1, 181, 629, 174, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 0, 59, 900, 32, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 16, 831, 144, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 43, 870, 79, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 1, 181, 629, 174, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo

};

unsigned short DynamicOptimizeSystem_035_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 2, 104, 861, 0, 0, 0, 0, 0, 2, 1, 2, 3, 13, 5, 1, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 2, 120, 846, 0, 0, 0, 0, 0, 1, 1, 2, 3, 13, 5, 1, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 17, 234, 441, 265, 41, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 357, 277, 342, 22, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 75, 504, 380, 35, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 2, 104, 861, 0, 0, 0, 0, 0, 2, 1, 2, 3, 13, 5, 1, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 2, 120, 846, 0, 0, 0, 0, 0, 1, 1, 2, 3, 13, 5, 1, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 357, 277, 342, 22, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 75, 504, 380, 35, 0, 0, 0, 0, 0, 0, },
};

unsigned short DynamicOptimizeSystem_035_y3[][32]= //nstc 04:53  pal 05:52
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 28, 958, 9, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 5, 891, 98, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 35, 958, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 19, 937, 40, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 111, 732, 151, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
	/*5*/ {0, 0, 28, 958, 9, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 5, 891, 98, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 19, 937, 40, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 111, 732, 151, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//for_LG_demo
};

//No.039
unsigned short DynamicOptimizeSystem_039_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 22, 12, 44, 28, 19, 19, 18, 18, 19, 17, 17, 18, 47, 202, 272, 169, 51, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },


};

unsigned short DynamicOptimizeSystem_039_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 535, 454, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

//No.044
unsigned short DynamicOptimizeSystem_044_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 1, 3, 6, 8, 9, 10, 10, 10, 10, 65, 96, 392, 55, 29, 38, 46, 52, 63, 43, 21, 1, 0, 0, 1, 1, 16, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 2, 5, 7, 8, 11, 10, 11, 11, 61, 67, 422, 63, 32, 42, 50, 62, 64, 32, 10, 0, 0, 1, 1, 16, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 1, 3, 6, 8, 9, 10, 10, 10, 10, 65, 96, 392, 55, 29, 38, 46, 52, 63, 43, 21, 1, 0, 0, 1, 1, 16, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 2, 5, 7, 8, 11, 10, 11, 11, 61, 67, 422, 63, 32, 42, 50, 62, 64, 32, 10, 0, 0, 1, 1, 16, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

unsigned short DynamicOptimizeSystem_044_hue[][COLOR_HUE_HISTOGRAM_LEVEL] = //ntsc 03:25 pal:
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {57, 479, 48, 344, 33, 16, 5, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 1, 0, 0, 1, },
	/*1*/ {60, 476, 47, 345, 32, 15, 7, 2, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 5, 1, 0, 0, 1, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {57, 479, 48, 344, 33, 16, 5, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 1, 0, 0, 1, },
	/*6*/ {60, 476, 47, 345, 32, 15, 7, 2, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 5, 1, 0, 0, 1, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

//No.047
unsigned short DynamicOptimizeSystem_047_y[][32]= //ntsc 03:25  pal:
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 4, 826, 7, 17, 21, 24, 30, 34, 9, 8, 5, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 4, 826, 7, 17, 21, 24, 30, 34, 9, 8, 5, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 2, 2, 4, 854, 7, 15, 17, 20, 20, 22, 9, 5, 6, 2, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 2, 4, 5, 9, 683, 16, 20, 28, 30, 36, 43, 45, 18, 16, 23, 8, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 2, 4, 5, 9, 683, 16, 20, 28, 30, 36, 43, 45, 18, 16, 23, 8, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 4, 826, 7, 17, 21, 24, 30, 34, 9, 8, 5, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 4, 826, 7, 17, 21, 24, 30, 34, 9, 8, 5, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 2, 4, 5, 9, 683, 16, 20, 28, 30, 36, 43, 45, 18, 16, 23, 8, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 2, 4, 5, 9, 683, 16, 20, 28, 30, 36, 43, 45, 18, 16, 23, 8, 0, 0, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_047_hue[][COLOR_HUE_HISTOGRAM_LEVEL] = //ntsc 03:25 pal:
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 91, 907, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 91, 907, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 6, 296, 695, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 207, 791, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 207, 791, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 91, 907, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 91, 907, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 207, 791, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 207, 791, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_047_y2[][32]= //ntsc 0:03:26 pal :04:08
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 1, 2, 4, 6, 10, 14, 14, 11, 9, 13, 534, 17, 24, 31, 38, 50, 61, 60, 62, 24, 2, 1, 2, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 1, 2, 4, 6, 10, 14, 14, 11, 9, 13, 534, 17, 24, 31, 38, 50, 61, 60, 62, 24, 2, 1, 2, 0, 0, 0, },
	/*2*/ {0, 0, 0, 2, 3, 5, 7, 9, 12, 16, 17, 12, 9, 9, 13, 714, 9, 12, 14, 15, 17, 21, 24, 28, 19, 1, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 1, 2, 3, 5, 6, 7, 8, 8, 10, 494, 20, 19, 28, 33, 38, 52, 62, 59, 67, 54, 7, 2, 2, 1, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 1, 2, 3, 5, 6, 7, 8, 8, 10, 494, 20, 19, 28, 33, 38, 52, 62, 59, 67, 54, 7, 2, 2, 1, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 1, 2, 4, 6, 10, 14, 14, 11, 9, 13, 534, 17, 24, 31, 38, 50, 61, 60, 62, 24, 2, 1, 2, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 1, 2, 4, 6, 10, 14, 14, 11, 9, 13, 534, 17, 24, 31, 38, 50, 61, 60, 62, 24, 2, 1, 2, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 1, 2, 3, 5, 6, 7, 8, 8, 10, 494, 20, 19, 28, 33, 38, 52, 62, 59, 67, 54, 7, 2, 2, 1, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 1, 2, 3, 5, 6, 7, 8, 8, 10, 494, 20, 19, 28, 33, 38, 52, 62, 59, 67, 54, 7, 2, 2, 1, 0, 0, },

};

//No.49
unsigned short DynamicOptimizeSystem_049_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 10, 17, 35, 90, 105, 101, 91, 83, 70, 60, 52, 54, 48, 44, 38, 29, 24, 18, 11, 6, 3, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 10, 17, 35, 90, 105, 101, 91, 83, 70, 60, 52, 54, 48, 44, 38, 29, 24, 18, 11, 6, 3, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 10, 17, 35, 90, 105, 101, 91, 83, 70, 60, 52, 54, 48, 44, 38, 29, 24, 18, 11, 6, 3, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 9, 18, 51, 129, 167, 155, 126, 97, 64, 42, 36, 34, 25, 17, 11, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 10, 17, 35, 90, 105, 101, 91, 83, 70, 60, 52, 54, 48, 44, 38, 29, 24, 18, 11, 6, 3, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 10, 17, 35, 90, 105, 101, 91, 83, 70, 60, 52, 54, 48, 44, 38, 29, 24, 18, 11, 6, 3, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 10, 17, 35, 90, 105, 101, 91, 83, 70, 60, 52, 54, 48, 44, 38, 29, 24, 18, 11, 6, 3, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 9, 18, 51, 129, 167, 155, 126, 97, 64, 42, 36, 34, 25, 17, 11, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 10, 17, 35, 90, 105, 101, 91, 83, 70, 60, 52, 54, 48, 44, 38, 29, 24, 18, 11, 6, 3, 1, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_049_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 1, 110, 343, 421, 119, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },

};


//No.50
unsigned short DynamicOptimizeSystem_050_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,13,64,1,5,9,0,5,12,9,11,1,2,11,1,540,37,7,44,9,6,31,18,19,3,8,35,6,13,65,0,0},
	/*1*/ {0,13,64,1,5,9,0,5,12,9,11,1,2,11,1,540,37,7,44,9,6,31,18,19,3,8,35,6,13,65,0,0},
	/*2*/ {0,13,64,1,5,9,0,5,12,9,11,1,2,11,1,540,37,7,44,9,6,31,18,19,3,8,35,6,13,65,0,0},
	/*3*/ {0,0,0,71,6,0,14,0,5,21,11,0,3,11,2,571,12,44,9,3,32,22,22,7,35,8,12,66,0,0,0,0},
	/*4*/ {0,0,0,71,6,0,14,0,5,21,11,0,3,11,2,571,12,44,9,3,32,22,22,7,35,8,12,66,0,0,0,0},
	/*5*/ {0,13,64,1,5,9,0,5,12,9,11,1,2,11,1,540,37,7,44,9,6,31,18,19,3,8,35,6,13,65,0,0},
	/*6*/ {0,13,64,1,5,9,0,5,12,9,11,1,2,11,1,540,37,7,44,9,6,31,18,19,3,8,35,6,13,65,0,0},
	/*7*/ {0,13,64,1,5,9,0,5,12,9,11,1,2,11,1,540,37,7,44,9,6,31,18,19,3,8,35,6,13,65,0,0},
	/*8*/ {0,13,64,1,5,9,0,5,12,9,11,1,2,11,1,540,37,7,44,9,6,31,18,19,3,8,35,6,13,65,0,0},
};
unsigned short DynamicOptimizeSystem_050_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1,2,153,3,5,153,8,5,7,7,151,8,6,12,148,6,4,153,1,1,0,1,152,1},
	/*1*/ {1,2,153,3,5,153,8,5,7,7,151,8,6,12,148,6,4,153,1,1,0,1,152,1},
	/*2*/ {1,2,153,3,5,153,8,5,7,7,151,8,6,12,148,6,4,153,1,1,0,1,152,1},
	/*3*/ {1,15,140,2,3,14,146,4,9,45,125,8,6,122,33,3,3,80,74,0,0,30,125,1},
	/*4*/ {1,15,140,2,3,14,146,4,9,45,125,8,6,122,33,3,3,80,74,0,0,30,125,1},
	/*5*/ {1,2,153,3,5,153,8,5,7,7,151,8,6,12,148,6,4,153,1,1,0,1,152,1},
	/*6*/ {1,2,153,3,5,153,8,5,7,7,151,8,6,12,148,6,4,153,1,1,0,1,152,1},
	/*7*/ {1,2,153,3,5,153,8,5,7,7,151,8,6,12,148,6,4,153,1,1,0,1,152,1},
	/*8*/ {1,2,153,3,5,153,8,5,7,7,151,8,6,12,148,6,4,153,1,1,0,1,152,1},
};

//No.63
unsigned short DynamicOptimizeSystem_063_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 13, 5, 0, 19, 29, 15, 17, 28, 45, 30, 36, 53, 74, 79, 84, 89, 80, 66, 54, 51, 47, 45, 23, 2, 1, 0, 2, 0, 0, 0, 0, },
	/*1*/ {0, 12, 4, 0, 0, 0, 22, 31, 15, 22, 39, 43, 31, 51, 78, 79, 90, 100, 81, 66, 61, 54, 55, 38, 9, 1, 1, 2, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 17, 25, 15, 15, 27, 41, 40, 38, 46, 69, 78, 108, 96, 96, 78, 54, 46, 34, 31, 22, 8, 1, 1, 1, 1, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 6, 37, 21, 19, 34, 49, 36, 47, 68, 89, 87, 105, 84, 75, 63, 58, 68, 34, 4, 0, 1, 2, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 17, 25, 15, 15, 27, 41, 40, 38, 46, 69, 78, 108, 96, 96, 78, 54, 46, 34, 31, 22, 8, 1, 1, 1, 1, 0, 0, 0, },
	/*5*/ {21, 0, 24, 33, 18, 15, 25, 36, 45, 32, 44, 74, 78, 96, 97, 76, 71, 56, 44, 32, 20, 15, 10, 16, 6, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {21, 0, 0, 0, 16, 29, 14, 17, 27, 42, 36, 35, 57, 85, 93, 119, 103, 80, 70, 48, 32, 23, 15, 12, 10, 1, 0, 1, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 17, 25, 15, 15, 27, 41, 40, 38, 46, 69, 78, 108, 96, 96, 78, 54, 46, 34, 31, 22, 8, 1, 1, 1, 1, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 17, 25, 15, 15, 27, 41, 40, 38, 46, 69, 78, 108, 96, 96, 78, 54, 46, 34, 31, 22, 8, 1, 1, 1, 1, 0, 0, 0, },
};

unsigned short DynamicOptimizeSystem_063_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 50, 319, 479, 38, 31, 7, 6, 5, 3, 7, 51, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 49, 315, 487, 36, 29, 7, 6, 4, 3, 6, 52, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 49, 379, 429, 38, 27, 5, 7, 2, 2, 6, 51, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 49, 379, 429, 38, 27, 5, 7, 2, 2, 6, 51, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 49, 379, 429, 38, 27, 5, 7, 2, 2, 6, 51, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 71, 362, 440, 42, 28, 9, 4, 2, 4, 8, 22, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 52, 388, 429, 37, 29, 7, 6, 2, 2, 8, 34, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 49, 379, 429, 38, 27, 5, 7, 2, 2, 6, 51, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 49, 379, 429, 38, 27, 5, 7, 2, 2, 6, 51, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};



//No.75
unsigned short DynamicOptimizeSystem_075_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 1, 12, 41, 48, 58, 70, 68, 53, 50, 79, 170, 65, 40, 41, 44, 41, 36, 28, 23, 18, 3, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 2, 16, 46, 44, 57, 61, 50, 48, 43, 181, 129, 47, 53, 55, 52, 40, 34, 24, 6, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 21, 4, 4, 19, 46, 48, 61, 69, 55, 50, 46, 133, 146, 41, 39, 40, 42, 42, 32, 23, 18, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 10, 44, 55, 62, 67, 58, 54, 62, 221, 69, 50, 55, 57, 48, 34, 25, 15, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 12, 41, 48, 58, 70, 68, 53, 50, 79, 170, 65, 40, 41, 44, 41, 36, 28, 23, 18, 3, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {21, 4, 14, 40, 39, 42, 52, 48, 45, 45, 41, 137, 151, 42, 40, 42, 45, 44, 31, 25, 20, 16, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {21, 0, 0, 2, 15, 44, 42, 50, 55, 49, 50, 46, 84, 209, 46, 44, 45, 48, 47, 31, 25, 19, 10, 1, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 2, 15, 47, 50, 59, 69, 61, 50, 47, 81, 182, 57, 39, 41, 42, 43, 37, 28, 19, 16, 2, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 1, 12, 41, 48, 58, 70, 68, 53, 50, 79, 170, 65, 40, 41, 44, 41, 36, 28, 23, 18, 3, 0, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_075_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 2, 85, 104, 372, 216, 68, 33, 52, 20, 4, 0, 1, 5, 2, 6, 9, 6, 1, 0, 0, 0, 0, 0, },
	/*1*/ {0, 10, 120, 64, 305, 241, 82, 44, 58, 30, 7, 0, 0, 0, 1, 7, 8, 8, 2, 1, 0, 0, 0, 0, },
	/*2*/ {1, 2, 76, 77, 414, 178, 67, 50, 67, 22, 1, 0, 1, 1, 2, 6, 10, 9, 2, 1, 1, 0, 0, 0, },
	/*3*/ {0, 2, 127, 79, 424, 151, 57, 38, 61, 29, 3, 0, 0, 0, 1, 4, 6, 7, 1, 0, 0, 0, 0, 0, },
	/*4*/ {0, 2, 85, 104, 372, 216, 68, 33, 52, 20, 4, 0, 1, 5, 2, 6, 9, 6, 1, 0, 0, 0, 0, 0, },
	/*5*/ {0, 5, 132, 77, 401, 159, 66, 37, 64, 25, 3, 0, 0, 0, 1, 4, 6, 7, 2, 1, 0, 0, 0, 0, },
	/*6*/ {0, 3, 133, 73, 400, 165, 65, 36, 65, 25, 2, 0, 0, 0, 1, 4, 7, 7, 1, 1, 0, 0, 0, 0, },
	/*7*/ {0, 12, 157, 79, 432, 134, 35, 29, 60, 27, 4, 0, 0, 0, 1, 4, 6, 8, 1, 0, 0, 0, 0, 0, },
	/*8*/ {0, 2, 85, 104, 372, 216, 68, 33, 52, 20, 4, 0, 1, 5, 2, 6, 9, 6, 1, 0, 0, 0, 0, 0, },
};





unsigned short DynamicOptimizeSystem_075_y2[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 16, 5, 6, 13, 25, 31, 31, 47, 45, 39, 38, 119, 261, 41, 41, 44, 41, 41, 31, 26, 18, 13, 6, 7, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 16, 5, 0, 0, 5, 17, 27, 28, 42, 53, 44, 42, 71, 292, 50, 52, 55, 50, 42, 33, 26, 18, 8, 8, 1, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 21, 4, 4, 19, 46, 48, 61, 69, 55, 50, 46, 133, 146, 41, 39, 40, 42, 42, 32, 23, 18, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 1, 12, 41, 48, 58, 70, 68, 53, 50, 79, 170, 65, 40, 41, 44, 41, 36, 28, 23, 18, 3, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 12, 41, 48, 58, 70, 68, 53, 50, 79, 170, 65, 40, 41, 44, 41, 36, 28, 23, 18, 3, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {22, 5, 12, 23, 28, 27, 36, 42, 33, 32, 68, 173, 195, 34, 33, 37, 37, 37, 30, 26, 22, 16, 9, 5, 5, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 16, 5, 0, 0, 5, 17, 27, 28, 42, 53, 44, 42, 71, 292, 50, 52, 55, 50, 42, 33, 26, 18, 8, 8, 1, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 3, 13, 25, 32, 30, 40, 44, 35, 34, 134, 254, 65, 35, 41, 40, 39, 34, 29, 25, 18, 8, 6, 3, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 1, 12, 41, 48, 58, 70, 68, 53, 50, 79, 170, 65, 40, 41, 44, 41, 36, 28, 23, 18, 3, 0, 0, 0, 0, 0, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_075_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1, 2, 92, 105, 367, 186, 70, 47, 62, 24, 2, 0, 1, 1, 2, 6, 8, 10, 2, 1, 1, 0, 0, 0, },
	/*1*/ {0, 1, 76, 71, 339, 246, 81, 52, 63, 25, 3, 1, 1, 2, 2, 6, 10, 7, 1, 0, 0, 0, 0, 0, },
	/*2*/ {1, 2, 76, 77, 414, 178, 67, 50, 67, 22, 1, 0, 1, 1, 2, 6, 10, 9, 2, 1, 1, 0, 0, 0, },
	/*3*/ {0, 2, 85, 104, 372, 216, 68, 33, 52, 20, 4, 0, 1, 5, 2, 6, 9, 6, 1, 0, 0, 0, 0, 0, },
	/*4*/ {0, 2, 85, 104, 372, 216, 68, 33, 52, 20, 4, 0, 1, 5, 2, 6, 9, 6, 1, 0, 0, 0, 0, 0, },
	/*5*/ {0, 2, 83, 107, 401, 184, 69, 32, 50, 16, 1, 1, 2, 13, 4, 5, 11, 6, 1, 0, 0, 0, 0, 0, },
	/*6*/ {0, 1, 76, 71, 339, 246, 81, 52, 63, 25, 3, 1, 1, 2, 2, 6, 10, 7, 1, 0, 0, 0, 0, 0, },
	/*7*/ {0, 2, 82, 97, 430, 157, 57, 38, 52, 22, 4, 0, 1, 10, 5, 8, 12, 8, 1, 1, 0, 0, 0, 0, },
	/*8*/ {0, 2, 85, 104, 372, 216, 68, 33, 52, 20, 4, 0, 1, 5, 2, 6, 9, 6, 1, 0, 0, 0, 0, 0, },
};

//No.107
unsigned short DynamicOptimizeSystem_107_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 17, 5, 1, 11, 22, 25, 44, 36, 29, 41, 32, 46, 64, 71, 80, 96, 69, 52, 46, 45, 48, 42, 20, 21, 15, 2, 1, 3, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 7, 23, 20, 41, 37, 50, 33, 36, 52, 82, 88, 119, 87, 60, 58, 57, 53, 34, 18, 21, 8, 1, 1, 1, 0, 0, },
	/*2*/ {0, 24, 2, 0, 8, 30, 22, 42, 28, 35, 39, 36, 51, 56, 69, 84, 107, 73, 53, 43, 51, 44, 33, 20, 13, 16, 2, 1, 3, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 1, 1, 31, 28, 39, 32, 48, 38, 49, 63, 76, 96, 123, 80, 57, 45, 53, 51, 29, 18, 22, 2, 3, 2, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 2, 6, 30, 25, 35, 42, 18, 40, 19, 25, 43, 69, 76, 82, 96, 82, 58, 50, 44, 41, 23, 21, 33, 10, 2, 1, 10, 0, 0, },
	/*5*/ {0, 17, 5, 1, 11, 22, 25, 44, 36, 29, 41, 32, 46, 64, 71, 80, 96, 69, 52, 46, 45, 48, 42, 20, 21, 15, 2, 1, 3, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 7, 23, 20, 41, 37, 50, 33, 36, 52, 82, 88, 119, 87, 60, 58, 57, 53, 34, 18, 21, 8, 1, 1, 1, 0, 0, },
	/*7*/ {0, 0, 0, 1, 8, 28, 25, 35, 41, 19, 40, 19, 25, 43, 69, 78, 80, 95, 85, 61, 48, 44, 40, 25, 20, 29, 11, 3, 2, 8, 0, 0, },
	/*8*/ {0, 0, 0, 2, 6, 30, 25, 35, 42, 18, 40, 19, 25, 43, 69, 76, 82, 96, 82, 58, 50, 44, 41, 23, 21, 33, 10, 2, 1, 10, 0, 0, },
};
unsigned short DynamicOptimizeSystem_107_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3, 6, 9, 154, 354, 69, 33, 18, 12, 10, 11, 13, 41, 30, 50, 48, 114, 10, 0, 0, 0, 0, 0, 1, },
	/*1*/ {2, 5, 7, 198, 368, 34, 21, 8, 6, 4, 6, 10, 50, 37, 60, 51, 105, 17, 0, 0, 0, 0, 0, 0, },
	/*2*/ {3, 4, 17, 138, 404, 41, 37, 16, 19, 9, 8, 11, 29, 36, 54, 44, 104, 12, 1, 0, 0, 0, 0, 1, },
	/*3*/ {2, 10, 24, 254, 360, 37, 18, 11, 11, 2, 3, 4, 6, 18, 45, 36, 118, 25, 2, 1, 0, 0, 0, 1, },
	/*4*/ {1, 7, 21, 221, 398, 52, 15, 8, 4, 2, 3, 4, 11, 25, 48, 30, 121, 17, 1, 0, 0, 0, 0, 0, },
	/*5*/ {3, 6, 9, 154, 354, 69, 33, 18, 12, 10, 11, 13, 41, 30, 50, 48, 114, 10, 0, 0, 0, 0, 0, 1, },
	/*6*/ {2, 5, 7, 198, 368, 34, 21, 8, 6, 4, 6, 10, 50, 37, 60, 51, 105, 17, 0, 0, 0, 0, 0, 0, },
	/*7*/ {2, 10, 24, 254, 360, 37, 18, 11, 11, 2, 3, 4, 6, 18, 45, 36, 118, 25, 2, 1, 0, 0, 0, 1, },
	/*8*/ {1, 7, 21, 221, 398, 52, 15, 8, 4, 2, 3, 4, 11, 25, 48, 30, 121, 17, 1, 0, 0, 0, 0, 0, },
};

//No.123
unsigned short DynamicOptimizeSystem_123_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1, 32, 3, 1, 0, 2, 60, 1, 141, 160, 66, 12, 202, 188, 26, 31, 11, 27, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 2, 32, 1, 0, 3, 59, 2, 189, 167, 18, 16, 373, 31, 34, 14, 39, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {1, 32, 3, 1, 0, 2, 60, 1, 141, 160, 66, 12, 202, 188, 26, 31, 11, 27, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 4, 31, 0, 0, 0, 61, 0, 125, 149, 101, 11, 167, 228, 25, 30, 12, 21, 25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, },
	/*4*/ {1, 32, 3, 1, 0, 2, 60, 1, 141, 160, 66, 12, 202, 188, 26, 31, 11, 27, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {53, 1, 0, 1, 54, 2, 99, 128, 138, 15, 10, 362, 30, 27, 19, 11, 32, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {23, 20, 10, 1, 0, 1, 54, 4, 147, 168, 57, 11, 244, 147, 26, 25, 12, 36, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 4, 31, 0, 0, 0, 61, 0, 125, 149, 101, 11, 167, 228, 25, 30, 12, 21, 25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, },
	/*8*/ {1, 32, 3, 1, 0, 2, 60, 1, 141, 160, 66, 12, 202, 188, 26, 31, 11, 27, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_123_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5, 122, 326, 1, 1, 1, 0, 2, 4, 50, 95, 7, 4, 3, 3, 7, 59, 8, 3, 4, 7, 59, 210, 7, },
	/*1*/ {4, 69, 368, 9, 3, 2, 2, 4, 4, 58, 95, 7, 4, 3, 3, 6, 61, 5, 2, 4, 6, 65, 199, 7, },
	/*2*/ {5, 122, 326, 1, 1, 1, 0, 2, 4, 50, 95, 7, 4, 3, 3, 7, 59, 8, 3, 4, 7, 59, 210, 7, },
	/*3*/ {2, 107, 326, 12, 3, 1, 0, 0, 1, 59, 124, 5, 2, 1, 2, 6, 57, 4, 2, 3, 3, 87, 181, 2, },
	/*4*/ {5, 122, 326, 1, 1, 1, 0, 2, 4, 50, 95, 7, 4, 3, 3, 7, 59, 8, 3, 4, 7, 59, 210, 7, },
	/*5*/ {4, 145, 280, 14, 2, 1, 2, 2, 6, 99, 78, 5, 2, 2, 2, 8, 56, 5, 3, 3, 5, 80, 177, 7, },
	/*6*/ {4, 144, 276, 15, 3, 2, 2, 4, 7, 98, 78, 6, 3, 3, 3, 8, 55, 5, 3, 3, 5, 82, 172, 7, },
	/*7*/ {2, 107, 326, 12, 3, 1, 0, 0, 1, 59, 124, 5, 2, 1, 2, 6, 57, 4, 2, 3, 3, 87, 181, 2, },
	/*8*/ {5, 122, 326, 1, 1, 1, 0, 2, 4, 50, 95, 7, 4, 3, 3, 7, 59, 8, 3, 4, 7, 59, 210, 7, },
};

//No.132
unsigned short DynamicOptimizeSystem_132_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 85, 4, 0, 133, 1, 0, 0, 1, 134, 0, 1, 98, 0, 0, 1, 126, 1, 1, 136, 1, 0, 0, 3, 133, 1, 6, 120, 0, 0, },
	/*1*/ {0, 0, 0, 85, 4, 0, 133, 1, 0, 0, 1, 134, 0, 1, 98, 0, 0, 1, 126, 1, 1, 136, 1, 0, 0, 3, 133, 1, 6, 120, 0, 0, },
	/*2*/ {0, 13, 93, 0, 1, 129, 0, 0, 0, 2, 129, 0, 0, 129, 0, 0, 0, 0, 122, 0, 0, 119, 0, 0, 0, 0, 109, 1, 2, 137, 0, 0, },
	/*3*/ {0, 13, 93, 0, 1, 129, 0, 0, 0, 2, 129, 0, 0, 129, 0, 0, 0, 0, 122, 0, 0, 119, 0, 0, 0, 0, 109, 1, 2, 137, 0, 0, },
	/*4*/ {0, 13, 93, 0, 1, 129, 0, 0, 0, 2, 129, 0, 0, 129, 0, 0, 0, 0, 122, 0, 0, 119, 0, 0, 0, 0, 109, 1, 2, 137, 0, 0, },
	/*5*/ {0, 0, 0, 85, 4, 0, 133, 1, 0, 0, 1, 134, 0, 1, 98, 0, 0, 1, 126, 1, 1, 136, 1, 0, 0, 3, 133, 1, 6, 120, 0, 0, },
	/*6*/ {0, 0, 0, 85, 4, 0, 133, 1, 0, 0, 1, 134, 0, 1, 98, 0, 0, 1, 126, 1, 1, 136, 1, 0, 0, 3, 133, 1, 6, 120, 0, 0, },
	/*7*/ {0, 13, 93, 0, 1, 129, 0, 0, 0, 2, 129, 0, 0, 129, 0, 0, 0, 0, 122, 0, 0, 119, 0, 0, 0, 0, 109, 1, 2, 137, 0, 0, },
	/*8*/ {0, 13, 93, 0, 1, 129, 0, 0, 0, 2, 129, 0, 0, 129, 0, 0, 0, 0, 122, 0, 0, 119, 0, 0, 0, 0, 109, 1, 2, 137, 0, 0, },
};
unsigned short DynamicOptimizeSystem_132_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2, 4, 167, 0, 0, 162, 11, 0, 1, 165, 4, 1, 1, 3, 164, 0, 0, 170, 3, 0, 1, 110, 17, 2, },
	/*1*/ {2, 4, 167, 0, 0, 162, 11, 0, 1, 165, 4, 1, 1, 3, 164, 0, 0, 170, 3, 0, 1, 110, 17, 2, },
	/*2*/ {2, 7, 137, 0, 0, 3, 170, 0, 0, 163, 8, 0, 3, 155, 12, 0, 0, 11, 153, 1, 0, 21, 139, 2, },
	/*3*/ {1, 6, 165, 0, 0, 0, 172, 0, 0, 5, 150, 0, 1, 13, 156, 0, 0, 14, 158, 0, 0, 4, 147, 0, },
	/*4*/ {1, 6, 165, 0, 0, 0, 172, 0, 0, 5, 150, 0, 1, 13, 156, 0, 0, 14, 158, 0, 0, 4, 147, 0, },
	/*5*/ {2, 4, 167, 0, 0, 162, 11, 0, 1, 165, 4, 1, 1, 3, 164, 0, 0, 170, 3, 0, 1, 110, 17, 2, },
	/*6*/ {2, 4, 167, 0, 0, 162, 11, 0, 1, 165, 4, 1, 1, 3, 164, 0, 0, 170, 3, 0, 1, 110, 17, 2, },
	/*7*/ {1, 6, 165, 0, 0, 0, 172, 0, 0, 5, 150, 0, 1, 13, 156, 0, 0, 14, 158, 0, 0, 4, 147, 0, },
	/*8*/ {1, 6, 165, 0, 0, 0, 172, 0, 0, 5, 150, 0, 1, 13, 156, 0, 0, 14, 158, 0, 0, 4, 147, 0, },
};

//No.133
unsigned short DynamicOptimizeSystem_133_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 27, 7, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 895, 2, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 37, 1, 0, 0, },
	/*1*/ {0, 26, 7, 1, 0, 0, 1, 0, 0, 0, 0, 3, 0, 0, 0, 0, 894, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2, 38, 0, 0, 0, },
	/*2*/ {1, 23, 2, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 938, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 16, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 946, 6, 1, 2, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 27, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 946, 6, 1, 2, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 27, 0, 0, },
	/*5*/ {0, 27, 7, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 895, 2, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 37, 1, 0, 0, },
	/*6*/ {0, 26, 7, 1, 0, 0, 1, 0, 0, 0, 0, 3, 0, 0, 0, 0, 894, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2, 38, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 946, 6, 1, 2, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 27, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 946, 6, 1, 2, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 27, 0, 0, },
};
unsigned short DynamicOptimizeSystem_133_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {8, 49, 110, 11, 18, 24, 45, 31, 30, 97, 98, 34, 58, 111, 42, 15, 14, 101, 64, 7, 13, 2, 2, 5, },
	/*1*/ {4, 26, 73, 7, 7, 11, 23, 45, 61, 242, 139, 115, 68, 29, 13, 10, 11, 68, 27, 4, 3, 3, 0, 1, },
	/*2*/ {2, 28, 82, 9, 13, 15, 14, 25, 43, 210, 124, 59, 78, 106, 58, 11, 10, 51, 54, 0, 0, 0, 1, 1, },
	/*3*/ {4, 71, 182, 13, 9, 9, 33, 17, 21, 214, 90, 1, 1, 1, 3, 4, 8, 192, 88, 18, 5, 2, 1, 2, },
	/*4*/ {4, 71, 182, 13, 9, 9, 33, 17, 21, 214, 90, 1, 1, 1, 3, 4, 8, 192, 88, 18, 5, 2, 1, 2, },
	/*5*/ {8, 49, 110, 11, 18, 24, 45, 31, 30, 97, 98, 34, 58, 111, 42, 15, 14, 101, 64, 7, 13, 2, 2, 5, },
	/*6*/ {4, 26, 73, 7, 7, 11, 23, 45, 61, 242, 139, 115, 68, 29, 13, 10, 11, 68, 27, 4, 3, 3, 0, 1, },
	/*7*/ {4, 71, 182, 13, 9, 9, 33, 17, 21, 214, 90, 1, 1, 1, 3, 4, 8, 192, 88, 18, 5, 2, 1, 2, },
	/*8*/ {4, 71, 182, 13, 9, 9, 33, 17, 21, 214, 90, 1, 1, 1, 3, 4, 8, 192, 88, 18, 5, 2, 1, 2, },
};
unsigned short DynamicOptimizeSystem_133_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {20, 33, 36, 12, 13, 13, 29, 32, 29, 45, 55, 31, 58, 20, 57, 243, 76, 100, 50, 13, 7, 4, 4, 6, },
	/*1*/ {4, 26, 73, 7, 7, 11, 23, 45, 61, 242, 139, 115, 68, 29, 13, 10, 11, 68, 27, 4, 3, 3, 0, 1, },
	/*2*/ {2, 28, 82, 9, 13, 15, 14, 25, 43, 210, 124, 59, 78, 106, 58, 11, 10, 51, 54, 0, 0, 0, 1, 1, },
	/*3*/ {4, 71, 182, 13, 9, 9, 33, 17, 21, 214, 90, 1, 1, 1, 3, 4, 8, 192, 88, 18, 5, 2, 1, 2, },
	/*4*/ {4, 71, 182, 13, 9, 9, 33, 17, 21, 214, 90, 1, 1, 1, 3, 4, 8, 192, 88, 18, 5, 2, 1, 2, },
	/*5*/ {20, 33, 36, 12, 13, 13, 29, 32, 29, 45, 55, 31, 58, 20, 57, 243, 76, 100, 50, 13, 7, 4, 4, 6, },
	/*6*/ {4, 26, 73, 7, 7, 11, 23, 45, 61, 242, 139, 115, 68, 29, 13, 10, 11, 68, 27, 4, 3, 3, 0, 1, },
	/*7*/ {4, 71, 182, 13, 9, 9, 33, 17, 21, 214, 90, 1, 1, 1, 3, 4, 8, 192, 88, 18, 5, 2, 1, 2, },
	/*8*/ {4, 71, 182, 13, 9, 9, 33, 17, 21, 214, 90, 1, 1, 1, 3, 4, 8, 192, 88, 18, 5, 2, 1, 2, },
};

//No.134
unsigned short DynamicOptimizeSystem_134_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 4, 1, 0, 0, 1, 967, 1, 5, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 4, 1, 0, 0, 1, 967, 1, 5, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 975, 1, 4, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 4, 1, 0, 0, 0, 962, 5, 1, 6, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 4, 1, 0, 0, 0, 962, 5, 1, 6, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 4, 1, 0, 0, 1, 967, 1, 5, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 4, 1, 0, 0, 1, 967, 1, 5, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 4, 1, 0, 0, 0, 962, 5, 1, 6, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 4, 1, 0, 0, 0, 962, 5, 1, 6, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_134_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2, 68, 157, 7, 8, 8, 27, 48, 45, 174, 132, 31, 24, 9, 8, 8, 10, 160, 56, 2, 3, 1, 1, 2, },
	/*1*/ {0, 112, 219, 6, 0, 0, 0, 0, 5, 145, 191, 3, 0, 0, 0, 0, 1, 160, 154, 0, 0, 0, 0, 0, },
	/*2*/ {18, 132, 162, 6, 6, 3, 3, 0, 5, 258, 78, 4, 0, 0, 1, 2, 5, 75, 233, 0, 0, 0, 0, 0, },
	/*3*/ {0, 108, 216, 5, 0, 0, 0, 0, 3, 212, 138, 2, 1, 0, 0, 0, 2, 184, 123, 0, 0, 0, 0, 0, },
	/*4*/ {0, 108, 216, 5, 0, 0, 0, 0, 3, 212, 138, 2, 1, 0, 0, 0, 2, 184, 123, 0, 0, 0, 0, 0, },
	/*5*/ {0, 112, 219, 6, 0, 0, 0, 0, 5, 145, 191, 3, 0, 0, 0, 0, 1, 160, 154, 0, 0, 0, 0, 0, },
	/*6*/ {0, 112, 219, 6, 0, 0, 0, 0, 5, 145, 191, 3, 0, 0, 0, 0, 1, 160, 154, 0, 0, 0, 0, 0, },
	/*7*/ {0, 108, 216, 5, 0, 0, 0, 0, 3, 212, 138, 2, 1, 0, 0, 0, 2, 184, 123, 0, 0, 0, 0, 0, },
	/*8*/ {0, 108, 216, 5, 0, 0, 0, 0, 3, 212, 138, 2, 1, 0, 0, 0, 2, 184, 123, 0, 0, 0, 0, 0, },
};


//No.135
unsigned short DynamicOptimizeSystem_135_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 946, 2, 2, 1, 1, 0, 0, 0, 1, 1, 1, 1, 6, 29, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 946, 2, 2, 1, 1, 0, 0, 0, 1, 1, 1, 1, 6, 29, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 953, 2, 2, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 21, 7, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 936, 10, 1, 2, 1, 0, 0, 0, 0, 0, 1, 1, 1, 2, 33, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 936, 10, 1, 2, 1, 0, 0, 0, 0, 0, 1, 1, 1, 2, 33, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 946, 2, 2, 1, 1, 0, 0, 0, 1, 1, 1, 1, 6, 29, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 946, 2, 2, 1, 1, 0, 0, 0, 1, 1, 1, 1, 6, 29, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 936, 10, 1, 2, 1, 0, 0, 0, 0, 0, 1, 1, 1, 2, 33, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 936, 10, 1, 2, 1, 0, 0, 0, 0, 0, 1, 1, 1, 2, 33, 0, 0, },
};
unsigned short DynamicOptimizeSystem_135_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 85, 232, 9, 4, 1, 0, 0, 9, 244, 92, 0, 0, 0, 0, 1, 8, 209, 101, 0, 0, 0, 0, 0, },
	/*1*/ {0, 85, 232, 9, 4, 1, 0, 0, 9, 244, 92, 0, 0, 0, 0, 1, 8, 209, 101, 0, 0, 0, 0, 0, },
	/*2*/ {41, 69, 184, 13, 16, 12, 5, 0, 11, 248, 67, 7, 0, 2, 4, 8, 16, 81, 205, 0, 0, 0, 0, 0, },
	/*3*/ {0, 83, 223, 10, 4, 1, 0, 1, 9, 269, 88, 0, 0, 0, 0, 0, 4, 223, 77, 0, 0, 0, 0, 0, },
	/*4*/ {0, 83, 223, 10, 4, 1, 0, 1, 9, 269, 88, 0, 0, 0, 0, 0, 4, 223, 77, 0, 0, 0, 0, 0, },
	/*5*/ {0, 85, 232, 9, 4, 1, 0, 0, 9, 244, 92, 0, 0, 0, 0, 1, 8, 209, 101, 0, 0, 0, 0, 0, },
	/*6*/ {0, 85, 232, 9, 4, 1, 0, 0, 9, 244, 92, 0, 0, 0, 0, 1, 8, 209, 101, 0, 0, 0, 0, 0, },
	/*7*/ {0, 83, 223, 10, 4, 1, 0, 1, 9, 269, 88, 0, 0, 0, 0, 0, 4, 223, 77, 0, 0, 0, 0, 0, },
	/*8*/ {0, 83, 223, 10, 4, 1, 0, 1, 9, 269, 88, 0, 0, 0, 0, 0, 4, 223, 77, 0, 0, 0, 0, 0, },
};


unsigned short DynamicOptimizeSystem_139_y[][32]= // for LG_disk #139 and LG Leaf disk #38
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
    /*0*/ {0, 16, 6, 5, 11, 18, 27, 34, 39, 40, 43, 53, 62, 74, 177, 71, 60, 53, 43, 40, 36, 30, 21, 14, 9, 4, 0, 0, 0, 0, 0, 0, },
    /*1*/ {0, 13, 3, 2, 4, 4, 13, 20, 32, 40, 42, 46, 56, 63, 72, 188, 75, 65, 57, 46, 42, 37, 28, 19, 13, 6, 1, 0, 0, 0, 0, 0, },
    /*2*/ {0, 26, 8, 11, 15, 20, 29, 35, 42, 50, 60, 62, 65, 64, 66, 63, 65, 61, 55, 47, 38, 32, 25, 18, 13, 9, 6, 1, 0, 0, 0, 0, },
    /*3*/ {0, 0, 0, 3, 11, 23, 32, 41, 50, 60, 71, 65, 57, 54, 54, 54, 58, 67, 72, 60, 51, 41, 28, 19, 13, 3, 0, 0, 0, 0, 0, 0, },
    /*4*/ {0, 0, 7, 13, 22, 30, 36, 45, 50, 53, 57, 55, 52, 47, 45, 46, 50, 54, 55, 53, 49, 44, 35, 30, 24, 18, 10, 6, 1, 0, 0, 0, },
    /*5*/ {23, 4, 9, 15, 22, 29, 34, 36, 37, 41, 49, 50, 77, 190, 63, 51, 48, 40, 37, 35, 31, 24, 17, 11, 8, 3, 0, 0, 0, 0, 0, 0, },
    /*6*/ {16, 2, 4, 3, 11, 16, 25, 34, 39, 39, 42, 52, 51, 67, 203, 70, 53, 53, 42, 39, 37, 32, 22, 15, 11, 5, 1, 0, 0, 0, 0, 0, },
    /*7*/ {0, 0, 7, 13, 22, 30, 36, 45, 50, 53, 57, 55, 52, 47, 45, 46, 50, 54, 55, 53, 49, 44, 35, 30, 24, 18, 10, 6, 1, 0, 0, 0, },
    /*8*/ {0, 0, 7, 13, 22, 30, 36, 45, 50, 53, 57, 55, 52, 47, 45, 46, 50, 54, 55, 53, 49, 44, 35, 30, 24, 18, 10, 6, 1, 0, 0, 0, }
};

//No.147
unsigned short DynamicOptimizeSystem_147_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 3, 4, 1, 5, 8, 2, 4, 3, 6, 11, 7, 8, 20, 21, 751, 38, 19, 15, 7, 8, 10, 4, 3, 3, 4, 9, 1, 2, 5, 2, 0, },
	/*1*/ {0, 0, 0, 0, 2, 1, 2, 8, 5, 8, 6, 6, 10, 19, 14, 30, 67, 661, 42, 24, 17, 15, 9, 8, 10, 7, 9, 3, 2, 1, 0, 0, },
	/*2*/ {0, 3, 4, 1, 5, 8, 2, 4, 3, 6, 11, 7, 8, 20, 21, 751, 38, 19, 15, 7, 8, 10, 4, 3, 3, 4, 9, 1, 2, 5, 2, 0, },
	/*3*/ {0, 0, 0, 3, 2, 2, 8, 3, 6, 5, 9, 11, 11, 22, 36, 760, 26, 21, 11, 11, 8, 7, 6, 4, 9, 1, 3, 3, 0, 0, 0, 0, },
	/*4*/ {0, 1, 12, 1, 1, 8, 14, 3, 2, 2, 3, 11, 17, 9, 40, 702, 64, 11, 13, 15, 6, 2, 2, 2, 5, 17, 1, 2, 4, 15, 0, 0, },
	/*5*/ {0, 3, 4, 1, 5, 8, 2, 4, 3, 6, 11, 7, 8, 20, 21, 751, 38, 19, 15, 7, 8, 10, 4, 3, 3, 4, 9, 1, 2, 5, 2, 0, },
	/*6*/ {0, 0, 0, 0, 2, 1, 2, 8, 5, 8, 6, 6, 10, 19, 14, 30, 67, 661, 42, 24, 17, 15, 9, 8, 10, 7, 9, 3, 2, 1, 0, 0, },
	/*7*/ {0, 3, 4, 1, 5, 8, 2, 4, 3, 6, 11, 7, 8, 20, 21, 751, 38, 19, 15, 7, 8, 10, 4, 3, 3, 4, 9, 1, 2, 5, 2, 0, },
	/*8*/ {0, 1, 12, 1, 1, 8, 14, 3, 2, 2, 3, 11, 17, 9, 40, 702, 64, 11, 13, 15, 6, 2, 2, 2, 5, 17, 1, 2, 4, 15, 0, 0, }
};
unsigned short DynamicOptimizeSystem_147_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {7, 63, 76, 10, 11, 44, 116, 9, 9, 60, 92, 12, 12, 99, 45, 9, 16, 82, 64, 2, 3, 51, 89, 8, },
	/*1*/ {9, 11, 98, 21, 10, 21, 140, 35, 25, 90, 63, 21, 24, 91, 42, 9, 16, 116, 7, 3, 7, 37, 77, 15, },
	/*2*/ {7, 63, 76, 10, 11, 44, 116, 9, 9, 60, 92, 12, 12, 99, 45, 9, 16, 82, 64, 2, 3, 51, 89, 8, },
	/*3*/ {7, 63, 76, 10, 11, 44, 116, 9, 9, 60, 92, 12, 12, 99, 45, 9, 16, 82, 64, 2, 3, 51, 89, 8, },
	/*4*/ {6, 10, 92, 32, 40, 107, 34, 25, 30, 36, 101, 21, 21, 27, 102, 34, 36, 95, 11, 8, 11, 20, 83, 7, },
	/*5*/ {7, 63, 76, 10, 11, 44, 116, 9, 9, 60, 92, 12, 12, 99, 45, 9, 16, 82, 64, 2, 3, 51, 89, 8, },
	/*6*/ {9, 11, 98, 21, 10, 21, 140, 35, 25, 90, 63, 21, 24, 91, 42, 9, 16, 116, 7, 3, 7, 37, 77, 15, },
	/*7*/ {7, 63, 76, 10, 11, 44, 116, 9, 9, 60, 92, 12, 12, 99, 45, 9, 16, 82, 64, 2, 3, 51, 89, 8, },
	/*8*/ {6, 10, 92, 32, 40, 107, 34, 25, 30, 36, 101, 21, 21, 27, 102, 34, 36, 95, 11, 8, 11, 20, 83, 7, }
};

unsigned short DynamicOptimizeSystem_147_y2[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 1, 2, 5, 7, 10, 10, 11, 15, 22, 28, 70, 600, 83, 34, 22, 18, 12, 11, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 7, 11, 15, 20, 26, 41, 117, 561, 68, 38, 24, 19, 15, 10, 6, 3, 2, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 1, 2, 5, 7, 10, 10, 11, 15, 22, 28, 70, 600, 83, 34, 22, 18, 12, 11, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, },
	/*3*/ {0, 3, 2, 5, 4, 5, 7, 0, 0, 0, 13, 1, 0, 15, 32, 839, 3, 13, 0, 4, 12, 0, 0, 2, 12, 2, 4, 10, 0, 0, 0, 0, },
	/*4*/ {0, 2, 9, 2, 2, 8, 12, 4, 4, 3, 4, 13, 15, 12, 48, 678, 72, 15, 12, 16, 6, 4, 3, 4, 6, 13, 2, 2, 5, 10, 0, 0, },
	/*5*/ {0, 0, 0, 0, 1, 2, 5, 7, 10, 10, 11, 15, 22, 28, 70, 600, 83, 34, 22, 18, 12, 11, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 7, 11, 15, 20, 26, 41, 117, 561, 68, 38, 24, 19, 15, 10, 6, 3, 2, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 1, 2, 5, 7, 10, 10, 11, 15, 22, 28, 70, 600, 83, 34, 22, 18, 12, 11, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, },
	/*8*/ {0, 2, 9, 2, 2, 8, 12, 4, 4, 3, 4, 13, 15, 12, 48, 678, 72, 15, 12, 16, 6, 4, 3, 4, 6, 13, 2, 2, 5, 10, 0, 0, }
};
unsigned short DynamicOptimizeSystem_147_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {14, 78, 54, 3, 4, 27, 142, 14, 10, 45, 99, 18, 18, 112, 18, 5, 14, 70, 88, 5, 3, 36, 99, 14, },
	/*1*/ {15, 22, 87, 14, 3, 9, 160, 49, 30, 81, 58, 27, 31, 89, 30, 5, 13, 113, 13, 4, 3, 36, 75, 20, },
	/*2*/ {14, 78, 54, 3, 4, 27, 142, 14, 10, 45, 99, 18, 18, 112, 18, 5, 14, 70, 88, 5, 3, 36, 99, 14, },
	/*3*/ {14, 78, 54, 3, 4, 27, 142, 14, 10, 45, 99, 18, 18, 112, 18, 5, 14, 70, 88, 5, 3, 36, 99, 14, },
	/*4*/ {7, 10, 90, 31, 37, 108, 34, 23, 29, 37, 99, 21, 20, 25, 102, 34, 37, 98, 12, 7, 11, 23, 85, 9, },
	/*5*/ {14, 78, 54, 3, 4, 27, 142, 14, 10, 45, 99, 18, 18, 112, 18, 5, 14, 70, 88, 5, 3, 36, 99, 14, },
	/*6*/ {15, 22, 87, 14, 3, 9, 160, 49, 30, 81, 58, 27, 31, 89, 30, 5, 13, 113, 13, 4, 3, 36, 75, 20, },
	/*7*/ {14, 78, 54, 3, 4, 27, 142, 14, 10, 45, 99, 18, 18, 112, 18, 5, 14, 70, 88, 5, 3, 36, 99, 14, },
	/*8*/ {7, 10, 90, 31, 37, 108, 34, 23, 29, 37, 99, 21, 20, 25, 102, 34, 37, 98, 12, 7, 11, 23, 85, 9, }
};
unsigned short DynamicOptimizeSystem_147_y3[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 2, 4, 7, 12, 17, 19, 27, 39, 91, 525, 107, 44, 30, 19, 17, 13, 9, 5, 2, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 8, 18, 26, 34, 53, 152, 482, 86, 49, 30, 22, 14, 8, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 2, 4, 7, 12, 17, 19, 27, 39, 91, 525, 107, 44, 30, 19, 17, 13, 9, 5, 2, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 1, 2, 3, 2, 4, 4, 4, 9, 10, 16, 32, 822, 25, 13, 11, 8, 5, 5, 5, 2, 4, 1, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 2, 9, 2, 2, 8, 12, 4, 4, 3, 4, 13, 15, 12, 48, 678, 72, 15, 12, 16, 6, 4, 3, 4, 6, 13, 2, 2, 5, 10, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 2, 4, 7, 12, 17, 19, 27, 39, 91, 525, 107, 44, 30, 19, 17, 13, 9, 5, 2, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 8, 18, 26, 34, 53, 152, 482, 86, 49, 30, 22, 14, 8, 3, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 2, 4, 7, 12, 17, 19, 27, 39, 91, 525, 107, 44, 30, 19, 17, 13, 9, 5, 2, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 2, 9, 2, 2, 8, 12, 4, 4, 3, 4, 13, 15, 12, 48, 678, 72, 15, 12, 16, 6, 4, 3, 4, 6, 13, 2, 2, 5, 10, 0, 0, }
};
unsigned short DynamicOptimizeSystem_147_hue3[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {21, 88, 23, 0, 3, 23, 143, 19, 12, 26, 104, 26, 25, 114, 9, 4, 17, 69, 100, 7, 4, 26, 104, 22, },
	/*1*/ {22, 84, 25, 3, 2, 6, 158, 51, 40, 34, 83, 45, 49, 97, 4, 5, 15, 111, 17, 6, 4, 5, 78, 46, },
	/*2*/ {21, 88, 23, 0, 3, 23, 143, 19, 12, 26, 104, 26, 25, 114, 9, 4, 17, 69, 100, 7, 4, 26, 104, 22, },
	/*3*/ {21, 88, 23, 0, 3, 23, 143, 19, 12, 26, 104, 26, 25, 114, 9, 4, 17, 69, 100, 7, 4, 26, 104, 22, },
	/*4*/ {7, 10, 90, 31, 37, 108, 34, 23, 29, 37, 99, 21, 20, 25, 102, 34, 37, 98, 12, 7, 11, 23, 85, 9, },
	/*5*/ {21, 88, 23, 0, 3, 23, 143, 19, 12, 26, 104, 26, 25, 114, 9, 4, 17, 69, 100, 7, 4, 26, 104, 22, },
	/*6*/ {22, 84, 25, 3, 2, 6, 158, 51, 40, 34, 83, 45, 49, 97, 4, 5, 15, 111, 17, 6, 4, 5, 78, 46, },
	/*7*/ {21, 88, 23, 0, 3, 23, 143, 19, 12, 26, 104, 26, 25, 114, 9, 4, 17, 69, 100, 7, 4, 26, 104, 22, },
	/*8*/ {7, 10, 90, 31, 37, 108, 34, 23, 29, 37, 99, 21, 20, 25, 102, 34, 37, 98, 12, 7, 11, 23, 85, 9, }
};

unsigned short DynamicOptimizeSystem_151_y[][32]=//
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1, 808, 106, 10, 7, 5, 4, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 4, 4, 3, 1, 1, 0, 0, 0, 0, },
	/*1*/ {0, 25, 2, 45, 842, 9, 6, 4, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 4, 3, 3, 2, 0, 0, },
	/*2*/ {1, 896, 52, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 3, 2, 1, 0, 0, },
	/*3*/ {0, 0, 1, 928, 10, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 9, 10, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {896, 14, 8, 5, 4, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 4, 4, 5, 4, 2, 1, 0, 0, 0, 0, },
	/*6*/ {22, 558, 355, 8, 5, 3, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, },
	/*7*/ {2, 31, 910, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 13, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

/*For TV NTSC colorbar*/
/*US-14*/
unsigned short DynamicOptimizeSystem_160_y[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {143, 10, 13, 8, 9, 11, 14, 11, 15, 7, 6, 9, 15, 15, 175, 25, 6, 6, 5, 10, 6, 6, 17, 9, 6, 6, 8, 7, 10, 277, 107, 13, },
	/*1*/ {37, 71, 33, 9, 14, 9, 10, 12, 17, 9, 15, 7, 7, 12, 18, 159, 45, 6, 6, 5, 10, 7, 12, 13, 8, 6, 7, 9, 9, 193, 190, 18, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_160_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {8, 10, 127, 2, 1, 15, 135, 27, 27, 56, 120, 12, 6, 12, 109, 7, 11, 68, 74, 7, 8, 58, 79, 10, },
	/*1*/ {7, 20, 112, 1, 1, 22, 133, 36, 23, 59, 116, 18, 12, 19, 102, 8, 12, 88, 46, 5, 8, 63, 71, 9, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
/*US-63*/
unsigned short DynamicOptimizeSystem_161_y[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {292, 1, 68, 1, 1, 0, 68, 1, 2, 67, 1, 0, 0, 67, 1, 14, 56, 0, 0, 1, 68, 3, 62, 5, 0, 0, 0, 0, 0, 1, 205, 1, },
	/*1*/ {0, 82, 208, 2, 68, 1, 1, 1, 68, 1, 67, 2, 0, 1, 67, 1, 3, 67, 0, 0, 1, 68, 3, 67, 0, 0, 0, 0, 0, 2, 202, 3, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_161_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3, 3, 122, 0, 0, 3, 127, 3, 2, 4, 124, 4, 9, 19, 103, 115, 5, 44, 62, 7, 103, 11, 112, 4, },
	/*1*/ {3, 3, 121, 0, 0, 3, 126, 3, 2, 7, 120, 4, 9, 42, 84, 115, 5, 66, 39, 7, 102, 14, 109, 4, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_161_hue_2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4, 6, 140, 0, 0, 6, 152, 22, 19, 21, 146, 9, 10, 96, 63, 133, 5, 2, 2, 0, 0, 35, 112, 4, },
	/*1*/ {4, 6, 140, 0, 0, 6, 152, 22, 19, 21, 146, 9, 10, 96, 63, 133, 5, 2, 2, 0, 0, 35, 112, 4, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};

/*US-02*/
unsigned short DynamicOptimizeSystem_162_y[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {242, 7, 101, 1, 1, 1, 92, 1, 3, 100, 1, 0, 0, 91, 1, 20, 83, 1, 0, 1, 91, 2, 96, 7, 0, 0, 0, 0, 0, 0, 40, 1, },
	/*1*/ {9, 73, 156, 11, 102, 1, 1, 1, 92, 2, 102, 1, 1, 1, 90, 2, 4, 99, 1, 1, 1, 91, 2, 102, 0, 0, 0, 0, 0, 0, 40, 1, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_162_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5, 6, 128, 0, 0, 2, 132, 11, 4, 6, 128, 7, 5, 8, 139, 51, 3, 15, 112, 8, 61, 9, 140, 6, },
	/*1*/ {5, 6, 126, 0, 0, 5, 130, 13, 8, 7, 127, 9, 6, 25, 123, 51, 3, 19, 106, 8, 60, 13, 133, 6, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
};
/*NM 02*/
unsigned short DynamicOptimizeSystem_Gumi_NM02_y[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {253, 2, 101, 2, 1, 1, 87, 1, 13, 90, 1, 1, 80, 10, 2, 102, 2, 1, 1, 85, 4, 0, 111, 0, 0, 0, 0, 0, 0, 2, 31, 2, },
	/*1*/ {253, 2, 101, 2, 1, 1, 87, 1, 13, 90, 1, 1, 80, 10, 2, 102, 2, 1, 1, 85, 4, 0, 111, 0, 0, 0, 0, 0, 0, 2, 31, 2, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_Gumi_NM02_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5, 5, 125, 0, 0, 6, 129, 8, 3, 4, 129, 5, 3, 47, 105, 55, 2, 14, 107, 10, 68, 4, 147, 6, },
	/*1*/ {5, 5, 125, 0, 0, 6, 129, 8, 3, 4, 129, 5, 3, 47, 105, 55, 2, 14, 107, 10, 68, 4, 147, 6, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
};

unsigned short DynamicOptimizeSystem_162_hue_2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	{5, 5, 165, 0, 0, 1, 170, 3, 2, 4, 166, 6, 6, 8, 187, 10, 1, 0, 0, 1, 47, 5, 189, 7, },
	{5, 5, 165, 0, 0, 1, 170, 3, 2, 4, 166, 6, 6, 8, 187, 10, 1, 0, 0, 1, 47, 5, 189, 7, },
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
};

/*US-04*/
unsigned short DynamicOptimizeSystem_163_y[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {122, 14, 24, 11, 10, 11, 22, 7, 32, 13, 4, 5, 17, 8, 5, 16, 13, 8, 5, 53, 7, 13, 24, 4, 3, 4, 5, 8, 10, 443, 59, 3, },
	/*1*/ {20, 13, 86, 16, 24, 12, 11, 12, 22, 28, 21, 4, 4, 6, 19, 4, 16, 13, 9, 6, 54, 7, 29, 8, 4, 4, 5, 9, 8, 311, 195, 4, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_163_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3, 4, 64, 17, 18, 25, 191, 36, 55, 65, 94, 26, 89, 29, 55, 4, 6, 20, 110, 5, 3, 8, 58, 3, },
	/*1*/ {3, 4, 63, 20, 20, 28, 190, 33, 43, 70, 98, 29, 96, 33, 46, 4, 6, 21, 106, 5, 3, 9, 57, 3, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
/*US-13*/
unsigned short DynamicOptimizeSystem_164_y[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {121, 17, 21, 14, 11, 11, 22, 25, 22, 5, 5, 5, 19, 5, 4, 17, 14, 8, 7, 52, 8, 28, 6, 4, 4, 5, 7, 10, 58, 438, 12, 1, },
	/*1*/ {20, 22, 69, 22, 24, 15, 14, 9, 21, 31, 16, 5, 6, 10, 14, 5, 16, 15, 8, 8, 52, 9, 30, 4, 4, 5, 6, 9, 34, 458, 19, 2, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_164_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3, 6, 66, 15, 16, 33, 207, 36, 36, 65, 65, 14, 84, 52, 50, 8, 6, 22, 120, 6, 3, 17, 56, 4, },
	/*1*/ {3, 6, 63, 20, 18, 36, 202, 35, 39, 76, 62, 16, 86, 64, 32, 6, 5, 28, 108, 6, 3, 18, 52, 4, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};

/*US-4CH Gumi*/
unsigned short DynamicOptimizeSystem_Gumi_US_4CH_y[][32]= //
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {44, 43, 23, 29, 14, 17, 19, 33, 22, 17, 4, 4, 14, 10, 6, 24, 5, 10, 30, 28, 17, 32, 6, 5, 9, 14, 46, 233, 214, 10, 3, 0, },
	/*1*/ {44, 43, 23, 29, 14, 17, 19, 33, 22, 17, 4, 4, 14, 10, 6, 24, 5, 10, 30, 28, 17, 32, 6, 5, 9, 14, 46, 233, 214, 10, 3, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};

unsigned short DynamicOptimizeSystem_Gumi_US_4CH_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3, 6, 75, 4, 9, 35, 270, 24, 12, 10, 81, 8, 78, 30, 58, 5, 11, 42, 137, 6, 3, 1, 77, 3, },
	/*1*/ {3, 6, 75, 4, 9, 35, 270, 24, 12, 10, 81, 8, 78, 30, 58, 5, 11, 42, 137, 6, 3, 1, 77, 3, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};

/*US-14CH Gumi*/
unsigned short DynamicOptimizeSystem_Gumi_US_14CH_y[][32]= //
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {111, 22, 43, 14, 12, 14, 12, 8, 14, 7, 8, 8, 12, 13, 18, 10, 11, 10, 22, 13, 35, 134, 13, 11, 25, 11, 9, 28, 309, 17, 5, 4, },
	/*1*/ {111, 22, 43, 14, 12, 14, 12, 8, 14, 7, 8, 8, 12, 13, 18, 10, 11, 10, 22, 13, 35, 134, 13, 11, 25, 11, 9, 28, 309, 17, 5, 4, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};

unsigned short DynamicOptimizeSystem_Gumi_US_14CH_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {10, 15, 130, 0, 0, 14, 151, 9, 4, 11, 135, 12, 12, 35, 113, 8, 13, 82, 68, 5, 4, 7, 141, 12, },
	/*1*/ {10, 15, 130, 0, 0, 14, 151, 9, 4, 11, 135, 12, 12, 35, 113, 8, 13, 82, 68, 5, 4, 7, 141, 12, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};

/*US-C*/
unsigned short DynamicOptimizeSystem_165_y[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {103, 26, 25, 13, 11, 12, 22, 6, 31, 15, 5, 5, 7, 17, 5, 16, 13, 9, 5, 51, 11, 10, 25, 4, 4, 5, 6, 7, 24, 395, 93, 2, },
	/*1*/ {19, 8, 77, 26, 25, 12, 12, 12, 23, 25, 23, 5, 4, 6, 20, 5, 15, 14, 9, 5, 53, 9, 20, 15, 4, 4, 6, 7, 9, 288, 218, 3, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_165_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2, 4, 62, 19, 16, 24, 184, 45, 75, 87, 83, 24, 81, 16, 55, 4, 5, 23, 103, 5, 3, 13, 52, 3, },
	/*1*/ {3, 5, 59, 21, 17, 28, 182, 39, 69, 95, 87, 26, 79, 21, 51, 4, 6, 29, 95, 5, 3, 14, 50, 3, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
};

unsigned short DynamicOptimizeSystem_152_y[][32]=//
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5, 195, 493, 52, 23, 11, 8, 6, 6, 6, 6, 7, 7, 6, 7, 10, 8, 6, 5, 5, 5, 5, 6, 6, 6, 7, 8, 10, 14, 24, 22, 0, },
	/*1*/ {5, 195, 493, 52, 23, 11, 8, 6, 6, 6, 6, 7, 7, 6, 7, 10, 8, 6, 5, 5, 5, 5, 6, 6, 6, 7, 8, 10, 14, 24, 22, 0, },
	/*2*/ {5, 195, 493, 52, 23, 11, 8, 6, 6, 6, 6, 7, 7, 6, 7, 10, 8, 6, 5, 5, 5, 5, 6, 6, 6, 7, 8, 10, 14, 24, 22, 0, },
	/*3*/ {0, 0, 7, 592, 126, 38, 15, 9, 7, 8, 7, 8, 8, 7, 9, 11, 8, 6, 6, 6, 6, 7, 7, 8, 8, 11, 17, 37, 7, 0, 0, 0, },
	/*4*/ {5, 195, 493, 52, 23, 11, 8, 6, 6, 6, 6, 7, 7, 6, 7, 10, 8, 6, 5, 5, 5, 5, 6, 6, 6, 7, 8, 10, 14, 24, 22, 0, },
	/*5*/ {5, 195, 493, 52, 23, 11, 8, 6, 6, 6, 6, 7, 7, 6, 7, 10, 8, 6, 5, 5, 5, 5, 6, 6, 6, 7, 8, 10, 14, 24, 22, 0, },
	/*6*/ {5, 195, 493, 52, 23, 11, 8, 6, 6, 6, 6, 7, 7, 6, 7, 10, 8, 6, 5, 5, 5, 5, 6, 6, 6, 7, 8, 10, 14, 24, 22, 0, },
	/*7*/ {5, 195, 493, 52, 23, 11, 8, 6, 6, 6, 6, 7, 7, 6, 7, 10, 8, 6, 5, 5, 5, 5, 6, 6, 6, 7, 8, 10, 14, 24, 22, 0, },
	/*8*/ {5, 195, 493, 52, 23, 11, 8, 6, 6, 6, 6, 7, 7, 6, 7, 10, 8, 6, 5, 5, 5, 5, 6, 6, 6, 7, 8, 10, 14, 24, 22, 0, },
};


unsigned short DynamicOptimizeSystem_173_y[][32]=//  hqv flower 22film
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 530, 0, 0, 0, 0, 1, 0, 3, 0, 7, 1, 0, 0, 0, 49, 2, 0, 0, 0, 0, 3, 1, 2, 3, 0, 0, 0, 389, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 530, 0, 0, 0, 0, 1, 0, 3, 0, 7, 1, 0, 0, 0, 49, 2, 0, 0, 0, 0, 3, 1, 2, 3, 0, 0, 0, 389, 0, 0, },
};


unsigned short DynamicOptimizeSystem_173_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 1, 0, 2, 0, 0, 0, 0, 0, 0, 2, 3, 114, 822, 7, 39, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 1, 1, 0, 2, 0, 0, 0, 0, 0, 0, 2, 3, 114, 822, 7, 39, 0, 0, 0, 0, 0, },
};

unsigned short DynamicOptimizeSystem_174_y[][32]=//  hqv move tree
{ //#0	ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5	ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {1, 3, 14, 30, 27, 137, 139, 81, 41, 45, 33, 37, 41, 36, 35, 33, 30, 28, 27, 24, 18, 13, 10, 8, 5, 3, 3, 3, 3, 76, 2, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {1, 3, 14, 30, 27, 137, 139, 81, 41, 45, 33, 37, 41, 36, 35, 33, 30, 28, 27, 24, 18, 13, 10, 8, 5, 3, 3, 3, 3, 76, 2, 0, },
};




unsigned short DynamicOptimizeSystem_174_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0	ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5	ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {31, 60, 299, 62, 13, 4, 0, 0, 0, 0, 0, 0, 0, 2, 19, 19, 9, 285, 98, 35, 12, 11, 15, 15, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {31, 60, 299, 62, 13, 4, 0, 0, 0, 0, 0, 0, 0, 2, 19, 19, 9, 285, 98, 35, 12, 11, 15, 15, },
};




unsigned short DynamicOptimizeSystem_175_y[][32]=//  munsli2 high frequence 22 film
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 847, 15, 7, 6, 5, 5, 5, 5, 4, 4, 4, 5, 8, 5, 5, 4, 5, 5, 5, 5, 5, 6, 7, 15, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 812, 11, 8, 7, 6, 6, 5, 5, 5, 5, 5, 5, 5, 7, 8, 5, 5, 5, 5, 5, 5, 5, 6, 6, 7, 9, 18, 5, 0, 0, },
};





unsigned short DynamicOptimizeSystem_176_y[][32]=//  hqv flower 22film
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 525, 34, 78, 66, 43, 40, 36, 28, 17, 9, 7, 6, 4, 4, 4, 5, 7, 10, 33, 20, 11, 5, 1, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 549, 33, 55, 80, 42, 30, 30, 34, 33, 21, 15, 7, 8, 8, 6, 5, 4, 3, 2, 3, 17, 2, 1, 1, 0, 0, 0, 0, 0, 0, },
};


unsigned short DynamicOptimizeSystem_176_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 1, 209, 43, 69, 461, 167, 29, 10, 2, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 2, 214, 41, 78, 460, 157, 27, 10, 2, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};


unsigned short DynamicOptimizeSystem_177_y[][32]=//for_LG_demo  sunrise
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {90,106,34,80,70,48,54,68,81,84,83,50,34,24,26,33,17,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};


unsigned short DynamicOptimizeSystem_177_y2[][32]=//for_LG_demo  sunrise
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {62,50,12,46,63,64,62,61,61,57,64,67,54,39,29,36,28,31,36,33,22,10,0,0,0,0,0,0,0,0,0,0},
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};

unsigned short DynamicOptimizeSystem_177_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4,10,20,39,1,0,1,2,4,9,6,10,7,5,4,74,659,90,17,11,5,3,2,5},
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};




unsigned short DynamicOptimizeSystem_178_y[][32]=//for_LG_demo  tokyo street
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*1*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*2*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*3*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*4*/ {0, 0, 93, 515, 193, 64, 34, 23, 15, 13, 11, 8, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*6*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*7*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*8*/ {0, 0, 93, 515, 193, 64, 34, 23, 15, 13, 11, 8, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_178_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
};




unsigned short DynamicOptimizeSystem_179_y[][32]=//for_LG_demo  boy
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*1*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*2*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*3*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*4*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*5*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*6*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*7*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
	/*8*/ {0, 0, 0, 2, 78, 46, 48, 40, 32, 32, 31, 23, 37, 124, 184, 166, 65, 13, 8, 7, 6, 6, 6, 7, 8, 8, 6, 2, 1, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_179_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 6, 26, 21, 16, 15, 19, 46, 48, 36, 32, 41, 87, 304, 265, 31, 0, 0, 0, 0, 0, 0, 0, },
};

unsigned short DynamicOptimizeSystem_180_y1[][32]= //02:21
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },
	/*1*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },
	/*2*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },
	/*3*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },//
	/*4*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },//
	/*5*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },
	/*6*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },
	/*7*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },//
	/*8*/ {0, 0, 4, 155, 156, 90, 93, 84, 73, 79, 89, 83, 51, 20, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, },//
};

unsigned short DynamicOptimizeSystem_180_y2[][32]= //02:21
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },
	/*1*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },
	/*2*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },
	/*3*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },//
	/*4*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },//
	/*5*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },
	/*6*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },
	/*7*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },//
	/*8*/ {0, 0, 0, 162, 150, 84, 74, 63, 49, 40, 35, 27, 18, 10, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 2, 259, 0, 0, },//
};

unsigned short DynamicOptimizeSystem_180_y3[][32]= //02:21
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 1, 172, 142, 100, 79, 69, 69, 94, 114, 93, 46, 12, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
};

unsigned short DynamicOptimizeSystem_182_y[][32]=//for_LG_demo  boy
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
	/*1*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
	/*2*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
	/*3*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
	/*4*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
	/*5*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
	/*6*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
	/*7*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
	/*8*/ {0, 0, 27, 83, 129, 138, 101, 94, 117, 77, 63, 43, 28, 21, 19, 16, 5, 2, 8, 5, 1, 0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_182_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },
	/*1*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },
	/*2*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },
	/*3*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },
	/*4*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },
	/*5*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },
	/*6*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },
	/*7*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },
	/*8*/ {23, 41, 101, 297, 420, 33, 6, 4, 1, 0, 0, 0, 0, 0, 1, 7, 3, 6, 9, 8, 5, 4, 5, 12, },

};

unsigned short DynamicOptimizeSystem_183_y[][32]=//little head
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
	/*1*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
	/*2*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
	/*3*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
	/*4*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
	/*5*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
	/*6*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
	/*7*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
	/*8*/ {0, 0, 56, 69, 60, 63, 75, 60, 37, 37, 36, 27, 23, 20, 18, 24, 22, 26, 38, 36, 37, 40, 35, 29, 30, 28, 23, 17, 12, 6, 0, 0, },
};

unsigned short DynamicOptimizeSystem_183_hue[][COLOR_HUE_HISTOGRAM_LEVEL] = //little head
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },
	/*1*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },
	/*2*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },
	/*3*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },
	/*4*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },
	/*5*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },
	/*6*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },
	/*7*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },
	/*8*/ {23, 37, 46, 88, 55, 18, 12, 6, 7, 7, 10, 24, 45, 114, 80, 102, 174, 72, 25, 7, 9, 6, 7, 12, },

};

unsigned short DynamicOptimizeSystem_184_y[][32]=//for_LG_demo // big head
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },
	/*1*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },
	/*2*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },
	/*3*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },
	/*4*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },
	/*5*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },
	/*6*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },
	/*7*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },
	/*8*/ {0, 0, 62, 84, 98, 104, 60, 44, 31, 27, 23, 23, 27, 31, 35, 45, 44, 40, 44, 29, 25, 27, 29, 23, 13, 7, 5, 2, 3, 1, 0, 0, },

};
unsigned short DynamicOptimizeSystem_184_hue[][COLOR_HUE_HISTOGRAM_LEVEL] = // big head
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
	/*1*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
	/*2*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
	/*3*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
	/*4*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
	/*5*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
	/*6*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
	/*7*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
	/*8*/ {79, 76, 96, 127, 22, 5, 10, 1, 1, 0, 2, 8, 40, 91, 122, 58, 90, 42, 30, 18, 20, 10, 12, 29, },
};



unsigned short DynamicOptimizeSystem_185_y[][32]=// wonmen hand
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
	/*1*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
	/*2*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
	/*3*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
	/*4*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
	/*5*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
	/*6*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
	/*7*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
	/*8*/ {0, 0, 2, 20, 28, 33, 41, 45, 38, 36, 37, 37, 38, 36, 39, 51, 40, 32, 37, 34, 36, 44, 52, 60, 64, 66, 33, 8, 1, 0, 0, 0, },
};
unsigned short DynamicOptimizeSystem_185_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =// wonmen hand
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
	/*1*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
	/*2*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
	/*3*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
	/*4*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
	/*5*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
	/*6*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
	/*7*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
	/*8*/ {179, 98, 52, 74, 212, 50, 36, 15, 14, 6, 7, 4, 8, 14, 7, 9, 12, 16, 20, 16, 21, 22, 27, 68, },
};


unsigned short DynamicOptimizeSystem_186_y[][32]=//ugly man
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
	/*1*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
	/*2*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
	/*3*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
	/*4*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
	/*5*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
	/*6*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
	/*7*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
	/*8*/ {0, 0, 61, 83, 69, 51, 36, 25, 19, 13, 9, 10, 11, 15, 19, 29, 30, 34, 39, 35, 31, 24, 31, 53, 63, 74, 63, 35, 20, 3, 0, 0, },
};
unsigned short DynamicOptimizeSystem_186_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =//ugly man
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
	/*1*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
	/*2*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
	/*3*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
	/*4*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
	/*5*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
	/*6*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
	/*7*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
	/*8*/ {102, 60, 72, 61, 66, 80, 54, 47, 129, 32, 12, 5, 4, 6, 7, 26, 83, 48, 22, 9, 11, 8, 12, 33, },
};

unsigned short DynamicOptimizeSystem_187_y[][32]=//qtec Makilo file #59
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 9, 23, 36, 48, 78, 113, 119, 43, 39, 41, 43, 44, 41, 36, 31, 27, 22, 18, 15, 13, 13, 12, 13, 15, 15, 18, 63, 0, 0, },
	/*1*/ {0, 0, 0, 9, 23, 36, 48, 78, 113, 119, 43, 39, 41, 43, 44, 41, 36, 31, 27, 22, 18, 15, 13, 13, 12, 13, 15, 15, 18, 63, 0, 0, },
	/*2*/ {0, 0, 0, 9, 23, 36, 48, 78, 113, 119, 43, 39, 41, 43, 44, 41, 36, 31, 27, 22, 18, 15, 13, 13, 12, 13, 15, 15, 18, 63, 0, 0, },
	/*3*/ {0, 0, 0, 9, 23, 36, 48, 78, 113, 119, 43, 39, 41, 43, 44, 41, 36, 31, 27, 22, 18, 15, 13, 13, 12, 13, 15, 15, 18, 63, 0, 0, },
	/*4*/ {0, 0, 0, 0, 1, 23, 41, 56, 96, 138, 94, 46, 47, 50, 51, 46, 39, 33, 27, 21, 18, 16, 15, 15, 16, 18, 22, 59, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 9, 23, 36, 48, 78, 113, 119, 43, 39, 41, 43, 44, 41, 36, 31, 27, 22, 18, 15, 13, 13, 12, 13, 15, 15, 18, 63, 0, 0, },
	/*6*/ {0, 0, 0, 9, 23, 36, 48, 78, 113, 119, 43, 39, 41, 43, 44, 41, 36, 31, 27, 22, 18, 15, 13, 13, 12, 13, 15, 15, 18, 63, 0, 0, },
	/*7*/ {0, 0, 0, 9, 23, 36, 48, 78, 113, 119, 43, 39, 41, 43, 44, 41, 36, 31, 27, 22, 18, 15, 13, 13, 12, 13, 15, 15, 18, 63, 0, 0, },
	/*8*/ {0, 0, 0, 9, 23, 36, 48, 78, 113, 119, 43, 39, 41, 43, 44, 41, 36, 31, 27, 22, 18, 15, 13, 13, 12, 13, 15, 15, 18, 63, 0, 0, },

};
unsigned short DynamicOptimizeSystem_187_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =//ugly man
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
	/*1*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
	/*2*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
	/*3*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
	/*4*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
	/*5*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
	/*6*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
	/*7*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
	/*8*/ {236, 193, 146, 231, 103, 14, 8, 5, 3, 2, 2, 4, 5, 0, 1, 3, 9, 4, 14, 1, 1, 1, 1, 3, },
};

unsigned short DynamicOptimizeSystem_188_y[][32] = // LG leaf #44(NTSC) #46(PAL) motion black white
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
    /*0*/ {0, 11, 7, 2, 1, 0, 0, 1, 1, 0, 1, 1, 1, 2, 2, 6, 5, 6, 7, 9, 13, 14, 18, 24, 27, 26, 27, 34, 123, 615, 2, 0, }, // ok
    /*1*/ {1, 14, 9, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 2, 1, 1, 3, 5, 7, 8, 8, 10, 13, 23, 24, 25, 22, 24, 71, 697, 10, 1, }, // ok
    /*2*/ {6, 21, 8, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 2, 2, 3, 3, 3, 5, 7, 8, 9, 10, 14, 16, 18, 18, 24, 121, 678, 5, 0, },
    /*3*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },
    /*4*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },
    /*5*/ {28, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 2, 0, 1, 2, 4, 5, 7, 7, 7, 8, 10, 15, 22, 22, 21, 19, 20, 36, 720, 16, 8, }, // ok
    /*6*/ {25, 0, 0, 1, 0, 0, 1, 0, 0, 1, 2, 2, 2, 3, 3, 5, 5, 6, 7, 9, 12, 15, 17, 22, 23, 26, 22, 23, 38, 695, 17, 1, }, // ok
    /*7*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },
    /*8*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },
};

unsigned short DynamicOptimizeSystem_188_hue[][COLOR_HUE_HISTOGRAM_LEVEL] = // LG leaf #44(NTSC) #46(PAL) motion black white
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
    /*0*/ {10, 10, 11, 17, 31, 47, 74, 112, 138, 102, 72, 53, 42, 29, 27, 33, 40, 36, 28, 25, 18, 13, 10, 10, },
    /*1*/ {10, 9, 12, 20, 32, 46, 101, 112, 139, 96, 60, 41, 36, 27, 28, 34, 38, 33, 30, 30, 20, 12, 10, 10, },
    /*2*/ {3, 6, 6, 10, 19, 20, 52, 119, 188, 198, 126, 76, 53, 17, 11, 14, 22, 21, 10, 8, 5, 2, 1, 2, },
    /*3*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
    /*4*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
    /*5*/ {13, 11, 13, 19, 34, 53, 79, 111, 133, 84, 63, 49, 39, 29, 26, 33, 40, 36, 32, 33, 22, 14, 12, 12, },
    /*6*/ {14, 11, 13, 19, 33, 43, 72, 116, 152, 110, 65, 43, 35, 25, 23, 27, 33, 29, 28, 30, 25, 15, 13, 14, },
    /*7*/ {4, 47, 191, 7, 1, 0, 1, 0, 2, 321, 72, 7, 15, 165, 14, 19, 114, 2, 0, 1, 1, 1, 1, 2, },
    /*8*/ {4, 47, 191, 7, 1, 0, 1, 0, 2, 321, 72, 7, 15, 165, 14, 19, 114, 2, 0, 1, 1, 1, 1, 2, },
};

unsigned short DynamicOptimizeSystem_188_hue_2[][COLOR_HUE_HISTOGRAM_LEVEL] = // LG leaf #44(NTSC) #46(PAL) motion black white, HUE has 2 kind of histogram ratio
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
    /*0*/ {10, 10, 11, 17, 31, 47, 74, 112, 138, 102, 72, 53, 42, 29, 27, 33, 40, 36, 28, 25, 18, 13, 10, 10, },
    /*1*/ {10, 9, 12, 20, 32, 46, 101, 112, 139, 96, 60, 41, 36, 27, 28, 34, 38, 33, 30, 30, 20, 12, 10, 10, },
    /*2*/ {19, 26, 19, 16, 15, 17, 65, 133, 140, 126, 107, 85, 55, 18, 11, 15, 28, 41, 30, 9, 2, 2, 3, 6, },
    /*3*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
    /*4*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
    /*5*/ {13, 11, 13, 19, 34, 53, 79, 111, 133, 84, 63, 49, 39, 29, 26, 33, 40, 36, 32, 33, 22, 14, 12, 12, },
    /*6*/ {14, 11, 13, 19, 33, 43, 72, 116, 152, 110, 65, 43, 35, 25, 23, 27, 33, 29, 28, 30, 25, 15, 13, 14, },
    /*7*/ {4, 47, 191, 7, 1, 0, 1, 0, 2, 321, 72, 7, 15, 165, 14, 19, 114, 2, 0, 1, 1, 1, 1, 2, },
    /*8*/ {4, 47, 191, 7, 1, 0, 1, 0, 2, 321, 72, 7, 15, 165, 14, 19, 114, 2, 0, 1, 1, 1, 1, 2, },
};

unsigned short DynamicOptimizeSystem_189_y[][32] = //LG leaf #72 color scrolling text
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },
	/*1*/ {0, 11, 13, 107, 155, 12, 16, 13, 12, 13, 82, 17, 16, 73, 11, 10, 126, 10, 111, 52, 14, 11, 12, 14, 10, 10, 13, 13, 21, 8, 1, 0, },
	/*2*/ {4, 143, 146, 13, 15, 10, 11, 12, 21, 78, 18, 63, 18, 9, 11, 121, 8, 16, 141, 13, 11, 10, 13, 12, 9, 9, 11, 15, 19, 4, 0, 0, },
	/*3*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },
	/*4*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },
	/*5*/ {294, 7, 16, 8, 9, 9, 14, 83, 14, 12, 74, 8, 7, 7, 122, 10, 7, 149, 19, 8, 9, 8, 12, 6, 7, 7, 10, 10, 17, 21, 1, 0, },
	/*6*/ {25, 113, 147, 11, 18, 10, 12, 8, 17, 81, 12, 36, 50, 10, 8, 124, 12, 11, 141, 21, 11, 10, 12, 12, 9, 9, 11, 11, 15, 13, 2, 0, },
	/*7*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },
	/*8*/ {9, 139, 139, 12, 16, 9, 14, 10, 15, 81, 11, 66, 22, 8, 8, 124, 12, 13, 143, 19, 11, 10, 13, 11, 9, 9, 11, 12, 19, 9, 2, 0, },

};
unsigned short DynamicOptimizeSystem_189_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2, 32, 209, 7, 2, 1, 1, 2, 7, 308, 110, 6, 10, 149, 14, 18, 104, 5, 1, 0, 0, 0, 0, 0, },
	/*1*/ {2, 31, 203, 7, 4, 2, 2, 5, 13, 299, 120, 7, 11, 141, 14, 17, 105, 4, 1, 0, 0, 0, 0, 0, },
	/*2*/ {2, 24, 209, 7, 3, 2, 3, 6, 13, 278, 133, 7, 9, 142, 22, 26, 96, 3, 1, 1, 1, 0, 0, 1, },
	/*3*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*4*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*5*/ {4, 47, 191, 7, 1, 0, 1, 0, 2, 321, 72, 7, 15, 165, 14, 19, 114, 2, 0, 1, 1, 1, 1, 2, },
	/*6*/ {2, 30, 208, 7, 2, 1, 1, 2, 9, 317, 101, 5, 10, 147, 15, 18, 106, 4, 1, 0, 0, 0, 0, 0, },
	/*7*/ {4, 47, 191, 7, 1, 0, 1, 0, 2, 321, 72, 7, 15, 165, 14, 19, 114, 2, 0, 1, 1, 1, 1, 2, },
	/*8*/ {4, 47, 191, 7, 1, 0, 1, 0, 2, 321, 72, 7, 15, 165, 14, 19, 114, 2, 0, 1, 1, 1, 1, 2, },
};

//NO.191 Reference 1  ColorBar
unsigned short DynamicOptimizeSystem_191_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {12, 124, 8, 8, 129, 0, 0, 60, 78, 0, 118, 1, 0, 101, 2, 1, 116, 1, 0, 0, 103, 0, 84, 0, 0, 0, 0, 0, 0, 43, 0, 0, },
	/*1*/ {12, 124, 8, 8, 129, 0, 0, 60, 78, 0, 118, 1, 0, 101, 2, 1, 116, 1, 0, 0, 103, 0, 84, 0, 0, 0, 0, 0, 0, 43, 0, 0, },
	/*2*/ {0, 81, 3, 3, 130, 1, 1, 130, 4, 8, 125, 0, 0, 132, 2, 76, 56, 0, 1, 132, 0, 1, 0, 0, 1, 0, 0, 0, 15, 86, 0, 0, },
	/*3*/ {11, 7, 123, 12, 143, 0, 0, 0, 138, 0, 111, 0, 0, 3, 94, 0, 111, 0, 0, 0, 98, 0, 97, 0, 0, 0, 0, 0, 0, 44, 0, 0, },
  	/*4*/ {11, 7, 123, 12, 143, 0, 0, 0, 138, 0, 111, 0, 0, 3, 94, 0, 111, 0, 0, 0, 98, 0, 97, 0, 0, 0, 0, 0, 0, 44, 0, 0, },
	/*5*/ {12, 124, 8, 8, 129, 0, 0, 60, 78, 0, 118, 1, 0, 101, 2, 1, 116, 1, 0, 0, 103, 0, 84, 0, 0, 0, 0, 0, 0, 43, 0, 0, },
	/*6*/ {12, 124, 8, 8, 129, 0, 0, 60, 78, 0, 118, 1, 0, 101, 2, 1, 116, 1, 0, 0, 103, 0, 84, 0, 0, 0, 0, 0, 0, 43, 0, 0, },
	/*7*/ {11, 7, 123, 12, 143, 0, 0, 0, 138, 0, 111, 0, 0, 3, 94, 0, 111, 0, 0, 0, 98, 0, 97, 0, 0, 0, 0, 0, 0, 44, 0, 0, },
	/*8*/ {11, 7, 123, 12, 143, 0, 0, 0, 138, 0, 111, 0, 0, 3, 94, 0, 111, 0, 0, 0, 98, 0, 97, 0, 0, 0, 0, 0, 0, 44, 0, 0, }

};
unsigned short DynamicOptimizeSystem_191_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1, 3, 144, 1, 0, 2, 147, 1, 1, 5, 124, 1, 1, 2, 149, 53, 1, 140, 7, 1, 56, 16, 134, 0, },//ntsc
	/*1*/ {1, 3, 144, 1, 0, 2, 147, 1, 1, 5, 124, 1, 1, 2, 149, 53, 1, 140, 7, 1, 56, 16, 134, 0, },//ntsc
	/*2*/ {1, 5, 159, 0, 0, 0, 167, 0, 1, 160, 4, 1, 1, 160, 2, 1, 1, 146, 16, 0, 1, 35, 128, 0, },//pal
	/*3*/ {1, 128, 10, 0, 0, 106, 33, 0, 0, 124, 15, 0, 1, 131, 26, 55, 1, 121, 14, 0, 65, 154, 4, 0, },//ntsc
	/*4*/ {1, 128, 10, 0, 0, 106, 33, 0, 0, 124, 15, 0, 1, 131, 26, 55, 1, 121, 14, 0, 65, 154, 4, 0, },//ntsc
	/*5*/ {1, 3, 144, 1, 0, 2, 147, 1, 1, 5, 124, 1, 1, 2, 149, 53, 1, 140, 7, 1, 56, 16, 134, 0, },//ntsc
	/*6*/ {1, 3, 144, 1, 0, 2, 147, 1, 1, 5, 124, 1, 1, 2, 149, 53, 1, 140, 7, 1, 56, 16, 134, 0, },//ntsc
	/*7*/ {1, 128, 10, 0, 0, 106, 33, 0, 0, 124, 15, 0, 1, 131, 26, 55, 1, 121, 14, 0, 65, 154, 4, 0, },//ntsc
	/*8*/ {1, 128, 10, 0, 0, 106, 33, 0, 0, 124, 15, 0, 1, 131, 26, 55, 1, 121, 14, 0, 65, 154, 4, 0, },//ntsc
};

//No.192 Reference 2  Monscope
unsigned short DynamicOptimizeSystem_192_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 48, 42, 43, 11, 11, 11, 14, 13, 8, 10, 7, 9, 9, 39, 167, 5, 18, 7, 9, 7, 11, 14, 8, 10, 11, 313, 130, 0, 0, },
	/*1*/ {0, 0, 0, 48, 42, 43, 11, 11, 11, 14, 13, 8, 10, 7, 9, 9, 39, 167, 5, 18, 7, 9, 7, 11, 14, 8, 10, 11, 313, 130, 0, 0, },
	/*2*/ {0, 34, 60, 11, 9, 8, 19, 7, 11, 7, 8, 5, 5, 5, 16, 178, 4, 4, 4, 4, 4, 10, 7, 17, 7, 7, 8, 13, 505, 9, 0, 0, },
	/*3*/ {0, 0, 0, 5, 47, 50, 37, 13, 13, 8, 11, 9, 10, 9, 9, 8, 183, 16, 19, 7, 7, 11, 12, 8, 10, 10, 249, 225, 0, 0, 0, 0, },
	/*4*/ {0, 0, 3, 41, 26, 62, 12, 14, 7, 8, 12, 8, 9, 8, 7, 7, 14, 176, 9, 17, 6, 5, 5, 13, 10, 7, 9, 9, 109, 371, 0, 0, },
	/*5*/ {0, 0, 0, 48, 42, 43, 11, 11, 11, 14, 13, 8, 10, 7, 9, 9, 39, 167, 5, 18, 7, 9, 7, 11, 14, 8, 10, 11, 313, 130, 0, 0, },
	/*6*/ {0, 0, 0, 48, 42, 43, 11, 11, 11, 14, 13, 8, 10, 7, 9, 9, 39, 167, 5, 18, 7, 9, 7, 11, 14, 8, 10, 11, 313, 130, 0, 0, },
	/*7*/ {0, 0, 3, 41, 26, 62, 12, 14, 7, 8, 12, 8, 9, 8, 7, 7, 14, 176, 9, 17, 6, 5, 5, 13, 10, 7, 9, 9, 109, 371, 0, 0, },
	/*8*/ {0, 0, 3, 41, 26, 62, 12, 14, 7, 8, 12, 8, 9, 8, 7, 7, 14, 176, 9, 17, 6, 5, 5, 13, 10, 7, 9, 9, 109, 371, 0, 0, },

};

//No193 lg reference 3
unsigned short DynamicOptimizeSystem_193_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 48, 41, 44, 11, 11, 11, 14, 13, 8, 10, 7, 9, 9, 37, 169, 5, 18, 7, 9, 7, 11, 15, 8, 10, 12, 304, 139, 0, 0, },
	/*1*/ {0, 0, 0, 48, 41, 44, 11, 11, 11, 14, 13, 8, 10, 7, 9, 9, 37, 169, 5, 18, 7, 9, 7, 11, 15, 8, 10, 12, 304, 139, 0, 0, },
	/*2*/ {0, 59, 9, 8, 11, 1, 0, 10, 6, 14, 1, 0, 9, 1, 48, 576, 17, 21, 2, 5, 15, 9, 1, 15, 22, 10, 37, 7, 30, 42, 1, 0, },
	/*3*/ {4, 30, 20, 4, 6, 9, 1, 6, 24, 3, 12, 1, 8, 15, 17, 451, 91, 13, 51, 18, 5, 34, 21, 12, 29, 8, 14, 13, 11, 51, 0, 3, },
	/*4*/ {4, 30, 20, 4, 6, 9, 1, 6, 24, 3, 12, 1, 8, 15, 17, 451, 91, 13, 51, 18, 5, 34, 21, 12, 29, 8, 14, 13, 11, 51, 0, 3, },
	/*5*/ {0, 0, 0, 48, 41, 44, 11, 11, 11, 14, 13, 8, 10, 7, 9, 9, 37, 169, 5, 18, 7, 9, 7, 11, 15, 8, 10, 12, 304, 139, 0, 0, },
	/*6*/ {0, 0, 0, 48, 41, 44, 11, 11, 11, 14, 13, 8, 10, 7, 9, 9, 37, 169, 5, 18, 7, 9, 7, 11, 15, 8, 10, 12, 304, 139, 0, 0, },
	/*7*/ {4, 30, 20, 4, 6, 9, 1, 6, 24, 3, 12, 1, 8, 15, 17, 451, 91, 13, 51, 18, 5, 34, 21, 12, 29, 8, 14, 13, 11, 51, 0, 3, },
	/*8*/ {4, 30, 20, 4, 6, 9, 1, 6, 24, 3, 12, 1, 8, 15, 17, 451, 91, 13, 51, 18, 5, 34, 21, 12, 29, 8, 14, 13, 11, 51, 0, 3, },

};
unsigned short DynamicOptimizeSystem_193_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {63, 0, 0, 0, 0, 4, 29, 0, 0, 11, 35, 137, 365, 58, 1, 0, 0, 0, 44, 62, 9, 22, 43, 109, },//ntsc
	/*1*/ {63, 0, 0, 0, 0, 4, 29, 0, 0, 11, 35, 137, 365, 58, 1, 0, 0, 0, 44, 62, 9, 22, 43, 109, },//ntsc
	/*2*/ {4, 10, 141, 2, 3, 10, 157, 0, 0, 137, 21, 5, 6, 126, 29, 1, 0, 14, 156, 2, 1, 85, 72, 4, },//ntsc
	/*3*/ {4, 25, 135, 2, 2, 69, 96, 0, 0, 76, 79, 5, 4, 88, 66, 1, 1, 79, 88, 3, 1, 73, 86, 5, },//ntsc
	/*4*/ {4, 25, 135, 2, 2, 69, 96, 0, 0, 76, 79, 5, 4, 88, 66, 1, 1, 79, 88, 3, 1, 73, 86, 5, },//ntsc
	/*5*/ {63, 0, 0, 0, 0, 4, 29, 0, 0, 11, 35, 137, 365, 58, 1, 0, 0, 0, 44, 62, 9, 22, 43, 109, },//ntsc
	/*6*/ {63, 0, 0, 0, 0, 4, 29, 0, 0, 11, 35, 137, 365, 58, 1, 0, 0, 0, 44, 62, 9, 22, 43, 109, },//ntsc
	/*7*/ {4, 25, 135, 2, 2, 69, 96, 0, 0, 76, 79, 5, 4, 88, 66, 1, 1, 79, 88, 3, 1, 73, 86, 5, },//ntsc
	/*8*/ {4, 25, 135, 2, 2, 69, 96, 0, 0, 76, 79, 5, 4, 88, 66, 1, 1, 79, 88, 3, 1, 73, 86, 5, },//ntsc

};

//No.194 lg reference 4
unsigned short DynamicOptimizeSystem_194_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 4, 316, 108, 39, 27, 27, 4, 4, 11, 3, 3, 11, 11, 14, 8, 9, 11, 84, 9, 3, 2, 3, 33, 19, 56, 106, 63, 1, 0, },
	/*1*/ {0, 0, 0, 4, 316, 108, 39, 27, 27, 4, 4, 11, 3, 3, 11, 11, 14, 8, 9, 11, 84, 9, 3, 2, 3, 33, 19, 56, 106, 63, 1, 0, },
	/*2*/ {5, 68, 160, 204, 59, 28, 31, 7, 6, 10, 4, 4, 7, 13, 6, 4, 7, 14, 6, 80, 7, 4, 4, 4, 14, 25, 7, 48, 141, 3, 1, 3, },
	/*3*/ {0, 4, 23, 359, 64, 44, 13, 19, 6, 4, 10, 1, 2, 8, 3, 2, 3, 6, 13, 97, 6, 8, 2, 4, 8, 14, 23, 47, 24, 163, 0, 1, },
	/*4*/ {0, 4, 23, 359, 64, 44, 13, 19, 6, 4, 10, 1, 2, 8, 3, 2, 3, 6, 13, 97, 6, 8, 2, 4, 8, 14, 23, 47, 24, 163, 0, 1, },
	/*5*/ {0, 0, 0, 4, 316, 108, 39, 27, 27, 4, 4, 11, 3, 3, 11, 11, 14, 8, 9, 11, 84, 9, 3, 2, 3, 33, 19, 56, 106, 63, 1, 0, },
	/*6*/ {0, 0, 0, 4, 316, 108, 39, 27, 27, 4, 4, 11, 3, 3, 11, 11, 14, 8, 9, 11, 84, 9, 3, 2, 3, 33, 19, 56, 106, 63, 1, 0, },
	/*7*/ {0, 4, 23, 359, 64, 44, 13, 19, 6, 4, 10, 1, 2, 8, 3, 2, 3, 6, 13, 97, 6, 8, 2, 4, 8, 14, 23, 47, 24, 163, 0, 1, },
	/*8*/ {0, 4, 23, 359, 64, 44, 13, 19, 6, 4, 10, 1, 2, 8, 3, 2, 3, 6, 13, 97, 6, 8, 2, 4, 8, 14, 23, 47, 24, 163, 0, 1, },

};
unsigned short DynamicOptimizeSystem_194_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4, 72, 152, 13, 2, 47, 19, 2, 4, 51, 48, 5, 5, 28, 58, 0, 2, 141, 238, 2, 2, 54, 37, 3, },//ntsc
	/*1*/ {4, 72, 152, 13, 2, 47, 19, 2, 4, 51, 48, 5, 5, 28, 58, 0, 2, 141, 238, 2, 2, 54, 37, 3, },//ntsc
	/*2*/ {13, 22, 111, 14, 10, 36, 62, 33, 38, 77, 48, 29, 28, 47, 44, 16, 13, 242, 28, 3, 3, 38, 29, 3, },//pal
	/*3*/ {4, 65, 168, 7, 1, 46, 19, 2, 1, 69, 31, 3, 4, 26, 60, 0, 2, 133, 249, 2, 1, 67, 24, 3, },//ntsc
	/*4*/ {4, 65, 168, 7, 1, 46, 19, 2, 1, 69, 31, 3, 4, 26, 60, 0, 2, 133, 249, 2, 1, 67, 24, 3, },//ntsc
	/*5*/ {4, 72, 152, 13, 2, 47, 19, 2, 4, 51, 48, 5, 5, 28, 58, 0, 2, 141, 238, 2, 2, 54, 37, 3, },//ntsc
	/*6*/ {4, 72, 152, 13, 2, 47, 19, 2, 4, 51, 48, 5, 5, 28, 58, 0, 2, 141, 238, 2, 2, 54, 37, 3, },//ntsc
	/*7*/ {4, 65, 168, 7, 1, 46, 19, 2, 1, 69, 31, 3, 4, 26, 60, 0, 2, 133, 249, 2, 1, 67, 24, 3, },//ntsc
	/*8*/ {4, 65, 168, 7, 1, 46, 19, 2, 1, 69, 31, 3, 4, 26, 60, 0, 2, 133, 249, 2, 1, 67, 24, 3, },//ntsc

};

//No.195 lg reference 5
unsigned short DynamicOptimizeSystem_195_y[][32]=
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 1, 8, 79, 23, 28, 20, 25, 48, 8, 24, 4, 5, 22, 7, 28, 5, 10, 18, 36, 33, 12, 15, 4, 7, 9, 405, 102, 0, 0, },
	/*1*/ {0, 0, 0, 1, 8, 79, 23, 28, 20, 25, 48, 8, 24, 4, 5, 22, 7, 28, 5, 10, 18, 36, 33, 12, 15, 4, 7, 9, 405, 102, 0, 0, },
	/*2*/ {0, 4, 4, 69, 20, 30, 16, 21, 22, 35, 17, 16, 9, 9, 24, 8, 31, 12, 12, 11, 44, 9, 35, 8, 9, 11, 13, 20, 471, 0, 0, 0, },
	/*3*/ {0, 2, 4, 67, 31, 30, 13, 13, 23, 47, 7, 22, 5, 4, 9, 17, 8, 28, 4, 8, 44, 7, 36, 8, 14, 5, 5, 8, 62, 454, 0, 0, },
	/*4*/ {0, 2, 4, 67, 31, 30, 13, 13, 23, 47, 7, 22, 5, 4, 9, 17, 8, 28, 4, 8, 44, 7, 36, 8, 14, 5, 5, 8, 62, 454, 0, 0, },
	/*5*/ {0, 0, 0, 1, 8, 79, 23, 28, 20, 25, 48, 8, 24, 4, 5, 22, 7, 28, 5, 10, 18, 36, 33, 12, 15, 4, 7, 9, 405, 102, 0, 0, },
	/*6*/ {0, 0, 0, 1, 8, 79, 23, 28, 20, 25, 48, 8, 24, 4, 5, 22, 7, 28, 5, 10, 18, 36, 33, 12, 15, 4, 7, 9, 405, 102, 0, 0, },
	/*7*/ {0, 2, 4, 67, 31, 30, 13, 13, 23, 47, 7, 22, 5, 4, 9, 17, 8, 28, 4, 8, 44, 7, 36, 8, 14, 5, 5, 8, 62, 454, 0, 0, },
	/*8*/ {0, 2, 4, 67, 31, 30, 13, 13, 23, 47, 7, 22, 5, 4, 9, 17, 8, 28, 4, 8, 44, 7, 36, 8, 14, 5, 5, 8, 62, 454, 0, 0, },

};
unsigned short DynamicOptimizeSystem_195_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5, 87, 0, 0, 1, 38, 303, 2, 1, 5, 85, 2, 92, 90, 0, 0, 0, 5, 180, 1, 1, 1, 87, 4, },//ntsc
	/*1*/ {5, 87, 0, 0, 1, 38, 303, 2, 1, 5, 85, 2, 92, 90, 0, 0, 0, 5, 180, 1, 1, 1, 87, 4, },//ntsc
	/*2*/ {3, 92, 1, 3, 8, 44, 269, 0, 0, 84, 10, 2, 90, 91, 4, 2, 1, 5, 182, 1, 1, 75, 20, 3, },//ntsc
	/*3*/ {5, 89, 0, 0, 1, 29, 294, 1, 2, 11, 81, 2, 94, 92, 0, 0, 0, 3, 186, 1, 0, 41, 50, 5, },//ntsc
	/*4*/ {5, 89, 0, 0, 1, 29, 294, 1, 2, 11, 81, 2, 94, 92, 0, 0, 0, 3, 186, 1, 0, 41, 50, 5, },//ntsc
	/*5*/ {5, 87, 0, 0, 1, 38, 303, 2, 1, 5, 85, 2, 92, 90, 0, 0, 0, 5, 180, 1, 1, 1, 87, 4, },//ntsc
	/*6*/ {5, 87, 0, 0, 1, 38, 303, 2, 1, 5, 85, 2, 92, 90, 0, 0, 0, 5, 180, 1, 1, 1, 87, 4, },//ntsc
	/*7*/ {5, 89, 0, 0, 1, 29, 294, 1, 2, 11, 81, 2, 94, 92, 0, 0, 0, 3, 186, 1, 0, 41, 50, 5, },//ntsc
	/*8*/ {5, 89, 0, 0, 1, 29, 294, 1, 2, 11, 81, 2, 94, 92, 0, 0, 0, 3, 186, 1, 0, 41, 50, 5, },//ntsc

};

unsigned short DynamicOptimizeSystem_196_y[][32]=//LG leaf #40 magenta green circle
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 167, 33, 35, 30, 686, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 167, 33, 35, 30, 686, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {1, 25, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 110, 71, 22, 23, 26, 710, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 167, 33, 35, 30, 686, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 167, 33, 35, 30, 686, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 167, 33, 35, 30, 686, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 167, 33, 35, 30, 686, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 167, 33, 35, 30, 686, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 167, 33, 35, 30, 686, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_196_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*1*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*2*/ {1, 0, 0, 0, 0, 0, 0, 1, 1, 575, 157, 5, 1, 0, 0, 0, 0, 0, 0, 1, 2, 107, 132, 4, },
	/*3*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*4*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*5*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*6*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*7*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
	/*8*/ {1, 0, 0, 0, 0, 0, 0, 0, 3, 679, 47, 5, 1, 0, 1, 1, 1, 0, 0, 1, 4, 164, 74, 5, },
};



unsigned short DynamicOptimizeSystem_197_y[][32]=  //qte 1002  building and street ,(streets)
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 1, 25, 52, 48, 48, 58, 60, 74, 167, 83, 38, 32, 23, 14, 25, 23, 29, 52, 62, 34, 13, 9, 8, 5, 2, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 1, 25, 52, 48, 48, 58, 60, 74, 167, 83, 38, 32, 23, 14, 25, 23, 29, 52, 62, 34, 13, 9, 8, 5, 2, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 1, 25, 52, 48, 48, 58, 60, 74, 167, 83, 38, 32, 23, 14, 25, 23, 29, 52, 62, 34, 13, 9, 8, 5, 2, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 1, 25, 52, 48, 48, 58, 60, 74, 167, 83, 38, 32, 23, 14, 25, 23, 29, 52, 62, 34, 13, 9, 8, 5, 2, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 2, 43, 61, 53, 67, 73, 107, 168, 64, 38, 28, 18, 30, 28, 48, 78, 43, 14, 10, 8, 4, 1, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 1, 25, 52, 48, 48, 58, 60, 74, 167, 83, 38, 32, 23, 14, 25, 23, 29, 52, 62, 34, 13, 9, 8, 5, 2, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 1, 25, 52, 48, 48, 58, 60, 74, 167, 83, 38, 32, 23, 14, 25, 23, 29, 52, 62, 34, 13, 9, 8, 5, 2, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 1, 25, 52, 48, 48, 58, 60, 74, 167, 83, 38, 32, 23, 14, 25, 23, 29, 52, 62, 34, 13, 9, 8, 5, 2, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 1, 25, 52, 48, 48, 58, 60, 74, 167, 83, 38, 32, 23, 14, 25, 23, 29, 52, 62, 34, 13, 9, 8, 5, 2, 0, 0, 0, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_197_hue[][COLOR_HUE_HISTOGRAM_LEVEL] = //qte 1002  building and street ,(streets)
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },//ntsc
	/*1*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },//ntsc
	/*2*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },//ntsc
	/*3*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },//ntsc
	/*4*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },
	/*5*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },//ntsc
	/*6*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },//ntsc
	/*7*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },//ntsc
	/*8*/ {8, 15, 24, 60, 205, 125, 60, 104, 38, 14, 14, 15, 12, 12, 18, 38, 71, 53, 42, 39, 9, 5, 4, 5, },
};


unsigned short DynamicOptimizeSystem_198_y1[][32]=  //qte 1002  building and street ,(building)
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 35, 60, 59, 96, 132, 139, 98, 112, 68, 59, 26, 19, 12, 12, 10, 12, 10, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 35, 60, 59, 96, 132, 139, 98, 112, 68, 59, 26, 19, 12, 12, 10, 12, 10, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 35, 60, 59, 96, 132, 139, 98, 112, 68, 59, 26, 19, 12, 12, 10, 12, 10, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 35, 60, 59, 96, 132, 139, 98, 112, 68, 59, 26, 19, 12, 12, 10, 12, 10, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 0, 56, 56, 97, 160, 157, 121, 112, 80, 39, 21, 14, 13, 15, 15, 13, 10, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 35, 60, 59, 96, 132, 139, 98, 112, 68, 59, 26, 19, 12, 12, 10, 12, 10, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 35, 60, 59, 96, 132, 139, 98, 112, 68, 59, 26, 19, 12, 12, 10, 12, 10, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 35, 60, 59, 96, 132, 139, 98, 112, 68, 59, 26, 19, 12, 12, 10, 12, 10, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 35, 60, 59, 96, 132, 139, 98, 112, 68, 59, 26, 19, 12, 12, 10, 12, 10, 9, 8, 5, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short DynamicOptimizeSystem_198_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =//qte 1002  building and street ,(building)
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, },
	/*1*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, },
	/*2*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, },
	/*3*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, },
	/*5*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, },
	/*6*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, },
	/*7*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 2, 8, 11, 6, 6, 6, 7, 10, 19, 22, 29, 53, 96, 569, 123, 16, 4, 1, 0, 0, 0, }

};

unsigned short DynamicOptimizeSystem_199_y1[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 2, 4, 5, 11, 55, 158, 145, 148, 143, 119, 73, 46, 32, 16, 10, 10, 4, 2, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, },//

};
unsigned short DynamicOptimizeSystem_199_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 1, 7, 18, 98, 78, 414, 314, 40, 6, 3, 1, 1, 2, 5, 5, 0, 0, 0, 0, 0, 0, 0, },//

};

unsigned short DynamicOptimizeSystem_201_y[][32]= //for AVS+, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,7,59,16,21,327,19,9,6,11,5,4,10,6,22,13,12,4,4,10,4,7,8,22,11,21,340,9,0,0,0},    //  4k
	/*1*/ {0,13,31,18,29,313,33,17,12,19,10,4,3,6,3,6,3,3,6,3,4,16,12,11,20,12,15,16,33,307,7,0},  //fhd
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};


unsigned short DynamicOptimizeSystem_202_y[][32]= //DTV HD passport Fair
{ //#0
	/*0*/ {8,5,214,5,13,60,77,47,42,59,35,26,31,34,53,70,82,48,23,12,9,8,7,6,3,2,2,1,2,1,0,0},    //  4k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeSystem_202_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =//DTV HD passport Fair
{ //#0
	/*0*/ {9,194,61,71,19,19,14,26,21,10,6,7,6,13,30,52,122,261,22,6,4,4,3,6},  // 4k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //fhd
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeSystem_205_y1[][32]= //BBC_DASH_TESTCARD_AUDIO_AND_VIDEO_EVENT_MESSAGE_COMPATIBILITY  KTASKWBS-9367
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},    //  4k
	/*1*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},  //fhd
	/*2*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},  //fhd
	/*3*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},
	/*4*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},
	/*5*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},
	/*6*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},
	/*7*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},
	/*8*/ {2, 32, 548, 45, 70, 56, 30, 21, 14, 16, 34, 7, 3, 5, 4, 2, 5, 4, 20, 2, 2, 5, 2, 5, 3, 3, 6, 3, 11, 18, 4, 4,},

};
unsigned short DynamicOptimizeSystem_205_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, },  // 4k
	/*1*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, },  //fhd
	/*2*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, }, //fhd
	/*3*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, },
	/*4*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, },
	/*5*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, },
	/*6*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, },
	/*7*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, },
	/*8*/ {17, 64, 103, 104, 112, 62, 75, 32, 23, 76, 44, 13, 35, 11, 6, 12, 17, 54, 72, 6, 5, 24, 16, 5, },

};
unsigned short DynamicOptimizeSystem_211_y[][32]= //CMR teeth pattern
{ //#0
	/*0*/ {0,1,12,8,3,42,13,7,8,6,14,8,13,25,24,639,25,33,7,6,3,5,3,14,8,10,39,4,3,1,0,0},//usb playback
	/*1*/ {0,0,64,7,6,7,7,4,17,9,10,5,6,29,17,616,20,28,17,3,7,3,4,3,4,7,17,5,12,51,0,0},  //hdmi576i
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};

unsigned short DynamicOptimizeSystem_225_y[][32]=//
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {0,0,0,0,0,5,25,38,24,18,49,82,63,50,39,32,23,24,33,33,42,39,45,44,36,42,41,42,37,27,52,0},
  /*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeSystem_225_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {0,0,9,673,159,123,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // 4k
  /*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
  /*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //fhd
  /*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeSystem_226_y[][32]=//
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {0,0,0,0,6,13,16,44,33,75,86,89,62,37,22,14,10,8,9,8,9,16,47,129,144,105,4,0,0,0,0,0},
  /*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeSystem_226_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {3,68,18,186,400,146,79,19,7,3,3,2,1,4,5,8,20,6,5,1,1,0,1,2},  // 4k
  /*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
  /*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //fhd
  /*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};


unsigned short DynamicOptimizeSystem_227_y[][32]=//
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {0,0,27,36,11,4,7,20,21,53,57,25,15,31,84,85,71,12,10,12,12,17,18,42,72,129,110,3,0,0,0,0},
  /*1*/ {0,0,24,28,9,4,7,15,15,16,16,40,31,25,76,99,69,31,22,27,26,25,28,40,51,121,126,16,0,0,0,0},
  /*2*/ {0,0,25,30,16,35,13,28,19,16,19,39,35,17,50,53,88,19,10,12,13,18,28,36,58,116,188,6,0,0,0,0},
  /*3*/ {0,0,30,39,51,5,11,25,20,72,63,23,13,31,88,85,42,9,8,11,10,14,19,43,71,117,80,2,0,0,0,0},
  /*4*/ {0,1,23,27,19,5,7,12,10,12,17,46,34,26,45,56,68,51,42,38,37,36,51,53,56,103,87,26,0,0,0,0},
  /*5*/ {0,0,65,36,83,10,11,21,18,54,70,25,11,9,12,39,83,73,21,10,10,10,22,34,64,102,87,5,0,0,0,0},
  /*6*/ {0,0,62,23,22,51,14,27,19,15,16,33,36,12,12,30,44,58,62,11,11,17,27,32,49,104,177,22,0,0,0,0},
  /*7*/ {0,0,59,23,14,3,5,15,17,15,14,32,29,16,18,34,64,97,71,22,26,22,30,34,54,63,177,32,0,0,0,0},
  /*8*/ {0,0,65,36,83,10,11,21,18,54,70,25,11,9,12,39,83,73,21,10,10,10,22,34,64,101,88,5,0,0,0,0},
};

unsigned short DynamicOptimizeSystem_227_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {0,0,0,0,0,0,2,2,6,9,86,97,142,82,154,313,77,12,4,2,1,1,0,0},  // 4k
  /*1*/ {0,0,2,4,1,1,2,3,14,19,112,124,199,132,124,155,69,15,12,1,0,0,0,0},  //fhd
  /*2*/ {1,1,2,3,2,1,3,2,5,7,87,92,52,44,165,186,145,63,88,23,5,5,2,2}, //fhd
  /*3*/ {0,0,0,0,0,1,2,2,8,14,61,77,129,60,148,395,85,6,2,1,1,1,0,0},
  /*4*/ {2,3,5,3,1,1,2,3,18,26,115,116,102,90,86,142,119,84,47,14,5,1,1,2},
  /*5*/ {0,0,0,0,1,2,3,5,11,23,87,87,88,47,145,366,113,5,1,1,1,3,0,0},
  /*6*/ {1,1,3,2,2,2,4,6,8,10,119,70,51,41,153,167,145,47,77,57,10,9,3,2},
  /*7*/ {0,0,2,2,1,1,3,6,20,23,125,170,170,101,113,146,69,11,18,2,1,4,1,0},
  /*8*/ {0,0,0,0,1,2,3,5,11,23,87,87,88,47,145,366,113,5,1,1,1,3,0,0},

};
unsigned short DynamicOptimizeMEMC_1_y[][32]= //MSPG PATTER 7 for MEMC
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,657,6,12,6,0,19,0,12,25,0,0,0,0,6,0,0,0,0,0,19,0,12,0,0,0,13,6,198,0,0},    //  4k
	/*1*/ {0,31,658,7,16,0,0,16,0,11,5,0,5,0,0,21,0,0,5,0,0,16,0,16,0,0,5,11,41,99,28,0,},  //fhd, 20190726 rev.
	/*2*/ {0,0,637,17,39,0,7,13,0,11,5,0,2,0,0,22,1,0,5,0,0,17,0,14,0,13,7,32,47,98,0,0},  //fhd
	/*3*/ {0,0,655,2,17,0,6,13,19,0,0,0,26,0,0,0,0,0,6,0,0,13,0,13,6,0,13,6,14,185,0,0},//HDR
	/*4*/ {0,0,0,0,12,636,13,6,0,21,0,0,1,4,0,0,0,6,0,0,184,12,19,25,0,13, 19,6,6,8,0,0, },//HLG_1
	/*5*/ {0,56,110,0, 609,61,12,6,0,19,0,0,6,0,0,0, 6,0,0,0,6,12,24,24,0,6,18,6,6,7,0,0,},//HLG_2
	/*6*/ {0,0,0,0,12,636,4, 8,6,12,0,8,0,0,6,0,0,6, 0,0,6,12,6,26,12,6,19,6,190,8,0,0, },	
	/*7*/ {0,0,0,0,600,75,12,6,0,19,0,0,6,0,0,21,149,0,0,0,5,11,17,23,5,6,17,5,6,7,0,0, },	
	/*8*/ {0,0,0,0,12, 636,13,0,6,12,8,0,0,6,0,0,0,6,0,0,6,12,6,39,176,6,25,6,6,8,0,0, },
	/*9*/ {0,0,0,0,12, 636,7, 5,6,12,0,8,0,0,6,0,0,6,0,0,6,12,6,38,0,6,197,12,6,8,0,0, }

};
unsigned short DynamicOptimizeMEMC_1_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,4,161,0,0,1,166,0,0,163,2,0,1,5,159,0,0,164,3,0,0,1,163,0},  // 4k
	/*1*/ {0,0,193,2,2,1,2,187,9,1,0,1,6,191,0,2,2,1,193,2,0,2,1,191,},  //fhd, 20190726 rev.
	/*2*/ {0,3,58,0,1,1,61,0,0,59,1,0,0,60,1,0,0,58,2,0,0,683,1,0}, //fhd
	/*3*/ {1,1,163,0,0,0,0,165,2,0,0,0,0,164,0,0,1,1,164,0,0,0,0,165,2,0,0,1,163,0,0,0},//HDR
	/*4*/ {1,1,163,0,0,0,0,163,4,0,0,0,163,1,0,0,1,1,163,0,0,0,0,166,1,0,0,0,1,163,0,0,},//HLG_1
	/*5*/ {0,0,165,1,0,0,0,162,4,0,0,0,165,0,0,0,0,1,165,0,0,0,0,164,0,0,0,0,2,163,0,0,},//HLG_2
	/*6*/ {0,0,165,0,0,0,0,162,4,0,0,0,165,0,0,0,0,1,165,0,0,0,0,165,0,0,0,0,2,163,0,0, },
	/*7*/ {0,0,166,0,0,0,0,162,4,0,0,0,164,0,0,0,0,0,165,0,0,0,0,164,0,0,0,0,2,163,0,0, },
	/*8*/ {0,0,165,1,0,0,0,161,4,0,0,0,165,0,0,0,0,1,165,0,0,0,0,164,0,0,0,0,2,163,0,0, },

};

unsigned short DynamicOptimizeMEMC_2_y[][32]= //DTV NTSC 31-3 for MEMC
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2,53,101,11,28,17,3,13,10,9,16,2,5,15,6,8,8,6,18,13,13,391,20,10,9,6,43,10,9,110,20,0},    //  4k
	/*1*/ {2,50,102,11,29,17,3,13,10,9,15,2,5,15,6,8,8,6,18,13,13,390,21,10,9,6,43,10,9,109,21,0},  //fhd
	/*2*/ {2,52,101,11,29,17,3,13,10,9,15,3,5,15,6,7,8,6,18,13,13,390,21,10,9,6,43,10,9,110,21,0},  //fhd
	/*3*/ {2,52,101,11,29,17,3,13,10,9,15,3,5,15,6,7,8,6,18,13,13,390,21,10,9,6,43,10,9,110,21,0},
	/*4*/ {2,52,101,11,29,17,3,13,10,9,15,3,5,15,6,7,8,6,18,13,13,390,21,10,9,6,43,10,9,110,21,0},
	/*5*/ {2,52,101,11,29,17,3,13,10,9,15,3,5,15,6,7,8,6,18,13,13,390,21,10,9,6,43,10,9,110,21,0},
	/*6*/ {2,52,101,11,29,17,3,13,10,9,15,3,5,15,6,7,8,6,18,13,13,390,21,10,9,6,43,10,9,110,21,0},
	/*7*/ {2,52,101,11,29,17,3,13,10,9,15,3,5,15,6,7,8,6,18,13,13,390,21,10,9,6,43,10,9,110,21,0},
	/*8*/ {2,52,101,11,29,17,3,13,10,9,15,3,5,15,6,7,8,6,18,13,13,390,21,10,9,6,43,10,9,110,21,0},

};
unsigned short DynamicOptimizeMEMC_2_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {14,7,155,5,5,153,12,2,2,1,144,2,3,16,154,11,4,161,10,2,1,1,115,9},  // 4k
	/*1*/ {16,7,156,4,5,153,14,3,2,2,146,2,3,15,155,9,3,162,10,1,0,1,115,3},  //fhd
	/*2*/ {10,7,157,4,5,155,14,3,2,2,147,2,3,16,156,10,3,164,10,1,0,1,116,3}, //fhd
	/*3*/ {10,7,157,4,5,155,14,3,2,2,147,2,3,16,156,10,3,164,10,1,0,1,116,3},
	/*4*/ {10,7,157,4,5,155,14,3,2,2,147,2,3,16,156,10,3,164,10,1,0,1,116,3},
	/*5*/ {10,7,157,4,5,155,14,3,2,2,147,2,3,16,156,10,3,164,10,1,0,1,116,3},
	/*6*/ {10,7,157,4,5,155,14,3,2,2,147,2,3,16,156,10,3,164,10,1,0,1,116,3},
	/*7*/ {10,7,157,4,5,155,14,3,2,2,147,2,3,16,156,10,3,164,10,1,0,1,116,3},
	/*8*/ {10,7,157,4,5,155,14,3,2,2,147,2,3,16,156,10,3,164,10,1,0,1,116,3},

};

unsigned short DynamicOptimizeMEMC_3_y[][32]= //casino for MEMC
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,257,1,10,243,116,43,18,15,11,5,3,4,4,3,3,4,4,4,5,5,11,25,193,0,0,0,0,0,0,0},    //  4kLOW
	/*1*/ {0,0,259,0,13,241,112,46,25,16,7,5,6,6,9,10,6,5,6,8,15,176,18,0,0,0,0,0,0,0,0,0},     //fhd
	/*2*/ {0,0,259,0,13,241,112,46,25,16,7,5,6,6,9,10,6,5,6,8,15,176,18,0,0,0,0,0,0,0,0,0},  //fhd
	/*3*/ {0,0,259,0,7,235,53,32,69,77,27,25,25,30,51,100,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,0,272,1,78,198,127,78,48,38,28,24,21,19,17,13,11,9,5,2,0,0,0,0,0,0,0,0,0,0,0,0},
	/*5*/ {0,0,258,0,7,212,63,53,44,35,31,31,34,43,66,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //ok
	/*6*/ {0,0,259,1,31,237,57,39,28,24,24,26,28,32,58,133,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,259,1,31,237,57,39,28,24,24,26,28,32,58,133,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,259,1,31,237,57,39,28,24,24,26,28,32,58,133,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_3_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1,35,18,9,9,17,63,144,56,15,9,11,23,30,147,398,5,1,0,0,0,0,0,0},  // 4k
	/*1*/ {0,3,26,6,5,2,2,2,3,8,20,47,63,52,28,17,160,50,50,201,238,5,0,0},  //fhd
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,57,7,386,320,216,4,1,1}, //fhd
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,5,438,321,214,1,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,5,438,321,214,1,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,57,7,386,320,216,4,1,1},
	/*6*/ {0,1,0,0,0,0,0,0,0,0,0,0,1,327,405,256,1,0,0,0,0,0,0,0},
	/*7*/ {0,1,0,0,0,0,0,0,0,0,0,0,1,327,405,256,1,0,0,0,0,0,0,0},
	/*8*/ {0,1,0,0,0,0,0,0,0,0,0,0,1,327,405,256,1,0,0,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_4_y[][32]= //ROKU S&M source adaptive for MEMC
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,13,801,12,5,6,6,5,5,5,5,4,4,4,3,5,6,4,4,4,5,5,5,5,6,6,5,7,18,17,4,0},    //  black bg
	/*1*/ {0,13,801,12,5,6,6,5,5,5,5,4,4,4,3,5,6,4,4,4,5,5,5,5,6,6,5,7,18,17,4,0},  //
	/*2*/ {0,16,790,12,5,6,6,6,6,5,5,4,4,4,3,5,8,4,5,5,5,5,5,6,6,6,5,7,19,18,3,0},
	/*3*/ {0,13,822,10,5,5,5,5,5,4,4,4,4,3,3,5,7,3,4,4,5,5,5,5,5,5,4,7,15,12,5,0},
	/*4*/ {0,13,822,10,5,5,5,5,5,4,4,4,4,3,3,5,7,3,4,4,5,5,5,5,5,5,4,7,15,12,5,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,994,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0},   // gray bg
	/*6*/ {0,0,0,0,0,0,11,12,7,6,5,5,4,4,4,862,5,4,4,5,5,5,6,8,11,14,0,0,0,1,0,0},//rgb legal cr 2k
	/*7*/{0,0,0,0,0,0,0,18,9,7,6,5,5,5,4,862,5,5,5,5,6,6,8,9,18,1,0,0,0,1,0,0},//rgb legal cr 4k
	/*8*/ {0,0,6,8,5,4,4,3,3,3,3,3,2,2,2,877,3,3,3,3,3,3,3,3,4,4,5,6,8,9,0,0},  //  rgb legal cb 4k

};
unsigned short DynamicOptimizeMEMC_4_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // 4k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //fhd
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {1,109,369,1,0,0,0,0,0,0,0,0,2,128,374,1,0,1,1,1,0,1,0,0},
	/*7*/ {0,81,395,3,0,0,0,0,0,0,0,0,2,129,380,0,0,0,2,0,0,0,0,0},
	/*8*/ {0,3,0,0,0,239,270,1,0,0,0,0,0,0,0,0,2,298,178,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_5_y[][32]= //DK_Zoomin_24P&MI3_Stairs_24P begin
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,105,119,115,94,67,44,33,29,21,14,12,12,14,16,18,18,24,27,30,35,36,26,22,26,19,4,1,1,0,0},    //DK_Zoomin_24P
	/*1*/ {0,4,118,119,111,87,63,43,31,27,20,15,12,12,13,15,16,17,24,27,32,38,38,31,23,25,19,5,1,0,0,0},
	/*2*/ {0,4,115,120,111,90,67,45,33,28,21,15,12,12,13,15,16,18,23,27,30,33,33,28,24,25,21,6,2,1,0,0},
	/*3*/ {0,1,213,9,11,15,26,46,51,51,51,55,59,61,59,56,50,41,32,27,25,21,16,8,3,0,0,0,0,0,0,0},  // MI3_Stairs_24P
	/*4*/ {0,1,243,9,11,14,23,45,52,51,50,54,57,56,54,54,48,37,29,24,25,21,15,9,3,0,0,0,0,0,0,0},
	/*5*/ {0,1,243,9,11,14,24,45,51,50,50,53,56,57,55,54,48,38,29,24,24,21,16,9,3,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,10,15,11,9,8,7,6,6,6,5,5,5,5,775,6,6,5,6,6,6,7,7,7,8,9,11,15,15,0,0},
	/*8*/ {0,0,0,0,0,0,17,22,12,8,8,7,5,5,6,796,6,5,5,6,7,8,9,12,24,19,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_5_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {17,34,55,166,9,1,1,0,1,0,0,0,0,6,9,50,295,182,87,21,14,13,10,17},  // 4k
	/*1*/ {19,33,47,194,7,0,0,0,1,0,0,0,1,6,8,47,279,183,79,27,17,12,12,18},  //fhd
	/*2*/ {20,32,43,183,11,0,0,0,1,0,0,0,1,5,7,41,304,190,75,23,15,10,11,17}, //fhd
	/*3*/ {0,1,23,615,322,28,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,2,26,612,317,29,5,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*5*/ {0,2,23,582,347,31,6,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};


unsigned short DynamicOptimizeMEMC_6_y[][32]= //Art of Flight 00:07:34
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {6,15,27,132,33,42,53,38,24,17,25,39,28,34,42,30,22,13,14,15,18,25,55,55,40,37,31,27,23,17,1,4},    //
	/*1*/ {0,2,10,18,29,39,32,22,22,25,50,89,65,50,44,32,23,15,16,18,23,32,64,61,46,43,35,30,26,21,1,0},
	/*2*/ {7,20,27,127,37,45,50,43,26,16,27,41,28,34,42,30,22,14,14,15,18,24,52,50,39,36,31,26,23,16,1,4},
	/*3*/ {0,2,11,20,34,44,35,23,23,24,55,85,63,50,44,32,23,16,15,18,21,30,59,56,46,43,36,30,27,19,1,0},  //
	/*4*/ {8,24,29,121,40,46,48,44,28,17,27,45,29,35,42,30,22,14,13,15,18,24,50,44,37,34,30,26,22,16,1,4},
	/*5*/ {0,2,12,21,39,47,35,24,23,24,57,84,62,49,45,32,24,15,15,17,21,29,56,50,44,42,36,30,27,19,1,0},
	/*6*/ {7,27,31,119,44,51,49,43,29,16,29,52,31,38,42,31,21,13,13,15,17,22,46,37,34,31,29,25,22,15,1,4},
	/*7*/ {0,2,12,24,44,51,37,24,23,25,56,89,64,50,45,33,24,16,15,18,21,28,52,43,40,39,36,30,26,18,1,0},
	/*8*/ {9,30,49,129,45,38,30,32,20,16,93,55,34,44,43,31,23,13,12,12,13,15,22,25,30,31,28,24,19,14,1,4},

};
unsigned short DynamicOptimizeMEMC_6_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {7,13,34,115,105,149,67,15,6,3,2,2,2,3,5,46,288,65,20,13,10,6,5,6},  // 4k
	/*1*/ {8,16,38,116,106,146,62,15,6,3,2,2,2,3,5,43,277,74,21,14,10,7,5,7},  //fhd
	/*2*/ {7,12,35,122,102,150,64,14,6,3,2,2,2,3,5,43,279,73,21,14,10,6,5,6}, //fhd
	/*3*/ {8,13,38,124,103,146,58,14,6,3,2,2,2,3,5,41,271,80,22,15,11,7,6,7},
	/*4*/ {6,11,28,112,107,145,76,18,8,4,3,3,3,4,6,50,282,63,20,13,9,5,5,6},
	/*5*/ {7,12,31,117,105,145,68,17,7,4,3,3,3,4,6,47,276,70,21,14,10,6,5,6},
	/*6*/ {7,13,36,124,95,147,59,13,6,3,2,2,2,3,5,43,285,80,22,14,10,6,5,7},
	/*7*/ {8,14,39,127,95,144,52,13,6,3,2,2,2,3,5,41,279,84,23,15,11,7,6,7},
	/*8*/ {6,9,20,89,67,128,66,15,7,4,2,3,2,4,5,58,350,101,19,11,7,4,4,5},

};

unsigned short DynamicOptimizeMEMC_7_y[][32]= //Art of Flight 01:05:56
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,4,20,53,60,58,73,78,74,72,59,46,39,37,35,29,18,14,12,10,11,12,15,20,37,48,45,4,1,0,0},  //
	/*1*/ {0,1,14,26,54,56,59,78,80,72,76,67,45,32,29,28,27,18,13,11,9,11,12,15,20,37,46,46,4,2,0,0},
	/*2*/ {0,1,13,32,61,68,67,77,75,66,72,63,45,27,18,22,25,18,12,10,10,12,14,16,20,36,46,51,4,2,0,0},
	/*3*/ {0,2,16,30,70,77,74,87,77,63,57,39,26,22,25,29,27,20,14,11,11,13,16,18,22,33,40,57,10,1,0,0},  //
	/*4*/ {0,2,30,33,77,86,79,80,67,50,44,37,33,35,36,33,28,17,13,11,12,13,19,20,21,26,27,36,18,2,0,0},
	/*5*/ {0,0,4,19,52,58,58,71,83,66,73,63,51,39,36,35,30,19,14,12,10,11,12,15,20,38,47,44,4,1,0,0},
	/*6*/ {0,0,8,25,54,55,54,75,75,66,69,64,55,42,33,31,28,19,15,12,10,11,12,15,20,37,47,45,4,2,0,0},
	/*7*/ {0,1,15,30,54,65,72,81,70,64,73,64,45,31,23,23,26,19,13,11,10,12,13,15,20,36,46,49,4,2,0,0},
	/*8*/ {0,1,15,31,59,68,75,82,74,70,71,50,28,21,24,26,25,20,14,11,11,14,17,19,21,33,42,54,8,1,0,0},

};
unsigned short DynamicOptimizeMEMC_7_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1,17,22,96,277,97,63,13,7,4,2,5,3,30,4,114,198,11,21,1,0,1,0,1},  // 4k
	/*1*/ {1,23,22,117,284,82,48,14,6,4,2,4,3,37,5,113,177,13,27,1,1,1,0,1},  //fhd
	/*2*/ {4,24,29,138,298,78,72,16,7,6,3,6,5,39,9,90,121,13,24,1,1,2,1,2}, //fhd
	/*3*/ {4,21,27,131,329,78,107,16,10,6,4,7,5,52,9,42,108,11,12,2,2,1,1,2},
	/*4*/ {6,30,34,133,321,99,94,23,11,7,3,4,4,48,16,43,84,7,8,2,2,2,2,6},
	/*5*/ {1,13,24,97,268,119,60,14,7,4,2,6,4,33,7,105,198,9,14,0,0,1,0,0},
	/*6*/ {1,19,23,120,259,108,44,12,5,4,2,4,3,32,4,114,193,12,25,1,1,1,0,1},
	/*7*/ {3,27,26,131,302,73,54,15,7,5,2,5,4,40,8,107,133,14,25,1,1,1,1,2},
	/*8*/ {5,23,28,131,311,87,86,16,10,6,3,6,4,59,11,55,109,12,15,2,2,2,2,3},

};

unsigned short DynamicOptimizeMEMC_8_y[][32]= //Art of Flight 00:02:28
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,6,270,67,50,60,69,75,75,71,66,41,24,23,18,8,8,5,5,5,6,8,10,7,3,2,2,2,0,0,0,0},  //
	/*1*/ {0,9,342,69,53,58,65,82,87,61,60,23,9,6,6,6,6,5,6,6,6,5,4,3,2,3,2,2,0,0,0,0},
	/*2*/ {0,32,276,63,48,60,62,73,80,63,63,47,27,14,8,6,7,9,8,6,5,5,5,5,4,4,3,3,0,0,0,0},
	/*3*/ {0,2,16,30,70,77,74,87,77,63,57,39,26,22,25,29,27,20,14,11,11,13,16,18,22,33,40,57,10,1,0,0},  //
	/*4*/ {0,2,30,33,77,86,79,80,67,50,44,37,33,35,36,33,28,17,13,11,12,13,19,20,21,26,27,36,18,2,0,0},
	/*5*/ {0,0,4,19,52,58,58,71,83,66,73,63,51,39,36,35,30,19,14,12,10,11,12,15,20,38,47,44,4,1,0,0},
	/*6*/ {0,0,8,25,54,55,54,75,75,66,69,64,55,42,33,31,28,19,15,12,10,11,12,15,20,37,47,45,4,2,0,0},
	/*7*/ {0,1,15,30,54,65,72,81,70,64,73,64,45,31,23,23,26,19,13,11,10,12,13,15,20,36,46,49,4,2,0,0},
	/*8*/ {0,1,15,31,59,68,75,82,74,70,71,50,28,21,24,26,25,20,14,11,11,14,17,19,21,33,42,54,8,1,0,0},

};
unsigned short DynamicOptimizeMEMC_8_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,29,121,241,194,29,27,18,15,17,16,18,19,30,37,79,91,6,3,0,0,0,0,0},  // 4k
	/*1*/ {0,37,134,208,185,36,29,26,25,22,18,25,28,42,41,75,45,6,5,0,0,0,0,0},  //fhd
	/*2*/ {0,36,127,214,192,32,32,19,15,16,16,21,24,38,43,73,79,7,6,0,0,0,0,0}, //fhd
	/*3*/ {4,21,27,131,329,78,107,16,10,6,4,7,5,52,9,42,108,11,12,2,2,1,1,2},
	/*4*/ {6,30,34,133,321,99,94,23,11,7,3,4,4,48,16,43,84,7,8,2,2,2,2,6},
	/*5*/ {1,13,24,97,268,119,60,14,7,4,2,6,4,33,7,105,198,9,14,0,0,1,0,0},
	/*6*/ {1,19,23,120,259,108,44,12,5,4,2,4,3,32,4,114,193,12,25,1,1,1,0,1},
	/*7*/ {3,27,26,131,302,73,54,15,7,5,2,5,4,40,8,107,133,14,25,1,1,1,1,2},
	/*8*/ {5,23,28,131,311,87,86,16,10,6,3,6,4,59,11,55,109,12,15,2,2,2,2,3},

};

unsigned short DynamicOptimizeMEMC_9_y[][32]= //ROKU S&M stock ticker for MEMC
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,10,278,187,177,126,17,13,12,10,6,5,5,4,4,5,5,6,23,16,5,3,4,5,4,4,5,5,4,23,14,0},    // no osd
	/*1*/ {0,10,282,188,176,124,16,12,11,11,6,5,5,4,4,5,5,6,19,18,8,4,4,5,4,4,4,5,4,23,14,0},
	/*2*/ {0,9,283,187,177,124,16,12,11,10,6,5,5,3,4,5,5,6,18,18,7,5,4,6,5,4,4,5,4,23,14,0},
	/*3*/ {0,10,283,186,177,124,17,12,11,10,6,5,5,4,4,5,5,6,18,20,7,5,4,5,4,4,4,5,4,23,14,0},
	/*4*/ {362,394,36,17,16,46,13,15,28,23,0,15,0,0,0,0,0,0,1,0,0,0,1,1,4,12,0,0,0,0,0,1},  //  osd
	/*5*/ {366,388,35,16,15,46,18,17,28,23,0,14,0,0,0,1,0,0,0,0,0,0,1,1,4,12,0,0,0,0,0,1},
	/*6*/ {367,391,35,16,15,41,18,18,28,23,0,14,0,0,1,0,0,0,0,0,0,0,1,1,4,12,0,0,0,0,0,1},
	/*7*/ {368,395,34,15,16,40,16,16,29,23,0,12,0,0,2,1,0,0,0,0,0,0,1,1,4,12,0,0,0,0,0,1},
	/*8*/ {0,10,280,187,176,125,17,13,12,11,6,5,5,4,4,5,5,6,20,17,5,3,3,5,4,4,5,6,4,23,13,0}, // no osd

};
unsigned short DynamicOptimizeMEMC_9_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,14,755,88,34,21,19,13,4,1,1,0,0,1,7,31,2,0,0,0,0,0,0,0},  // no osd
	/*1*/ {0,15,753,88,35,20,19,14,4,1,1,0,0,1,6,31,2,0,0,0,0,0,0,0},
	/*2*/ {0,16,754,87,34,20,19,13,4,1,1,1,0,1,6,31,2,0,0,0,0,0,0,0},
	/*3*/ {0,13,756,87,35,21,19,14,4,1,1,0,0,1,7,31,2,0,0,0,0,0,0,0},
	/*4*/ {0,0,615,222,40,26,21,17,6,1,1,0,0,2,10,32,0,0,0,0,0,0,0,0}, //  osd
	/*5*/ {0,0,618,219,40,26,21,17,6,2,1,1,0,2,9,33,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,621,213,41,27,21,16,6,1,1,1,0,2,9,33,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,618,217,40,27,21,17,6,1,1,1,0,2,9,33,0,0,0,0,0,0,0,0},
	/*8*/ {0,14,755,88,34,21,19,14,4,1,1,1,0,1,7,31,2,0,0,0,0,0,0,0},   // no osd

};

unsigned short DynamicOptimizeMEMC_10_y[][32]= //ROKU S&M resolution2 for MEMC
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,50,648,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,1,196,4,0,0,0,0,0,44,43,0},    // no osd
	/*1*/ {663,2,6,1,0,4,184,7,26,52,2,14,0,0,2,0,0,2,0,0,0,0,1,1,5,14,0,0,0,0,0,1},  // osd
	/*2*/ {0,50,648,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,1,196,4,0,0,0,0,0,44,43,0},  // no osd
	/*3*/ {663,2,6,1,0,4,183,7,27,52,2,14,0,0,2,0,0,2,0,0,0,0,1,1,5,14,0,0,0,0,0,1},
	/*4*/ {662,2,6,1,0,4,183,6,27,52,2,14,0,0,2,0,0,2,0,0,0,0,1,1,5,14,0,0,0,0,0,1},
	/*5*/ {0,34,632,3,0,5,3,1,11,12,7,0,1,6,2,1,6,4,3,10,3,5,192,5,2,4,5,5,3,16,4,0},
	/*6*/ {633,14,24,11,12,17,190,15,13,17,1,14,0,0,2,1,0,1,0,0,0,0,1,1,5,14,0,0,0,0,0,1},
	/*7*/ {0,34,632,3,0,5,3,1,11,12,7,0,1,6,2,1,6,4,3,10,3,5,192,5,2,4,5,5,3,16,4,0},
	/*8*/ {632,14,24,11,12,17,189,15,13,17,1,14,0,0,2,1,0,0,0,0,0,0,1,1,5,14,0,0,0,0,0,1},

};
unsigned short DynamicOptimizeMEMC_10_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // 4k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,969,60,0,0,0,0,0,0,0},  //fhd
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //fhd
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,970,60,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,970,60,0,0,0,0,0,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,966,60,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,966,60,0,0,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_11_y[][32]= //Art of Flight 00:03:20/03:25/ 14:43
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,6,2,2,3,7,47,117,62,31,19,8,7,24,45,93,139,97,107,58,33,33,22,16,6,0,0,0,0,0,0},  // 00:03:20  2k
	/*1*/ {0,0,5,3,3,5,9,40,117,69,43,19,11,9,15,24,89,130,69,87,67,61,42,23,17,12,8,4,2,2,0,0},
	/*2*/ {0,0,4,4,10,13,14,17,56,97,67,26,8,3,2,2,56,109,48,57,74,79,67,48,34,28,23,15,9,13,0,0},
	/*3*/ {0,0,6,2,2,3,6,46,119,63,32,18,8,7,23,45,92,140,98,107,58,33,33,22,16,6,0,0,0,0,0,0}, // 00:03:20  4k
	/*4*/ {0,0,3,4,8,12,14,18,60,95,75,29,10,4,3,3,48,120,54,63,82,76,58,44,30,28,20,12,7,6,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,6,66,202,148,61,40,40,38,39,30,33,32,34,46,46,42,34,26,17,7,1,0,0}, //  03:25 2k
	/*6*/ {0,0,0,0,0,0,0,0,0,6,72,207,144,59,40,38,37,39,30,33,31,35,46,46,40,34,26,16,7,1,0,0},//  03:25 4k
	/*7*/ {0,6,128,35,49,67,64,101,67,46,25,16,22,30,30,19,24,33,33,33,16,12,14,15,11,14,19,36,23,0,0,0},    //  14:43  2k
	/*8*/ {0,2,129,36,49,67,63,101,70,45,25,16,22,30,30,19,23,33,33,33,16,12,14,15,11,14,19,35,23,0,0,0},    //  14:43  4k

};
unsigned short DynamicOptimizeMEMC_11_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1,4,3,50,152,56,27,13,2,1,0,0,0,1,3,51,609,6,3,1,1,1,1,1}, // 00:03:20  2k
	/*1*/ {0,3,3,43,137,79,41,14,4,2,1,0,0,1,3,60,587,6,3,0,1,0,0,0},  //
	/*2*/ {1,3,6,31,83,120,32,23,10,7,3,3,2,7,11,99,536,7,3,1,1,0,0,0}, //
	/*3*/ {0,5,3,50,152,56,27,14,2,1,0,0,0,1,4,55,603,5,3,0,1,1,0,0}, // 00:03:20  4k
	/*4*/ {0,4,4,30,87,123,42,20,10,7,1,3,1,7,10,102,526,5,4,0,0,1,0,0},
	/*5*/ {0,1,0,2,0,0,24,5,3,3,0,0,0,4,3,29,881,19,13,0,0,0,0,0},          //  03:25 2k
	/*6*/ {0,2,0,2,0,0,27,4,2,5,0,0,0,6,3,39,870,14,15,0,0,0,0,0},  //  03:25 4k
	/*7*/ {4,287,84,142,401,48,6,1,0,0,0,0,0,0,0,0,0,0,2,3,3,2,2,5},  //  14:43  2k
	/*8*/ {3,287,86,142,399,47,7,1,0,0,0,0,0,0,0,0,0,0,3,3,3,2,2,5}, //  14:43  4k

};

unsigned short DynamicOptimizeMEMC_12_y[][32]= //Art of Flight 01:06:35
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,9,2,1,1,1,1,4,16,33,82,301,113,63,54,49,37,51,47,49,43,14,7,3,2,0,0,0,0,0,0},
	/*1*/ {0,1,9,1,2,1,3,14,29,31,38,60,225,117,76,37,41,29,23,22,21,27,46,51,37,40,4,1,0,0,0,0},
	/*2*/ {0,1,6,1,2,1,1,3,13,22,28,47,172,103,31,26,36,39,27,25,21,22,25,27,31,59,49,69,88,10,0,0},
	/*3*/ {0,1,10,2,2,1,1,1,6,23,37,81,303,91,53,55,54,49,60,34,38,21,12,10,10,10,11,7,4,0,0,0},
	/*4*/ {0,1,4,4,5,7,8,11,32,68,127,37,18,10,10,20,74,126,69,76,86,65,43,30,23,17,8,5,2,1,0,0},
	/*5*/ {0,1,2,4,8,11,13,18,48,82,88,35,13,6,5,9,47,122,60,66,86,71,56,43,29,25,16,10,6,4,0,0},
	/*6*/ {0,1,2,3,12,17,16,20,57,83,57,19,5,3,2,3,69,102,46,43,47,56,77,66,40,28,26,24,18,40,1,0},
	/*7*/ {0,34,632,3,0,5,3,1,11,12,7,0,1,6,2,1,6,4,3,10,3,5,192,5,2,4,5,5,3,16,4,0},
	/*8*/ {632,14,24,11,12,17,189,15,13,17,1,14,0,0,2,1,0,0,0,0,0,0,1,1,5,14,0,0,0,0,0,1},

};
unsigned short DynamicOptimizeMEMC_12_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2,6,16,40,104,29,10,3,3,3,2,2,2,5,7,94,599,34,14,5,2,1,1,2},  // 4k
	/*1*/ {1,4,11,18,132,62,7,2,1,1,1,2,1,3,4,52,637,28,9,4,2,1,1,1},  //fhd
	/*2*/ {2,5,11,18,216,137,11,2,1,0,0,0,1,2,3,23,509,25,12,3,2,2,1,2}, //fhd
	/*3*/ {2,6,18,37,116,20,13,2,2,3,1,1,2,17,5,105,564,39,18,7,4,2,2,3},
	/*4*/ {1,5,13,109,119,37,27,11,4,3,1,1,1,2,4,56,579,8,4,1,1,0,1,1},
	/*5*/ {1,3,5,33,103,112,39,20,8,5,2,2,1,4,8,89,541,6,3,1,1,0,0,0},
	/*6*/ {0,2,5,20,76,101,28,31,16,10,4,5,3,11,17,122,526,6,3,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,966,60,0,0,0,0,0,0,0},

};


unsigned short DynamicOptimizeMEMC_13_y[][32]=//S&M saech on a hammock
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,3,7,10,18,27,34,30,24,23,22,20,21,33,49,70,91,90,60,37,27,26,24,25,21,26,42,67,52,5,0},    //  no osd
	/*1*/ {0,0,1,4,7,13,19,23,20,19,19,18,17,19,31,53,83,112,102,60,36,28,28,27,27,29,35,51,71,33,0,0},
	/*2*/ {0,1,3,6,11,16,22,24,20,17,18,17,17,20,33,53,82,117,112,63,34,26,25,24,24,28,32,43,64,33,2,0},
	/*3*/ {0,0,2,4,7,13,20,25,22,19,19,19,19,22,36,53,72,92,91,61,40,31,29,27,28,28,33,49,78,47,2,0},
	/*4*/ {16,53,93,72,133,248,84,71,150,10,0,0,1,2,15,7,6,2,1,0,0,0,0,0,5,12,0,0,0,0,0,1},         //  osd
	/*5*/ {7,37,63,59,150,254,97,99,163,1,0,0,0,2,14,8,8,1,1,1,0,0,0,0,6,10,0,0,0,0,0,1},
	/*6*/ {15,45,64,58,151,297,86,85,126,5,0,0,0,1,20,3,9,1,2,1,0,0,0,0,4,11,0,0,0,0,0,1},
	/*7*/ {12,44,62,58,149,302,88,87,125,3,0,0,0,2,19,3,9,1,2,1,0,0,0,0,6,11,0,0,0,0,0,1},
	/*8*/ {632,14,24,11,12,17,189,15,13,17,1,14,0,0,2,1,0,0,0,0,0,0,1,1,5,14,0,0,0,0,0,1},

};
unsigned short DynamicOptimizeMEMC_13_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {19,34,67,129,208,76,40,16,6,3,3,3,3,7,9,22,39,89,91,44,26,18,17,20},  // 4k
	/*1*/ {22,36,62,114,200,80,43,19,7,3,3,4,4,8,10,21,47,74,94,53,28,17,16,21},  //fhd
	/*2*/ {20,35,64,113,208,83,46,21,8,3,3,4,4,8,10,20,41,50,81,64,43,23,17,19}, //fhd
	/*3*/ {22,36,64,116,197,70,38,17,6,3,3,3,4,7,10,24,44,100,99,42,25,17,17,21},
	/*4*/ {2,9,50,107,239,128,59,23,4,0,1,1,2,5,10,23,62,138,88,24,7,2,1,1},
	/*5*/ {5,15,48,104,242,117,59,26,5,1,1,1,2,6,10,36,56,135,95,18,4,1,1,2},
	/*6*/ {6,17,51,92,240,143,68,28,6,1,1,2,2,5,9,28,42,55,76,57,36,15,5,3},
	/*7*/ {7,17,51,95,242,141,67,28,6,1,1,2,2,5,9,27,43,61,81,53,30,12,4,4},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,966,60,0,0,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_14_y[][32]=//S&M saech on a hammock
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,3,7,10,18,27,34,30,24,23,22,20,21,33,49,70,91,90,60,37,27,26,24,25,21,26,42,67,52,5,0},    //  no osd
	/*1*/ {0,0,1,4,7,13,19,23,20,19,19,18,17,19,31,53,83,112,102,60,36,28,28,27,27,29,35,51,71,33,0,0},
	/*2*/ {0,1,3,6,11,16,22,24,20,17,18,17,17,20,33,53,82,117,112,63,34,26,25,24,24,28,32,43,64,33,2,0},
	/*3*/ {0,0,2,4,7,13,20,25,22,19,19,19,19,22,36,53,72,92,91,61,40,31,29,27,28,28,33,49,78,47,2,0},
	/*4*/ {16,53,93,72,133,248,84,71,150,10,0,0,1,2,15,7,6,2,1,0,0,0,0,0,5,12,0,0,0,0,0,1},         //  osd
	/*5*/ {7,37,63,59,150,254,97,99,163,1,0,0,0,2,14,8,8,1,1,1,0,0,0,0,6,10,0,0,0,0,0,1},
	/*6*/ {15,45,64,58,151,297,86,85,126,5,0,0,0,1,20,3,9,1,2,1,0,0,0,0,4,11,0,0,0,0,0,1},
	/*7*/ {12,44,62,58,149,302,88,87,125,3,0,0,0,2,19,3,9,1,2,1,0,0,0,0,6,11,0,0,0,0,0,1},
	/*8*/ {632,14,24,11,12,17,189,15,13,17,1,14,0,0,2,1,0,0,0,0,0,0,1,1,5,14,0,0,0,0,0,1},

};
unsigned short DynamicOptimizeMEMC_14_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {19,34,67,129,208,76,40,16,6,3,3,3,3,7,9,22,39,89,91,44,26,18,17,20},  // 4k
	/*1*/ {22,36,62,114,200,80,43,19,7,3,3,4,4,8,10,21,47,74,94,53,28,17,16,21},  //fhd
	/*2*/ {20,35,64,113,208,83,46,21,8,3,3,4,4,8,10,20,41,50,81,64,43,23,17,19}, //fhd
	/*3*/ {22,36,64,116,197,70,38,17,6,3,3,3,4,7,10,24,44,100,99,42,25,17,17,21},
	/*4*/ {2,9,50,107,239,128,59,23,4,0,1,1,2,5,10,23,62,138,88,24,7,2,1,1},
	/*5*/ {5,15,48,104,242,117,59,26,5,1,1,1,2,6,10,36,56,135,95,18,4,1,1,2},
	/*6*/ {6,17,51,92,240,143,68,28,6,1,1,2,2,5,9,28,42,55,76,57,36,15,5,3},
	/*7*/ {7,17,51,95,242,141,67,28,6,1,1,2,2,5,9,27,43,61,81,53,30,12,4,4},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,966,60,0,0,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_15_y[][32]=//Downtown  30s  /Art of Flight 00:20:55/Art of Flight 00:46:40
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,10,33,29,37,37,26,28,78,97,126,126,131,52,70,45,30,17,15,5,0,0,0,0,0,0,0,0,0,0,0},//Downtown  30s
	/*1*/ {0,0,8,40,30,32,37,27,26,46,93,123,150,139,57,78,39,27,14,20,6,0,0,0,0,0,0,0,0,0,0,0},
	/*2*/ {0,0,16,41,34,30,34,26,26,40,84,125,179,133,54,78,31,22,11,20,6,0,0,0,0,0,0,0,0,0,0,0},
	/*3*/ {0,1,67,70,59,49,45,49,55,61,68,70,66,60,54,47,40,31,23,17,12,9,6,4,3,2,1,1,3,11,0,0},  //Art of Flight 00:20:55
	/*4*/ {0,3,72,70,60,49,45,49,55,61,67,69,64,58,52,46,39,31,23,17,12,9,6,4,3,2,1,1,3,12,0,0},
	/*5*/ {0,2,68,70,60,48,44,48,55,62,69,71,66,60,53,46,39,30,23,17,12,9,6,4,3,2,1,2,3,14,0,0},
	/*6*/ {0,7,109,29,17,16,21,33,37,40,44,29,41,46,63,66,55,46,66,66,38,22,18,15,12,9,7,8,14,12,1,0},    //Art of Flight 00:46:40
	/*7*/ {0,8,107,26,16,18,24,41,44,45,52,31,42,46,64,67,52,41,50,61,40,23,17,13,11,8,6,6,13,13,1,0},    //
	/*8*/ {0,4,72,18,14,17,27,51,54,58,67,32,40,47,69,66,47,38,49,57,38,25,16,11,10,9,5,4,11,27,1,0},    //

};
unsigned short DynamicOptimizeMEMC_15_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5,11,18,62,68,107,61,47,48,10,7,7,6,7,56,244,180,19,9,5,3,2,2,4},  // 4k
	/*1*/ {5,15,21,66,80,83,83,72,50,8,5,5,5,8,74,264,115,9,5,4,3,2,3,4},  //fhd
	/*2*/ {8,14,25,70,80,70,75,77,48,7,4,4,4,6,85,289,83,10,7,5,4,3,4,6}, //fhd
	/*3*/ {12,24,54,227,382,126,48,13,6,3,2,2,2,5,3,6,13,10,14,8,7,7,6,9},
	/*4*/ {12,24,55,222,385,127,50,13,5,3,2,2,1,3,3,6,13,10,18,8,7,5,5,9},
	/*5*/ {10,22,51,208,389,140,51,13,6,3,2,2,2,5,2,6,15,12,16,7,7,5,5,8},
	/*6*/ {1,8,7,7,7,5,7,7,9,8,8,9,11,65,123,466,204,22,8,1,1,1,1,2},
	/*7*/ {1,7,5,5,5,3,7,5,9,9,6,6,7,66,124,521,171,17,8,2,1,1,1,1},
	/*8*/ {1,4,4,7,7,5,5,4,4,3,3,4,6,73,74,545,210,20,5,2,1,0,0,0},

};

unsigned short DynamicOptimizeMEMC_16_y[][32]=//IDT_Harbor_var
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,3,40,44,43,37,33,28,27,27,27,28,31,35,50,61,49,71,65,62,51,42,31,19,14,9,9,16,15,17,0,0},
	/*1*/ {0,3,43,46,45,38,34,29,28,29,28,29,31,35,49,60,48,70,65,62,50,43,32,17,12,8,8,12,14,15,0,0},
	/*2*/ {0,4,44,46,44,37,34,29,27,28,28,29,32,37,52,61,48,69,66,62,35,46,32,20,14,9,9,16,15,14,0,0},
	/*3*/ {0,4,44,46,44,37,34,29,27,28,28,29,32,37,52,61,48,69,66,62,35,46,32,20,14,9,9,16,15,14,0,0},
	/*4*/ {0,4,44,46,44,37,34,29,27,28,28,29,32,37,52,61,48,69,66,62,35,46,32,20,14,9,9,16,15,14,0,0},
	/*5*/ {0,4,44,46,44,37,34,29,27,28,28,29,32,37,52,61,48,69,66,62,35,46,32,20,14,9,9,16,15,14,0,0},
	/*6*/ {0,4,44,46,44,37,34,29,27,28,28,29,32,37,52,61,48,69,66,62,35,46,32,20,14,9,9,16,15,14,0,0},
	/*7*/ {0,4,44,46,44,37,34,29,27,28,28,29,32,37,52,61,48,69,66,62,35,46,32,20,14,9,9,16,15,14,0,0},
	/*8*/ {0,4,44,46,44,37,34,29,27,28,28,29,32,37,52,61,48,69,66,62,35,46,32,20,14,9,9,16,15,14,0,0},

};
unsigned short DynamicOptimizeMEMC_16_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {16,48,118,135,115,8,6,2,2,1,1,1,2,4,10,36,378,26,28,14,10,8,8,11},  // 4k
	/*1*/ {18,52,121,145,104,7,6,2,1,1,1,1,1,4,9,31,382,27,26,12,9,7,8,12},  //fhd
	/*2*/ {16,49,113,145,114,9,8,3,2,1,1,1,2,4,10,37,367,26,29,14,10,7,7,10}, //fhd
	/*3*/ {16,49,113,145,114,9,8,3,2,1,1,1,2,4,10,37,367,26,29,14,10,7,7,10},
	/*4*/ {16,49,113,145,114,9,8,3,2,1,1,1,2,4,10,37,367,26,29,14,10,7,7,10},
	/*5*/ {16,49,113,145,114,9,8,3,2,1,1,1,2,4,10,37,367,26,29,14,10,7,7,10},
	/*6*/ {16,49,113,145,114,9,8,3,2,1,1,1,2,4,10,37,367,26,29,14,10,7,7,10},
	/*7*/ {16,49,113,145,114,9,8,3,2,1,1,1,2,4,10,37,367,26,29,14,10,7,7,10},
	/*8*/ {16,49,113,145,114,9,8,3,2,1,1,1,2,4,10,37,367,26,29,14,10,7,7,10},

};

unsigned short DynamicOptimizeMEMC_17_y[][32]=//HD_H_R_24P  /Art of Flight 22:17
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,1,3,12,48,87,92,78,83,114,137,179,94,10,4,4,4,5,5,5,5,5,4,2,6,0,0}, //HD_H_R_24P
	/*1*/ {0,0,0,0,0,0,1,3,12,48,87,91,78,82,112,136,180,96,10,4,5,5,5,5,5,5,5,3,2,6,0,0},
	/*2*/ {0,0,0,0,0,0,1,3,12,48,88,90,78,82,112,136,180,97,10,4,5,5,5,5,5,5,5,4,2,7,0,0},
	/*3*/ {0,0,0,0,0,0,1,3,12,47,86,90,78,82,112,136,180,98,10,4,4,5,5,6,6,5,4,3,2,7,0,0},
	/*4*/ {0,1,48,10,10,17,27,50,40,21,23,35,24,26,40,61,96,74,70,69,77,64,47,13,13,17,5,9,0,0,0,0},//Art of Flight  2k 22:17
	/*5*/ {0,0,51,13,9,16,30,51,38,21,27,35,29,32,47,60,89,65,55,58,76,71,57,14,13,17,5,9,0,0,0,0},//Art of Flight  4k 22:17
	/*6*/ {0,0,0,0,0,0,1,3,12,47,86,90,78,82,112,136,180,98,10,4,4,5,5,6,6,5,4,3,2,7,0,0},
	/*7*/ {0,0,0,0,0,0,1,3,12,47,86,90,78,82,112,136,180,98,10,4,4,5,5,6,6,5,4,3,2,7,0,0},
	/*8*/ {0,0,0,0,0,0,1,3,12,47,86,90,78,82,112,136,180,98,10,4,4,5,5,6,6,5,4,3,2,7,0,0},

};
unsigned short DynamicOptimizeMEMC_17_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,1,3,62,7,908,13,0,0,0,0,0,1,0,0,0,0,0,0,0,0},  // 4k
	/*1*/ {0,0,0,0,0,2,61,8,908,13,0,0,0,0,0,1,0,0,0,0,0,0,0,0},  //fhd
	/*2*/ {0,0,0,0,0,2,63,9,905,13,0,0,0,0,0,1,0,0,0,0,0,0,0,0}, //fhd
	/*3*/ {0,0,0,0,1,3,60,7,908,13,0,0,0,0,0,1,0,0,0,0,0,0,0,0},
	/*4*/ {2,20,167,220,196,78,50,13,9,10,5,8,5,26,21,33,66,20,28,3,2,3,1,2},//Art of Flight  2k 22:17
	/*5*/ {1,20,147,228,192,74,60,13,9,13,4,8,4,35,21,34,63,19,30,2,2,5,1,3},//Art of Flight  4k 22:17
	/*6*/ {0,0,0,0,1,3,60,7,908,13,0,0,0,0,0,1,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,1,3,60,7,908,13,0,0,0,0,0,1,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,1,3,60,7,908,13,0,0,0,0,0,1,0,0,0,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_18_y[][32]=//Transformers
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,6,12,41,51,62,68,72,68,57,46,38,38,52,45,38,37,39,38,39,47,51,16,10,6,3,1,2,4,0,0},
	/*1*/ {0,0,6,11,35,47,59,70,77,75,65,52,43,40,38,38,39,39,39,39,40,42,42,19,11,7,3,2,2,4,0,0},
	/*2*/ {0,0,5,7,24,48,60,69,73,75,67,54,54,46,37,37,38,39,38,39,41,50,31,21,12,7,4,2,2,4,0,0},
	/*3*/ {0,0,5,5,20,47,61,68,75,77,63,49,49,43,36,38,38,38,40,43,51,69,28,15,10,7,3,1,2,4,0,0},
	/*4*/ {0,0,5,2,13,34,56,67,75,77,67,56,45,40,39,42,41,38,38,40,50,75,42,18,11,7,3,2,2,4,0,0},
	/*5*/ {0,0,8,22,60,54,53,64,68,72,64,55,43,38,34,36,35,32,31,32,38,60,40,18,11,6,3,1,2,4,0,0},
	/*6*/ {0,0,8,24,63,59,47,49,54,65,64,60,60,59,93,55,36,31,31,27,26,26,15,12,8,4,1,0,2,4,0,0},
	/*7*/ {0,0,6,11,38,42,50,49,51,59,62,59,57,61,104,60,40,34,36,29,29,36,34,15,9,5,2,1,2,5,0,0},
	/*8*/ {0,0,6,10,34,39,48,54,60,63,56,51,45,50,95,61,42,36,38,35,34,44,48,14,9,6,3,1,2,4,0,0},

};
unsigned short DynamicOptimizeMEMC_18_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {33,48,55,87,60,24,9,3,2,2,3,2,2,4,9,38,128,142,152,61,38,26,25,33},  // 4k
	/*1*/ {38,56,65,105,72,30,10,4,3,3,3,2,3,6,11,36,116,114,118,60,42,31,26,36},  //fhd
	/*2*/ {31,49,62,108,78,29,10,3,2,2,3,3,3,6,12,45,120,107,112,58,49,36,27,32}, //fhd
	/*3*/ {37,48,57,95,73,26,7,3,2,2,2,2,2,5,10,50,124,98,100,60,58,52,37,39},
	/*4*/ {45,65,74,91,59,22,6,2,2,2,2,2,2,4,8,50,102,87,82,62,62,65,46,46},
	/*5*/ {51,69,89,90,46,23,3,1,1,1,2,1,1,2,4,37,95,97,104,63,57,55,47,48},
	/*6*/ {41,55,82,87,137,50,9,4,3,3,3,2,2,4,4,14,42,98,159,54,41,31,29,35},
	/*7*/ {27,35,44,77,148,46,10,5,3,3,3,2,2,5,7,26,76,131,177,54,33,23,23,27},
	/*8*/ {29,38,44,74,103,35,10,4,3,2,3,3,3,6,10,34,112,135,176,57,33,23,22,29},

};

unsigned short DynamicOptimizeMEMC_19_y[][32]=//Emperor_offical_trailer  33s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,289,143,79,53,49,37,37,35,25,20,19,18,17,17,27,24,20,12,11,9,11,6,7,10,5,3,1,0,0,0},
	/*1*/ {0,0,306,173,68,56,49,42,43,39,26,20,18,16,15,14,15,18,11,8,9,7,10,7,5,7,4,1,0,0,0,0},
	/*2*/ {0,0,269,154,84,64,48,53,57,35,23,20,21,21,25,18,15,13,18,12,10,18,9,4,0,0,0,0,0,0,0,0},
	/*3*/ {0,1,297,137,63,49,47,40,42,45,29,20,17,17,15,16,22,26,16,13,12,11,15,9,7,7,8,3,2,0,0,0},
	/*4*/ {0,0,304,161,68,61,51,45,46,40,24,19,18,18,15,14,14,19,10,9,9,7,8,7,5,6,4,2,1,0,0,0},
	/*5*/ {0,0,304,161,68,61,51,45,46,40,24,19,18,18,15,14,14,19,10,9,9,7,8,7,5,6,4,2,1,0,0,0},
	/*6*/ {0,0,304,161,68,61,51,45,46,40,24,19,18,18,15,14,14,19,10,9,9,7,8,7,5,6,4,2,1,0,0,0},
	/*7*/ {0,0,304,161,68,61,51,45,46,40,24,19,18,18,15,14,14,19,10,9,9,7,8,7,5,6,4,2,1,0,0,0},
	/*8*/ {0,0,304,161,68,61,51,45,46,40,24,19,18,18,15,14,14,19,10,9,9,7,8,7,5,6,4,2,1,0,0,0},

};
unsigned short DynamicOptimizeMEMC_19_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,1,11,15,21,40,36,39,41,26,55,35,155,183,286,34,2,7,0,0,0,0,0},  // 4k
	/*1*/ {0,0,0,0,4,12,15,25,22,22,15,25,19,183,209,389,34,5,13,0,0,0,0,0},  //fhd
	/*2*/ {0,1,0,2,27,29,51,26,24,35,16,26,20,141,188,323,72,4,6,0,0,0,0,0}, //fhd
	/*3*/ {0,2,1,4,22,25,39,30,25,27,23,29,25,131,179,368,46,4,7,0,0,0,0,0},
	/*4*/ {0,0,0,0,3,12,17,24,22,19,17,25,18,183,213,390,32,4,12,0,0,0,0,0},
	/*5*/ {0,0,0,0,3,12,17,24,22,19,17,25,18,183,213,390,32,4,12,0,0,0,0,0},
	/*6*/ {0,0,0,0,3,12,17,24,22,19,17,25,18,183,213,390,32,4,12,0,0,0,0,0},
	/*7*/ {0,0,0,0,3,12,17,24,22,19,17,25,18,183,213,390,32,4,12,0,0,0,0,0},
	/*8*/ {0,0,0,0,3,12,17,24,22,19,17,25,18,183,213,390,32,4,12,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_20_y[][32]=//samsaa_repeat_18_15/samsaa_repeat_43_45
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {260,32,16,20,24,30,37,42,44,47,45,42,38,32,27,21,17,20,20,22,25,21,19,26,24,22,11,0,0,0,0,0},      // samsaa_repeat_18_15
	/*1*/ {260,33,16,19,24,30,37,42,43,46,44,42,37,32,27,21,17,20,20,22,26,22,20,27,24,23,11,0,0,0,0,0},
	/*2*/ {260,34,16,19,24,29,36,41,42,45,44,41,36,31,27,20,17,20,20,23,27,23,21,28,25,24,12,0,0,0,0,0},
	/*3*/ {260,36,16,19,23,28,35,40,41,43,43,41,36,30,25,20,17,19,20,24,28,26,22,31,25,26,12,0,0,0,0,0},
	/*4*/ {261,38,14,17,21,27,33,38,39,40,40,39,35,29,25,19,17,18,20,24,31,27,28,36,27,26,16,1,0,0,0,0},
	/*5*/ {256,7,13,19,24,26,25,24,25,25,24,28,33,41,57,60,59,61,56,50,41,22,4,2,1,1,1,0,0,0,0,0},             // samsaa_repeat_43_45
	/*6*/ {256,8,14,20,25,26,24,24,25,24,24,29,33,43,56,60,59,60,55,50,41,23,4,2,1,1,1,0,0,0,0,0},
	/*7*/ {256,9,14,20,25,25,24,23,25,24,24,28,34,43,57,59,58,61,55,49,41,23,4,2,1,1,1,0,0,0,0,0},
	/*8*/ {256,10,15,20,25,25,23,24,24,23,24,28,34,43,56,60,58,61,56,49,40,23,3,2,1,1,1,0,0,0,0,0},

};


unsigned short DynamicOptimizeMEMC_20_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1,3,3,22,95,97,80,90,98,70,47,51,58,103,116,46,3,1,1,0,1,2,1,1},  // 4k
	/*1*/ {1,2,2,18,90,99,81,91,99,72,49,52,59,111,112,42,3,0,1,0,1,2,1,1},  //fhd
	/*2*/ {1,3,2,20,93,92,79,89,95,70,49,51,58,106,121,46,4,1,1,0,1,4,2,1}, //fhd
	/*3*/ {1,3,3,18,89,92,78,90,97,69,49,53,60,112,118,41,6,1,1,1,2,3,1,1},
	/*4*/ {1,3,2,17,79,88,77,93,97,69,48,52,58,120,118,41,11,1,1,1,2,6,2,1},
	/*5*/ {1,3,11,91,232,114,14,7,4,3,5,12,21,37,58,179,192,1,1,0,0,0,0,1},
	/*6*/ {1,4,13,95,224,107,15,7,5,3,5,12,20,36,57,181,200,1,1,1,0,0,0,1},
	/*7*/ {1,4,12,93,220,105,16,8,5,4,5,13,21,38,59,183,197,1,1,1,0,0,0,1},
	/*8*/ {1,4,11,84,216,110,18,8,5,4,5,13,21,38,60,186,197,2,1,1,1,0,0,1},

};


unsigned short DynamicOptimizeMEMC_21_y[][32]=//Emperor_offical_trailer  33s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {0,0,0,1,8,28,133,177,146,144,139,65,29,24,18,14,11,8,8,7,6,6,6,5,3,1,1,0,0,0,0,0},
  /*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_21_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {4,37,211,554,31,13,6,2,2,5,15,45,14,5,3,4,15,4,3,3,4,2,2,3},  // 4k
  /*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //fhd
  /*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //fhd
  /*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  /*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};


unsigned short DynamicOptimizeMEMC_22_y[][32]=//Emperor_offical_trailer  33s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {0,0,27,36,11,4,7,20,21,53,57,25,15,31,84,85,71,12,10,12,12,17,18,42,72,129,110,3,0,0,0,0},
  /*1*/ {0,0,24,28,9,4,7,15,15,16,16,40,31,25,76,99,69,31,22,27,26,25,28,40,51,121,126,16,0,0,0,0},
  /*2*/ {0,0,25,30,16,35,13,28,19,16,19,39,35,17,50,53,88,19,10,12,13,18,28,36,58,116,188,6,0,0,0,0},
  /*3*/ {0,0,30,39,51,5,11,25,20,72,63,23,13,31,88,85,42,9,8,11,10,14,19,43,71,117,80,2,0,0,0,0},
  /*4*/ {0,1,23,27,19,5,7,12,10,12,17,46,34,26,45,56,68,51,42,38,37,36,51,53,56,103,87,26,0,0,0,0},
  /*5*/ {0,0,65,36,83,10,11,21,18,54,70,25,11,9,12,39,83,73,21,10,10,10,22,34,64,102,87,5,0,0,0,0},
  /*6*/ {0,0,62,23,22,51,14,27,19,15,16,33,36,12,12,30,44,58,62,11,11,17,27,32,49,104,177,22,0,0,0,0},
  /*7*/ {0,0,59,23,14,3,5,15,17,15,14,32,29,16,18,34,64,97,71,22,26,22,30,34,54,63,177,32,0,0,0,0},
  /*8*/ {0,0,65,36,83,10,11,21,18,54,70,25,11,9,12,39,83,73,21,10,10,10,22,34,64,101,88,5,0,0,0,0},
};

unsigned short DynamicOptimizeMEMC_22_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
  /*0*/ {0,0,0,0,0,0,2,2,6,9,86,97,142,82,154,313,77,12,4,2,1,1,0,0},  // 4k
  /*1*/ {0,0,2,4,1,1,2,3,14,19,112,124,199,132,124,155,69,15,12,1,0,0,0,0},  //fhd
  /*2*/ {1,1,2,3,2,1,3,2,5,7,87,92,52,44,165,186,145,63,88,23,5,5,2,2}, //fhd
  /*3*/ {0,0,0,0,0,1,2,2,8,14,61,77,129,60,148,395,85,6,2,1,1,1,0,0},
  /*4*/ {2,3,5,3,1,1,2,3,18,26,115,116,102,90,86,142,119,84,47,14,5,1,1,2},
  /*5*/ {0,0,0,0,1,2,3,5,11,23,87,87,88,47,145,366,113,5,1,1,1,3,0,0},
  /*6*/ {1,1,3,2,2,2,4,6,8,10,119,70,51,41,153,167,145,47,77,57,10,9,3,2},
  /*7*/ {0,0,2,2,1,1,3,6,20,23,125,170,170,101,113,146,69,11,18,2,1,4,1,0},
  /*8*/ {0,0,0,0,1,2,3,5,11,23,87,87,88,47,145,366,113,5,1,1,1,3,0,0},

};
unsigned short DynamicOptimizeMEMC_23_y[][32]=//HQV Multi-Cadence
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,516,28,1,3,9,16,12,12,20,52,80,101,45,23,16,12,10,8,5,6,7,2,0,0,0,0,0,0,0,0},
	/*1*/ {0,1,516,28,1,3,9,17,13,12,18,50,72,103,52,24,16,13,11,8,5,5,9,2,0,0,0,0,0,0,0,0},
	/*2*/ {0,1,516,28,1,4,15,21,15,13,18,57,68,94,52,23,16,12,9,6,3,1,1,5,6,0,0,0,0,0,0,0},
	/*3*/ {0,1,516,28,2,5,17,28,18,14,17,61,61,84,52,26,17,12,9,5,2,1,1,4,4,0,0,0,0,0,0,0},
	/*4*/ {0,1,517,24,2,5,17,27,19,15,17,60,61,82,52,26,16,12,10,6,3,1,1,4,4,1,0,0,0,0,0,0},
	/*5*/ {0,1,519,21,1,3,10,16,12,12,20,52,79,102,47,23,16,12,11,8,5,6,8,2,0,0,0,0,0,0,0,0},
	/*6*/ {0,1,519,21,2,4,13,18,14,13,18,55,71,97,52,24,18,14,10,6,3,2,2,8,3,1,0,0,0,0,0,0},
	/*7*/ {0,1,518,21,2,5,17,29,19,14,17,62,62,83,52,26,18,13,9,6,2,1,1,4,4,1,0,0,0,0,0,0},
	/*8*/ {0,1,516,26,2,3,12,17,14,12,18,54,70,98,52,24,17,13,10,7,4,3,10,3,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_23_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,90,90,129,224,182,15,9,7,6,7,5,5,7,201,8,5,0,0,0,0,0,0},  // 4k
	/*1*/ {0,0,84,98,140,217,177,14,9,7,7,7,6,5,7,199,8,5,0,0,0,0,0,0},  //fhd
	/*2*/ {0,0,78,99,145,205,184,16,10,7,6,7,5,5,7,202,6,5,0,0,0,0,0,0}, //fhd
	/*3*/ {0,0,79,104,142,185,196,17,10,7,7,8,6,6,9,202,7,5,0,0,0,0,0,0},
	/*4*/ {0,0,83,100,147,177,197,16,9,7,6,7,6,6,8,204,8,5,0,0,0,0,0,0},
	/*5*/ {0,0,88,95,134,221,179,15,9,7,6,7,5,5,7,200,8,5,0,0,0,0,0,0},
	/*6*/ {0,0,77,100,139,218,180,17,10,7,6,7,5,5,7,202,7,5,0,0,0,0,0,0},
	/*7*/ {0,0,74,105,133,189,200,18,10,8,7,8,6,7,9,204,6,5,0,0,0,0,0,0},
	/*8*/ {0,0,78,100,146,213,178,15,10,7,6,7,4,5,6,202,7,5,1,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_24_y[][32]=//Tokyo night 02:55
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,15,102,134,119,92,74,60,37,24,22,21,18,15,12,9,7,3,1,2,1,1,4,100,111,3,0,0,0,0},   // mix
	/*1*/ {0,0,147,57,89,98,102,87,70,53,45,42,38,28,19,14,12,11,3,1,1,1,1,1,1,2,52,11,0,1,0,0},   // osd black
	/*2*/ {0,0,147,56,93,101,106,91,77,58,47,43,41,31,19,15,14,12,3,1,1,1,1,1,0,3,22,2,0,1,0,0},
	/*3*/ {0,0,0,70,97,113,104,85,65,53,47,43,31,20,14,12,9,2,1,0,0,0,0,0,1,70,130,18,1,0,0,0},    // full
	/*4*/ {0,0,0,69,96,113,106,87,67,53,47,44,32,20,14,12,9,2,1,0,0,0,0,0,2,77,123,12,0,0,0,0},
	/*5*/ {0,0,0,67,97,114,108,88,69,54,48,45,33,21,15,13,9,2,1,1,0,0,0,0,3,84,107,7,0,0,0,0},
	/*6*/ {0,0,0,49,87,101,107,90,76,58,47,45,42,32,20,15,13,11,3,1,0,0,0,0,0,3,91,91,2,0,0,0},
	/*7*/ {0,0,0,66,98,115,110,92,73,56,49,48,36,22,16,14,10,3,1,0,0,0,0,0,5,93,75,4,0,0,0,0},
	/*8*/ {0,0,0,67,98,114,109,94,76,59,52,51,40,23,17,13,9,2,1,0,0,0,0,0,7,98,55,1,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_24_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2,3,6,15,81,139,191,151,16,5,4,4,3,6,8,20,283,27,11,6,4,2,1,1},  // 4k
	/*1*/ {4,6,12,55,139,180,174,171,15,8,3,3,2,5,13,32,113,16,9,7,10,4,3,3},  //fhd
	/*2*/ {4,7,12,50,147,203,197,173,11,4,3,3,3,6,12,32,66,14,7,7,13,5,4,4}, //fhd
	/*3*/ {2,5,10,48,125,147,147,147,11,3,2,2,2,3,5,21,270,13,7,5,7,3,2,2},
	/*4*/ {3,5,10,45,122,153,148,148,13,7,2,2,2,3,5,22,259,12,7,6,8,3,2,3},
	/*5*/ {3,5,9,45,121,158,155,151,12,6,2,2,2,3,5,23,245,11,6,6,9,4,3,3},
	/*6*/ {3,6,10,46,123,163,161,148,11,7,2,2,2,3,5,21,229,12,7,6,10,4,3,3},
	/*7*/ {4,6,10,43,125,170,165,148,10,3,2,2,2,3,6,23,221,11,6,6,11,4,3,3},
	/*8*/ {4,7,11,44,135,190,164,132,9,3,2,2,2,3,6,24,205,11,6,5,11,4,3,4},

};
unsigned short DynamicOptimizeMEMC_25_y[][32]=// LALA LAND 1:14:25
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,462,144,129,84,28,21,23,25,18,9,5,3,2,2,1,1,1,1,1,1,1,1,1,1,1,2,7,6,0,0},   // mix
	/*1*/ {0,2,372,86,169,97,33,16,17,16,16,22,26,21,15,10,8,6,4,3,3,2,2,2,2,2,2,3,16,11,0,0},   // osd black
	/*2*/ {0,2,370,170,196,80,49,23,14,10,7,5,4,4,3,3,2,2,2,2,2,2,2,2,2,2,3,4,16,3,0,0},
	/*3*/ {0,6,430,152,93,82,43,25,29,11,12,13,16,15,11,7,5,3,2,2,2,1,2,1,2,1,1,2,9,7,0,0},    // full
	/*4*/ {0,6,369,94,152,95,34,23,32,14,15,21,25,20,14,10,7,6,4,3,2,2,2,2,2,2,2,3,15,10,0,0},
	/*5*/ {0,2,396,188,161,67,21,12,13,15,13,10,7,5,4,3,3,3,2,2,2,2,2,2,2,2,2,3,36,5,0,0},
	/*6*/ {0,1,322,80,122,136,60,29,24,22,20,20,20,16,11,8,6,5,5,4,4,3,2,2,3,3,3,5,7,42,0,0},
	/*7*/ {0,1,322,80,122,136,60,29,24,22,20,20,20,16,11,8,6,5,5,4,4,3,2,2,3,3,3,5,7,42,0,0},
	/*8*/ {0,1,322,80,122,136,60,29,24,22,20,20,20,16,11,8,6,5,5,4,4,3,2,2,3,3,3,5,7,42,0,0},

};
unsigned short DynamicOptimizeMEMC_25_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {60,120,148,160,98,5,0,0,0,0,0,0,0,0,0,4,11,42,140,84,42,22,22,36},  // 4k
	/*1*/ {50,117,254,116,246,10,2,0,0,0,0,0,0,0,0,2,3,12,53,40,27,16,16,25},  //fhd
	/*2*/ {47,90,317,303,41,7,1,0,0,0,0,0,0,0,0,1,2,7,42,51,25,16,16,25}, //fhd
	/*3*/ {54,104,172,106,181,8,2,0,0,0,0,0,0,1,1,3,9,27,98,83,49,30,27,35},
	/*4*/ {53,123,242,97,249,10,3,0,0,0,0,0,0,0,0,3,3,13,58,44,29,17,17,27},
	/*5*/ {32,73,313,339,117,9,2,0,0,0,0,0,0,0,1,3,3,6,14,24,13,10,12,18},
	/*6*/ {49,101,356,240,85,3,1,0,0,0,0,0,0,0,0,0,2,6,16,36,33,20,19,26},
	/*7*/ {49,101,356,240,85,3,1,0,0,0,0,0,0,0,0,0,2,6,16,36,33,20,19,26},
	/*8*/ {49,101,356,240,85,3,1,0,0,0,0,0,0,0,0,0,2,6,16,36,33,20,19,26},

};

unsigned short DynamicOptimizeMEMC_26_y[][32]=// Teaser16_24
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
//#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,29,7,5,8,30,91,106,172,141,107,53,53,83,42,21,8,7,7,6,4,3,1,1,3,0,0,0,0,0},   // mix
	/*1*/ {0,0,0,27,5,2,6,37,114,211,199,72,78,64,79,36,20,12,8,5,4,4,3,1,0,0,0,0,0,0,0,0},   // osd black
	/*2*/ {0,0,0,41,4,3,19,37,42,194,392,53,72,60,17,11,10,10,7,4,3,3,3,2,1,0,0,0,0,0,0,0},
	/*3*/ {0,0,0,30,13,11,18,51,53,61,85,72,46,126,74,54,65,43,81,53,31,10,5,2,1,1,1,0,0,0,0,0},    // full
	/*4*/ {0,0,0,30,10,8,9,44,82,102,146,113,118,57,59,64,48,27,24,17,9,7,5,2,1,1,4,1,0,0,0,0},
	/*5*/ {0,0,0,27,5,2,6,37,114,211,199,72,78,64,79,36,20,12,8,5,4,4,3,1,0,0,0,0,0,0,0,0},
	/*6*/ {0,1,322,80,122,136,60,29,24,22,20,20,20,16,11,8,6,5,5,4,4,3,2,2,3,3,3,5,7,42,0,0},
	/*7*/ {0,1,322,80,122,136,60,29,24,22,20,20,20,16,11,8,6,5,5,4,4,3,2,2,3,3,3,5,7,42,0,0},
	/*8*/ {0,1,322,80,122,136,60,29,24,22,20,20,20,16,11,8,6,5,5,4,4,3,2,2,3,3,3,5,7,42,0,0},

};
unsigned short DynamicOptimizeMEMC_26_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,6,28,7,5,5,9,32,70,78,97,95,164,141,97,158,0,0,0,0,0,0,0,0},  // 4k
	/*1*/ {0,2,20,6,5,3,3,5,20,57,92,145,333,84,70,146,0,0,0,0,0,0,0,0},  //fhd
	/*2*/ {0,1,14,3,1,1,2,3,9,26,46,90,309,210,78,199,0,0,0,0,0,0,0,0}, //fhd
	/*3*/ {0,4,28,30,14,8,13,56,172,179,93,33,32,64,139,128,0,0,0,0,0,0,0,0},
	/*4*/ {0,7,30,13,10,6,12,45,105,129,84,87,109,103,114,137,0,0,0,0,0,0,0,0},
	/*5*/ {0,2,20,6,5,3,3,5,20,57,92,145,333,84,70,146,0,0,0,0,0,0,0,0},
	/*6*/ {49,101,356,240,85,3,1,0,0,0,0,0,0,0,0,0,2,6,16,36,33,20,19,26},
	/*7*/ {49,101,356,240,85,3,1,0,0,0,0,0,0,0,0,0,2,6,16,36,33,20,19,26},
	/*8*/ {49,101,356,240,85,3,1,0,0,0,0,0,0,0,0,0,2,6,16,36,33,20,19,26},

};
unsigned short DynamicOptimizeMEMC_27_y[][32]=  //Art of Flight 00:11:36  /00:15:11/00:21:55
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,8,100,26,32,38,49,58,53,53,60,61,59,52,41,31,24,16,16,16,16,18,14,11,9,8,8,27,39,40,0,0},   // 00:11:36
	/*1*/ {0,7,108,26,29,37,47,57,54,51,59,60,61,52,43,31,24,16,16,17,16,17,14,11,8,7,8,20,41,48,0,0},   //
	/*2*/ {0,9,112,27,29,36,47,58,56,52,66,61,64,53,42,27,21,14,13,16,15,15,14,9,8,7,8,17,37,56,0,0},
	/*3*/ {0,11,107,28,37,41,50,57,54,51,58,54,60,54,41,27,21,16,13,14,14,16,14,12,9,8,8,16,30,65,0,0},    //
	/*4*/ {0,0,3,10,21,28,31,37,29,29,30,26,20,16,14,14,17,18,21,30,120,259,44,24,21,15,12,12,13,69,0,0},    //  00:15:11
	/*5*/ {0,0,4,13,25,33,30,49,36,34,34,37,20,16,14,18,21,24,23,31,202,240,20,12,15,8,3,3,4,16,0,0},    //
	/*6*/ {0,0,14,21,26,37,53,70,81,86,87,80,68,58,51,45,40,33,26,22,18,15,12,10,8,6,6,6,6,1,0,0},//Art of Flight 00:21:55
	/*7*/ {0,0,10,19,28,39,53,68,81,85,88,80,68,59,51,45,39,33,26,22,18,15,12,10,8,7,6,6,6,1,0,0},
	/*8*/ {0,23,65,39,39,42,49,56,58,58,60,63,56,49,44,41,39,32,24,21,18,17,16,12,10,11,10,10,9,13,1,0},

};
unsigned short DynamicOptimizeMEMC_27_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4,16,63,48,58,67,52,45,31,19,20,27,26,96,154,207,37,5,4,1,1,2,1,3},  // 4k
	/*1*/ {4,15,57,43,62,73,51,46,34,20,20,26,24,91,140,223,39,7,5,1,1,2,1,3},  //fhd
	/*2*/ {5,17,53,34,62,76,65,57,36,24,22,30,28,96,127,193,42,4,6,1,2,3,1,3}, //fhd
	/*3*/ {4,14,43,35,63,76,74,66,43,28,28,36,33,112,130,162,27,3,4,1,1,2,1,2},
	/*4*/ {3,41,11,3,4,58,6,5,7,5,4,4,5,10,17,109,666,22,3,1,1,0,1,1},
	/*5*/ {3,39,19,3,5,64,4,7,7,6,4,4,4,9,16,110,649,27,3,1,1,1,1,1},
	/*6*/ {4,8,21,35,54,65,57,54,49,41,40,50,60,81,123,154,54,14,8,5,3,2,2,3},
	/*7*/ {5,10,24,40,59,68,54,52,47,37,36,45,56,76,119,162,58,15,8,5,4,2,2,3},
	/*8*/ {4,8,36,73,99,124,100,90,73,59,52,46,33,38,47,62,19,7,5,4,3,2,2,3},

};

unsigned short DynamicOptimizeMEMC_28_y[][32]=  //LGE xmen_apocalypse
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,262,28,62,51,41,34,28,24,19,14,11,10,8,7,6,7,8,8,13,37,66,80,47,44,58,12,0,0,0,0},   // 4k
	/*1*/ {0,1,264,41,55,55,48,39,32,29,25,23,18,15,11,9,9,11,9,6,7,20,57,72,40,43,43,3,0,0,0,0},   //
	/*2*/ {0,0,260,21,53,53,42,34,28,23,17,12,9,7,6,7,7,6,7,8,20,34,72,73,60,37,59,31,0,0,0,0},  //2k
	/*3*/ {0,0,264,37,64,53,40,33,28,25,20,16,13,12,9,8,7,10,9,8,10,29,62,82,55,29,55,9,0,0,0,0},    //
	/*4*/ {0,0,261,39,71,54,41,33,25,19,14,10,9,8,7,6,8,8,7,27,69,83,59,43,58,28,0,0,0,0,0,0},    // hdr
	/*5*/ {0,0,262,55,74,53,41,32,23,16,11,9,9,8,9,8,9,21,45,85,67,47,31,50,23,0,0,0,0,0,0,0},    //
	/*6*/ {0,0,273,54,68,57,42,35,27,21,17,16,11,9,10,9,10,9,33,72,64,48,38,41,19,1,1,1,0,0,0,0},//
	/*7*/ {0,0,264,68,74,52,40,30,21,14,11,10,8,9,8,10,21,52,85,64,46,32,52,18,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,263,67,75,53,41,30,21,14,10,9,8,9,9,9,22,48,86,69,43,33,49,21,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_28_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,3,3,23,50,91,119,104,89,94,138,156,118,3,0,0,0,0,0,0,0,0},  // 4k
	/*1*/ {0,0,0,2,7,41,97,121,124,96,64,89,118,150,76,6,0,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,2,2,3,22,34,79,123,105,102,90,147,142,138,3,1,0,0,0,0,0,0,0}, //2k
	/*3*/ {0,0,1,3,9,37,63,103,108,90,80,97,117,155,120,8,1,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,1,7,36,66,197,93,8,3,3,2,4,5,20,284,258,2,0,0,0,0,0},  //hdr
	/*5*/ {0,0,0,1,6,32,63,197,97,8,3,3,2,4,5,20,275,273,1,0,0,0,0,0},
	/*6*/ {0,0,0,4,26,66,110,159,76,12,4,4,4,5,6,28,230,257,1,0,0,0,0,0},
	/*7*/ {0,0,0,0,7,32,65,197,97,8,3,3,3,4,6,21,260,283,1,0,0,0,0,0},
	/*8*/ {0,0,0,0,7,32,63,197,98,8,3,3,2,4,5,19,267,282,1,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_29_y[][32]=  //sony TG 45 monoscope
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,6,31,12,8,3,4,9,4,4,8,4,14,3,3,10,4,4,9,4,4,21,578,17,2,2,6,2,5,203,2,0},//tv006
	/*1*/ {0,0,93,18,19,8,4,4,8,5,4,6,3,3,9,256,3,2,2,3,4,5,11,4,4,6,6,22,20,455,0,0}, //tv002 576i
	/*2*/ {0,0,89,16,17,8,5,4,9,6,4,7,4,5,8,260,5,4,4,4,5,4,11,4,4,6,6,19,23,446,0,0}, //tv002 576i
	/*3*/ {0,0,54,23,13,8,10,7,11,8,12,9,10,12,19,243,8,7,7,7,6,6,16,6,7,7,7,16,23,424,0,0},//tv002 480p
	/*4*/ {0,0,66,23,13,9,6,6,11,7,7,9,10,8,18,246,7,6,6,6,5,6,11,7,6,6,8,15,27,430,0,0},///tv002 480i
	/*5*/ {0,0,73,19,20,9,9,6,12,5,5,8,5,7,17,261,5,4,4,5,5,5,11,6,6,6,8,21,18,426,0,0},///tv002 576p
	/*6*/ {0,0,36,6,11,8,4,9,4,4,10,4,15,4,4,11,4,4,10,17,5,12,582,8,2,2,8,3,4,194,0,0},///tv002 1080p
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_29_hue[][COLOR_HUE_HISTOGRAM_LEVEL] = //sony TG 45 monoscope
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // 4k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //2k
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //hdr
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_30_y[][32]=  //Art of Flight 11:12  /22:01
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,1,5,13,35,58,53,53,41,23,19,16,14,21,30,27,26,24,25,27,29,30,35,43,51,107,147,30,0,0},   // 2k  11:12
	/*1*/ {0,0,0,1,4,10,30,57,56,53,43,27,19,17,46,77,53,42,38,36,33,36,38,34,34,39,37,69,52,3,0,0},   //
	/*2*/ {0,0,1,2,4,11,33,59,51,50,43,26,17,15,18,68,79,55,41,38,33,35,40,38,38,37,33,66,50,2,0,0},  //
	/*3*/ {0,0,0,0,1,8,28,59,58,59,39,22,19,17,18,29,33,27,29,23,22,24,24,25,32,37,43,92,162,57,0,0},    //  4K  11:12
	/*4*/ {0,0,0,1,4,12,34,57,57,57,40,22,18,18,48,68,47,42,37,35,34,34,36,32,32,36,38,78,66,3,0,0},    //
	/*5*/ {0,0,0,2,5,12,33,58,54,54,45,24,17,15,15,70,89,54,40,37,33,32,35,34,34,35,38,74,45,3,0,0},    //
	/*6*/ {0,1,2,0,0,1,6,28,48,57,66,59,55,52,52,56,57,45,41,59,58,22,26,38,29,36,27,27,23,14,0,0},//  2K  22:01
	/*7*/ {0,0,2,0,0,0,3,25,47,57,66,61,58,54,54,60,61,44,40,60,58,21,24,36,28,35,27,26,22,13,0,0},   // 4K  22:01
	/*8*/ {0,0,2,0,0,1,4,27,47,58,67,63,63,60,56,62,58,44,46,57,58,19,28,38,29,36,24,22,12,4,0,0},

};
unsigned short DynamicOptimizeMEMC_30_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4,18,20,51,46,21,245,27,36,34,18,23,16,53,48,85,130,50,28,11,8,5,3,4},  // 2k
	/*1*/ {4,15,18,21,45,19,75,31,44,46,22,28,19,58,61,149,194,66,33,14,9,6,3,4},  //
	/*2*/ {4,15,18,26,39,19,73,27,37,43,22,28,21,55,64,170,190,62,39,15,9,5,3,3}, //
	/*3*/ {4,17,22,58,65,28,243,25,27,26,13,22,11,51,54,105,124,41,25,8,7,6,3,4},    //  4K
	/*4*/ {4,14,17,23,45,17,95,29,50,54,20,29,18,61,61,142,179,60,35,14,8,6,3,4},  //
	/*5*/ {4,16,18,21,37,16,90,28,37,51,20,29,17,59,63,173,176,56,40,15,9,7,3,4},
	/*6*/ {3,6,18,36,54,65,59,53,29,32,25,28,42,124,199,171,27,7,3,2,2,1,1,2},   //2K
	/*7*/ {2,6,16,37,55,65,63,54,31,34,28,31,43,138,201,149,22,5,3,1,1,1,1,1},   //4K
	/*8*/ {2,6,16,37,55,52,51,45,38,26,38,36,48,139,210,154,21,5,3,1,1,1,1,1},

};

unsigned short DynamicOptimizeMEMC_31_y[][32]=  //Art of Flight 22:50
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,4,47,21,23,14,13,17,17,18,33,23,17,14,16,25,80,126,72,69,46,42,50,56,71,48,18,7,1,0,0,0},   // 2k  22:50
	/*1*/ {0,2,16,11,16,18,20,24,23,20,30,38,27,21,21,25,39,72,109,74,63,53,61,51,69,51,17,11,1,2,0,0},   //
	/*2*/ {0,4,36,13,18,14,16,19,22,21,39,23,17,13,14,21,67,116,108,68,49,48,59,53,65,35,18,5,1,1,0,0},  //
	/*3*/ {0,1,46,18,22,15,17,18,18,17,32,25,20,18,22,32,50,81,108,84,47,43,52,56,72,50,17,5,0,0,0,0},    //  4K 22:50
	/*4*/ {0,1,20,13,18,17,18,22,25,19,35,30,22,16,15,23,59,89,112,61,55,47,60,56,70,50,16,11,1,2,0,0},    //
	/*5*/ {0,1,40,12,18,14,15,18,20,22,41,27,19,16,19,26,45,74,119,100,59,50,61,51,62,33,16,5,0,0,0,0},    //
	/*6*/ {0,1,40,12,18,14,15,18,20,22,41,27,19,16,19,26,45,74,119,100,59,50,61,51,62,33,16,5,0,0,0,0},//
	/*7*/ {0,1,40,12,18,14,15,18,20,22,41,27,19,16,19,26,45,74,119,100,59,50,61,51,62,33,16,5,0,0,0,0},   //
	/*8*/ {0,1,40,12,18,14,15,18,20,22,41,27,19,16,19,26,45,74,119,100,59,50,61,51,62,33,16,5,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_31_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {10,45,18,14,51,14,21,6,5,4,5,7,11,27,91,462,132,37,11,3,3,2,2,5},  // 2k  22:50
	/*1*/ {8,48,23,18,52,13,15,7,5,4,4,8,13,31,94,407,197,21,7,3,3,2,2,4},  //
	/*2*/ {25,61,27,21,74,27,16,8,6,5,6,8,14,39,64,372,156,25,13,5,4,3,3,7}, //
	/*3*/ {9,47,19,15,53,12,21,6,5,5,4,6,9,30,85,434,156,39,16,4,3,2,2,5},    //  4K  22:50
	/*4*/ {8,49,26,21,57,14,13,7,5,4,4,9,11,32,87,408,186,21,9,4,3,3,2,4},  //
	/*5*/ {23,62,28,23,79,24,16,8,6,6,6,9,15,36,62,350,162,28,17,7,6,4,4,8},
	/*6*/ {23,62,28,23,79,24,16,8,6,6,6,9,15,36,62,350,162,28,17,7,6,4,4,8},   //
	/*7*/ {23,62,28,23,79,24,16,8,6,6,6,9,15,36,62,350,162,28,17,7,6,4,4,8},   //
	/*8*/ {23,62,28,23,79,24,16,8,6,6,6,9,15,36,62,350,162,28,17,7,6,4,4,8},

};

unsigned short DynamicOptimizeMEMC_32_y[][32]=  //Art of Flight 22:20
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,5,5,4,4,1,1,1,1,2,2,3,3,3,3,5,6,6,7,9,11,20,34,62,154,268,261,93,10,0,0},   // 2k  22:20
	/*1*/ {0,1,4,5,5,6,5,7,8,9,12,15,16,15,16,18,22,24,26,38,68,122,189,174,121,46,8,2,3,2,0,0},   //
	/*2*/ {0,0,1,0,1,2,3,4,5,6,13,20,13,13,14,18,25,29,29,33,36,46,112,255,212,77,16,4,0,0,0,0},  //
	/*3*/ {0,1,6,6,5,6,4,5,6,7,10,13,13,12,12,14,17,18,21,32,66,105,80,61,72,120,130,92,43,5,0,0},
  	/*4*/ {0,0,6,5,4,4,1,1,1,1,1,2,4,6,3,4,7,9,8,9,12,19,28,38,61,142,272,256,76,7,0,0},    //  4K 22:20
  	/*5*/ {0,0,4,5,5,6,5,7,7,8,11,14,15,14,15,17,20,20,21,28,52,117,185,131,106,80,53,27,10,3,0,0},
	/*6*/ {0,0,4,5,5,6,5,6,7,8,12,14,14,14,15,16,20,20,21,27,54,122,178,117,98,81,68,34,11,3,0,0},    //
	/*7*/ {0,0,1,1,1,1,3,4,6,7,13,20,13,13,15,19,26,29,30,33,38,43,101,262,223,69,13,3,0,0,0,0},    //
	/*8*/ {0,0,6,6,6,6,4,5,7,8,11,15,14,13,13,15,18,19,21,33,66,88,65,54,70,122,140,108,47,5,0,0},//

};
unsigned short DynamicOptimizeMEMC_32_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1,15,12,73,160,244,339,32,27,17,5,5,3,13,7,15,14,1,2,0,0,1,0,1},  // 2k  22:50
	/*1*/ {6,21,17,27,27,23,70,24,37,66,25,33,24,201,142,140,49,16,20,4,4,5,3,4},  //
	/*2*/ {1,11,6,17,27,26,91,33,60,118,48,60,34,185,53,93,86,13,18,2,2,2,1,1}, //
	/*3*/ {2,15,11,23,79,86,232,40,52,46,15,14,11,45,43,119,100,16,29,3,2,2,1,1},    //
	/*4*/ {0,14,14,72,145,196,363,22,26,22,4,5,3,24,13,27,32,3,2,0,0,0,0,0},    //  4K  22:50
	/*5*/ {3,21,12,41,56,44,135,21,31,53,16,24,15,162,112,137,59,15,20,2,2,4,1,2},
	/*6*/ {3,19,11,37,55,50,151,23,35,52,15,20,13,144,106,142,61,17,25,2,2,3,1,2},  //
	/*7*/ {1,13,6,20,25,20,97,25,52,134,32,56,26,211,47,92,92,13,18,2,2,3,1,1},
	/*8*/ {2,19,12,27,82,96,254,27,48,52,10,11,8,44,32,96,106,21,27,3,3,5,1,2},   //

};

unsigned short DynamicOptimizeMEMC_33_y[][32]=  //Art of Flight 26:40
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,1,3,10,17,33,76,105,80,74,57,41,40,36,33,33,41,54,57,36,30,28,22,19,19,39,0,0},   // 2k  26:40
	/*1*/ {0,0,0,0,0,0,4,15,25,58,157,136,110,90,56,32,24,21,21,25,33,44,43,27,22,19,13,7,3,1,0,0},   //
	/*2*/ {0,0,0,0,0,0,3,15,51,178,270,115,53,33,11,5,7,12,13,19,37,56,49,23,19,11,3,1,0,0,0,0},  //
	/*3*/ {0,0,0,0,0,0,2,22,131,253,215,24,31,29,13,5,13,8,14,49,59,53,38,11,5,4,2,1,1,1,0,0},
  	/*4*/ {0,0,0,0,0,0,1,8,16,32,79,109,83,76,54,40,39,35,33,34,41,55,59,37,31,28,23,20,21,35,0,0},    //  4K 26:40
  	/*5*/ {0,0,0,0,0,0,2,12,22,57,166,141,113,89,53,31,24,21,20,25,33,44,43,28,22,19,13,7,3,1,0,0},
	/*6*/ {0,0,0,0,0,0,3,12,46,193,272,113,49,33,11,6,7,12,13,19,37,55,49,23,19,11,3,1,0,0,0,0},    //
	/*7*/ {0,0,0,0,0,0,1,13,135,275,203,22,30,29,13,5,13,9,14,49,59,53,38,10,5,4,2,1,1,1,0,0},    //
	/*8*/ {0,0,1,0,1,1,7,29,124,233,233,83,12,4,8,5,20,10,19,120,46,16,6,2,1,1,1,2,1,3,0,0},//

};
unsigned short DynamicOptimizeMEMC_33_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4,9,12,29,45,42,25,0,0,0,0,0,0,1,3,107,576,72,25,14,9,6,4,5},  // 2k  22:50
	/*1*/ {4,9,13,30,43,7,1,0,0,0,0,0,0,0,1,52,679,70,32,17,12,8,5,7},  //
	/*2*/ {2,4,5,19,29,3,0,0,0,0,0,0,0,0,3,87,738,49,22,12,7,3,2,2}, //
	/*3*/ {1,3,3,10,22,3,2,0,0,0,0,0,0,1,7,62,761,66,28,9,4,3,2,2},    //
	/*4*/ {3,10,13,30,44,40,25,0,0,0,0,0,0,1,3,104,575,74,25,14,9,7,4,6},    //  4K  22:50
	/*5*/ {3,11,14,31,41,6,1,0,0,0,0,0,0,0,0,52,676,72,33,17,12,9,4,7},
	/*6*/ {2,6,6,20,27,2,1,0,0,0,0,0,0,1,2,86,736,50,24,11,7,4,2,2},  //
	/*7*/ {1,3,3,11,21,3,2,0,0,0,0,0,0,1,7,61,760,66,29,9,4,3,2,2},
	/*8*/ {1,3,3,11,12,1,1,0,0,0,0,0,0,1,2,22,655,226,36,7,3,2,1,1},   //

};

unsigned short DynamicOptimizeMEMC_34_y[][32]=  //SAMSARA  16:10  /14:33
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {286,593,10,15,18,9,5,7,8,10,13,12,5,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   // 2k   16:10
	/*1*/ {300,560,13,19,17,10,11,13,14,17,12,5,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {301,571,14,20,19,13,12,15,15,7,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //
	/*3*/ {258,621,14,15,17,10,5,7,7,9,12,11,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //  4K 16:10
  	/*4*/ {259,593,18,22,19,11,11,13,13,17,12,5,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},    //
  	/*5*/ {259,610,18,22,19,13,12,15,15,7,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {257,164,129,88,58,48,46,36,18,10,8,7,8,10,14,19,22,20,15,9,4,1,0,0,0,0,0,0,0,0,0,0},    //   2k    14:33
	/*7*/ {256,159,132,90,59,47,46,37,18,10,8,7,7,10,15,19,22,21,15,8,3,0,0,0,0,0,0,0,0,0,0,0},    // 4K 14:33
	/*8*/ {256,114,85,58,47,45,47,46,28,17,14,12,12,16,26,37,44,41,26,12,5,2,0,0,0,0,0,0,0,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_34_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {33,47,4,3,0,0,0,0,0,0,0,0,0,26,119,89,171,102,94,47,108,85,31,34},  // 2k  16:10
	/*1*/ {31,37,3,2,0,0,0,0,0,0,0,0,0,7,101,152,178,120,77,40,97,85,30,32},  //
	/*2*/ {23,32,2,2,0,0,0,0,0,0,0,0,0,7,34,210,269,145,72,30,72,54,17,21}, //
	/*3*/ {37,104,5,4,0,0,0,0,0,0,0,0,0,25,98,81,145,77,139,45,74,102,36,19},    // 4K  16:10
	/*4*/ {36,91,5,4,0,0,0,0,0,0,0,0,0,7,91,125,148,96,120,44,74,95,32,24},    //
	/*5*/ {36,100,5,4,0,0,0,0,0,0,0,0,0,5,22,134,169,93,129,42,72,127,38,18},
	/*6*/ {0,15,127,375,276,95,83,21,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},       //   2k    14:33
	/*7*/ {0,14,99,371,302,96,84,27,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},         //  4K 14:33
	/*8*/ {0,11,108,231,279,159,169,35,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //

};

unsigned short DynamicOptimizeMEMC_35_y[][32]=  //SAMSARA  51:52
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {263,51,14,24,22,24,31,37,46,59,66,60,62,54,38,30,25,20,13,8,5,4,3,3,3,3,3,3,5,6,0,0},   // 2k  51:52
	/*1*/ {260,36,13,20,23,29,37,45,52,62,64,53,55,52,40,33,28,22,15,8,6,4,4,3,3,3,3,2,5,5,0,0},   //
	/*2*/ {261,25,17,23,27,34,40,43,49,54,58,55,52,50,43,38,33,25,17,10,7,5,3,2,1,1,1,1,3,4,0,0},  //
	/*3*/ {261,19,15,27,30,35,40,43,49,54,56,54,52,49,46,40,33,25,17,12,10,6,4,3,1,1,1,0,1,1,0,0},
  	/*4*/ {256,53,15,23,21,24,31,38,47,60,68,62,62,56,39,30,24,19,12,7,5,4,3,3,4,4,4,3,8,1,0,0},    //  4K 51:52
  	/*5*/ {256,41,14,22,24,29,35,43,49,61,66,56,59,52,39,32,26,22,15,8,5,4,3,3,3,3,3,3,7,1,0,0},
	/*6*/ {256,26,14,21,24,32,42,46,52,59,60,53,51,50,44,37,33,26,17,10,7,4,3,2,2,2,2,2,6,0,0,0},    //
	/*7*/ {256,24,17,25,28,36,42,44,47,53,57,57,55,51,45,38,32,26,16,12,8,5,3,2,1,1,1,1,3,0,0,0},    //
	/*8*/ {256,18,15,24,29,35,39,44,50,56,57,56,52,49,47,40,35,27,18,14,9,6,4,2,1,1,0,0,1,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_35_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {129,49,53,44,27,19,21,27,44,51,60,80,69,21,6,10,15,14,20,19,10,11,10,177},  // 2k 51:52
	/*1*/ {146,54,53,45,26,16,18,23,31,35,46,71,59,19,5,8,15,17,23,17,10,12,11,228},  //
	/*2*/ {193,53,62,45,25,15,15,18,23,25,33,50,45,21,6,17,21,23,28,22,14,10,15,212}, //
	/*3*/ {204,56,51,35,18,10,9,8,10,11,16,34,51,33,10,20,24,24,32,22,15,12,23,259},    //
	/*4*/ {123,53,52,44,27,18,22,27,41,48,59,81,68,24,6,10,15,13,21,17,10,12,11,185},    //  4K  51:52
	/*5*/ {145,53,54,47,29,17,23,25,36,41,49,67,56,23,6,8,14,14,22,15,10,15,12,209},
	/*6*/ {172,51,53,42,24,14,16,18,24,28,37,58,52,25,7,11,16,20,26,20,13,11,14,235},  //
	/*7*/ {193,59,58,39,22,12,10,11,14,15,21,37,46,31,10,20,22,21,37,24,15,12,21,236},
	/*8*/ {210,55,56,43,22,12,9,8,9,10,14,26,48,40,12,22,25,28,32,20,14,13,24,236},   //

};

unsigned short DynamicOptimizeMEMC_36_y[][32]= //SAMSARA  53:11
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {256,3,6,14,17,16,17,20,20,28,40,65,78,88,77,59,42,36,39,31,18,7,3,3,2,1,1,0,0,0,0,0},   // 2k  53:11
	/*1*/ {256,9,12,24,30,25,30,34,37,39,49,61,69,72,58,44,31,27,29,20,11,6,4,3,2,1,1,0,0,0,0,0},   //
	/*2*/ {258,61,47,53,49,38,39,49,55,55,50,42,46,35,26,20,16,14,11,6,4,3,3,3,2,1,1,0,0,0,0,0},  //
	/*3*/ {260,99,66,67,57,58,65,64,53,40,30,32,30,22,17,11,8,6,2,1,0,0,0,0,0,0,0,0,0,0,0,0},
  	/*4*/ {255,2,5,14,17,16,17,19,20,27,41,67,79,90,76,59,43,36,39,29,18,7,3,4,2,1,0,0,0,0,0,0},    //  4K 53:11
  	/*5*/ {255,5,9,20,26,23,27,29,29,36,46,61,76,82,60,47,35,30,33,24,14,7,4,4,2,1,0,0,0,0,0,0},
	/*6*/ {256,27,27,27,37,31,35,45,55,60,58,56,51,58,41,30,21,20,18,13,8,4,3,3,2,1,1,0,0,0,0,0},    //
	/*7*/ {256,84,59,63,51,49,53,61,58,51,39,35,32,27,22,15,10,6,4,3,2,2,3,2,1,0,1,0,0,0,0,0},    //
	/*8*/ {256,95,70,70,62,57,68,69,55,44,29,27,27,22,16,10,6,5,1,0,0,0,0,0,0,0,0,0,0,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_36_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {12,13,13,22,24,32,43,79,176,142,96,98,98,46,19,10,7,6,6,10,11,7,8,10},  // 2k 53:11
	/*1*/ {23,24,25,43,47,49,47,71,125,93,74,76,85,47,24,16,11,11,13,26,20,12,11,15},  //
	/*2*/ {30,30,30,55,69,59,40,38,47,41,38,47,51,44,32,24,21,23,36,87,64,33,24,26}, //
	/*3*/ {29,30,28,32,35,29,28,28,29,31,19,22,32,58,58,60,52,50,77,132,55,26,22,25},    //
	/*4*/ {12,14,12,20,24,36,44,82,171,139,95,100,91,53,20,11,7,6,7,10,11,7,8,11},    //  4K  53:11
	/*5*/ {19,23,23,34,39,43,45,81,142,100,77,79,85,53,25,17,10,9,11,18,16,11,11,15},
	/*6*/ {25,28,31,58,85,75,45,60,79,62,52,49,56,44,29,20,12,12,19,43,46,22,17,20},  //
	/*7*/ {26,35,32,43,47,35,35,28,29,32,26,36,48,66,45,40,36,35,56,120,62,29,23,24},
	/*8*/ {26,34,30,33,32,24,30,30,26,27,22,20,27,56,59,61,54,51,78,130,59,29,23,27},   //

};
unsigned short DynamicOptimizeMEMC_37_y[][32]=  //SAMSARA  01:01:24
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {270,34,20,22,23,23,25,29,33,42,63,54,48,45,35,25,20,18,15,13,12,13,17,18,20,20,15,10,4,0,0,0},   // 2k  01:01:24
	/*1*/ {269,33,20,22,23,24,27,31,33,44,63,52,51,48,33,23,22,19,15,14,16,16,17,19,20,17,9,2,1,0,0,0},   //
	/*2*/ {265,22,20,23,24,26,27,28,34,47,67,55,52,49,38,29,25,22,20,17,16,16,18,20,17,8,1,0,0,0,0,0},  //
	/*3*/ {266,23,22,24,25,25,26,25,26,37,63,74,59,48,38,34,28,24,19,16,17,18,18,15,8,4,1,0,0,0,0,0},
  	/*4*/ {257,39,23,24,24,24,26,31,33,42,65,55,48,44,35,24,19,17,14,12,12,13,16,18,20,20,15,10,3,0,0,0},    //  4K 01:01:24
  	/*5*/ {257,36,23,24,25,25,27,32,34,44,65,53,52,50,32,22,21,18,14,13,16,16,17,19,21,17,8,2,0,0,0,0},
	/*6*/ {256,24,21,24,26,27,28,29,34,48,68,55,55,49,38,28,24,22,20,16,16,16,19,20,16,6,0,0,0,0,0,0},    //
	/*7*/ {257,25,23,25,27,28,27,26,28,39,67,72,59,47,37,32,27,24,18,16,17,18,18,15,8,4,0,0,0,0,0,0},    //
	/*8*/ {257,16,17,21,25,27,28,26,24,28,40,67,82,68,47,38,32,27,23,20,20,20,17,10,6,2,0,0,0,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_37_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {8,8,6,8,10,9,7,7,9,13,45,91,144,126,142,120,70,66,42,21,13,8,8,8},  // 2k 01:01:24
	/*1*/ {8,8,7,9,11,11,9,9,13,16,50,81,139,138,142,115,70,62,36,18,11,8,7,8},  //
	/*2*/ {9,11,9,11,12,8,11,12,18,21,45,74,127,162,150,108,78,45,27,17,11,7,7,8}, //
	/*3*/ {11,14,7,9,9,9,12,13,17,21,37,59,104,178,184,104,67,45,29,19,13,9,8,9},    //
	/*4*/ {9,8,7,8,11,9,7,7,9,14,45,92,143,126,141,122,72,61,41,20,12,8,8,8},    //  4K  01:01:24
	/*5*/ {8,9,8,10,13,10,9,9,13,17,49,82,133,140,140,116,72,60,38,18,12,9,7,8},
	/*6*/ {10,11,9,11,12,9,11,12,18,23,45,76,127,162,147,106,77,44,27,16,11,7,7,9},  //
	/*7*/ {11,14,8,9,10,9,11,12,16,19,35,57,96,176,186,111,70,45,31,20,14,9,8,10},
	/*8*/ {11,13,7,8,10,10,14,15,19,22,36,58,103,196,204,100,54,34,25,16,11,8,7,8},   //

};

unsigned short DynamicOptimizeMEMC_38_y[][32]=  //Art of Flight 33:34
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,1,2,5,9,22,40,47,59,90,140,141,129,91,73,60,40,19,9,3,1,0,0,0,0,0,0,0,2,0,0},   // 2k 33:34
	/*1*/ {0,1,1,2,6,21,28,38,51,67,86,101,116,112,90,67,57,38,23,13,7,5,4,3,4,4,5,5,6,20,1,0},   //
	/*2*/ {0,1,2,3,12,34,19,41,68,102,134,128,86,54,37,56,78,37,20,15,11,10,9,7,6,5,4,2,2,3,0,0},  //
	/*3*/ {0,0,1,3,17,28,17,31,52,82,115,107,94,65,52,58,55,41,25,19,15,12,11,11,11,11,11,10,10,17,1,0},    //
	/*4*/ {0,0,1,2,5,9,21,41,47,58,89,139,143,132,93,75,60,38,19,8,2,1,0,0,0,0,0,0,0,2,0,0},  //  4K  33:34
  	/*5*/ {0,0,1,2,5,23,25,32,48,67,84,105,119,110,91,66,56,41,22,12,6,4,3,4,5,6,8,9,12,20,0,0},
  	/*6*/ {0,0,2,3,9,35,20,38,64,100,133,129,92,56,36,52,76,32,20,17,13,11,10,9,8,7,5,4,3,3,0,0},
	/*7*/ {0,0,1,3,16,27,17,29,49,79,110,96,96,71,56,51,59,46,28,20,14,12,12,12,13,14,14,14,14,13,0,0},    //
	/*8*/ {0,0,2,3,9,35,20,38,64,100,133,129,92,56,36,52,76,32,20,17,13,11,10,9,8,7,5,4,3,3,0,0},//

};
unsigned short DynamicOptimizeMEMC_38_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,1,26,464,324,104,12,5,3,1,2,2,2,3,10,32,0,0,0,0,0,0,0},  // 2k  33:34
	/*1*/ {0,0,1,56,380,391,74,19,5,2,2,2,3,8,14,28,7,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,1,23,409,274,27,5,3,2,1,0,1,4,7,202,33,0,0,0,0,0,0,0}, //
	/*3*/ {0,0,1,42,464,238,29,5,3,1,1,1,2,7,22,161,14,0,0,0,0,0,0,0},  //
	/*4*/ {0,0,1,27,478,299,109,13,7,4,1,1,1,3,3,11,33,0,0,0,0,0,0,0},   //  4K  33:34
	/*5*/ {0,0,1,62,418,345,61,16,5,3,1,2,2,9,18,37,10,0,0,0,0,0,0,0},
	/*6*/ {0,0,1,31,428,263,24,4,3,2,0,1,1,5,10,189,30,0,0,0,0,0,0,0},
	/*7*/ {0,0,2,56,447,246,26,5,3,2,1,2,2,8,25,152,16,0,0,0,0,0,0,0},
	/*8*/ {0,0,1,31,428,263,24,4,3,2,0,1,1,5,10,189,30,0,0,0,0,0,0,0},   //

};

unsigned short DynamicOptimizeMEMC_39_y[][32]=  //Art of Flight 00:34
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,6,100,16,16,15,17,18,18,15,16,19,19,21,28,43,69,68,54,57,47,20,18,15,14,15,44,197,1,0,0,0},   // 2k  00:34
	/*1*/ {0,6,111,16,23,25,20,19,18,14,18,23,26,30,30,38,60,67,65,59,39,29,24,17,15,16,45,133,1,0,0,0},   //
	/*2*/ {0,9,124,12,16,21,23,21,17,14,20,29,40,48,53,58,73,71,48,41,25,15,13,11,11,12,13,146,1,0,0,0},  //
	/*3*/ {0,4,110,16,18,17,20,20,17,16,18,21,19,20,26,39,62,67,62,62,57,22,18,14,16,15,40,170,0,0,0,0},  //  4K  00:34
  	/*4*/ {0,3,121,14,20,15,14,14,13,11,11,15,18,23,30,43,77,76,66,69,60,36,19,13,11,15,42,134,0,0,0,0},
  	/*5*/ {0,1,109,15,23,22,18,19,16,14,16,20,22,30,34,39,53,57,57,58,42,30,26,20,15,21,42,165,0,0,0,0},
	/*6*/ {0,4,134,13,16,22,24,22,18,14,21,30,40,49,53,58,75,67,47,40,24,14,13,11,10,12,13,142,0,0,0,0},    //
	/*7*/ {0,4,134,13,16,22,24,22,18,14,21,30,40,49,53,58,75,67,47,40,24,14,13,11,10,12,13,142,0,0,0,0},
	/*8*/ {0,4,134,13,16,22,24,22,18,14,21,30,40,49,53,58,75,67,47,40,24,14,13,11,10,12,13,142,0,0,0,0},

};
unsigned short DynamicOptimizeMEMC_39_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5,14,48,79,144,16,16,8,5,3,2,3,6,47,78,104,100,35,40,135,81,10,4,4},  //  2k  00:34
	/*1*/ {2,10,33,74,125,24,26,15,10,6,4,8,11,67,73,117,103,40,56,89,78,9,5,5},  //
	/*2*/ {2,5,13,60,133,26,30,14,14,12,10,19,32,61,61,121,80,46,75,148,12,5,4,5}, //
	/*3*/ {4,13,39,70,154,22,15,6,5,5,2,4,5,51,81,116,103,29,51,123,74,9,3,4},   // 4K  00:34
	/*4*/ {2,6,34,67,149,27,19,6,8,7,2,7,6,61,75,141,104,40,82,76,61,4,2,2},
	/*5*/ {1,9,28,65,126,17,37,18,19,12,4,11,7,79,74,105,79,25,79,90,90,9,3,4},
	/*6*/ {1,6,11,50,136,27,37,14,16,18,11,27,29,72,69,123,70,34,72,137,14,6,4,5},
	/*7*/ {1,6,11,50,136,27,37,14,16,18,11,27,29,72,69,123,70,34,72,137,14,6,4,5},
	/*8*/ {1,6,11,50,136,27,37,14,16,18,11,27,29,72,69,123,70,34,72,137,14,6,4,5},


};

unsigned short DynamicOptimizeMEMC_40_y[][32]=  //roku regression test film32
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,22,726,109,11,1,1,0,2,3,18,0,0,1,0,1,0,0,1,1,0,0,1,0,1,74,6,0,0,4,0,0},   // 2k
	/*1*/ {0,21,723,110,12,2,1,1,2,2,19,1,0,1,0,1,0,0,1,1,0,1,1,1,1,74,5,0,0,4,0,0},   //
	/*2*/ {0,22,695,105,23,12,7,3,3,3,20,1,0,1,0,1,0,0,1,1,0,0,0,0,1,77,2,0,0,4,0,0},  //
	/*3*/ {0,5,701,105,27,16,9,5,3,4,20,1,1,1,0,1,1,1,2,0,0,0,0,1,2,79,0,0,0,4,0,0},    //  4k
	/*4*/ {0,6,734,111,13,2,1,2,1,2,20,1,1,1,0,1,1,1,2,0,0,1,1,1,2,77,0,0,0,4,0,0},  //
  	/*5*/ {0,6,739,110,12,1,1,1,1,2,20,1,1,1,0,1,0,1,2,0,0,0,0,1,1,78,1,0,0,4,0,0},
  	/*6*/ {0,6,739,110,12,1,1,1,1,2,20,1,1,1,0,1,0,1,2,0,0,0,0,1,1,78,1,0,0,4,0,0},
	/*7*/ {0,6,739,110,12,1,1,1,1,2,20,1,1,1,0,1,0,1,2,0,0,0,0,1,1,78,1,0,0,4,0,0},    //
	/*8*/ {0,6,739,110,12,1,1,1,1,2,20,1,1,1,0,1,0,1,2,0,0,0,0,1,1,78,1,0,0,4,0,0},//

};
unsigned short DynamicOptimizeMEMC_40_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,1,1,1,2,0,0,0,0,0,0,3,1,117,424,175,95,45,124,2,0,0},  //  2k
	/*1*/ {0,1,1,1,1,1,1,0,0,0,0,0,0,3,1,110,426,174,100,44,124,3,0,0},  //
	/*2*/ {0,1,0,1,1,1,5,0,0,0,0,0,0,4,2,133,413,158,108,37,122,4,0,0}, //
	/*3*/ {0,1,0,0,0,0,11,0,0,0,0,0,0,13,3,153,383,131,129,35,117,12,0,0},  // 4k
	/*4*/ {0,1,0,1,1,1,4,0,0,0,0,0,0,10,3,130,397,167,107,40,124,4,0,0},   //
	/*5*/ {0,0,0,1,1,1,4,0,0,0,0,0,0,9,2,137,405,166,98,41,121,3,0,0},
	/*6*/ {0,0,0,1,1,1,4,0,0,0,0,0,0,9,2,137,405,166,98,41,121,3,0,0},
	/*7*/ {0,0,0,1,1,1,4,0,0,0,0,0,0,9,2,137,405,166,98,41,121,3,0,0},
	/*8*/ {0,0,0,1,1,1,4,0,0,0,0,0,0,9,2,137,405,166,98,41,121,3,0,0},   //

};
unsigned short DynamicOptimizeMEMC_41_y[][32]=   //Art of Flight 01:05:42 2k
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,36,12,13,16,19,25,36,35,57,42,35,40,34,36,61,75,52,32,20,18,27,37,70,85,42,27,1,0,0,0},   //
	/*1*/ {0,5,71,24,42,66,72,51,37,34,34,40,40,37,47,64,87,72,31,21,14,8,10,22,21,21,14,1,0,0,0,0},   //
	/*2*/ {0,8,202,52,47,47,42,52,48,37,40,36,26,25,46,50,59,51,37,14,8,13,8,13,12,12,2,0,0,0,0,0},  //
	/*3*/ {0,4,107,32,31,42,45,42,49,49,43,39,51,75,97,76,65,52,20,7,5,4,2,2,1,2,2,16,22,5,0,0},    //
	/*4*/ {0,2,36,14,14,15,19,22,26,30,41,48,47,63,70,81,108,95,50,25,13,7,4,4,4,3,4,13,33,94,0,0},  //
  	/*5*/ {0,5,56,20,20,25,35,47,59,64,63,52,40,32,26,24,26,50,62,51,31,23,14,12,12,11,12,18,40,56,0,0},
  	/*6*/ {0,5,52,16,19,27,38,51,61,63,62,52,41,34,30,29,41,72,59,45,30,24,18,12,12,12,12,15,25,28,0,0},
	/*7*/ {0,5,77,20,25,28,40,44,48,51,55,54,42,36,33,32,44,53,38,51,32,25,24,18,16,14,12,13,23,33,0,0},    //
	/*8*/ {0,28,134,42,43,40,38,41,38,31,35,52,56,76,74,75,87,60,20,10,4,2,2,1,0,0,0,0,0,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_41_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4,12,30,199,433,49,51,11,9,8,6,17,88,21,7,10,10,7,9,2,1,1,1,2},  //
	/*1*/ {3,9,16,88,461,65,64,12,9,8,6,10,147,32,2,10,9,12,13,3,3,2,1,2},  //
	/*2*/ {6,45,53,128,471,79,59,11,7,7,7,9,9,3,1,11,5,27,25,6,5,4,4,5}, //
	/*3*/ {8,40,35,104,535,65,61,10,6,4,5,14,20,5,2,3,5,17,19,8,6,6,4,6},  //
	/*4*/ {6,23,27,62,665,49,73,8,5,4,4,4,4,2,2,3,6,12,9,5,4,3,4,5},   //
	/*5*/ {6,35,28,169,513,91,63,11,5,3,1,1,1,3,3,5,8,10,12,5,5,3,3,4},
	/*6*/ {5,34,24,133,542,93,51,12,6,3,2,3,2,5,6,9,9,12,15,6,5,3,3,4},
	/*7*/ {6,43,31,153,437,85,54,11,6,3,3,4,5,14,12,21,17,18,27,14,8,5,4,5},
	/*8*/ {8,29,40,81,560,63,37,5,4,3,4,14,7,3,2,19,19,25,36,7,6,5,4,6},   //

};
unsigned short DynamicOptimizeMEMC_42_y[][32]=   //Art of Flight 01:05:42 4k
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,34,11,13,16,19,25,35,33,55,43,35,39,34,36,61,73,52,33,20,18,27,38,69,90,45,29,1,0,0,0},   //
	/*1*/ {0,4,61,23,26,36,54,59,48,39,37,40,48,38,42,56,79,74,51,29,22,14,15,24,24,25,15,2,0,0,0,0},   //
	/*2*/ {0,8,198,56,49,46,41,50,49,36,42,36,28,24,41,53,57,51,36,15,8,12,9,14,13,13,2,0,0,0,0,0},  //
	/*3*/ {0,5,89,29,29,36,43,45,43,45,45,37,46,71,100,91,64,39,36,10,5,4,4,2,2,1,1,15,28,17,0,0},    //
	/*4*/ {0,2,38,13,15,16,19,23,27,30,41,47,47,62,72,84,109,93,48,23,13,7,4,4,3,3,4,15,33,90,0,0},  //
  	/*5*/ {0,6,56,21,21,26,37,49,61,63,60,50,39,31,26,24,26,52,59,49,30,22,14,12,11,11,13,18,42,55,0,0},
  	/*6*/ {0,4,50,15,19,27,41,53,62,62,60,51,40,34,34,34,45,74,55,43,29,22,19,13,13,12,13,15,22,24,0,0},
	/*7*/ {0,5,86,24,28,29,37,39,46,51,51,48,40,32,28,29,38,51,38,50,29,28,26,19,18,15,14,16,28,43,0,0},    //
	/*8*/ {0,8,145,50,47,41,37,39,38,31,34,51,56,77,74,75,88,59,19,10,3,2,1,1,0,0,0,0,0,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_42_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3,13,28,195,428,47,63,12,10,9,7,18,85,22,7,10,9,6,10,1,1,2,1,2},  //
	/*1*/ {3,12,17,114,461,56,76,11,8,8,6,9,112,40,3,9,9,8,17,2,2,2,1,2},  //
	/*2*/ {5,60,53,136,446,67,70,9,6,7,7,9,9,6,2,11,4,27,28,5,4,7,4,5}, //
	/*3*/ {6,39,32,96,541,69,83,10,6,5,5,11,15,4,1,3,5,15,18,6,5,5,4,4},  //
	/*4*/ {5,19,25,52,643,59,94,11,7,5,4,5,4,3,2,4,6,11,9,4,4,3,3,4},   //
	/*5*/ {5,34,28,152,509,96,77,12,6,5,1,1,1,4,3,6,7,9,13,5,4,3,3,4},
	/*6*/ {5,36,27,136,524,88,55,12,6,5,2,3,3,8,6,10,10,12,19,6,5,4,3,3},
	/*7*/ {6,40,33,145,405,78,76,10,7,5,2,4,3,21,20,27,21,17,34,12,7,6,4,5},
	/*8*/ {5,32,36,82,549,61,51,5,5,5,5,15,7,5,3,21,18,22,38,5,4,7,3,5},   //

};

unsigned short DynamicOptimizeMEMC_43_y[][32]=   //Art of Flight 01:10:09
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,37,107,32,44,28,15,18,25,28,32,41,73,106,103,68,68,48,32,26,20,18,12,1,1,0,1,1,1,0,0,0},   // 2k
	/*1*/ {0,36,89,37,47,23,20,23,33,44,55,51,66,90,84,69,76,55,33,9,12,12,13,1,1,1,1,5,0,0,0,0},   //
	/*2*/ {0,42,129,40,89,55,29,42,47,60,52,49,54,97,61,51,50,28,9,1,0,0,0,0,0,0,0,0,0,0,0,0},  //
	/*3*/ {0,11,127,32,45,32,17,19,27,32,34,42,78,118,83,61,63,45,34,28,22,24,10,1,1,0,1,1,0,0,0,0},    //  4k
	/*4*/ {0,12,114,36,46,24,22,25,35,42,52,48,58,76,66,74,83,56,46,22,11,14,14,1,1,1,1,6,0,0,0,0},  //
  	/*5*/ {0,11,153,41,97,58,33,48,49,64,47,42,48,88,74,52,48,24,9,1,0,0,0,0,0,0,0,0,0,0,0,0},
  	/*6*/ {0,11,153,41,97,58,33,48,49,64,47,42,48,88,74,52,48,24,9,1,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,11,153,41,97,58,33,48,49,64,47,42,48,88,74,52,48,24,9,1,0,0,0,0,0,0,0,0,0,0,0,0},    //
	/*8*/ {0,11,153,41,97,58,33,48,49,64,47,42,48,88,74,52,48,24,9,1,0,0,0,0,0,0,0,0,0,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_43_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5,52,41,8,35,14,1,0,0,0,0,0,0,1,3,20,636,126,28,6,3,2,2,3},  //  2k
	/*1*/ {5,54,46,9,45,17,4,1,1,0,0,0,1,2,4,19,662,83,21,5,3,2,2,3},  //
	/*2*/ {6,80,90,31,59,10,1,1,1,0,0,1,1,3,4,29,517,111,28,5,3,2,2,3}, //
	/*3*/ {5,50,41,7,35,14,2,0,0,0,0,0,0,2,4,28,641,112,29,5,3,2,2,3},  // 4k
	/*4*/ {4,49,47,9,40,20,7,1,1,1,0,0,1,4,4,22,658,75,27,6,4,2,2,3},   //
	/*5*/ {6,77,96,35,57,11,3,1,1,1,1,1,1,4,6,35,504,103,30,6,3,2,2,3},
	/*6*/ {6,77,96,35,57,11,3,1,1,1,1,1,1,4,6,35,504,103,30,6,3,2,2,3},
	/*7*/ {6,77,96,35,57,11,3,1,1,1,1,1,1,4,6,35,504,103,30,6,3,2,2,3},
	/*8*/ {6,77,96,35,57,11,3,1,1,1,1,1,1,4,6,35,504,103,30,6,3,2,2,3},   //

};

unsigned short DynamicOptimizeMEMC_44_y[][32]=   //SAMSARA 33:50
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {264,62,44,42,41,44,46,49,50,51,53,49,40,30,21,18,17,18,14,4,2,2,3,3,5,13,1,0,0,0,0,0},   // 2k
	/*1*/ {264,52,33,35,38,44,47,51,53,58,58,52,41,31,21,17,16,16,14,8,2,1,2,3,4,8,14,0,0,0,0,0},   //
	/*2*/ {274,96,48,49,47,48,50,50,48,44,39,33,27,23,19,16,13,11,10,9,8,7,5,4,3,2,2,1,1,0,0,0},  //
	/*3*/ {279,121,45,49,46,44,45,44,44,41,36,30,24,20,16,14,13,12,12,12,11,9,7,4,3,2,1,1,0,0,0,0},    //
	/*4*/ {256,57,43,40,39,43,47,51,55,57,59,53,41,28,20,16,16,17,15,4,1,1,3,4,5,14,2,0,0,0,0,0},  //  4k
  	/*5*/ {256,65,35,35,37,42,47,52,55,58,60,52,39,28,19,15,14,15,14,8,2,1,2,3,5,9,17,0,0,0,0,0},
  	/*6*/ {256,56,35,35,42,47,51,57,59,61,61,51,39,28,20,17,16,17,12,5,1,1,2,2,3,8,4,0,0,0,0,0},
	/*7*/ {256,103,49,52,49,50,52,51,50,45,39,33,27,23,19,16,13,11,9,8,7,6,5,4,3,2,1,1,0,0,0,0},    //
	/*8*/ {259,118,45,47,47,47,48,47,47,44,38,33,26,21,18,15,13,11,10,11,11,9,7,5,3,2,1,0,0,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_44_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4,24,28,38,302,315,148,75,32,12,6,4,2,0,0,0,0,0,0,0,0,0,0,1},  //  2k
	/*1*/ {3,22,20,30,281,327,164,82,34,14,6,3,1,0,0,0,0,0,0,0,0,0,0,2},  //
	/*2*/ {3,7,7,28,194,233,67,39,28,22,20,22,29,44,94,101,10,3,4,3,8,16,4,3}, //
	/*3*/ {5,9,10,32,170,234,50,28,19,13,14,19,27,40,101,140,15,5,6,5,12,23,6,5},  //
	/*4*/ {2,20,24,34,292,323,153,81,34,14,7,5,2,0,0,0,0,0,0,0,0,0,0,0},   // 4k
	/*5*/ {2,29,23,32,283,329,158,80,31,13,6,2,1,0,0,0,0,0,0,0,0,1,0,1},
	/*6*/ {2,25,18,26,270,310,169,89,41,19,11,6,2,0,0,0,0,0,0,0,0,1,0,1},
	/*7*/ {2,10,6,28,183,233,75,43,29,23,21,24,31,48,96,93,10,2,8,2,3,13,2,1},
	/*8*/ {3,13,7,27,164,238,61,35,23,17,17,23,29,46,118,108,11,3,9,3,4,25,3,2},   //

};
unsigned short DynamicOptimizeMEMC_45_y[][32]=   //SAMSARA 51:50
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {254,42,39,51,50,42,56,49,44,38,34,34,36,40,43,35,27,22,16,13,10,5,1,1,1,0,0,0,0,0,0,0},   // 2k
	/*1*/ {254,45,36,58,53,44,45,47,49,50,39,35,35,33,35,31,23,18,17,17,14,7,1,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {255,42,29,40,40,41,64,62,52,46,40,40,36,35,32,34,26,21,13,10,11,9,4,2,1,0,0,0,1,0,0,0},  //
	/*3*/ {256,71,65,70,52,63,77,56,36,34,31,35,41,36,23,18,11,4,2,1,1,1,1,0,0,0,0,0,0,0,0,0},    //
	/*4*/ {254,43,38,50,49,46,58,51,44,40,37,36,39,42,42,32,24,19,12,11,8,5,4,1,1,0,0,0,0,0,0,0},  //  4k
  	/*5*/ {254,35,35,45,37,41,41,36,33,34,34,40,48,58,58,47,32,23,17,16,16,8,2,0,0,0,0,0,0,0,0,0},
  	/*6*/ {254,60,22,43,56,62,58,31,34,38,37,34,31,33,35,36,27,18,17,18,16,15,9,2,0,0,0,0,0,0,0,0},
	/*7*/ {254,67,58,71,54,63,78,56,37,33,32,36,41,37,24,18,11,5,3,2,1,1,1,0,0,0,0,0,0,0,0,0},    //
	/*8*/ {254,67,58,71,54,63,78,56,37,33,32,36,41,37,24,18,11,5,3,2,1,1,1,0,0,0,0,0,0,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_45_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2,36,92,160,169,10,8,10,14,23,21,17,45,43,15,135,134,18,14,4,6,8,2,2},  //  2k
	/*1*/ {1,14,78,114,111,15,14,18,27,39,41,25,47,76,17,154,127,23,33,5,2,5,1,1},  //
	/*2*/ {3,16,65,86,88,17,20,24,18,20,19,23,82,103,52,269,51,7,9,2,3,8,2,2}, //
	/*3*/ {5,58,117,99,89,21,24,15,10,7,8,12,67,116,32,116,146,9,7,3,7,10,4,4},  //
	/*4*/ {1,37,96,150,187,12,8,8,9,13,16,25,53,41,14,138,127,19,18,3,3,7,1,1},   // 4k
	/*5*/ {1,17,103,177,191,16,13,18,26,34,39,27,72,53,12,51,72,28,31,4,1,2,0,0},
	/*6*/ {2,15,78,97,106,19,15,17,23,28,39,46,59,68,22,149,141,9,13,4,5,30,2,1},
	/*7*/ {3,55,117,102,97,21,23,16,10,7,9,16,72,111,30,122,139,8,9,2,3,11,2,2},
	/*8*/ {3,55,117,102,97,21,23,16,10,7,9,16,72,111,30,122,139,8,9,2,3,11,2,2},   //

};
unsigned short DynamicOptimizeMEMC_46_y[][32]=   //sony EX_Tomb Raider 2
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,1,2,17,39,47,38,22,38,136,231,158,102,36,19,15,14,12,12,11,14,19,5,0,0,0,0,0,0,0,0},   // 2k
	/*1*/ {0,0,1,1,12,20,35,33,28,37,207,222,162,71,45,21,15,14,12,11,11,12,15,3,1,0,0,0,0,0,0,0},   //
	/*2*/ {0,0,1,0,5,16,29,29,28,81,223,239,139,58,45,20,12,10,8,8,9,9,10,4,1,0,0,0,0,0,0,0},  //
	/*3*/ {0,0,1,0,2,14,26,22,40,85,205,212,112,70,49,25,17,15,17,21,18,13,9,5,3,2,1,1,1,0,0,0},    //
	/*4*/ {0,0,1,0,1,14,26,37,59,117,153,166,101,68,41,29,24,21,19,24,23,16,14,11,6,4,6,3,2,0,0,0},  //
  	/*5*/ {0,0,1,0,1,8,28,40,95,105,166,153,85,47,36,26,23,25,22,27,26,19,16,13,7,5,6,4,2,0,0,0},
  	/*6*/ {0,0,1,0,0,3,20,46,122,108,153,158,104,58,39,25,18,21,17,20,18,13,12,10,6,4,6,4,1,0,0,0},
	/*7*/ {0,0,1,0,1,1,15,65,113,121,149,174,125,70,44,27,14,13,10,10,9,5,6,6,3,2,2,1,0,0,0,0},    //
	/*8*/ {0,0,1,0,1,2,34,102,112,128,133,168,122,69,48,35,14,8,5,2,1,1,2,1,0,0,0,0,0,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_46_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,16,935,44,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //  2k
	/*1*/ {0,0,15,943,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,15,952,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //
	/*3*/ {0,0,16,944,32,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //
	/*4*/ {0,0,15,918,52,9,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*5*/ {0,0,12,916,55,10,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,16,912,57,10,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,25,936,31,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,60,926,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_47_y[][32]=   //sony for_Periodical_Pattern_[Hannibal]
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,1,1,4,10,13,23,40,50,54,56,61,87,143,138,99,63,42,39,36,23,5,0,0,0,0,0,0,0,0,0},   // 2k
	/*1*/ {0,0,0,0,4,12,16,27,42,51,55,57,65,89,148,125,95,62,42,38,35,22,7,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {0,0,2,0,1,2,5,8,9,13,19,26,33,41,84,75,77,354,91,58,36,24,17,8,1,0,0,0,1,1,0,0},  //
	/*3*/ {0,0,1,0,0,0,0,1,4,16,33,53,66,66,64,125,109,151,110,44,35,31,27,22,18,8,1,0,0,0,0,0} ,    //
	/*4*/ {0,0,0,0,0,0,0,1,5,18,31,48,67,69,67,132,116,155,99,43,34,30,26,21,17,9,1,0,0,0,0,0},    //
  	/*5*/ {0,0,1,1,0,1,1,2,10,25,40,56,69,69,77,146,120,140,69,38,29,25,22,19,15,8,3,0,0,0,0,0},    //
  	/*6*/ {0,0,1,1,0,1,0,2,8,17,33,53,65,69,85,154,124,175,66,38,27,22,16,10,8,6,4,1,0,0,0,0} ,    //
	/*7*/ {0,0,0,0,0,0,0,1,6,20,33,50,69,70,69,128,114,149,100,44,34,29,25,21,17,9,1,0,0,0,0,0} ,    //
	/*8*/ {91,77,102,122,132,141,98,71,34,10,8,6,5,4,3,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,3,62} ,    //
};
unsigned short DynamicOptimizeMEMC_47_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,0,0,3,17,87,532,353,1,0,0,0,0,0,0},  //  2k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,4,20,94,558,320,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,0,0,0,0,1,1,1,1,1,1,2,9,111,544,203,100,8,4,2,0,0,0}, //
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,4,41,642,304,2,0,0,0,0,0,0},  //
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,2,29,674,292,0,0,0,0,0,0,0},  //
	/*5*/ {0,0,0,0,0,0,0,0,0,0,2,6,12,22,59,597,291,5,0,0,0,0,0,0},  //
	/*6*/ {0,0,0,0,0,0,0,0,5,10,13,19,28,38,78,567,231,4,0,0,0,0,0,0},  //
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,1,6,32,661,296,0,0,0,0,0,0,0},  //
	/*8*/ {14,31,57,38,11,12,13,7,11,10,13,39,24,12,16,128,388,95,29,11,9,6,6,8},  //

};
unsigned short DynamicOptimizeMEMC_48_y[][32]=   //sony GLEE - Ride Wit Me #1
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,88,119,106,93,90,83,71,66,55,40,39,31,31,23,18,16,7,4,2,1,0,0,0,0,0,0,1,1,0,0},   // 2k
	/*1*/ {0,0,172,87,108,96,73,58,47,48,53,42,40,37,26,22,18,9,8,6,5,6,7,5,4,3,0,0,2,3,0,0},   //
	/*2*/ {0,0,105,162,136,64,45,36,47,59,60,42,44,38,31,24,27,22,17,9,10,0,0,0,0,0,0,0,3,4,0,0},  //
	/*3*/ {0,0,90,91,146,88,48,44,55,73,71,46,57,46,42,33,23,14,9,5,0,0,0,0,0,0,0,0,3,4,0,0},    //
	/*4*/ {0,0,100,86,113,76,57,63,54,74,56,44,49,52,42,29,20,17,9,5,4,4,3,2,2,2,1,2,6,14,0,0},    //
  	/*5*/ {0,0,83,84,96,67,61,61,48,52,61,33,41,43,46,50,28,22,20,14,10,9,10,7,5,3,2,2,7,18,0,0},    //
  	/*6*/ {0,0,79,50,106,85,50,32,32,52,80,48,53,58,63,57,42,25,21,16,11,7,4,1,2,2,1,1,3,6,0,0},    //
	/*7*/ {0,0,75,67,160,104,64,46,40,51,77,49,47,42,46,38,18,14,12,10,7,5,4,1,0,0,0,0,3,5,0,0},    //
	/*8*/ {0,0,119,88,155,97,73,62,54,47,47,48,46,42,34,20,14,11,9,6,3,2,1,1,0,0,0,0,3,4,0,0},    //

};
unsigned short DynamicOptimizeMEMC_48_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {54,140,193,209,102,35,10,11,14,32,14,5,6,7,10,20,24,15,9,9,9,10,21,29},  //  2k
	/*1*/ {14,40,381,307,117,45,18,18,13,7,5,2,1,1,1,1,0,1,2,2,1,2,3,7},  //
	/*2*/ {31,33,217,356,128,55,17,23,24,26,47,10,1,1,0,0,0,0,0,0,0,0,3,15}, //
	/*3*/ {12,37,338,367,95,36,14,15,17,23,18,4,1,1,0,0,0,0,0,0,0,0,2,10},  //
	/*4*/ {28,42,163,246,104,41,23,32,51,78,39,20,16,15,13,9,14,13,6,4,3,4,8,16},  //
	/*5*/ {19,21,97,218,110,40,25,35,61,96,50,28,21,18,11,7,12,30,20,14,9,8,13,24},  //
	/*6*/ {18,31,304,278,80,29,12,16,21,17,18,17,13,13,10,10,19,25,8,5,3,4,11,25},  //
	/*7*/ {22,39,386,277,91,34,11,10,10,8,8,8,6,5,5,4,7,14,6,3,2,3,8,20},  //
	/*8*/ {26,59,383,266,134,51,14,11,9,6,5,2,1,0,0,0,0,0,1,0,0,0,2,17},  //

};
unsigned short DynamicOptimizeMEMC_49_y[][32]=   //sony GLEE - Ride Wit Me #2
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,47,75,147,93,75,58,50,69,84,99,36,31,25,20,27,36,4,2,2,0,0,0,0,0,0,0,2,4,0,0},   // 2k
	/*1*/ {0,0,27,97,178,106,52,69,35,39,48,54,54,38,25,22,17,17,19,26,34,12,0,0,1,1,1,2,5,4,0,0},   //
	/*2*/ {0,0,113,102,130,92,54,42,36,36,38,41,43,37,34,24,20,24,25,32,33,22,2,0,0,0,0,0,3,3,0,0},  //
	/*3*/ {0,0,53,132,117,86,70,72,85,79,68,64,44,39,27,15,6,4,4,3,3,2,2,2,2,1,0,0,3,4,0,0},    //
	/*4*/ {0,0,70,60,56,56,64,86,61,59,53,48,45,47,40,26,24,26,36,43,29,26,18,4,0,0,0,0,4,5,0,0},    //
  	/*5*/ {0,0,43,77,142,104,93,70,48,47,51,46,40,34,27,24,23,20,19,19,19,13,8,5,3,2,1,0,3,5,0,0},    //
	/*6*/ {0,0,18,94,138,93,74,52,39,36,32,34,38,40,36,34,38,37,29,30,28,26,16,5,1,2,1,2,8,6,0,0},    //
	/*7*/ {0,0,19,108,137,83,75,64,35,32,36,39,38,39,43,34,26,22,25,29,29,23,18,7,2,1,0,1,17,6,0,0},    //
	/*8*/ {0,0,18,59,105,86,70,53,44,47,44,46,53,56,45,44,46,38,27,29,26,19,15,10,5,3,2,0,0,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_49_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {20,43,254,401,83,21,10,9,11,28,41,9,1,1,0,0,0,0,0,0,1,4,15,37},  //  2k
	/*1*/ {30,98,336,412,42,25,8,4,4,3,2,1,0,0,0,0,0,0,0,0,0,1,6,18},  //
	/*2*/ {41,74,300,295,86,69,29,30,23,9,7,3,1,1,1,1,0,0,0,0,0,1,4,14}, //
	/*3*/ {24,122,274,285,112,55,14,10,8,4,5,5,5,6,8,10,9,5,7,6,3,2,3,6},  //
	/*4*/ {38,130,287,209,136,121,8,7,6,4,4,2,1,1,0,0,0,1,2,1,1,2,5,23},  //
	/*5*/ {12,95,394,374,51,31,13,7,4,2,2,2,1,0,1,0,0,0,0,0,0,0,0,1},  //
	/*6*/ {29,90,421,372,38,12,8,3,2,2,2,1,1,0,0,0,0,0,0,0,0,0,1,8},  //
	/*7*/ {31,125,330,407,42,16,15,2,4,8,6,2,0,0,0,0,0,0,0,0,0,0,0,2},  //
	/*8*/ {21,67,414,342,49,17,5,4,13,37,20,1,0,0,0,0,0,0,0,0,0,0,0,1},  //

};

unsigned short DynamicOptimizeMEMC_50_y[][32]=   //sony 3:2 film &ScrollSmallText 60i
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,12,90,47,43,38,30,34,34,32,36,36,36,32,28,28,30,29,28,27,25,24,24,27,29,33,36,37,66,17,0,0},   // 2k
	/*1*/ {0,12,89,48,42,38,30,34,34,32,34,34,34,32,29,29,31,29,28,27,25,25,24,27,29,33,36,37,66,17,0,0},   //
	/*2*/ {0,13,88,46,38,35,29,34,33,30,33,34,40,39,30,29,31,30,28,27,25,25,24,27,29,33,36,37,66,18,0,0},    //
	/*3*/ {0,11,90,45,36,33,27,30,32,30,36,38,43,41,30,29,31,30,28,27,24,25,25,27,29,33,36,38,66,16,0,0},    //
	/*4*/ {0,10,89,44,39,34,28,31,33,32,36,39,43,41,29,28,29,28,27,27,25,25,24,27,29,33,36,38,66,17,0,0},    //
	/*5*/ {0,9,91,43,41,36,29,34,34,31,35,39,42,37,28,26,28,28,28,27,24,25,24,27,29,33,36,38,65,17,0,0},    //
	/*6*/ {0,10,89,45,42,37,30,35,34,31,36,39,39,34,27,26,29,28,28,27,25,24,24,28,29,33,37,37,65,18,0,0},    //
 	 /*7*/{87,85,81,72,68,60,80,48,19,17,19,19,22,22,17,17,18,17,16,16,14,14,14,16,17,19,21,22,37,11,0,0},  //
 	 /*8*/{85,84,82,75,66,60,80,48,19,17,19,19,22,22,17,17,18,17,16,16,14,14,14,16,17,19,21,22,37,11,0,0},    //

};
unsigned short DynamicOptimizeMEMC_50_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2,11,30,25,253,245,85,59,38,20,15,11,16,21,48,62,32,8,4,1,1,0,1,1},  //  2k
	/*1*/ {2,10,29,23,246,251,93,62,35,19,13,10,16,19,44,70,33,6,2,1,1,0,1,1},  //
	/*2*/ {2,12,29,24,256,244,86,58,36,19,14,10,14,16,39,77,34,9,4,2,1,1,1,1},  //
	/*3*/ {2,11,28,24,245,250,88,60,39,20,15,11,16,15,39,80,29,8,3,1,1,0,1,1},  //
	/*4*/ {2,12,30,25,268,241,84,52,32,17,12,10,14,15,41,81,32,10,5,2,1,1,1,1},  //
	/*5*/ {2,11,29,25,254,246,89,56,34,18,13,10,13,18,47,74,32,9,4,1,1,1,1,1},  //
	/*6*/ {2,14,30,26,270,240,83,52,33,17,11,9,13,16,44,70,36,10,5,2,1,1,1,1},  //
	/*7*/ {2,11,28,23,244,249,89,61,38,21,15,12,16,20,47,65,32,7,3,1,1,1,1,1}, //
	/*8*/ {2,10,28,23,242,255,93,64,37,19,13,10,16,19,48,69,29,6,2,1,1,0,1,1},  //

};

unsigned short DynamicOptimizeMEMC_51_y[][32]=   //Art of Flight 01:23/01:27
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,317,286,149,53,53,50,32,16,16,6,3,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // 2k 01:23
	/*1*/ {0,1,251,55,67,49,41,81,84,69,73,39,34,14,7,6,7,8,10,16,20,27,16,3,2,2,1,0,0,4,0,0},   //
	/*2*/ {0,0,0,361,196,72,44,41,35,32,43,31,15,11,9,7,7,7,6,6,5,5,6,7,11,13,7,4,3,1,0,0},    //
	/*3*/ {0,0,0,123,158,75,61,77,83,44,35,30,25,19,14,12,13,14,16,17,18,20,22,21,25,30,20,6,4,2,0,0},    // 2k 01:27
	/*4*/ {0,1,327,279,150,55,56,51,24,15,16,5,2,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},    //   4k 01:23
	/*5*/ {0,1,248,55,62,53,44,81,66,52,69,68,43,14,7,6,6,8,10,16,20,27,16,3,2,2,0,0,0,5,0,0},    //
	/*6*/ {0,0,0,448,174,63,40,39,34,37,41,21,12,9,7,6,6,5,4,3,3,3,4,4,5,7,5,4,2,1,0,0},    //
 	 /*7*/{0,0,0,122,158,75,62,77,84,44,36,30,25,19,14,12,13,14,16,17,18,20,21,20,25,30,20,6,4,2,0,0},  // 4k 01:27
 	 /*8*/{0,0,0,122,158,75,62,77,84,44,36,30,25,19,14,12,13,14,16,17,18,20,21,20,25,30,20,6,4,2,0,0},

};
unsigned short DynamicOptimizeMEMC_51_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {14,81,119,92,10,1,2,0,0,0,0,0,1,6,13,47,164,150,176,36,28,25,12,12},    // 2k 01:23
	/*1*/ {14,47,32,126,314,29,56,25,19,12,7,7,7,20,15,30,64,55,40,21,15,11,9,12},  //
	/*2*/ {7,227,162,230,161,59,47,39,23,12,6,4,3,2,1,0,0,0,0,0,0,0,1,5},  //
	/*3*/ {2,48,90,379,312,80,44,17,6,2,1,1,2,1,1,0,0,0,0,0,0,0,0,1},  // 2k 01:27
	/*4*/ {8,71,78,115,34,6,15,1,1,3,1,2,3,23,21,68,188,120,151,23,19,22,8,8},  //  4k 01:23
	/*5*/ {10,47,31,118,333,37,80,30,25,20,9,8,6,16,10,24,50,42,39,17,13,10,7,9},  //
	/*6*/ {3,331,131,172,108,55,62,43,33,18,10,7,3,3,1,1,0,0,0,0,0,1,1,6},  //
	/*7*/ {1,48,86,361,323,84,48,20,7,3,2,2,2,1,1,0,0,0,0,0,0,0,0,1}, // 4k 01:27
	/*8*/ {1,48,86,361,323,84,48,20,7,3,2,2,2,1,1,0,0,0,0,0,0,0,0,1},

};

unsigned short DynamicOptimizeMEMC_52_y[][32]=   //Art of Flight 05:29
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,81,36,33,55,75,89,72,57,53,37,39,34,28,22,26,31,32,39,39,32,25,14,11,6,5,4,5,5,0,0},   // 2k  05:29
	/*1*/ {0,1,66,41,39,50,58,84,67,60,60,52,47,40,31,23,27,31,33,37,37,26,16,13,12,11,8,7,6,2,0,0},   //
	/*2*/ {0,1,66,48,37,49,61,86,70,62,61,51,46,39,30,23,26,30,33,36,38,23,14,12,12,11,7,7,5,2,0,0},    //
	/*3*/ {0,1,79,37,36,57,72,91,70,52,54,42,39,36,32,22,25,31,32,39,39,31,24,14,11,7,4,2,2,1,0,0},    //
 	/*4*/ {0,1,66,41,40,50,69,83,64,58,60,49,44,40,33,24,27,30,31,37,38,26,16,13,12,11,8,7,6,2,0,0},    //
 	/*5*/ {0,1,75,35,34,56,70,83,63,55,57,45,43,39,33,24,26,29,31,38,39,32,24,14,12,8,6,3,4,4,0,0},    //
 	/*6*/ {0,0,79,39,32,54,71,87,70,55,60,44,45,36,29,21,24,30,32,39,38,29,24,14,10,5,4,4,5,5,0,0},    //  4k  05:29
	/*7*/ {0,0,67,37,35,55,68,92,74,55,55,43,41,34,31,23,27,32,31,39,40,31,21,13,11,9,7,5,6,3,0,0},    //
	/*8*/ {0,0,64,49,35,38,61,86,72,63,64,55,49,41,32,23,26,30,32,36,38,23,14,12,12,10,7,7,5,1,0,0},    //

};
unsigned short DynamicOptimizeMEMC_52_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {24,34,53,48,50,8,2,1,1,1,1,16,13,3,5,36,487,95,29,20,15,13,15,19},  // 2k  05:29
	/*1*/ {20,31,54,45,58,6,2,1,1,1,1,9,17,2,4,37,482,93,36,21,18,16,16,18},  //
	/*2*/ {20,29,53,50,57,6,2,1,1,1,1,11,16,3,7,47,483,88,32,20,17,13,13,16},  //
	/*3*/ {20,33,51,46,50,7,2,1,1,1,1,16,13,3,6,34,494,96,31,20,15,14,16,17},  //
	/*4*/ {20,30,55,46,58,6,2,1,1,1,1,9,16,2,5,40,480,94,36,20,17,15,16,18}, //
	/*5*/ {22,37,52,43,49,7,1,1,1,0,1,16,13,2,5,34,482,94,35,22,17,15,18,20}, //
	/*6*/ {21,39,52,46,53,6,3,2,1,1,1,17,13,4,6,36,488,88,29,21,14,14,15,19},    //  4k  05:29
	/*7*/ {20,34,51,44,52,7,2,1,1,1,1,18,14,3,5,38,485,91,33,20,17,15,15,19},  //
	/*8*/ {18,32,52,48,57,6,2,1,1,1,1,11,15,3,7,48,479,89,34,20,17,15,13,16},  //

};

unsigned short DynamicOptimizeMEMC_53_y[][32]=   //Art of Flight 06:33
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,3,92,40,35,23,16,11,11,12,49,82,81,77,63,58,62,43,32,30,28,30,54,24,13,9,4,3,1,0,0,0},   // 2k
	/*1*/ {0,3,142,47,46,31,22,17,17,17,56,82,74,60,49,42,47,34,27,27,25,28,49,18,11,7,4,2,1,0,0,0},   //
	/*2*/ {0,3,232,57,42,24,22,24,25,27,51,62,57,51,42,31,40,31,25,24,20,19,41,15,9,6,3,1,0,0,0,0},    //
	/*3*/ {0,3,137,50,25,13,13,11,13,17,59,73,85,68,51,51,61,44,33,31,27,30,50,17,11,8,4,2,0,0,0,0},    //
 	/*4*/ {0,2,92,41,35,24,16,11,11,12,48,82,81,77,63,58,62,43,32,31,28,30,54,24,13,9,4,3,1,0,0,0},    //  4k
 	/*5*/ {0,1,233,58,42,24,22,24,25,27,51,62,57,51,42,31,40,31,25,25,20,19,41,15,9,6,3,1,0,0,0,0},    //
 	/*6*/ {0,2,97,42,26,13,10,7,8,13,53,77,79,76,70,56,63,43,35,34,31,31,55,24,16,12,6,3,1,2,0,0},    //
	/*7*/ {0,1,219,55,46,24,19,20,24,26,54,72,55,55,37,28,39,30,23,24,23,25,47,17,10,7,3,2,0,0,0,0},    //
	/*8*/ {0,1,219,55,46,24,19,20,24,26,54,72,55,55,37,28,39,30,23,24,23,25,47,17,10,7,3,2,0,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_53_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {7,17,37,17,37,11,2,1,2,2,7,48,15,19,44,398,251,32,19,5,4,4,5,7},  // 2k
	/*1*/ {11,25,41,16,33,16,2,2,2,3,10,28,9,17,43,340,238,60,40,11,10,8,10,12},  //
	/*2*/ {20,22,12,10,48,27,3,2,2,2,6,24,7,15,40,296,184,96,84,18,17,16,18,19},  //
	/*3*/ {8,18,20,9,35,11,2,1,1,1,4,45,41,17,41,391,241,36,29,7,7,7,7,9},  //
	/*4*/ {5,16,36,18,37,12,2,2,2,3,7,48,16,22,46,411,234,28,21,4,4,4,4,6}, // 4k
	/*5*/ {18,23,12,11,47,28,3,2,2,2,7,24,7,18,42,307,173,89,90,16,16,17,17,19}, //
	/*6*/ {3,11,21,15,32,16,3,2,2,2,5,28,34,19,44,473,229,18,15,3,3,4,3,4},    //
	/*7*/ {15,25,17,6,32,26,2,1,2,2,9,15,8,20,49,324,187,88,81,17,15,13,15,18},  //
	/*8*/ {15,25,17,6,32,26,2,1,2,2,9,15,8,20,49,324,187,88,81,17,15,13,15,18},  //

};
unsigned short DynamicOptimizeMEMC_54_y[][32]=   //Art of Flight 06:45
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,4,14,19,15,15,12,5,5,7,10,7,6,5,5,8,18,33,76,80,117,144,109,121,81,52,16,2,0,0,0},   // 2k
	/*1*/ {0,0,2,9,23,28,27,17,8,7,11,20,32,35,30,32,43,41,40,84,64,46,57,52,73,100,82,20,1,0,0,0},   //
	/*2*/ {0,0,3,18,35,26,25,17,12,16,27,34,39,34,27,23,39,43,61,84,82,59,61,53,56,60,46,4,1,0,0,0},    //
	/*3*/ {0,0,3,14,20,16,14,12,5,5,7,9,7,6,5,4,9,18,32,78,81,116,148,108,120,80,50,16,2,0,0,0},    //  4k
	/*4*/ {0,0,2,11,22,32,26,17,8,9,14,26,43,43,37,33,45,38,50,84,68,49,58,50,60,76,71,14,1,0,0,0},    //
 	/*5*/ {0,0,2,11,22,32,26,17,8,9,14,26,43,43,37,33,45,38,50,84,68,49,58,50,60,76,71,14,1,0,0,0},    //
 	/*6*/ {0,0,2,11,22,32,26,17,8,9,14,26,43,43,37,33,45,38,50,84,68,49,58,50,60,76,71,14,1,0,0,0},    //
 	/*7*/ {0,0,2,11,22,32,26,17,8,9,14,26,43,43,37,33,45,38,50,84,68,49,58,50,60,76,71,14,1,0,0,0},    //
	/*8*/ {0,0,2,11,22,32,26,17,8,9,14,26,43,43,37,33,45,38,50,84,68,49,58,50,60,76,71,14,1,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_54_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3,16,10,12,31,31,63,11,13,10,6,10,10,35,40,79,348,116,80,19,16,16,5,6},  // 2k
	/*1*/ {4,19,24,50,182,80,110,5,4,3,1,1,1,7,5,22,289,117,27,9,9,10,3,4},  //
	/*2*/ {6,21,31,65,207,66,27,4,2,1,1,1,1,4,4,25,321,129,31,10,9,7,5,8},  //
	/*3*/ {2,18,10,13,29,29,71,9,13,13,5,11,8,41,42,90,344,101,87,13,13,18,3,6},  // 4k
	/*4*/ {2,17,27,50,170,74,113,7,5,6,2,2,2,11,8,41,304,92,25,5,7,9,3,5},  //
	/*5*/ {2,17,27,50,170,74,113,7,5,6,2,2,2,11,8,41,304,92,25,5,7,9,3,5},  //
	/*6*/ {2,17,27,50,170,74,113,7,5,6,2,2,2,11,8,41,304,92,25,5,7,9,3,5},  //
	/*7*/ {2,17,27,50,170,74,113,7,5,6,2,2,2,11,8,41,304,92,25,5,7,9,3,5},  //
	/*8*/ {2,17,27,50,170,74,113,7,5,6,2,2,2,11,8,41,304,92,25,5,7,9,3,5},  //

};

unsigned short DynamicOptimizeMEMC_55_y[][32]=   //Art of Flight 08:19
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,63,21,21,18,18,20,22,22,29,29,32,31,23,22,18,17,10,10,13,10,10,18,487,12,6,3,0,0,0,0},   // 2k
	/*1*/ {0,1,76,31,27,24,22,25,25,22,23,18,18,12,10,10,10,8,7,7,11,10,6,11,557,9,4,3,0,0,0,0},   //
	/*2*/ {0,3,78,29,32,31,27,29,30,28,35,38,38,36,30,27,22,19,9,7,22,84,73,80,177,3,0,0,0,0,0,0},    //
	/*3*/ {0,1,74,24,22,19,20,22,26,24,30,32,31,26,18,19,17,15,11,9,11,8,9,17,479,12,7,4,0,0,0,0},    //  4k
	/*4*/ {0,1,76,33,27,25,22,25,25,22,23,22,18,13,12,12,10,8,7,8,11,7,5,12,554,7,1,0,0,0,0,0},    //
 	/*5*/ {0,2,78,29,32,31,28,29,30,28,35,38,38,36,30,27,22,19,9,7,22,84,73,81,177,2,0,0,0,0,0,0},    //
 	/*6*/ {0,2,78,29,32,31,28,29,30,28,35,38,38,36,30,27,22,19,9,7,22,84,73,81,177,2,0,0,0,0,0,0},    //
 	/*7*/ {0,2,78,29,32,31,28,29,30,28,35,38,38,36,30,27,22,19,9,7,22,84,73,81,177,2,0,0,0,0,0,0},    //
	/*8*/ {0,2,78,29,32,31,28,29,30,28,35,38,38,36,30,27,22,19,9,7,22,84,73,81,177,2,0,0,0,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_55_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {30,44,71,94,40,20,30,10,9,9,6,5,4,65,41,135,41,31,222,16,16,13,14,23},  // 2k
	/*1*/ {23,25,36,65,46,28,48,8,7,9,3,5,4,118,39,169,58,34,207,13,10,5,9,20},  //
	/*2*/ {30,60,84,109,50,19,28,9,9,9,5,4,2,9,8,189,90,38,150,20,18,14,13,19},  //
	/*3*/ {25,41,68,97,43,18,47,8,8,15,5,5,3,98,21,141,30,27,218,14,14,12,11,20},  // 4k
	/*4*/ {21,26,38,70,41,22,55,7,6,11,2,5,2,154,21,165,38,27,214,12,10,7,11,22},  //
	/*5*/ {26,61,80,111,51,17,38,8,9,14,4,4,2,17,8,201,71,33,155,18,16,14,12,18},  //
	/*6*/ {26,61,80,111,51,17,38,8,9,14,4,4,2,17,8,201,71,33,155,18,16,14,12,18},  //
	/*7*/ {26,61,80,111,51,17,38,8,9,14,4,4,2,17,8,201,71,33,155,18,16,14,12,18},  //
	/*8*/ {26,61,80,111,51,17,38,8,9,14,4,4,2,17,8,201,71,33,155,18,16,14,12,18},  //

};

unsigned short DynamicOptimizeMEMC_56_y[][32]=   //Art of Flight 15:28
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,16,15,21,19,26,50,46,57,64,72,66,65,63,58,57,46,33,30,29,25,32,27,16,20,21,7,4,0,0,0},   // 2k
	/*1*/ {0,0,28,48,38,20,26,39,34,28,31,65,77,70,61,54,49,37,31,31,32,29,39,28,17,30,27,10,7,0,0,0},   //
	/*2*/ {0,0,30,19,26,20,29,60,58,66,76,76,71,71,61,53,48,32,27,25,23,19,21,30,18,10,11,3,2,0,0,0},    //
	/*3*/ {0,0,29,19,26,20,29,61,59,65,76,75,71,71,61,53,48,32,27,25,23,19,21,31,19,10,11,3,2,0,0,0},    //  4k
	/*4*/ {0,0,15,14,20,19,28,53,50,60,66,68,62,59,61,60,61,41,32,30,31,27,35,24,15,19,21,7,4,0,0,0},    //
 	/*5*/ {0,0,14,16,25,15,14,17,34,48,63,69,69,77,71,72,61,41,32,31,31,28,38,26,16,32,28,10,7,0,0,0},    //
 	/*6*/ {0,0,14,16,25,15,14,17,34,48,63,69,69,77,71,72,61,41,32,31,31,28,38,26,16,32,28,10,7,0,0,0},    //
 	/*7*/ {0,0,14,16,25,15,14,17,34,48,63,69,69,77,71,72,61,41,32,31,31,28,38,26,16,32,28,10,7,0,0,0},    //
	/*8*/ {0,0,14,16,25,15,14,17,34,48,63,69,69,77,71,72,61,41,32,31,31,28,38,26,16,32,28,10,7,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_56_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {9,34,82,85,61,6,5,4,8,12,10,12,7,8,17,254,342,3,3,2,6,5,5,8},  // 2k
	/*1*/ {12,55,153,118,22,10,12,7,14,19,14,19,11,11,19,241,209,14,6,4,3,3,4,8},  //
	/*2*/ {8,34,111,134,49,19,25,7,8,7,6,6,4,5,14,191,339,5,4,2,3,2,2,4},  //
	/*3*/ {6,32,108,135,53,18,27,7,8,8,6,6,4,6,14,195,334,4,4,2,2,2,2,4},  // 4k
	/*4*/ {7,31,79,87,66,6,6,4,9,13,9,13,6,10,17,256,338,3,4,2,6,5,4,7},  //
	/*5*/ {8,34,109,152,40,4,3,6,14,19,13,20,9,10,18,288,221,5,3,2,2,2,3,5},  //
	/*6*/ {8,34,109,152,40,4,3,6,14,19,13,20,9,10,18,288,221,5,3,2,2,2,3,5},  //
	/*7*/ {8,34,109,152,40,4,3,6,14,19,13,20,9,10,18,288,221,5,3,2,2,2,3,5},  //
	/*8*/ {8,34,109,152,40,4,3,6,14,19,13,20,9,10,18,288,221,5,3,2,2,2,3,5},  //

};

unsigned short DynamicOptimizeMEMC_57_y[][32]=   //Art of Flight 17:05
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,2,1,2,5,9,10,10,12,14,13,12,12,14,24,123,112,88,81,117,109,65,44,31,20,17,16,12,8,0,0},   // 2k
	/*1*/ {0,1,1,2,3,8,13,14,13,15,17,15,14,15,18,35,209,93,47,75,108,94,59,41,27,16,12,9,6,5,0,0},   //
	/*2*/ {0,0,2,2,4,9,17,20,15,15,16,16,16,18,24,44,238,108,51,64,98,84,50,34,21,8,4,3,2,3,0,0},    //
	/*3*/ {0,1,2,2,4,7,13,16,13,10,11,12,12,13,15,24,172,137,101,83,92,83,55,41,31,28,7,1,0,0,0,0},    //
	/*4*/ {0,1,2,2,4,8,16,20,15,15,16,16,16,17,22,42,231,108,50,65,100,87,53,35,22,9,4,3,3,3,0,0},    //
 	/*5*/ {0,0,2,1,2,5,9,10,10,13,15,14,13,13,15,27,123,112,86,82,117,105,63,44,31,20,17,16,13,7,0,0},    //  4k
 	/*6*/ {0,0,2,1,3,7,13,14,12,15,18,16,15,15,18,32,207,94,45,76,109,97,60,42,28,15,12,9,6,3,0,0},    //
 	/*7*/ {0,0,2,2,4,8,16,20,15,15,17,17,17,19,24,45,235,108,52,65,97,83,50,34,21,8,3,3,2,2,0,0},    //
	/*8*/ {0,0,2,2,3,7,13,16,13,10,11,12,12,13,16,26,167,133,104,84,92,84,56,42,32,28,6,1,0,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_57_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2,3,4,7,31,80,40,8,5,4,3,3,4,18,19,97,524,85,24,10,6,3,2,3},  // 2k
	/*1*/ {2,3,3,7,35,55,30,6,4,3,2,3,3,16,18,85,568,87,30,12,7,4,3,3},  //
	/*2*/ {3,4,3,3,17,33,29,5,4,3,2,2,3,18,20,86,624,81,23,10,6,4,3,3},  //
	/*3*/ {2,3,3,8,35,45,29,3,3,3,1,1,2,17,16,76,619,84,21,7,4,2,2,2},  //
	/*4*/ {2,3,2,4,22,34,29,4,3,3,1,2,2,18,18,80,621,89,25,10,6,4,3,3},  //
	/*5*/ {2,4,4,7,26,78,51,9,7,9,4,4,5,26,27,109,511,63,23,9,5,3,2,2},  // 4k
	/*6*/ {2,4,3,7,29,54,39,7,5,6,3,3,4,21,22,98,547,79,29,11,6,4,2,3},  //
	/*7*/ {2,5,3,4,16,29,35,5,5,6,2,2,3,23,25,96,613,71,21,8,5,4,2,3},  //
	/*8*/ {1,4,3,7,31,46,37,3,3,6,1,1,2,22,20,85,609,74,20,5,4,2,1,2},  //

};

unsigned short DynamicOptimizeMEMC_58_y[][32]=   //TCL test pattern vertrez24p/Soap Opera Effect test 02:00/ 02:40 /03:40/03:30
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,156,60,1,0,0,0,0,0,0,0,0,0,0,0,443,68,6,0,0,0,6,19,0,0,0,0,0,49,185,0,0},   //vertrez24p  2k/4k
	/*1*/ {0,167,53,0,0,0,0,0,0,0,0,0,0,0,0,77,438,0,0,0,0,1,23,1,0,0,0,0,0,234,0,0},   // vertrez24p usb
	/*2*/ {10,19,22,11,6,4,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,3,3,3,3,4,5,7,816,14,13},   //Soap  02:00  2k
	/*3*/ {7,18,25,11,6,4,4,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,3,3,3,4,5,8,817,14,10},   //Soap   02:00  4k
	/*4*/ {11,38,46,12,6,5,5,4,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,3,3,5,783,15,5},    //Soap  02:40  2k
 	/*5*/ {7,36,52,11,6,5,5,4,4,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,3,3,5,788,12,3},  //Soap   02:40  4k
 	/*6*/ {11,56,264,210,62,28,18,14,12,10,9,8,8,7,7,6,6,6,6,6,6,7,7,7,8,10,14,93,20,21,19,16},   // Soap  03:40  2k
 	/*7*/ {10,55,265,208,61,28,18,14,12,10,9,8,8,7,7,7,7,7,6,7,7,7,7,8,9,10,15,94,21,22,19,12},   // Soap  03:40  4k
	/*8*/ {7,97,703,47,17,11,9,7,6,5,5,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,7},   //Soap 03:30

};
unsigned short DynamicOptimizeMEMC_58_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,3,460,428,58,45,3,0,0,0,0,0,0,0,0,0,0,0},  //vertrez24p  2k/4k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //  vertrez24p usb
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // Soap  02:00  2k
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // Soap   02:00  4k
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // Soap  02:40  2k
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // Soap   02:40  4k
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   // Soap  03:40  2k
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // Soap  03:40  4k
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //Soap 03:30

};

unsigned short DynamicOptimizeMEMC_59_y[][32]=   //TCL test pattern Soap Opera Effect test 00:19
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,117,127,50,18,15,14,13,12,12,11,11,12,11,11,12,12,11,11,12,11,12,12,12,13,14,18,100,65,234,0,0},   // 2k
	/*1*/ {0,0,249,44,18,15,14,12,12,12,12,11,11,12,13,13,13,12,12,12,11,11,12,12,13,14,18,102,63,230,0,0},   //  4k
	/*2*/ {0,0,249,44,18,15,14,12,12,12,12,11,11,12,13,13,13,12,12,12,11,11,12,12,13,14,18,102,63,230,0,0},   //
	/*3*/ {0,0,249,44,18,15,14,12,12,12,12,11,11,12,13,13,13,12,12,12,11,11,12,12,13,14,18,102,63,230,0,0},   //
	/*4*/ {0,0,249,44,18,15,14,12,12,12,12,11,11,12,13,13,13,12,12,12,11,11,12,12,13,14,18,102,63,230,0,0},   //
 	/*5*/ {0,0,249,44,18,15,14,12,12,12,12,11,11,12,13,13,13,12,12,12,11,11,12,12,13,14,18,102,63,230,0,0},   //
 	/*6*/ {0,0,249,44,18,15,14,12,12,12,12,11,11,12,13,13,13,12,12,12,11,11,12,12,13,14,18,102,63,230,0,0},   //
 	/*7*/ {0,0,249,44,18,15,14,12,12,12,12,11,11,12,13,13,13,12,12,12,11,11,12,12,13,14,18,102,63,230,0,0},   //
	/*8*/ {0,0,249,44,18,15,14,12,12,12,12,11,11,12,13,13,13,12,12,12,11,11,12,12,13,14,18,102,63,230,0,0},   //

};
unsigned short DynamicOptimizeMEMC_59_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  // 2k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //  4k
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},

};

unsigned short DynamicOptimizeMEMC_60_y[][32]=   //ROKU S&M source adaptive black chroma for MEMC
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,3,995,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   //black chroma 2k
	/*1*/ {0,0,998,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // black chroma  4k
	/*2*/ {0,3,995,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // black chroma crossed 2k
	/*3*/ {0,0,998,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // black chroma crossed 4k
	/*4*/ {0,3,995,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // black chroma cb 2k
 	/*5*/ {0,0,998,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // black chroma cb 4k
 	/*6*/ {0,3,995,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // black chroma cr 2k
 	/*7*/ {0,0,998,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // black chroma cb 4k
	/*8*/ {0,0,11,7,5,4,3,3,3,3,3,2,2,2,2,877,3,2,2,3,3,3,3,3,3,4,4,5,7,15,0,0},   // rgb legal cb 2k

};
unsigned short DynamicOptimizeMEMC_60_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,5,14,941,21,5},    //black chroma 2k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,976,16,2},  // black chroma  4k
	/*2*/ {0,1,4,18,0,0,0,0,0,0,0,0,0,0,0,948,18,3,1,0,0,1,0,0},  // black chroma crossed 2k
	/*3*/ {0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,993,1,0,0,0,0,0,0,0},   // black chroma crossed 4k
	/*4*/ {11,12,4,5,0,0,0,0,0,0,0,0,0,0,0,945,0,0,0,0,2,4,6,7},  // black chroma cb 2k
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,994,1,2,2,0,0,0,0,0},     // black chroma cb 4k
	/*6*/ {8,17,7,6,0,0,1,0,0,0,0,0,0,0,0,80,105,111,153,146,194,127,36,10}, // black chroma cr 2k
	/*7*/ {0,855,295,178,0,1,19,0,0,0,0,0,0,22,0,0,0,0,0,0,0,0,0,0}, // black chroma cr 4k
	/*8*/ {0,1,1,2,2,262,249,0,0,0,0,0,0,0,0,0,0,285,191,0,0,0,0,0},// rgb legal cb 2k

};
unsigned short DynamicOptimizeMEMC_61_y[][32]=   //ROKU S&M source adaptive  gray chroma for MEMC
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   //gray chroma 2k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // gray chroma  4k
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // gray chroma crossed 2k
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // gray chroma crossed 4k
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // gray chroma cb 2k
 	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // gray chroma cb 4k
 	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // gray chroma cr 2k
 	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},   // gray chroma cb 4k
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,997,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},

};
unsigned short DynamicOptimizeMEMC_61_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1,0,0,0,0,0,1,2,6,485,10,2,0,0,0,0,0,0,0,1,5,463,10,2},    //gray chroma 2k
	/*1*/ {0,0,0,0,0,0,0,0,1,508,5,0,0,0,0,0,0,0,0,0,1,474,5,0},  // gray chroma  4k
	/*2*/ {0,1,2,478,24,6,2,1,0,0,0,0,0,2,3,460,10,2,0,0,0,0,0,0},  // gray chroma crossed 2k
	/*3*/ {0,0,0,485,24,3,0,0,0,0,0,0,0,1,4,476,0,0,0,0,0,0,0,0},   // gray chroma crossed 4k
	/*4*/ {0,0,0,0,0,0,514,0,0,0,0,0,0,0,0,0,0,0,485,0,0,0,0,0},  // gray chroma cb 2k
	/*5*/ {0,0,0,0,0,0,517,0,0,0,0,0,0,0,0,0,0,0,482,0,0,0,0,0},     // gray chroma cb 4k
	/*6*/ {0,487,0,0,0,0,0,0,0,0,0,0,0,512,0,0,0,0,0,0,0,0,0,0}, // gray chroma cr 2k
	/*7*/ {0,481,0,0,0,0,0,0,0,0,0,0,0,518,0,0,0,0,0,0,0,0,0,0}, // gray chroma cr 4k
	/*8*/ {0,481,0,0,0,0,0,0,0,0,0,0,0,518,0,0,0,0,0,0,0,0,0,0},

};


unsigned short DynamicOptimizeMEMC_62_y[][32]=   //Art of Flight 18:27
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,1,7,8,17,18,30,36,30,33,63,72,67,122,124,129,136,64,23,6,1,0,0},   // 2k
	/*1*/ {0,0,0,0,0,0,0,0,1,1,1,1,8,7,9,17,26,24,28,52,56,79,212,133,120,105,56,37,8,7,0,0},   //
	/*2*/ {0,0,0,0,0,0,0,0,0,0,1,7,10,11,15,27,33,29,32,62,73,67,133,131,137,132,59,21,7,2,0,0},   //  4k
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,12,27,23,24,46,47,89,253,147,107,89,52,36,7,6,0,0},   //
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,12,27,23,24,46,47,89,253,147,107,89,52,36,7,6,0,0},   //
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,12,27,23,24,46,47,89,253,147,107,89,52,36,7,6,0,0},   //
 	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,12,27,23,24,46,47,89,253,147,107,89,52,36,7,6,0,0},   //
 	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,12,27,23,24,46,47,89,253,147,107,89,52,36,7,6,0,0},   //
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,12,27,23,24,46,47,89,253,147,107,89,52,36,7,6,0,0},   //

};
unsigned short DynamicOptimizeMEMC_62_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,5,3,22,63,21,42,19,142,105,392,173,4,2,0,0,0,0,0},    // 2k
	/*1*/ {0,0,0,0,0,0,28,10,22,56,16,32,15,123,102,441,140,8,0,0,0,0,0,0},  //
	/*2*/ {0,0,0,0,0,0,9,2,21,71,7,47,8,164,112,398,148,4,3,0,0,0,0,0},   //  4k
	/*3*/ {0,0,0,0,0,0,20,5,27,58,10,37,8,115,113,481,113,4,0,0,0,0,0,0},  //
	/*4*/ {0,0,0,0,0,0,20,5,27,58,10,37,8,115,113,481,113,4,0,0,0,0,0,0},  //
	/*5*/ {0,0,0,0,0,0,20,5,27,58,10,37,8,115,113,481,113,4,0,0,0,0,0,0},  //
	/*6*/ {0,0,0,0,0,0,20,5,27,58,10,37,8,115,113,481,113,4,0,0,0,0,0,0},  //
	/*7*/ {0,0,0,0,0,0,20,5,27,58,10,37,8,115,113,481,113,4,0,0,0,0,0,0},  //
	/*8*/ {0,0,0,0,0,0,20,5,27,58,10,37,8,115,113,481,113,4,0,0,0,0,0,0},  //

};

unsigned short DynamicOptimizeMEMC_63_y[][32]=   //SAMSARA 13:28
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,17,600,51,89,29,24,31,40,54,55,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   // 2k
	/*1*/ {0,16,599,3,32,65,43,28,16,23,47,45,33,31,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {0,2,408,138,54,9,5,24,27,26,36,12,8,15,24,37,37,36,29,18,12,8,5,4,3,2,3,3,3,0,0,0},   //
	/*3*/ {0,2,278,52,94,115,68,25,3,2,7,25,38,37,15,14,15,22,51,55,21,14,12,9,5,2,3,2,1,0,0,0},   //
	/*4*/ {0,0,646,41,27,5,15,40,61,97,62,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //  4k
	/*5*/ {0,0,586,29,7,17,23,36,24,10,13,23,54,63,44,47,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
 	/*6*/ {0,0,337,134,106,39,10,14,18,25,28,12,6,6,4,9,25,54,49,24,16,17,16,13,7,5,6,4,3,0,0,0},   //
 	/*7*/ {0,0,373,93,110,69,22,3,4,5,14,22,26,20,18,23,49,87,42,6,2,0,0,0,0,0,0,0,0,0,0,0},   //
	/*8*/ {0,0,373,93,110,69,22,3,4,5,14,22,26,20,18,23,49,87,42,6,2,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_63_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,336,333,324,5,0,0,0,0,0},    // 2k
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,80,283,245,381,8,0,0,0,0,0},  //
	/*2*/ {0,0,0,0,0,0,0,0,2,0,0,1,4,54,264,181,220,266,2,0,0,0,0,0},   //
	/*3*/ {0,0,0,0,0,0,0,0,1,0,0,0,2,79,303,109,444,56,0,0,0,0,0,0},  //
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,494,111,376,17,0,0,0,0,0},  // 4k
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,250,239,112,383,13,0,0,0,0,0},  //
	/*6*/ {0,0,0,0,0,0,0,0,2,0,0,1,7,94,252,143,376,117,2,0,0,0,0,0},  //
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,2,350,100,409,133,2,0,0,0,0,0},  //
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,2,350,100,409,133,2,0,0,0,0,0},  //

};
unsigned short DynamicOptimizeMEMC_64_y[][32]=   //SAMSARA 50:50
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,254,0,3,5,8,10,15,21,21,28,31,26,25,30,31,35,37,44,84,78,143,56,1,0,0,0,0,0,0,0},   // 2k
	/*1*/ {0,2,254,1,5,9,21,18,12,17,24,27,31,29,28,33,37,36,39,50,78,88,98,48,1,0,0,0,0,0,0,0},   //
	/*2*/ {0,2,254,1,7,7,8,10,12,21,20,25,29,27,28,32,33,35,34,41,81,77,150,53,1,0,0,0,0,0,0,0},   //
	/*3*/ {0,2,256,3,5,11,14,11,12,17,33,46,34,32,33,39,39,35,37,47,73,77,90,38,2,0,0,0,1,0,0,0},   //
	/*4*/ {0,0,257,3,6,6,13,16,13,15,32,41,35,33,29,38,39,40,36,46,82,72,95,39,1,0,0,0,0,0,0,0},   //  4k
	/*5*/ {0,0,255,1,4,6,13,12,11,17,23,29,29,27,28,35,44,43,44,51,74,85,86,66,4,0,0,0,1,0,0,0},   //
 	/*6*/ {0,0,259,3,6,11,19,14,13,18,31,38,38,32,33,35,34,39,41,43,73,67,108,32,1,0,0,0,0,0,0,0},   //
 	/*7*/ {0,0,259,3,8,12,11,9,10,16,33,40,29,30,31,38,43,35,38,41,76,81,99,44,1,0,0,0,0,0,0,0},   //
	/*8*/ {0,0,259,3,8,12,11,9,10,16,33,40,29,30,31,38,43,35,38,41,76,81,99,44,1,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_64_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {2,4,15,31,44,14,7,7,18,19,6,7,14,494,229,49,17,6,1,0,0,0,0,1},    // 2k
	/*1*/ {3,5,22,114,52,5,2,2,12,14,6,8,9,441,226,38,17,4,2,1,1,1,1,2},  //
	/*2*/ {3,4,16,33,42,12,5,6,16,16,6,6,11,495,230,59,21,5,1,0,0,0,0,1},   //
	/*3*/ {3,4,20,96,43,5,2,1,10,9,6,13,13,390,252,82,26,4,2,1,1,1,1,2},  //
	/*4*/ {3,5,22,92,48,7,2,3,13,14,7,12,14,436,220,65,16,3,2,1,1,1,1,2},  // 4k
	/*5*/ {3,4,18,57,59,13,3,3,13,14,6,9,20,463,228,48,17,5,2,0,0,0,1,2},  //
	/*6*/ {3,4,19,55,57,10,6,10,19,19,12,11,18,433,226,55,19,5,2,1,1,1,1,2},  //
	/*7*/ {3,4,19,77,54,6,2,2,4,5,5,11,22,432,236,74,22,4,2,1,1,0,1,1},  //
	/*8*/ {3,4,19,77,54,6,2,2,4,5,5,11,22,432,236,74,22,4,2,1,1,0,1,1},  //

};

unsigned short DynamicOptimizeMEMC_65_y[][32]=   //SAMSARA 53:25
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,5,272,14,11,9,6,9,14,23,39,48,56,59,58,56,50,46,43,39,36,33,23,21,13,1,0,0,3,0,0,0},   // 2k
	/*1*/ {0,4,270,13,11,8,7,9,16,23,31,40,47,58,62,52,53,49,42,36,34,33,28,25,20,10,0,0,2,0,0,0},   //
	/*2*/ {0,4,269,11,8,6,6,8,10,16,24,32,50,67,60,55,58,48,39,36,40,39,36,26,19,12,1,0,5,0,0,0},   //
	/*3*/ {0,5,269,9,8,6,6,8,13,15,20,31,45,60,57,50,54,42,41,39,43,47,41,36,25,12,3,0,2,0,0,0},   //
	/*4*/ {0,0,275,13,10,9,7,9,14,23,40,50,57,60,59,56,50,46,43,40,36,32,23,21,12,0,0,0,3,0,0,0},   //  4k
	/*5*/ {0,0,275,12,11,9,7,9,17,24,32,42,48,58,61,51,52,47,42,37,34,34,28,25,20,9,0,0,3,0,0,0},   //
 	/*6*/ {0,0,272,10,8,6,6,8,10,16,24,35,51,66,59,53,54,46,39,39,42,41,37,27,19,12,2,0,4,0,0,0},   //
 	/*7*/ {0,0,273,10,7,6,6,8,13,16,19,27,42,65,52,51,52,40,41,40,43,48,43,39,28,12,3,0,2,0,0,0},   //
	/*8*/ {0,0,273,10,7,6,6,8,13,16,19,27,42,65,52,51,52,40,41,40,43,48,43,39,28,12,3,0,2,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_65_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,1,3,12,25,34,167,259,151,85,66,69,73,33,7,2,1,0,0,0,0,0,0},    // 2k
	/*1*/ {0,0,1,3,13,26,33,194,280,159,80,53,43,64,31,6,2,1,0,0,0,0,0,0},  //
	/*2*/ {0,0,1,4,17,30,38,196,307,160,67,40,43,55,25,5,2,1,0,0,0,0,0,0},   //
	/*3*/ {0,0,2,5,22,34,55,205,296,158,64,34,43,39,23,6,2,1,0,0,0,0,0,0},  //
	/*4*/ {0,0,2,3,10,25,35,172,263,150,87,66,73,68,27,5,2,0,0,0,0,0,0,0},  // 4k
	/*5*/ {0,0,1,4,11,26,36,199,274,159,84,53,46,63,27,4,1,1,0,0,0,0,0,0},  //
	/*6*/ {0,0,2,3,13,31,42,187,301,173,74,41,42,51,23,5,1,0,0,0,0,0,0,0},  //
	/*7*/ {0,0,2,4,18,36,56,208,291,165,67,37,44,32,22,5,1,0,0,0,0,0,0,0},  //
	/*8*/ {0,0,2,4,18,36,56,208,291,165,67,37,44,32,22,5,1,0,0,0,0,0,0,0},  //

};

unsigned short DynamicOptimizeMEMC_66_y[][32]=   //SAMSARA 1:23:15
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,426,59,36,34,35,34,38,49,55,43,32,31,26,21,19,18,10,5,4,3,3,1,0,0,0,0,1,0,0,0},   // 2k
	/*1*/ {0,2,406,63,43,36,38,37,42,53,60,45,35,33,25,17,12,11,8,5,4,3,2,1,1,1,1,0,2,0,0,0},   //
	/*2*/ {0,4,435,37,45,40,41,37,44,56,58,37,28,26,20,16,14,13,10,7,5,4,3,1,1,0,0,0,1,0,0,0},   //
	/*3*/ {0,0,429,58,36,35,36,34,39,50,56,42,32,31,26,21,19,17,10,5,4,3,3,1,0,0,0,0,1,0,0,0},   // 4k
	/*4*/ {0,0,410,62,43,37,38,37,42,53,60,45,35,33,24,16,12,11,8,5,4,3,2,1,1,1,1,0,2,0,0,0},   //
	/*5*/ {0,0,441,37,44,42,41,38,45,56,59,37,28,26,20,16,13,13,10,7,5,4,3,1,0,0,0,0,1,0,0,0},   //
 	/*6*/ {0,0,441,37,44,42,41,38,45,56,59,37,28,26,20,16,13,13,10,7,5,4,3,1,0,0,0,0,1,0,0,0},   //
 	/*7*/ {0,0,441,37,44,42,41,38,45,56,59,37,28,26,20,16,13,13,10,7,5,4,3,1,0,0,0,0,1,0,0,0},   //
	/*8*/ {0,0,441,37,44,42,41,38,45,56,59,37,28,26,20,16,13,13,10,7,5,4,3,1,0,0,0,0,1,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_66_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,216,120,265,165,92,84,30,7,4,3,1,0,0,1,0,0,0,0,0,0,0,0},    // 2k
	/*1*/ {0,1,191,112,304,171,99,61,26,8,5,3,2,1,3,2,0,0,0,0,0,0,0,0},  //
	/*2*/ {1,2,229,116,292,159,77,57,29,10,6,4,3,2,2,2,0,0,0,0,0,0,0,0},   //
	/*3*/ {0,1,217,113,251,180,95,86,31,7,4,3,1,0,0,1,0,0,0,0,0,0,0,0},  //4k
	/*4*/ {0,1,190,107,288,185,102,64,28,8,5,4,2,1,3,2,0,0,0,0,0,0,0,0},  //
	/*5*/ {0,1,227,110,273,179,80,60,31,10,6,4,2,1,2,2,0,0,0,0,0,0,0,0},  //
	/*6*/ {0,1,227,110,273,179,80,60,31,10,6,4,2,1,2,2,0,0,0,0,0,0,0,0},  //
	/*7*/ {0,1,227,110,273,179,80,60,31,10,6,4,2,1,2,2,0,0,0,0,0,0,0,0},  //
	/*8*/ {0,1,227,110,273,179,80,60,31,10,6,4,2,1,2,2,0,0,0,0,0,0,0,0},  //

};
unsigned short DynamicOptimizeMEMC_67_y[][32]=   //sony GLEE - Ride Wit Me #3
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,88,125,141,85,81,99,92,57,41,34,29,23,22,16,14,14,13,5,3,2,1,1,0,0,0,0,1,0,0,0},   // 2k
	/*1*/ {0,0,61,109,141,87,80,77,77,78,55,48,45,31,28,21,13,8,9,8,5,3,1,0,0,0,0,0,1,1,0,0},   //
	/*2*/ {0,0,55,91,126,90,69,66,66,72,70,70,72,37,27,20,24,7,6,6,5,4,1,0,0,0,0,0,0,1,0,0},  //
	/*3*/ {0,0,58,108,186,111,86,87,56,58,67,45,36,29,20,13,10,6,4,3,3,1,0,0,0,0,0,0,0,0,0,0},    //
	/*4*/ {0,0,62,114,193,142,95,67,49,44,43,30,26,20,14,14,34,31,4,4,2,1,0,0,0,0,0,0,0,0,0,0},    //
  	/*5*/ {0,0,66,106,173,147,93,60,54,39,34,26,22,20,16,18,38,31,8,8,8,7,5,2,2,2,1,0,0,0,0,0},    //
  	/*6*/ {0,0,44,106,147,129,106,80,61,43,39,33,27,21,18,26,28,18,10,10,9,10,8,7,5,3,1,0,0,0,0,0},    //
	/*7*/ {0,0,44,106,147,129,106,80,61,43,39,33,27,21,18,26,28,18,10,10,9,10,8,7,5,3,1,0,0,0,0,0},    //
	/*8*/ {0,0,44,106,147,129,106,80,61,43,39,33,27,21,18,26,28,18,10,10,9,10,8,7,5,3,1,0,0,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_67_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {50,180,272,196,91,37,11,12,14,23,8,5,5,7,9,13,12,6,3,3,3,4,8,15},  //  2k
	/*1*/ {52,168,248,229,118,21,9,9,12,16,5,4,5,7,9,13,11,5,5,5,4,4,8,20},  //
	/*2*/ {51,164,208,277,145,20,9,8,8,8,4,4,4,6,7,9,8,5,4,4,3,4,7,20}, //
	/*3*/ {42,196,296,182,67,35,8,11,10,6,6,7,8,9,9,11,11,10,6,8,7,12,14,20},  //
	/*4*/ {23,116,282,203,88,43,16,16,27,31,19,9,6,5,5,6,7,9,7,16,18,12,11,12},  //
	/*5*/ {22,105,276,162,93,57,18,17,23,31,14,6,5,5,7,13,12,17,20,20,20,15,16,14},  //
	/*6*/ {19,76,264,175,107,90,25,24,27,30,11,4,3,3,5,11,8,13,21,16,12,12,16,16},  //
	/*7*/ {19,76,264,175,107,90,25,24,27,30,11,4,3,3,5,11,8,13,21,16,12,12,16,16},  //
	/*8*/ {19,76,264,175,107,90,25,24,27,30,11,4,3,3,5,11,8,13,21,16,12,12,16,16},  //

};

unsigned short DynamicOptimizeMEMC_68_y[][32]=   //ULTRAVIOLET  02:18
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,18,763,9,7,39,9,9,5,3,8,12,15,16,12,16,17,26,4,1,1,0,0,0,0,0,0,0,0,0,0,0},   // 2k
	/*1*/ {3,36,333,26,14,8,18,16,8,3,3,6,35,46,60,44,38,49,81,57,19,17,12,8,19,19,7,1,0,0,0,0},   //
	/*2*/ {7,44,329,54,39,16,13,15,15,8,8,6,10,7,14,43,19,10,5,8,28,53,41,35,43,48,56,11,1,0,0,0},  //
	/*3*/ {7,47,549,47,25,12,17,18,24,13,7,8,14,18,17,24,11,14,11,7,6,9,6,12,19,13,13,12,3,1,0,0},    //
	/*4*/ {0,13,766,10,8,40,9,9,5,3,8,13,15,16,12,16,17,24,4,1,1,0,0,0,0,0,0,0,0,0,0,0},    //   4k
  	/*5*/ {0,27,338,29,16,9,20,16,7,3,3,7,36,47,61,42,38,49,82,56,19,17,11,7,19,19,7,0,0,0,0,0},    //
  	/*6*/ {2,40,360,56,46,24,18,18,12,7,16,8,11,9,19,21,8,4,5,7,18,39,26,43,57,48,54,9,0,0,0,0},    //
	/*7*/ {2,34,546,43,39,22,19,22,23,19,6,6,10,24,29,14,9,16,7,10,10,8,9,14,11,11,12,9,2,0,0,0},    //
	/*8*/ {2,34,546,43,39,22,19,22,23,19,6,6,10,24,29,14,9,16,7,10,10,8,9,14,11,11,12,9,2,0,0,0},    //

};
unsigned short DynamicOptimizeMEMC_68_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,1,2,4,3,12,6,6,9,14,70,9,20,340,402,84,3,1,0,0,0,0,0},  //  2k
	/*1*/ {1,4,3,7,8,3,5,4,12,56,159,19,8,12,509,130,29,5,8,2,3,1,1,1},  //
	/*2*/ {2,11,9,39,58,42,31,29,61,145,187,49,11,19,110,89,60,13,8,3,5,3,3,2}, //
	/*3*/ {6,19,19,110,185,141,109,26,15,16,5,7,3,16,12,145,66,32,30,7,6,5,4,5},  //
	/*4*/ {0,1,1,4,6,5,19,8,9,13,15,71,9,31,340,410,43,2,2,0,0,0,0,0},  //   4k
	/*5*/ {1,4,4,7,8,3,7,5,13,59,157,20,7,19,507,125,21,3,9,2,3,1,1,1},  //
	/*6*/ {3,16,10,55,72,63,36,24,50,149,160,48,10,25,67,107,51,12,14,4,4,4,2,2},  //
	/*7*/ {4,16,19,83,205,114,87,32,15,29,8,9,4,52,22,159,67,17,25,5,4,4,4,4},  //
	/*8*/ {4,16,19,83,205,114,87,32,15,29,8,9,4,52,22,159,67,17,25,5,4,4,4,4},  //

};

unsigned short DynamicOptimizeMEMC_69_y[][32]=  //Art of Flight 46:20
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,3,23,20,33,37,44,45,45,48,59,49,40,50,62,59,35,19,14,9,8,11,16,18,27,32,32,48,73,26,0,0},   // 2k Art of Flight 46:20
	/*1*/ {0,2,21,18,31,36,45,46,47,51,59,51,41,48,62,61,36,19,15,7,8,11,16,18,27,31,33,49,74,24,0,0},   // 4k Art of Flight 46:20
	/*2*/ {0,2,21,18,31,36,45,46,47,51,59,51,41,48,62,61,36,19,15,7,8,11,16,18,27,31,33,49,74,24,0,0},   //
	/*3*/ {0,2,21,18,31,36,45,46,47,51,59,51,41,48,62,61,36,19,15,7,8,11,16,18,27,31,33,49,74,24,0,0},   //
	/*4*/ {0,2,21,18,31,36,45,46,47,51,59,51,41,48,62,61,36,19,15,7,8,11,16,18,27,31,33,49,74,24,0,0},   //
  	/*5*/ {0,2,21,18,31,36,45,46,47,51,59,51,41,48,62,61,36,19,15,7,8,11,16,18,27,31,33,49,74,24,0,0},   //
  	/*6*/ {0,2,21,18,31,36,45,46,47,51,59,51,41,48,62,61,36,19,15,7,8,11,16,18,27,31,33,49,74,24,0,0},   //
	/*7*/ {0,2,21,18,31,36,45,46,47,51,59,51,41,48,62,61,36,19,15,7,8,11,16,18,27,31,33,49,74,24,0,0},   //
	/*8*/ {0,2,21,18,31,36,45,46,47,51,59,51,41,48,62,61,36,19,15,7,8,11,16,18,27,31,33,49,74,24,0,0},   //

};
unsigned short DynamicOptimizeMEMC_69_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,4,8,13,17,19,14,17,19,16,34,20,84,265,372,73,9,3,1,0,0,0,0},  //  2k
	/*1*/ {0,1,4,9,11,14,19,11,15,18,16,31,13,75,277,375,80,10,4,1,1,0,0,0},  // 4k
	/*2*/ {0,1,4,9,11,14,19,11,15,18,16,31,13,75,277,375,80,10,4,1,1,0,0,0},  //
	/*3*/ {0,1,4,9,11,14,19,11,15,18,16,31,13,75,277,375,80,10,4,1,1,0,0,0},  //
	/*4*/ {0,1,4,9,11,14,19,11,15,18,16,31,13,75,277,375,80,10,4,1,1,0,0,0},  //
	/*5*/ {0,1,4,9,11,14,19,11,15,18,16,31,13,75,277,375,80,10,4,1,1,0,0,0},  //
	/*6*/ {0,1,4,9,11,14,19,11,15,18,16,31,13,75,277,375,80,10,4,1,1,0,0,0},  //
	/*7*/ {0,1,4,9,11,14,19,11,15,18,16,31,13,75,277,375,80,10,4,1,1,0,0,0},  //
	/*8*/ {0,1,4,9,11,14,19,11,15,18,16,31,13,75,277,375,80,10,4,1,1,0,0,0},  //

};
unsigned short DynamicOptimizeMEMC_70_y[][32]=  //Art of Flight 50:49
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,30,24,22,17,14,11,10,8,9,11,19,29,34,27,29,33,37,39,51,72,89,74,71,79,54,41,32,22,0,0},   // 2k Art of Flight 50:49
	/*1*/ {0,0,17,15,17,18,13,12,12,12,14,15,24,27,38,39,44,47,45,44,49,68,67,68,79,79,48,32,28,17,0,0},   //
	/*2*/ {0,0,8,10,11,18,11,11,11,11,12,14,19,24,27,33,40,44,52,57,58,66,87,81,67,79,59,47,22,4,0,0},  //
	/*3*/ {0,3,34,23,21,17,14,11,10,9,10,12,19,30,35,28,29,34,37,38,50,68,84,70,71,79,53,40,30,24,0,0},  //  4k Art of Flight 50:49
	/*4*/ {0,1,14,12,12,11,10,10,10,11,12,15,22,27,29,36,47,51,51,53,62,60,67,78,86,59,48,39,33,19,0,0},  //
  	/*5*/ {0,0,5,8,11,13,14,13,11,12,14,16,18,22,25,31,36,36,35,40,53,71,103,127,130,89,42,10,1,0,0,0},  //
  	/*6*/ {0,0,5,8,11,13,14,13,11,12,14,16,18,22,25,31,36,36,35,40,53,71,103,127,130,89,42,10,1,0,0,0},  //
	/*7*/ {0,0,5,8,11,13,14,13,11,12,14,16,18,22,25,31,36,36,35,40,53,71,103,127,130,89,42,10,1,0,0,0},  //
	/*8*/ {0,0,5,8,11,13,14,13,11,12,14,16,18,22,25,31,36,36,35,40,53,71,103,127,130,89,42,10,1,0,0,0},  //

};
unsigned short DynamicOptimizeMEMC_70_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5,14,13,34,62,17,9,3,2,2,2,2,4,16,22,121,550,53,33,8,6,4,2,3},  //  2k
	/*1*/ {3,7,8,35,125,28,12,4,3,3,3,3,3,29,36,114,447,53,47,13,4,2,2,2},  //
	/*2*/ {5,13,11,37,111,21,20,5,5,10,4,4,3,69,43,154,348,57,40,13,10,2,1,1}, //
	/*3*/ {6,18,14,34,65,19,12,3,3,3,2,3,3,20,29,130,504,58,32,11,7,5,4,5}, //  4k
	/*4*/ {4,7,7,30,121,29,20,4,3,7,3,4,4,55,53,141,381,38,52,14,4,2,2,2}, //
	/*5*/ {8,22,15,46,96,20,50,9,18,27,7,4,2,125,33,178,184,49,64,15,6,7,2,3}, //
	/*6*/ {8,22,15,46,96,20,50,9,18,27,7,4,2,125,33,178,184,49,64,15,6,7,2,3}, //
	/*7*/ {8,22,15,46,96,20,50,9,18,27,7,4,2,125,33,178,184,49,64,15,6,7,2,3}, //
	/*8*/ {8,22,15,46,96,20,50,9,18,27,7,4,2,125,33,178,184,49,64,15,6,7,2,3}, //

};
unsigned short DynamicOptimizeMEMC_71_y[][32]=  //Art of Flight 52:27
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,12,9,10,40,180,49,19,15,21,41,14,16,34,28,25,24,24,18,15,17,21,29,49,130,117,24,4,0,0,0},   // 2k Art of Flight 52:27
	/*1*/ {0,1,7,7,9,26,195,83,16,9,10,13,12,16,29,27,25,24,22,17,15,18,23,32,57,158,103,26,5,0,0,0},   //
	/*2*/ {0,0,5,10,5,14,131,80,15,9,11,24,53,27,26,25,25,22,21,19,18,22,31,49,82,137,96,24,3,0,0,0},  //
	/*3*/ {0,1,11,7,9,40,178,50,19,15,20,39,14,16,35,29,25,24,23,18,16,17,22,32,54,142,107,20,3,0,0,0},  //  4k Art of Flight 52:27
	/*4*/ {0,1,7,5,6,27,196,80,16,9,11,13,12,16,29,27,26,24,22,18,16,18,24,34,60,161,100,22,3,0,0,0},  //
  	/*5*/ {0,0,4,4,6,15,102,56,14,11,13,81,83,28,30,27,26,23,22,19,19,23,34,54,81,117,74,18,1,0,0,0},  //
  	/*6*/ {0,0,4,4,6,15,102,56,14,11,13,81,83,28,30,27,26,23,22,19,19,23,34,54,81,117,74,18,1,0,0,0},  //
	/*7*/ {0,0,4,4,6,15,102,56,14,11,13,81,83,28,30,27,26,23,22,19,19,23,34,54,81,117,74,18,1,0,0,0},  //
	/*8*/ {0,0,4,4,6,15,102,56,14,11,13,81,83,28,30,27,26,23,22,19,19,23,34,54,81,117,74,18,1,0,0,0},  //

};
unsigned short DynamicOptimizeMEMC_71_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,2,6,11,12,12,14,27,34,153,164,496,60,2,0,0,0,0,0,0},  //  2k
	/*1*/ {0,0,0,0,0,3,6,10,11,11,11,24,28,149,204,506,27,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,0,0,1,2,4,8,13,12,12,24,28,167,238,440,44,0,0,0,0,0,0,0}, //
	/*3*/ {0,0,0,0,0,2,7,12,14,14,15,39,32,160,150,483,62,2,0,0,0,0,0,0}, // 4k
	/*4*/ {0,0,0,0,1,4,7,11,11,11,11,27,21,146,196,509,38,0,0,0,0,0,0,0}, //
	/*5*/ {0,0,0,0,2,3,6,9,12,13,14,34,26,151,198,446,77,0,0,0,0,0,0,0}, //
	/*6*/ {0,0,0,0,2,3,6,9,12,13,14,34,26,151,198,446,77,0,0,0,0,0,0,0}, //
	/*7*/ {0,0,0,0,2,3,6,9,12,13,14,34,26,151,198,446,77,0,0,0,0,0,0,0}, //
	/*8*/ {0,0,0,0,2,3,6,9,12,13,14,34,26,151,198,446,77,0,0,0,0,0,0,0}, //

};

unsigned short DynamicOptimizeMEMC_72_y[][32]=  //Art of Flight 59:50
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,76,94,181,32,8,6,3,3,29,21,18,19,24,57,66,44,31,24,21,23,28,30,38,41,32,20,10,6,0,0},   // 2k
	/*1*/ {0,1,68,81,119,35,18,15,15,18,96,54,51,49,47,49,50,39,29,22,18,16,16,15,15,14,13,11,7,3,0,0},   //
	/*2*/ {0,2,51,77,97,47,31,23,25,54,132,62,53,43,35,30,27,24,24,18,16,16,16,16,14,14,13,12,10,5,0,0},  //
	/*3*/ {0,1,24,57,84,55,34,23,25,87,149,51,44,33,27,24,23,23,22,19,18,19,20,22,22,22,20,17,13,7,0,0},  //
	/*4*/ {0,0,71,86,153,31,10,9,7,8,58,31,31,33,36,51,68,48,34,26,23,25,28,28,28,26,18,11,4,2,0,0},  //  4k
  	/*5*/ {0,1,53,85,103,44,26,19,18,32,111,66,63,56,46,40,33,28,27,18,16,15,15,14,13,13,12,10,6,2,0,0},  //
  	/*6*/ {0,1,34,66,88,47,30,21,24,76,135,56,49,40,33,28,25,24,24,20,19,19,19,19,19,18,17,16,12,4,0,0},  //
	/*7*/ {0,0,13,46,74,57,35,23,22,65,169,48,42,33,28,25,25,26,25,22,21,22,23,24,25,26,24,20,14,7,0,0},  //
	/*8*/ {0,0,13,46,74,57,35,23,22,65,169,48,42,33,28,25,25,26,25,22,21,22,23,24,25,26,24,20,14,7,0,0},  //

};
unsigned short DynamicOptimizeMEMC_72_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {23,57,29,25,20,6,5,4,5,5,6,8,9,19,36,132,361,36,25,38,49,25,25,40},  //  2k
	/*1*/ {15,40,31,40,42,14,13,6,6,5,5,8,9,13,17,90,457,41,19,26,29,18,17,27},  //
	/*2*/ {21,41,46,61,73,33,21,12,9,6,6,7,8,10,15,102,388,38,11,12,14,16,15,23}, //
	/*3*/ {17,38,47,77,102,47,32,20,15,11,9,11,11,15,24,108,318,30,8,6,8,9,10,16}, //
	/*4*/ {13,53,26,33,30,10,6,4,5,5,4,6,6,10,19,104,450,39,22,32,47,19,16,30}, //   4k
	/*5*/ {17,44,38,52,67,24,14,7,6,5,4,6,6,9,13,87,417,51,17,20,21,19,16,26}, //
	/*6*/ {18,45,46,68,94,44,27,14,9,6,5,7,7,11,17,101,342,42,14,10,12,13,12,22}, //
	/*7*/ {16,46,56,86,108,47,32,15,11,8,6,8,8,16,22,92,319,32,12,6,7,9,9,17}, //
	/*8*/ {16,46,56,86,108,47,32,15,11,8,6,8,8,16,22,92,319,32,12,6,7,9,9,17}, //

};

unsigned short DynamicOptimizeMEMC_73_y[][32]=  //Art of Flight 59:55
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,15,29,44,52,59,63,55,48,51,54,61,62,55,36,24,20,19,20,21,26,29,27,31,58,14,8,4,0,0,0},   // 2k Art of Flight 59:55
	/*1*/ {0,0,11,25,41,58,43,35,32,33,41,49,55,54,42,30,23,19,20,22,25,36,55,57,54,69,44,8,4,0,0,0},   //
	/*2*/ {0,1,17,32,44,49,59,64,53,50,51,54,60,60,54,36,24,21,21,21,22,26,28,27,30,57,13,8,3,0,0,0},   //   4k  Art of Flight 59:55
	/*3*/ {0,0,12,22,39,51,52,43,42,38,45,54,61,58,48,32,23,19,20,22,23,30,44,51,46,67,32,7,5,0,0,0},   //
	/*4*/ {0,0,12,22,39,51,52,43,42,38,45,54,61,58,48,32,23,19,20,22,23,30,44,51,46,67,32,7,5,0,0,0},   //
  	/*5*/ {0,0,12,22,39,51,52,43,42,38,45,54,61,58,48,32,23,19,20,22,23,30,44,51,46,67,32,7,5,0,0,0},   //
  	/*6*/ {0,0,12,22,39,51,52,43,42,38,45,54,61,58,48,32,23,19,20,22,23,30,44,51,46,67,32,7,5,0,0,0},   //
	/*7*/ {0,0,12,22,39,51,52,43,42,38,45,54,61,58,48,32,23,19,20,22,23,30,44,51,46,67,32,7,5,0,0,0},   //
	/*8*/ {0,0,12,22,39,51,52,43,42,38,45,54,61,58,48,32,23,19,20,22,23,30,44,51,46,67,32,7,5,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_73_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {40,60,76,188,167,52,61,28,16,6,4,5,4,13,11,22,25,28,42,31,26,23,25,33},  //  2k
	/*1*/ {26,31,65,191,150,101,82,32,20,8,3,4,3,6,10,31,36,31,43,29,22,19,20,25},  //
	/*2*/ {38,69,81,193,155,46,68,21,19,7,4,5,4,16,10,21,23,24,47,31,27,24,24,33},  // 4k
	/*3*/ {29,43,74,216,163,72,53,17,6,3,2,3,3,9,13,28,34,30,50,33,27,24,23,32},  //
	/*4*/ {29,43,74,216,163,72,53,17,6,3,2,3,3,9,13,28,34,30,50,33,27,24,23,32},  //
	/*5*/ {29,43,74,216,163,72,53,17,6,3,2,3,3,9,13,28,34,30,50,33,27,24,23,32},  //
	/*6*/ {29,43,74,216,163,72,53,17,6,3,2,3,3,9,13,28,34,30,50,33,27,24,23,32},  //
	/*7*/ {29,43,74,216,163,72,53,17,6,3,2,3,3,9,13,28,34,30,50,33,27,24,23,32},  //
	/*8*/ {29,43,74,216,163,72,53,17,6,3,2,3,3,9,13,28,34,30,50,33,27,24,23,32},  //

};
unsigned short DynamicOptimizeMEMC_74_y[][32]=  //Art of Flight 59:57
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,33,36,72,81,88,58,36,41,74,67,70,54,31,27,27,25,20,19,16,14,15,14,13,13,11,11,12,8,0,0},   // 2k Art of Flight 59:57
	/*1*/ {0,1,31,40,42,49,180,45,19,13,11,13,66,68,27,21,24,23,24,24,23,25,29,32,29,30,33,30,24,8,0,0},   //
	/*2*/ {0,1,32,38,75,77,89,56,35,39,68,57,67,55,33,29,29,25,21,20,17,15,17,16,15,14,12,13,14,7,0,0},   //  4k Art of Flight 59:57
	/*3*/ {0,0,23,32,46,54,174,44,19,13,11,15,73,74,26,21,24,24,25,25,25,25,29,33,30,31,29,34,23,5,0,0},   //
	/*4*/ {0,0,23,32,46,54,174,44,19,13,11,15,73,74,26,21,24,24,25,25,25,25,29,33,30,31,29,34,23,5,0,0},   //
  	/*5*/ {0,0,23,32,46,54,174,44,19,13,11,15,73,74,26,21,24,24,25,25,25,25,29,33,30,31,29,34,23,5,0,0},   //
  	/*6*/ {0,0,23,32,46,54,174,44,19,13,11,15,73,74,26,21,24,24,25,25,25,25,29,33,30,31,29,34,23,5,0,0},   //
	/*7*/ {0,0,23,32,46,54,174,44,19,13,11,15,73,74,26,21,24,24,25,25,25,25,29,33,30,31,29,34,23,5,0,0},   //
	/*8*/ {0,0,23,32,46,54,174,44,19,13,11,15,73,74,26,21,24,24,25,25,25,25,29,33,30,31,29,34,23,5,0,0},   //

};
unsigned short DynamicOptimizeMEMC_74_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {9,16,29,129,211,130,80,26,9,4,2,2,1,3,2,5,139,78,54,22,12,8,7,10},  //  2k
	/*1*/ {9,16,27,76,143,67,37,21,11,5,3,2,2,4,4,18,389,66,37,16,11,8,7,9},  //
	/*2*/ {9,20,34,133,205,125,78,27,10,5,2,1,1,4,2,6,142,67,54,23,14,9,8,10},  // 4k
	/*3*/ {8,19,31,80,163,71,37,17,9,4,2,1,1,2,2,7,364,73,39,20,14,9,7,10},  //
	/*4*/ {8,19,31,80,163,71,37,17,9,4,2,1,1,2,2,7,364,73,39,20,14,9,7,10},  //
	/*5*/ {8,19,31,80,163,71,37,17,9,4,2,1,1,2,2,7,364,73,39,20,14,9,7,10},  //
	/*6*/ {8,19,31,80,163,71,37,17,9,4,2,1,1,2,2,7,364,73,39,20,14,9,7,10},  //
	/*7*/ {8,19,31,80,163,71,37,17,9,4,2,1,1,2,2,7,364,73,39,20,14,9,7,10},  //
	/*8*/ {8,19,31,80,163,71,37,17,9,4,2,1,1,2,2,7,364,73,39,20,14,9,7,10},  //

};
unsigned short DynamicOptimizeMEMC_75_y[][32]=  //Art of Flight 01:03:18
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,1,3,7,10,12,14,13,14,15,43,84,54,64,73,55,25,14,17,21,38,34,40,64,102,109,60,0,0,0,0},   // 2k Art of Flight 01:03:18
	/*1*/ {0,0,0,1,2,4,7,9,9,9,11,11,11,28,52,56,50,25,21,23,35,44,56,90,111,104,123,98,0,0,0,0},   //
	/*2*/ {0,0,1,2,6,9,11,14,13,13,15,35,73,60,65,72,59,23,15,18,23,39,37,44,59,99,115,64,0,0,0,0},   //   4k Art of Flight 01:03:18
	/*3*/ {0,0,0,1,1,3,6,8,9,9,12,11,10,22,48,52,49,25,23,24,37,47,60,95,114,105,122,97,0,0,0,0},   //
  	/*4*/ {0,0,0,1,1,3,6,8,9,9,12,11,10,22,48,52,49,25,23,24,37,47,60,95,114,105,122,97,0,0,0,0},   //
  	/*5*/ {0,0,0,1,1,3,6,8,9,9,12,11,10,22,48,52,49,25,23,24,37,47,60,95,114,105,122,97,0,0,0,0},   //
  	/*6*/ {0,0,0,1,1,3,6,8,9,9,12,11,10,22,48,52,49,25,23,24,37,47,60,95,114,105,122,97,0,0,0,0},   //
	/*7*/ {0,0,0,1,1,3,6,8,9,9,12,11,10,22,48,52,49,25,23,24,37,47,60,95,114,105,122,97,0,0,0,0},   //
	/*8*/ {0,0,0,1,1,3,6,8,9,9,12,11,10,22,48,52,49,25,23,24,37,47,60,95,114,105,122,97,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_75_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1,2,6,7,26,36,15,5,3,3,3,3,4,144,48,134,523,12,11,3,0,0,0,0},  // 2k
	/*1*/ {2,3,14,7,22,37,25,7,6,7,6,6,7,165,56,206,383,12,14,2,0,0,0,0},  //
	/*2*/ {2,1,5,7,26,37,22,6,4,8,4,3,4,124,62,153,497,8,12,3,0,0,0,0},  //  4k
	/*3*/ {3,2,13,7,19,30,37,6,6,20,7,4,6,172,67,221,344,9,14,3,0,0,0,0},  //
	/*4*/ {3,2,13,7,19,30,37,6,6,20,7,4,6,172,67,221,344,9,14,3,0,0,0,0},  //
	/*5*/ {3,2,13,7,19,30,37,6,6,20,7,4,6,172,67,221,344,9,14,3,0,0,0,0},  //
	/*6*/ {3,2,13,7,19,30,37,6,6,20,7,4,6,172,67,221,344,9,14,3,0,0,0,0},  //
	/*7*/ {3,2,13,7,19,30,37,6,6,20,7,4,6,172,67,221,344,9,14,3,0,0,0,0},  //
	/*8*/ {3,2,13,7,19,30,37,6,6,20,7,4,6,172,67,221,344,9,14,3,0,0,0,0},  //

};

unsigned short DynamicOptimizeMEMC_76_y[][32]=  //Art of Flight 01:00:33
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,2,2,3,6,10,32,22,15,12,10,12,28,61,53,51,78,60,25,24,14,12,41,350,62,0,0,0,0},   // 2k
	/*1*/ {0,0,0,0,2,3,6,8,8,13,16,14,12,12,14,37,52,69,80,79,81,67,35,23,32,94,225,4,0,0,0,0},   //
	/*2*/ {0,0,2,4,13,16,14,11,12,16,17,18,13,14,14,29,42,36,35,50,60,55,80,43,23,95,269,2,0,0,0,0},   //
	/*3*/ {0,0,0,2,8,10,9,7,7,10,14,18,17,15,15,16,18,16,14,13,12,13,14,16,39,355,161,123,41,3,0,0},   //
  	/*4*/ {0,0,0,0,2,3,4,7,14,24,17,10,9,9,21,35,46,67,63,71,64,33,31,18,16,50,336,37,0,0,0,0},   // 4k
  	/*5*/ {0,0,1,2,6,7,7,10,16,18,25,16,10,9,9,13,37,58,59,66,83,92,103,53,23,70,191,4,0,0,0,0},   //
  	/*6*/ {0,0,2,3,13,17,11,9,11,15,17,19,13,14,14,25,32,29,30,47,53,50,74,41,26,127,292,3,0,0,0,0},   //
	/*7*/ {0,0,0,2,8,10,9,7,7,9,14,18,17,15,16,16,18,16,14,13,12,13,14,16,41,357,157,123,41,2,0,0},   //
	/*8*/ {0,0,0,2,8,10,9,7,7,9,14,18,17,15,16,16,18,16,14,13,12,13,14,16,41,357,157,123,41,2,0,0},   //

};
unsigned short DynamicOptimizeMEMC_76_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {26,96,8,14,22,12,33,3,4,6,3,2,3,135,46,116,54,23,252,42,19,43,14,11},  // 2k
	/*1*/ {25,95,9,11,18,10,26,3,2,2,1,2,2,49,18,117,90,31,274,59,37,74,17,15},  //
	/*2*/ {44,95,35,57,41,31,86,5,3,5,3,2,3,90,15,51,62,41,197,50,24,23,11,16},  //
	/*3*/ {43,93,23,37,28,14,49,4,7,41,24,6,6,109,60,63,41,26,121,81,17,48,25,22},  //
	/*4*/ {31,71,5,10,22,14,40,4,5,15,3,1,2,123,35,120,35,12,308,58,12,47,10,5},  //   4k
	/*5*/ {47,125,22,44,36,25,80,3,2,7,2,1,1,86,10,98,47,15,182,39,23,68,13,10},  //
	/*6*/ {44,75,24,70,33,33,156,7,6,14,4,2,3,130,17,45,37,21,173,40,17,19,7,8},  //
	/*7*/ {51,93,17,39,26,12,64,4,9,50,25,3,4,103,61,63,42,18,114,92,12,45,26,15},  //
	/*8*/ {51,93,17,39,26,12,64,4,9,50,25,3,4,103,61,63,42,18,114,92,12,45,26,15},  //

};

unsigned short DynamicOptimizeMEMC_77_y[][32]=  //Art of Flight 01:06:17 /01:18
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,7,41,17,25,28,28,29,33,30,31,31,35,38,56,81,96,70,18,17,19,22,30,29,50,57,21,12,13,22,0,0},   // 2k   01:06:17
	/*1*/ {0,4,30,11,14,16,22,25,30,28,31,31,32,40,73,141,123,37,17,18,23,25,20,25,33,60,33,11,11,21,0,0},   //
	/*2*/ {0,5,39,23,39,55,38,31,31,25,22,22,21,25,48,67,43,21,18,31,40,31,33,38,56,89,40,14,15,25,0,0},   //
	/*3*/ {0,4,31,14,22,27,29,29,31,28,31,35,31,34,60,85,119,60,16,17,20,24,29,31,56,62,21,11,12,16,0,0},   // 4k   01:06:17
  	/*4*/ {0,4,36,20,36,35,24,28,29,26,26,26,29,41,75,115,98,17,14,15,26,28,24,30,38,69,37,10,12,17,0,0},   //
  	/*5*/ {0,3,37,21,35,39,35,30,32,28,24,22,23,28,51,62,48,32,20,39,35,31,33,38,57,87,40,16,16,25,0,0},   //
  	/*6*/ {0,3,37,21,35,39,35,30,32,28,24,22,23,28,51,62,48,32,20,39,35,31,33,38,57,87,40,16,16,25,0,0},   //
	/*7*/ {0,3,37,21,35,39,35,30,32,28,24,22,23,28,51,62,48,32,20,39,35,31,33,38,57,87,40,16,16,25,0,0},   //
	/*8*/ {0,3,37,21,35,39,35,30,32,28,24,22,23,28,51,62,48,32,20,39,35,31,33,38,57,87,40,16,16,25,0,0},   //

};
unsigned short DynamicOptimizeMEMC_77_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {15,43,48,102,483,38,16,6,5,6,10,3,2,5,4,7,14,30,42,31,21,21,17,17},  // 2k  01:06:17
	/*1*/ {16,54,45,75,567,32,13,4,3,4,3,2,2,5,4,6,14,25,35,25,17,14,11,12},  //
	/*2*/ {21,82,76,96,304,68,27,7,5,8,32,4,2,4,4,9,23,36,66,36,24,21,16,18},  //
	/*3*/ {12,49,43,81,504,45,27,6,5,6,7,3,2,9,7,10,17,24,45,24,15,23,11,13},  //  4k  01:06:17
	/*4*/ {11,56,48,63,477,42,26,5,6,14,36,8,2,12,9,12,20,24,46,27,14,14,7,8},  //
	/*5*/ {16,85,71,93,324,78,36,7,5,6,5,2,2,7,5,13,28,33,68,30,21,25,13,14},  //
	/*6*/ {16,85,71,93,324,78,36,7,5,6,5,2,2,7,5,13,28,33,68,30,21,25,13,14},  //
	/*7*/ {16,85,71,93,324,78,36,7,5,6,5,2,2,7,5,13,28,33,68,30,21,25,13,14},  //
	/*8*/ {16,85,71,93,324,78,36,7,5,6,5,2,2,7,5,13,28,33,68,30,21,25,13,14},  //

};
unsigned short DynamicOptimizeMEMC_78_y[][32]=  //fast five_complex_1_33_42_long
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,8,233,1,0,53,239,167,61,40,31,27,26,24,19,15,10,8,7,6,6,5,3,1,0,0,0,0,0,0,0,0},   // 2k
	/*1*/ {0,5,236,1,3,105,319,128,66,28,20,18,16,13,10,7,5,3,2,2,1,0,1,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {0,4,238,1,0,58,226,148,64,46,34,29,28,25,20,16,11,9,8,8,7,6,3,1,0,0,0,0,0,0,0,0},   //  4k
	/*3*/ {0,3,238,1,82,183,202,110,51,30,23,19,13,10,7,6,4,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*4*/ {0,3,238,1,82,183,202,110,51,30,23,19,13,10,7,6,4,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*5*/ {0,3,238,1,82,183,202,110,51,30,23,19,13,10,7,6,4,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*6*/ {0,3,238,1,82,183,202,110,51,30,23,19,13,10,7,6,4,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0},   //
	/*7*/ {0,3,238,1,82,183,202,110,51,30,23,19,13,10,7,6,4,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0},   //
	/*8*/ {0,3,238,1,82,183,202,110,51,30,23,19,13,10,7,6,4,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_78_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,8,381,368,155,76,4,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  // 2k
	/*1*/ {0,0,9,427,406,121,30,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,7,307,390,177,99,8,0,1,0,0,0,4,0,0,0,0,0,0,0,0,0,0},  //  4k
	/*3*/ {0,0,8,328,506,121,29,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*4*/ {0,0,8,328,506,121,29,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*5*/ {0,0,8,328,506,121,29,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*6*/ {0,0,8,328,506,121,29,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*7*/ {0,0,8,328,506,121,29,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*8*/ {0,0,8,328,506,121,29,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //

};

unsigned short DynamicOptimizeMEMC_79_y[][32]=  //Dehalo_HOUSE_OF_FLYING_DAGGERS-00-25-45  2k
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,11,275,48,29,24,30,42,46,44,37,38,36,33,29,27,28,31,32,29,24,22,19,16,13,10,7,4,2,1,0,0},   // 2k
	/*1*/ {0,8,238,86,49,22,13,15,25,23,23,31,35,32,24,22,22,24,26,28,29,29,30,30,27,25,21,18,17,15,0,0},   //
	/*2*/ {0,10,235,44,41,29,42,49,44,25,26,32,31,29,23,16,16,15,15,16,19,22,24,24,25,21,24,23,30,35,0,0},   //
	/*3*/ {0,9,236,2,38,23,10,8,20,84,105,69,51,30,17,15,14,13,13,13,12,11,11,12,16,21,25,31,37,43,0,0},   //
  	/*4*/ {0,8,237,0,42,44,18,15,19,28,54,56,26,19,16,16,16,18,20,24,25,24,22,21,21,22,24,26,34,92,0,0},   //
  	/*5*/ {0,8,237,32,70,41,20,26,21,65,67,28,20,15,13,13,16,19,20,21,22,23,23,21,18,17,17,17,20,55,0,0},   //
  	/*6*/ {0,11,234,38,47,19,12,15,26,51,64,58,53,46,24,17,15,12,11,11,10,11,11,12,14,19,22,27,37,59,0,0},   //
	/*7*/ {0,8,238,2,30,20,11,10,13,35,69,74,37,16,13,13,14,16,20,24,29,30,30,29,30,32,32,34,37,40,0,0},   //
	/*8*/ {0,5,249,65,31,15,11,11,33,46,63,68,56,47,40,36,32,28,25,24,23,21,18,13,9,6,4,2,2,1,0,0},   //

};
unsigned short DynamicOptimizeMEMC_79_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {21,31,57,156,216,185,46,4,2,3,5,2,2,11,38,41,19,10,32,33,23,16,15,18},  // 2k
	/*1*/ {9,13,24,83,222,179,79,9,5,6,3,5,5,23,77,61,15,23,64,37,19,9,8,9},  //
	/*2*/ {7,9,15,82,196,223,115,23,7,7,4,5,5,25,48,22,13,27,65,42,25,10,6,7},  //
	/*3*/ {6,9,17,111,249,275,97,15,7,6,6,13,7,32,9,7,7,10,24,36,25,9,5,5},  //
	/*4*/ {3,5,10,62,129,293,153,14,9,11,10,29,12,40,14,6,9,18,34,39,37,44,4,3},  //
	/*5*/ {4,6,11,61,205,234,131,10,9,6,4,9,9,42,71,22,16,19,29,23,42,16,4,4},  //
	/*6*/ {3,4,10,117,295,107,97,31,15,7,6,9,7,33,46,23,12,20,56,49,29,7,3,3},  //
	/*7*/ {4,5,9,41,147,342,233,12,8,5,5,11,7,17,7,5,10,14,35,30,24,8,4,4},  //
	/*8*/ {5,8,14,73,209,396,96,7,8,8,5,14,7,39,31,13,8,8,9,11,8,4,3,4},  //

};

unsigned short DynamicOptimizeMEMC_80_y[][32]=  //Dehalo_HOUSE_OF_FLYING_DAGGERS-00-25-45  4k
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,10,273,68,30,18,15,30,46,51,43,35,31,30,27,27,29,32,33,30,27,24,20,17,14,10,6,4,2,1,0,0},   // 4k
	/*1*/ {0,7,238,71,58,24,15,16,25,17,18,35,40,30,22,20,20,23,26,29,30,31,32,31,29,26,23,19,17,15,0,0},   //
	/*2*/ {0,8,242,75,29,29,37,38,38,33,57,41,32,29,25,16,15,17,18,19,21,22,22,19,17,16,16,15,16,23,0,0},   //
	/*3*/ {0,7,238,2,36,20,10,9,23,91,97,73,52,32,18,15,13,13,11,12,10,10,10,11,15,20,25,31,39,44,0,0},   //
  	/*4*/ {0,6,239,1,45,41,19,16,16,23,69,53,30,22,19,19,18,20,21,23,23,22,20,20,19,19,20,20,29,93,0,0},   //
  	/*5*/ {0,5,240,24,74,37,20,20,15,25,49,27,20,21,22,24,26,28,29,29,29,30,30,25,22,20,18,18,22,35,0,0},   //
  	/*6*/ {0,6,239,1,23,20,11,11,15,29,64,69,56,23,16,15,15,17,20,24,28,29,30,29,30,31,32,33,37,33,0,0},   //
	/*7*/ {0,5,244,65,43,24,15,12,24,45,63,59,44,33,28,26,26,25,26,26,26,26,23,18,14,11,10,9,9,5,0,0},   //
	/*8*/ {0,5,244,65,43,24,15,12,24,45,63,59,44,33,28,26,26,25,26,26,26,26,23,18,14,11,10,9,9,5,0,0},   //

};
unsigned short DynamicOptimizeMEMC_80_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {19,29,46,122,217,191,51,4,4,8,3,3,2,18,53,50,18,10,33,34,23,16,16,17},  // 4k
	/*1*/ {8,13,20,77,199,192,90,10,6,6,3,6,3,26,72,62,15,25,69,37,21,10,8,8},  //
	/*2*/ {7,12,18,87,253,237,87,12,4,4,2,4,2,32,57,31,10,16,43,30,21,8,6,6},  //
	/*3*/ {5,9,15,111,251,273,100,16,8,7,4,14,6,33,7,6,8,11,27,35,25,9,6,5},  //
	/*4*/ {3,5,10,67,134,287,160,13,10,13,8,27,10,47,14,6,10,16,25,34,39,44,4,4},  //
	/*5*/ {7,10,18,80,209,223,136,11,11,8,5,15,10,59,44,10,13,17,30,28,23,12,6,6},  //
	/*6*/ {3,5,8,37,164,337,244,13,8,7,3,6,5,17,7,6,10,14,36,27,16,7,3,4},  //
	/*7*/ {5,7,15,72,198,363,92,12,7,7,4,18,4,46,36,15,10,19,21,15,9,4,3,4},  //
	/*8*/ {5,7,15,72,198,363,92,12,7,7,4,18,4,46,36,15,10,19,21,15,9,4,3,4},  //
};

unsigned short DynamicOptimizeMEMC_81_y[][32]=   //ULTRAVIOLET  00:40
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,6,29,0,0,0,0,8,20,28,26,23,22,16,15,15,18,19,19,23,33,53,70,61,50,68,59,88,208,6,0,0},   // 2k
	/*1*/ {0,5,31,0,0,0,2,7,32,34,25,18,20,12,16,26,45,59,45,44,50,51,47,44,60,50,43,60,157,4,0,0},   //
	/*2*/ {0,8,28,0,0,0,0,1,11,21,18,17,14,13,14,18,24,25,23,29,45,55,66,63,67,76,60,82,206,2,0,0},  //
	/*3*/ {0,8,43,9,5,6,19,75,47,28,24,24,30,56,33,35,45,63,30,11,5,4,10,21,30,46,97,128,54,0,0,0},    //
	/*4*/ {0,8,29,1,1,1,2,13,47,36,24,23,26,22,38,60,62,57,51,51,34,37,39,35,34,36,42,61,116,1,0,0},    //
	/*5*/ {0,4,31,0,0,0,0,6,10,25,17,19,15,14,14,16,19,26,28,28,42,54,61,69,67,70,59,72,217,4,0,0},    //   4k
  	/*6*/ {0,5,30,0,0,0,0,2,9,23,20,13,10,11,11,14,20,33,39,51,58,62,56,53,64,70,62,69,195,5,0,0},    //
  	/*7*/ {0,5,31,0,0,0,0,8,12,25,18,21,20,16,14,14,17,20,29,32,38,52,69,66,65,71,60,93,192,1,0,0},    //
	/*8*/ {0,6,31,0,0,0,2,7,44,37,21,24,23,18,22,49,58,49,47,46,38,45,43,37,45,43,45,65,141,1,0,0},    //


};
unsigned short DynamicOptimizeMEMC_81_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {26,30,118,108,545,72,5,11,2,0,0,0,0,0,0,0,0,0,0,1,3,12,31,23},  //  2k
	/*1*/ {41,38,98,110,555,26,0,0,0,0,0,0,0,1,6,1,0,0,0,0,11,15,54,31},  //
	/*2*/ {15,16,20,38,543,243,20,13,10,2,1,0,0,0,0,0,0,0,0,1,3,13,31,19}, //
	/*3*/ {25,52,37,88,469,89,2,1,0,0,0,0,0,1,4,11,1,1,0,0,1,24,153,28},  //
	/*4*/ {18,16,33,55,633,71,2,1,0,0,0,0,0,10,25,2,0,0,0,0,8,12,58,43},  //
	/*5*/ {22,26,89,139,537,89,4,9,2,1,0,0,0,1,0,0,0,0,0,1,2,11,32,24},  //   4k
	/*6*/ {36,36,116,117,554,49,1,0,0,0,0,0,0,0,0,0,0,0,0,0,8,12,39,19},  //
	/*7*/ {15,15,20,35,514,269,31,17,10,2,1,0,0,1,0,0,0,0,0,1,3,8,27,19},  //
	/*8*/ {17,17,32,54,609,126,5,1,1,1,0,0,0,4,15,1,0,0,0,1,11,14,48,33},  //


};

unsigned short DynamicOptimizeMEMC_82_y[][32]=   //Art of Flight  2:23
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,1,67,18,22,21,23,24,26,29,34,30,28,26,23,24,30,34,54,57,27,39,90,57,25,45,131,1,0,0,0,0},   // 2k 2:23
	/*1*/ {0,0,66,17,23,22,23,24,27,29,34,31,28,27,24,25,30,34,53,57,27,38,90,57,24,44,132,0,0,0,0,0},//  4k  2:23
	/*2*/ {0,0,66,17,23,22,23,24,27,29,34,31,28,27,24,25,30,34,53,57,27,38,90,57,24,44,132,0,0,0,0,0},//
	/*3*/ {0,0,66,17,23,22,23,24,27,29,34,31,28,27,24,25,30,34,53,57,27,38,90,57,24,44,132,0,0,0,0,0},//
	/*4*/ {0,0,66,17,23,22,23,24,27,29,34,31,28,27,24,25,30,34,53,57,27,38,90,57,24,44,132,0,0,0,0,0},//
	/*5*/ {0,0,66,17,23,22,23,24,27,29,34,31,28,27,24,25,30,34,53,57,27,38,90,57,24,44,132,0,0,0,0,0},//
  	/*6*/ {0,0,66,17,23,22,23,24,27,29,34,31,28,27,24,25,30,34,53,57,27,38,90,57,24,44,132,0,0,0,0,0},//
  	/*7*/ {0,0,66,17,23,22,23,24,27,29,34,31,28,27,24,25,30,34,53,57,27,38,90,57,24,44,132,0,0,0,0,0},//
	/*8*/ {0,0,66,17,23,22,23,24,27,29,34,31,28,27,24,25,30,34,53,57,27,38,90,57,24,44,132,0,0,0,0,0},//

};
unsigned short DynamicOptimizeMEMC_82_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {6,13,33,62,71,33,76,31,23,60,22,32,18,49,102,106,70,34,33,58,45,4,4,5},  //  2k   2:23
	/*1*/ {5,14,32,61,69,28,86,29,24,67,17,38,15,57,104,105,66,28,35,56,42,4,3,4},   // 4k  2:23
	/*2*/ {5,14,32,61,69,28,86,29,24,67,17,38,15,57,104,105,66,28,35,56,42,4,3,4},
	/*3*/ {5,14,32,61,69,28,86,29,24,67,17,38,15,57,104,105,66,28,35,56,42,4,3,4},
	/*4*/ {5,14,32,61,69,28,86,29,24,67,17,38,15,57,104,105,66,28,35,56,42,4,3,4},
	/*5*/ {5,14,32,61,69,28,86,29,24,67,17,38,15,57,104,105,66,28,35,56,42,4,3,4},
	/*6*/ {5,14,32,61,69,28,86,29,24,67,17,38,15,57,104,105,66,28,35,56,42,4,3,4},
	/*7*/ {5,14,32,61,69,28,86,29,24,67,17,38,15,57,104,105,66,28,35,56,42,4,3,4},
	/*8*/ {5,14,32,61,69,28,86,29,24,67,17,38,15,57,104,105,66,28,35,56,42,4,3,4},

};

unsigned short DynamicOptimizeMEMC_83_y[][32]=   //Art of Flight  01:18
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,3,635,74,94,67,86,19,4,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //  2k  01:18
	/*1*/ {0,1,451,181,147,56,57,69,13,5,3,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {0,1,350,275,159,47,52,52,22,14,11,3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*3*/ {0,1,820,64,59,24,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*4*/ {0,1,820,64,59,24,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*5*/ {0,1,820,64,59,24,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*6*/ {0,1,820,64,59,24,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*7*/ {0,1,820,64,59,24,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*8*/ {0,1,820,64,59,24,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_83_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4,7,7,10,11,7,11,10,20,53,66,61,60,193,62,134,158,53,27,12,8,4,4,5},  //   2k  01:18
	/*1*/ {6,14,16,26,24,10,9,5,7,24,30,26,35,152,64,154,230,81,45,10,6,3,4,6},  //
	/*2*/ {3,15,24,63,62,15,17,4,3,3,5,6,11,68,69,169,265,103,61,10,5,2,2,3},  //
	/*3*/ {3,6,5,7,8,4,10,8,16,47,63,67,70,238,78,129,119,45,33,12,8,4,4,4},  //
	/*4*/ {3,6,5,7,8,4,10,8,16,47,63,67,70,238,78,129,119,45,33,12,8,4,4,4},  //
	/*5*/ {3,6,5,7,8,4,10,8,16,47,63,67,70,238,78,129,119,45,33,12,8,4,4,4},  //
	/*6*/ {3,6,5,7,8,4,10,8,16,47,63,67,70,238,78,129,119,45,33,12,8,4,4,4},  //
	/*7*/ {3,6,5,7,8,4,10,8,16,47,63,67,70,238,78,129,119,45,33,12,8,4,4,4},  //
	/*8*/ {3,6,5,7,8,4,10,8,16,47,63,67,70,238,78,129,119,45,33,12,8,4,4,4},  //

};

unsigned short DynamicOptimizeMEMC_84_y[][32]=   //MI3_roof 43s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,7,292,51,48,38,36,34,40,41,36,31,25,21,20,18,15,13,13,20,36,35,29,22,17,32,17,1,0,0,0,0},   //  2k
	/*1*/ {0,8,357,61,74,70,57,47,39,37,33,26,22,22,19,20,13,8,4,4,4,5,6,7,7,7,5,7,14,0,0,0},   //
	/*2*/ {0,11,428,67,66,43,50,54,48,39,33,22,16,14,12,11,9,7,6,5,5,5,5,4,4,3,3,11,5,0,0,0},   //
	/*3*/ {0,9,593,48,42,38,32,24,20,18,16,14,11,9,10,11,14,17,15,15,13,8,4,2,4,0,0,0,0,0,0,0},   //
	/*4*/ {0,10,399,61,48,23,28,27,25,21,16,14,14,15,17,19,15,9,7,8,8,12,20,30,40,48,34,15,2,0,0,0},   //
	/*5*/ {0,9,433,52,91,83,74,38,20,17,14,12,12,10,9,10,14,11,9,6,6,6,5,5,6,13,13,7,0,0,0,0},   //
  	/*6*/ {0,7,336,23,31,36,32,24,26,27,28,27,24,21,24,29,26,21,19,21,24,27,25,26,29,27,24,16,4,0,0,0},   //
  	/*7*/ {0,8,568,56,66,69,59,38,26,22,17,10,7,5,6,5,4,4,3,2,2,1,2,2,2,1,0,1,0,0,0,0},   //
	/*8*/ {0,8,568,56,66,69,59,38,26,22,17,10,7,5,6,5,4,4,3,2,2,1,2,2,2,1,0,1,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_84_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3,23,17,62,264,239,27,16,17,16,17,27,34,76,90,44,14,1,1,0,0,0,0,2},  //   2k
	/*1*/ {3,61,30,88,238,146,49,38,31,24,22,33,36,61,82,42,3,0,0,0,0,0,0,1},  //
	/*2*/ {11,119,77,127,219,99,34,19,15,12,13,18,22,44,81,66,3,1,1,0,0,0,1,7},  //
	/*3*/ {12,329,68,139,165,119,24,13,10,6,6,9,9,16,24,21,8,2,1,0,0,0,1,6},  //
	/*4*/ {7,101,55,132,453,96,47,20,11,7,5,7,6,7,12,9,4,0,1,1,1,2,1,4},  //
	/*5*/ {6,174,43,74,227,134,57,29,17,11,12,18,20,41,59,52,8,2,1,0,0,0,0,2},  //
	/*6*/ {3,66,31,104,269,175,40,16,10,7,5,8,9,19,33,169,18,1,1,0,0,0,0,2},  //
	/*7*/ {6,308,54,124,253,112,43,16,9,7,6,8,7,12,10,8,2,0,0,0,0,0,0,3},  //
	/*8*/ {6,308,54,124,253,112,43,16,9,7,6,8,7,12,10,8,2,0,0,0,0,0,0,3},  //

};

unsigned short DynamicOptimizeMEMC_85_y[][32]=   //MI3_roof 43s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,5,356,18,16,36,48,33,28,32,31,30,28,28,24,19,16,14,15,20,32,28,17,18,59,33,3,0,0,0,0,0},   //  4k
	/*1*/ {0,9,367,70,75,65,51,43,39,34,30,22,18,17,16,18,13,8,5,4,4,5,6,6,6,7,8,18,20,0,0,0},   //
	/*2*/ {0,13,402,50,54,30,39,30,26,28,23,21,17,17,19,21,20,16,14,15,20,23,21,12,6,5,6,21,11,7,0,0},   //
	/*3*/ {0,9,559,35,40,37,30,29,25,25,28,23,16,12,10,12,14,13,12,13,15,10,7,4,8,1,0,0,0,0,0,0},   //
	/*4*/ {0,6,330,36,44,25,23,22,25,27,21,17,16,19,26,21,16,12,9,9,11,15,23,36,59,64,39,23,12,0,0,0},   //
	/*5*/ {0,10,479,33,43,59,68,55,26,19,15,13,13,13,15,25,23,18,12,9,9,7,5,3,2,2,1,8,0,0,0,0},   //
  	/*6*/ {0,8,348,26,32,41,47,47,36,34,34,34,39,36,32,19,16,12,12,12,14,20,30,31,15,5,3,3,0,0,0,0},   //
  	/*7*/ {0,6,472,53,74,77,70,46,43,38,28,19,11,8,8,8,8,5,4,2,2,1,2,1,0,0,0,0,0,0,0,0},   //
	/*8*/ {0,6,472,53,74,77,70,46,43,38,28,19,11,8,8,8,8,5,4,2,2,1,2,1,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_85_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {3,13,25,100,252,257,38,18,15,14,12,19,23,75,95,25,1,0,0,0,0,0,1,3},  //   4k
	/*1*/ {1,7,21,91,249,166,73,58,45,27,20,31,23,58,83,37,2,0,0,0,0,0,0,1},  //
	/*2*/ {6,31,52,116,178,116,40,18,15,13,11,19,19,99,173,58,7,3,3,2,2,1,1,5},  //
	/*3*/ {4,26,44,251,349,123,32,16,12,9,8,12,12,28,36,20,2,0,1,0,0,0,0,3},  //
	/*4*/ {1,8,18,115,432,123,43,33,27,19,14,21,20,43,51,19,1,0,0,0,0,0,0,1},  //
	/*5*/ {5,21,36,225,340,99,35,19,15,15,12,15,13,37,52,35,5,1,2,0,1,1,1,4},  //
	/*6*/ {3,15,30,135,265,200,58,34,37,36,35,35,19,33,25,16,7,1,1,0,0,0,0,2},  //
	/*7*/ {3,13,28,203,312,105,71,42,22,14,14,22,22,44,28,20,12,6,5,1,1,0,1,2},  //
	/*8*/ {3,13,28,203,312,105,71,42,22,14,14,22,22,44,28,20,12,6,5,1,1,0,1,2},  //

};

unsigned short DynamicOptimizeMEMC_86_y[][32]=   //Aeon_Flux_1080P24 26s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,4,338,49,40,43,63,51,53,44,45,36,26,24,29,29,32,32,17,9,8,6,4,2,1,1,0,0,0,0,0,0},   //  2k
	/*1*/ {0,4,268,60,38,32,60,94,74,62,53,37,24,19,14,12,20,28,22,7,6,7,8,8,8,7,8,7,0,0,0,0},   //
	/*2*/ {0,4,277,42,30,33,57,101,95,67,50,41,27,19,17,11,12,17,21,8,7,8,8,7,9,9,6,3,0,0,0,0},   //
	/*3*/ {0,4,300,37,29,47,102,144,103,44,18,13,17,25,16,10,13,18,13,8,6,8,10,3,0,0,0,0,0,0,0,0},   //
	/*4*/ {0,3,340,49,40,44,63,51,53,44,45,36,25,24,29,29,32,32,17,9,8,6,4,2,1,1,0,0,0,0,0,0},   //  4k
	/*5*/ {0,3,270,60,38,33,62,92,74,61,53,36,24,19,13,12,20,28,20,7,6,7,8,8,7,7,8,6,0,0,0,0},   //
  	/*6*/ {0,3,281,41,31,36,62,108,100,62,49,39,24,19,17,11,11,13,15,8,8,9,9,7,6,5,5,6,0,0,0,0},   //
  	/*7*/ {0,3,302,35,37,62,127,133,101,47,22,12,7,6,6,7,16,25,14,4,5,9,8,1,0,0,0,0,0,0,0,0},   //
	/*8*/ {0,3,302,35,37,62,127,133,101,47,22,12,7,6,6,7,16,25,14,4,5,9,8,1,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_86_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {4,9,61,412,167,13,40,16,8,8,7,10,9,25,19,42,29,23,14,6,14,25,19,8},  //  2k
	/*1*/ {10,17,95,511,141,8,7,3,2,2,2,2,2,13,13,31,26,14,24,9,10,23,13,10},  //
	/*2*/ {14,23,98,533,101,12,17,8,3,3,3,3,2,11,8,30,24,13,19,5,9,18,20,11},  //
	/*3*/ {5,22,74,693,79,2,3,1,0,0,0,0,2,10,5,25,19,7,8,4,7,8,10,4},  //
	/*4*/ {4,8,50,392,187,15,44,17,9,11,8,10,6,37,21,43,25,21,13,5,14,23,18,7},  //  4k
	/*5*/ {8,16,83,500,158,10,11,3,3,3,3,2,2,20,14,32,23,11,24,7,9,22,13,9},  //
	/*6*/ {11,23,82,544,104,17,21,9,3,3,3,2,1,19,10,41,20,5,12,4,7,13,19,14},  //
	/*7*/ {4,19,76,678,88,4,7,1,1,1,0,0,1,18,8,28,15,3,7,3,6,9,6,4},  //
	/*8*/ {4,19,76,678,88,4,7,1,1,1,0,0,1,18,8,28,15,3,7,3,6,9,6,4},  //

};

unsigned short DynamicOptimizeMEMC_87_y[][32]=   //BladeRunner 38s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,26,316,162,216,130,70,21,8,6,5,5,4,3,2,1,0,0,1,2,1,0,0,0,0,0,0,4,0,0,0,0},   //  2k/4k
	/*1*/ {0,28,353,373,58,27,47,44,29,6,4,2,2,1,1,0,0,0,1,2,1,1,0,0,0,0,0,6,0,0,0,0},   //
	/*2*/ {0,0,321,126,122,257,112,15,6,5,5,3,2,2,2,2,2,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0},   //
	/*3*/ {0,0,382,309,107,55,31,26,28,25,9,3,2,2,2,2,1,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0},   //
	/*4*/ {0,0,382,309,107,55,31,26,28,25,9,3,2,2,2,2,1,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0},   //
	/*5*/ {0,0,382,309,107,55,31,26,28,25,9,3,2,2,2,2,1,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0},   //
  	/*6*/ {0,0,382,309,107,55,31,26,28,25,9,3,2,2,2,2,1,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0},   //
  	/*7*/ {0,0,382,309,107,55,31,26,28,25,9,3,2,2,2,2,1,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0},   //
	/*8*/ {0,0,382,309,107,55,31,26,28,25,9,3,2,2,2,2,1,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_87_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,2,509,248,38,28,1,1,35,8,2,4,69,45,2,0,0,0,0,0,0,0,0},  //  2k/4k
	/*1*/ {0,0,3,279,402,46,32,4,3,41,13,4,6,117,42,1,0,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,1,550,311,35,15,2,1,1,1,2,5,42,24,1,0,0,0,0,0,0,0,0},  //
	/*3*/ {0,0,1,226,498,45,42,4,4,16,8,6,8,112,23,0,0,0,0,0,0,0,0,0},  //
	/*4*/ {0,0,1,226,498,45,42,4,4,16,8,6,8,112,23,0,0,0,0,0,0,0,0,0},  //
	/*5*/ {0,0,1,226,498,45,42,4,4,16,8,6,8,112,23,0,0,0,0,0,0,0,0,0},  //
	/*6*/ {0,0,1,226,498,45,42,4,4,16,8,6,8,112,23,0,0,0,0,0,0,0,0,0},  //
	/*7*/ {0,0,1,226,498,45,42,4,4,16,8,6,8,112,23,0,0,0,0,0,0,0,0,0},  //
	/*8*/ {0,0,1,226,498,45,42,4,4,16,8,6,8,112,23,0,0,0,0,0,0,0,0,0},  //

};

unsigned short DynamicOptimizeMEMC_88_y[][32]=   //I_Robot_01 5s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,59,48,66,82,61,56,55,74,61,50,48,27,17,15,11,12,15,18,30,41,33,29,28,40,12,0,0,0,0,0},   //  2k
	/*1*/ {0,0,47,37,28,34,28,37,54,78,125,112,111,79,59,38,32,29,23,15,9,5,4,2,1,1,1,0,0,0,0,0},   //
	/*2*/ {0,0,36,0,0,0,3,6,11,15,14,12,14,16,17,18,18,24,37,55,113,120,146,110,74,65,45,15,1,0,0,0},   //
	/*3*/ {0,0,106,56,52,101,167,145,128,70,45,38,29,21,12,6,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*4*/ {0,0,60,49,68,81,61,55,55,74,60,49,48,27,16,15,11,12,15,18,31,40,33,29,29,40,12,0,0,0,0,0},   // 4k
	/*5*/ {0,0,82,45,41,47,69,113,141,126,99,66,39,34,31,24,13,7,4,4,2,1,0,0,0,0,0,0,0,0,0,0},   //
	/*6*/ {0,0,36,2,11,21,18,16,21,19,20,25,27,42,67,107,94,106,96,69,54,42,38,28,13,7,4,2,0,0,0,0},   //
	/*7*/ {0,0,110,59,63,125,172,153,107,59,41,36,26,16,9,5,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*8*/ {0,0,110,59,63,125,172,153,107,59,41,36,26,16,9,5,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_88_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,61,129,167,634,4,0,0,0,0,0,0},  //  2k
	/*1*/ {6,22,33,112,13,4,4,2,2,3,4,10,36,210,377,88,25,9,6,2,5,4,5,6},  //
	/*2*/ {11,26,28,100,14,1,0,1,1,1,1,3,11,73,404,171,54,19,14,15,15,11,8,9},  //
	/*3*/ {3,12,27,111,21,3,7,3,4,4,6,17,57,280,327,71,17,5,4,0,2,2,3,3},  //
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,1,72,126,182,610,3,0,0,0,0,0,0},  // 4k
	/*5*/ {2,17,25,117,23,3,5,4,3,4,6,15,54,292,305,70,20,5,5,1,3,3,3,3},  //
	/*6*/ {5,21,25,113,21,3,3,3,2,2,4,9,30,174,409,86,27,10,9,4,9,8,6,6},  //
	/*7*/ {2,15,24,106,29,4,7,4,4,5,7,20,59,310,297,64,15,4,5,0,2,2,3,2},  //
	/*8*/ {2,15,24,106,29,4,7,4,4,5,7,20,59,310,297,64,15,4,5,0,2,2,3,2},  //

};

unsigned short DynamicOptimizeMEMC_89_y[][32]=   //SAMSARA 41:25s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {256,25,20,34,33,32,33,39,53,52,48,47,46,43,36,27,22,19,19,22,23,23,23,11,0,0,0,0,0,0,0,0},   //  2k
	/*1*/ {256,17,12,20,24,24,27,35,46,45,42,42,41,38,34,26,24,24,25,30,33,32,33,37,23,0,0,0,0,0,0,0},   //
	/*2*/ {256,7,6,10,14,18,21,27,35,36,35,36,35,35,31,23,23,29,31,42,45,43,44,47,57,0,0,0,0,0,0,0},   //
	/*3*/ {256,2,4,5,7,11,15,20,26,29,28,30,32,32,27,22,22,31,42,54,56,52,52,59,67,5,0,0,0,0,0,0},   //
	/*4*/ {256,26,21,34,33,32,33,40,54,52,49,48,47,43,35,27,21,19,19,21,22,23,22,7,0,0,0,0,0,0,0,0},   // 4k
	/*5*/ {256,21,15,24,27,27,28,37,49,47,45,45,44,39,34,27,24,22,23,27,29,28,30,32,8,0,0,0,0,0,0,0},   //
	/*6*/ {256,13,9,16,20,22,24,32,42,41,39,39,39,36,31,25,24,26,28,35,38,36,39,42,37,0,0,0,0,0,0,0},   //
	/*7*/ {256,6,5,8,11,16,18,25,32,34,33,34,35,34,30,23,23,30,34,46,48,47,47,51,60,1,0,0,0,0,0,0},   //
  	/*8*/ {256,2,3,4,6,10,15,19,25,28,27,29,32,31,27,22,23,32,44,57,58,53,54,61,67,5,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_89_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {36,64,82,124,181,136,80,46,55,47,30,22,18,15,18,4,3,0,0,1,2,3,5,15},  //  2k
	/*1*/ {21,50,65,102,161,121,74,48,84,41,30,32,35,37,41,28,3,0,0,0,1,1,3,10},  //
	/*2*/ {14,31,45,75,127,107,69,51,92,39,31,34,43,53,79,86,4,0,0,0,1,1,2,6},  //
	/*3*/ {7,18,31,58,95,95,63,57,89,37,31,37,46,61,103,155,3,0,0,0,0,0,0,2},  //
	/*4*/ {33,60,79,126,184,142,78,48,57,49,29,21,17,17,15,4,3,0,1,1,2,3,5,14},  // 4k
	/*5*/ {22,49,69,107,168,135,78,50,79,45,32,32,31,29,31,14,2,0,0,0,1,1,3,9},  //
	/*6*/ {15,38,53,87,143,118,72,52,90,43,33,35,41,48,59,46,3,0,0,0,1,1,2,7},  //
	/*7*/ {10,24,36,64,117,106,68,55,93,41,33,37,44,59,89,102,3,0,0,0,1,1,2,4},  //
	/*8*/ {7,14,28,52,88,91,62,56,93,41,34,38,46,66,108,160,4,0,0,0,0,0,0,2},  //

};

unsigned short DynamicOptimizeMEMC_90_y[][32]=   //SAMSARA 42:39s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {256,17,41,47,39,40,46,42,41,35,34,30,30,35,37,37,40,39,29,22,16,12,7,5,4,3,1,0,0,0,0,0},   //  2k
	/*1*/ {256,12,32,40,37,43,47,42,43,37,36,31,33,38,38,38,43,40,29,23,17,12,7,5,4,3,2,0,0,0,0,0},   //
	/*2*/ {256,10,31,33,36,43,47,41,43,38,36,34,36,38,38,42,45,37,29,23,17,13,7,5,4,3,2,0,0,0,0,0},   //
	/*3*/ {256,29,25,30,36,47,45,43,44,39,35,39,35,35,38,37,38,34,26,20,17,14,9,5,4,3,2,1,0,0,0,0},   //
	/*4*/ {256,16,40,46,39,41,45,42,41,35,35,31,31,35,37,37,41,39,29,23,17,12,7,5,4,2,1,0,0,0,0,0},   // 4k
	/*5*/ {256,12,33,37,36,44,47,42,43,37,35,32,34,38,38,39,45,38,29,23,16,12,7,5,4,2,2,0,0,0,0,0},   //
	/*6*/ {256,12,28,31,36,45,47,43,44,39,37,35,37,36,37,43,42,36,30,22,17,12,7,5,4,2,2,0,0,0,0,0},   //
	/*7*/ {256,12,28,31,36,45,47,43,44,39,37,35,37,36,37,43,42,36,30,22,17,12,7,5,4,2,2,0,0,0,0,0},   //
	/*8*/ {256,12,28,31,36,45,47,43,44,39,37,35,37,36,37,43,42,36,30,22,17,12,7,5,4,2,2,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_90_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {5,7,13,47,187,173,47,25,13,7,6,8,34,46,114,171,38,19,10,5,4,3,3,4},  //  2k
	/*1*/ {5,8,15,50,185,177,48,25,13,7,7,10,34,46,98,167,42,21,10,6,4,3,3,4},  //
	/*2*/ {6,8,14,49,174,185,48,25,13,8,7,10,25,41,94,176,47,25,11,6,4,3,3,4},  //
	/*3*/ {5,8,15,42,157,176,49,24,12,7,7,14,16,34,89,210,46,34,20,6,5,3,3,4},  //
	/*4*/ {5,7,13,46,169,177,53,28,15,9,8,10,39,56,115,160,37,18,9,5,3,3,3,4},  // 4k
	/*5*/ {6,9,17,54,177,164,46,26,14,9,8,11,29,45,96,173,46,23,11,6,4,3,4,5},  //
	/*6*/ {5,8,15,47,149,182,54,28,15,10,9,17,23,41,98,178,50,29,10,6,4,3,3,4},  //
	/*7*/ {5,8,15,47,149,182,54,28,15,10,9,17,23,41,98,178,50,29,10,6,4,3,3,4},  //
	/*8*/ {5,8,15,47,149,182,54,28,15,10,9,17,23,41,98,178,50,29,10,6,4,3,3,4},  //

};

unsigned short DynamicOptimizeMEMC_91_y[][32]=   //SAMSARA 01:12:40s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {254,14,24,44,41,44,42,37,38,41,35,33,26,21,23,24,28,34,36,34,35,22,13,12,13,8,6,2,3,0,0,0},   //  2k
	/*1*/ {254,18,32,53,44,46,42,39,43,40,37,35,26,23,22,25,27,33,28,27,22,16,13,13,14,8,5,1,1,0,0,0},   //
	/*2*/ {254,17,32,56,49,48,44,45,53,40,41,38,25,20,20,21,20,21,22,23,20,18,15,17,13,8,3,1,1,0,0,0},   //
	/*3*/ {254,19,28,62,51,49,47,53,50,43,44,28,18,14,14,16,18,21,25,26,22,21,20,20,10,9,2,1,1,0,0,0},   //
	/*4*/ {256,14,25,46,42,43,42,38,39,41,34,34,26,22,23,24,28,33,35,33,31,20,13,12,14,8,5,1,2,0,0,0},   // 4k
	/*5*/ {256,20,32,56,46,47,42,41,48,38,37,37,26,22,21,23,27,29,24,22,20,16,13,15,13,8,4,1,1,0,0,0},   //
	/*6*/ {256,19,30,58,51,47,45,51,50,41,43,33,22,17,17,17,19,21,24,24,21,19,17,19,11,9,2,1,1,0,0,0},   //
	/*7*/ {256,21,26,65,50,47,47,49,48,43,44,27,18,15,16,16,19,20,24,24,23,23,23,20,10,9,1,1,1,0,0,0},   //
  	/*8*/ {256,29,31,65,51,47,45,43,43,45,39,25,18,17,17,18,19,20,28,24,26,25,23,13,13,5,1,1,1,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_91_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {58,92,48,46,131,189,43,27,22,24,58,67,45,19,14,28,5,1,1,3,16,32,16,3},  //  2k
	/*1*/ {66,107,50,48,137,147,44,26,22,25,63,79,42,18,15,31,7,1,1,2,8,31,18,3},  //
	/*2*/ {74,108,53,50,161,91,43,26,22,29,72,87,42,16,18,32,8,1,1,2,8,27,14,3},  //
	/*3*/ {87,107,59,47,148,70,44,27,21,31,78,97,44,16,20,36,8,1,2,2,7,21,11,4},  //
	/*4*/ {57,93,47,46,119,194,48,28,23,26,61,68,44,19,15,28,3,1,1,2,14,29,17,3},  //4k
	/*5*/ {67,106,50,47,138,132,47,27,23,28,68,82,41,19,17,31,6,1,1,1,7,29,16,4},  //
	/*6*/ {76,105,56,49,146,89,48,28,24,32,78,89,42,18,20,32,5,1,2,2,8,22,12,4},  //
	/*7*/ {91,106,59,50,129,80,49,31,24,32,81,94,40,17,21,37,7,1,1,2,6,16,10,4},  //
	/*8*/ {110,108,68,54,111,74,52,35,26,37,77,94,34,16,21,33,7,1,1,1,5,10,7,5},  //

};

unsigned short DynamicOptimizeMEMC_92_y[][32]=   //Quality.tv_UHD_universaltest_v101_h264  04:48s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,2,26,2,3,1,1,2,94,4,3,2,2,2,2,8,9,5,5,5,6,15,764,5,2,2,2,2,2,5,0,0},   //  2k Quality 04:48s
	/*1*/ {10,16,8,3,2,3,1,3,90,2,1,1,1,1,2,8,3,3,3,5,4,16,754,27,1,1,1,2,2,7,1,0},   //
	/*2*/ {0,22,14,4,3,1,1,3,92,1,1,1,0,1,1,9,4,3,3,3,4,12,785,3,1,1,1,1,2,10,0,0},   //4k Quality 04:48s
	/*3*/ {0,3,34,4,3,1,1,2,91,2,2,1,0,1,1,10,4,3,3,3,3,10,786,3,1,1,1,1,2,9,0,0},   //
	/*4*/ {0,3,34,4,3,1,1,2,91,2,2,1,0,1,1,10,4,3,3,3,3,10,786,3,1,1,1,1,2,9,0,0},   //
	/*5*/ {0,3,34,4,3,1,1,2,91,2,2,1,0,1,1,10,4,3,3,3,3,10,786,3,1,1,1,1,2,9,0,0},   //
	/*6*/ {0,3,34,4,3,1,1,2,91,2,2,1,0,1,1,10,4,3,3,3,3,10,786,3,1,1,1,1,2,9,0,0},   //
	/*7*/ {0,3,34,4,3,1,1,2,91,2,2,1,0,1,1,10,4,3,3,3,3,10,786,3,1,1,1,1,2,9,0,0},   //
  	/*8*/ {0,3,34,4,3,1,1,2,91,2,2,1,0,1,1,10,4,3,3,3,3,10,786,3,1,1,1,1,2,9,0,0},   //

};
unsigned short DynamicOptimizeMEMC_92_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {50,202,17,6,7,13,27,10,9,35,139,25,11,18,11,7,9,19,251,24,24,21,29,26},  //  2k Quality 04:48s
	/*1*/ {1,23,27,5,4,3,12,39,316,70,222,153,27,7,2,2,4,29,29,0,1,3,5,3},  //
	/*2*/ {0,12,14,3,2,2,6,17,349,124,305,103,10,4,2,2,3,14,17,0,0,0,0,0},  // 4k Quality 04:48s
	/*3*/ {2,94,98,17,14,14,68,28,31,104,134,23,23,48,11,14,17,89,150,3,2,1,2,1},  //
	/*4*/ {2,94,98,17,14,14,68,28,31,104,134,23,23,48,11,14,17,89,150,3,2,1,2,1},  //
	/*5*/ {2,94,98,17,14,14,68,28,31,104,134,23,23,48,11,14,17,89,150,3,2,1,2,1},  //
	/*6*/ {2,94,98,17,14,14,68,28,31,104,134,23,23,48,11,14,17,89,150,3,2,1,2,1},  //
	/*7*/ {2,94,98,17,14,14,68,28,31,104,134,23,23,48,11,14,17,89,150,3,2,1,2,1},  //
	/*8*/ {2,94,98,17,14,14,68,28,31,104,134,23,23,48,11,14,17,89,150,3,2,1,2,1},  //

};

unsigned short DynamicOptimizeMEMC_93_y[][32]=   //TimelineSequence_H265_HEVC_HQ 48s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,54,70,83,74,75,69,75,78,102,86,69,43,22,19,21,14,10,8,6,4,2,2,1,1,0,0,0,0,0,0},   //  2k
	/*1*/ {0,0,3,8,13,20,15,9,24,52,89,109,96,74,53,39,31,27,25,26,29,33,37,42,45,58,27,1,0,0,0,0},   //
	/*2*/ {0,0,20,49,36,42,44,74,88,113,122,136,116,65,26,13,10,9,8,5,3,2,1,1,1,0,0,0,0,0,0,0},   //
	/*3*/ {0,0,11,36,25,30,27,28,51,93,152,112,88,70,59,51,54,32,13,7,6,5,5,4,4,4,3,6,7,0,0,0},   //
	/*4*/ {0,0,44,59,59,60,61,61,84,97,104,103,89,59,30,22,18,11,8,6,4,3,3,1,0,1,0,0,0,0,0,0},   // 4k
	/*5*/ {0,0,5,10,17,23,15,21,41,80,76,89,100,72,49,37,32,31,30,34,36,38,40,47,47,14,0,0,0,0,0,0},   //
	/*6*/ {0,0,36,62,50,58,57,88,95,124,110,105,73,43,23,14,12,10,9,7,4,2,1,1,1,1,0,0,0,0,0,0},   //
	/*7*/ {0,0,8,24,28,23,23,22,42,76,141,103,80,66,54,44,41,40,42,48,32,13,6,4,4,4,3,6,7,0,0,0},   //
  	/*8*/ {0,0,8,24,28,23,23,22,42,76,141,103,80,66,54,44,41,40,42,48,32,13,6,4,4,4,3,6,7,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_93_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {25,53,17,257,195,17,5,1,0,0,0,0,0,0,0,9,164,50,44,34,30,27,23,40},  //  2k
	/*1*/ {29,42,43,190,267,6,0,0,0,0,0,0,0,0,0,4,128,75,56,40,31,26,20,37},  //
	/*2*/ {9,15,29,396,69,4,2,0,0,0,0,0,0,0,0,1,234,98,51,35,20,11,8,9},  //
	/*3*/ {9,23,46,445,50,2,1,0,0,0,0,0,0,0,0,1,245,81,31,15,14,11,7,11},  //
	/*4*/ {19,58,29,182,273,20,10,1,0,1,0,0,0,0,0,9,144,45,49,32,36,29,19,34},  // 4k
	/*5*/ {12,26,18,201,281,1,0,0,0,0,0,0,0,0,0,5,184,73,61,44,28,22,15,23},  //
	/*6*/ {7,20,33,232,235,15,8,1,0,0,0,0,0,0,0,5,250,77,37,26,17,12,6,8},  //
	/*7*/ {7,22,29,348,167,3,2,0,0,0,0,0,0,0,0,4,257,71,28,14,13,11,6,10},  //
	/*8*/ {7,22,29,348,167,3,2,0,0,0,0,0,0,0,0,4,257,71,28,14,13,11,6,10},  //

};

unsigned short DynamicOptimizeMEMC_94_y[][32]=   //Flasing_[Dr.HouseS-5-11] 18s
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,8,15,27,179,256,154,50,34,28,28,24,21,19,14,11,9,7,6,6,6,8,8,9,10,12,14,19,7,0,0},   //  2k
	/*1*/ {0,0,27,156,193,157,218,70,36,25,18,17,15,12,10,8,9,8,7,3,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {0,0,8,12,30,208,271,126,46,30,25,26,24,19,17,17,14,10,7,6,6,5,5,5,6,7,9,17,26,5,0,0},   //
	/*3*/ {0,0,29,145,194,161,220,78,40,22,15,13,11,8,8,9,10,8,8,7,3,0,0,0,0,0,0,0,0,0,0,0},   //
	/*4*/ {0,0,29,145,194,161,220,78,40,22,15,13,11,8,8,9,10,8,8,7,3,0,0,0,0,0,0,0,0,0,0,0},   //
	/*5*/ {0,0,29,145,194,161,220,78,40,22,15,13,11,8,8,9,10,8,8,7,3,0,0,0,0,0,0,0,0,0,0,0},   //
	/*6*/ {0,0,29,145,194,161,220,78,40,22,15,13,11,8,8,9,10,8,8,7,3,0,0,0,0,0,0,0,0,0,0,0},   //
	/*7*/ {0,0,29,145,194,161,220,78,40,22,15,13,11,8,8,9,10,8,8,7,3,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*8*/ {0,0,29,145,194,161,220,78,40,22,15,13,11,8,8,9,10,8,8,7,3,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_94_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {23,11,4,0,0,0,0,0,0,0,0,0,2,1,2,11,344,336,72,29,28,44,46,38},  //  2k
	/*1*/ {9,17,122,154,67,12,4,14,21,27,34,46,53,91,30,23,29,92,65,29,18,9,9,13},  //
	/*2*/ {21,13,10,3,0,0,0,0,0,0,0,0,2,2,3,22,330,322,78,31,27,43,46,40},  //
	/*3*/ {11,19,102,152,59,17,5,9,12,22,38,68,59,103,36,25,41,84,61,25,12,9,9,12},  //
	/*4*/ {11,19,102,152,59,17,5,9,12,22,38,68,59,103,36,25,41,84,61,25,12,9,9,12},  //
	/*5*/ {11,19,102,152,59,17,5,9,12,22,38,68,59,103,36,25,41,84,61,25,12,9,9,12},  //
	/*6*/ {11,19,102,152,59,17,5,9,12,22,38,68,59,103,36,25,41,84,61,25,12,9,9,12},  //
	/*7*/ {11,19,102,152,59,17,5,9,12,22,38,68,59,103,36,25,41,84,61,25,12,9,9,12},  //
	/*8*/ {11,19,102,152,59,17,5,9,12,22,38,68,59,103,36,25,41,84,61,25,12,9,9,12},  //

};

unsigned short DynamicOptimizeMEMC_95_y[][32]=   //Kim yuna 4:30 2k
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,1,0,20,30,27,15,14,21,24,16,66,48,31,30,35,38,38,32,26,22,20,22,35,142,230,1,0,0,0,0},   //  2k
	/*1*/ {0,0,1,0,25,36,24,21,22,43,63,24,26,40,32,28,43,51,40,33,30,24,25,27,36,55,234,2,0,1,0,0},   //
	/*2*/ {0,0,1,0,18,28,24,22,49,53,33,176,23,25,26,27,31,31,27,25,23,26,28,37,61,62,128,1,0,1,0,0},   //
	/*3*/ {0,1,0,2,31,31,63,87,39,37,15,12,13,21,23,32,49,57,50,38,36,34,33,35,64,92,54,38,0,0,0,0},   //
	/*4*/ {0,0,1,0,11,19,22,20,20,30,45,60,12,86,68,20,17,24,24,23,18,16,16,23,22,44,114,176,46,7,0,0},   //
	/*5*/ {0,0,1,0,27,29,24,17,20,78,53,22,22,35,24,19,21,28,24,22,22,27,29,31,35,199,173,1,0,1,0,0},   //
	/*6*/ {0,0,1,1,37,29,32,28,52,66,31,28,36,74,46,50,52,41,30,24,23,26,29,42,103,57,19,23,6,1,0,0},   //
	/*7*/ {0,0,0,0,17,10,9,21,27,24,29,23,26,24,31,34,44,68,90,74,48,43,45,37,40,62,104,49,4,0,0,0},   //
  	/*8*/ {0,0,1,0,12,15,13,20,29,36,20,18,72,68,53,42,22,25,26,25,23,18,25,41,55,68,109,101,48,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_95_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {65,247,51,142,10,1,1,0,0,0,0,0,0,18,18,23,67,59,109,54,41,38,27,19},  //  2k
	/*1*/ {21,100,204,137,13,3,27,0,0,0,0,0,0,23,14,43,168,82,36,53,26,22,9,9},  //
	/*2*/ {8,61,48,126,30,13,35,2,1,2,1,2,1,15,14,35,336,104,50,26,22,31,17,8},  //
	/*3*/ {20,57,22,83,2,0,0,0,1,5,33,103,13,4,4,12,217,65,91,90,71,52,27,17},  //
	/*4*/ {42,323,50,71,8,1,2,0,0,0,0,0,0,7,12,16,109,93,71,58,52,34,19,17},  //
	/*5*/ {16,81,40,125,5,2,1,0,0,0,0,0,0,9,6,24,199,90,143,118,58,41,21,11},  //
	/*6*/ {8,56,30,131,5,1,0,0,0,1,13,142,32,14,14,31,191,116,87,42,32,23,11,8},  //
	/*7*/ {46,109,73,78,17,7,7,6,6,8,15,15,4,0,1,7,138,166,81,66,46,41,22,31},  //
	/*8*/ {47,263,63,65,7,2,2,1,1,2,2,1,1,12,12,18,121,102,88,72,39,31,16,21},  //

};

unsigned short DynamicOptimizeMEMC_96_y[][32]=   //Kim yuna 4:30 4k
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,1,0,20,45,33,22,23,45,64,39,45,32,39,38,36,41,41,35,32,27,27,28,55,155,63,1,1,0,0,0},   //  4k
	/*1*/ {0,0,1,1,29,28,25,15,19,78,53,21,21,35,24,20,23,30,26,25,27,29,31,32,40,225,127,1,1,0,0,0},   //
	/*2*/ {0,0,1,0,19,9,12,26,30,47,20,20,22,32,47,62,56,49,46,41,44,50,33,35,37,84,131,33,0,0,0,0},   //
	/*3*/ {0,0,1,0,14,14,11,19,35,24,20,20,24,28,33,77,63,48,28,30,54,73,57,50,49,59,85,62,10,0,0,0},   //
	/*4*/ {0,0,1,2,31,31,58,91,40,40,15,14,12,20,22,32,47,57,53,39,36,34,31,33,58,93,57,40,0,0,0,0},   //
	/*5*/ {0,0,1,0,16,28,27,19,15,21,38,17,88,60,38,37,40,44,45,43,37,30,29,29,33,121,131,0,0,0,0,0},   //
	/*6*/ {0,0,1,0,26,35,22,21,22,44,60,23,24,36,28,26,42,53,42,36,33,26,26,27,36,59,235,1,1,0,0,0},   //
	/*7*/ {0,0,1,0,37,39,28,19,77,36,68,60,34,36,36,42,39,35,30,28,27,32,44,89,129,17,0,0,0,0,0,0},   //
  	/*8*/ {0,0,1,0,21,23,16,14,19,28,85,19,9,107,54,16,15,23,25,22,16,15,16,21,17,28,79,230,61,5,0,0},   //

};
unsigned short DynamicOptimizeMEMC_96_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {49,219,122,132,6,1,1,0,0,0,0,0,0,1,2,9,131,55,43,50,37,53,36,45},  //  4k
	/*1*/ {14,70,35,130,7,3,4,0,0,1,0,0,0,16,12,38,218,81,130,104,52,41,23,11},  //
	/*2*/ {40,52,52,86,29,18,18,17,21,23,26,26,7,10,10,28,159,122,107,52,31,23,14,18},  //
	/*3*/ {49,136,84,72,14,4,7,4,5,7,12,11,2,4,4,19,162,155,57,62,38,31,18,32},  //
	/*4*/ {19,62,22,86,3,0,0,0,1,5,31,94,17,6,5,12,225,57,91,91,67,51,28,15},  //
	/*5*/ {57,317,55,143,15,3,2,0,0,1,1,1,1,31,26,43,93,50,52,22,23,21,11,19},  //
	/*6*/ {19,101,202,139,12,4,24,0,1,1,1,0,0,24,19,46,167,84,34,48,26,22,9,7},  //
	/*7*/ {6,53,30,128,5,0,0,0,0,0,0,13,25,11,10,75,362,122,60,30,26,19,8,6},  //
	/*8*/ {49,309,64,81,15,4,6,1,2,2,1,1,0,10,14,7,101,98,71,53,38,32,15,13},  //

};

unsigned short DynamicOptimizeMEMC_97_y[][32]=   //casino_royale_Broken_41_35_knife
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,17,395,120,83,57,43,35,26,25,31,30,30,42,48,2,1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0},   //  2k
	/*1*/ {0,15,367,86,39,78,148,78,68,40,28,30,10,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {0,24,420,103,65,68,188,90,26,7,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*3*/ {0,21,437,176,197,101,21,11,7,5,5,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*4*/ {0,11,290,46,37,70,167,130,87,51,40,36,15,5,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*5*/ {0,19,332,83,124,102,89,66,42,48,48,20,5,4,3,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*6*/ {0,15,366,102,143,247,103,14,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*7*/ {0,10,249,4,102,259,179,97,31,26,17,17,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*8*/ {0,10,249,4,102,259,179,97,31,26,17,17,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_97_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,52,48,152,460,183,80,7,2,1,0,0,0,4,0,0,0,0,0,0,0,0,0,0},  //  2k
	/*1*/ {0,65,16,77,759,12,55,6,2,1,0,0,0,2,0,0,0,0,0,0,0,0,0,0},  //
	/*2*/ {0,79,30,116,654,15,84,8,3,1,0,0,0,4,0,0,0,0,0,0,0,0,0,0},  //
	/*3*/ {1,90,39,115,241,104,343,30,10,7,2,1,1,6,0,0,0,0,0,0,0,0,0,0},  //
	/*4*/ {0,7,10,60,286,385,225,19,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //
	/*5*/ {0,16,34,108,211,334,253,30,4,1,0,0,0,2,0,0,0,0,0,0,0,0,0,0},  //
	/*6*/ {0,43,15,19,90,135,577,100,6,3,1,0,0,2,0,0,0,0,0,0,0,0,0,0},  //
	/*7*/ {0,0,0,1,47,375,521,50,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //
	/*8*/ {0,0,0,1,47,375,521,50,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //

};

unsigned short DynamicOptimizeMEMC_98_y[][32]=   //vertical limit
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,19,126,250,497,105,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //  2k
	/*1*/ {0,16,91,80,152,348,284,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*2*/ {0,19,39,32,61,65,95,153,237,218,66,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*3*/ {0,15,28,18,17,23,38,41,52,77,105,125,153,137,96,50,15,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*4*/ {0,15,50,52,65,99,166,253,238,52,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*5*/ {0,17,22,10,8,13,14,19,22,34,54,82,114,137,136,127,101,55,19,5,1,0,0,0,0,0,0,0,0,0,0,0},   //
	/*6*/ {0,15,28,18,35,32,38,53,75,112,169,214,128,54,17,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
	/*7*/ {0,15,63,56,97,192,314,227,31,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*8*/ {0,19,43,47,44,41,64,96,137,202,199,79,20,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_98_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,8,351,580,39,16,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //  2k
	/*1*/ {0,0,8,563,380,38,3,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*2*/ {0,0,0,700,283,9,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*3*/ {0,0,1,834,157,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*4*/ {0,0,2,661,321,7,2,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*5*/ {0,0,0,848,139,1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0},  //
	/*6*/ {0,0,1,770,218,2,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //
	/*7*/ {0,0,4,607,361,19,1,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0},  //
	/*8*/ {0,0,2,718,259,10,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},  //

};

unsigned short DynamicOptimizeMEMC_99_y[][32]=   //sony GLEE - Ride Wit Me #4
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,144,140,83,69,69,86,63,52,77,52,38,27,17,10,9,8,10,9,9,7,6,3,1,0,0,0,0,0,0,0},   //  2k
	/*1*/ {0,0,154,131,84,67,67,77,67,59,76,54,50,33,17,9,8,8,7,7,6,5,2,1,0,0,0,0,0,0,0,0},   //
	/*2*/ {0,0,125,123,93,80,75,82,72,57,65,46,61,39,16,9,9,8,8,7,7,5,2,1,0,0,0,0,0,0,0,0},   //
	/*3*/ {0,0,44,68,88,111,108,84,68,68,64,58,58,43,34,63,13,6,3,2,1,0,0,0,0,0,0,0,1,1,0,0},   //
	/*4*/ {0,0,36,62,82,86,75,68,58,59,61,57,56,61,93,100,21,6,4,2,1,0,0,0,0,0,0,0,0,0,0,0},   //
	/*5*/ {0,0,36,62,82,86,75,68,58,59,61,57,56,61,93,100,21,6,4,2,1,0,0,0,0,0,0,0,0,0,0,0},   //
	/*6*/ {0,0,36,62,82,86,75,68,58,59,61,57,56,61,93,100,21,6,4,2,1,0,0,0,0,0,0,0,0,0,0,0},   //
	/*7*/ {0,0,36,62,82,86,75,68,58,59,61,57,56,61,93,100,21,6,4,2,1,0,0,0,0,0,0,0,0,0,0,0},   //
  	/*8*/ {0,0,36,62,82,86,75,68,58,59,61,57,56,61,93,100,21,6,4,2,1,0,0,0,0,0,0,0,0,0,0,0},   //

};
unsigned short DynamicOptimizeMEMC_99_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {21,88,152,199,151,99,33,24,20,20,13,7,7,7,12,16,20,17,34,19,9,6,6,8},  //  2k
	/*1*/ {14,67,166,223,142,98,26,25,23,18,14,9,9,9,11,11,7,9,48,28,12,7,6,7},  //
	/*2*/ {18,75,152,212,133,91,22,20,27,24,12,7,6,6,10,12,9,16,70,30,12,7,7,8},  //
	/*3*/ {8,33,233,201,189,67,15,11,10,7,7,7,5,4,3,4,4,37,79,30,14,8,6,5},  //
	/*4*/ {8,29,186,170,140,61,13,9,7,5,5,6,6,5,4,5,5,61,190,41,14,7,6,6},  //
	/*5*/ {8,29,186,170,140,61,13,9,7,5,5,6,6,5,4,5,5,61,190,41,14,7,6,6},  //
	/*6*/ {8,29,186,170,140,61,13,9,7,5,5,6,6,5,4,5,5,61,190,41,14,7,6,6},  //
	/*7*/ {8,29,186,170,140,61,13,9,7,5,5,6,6,5,4,5,5,61,190,41,14,7,6,6},  //
	/*8*/ {8,29,186,170,140,61,13,9,7,5,5,6,6,5,4,5,5,61,190,41,14,7,6,6},  //

};

unsigned short DynamicOptimizeMEMC_100_y[][32]=   //dareDevil boy w/o rim
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,76,84,52,43,37,39,40,30,28,34,46,63,81,84,71,66,57,39,17,2,1,0,0,0,0,0,0,0,0,0,},
	/*1*/ {0,0,55,43,23,23,24,28,38,45,47,58,84,108,111,84,67,56,40,31,15,5,3,1,1,0,0,0,0,0,0,0,},
	/*2*/ {0,0,55,85,104,102,77,51,32,27,29,38,52,64,75,55,46,35,29,22,7,3,1,0,0,0,0,0,0,0,0,0,},
	/*3*/ {0,0,98,161,154,142,101,71,47,32,23,27,29,29,20,12,4,5,8,10,8,8,1,0,0,0,0,0,0,0,0,0,},
	/*4*/ {0,0,101,77,100,132,145,143,95,48,28,16,11,10,10,11,11,11,11,13,12,4,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,136,91,89,101,124,119,88,58,30,22,19,16,14,13,14,15,14,13,8,2,1,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,141,95,76,74,85,81,55,37,32,27,27,28,27,25,29,32,28,29,25,12,10,6,6,1,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
  	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

unsigned short DynamicOptimizeMEMC_100_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,8,6,22,93,277,300,176,108,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*1*/ {0,3,3,33,106,219,228,236,144,13,4,0,0,0,0,0,1,2,0,0,0,0,0,0,},
	/*2*/ {0,1,2,20,111,346,282,203,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*3*/ {0,2,4,11,145,396,290,130,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*4*/ {0,6,6,7,140,615,195,18,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,4,6,8,110,549,209,37,12,1,0,0,0,0,0,0,0,1,1,3,6,15,25,2,},
	/*6*/ {0,8,5,8,120,506,245,16,9,1,1,1,1,1,1,1,1,3,3,6,7,25,21,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

unsigned short DynamicOptimizeMEMC_101_y[][32]=   //dareDevil boy w/ rim
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,325,60,33,29,32,34,33,33,30,32,35,45,54,52,47,41,34,24,12,3,1,0,0,0,0,0,0,0,0,0,},
	/*1*/ {0,0,310,75,47,38,30,26,27,22,22,24,32,47,58,54,47,46,41,29,12,1,0,0,0,0,0,0,0,0,0,0,},
	/*2*/ {0,0,298,30,16,15,18,22,28,29,33,49,68,84,83,66,53,34,27,24,8,3,1,0,0,0,0,0,0,0,0,0,},
	/*3*/ {0,0,305,78,95,95,72,44,25,19,18,20,30,44,43,30,27,15,12,11,4,2,1,0,0,0,0,0,0,0,0,0,},
	/*4*/ {0,0,341,133,119,108,81,61,41,24,15,12,9,6,4,3,3,4,6,6,7,6,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,339,61,67,96,111,100,68,35,21,12,9,9,9,9,8,8,9,8,8,2,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,375,70,69,76,90,84,58,36,22,17,14,12,10,9,11,11,10,8,5,1,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
  	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

unsigned short DynamicOptimizeMEMC_101_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,15,6,13,103,241,227,200,144,23,8,4,2,1,0,0,0,0,0,0,0,0,0,0,},
	/*1*/ {0,30,11,25,109,285,270,149,103,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*2*/ {0,2,5,30,110,214,233,308,89,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*3*/ {0,4,6,23,166,376,192,150,78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*4*/ {0,5,11,13,140,425,228,110,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,6,10,14,175,626,140,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,7,13,15,152,496,191,49,14,0,0,0,0,0,0,0,0,0,1,2,4,13,28,3,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

unsigned short DynamicOptimizeMEMC_102_y[][32]=   //dareDevil boy w/ rim
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,238,0,0,2,70,187,85,25,27,22,24,26,30,32,42,49,52,40,21,9,4,2,1,0,0,0,0,0,0,0,},
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
  	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};


unsigned short DynamicOptimizeMEMC_102_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,46,411,164,138,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,215,19,0,0,0,0,0,0,0,},
	/*1*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

//++ YE Test for LG 01_Black_19YO1 issue
unsigned short DynamicOptimizeMEMC_103_y[][32]=   //dareDevil boy w/o rim
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,4,755,34,18,15,14,12,12,13,12,12,12,13,14,12,10,7,5,5,4,1,0,0,0,0,0,0,0,0,0,0},  //USB Black level = low
	/*1*/ {0,0,726,45,30,19,17,16,15,14,12,12,14,15,15,12,9,7,6,5,1,0,0,0,0,0,0,0,0,0,0,0}, //USB Black level = high
	/*2*/ {0,1,799,7,13,33,12,12,12,12,10,10,11,16,15,12,9,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  //HDMI T7 Black level = low
	/*3*/ {0,0,0,0,0,783,26,20,19,18,17,16,16,23,24,17,12,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, //HDMI T7 Black level = high
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
  	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

unsigned short DynamicOptimizeMEMC_103_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,0,0,0,7,272,392,151,93,42,17,7,5,4,2,1,0,0,0,0,0,0,0}, //USB Black level = low
	/*1*/ {0,0,0,0,0,4,240,407,162,100,43,16,7,4,4,2,1,0,0,0,0,0,0,0}, //USB Black level = high
	/*2*/ {0,0,1,1,3,16,90,42,18,10,5,3,2,1,1,2,3,2,0,0,0,0,1,781}, //HDMI T7 Black level = low
	/*3*/ {0,0,0,0,4,64,439,224,94,59,28,17,12,8,8,10,15,7,1,0,0,0,0,0}, //HDMI T7 Black level = high
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

//-- YE Test for LG 01_Black_19YO1 issue

//++ Q-13722 issue
unsigned short DynamicOptimizeMEMC_104_y[][32]=   //dareDevil boy w/o rim
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,0,167,0,0,0,816,4,0,0,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*1*/ {0,0,648,0,0,0,339,2,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*2*/ {0,0,936,0,0,0,45,4,5,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*3*/ {0,0,978,0,0,1,5,9,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
  	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

unsigned short DynamicOptimizeMEMC_104_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {994,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	/*1*/ {973,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0},
	/*2*/ {877,50,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,21,5,3},
	/*3*/ {14,851,6,2,1,1,0,0,0,0,0,0,0,0,0,0,0,2,4,43,30,12,6,5},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

//-- Q-13722 issue

//++ K-13536 issue
unsigned short DynamicOptimizeMEMC_105_y[][32]=   //dareDevil boy w/o rim
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,  0, 839,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  154, 0,  0, },
	/*1*/ {0,  1, 839,0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 154, 0, 0, },
	/*2*/ {0, 1, 837, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,0, 0, 0, 154, 0, 0, },
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
  	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

unsigned short DynamicOptimizeMEMC_105_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0,0,  0, 0,  0, 0,  0, 0,  56, 927,  21, 0, 0, },
	/*1*/ {0,  0,  0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0,  0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  295, 556, 150, 0, 0, },
	/*2*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*3*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*4*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*5*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*6*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*7*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
	/*8*/ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
};

//-- K-13536 issue



unsigned short SandM_Chroma_Zone_Plate_y[][32]= //lg movie delay_30p_ver2, wonmen hdmi_hd
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
unsigned short SandM_Chroma_Zone_Plate_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*4*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*5*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },//
	/*8*/ {0, 0, 0, 444, 41, 3, 1, 0, 0, 0, 0, 0, 0, 2, 6, 496, 0, 0, 0, 0, 0, 0, 0, 0, },//

};
/*#endif*/
//skyworth video_2
unsigned short Skyworth_decont_pattern_y1[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 3, 544, 61, 72, 115, 108, 16, 12, 8, 6, 6, 6, 2, 2, 2, 2, 2, 7, 5, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short Skyworth_decont_pattern_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },
	/*1*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },
	/*2*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },
	/*3*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },
	/*4*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },
	/*5*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },
	/*6*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },
	/*7*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },
	/*8*/ {0, 2, 3, 8, 35, 44, 47, 14, 14, 22, 10, 25, 7, 70, 273, 381, 18, 3, 7, 1, 1, 1, 1, 1, },

};
//skyworth video_3 first half
unsigned short Skyworth_decont_pattern_y2[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 174, 235, 302, 128, 61, 27, 26, 12, 11, 3, 1, 0, 0, 1, 2, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short Skyworth_decont_pattern_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 8, 15, 5, 11, 8, 9, 29, 6, 79, 65, 73, 674, 9, 0, 0, 0, 0, 0, 0, },

};
//skyworth video_3 second half
unsigned short Skyworth_decont_pattern_y3[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },
	/*1*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },
	/*2*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },
	/*3*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },
	/*4*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },
	/*5*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },
	/*6*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },
	/*7*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },
	/*8*/ {0, 1, 193, 95, 141, 131, 92, 66, 61, 57, 38, 25, 16, 12, 9, 8, 7, 5, 4, 3, 3, 3, 3, 2, 2, 3, 4, 0, 0, 0, 0, 0, },

};
unsigned short Skyworth_decont_pattern_hue3[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 58, 694, 242, 0, 0, 0, 0, 0, 0, 0, },

};
//skyworth video_1 darkest part
unsigned short Skyworth_decont_pattern_y4[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 728, 133, 57, 29, 14, 10, 6, 4, 3, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short Skyworth_decont_pattern_hue4[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 0, 0, 0, 0, 0, 0, 316, 6, 32, 7, 78, 270, 129, 157, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short Skyworth_decont_BMPpattern_y1[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {159, 93,  59, 31,  21, 18,  15, 16,  16, 18,  18, 19,  20, 20,  19, 19,  21, 21,  20, 20,  22, 27,  27, 29,  33, 41,  46, 50,  47, 8,  4, 6,  },//ss 1080i
	/*1*/ { 57, 33, 28, 19,  11, 8,  5, 4,  4, 3,  3, 3,  3, 4,  3, 4,  9, 24,  26, 32,  32, 42,  43, 54,  88, 114,  93, 70,  61, 49,  42, 12,  },//ss 1080i
	/*2*/ {255, 0, 0, 0, 0, 0, 2, 12, 225, 147, 58, 42, 38, 36, 35, 35, 32, 27, 19, 14, 7, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, },//ss 1080i
	/*3*/ {177, 31, 19, 11, 11, 13, 14, 15, 17, 18, 19, 21, 23, 25, 27, 29, 29, 27, 26, 32, 43, 50, 53, 50, 43, 41, 38, 34, 36, 12, 0, 0, },//ss 1080i
	/*4*/ {160, 93,  59, 31,  20, 18,  16, 16,  16, 18,  18, 19,  20, 20,  19, 19,  20, 21,  20, 20,  22, 26,  27, 29,  33, 41,  46, 50,  47, 8,  4, 6,  },//ss 1080p
	/*5*/ { 56, 33,  28, 19,  11, 8,  5, 4,  4, 3,  3, 3,  3, 4,  3, 4,  9, 25,  27, 33,  32, 42,  44, 55,  89, 114,  93, 70,  61, 49,  41, 12,  },//ss 1080p
	/*6*/ {255, 0,  0, 0,  0, 0,  3, 13,  225, 146,  58, 42,  38, 36,  35, 35,  32, 27,  19, 14,  7, 2,  1, 0,  0, 0,  0, 0,  0, 0,  0, 0,  },//ss 1080p
	/*7*/ {178, 30,  19, 11,  11, 13,  14, 15,  16, 18,  19, 21,  23, 25,  27, 29,  29, 27,  26, 32,  43, 50,  53, 50,  43, 41,  38, 34,  36, 12,  0, 0,  },//ss 1080p
	/*8*/  {	0, 1, 	145, 109, 	53, 32, 	21, 20, 	19, 20, 	21, 23, 	26, 26, 	25, 24, 	26, 25, 	24, 22, 	35, 30, 	42, 43, 		48, 6, 	2, 0, 	0, 0, 	},  //rca 1080p

};
unsigned short Skyworth_decont_BMPpattern_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/  {11, 37,  32, 55,  148, 227,  140, 69,  14, 13,  17, 20,  27, 60,  55, 31,  5, 3,  6, 2,  3, 5,  3, 7,  },
	/*1*/  { 25, 100,  105, 21,  6, 2,  3, 1,  0, 0,  0, 0,  0, 484,  30, 178,  3, 4,  17, 1,  2, 2,  4, 6,  },
	/*2*/ { 0, 0,  0, 0,  0, 0,  0, 3,  10, 20,  45, 110,  176, 158,  457, 14,  0, 0,  0, 0,  0, 0,  0, 0,  },
	/*3*/ { 0, 1,  4, 183,  190, 47,  9, 5,  3, 1,  14, 4,  36, 36,  116, 330,  3, 1,  3, 1,  0, 0,  0, 0,  },
	/*4*/  { 11, 37,  32, 55,  148, 227,  141, 69,  14, 12,  16, 19,  27, 59,  55, 32, 5, 3,  6, 2,  3, 5,  3, 7,  },
	/*5*/ { 31, 124,  130, 25,  7, 3,  4, 1,  0, 0,  0, 0,  0, 402,  37, 221,  4, 5,  21, 1,  3, 2,  5, 8,  },
	/*6*/  {0, 0, 0, 0, 0, 0, 0, 3, 10, 20, 45, 110, 176, 158, 457, 15, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ { 0, 1,  4, 183,  189, 47,  9, 5,  3, 1,  14, 4,  36, 36,  116, 330,  3, 1,  3, 1,  0, 0,  0, 0,  },
	/*8*/  {	16, 38, 	19, 44, 	86, 238, 	128, 57, 	35, 17, 	17, 25, 	41, 71, 	82, 36, 	7, 3, 	5, 2, 	3, 5, 	4, 8, 	},

};

unsigned short Skyworth_decont_BMPpattern_y2[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {	0, 0, 	163, 106, 	54, 29, 	23, 20, 	19, 21, 	21, 24, 	26, 26, 	25, 24, 	26, 26, 	21, 26, 	29, 31, 	38, 41, 	46, 59, 	50, 10, 	3, 0, 	0, 0, 	},  //himedia 1080p
	/*1*/ {	1, 0, 	66, 36, 	28, 16, 	12, 7, 	6, 5, 	5, 5, 	5, 6, 	5, 7, 	11, 36, 	30, 40, 	52, 47, 	87, 113, 	113, 88, 	63, 52, 	37, 3, 	0, 0, 	},  //himedia 1080p
	/*2*/ {	0, 0, 	266, 0, 	0, 1, 	0, 1, 	7, 98, 	256, 68, 	48, 44, 	42, 42, 	40, 34, 	23, 15, 	5, 1, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},  //himedia 1080p
	/*3*/  {	0, 0, 	163, 37, 	19, 17, 	20, 23, 	24, 26, 	27, 28, 	30, 33, 	36, 33, 	26, 23, 	24, 38, 	51, 51, 	54, 45, 	44, 49, 	44, 22, 	0, 0, 	0, 0, 	},  //himedia 1080p
	/*4*/ {3, 6,  157, 108,  51, 28,  21, 19,  18, 19,  20, 22,  24, 24,  23, 23,  24, 25,  22, 22,  35, 29,  31, 50,  45, 53,  67, 8,  5, 1,  0, 0,  },//himedia 1080i
	/*5*/ {0, 1,  52, 36,  32, 17,  11, 7,  6, 5,  4, 4,  4, 4,  4, 6,  10, 36,  30, 36,  55, 47,  70, 132,  115, 85,  76, 55,  40, 6,  0, 0,  },//himedia 1080i
	/*6*/ {0, 1,  253, 0,  0, 0,  0, 1,  7, 108,  257, 70,  47, 43,  42, 42,  39, 34,  23, 15,  6, 1,  0, 0,  0, 0,  0, 0,  0, 0,  0, 0,  },//himedia 1080i
	/*7*/ {3, 11,  158, 36,  18, 15,  16, 18,  20, 22,  24, 25,  28, 30,  33, 33,  30, 28,  27, 36,  58, 52,  47, 57,  43, 45,  51, 22,  0, 0,  0, 0,  },//himedia 1080i
	/*8*/  {	0, 1, 	145, 109, 	53, 32, 	21, 20, 	19, 20, 	21, 23, 	26, 26, 	25, 24, 	26, 25, 	24, 22, 	35, 30, 	42, 43, 		48, 6, 	2, 0, 	0, 0, 	},

};
unsigned short Skyworth_decont_BMPpattern_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/  {	16, 38, 	23, 49, 	99, 228, 	130, 66, 	15, 15, 	14, 21, 	30, 67, 	80, 44, 	14, 5, 	6, 3, 	4, 4, 	6, 9, 	},  //himedia 1080p
	/*1*/  {	45, 223, 	55, 19, 	11, 6, 	3, 1, 	1, 0, 	0, 0, 	0, 287, 	31, 207, 	50, 16, 	30, 1, 	2, 4, 	10, 20, 	},  //himedia 1080p
	/*2*/  {	0, 0, 	0, 0, 	0, 0, 	0, 2, 	11, 27, 	62, 149, 	178, 159, 	403, 1, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},  //himedia 1080p
	/*3*/ {	0, 2, 	12, 206, 	178, 55, 	16, 6, 	4, 2, 	14, 11, 	29, 67, 	109, 267, 	4, 1, 	3, 2, 	1, 0, 	0, 0, 	},  //himedia 1080p
	/*4*/  { 16, 41,  21, 47,  97, 228,  126, 51,  34, 14,  14, 21,  29, 64,  80, 52,  12, 6,  7, 4,  3, 6,  5, 11,  },//himedia 1080i
	/*5*/ { 51, 193,  63, 11,  3, 1,  3, 0,  0, 0,  0, 0,  0, 3,  401, 204,  6, 6,  19, 1,  2, 2,  7, 14,  },//himedia 1080i
	/*6*/   { 0, 0,  1, 0,  0, 0,  0, 2,  11, 27,  63, 147,  178, 158,  404, 1,  0, 0,  0, 0,  0, 0,  0, 0,  },//himedia 1080i
	/*7*/ { 1, 4,  14, 207,  164, 55,  12, 5,  4, 2,  14, 12,  29, 67,  114, 272,  4, 2,  2, 2,  1, 0,  0, 0,  },//himedia 1080i
	/*8*/  {	16, 38, 	19, 44, 	86, 238, 	128, 57, 	35, 17, 	17, 25, 	41, 71, 	82, 36, 	7, 3, 	5, 2, 	3, 5, 	4, 8, 	},

};
unsigned short Skyworth_decont_GRAYpattern_y3[][32] =
{
	/*0*/ {0, 0, 46, 31, 31, 46, 31, 39, 39, 31, 31, 46, 31, 31, 46, 31, 31, 39, 39, 31, 39, 39, 31, 31, 31, 46, 31, 39, 39, 15, 0, 0,  }, //64 gray 1080i de-contour on
	/*1*/ {0, 0, 46, 31, 31, 46, 31, 31, 46, 31, 31, 46, 31, 31, 46, 31, 31, 31, 46, 31, 31, 46, 31, 31, 31, 46, 31, 31, 46, 15, 0, 0,  },  //64 gray 1080i de-contour off
	/*2*/ {0, 0, 41, 36, 35, 37, 36, 35, 35, 38, 35, 35, 38, 35, 35, 31, 38, 35, 37, 36, 35, 37, 36, 33, 36, 38, 35, 35, 38, 15, 0, 0,  },  //128 gray 1080i de-contour on
	/*3*/ {0, 0, 39, 39, 31, 39, 39, 31, 39, 38, 31, 39, 38, 31, 39, 31, 38, 31, 39, 39, 31, 39, 39, 31, 39, 38, 31, 39, 38, 15, 0, 0,  },  //128 gray 1080i de-contour off
};
unsigned short Skyworth_film_pattern_y1[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1, 2, 21, 17, 24, 34, 49, 63, 63, 61, 62, 56, 51, 44, 36, 28, 23, 22, 20, 22, 34, 58, 72, 58, 27, 12, 7, 5, 5, 7, 0, 0, },
	/*1*/  {	0, 1, 	21, 17, 	28, 37, 	47, 61, 	61, 58, 	60, 56, 	53, 47, 	37, 29, 	25, 23, 	21, 22, 	33, 55, 	66, 57, 	28, 12, 	7, 6, 	7, 11, 	0, 0, 	},
	/*2*/ {	1, 2, 	21, 18, 	31, 50, 	50, 58, 	58, 56, 	56, 54, 	49, 43, 	36, 28, 	25, 24, 	24, 27, 	41, 60, 	57, 39, 	22, 14, 	9, 8, 	9, 16, 	0, 0, 	},
	/*3*/ {	1, 2, 	23, 19, 	34, 60, 	45, 49, 	49, 46, 	46, 44, 	40, 35, 	31, 28, 	25, 26, 	27, 31, 	50, 68, 	56, 33, 	19, 14, 	13, 13, 	15, 40, 	1, 0, 	},
	/*4*/  {	1, 2, 	26, 20, 	33, 59, 	41, 41, 	37, 34, 	38, 42, 	40, 37, 	33, 31, 	28, 27, 	29, 36, 	56, 73, 	62, 36, 	20, 15, 	13, 13, 	16, 46, 	1, 0, 	},
	/*5*/ {	1, 2, 	29, 24, 	39, 64, 	46, 40, 	37, 35, 	38, 42, 	40, 37, 	34, 30, 28, 26, 	28, 34, 	51, 68, 	59, 33, 	19, 15, 	13, 13, 	17, 45, 	1, 0, 	},
	/*6*/  {	1, 2, 	24, 30, 	48, 72, 	50, 42, 	41, 40, 	40, 43, 	40, 37, 	33, 30, 	27, 26, 	29, 35, 	50, 57, 	47, 27, 	17, 13, 	12, 12, 	15, 42, 	1, 0, 	},
	/*7*/ {	1, 3, 	21, 32, 	52, 72, 	51, 45, 	45, 43, 	45, 48, 	44, 40, 	35, 31, 	28, 27, 	29, 36, 	48, 50, 	38, 22, 	14, 12, 	11, 10, 	13, 38, 	1, 0, 	},
	/*8*/ {	1, 2, 	23, 34, 	51, 73, 	55, 51, 	51, 50, 	52, 54, 	48, 43, 	38, 33, 	28, 25, 	26, 30, 	39, 41, 	32, 17, 	11, 10, 	9, 9, 	11, 34, 	1, 0, 	},

};
unsigned short Skyworth_film_pattern_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/  {	0, 0, 	3, 162, 	821, 7, 	1, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},
	/*1*/ {	0, 0, 	4, 176, 	804, 9, 	2, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},
	/*2*/ {	0, 0, 	3, 122, 	849, 17, 	4, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},
	/*3*/ {	0, 0, 	3, 127, 	826, 28, 	7, 1, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},
	/*4*/ {	0, 1, 	4, 129, 	815, 31, 	9, 1, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},
	/*5*/ {	0, 1, 	6, 143, 	803, 29, 	7, 1, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},
	/*6*/ {0, 2, 10, 193, 752, 26, 8, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/{0, 1, 8, 170, 775, 25, 9, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/  {	0, 3, 	11, 228, 	723, 20, 	5, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	0, 0, 	},

};

unsigned short Skyworth_speach_man_y1[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },
	/*1*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },
	/*2*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },
	/*3*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },
	/*4*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },
	/*5*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },
	/*6*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },
	/*7*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },
	/*8*/ { 0, 1, 19, 25, 89, 65, 64, 61, 104, 77, 72, 84, 72, 83, 75, 63, 11, 4, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, },

};
unsigned short Skyworth_speach_man_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ { 0, 2, 18, 34, 19, 16, 21, 10, 11, 6, 6, 5, 6, 12, 333, 494, 0, 0, 0, 0, 0, 0, 0, 0, },

};
unsigned short Skyworth_speach_man_y2[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },
	/*1*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },
	/*2*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },
	/*3*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },
	/*4*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },
	/*5*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },
	/*6*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },
	/*7*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },
	/*8*/ { 0, 1, 7, 18, 86, 78, 87, 67, 95, 65, 62, 74, 77, 95, 78, 51, 12, 6, 5, 4, 3, 2, 1, 1, 1, 1, 1, 5, 4, 0, 0, 0, },

};
unsigned short Skyworth_speach_man_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,
	/*1*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,
	/*2*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,
	/*3*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,
	/*4*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,
	/*5*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,
	/*6*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,
	/*7*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,
	/*8*/ { 0, 5, 31, 90, 43, 25, 31, 9, 8, 3, 3, 2, 4, 9, 288, 441, 0, 0, 0, 0, 0, 0, 0, 0, } ,

};

unsigned short Skyworth_Barrel_y1[][32] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 113, 292, 233, 166,94, 38, 23, 11, 7, 5, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },

};

#if CB_flag
unsigned short CB_TSB3_CH3_y1[][32]=
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 0, 0, 2, 7, 9, 23, 59, 33, 30, 22, 34, 50, 59, 64, 68, 65, 66, 68, 65, 56, 51, 40, 35, 37, 16, 16, 13, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 2, 7, 9, 23, 59, 33, 30, 22, 34, 50, 59, 64, 68, 65, 66, 68, 65, 56, 51, 40, 35, 37, 16, 16, 13, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 2, 7, 9, 23, 59, 33, 30, 22, 34, 50, 59, 64, 68, 65, 66, 68, 65, 56, 51, 40, 35, 37, 16, 16, 13, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 2, 7, 9, 23, 59, 33, 30, 22, 34, 50, 59, 64, 68, 65, 66, 68, 65, 56, 51, 40, 35, 37, 16, 16, 13, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 2, 7, 9, 23, 59, 33, 30, 22, 34, 50, 59, 64, 68, 65, 66, 68, 65, 56, 51, 40, 35, 37, 16, 16, 13, 0, 0, },
};
unsigned short CB_TSB3_CH3_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {4, 4, 12, 157, 20, 5, 3, 18, 146, 320, 179, 23, 0, 0, 0, 0, 0, 0, 0, 1, 87, 5, 3, 3, },
	/*1*/ {4, 4, 12, 157, 20, 5, 3, 18, 146, 320, 179, 23, 0, 0, 0, 0, 0, 0, 0, 1, 87, 5, 3, 3, },
	/*2*/ {4, 4, 12, 157, 20, 5, 3, 18, 146, 320, 179, 23, 0, 0, 0, 0, 0, 0, 0, 1, 87, 5, 3, 3, },
	/*3*/ {4, 4, 12, 157, 20, 5, 3, 18, 146, 320, 179, 23, 0, 0, 0, 0, 0, 0, 0, 1, 87, 5, 3, 3, },
	/*4*/ {4, 4, 12, 157, 20, 5, 3, 18, 146, 320, 179, 23, 0, 0, 0, 0, 0, 0, 0, 1, 87, 5, 3, 3, },
};

unsigned short CB_TSB3_CH3_y2[][32]=
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 1, 1, 7, 11, 10, 14, 40, 24, 16, 11, 17, 29, 56, 70, 72, 64, 53, 54, 62, 64, 76, 69, 60, 53, 18, 16, 18, 0, 0, },
	/*1*/ {0, 0, 0, 1, 1, 7, 11, 10, 14, 40, 24, 16, 11, 17, 29, 56, 70, 72, 64, 53, 54, 62, 64, 76, 69, 60, 53, 18, 16, 18, 0, 0, },
	/*2*/ {0, 0, 0, 1, 1, 7, 11, 10, 14, 40, 24, 16, 11, 17, 29, 56, 70, 72, 64, 53, 54, 62, 64, 76, 69, 60, 53, 18, 16, 18, 0, 0, },
	/*3*/ {0, 0, 0, 1, 1, 7, 11, 10, 14, 40, 24, 16, 11, 17, 29, 56, 70, 72, 64, 53, 54, 62, 64, 76, 69, 60, 53, 18, 16, 18, 0, 0, },
	/*4*/ {0, 0, 0, 1, 1, 7, 11, 10, 14, 40, 24, 16, 11, 17, 29, 56, 70, 72, 64, 53, 54, 62, 64, 76, 69, 60, 53, 18, 16, 18, 0, 0, },
};
unsigned short CB_TSB3_CH3_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {4, 5, 12, 188, 23, 4, 3, 19, 129, 346, 171, 17, 6, 0, 0, 0, 0, 0, 0, 0, 50, 6, 4, 3, },
	/*1*/ {4, 5, 12, 188, 23, 4, 3, 19, 129, 346, 171, 17, 6, 0, 0, 0, 0, 0, 0, 0, 50, 6, 4, 3, },
	/*2*/ {4, 5, 12, 188, 23, 4, 3, 19, 129, 346, 171, 17, 6, 0, 0, 0, 0, 0, 0, 0, 50, 6, 4, 3, },
	/*3*/ {4, 5, 12, 188, 23, 4, 3, 19, 129, 346, 171, 17, 6, 0, 0, 0, 0, 0, 0, 0, 50, 6, 4, 3, },
	/*4*/ {4, 5, 12, 188, 23, 4, 3, 19, 129, 346, 171, 17, 6, 0, 0, 0, 0, 0, 0, 0, 50, 6, 4, 3, },
};

unsigned short CB_TSB3_CH3_y3[][32]=
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 0, 2, 14, 18, 18, 21, 24, 24, 17, 19, 21, 27, 48, 61, 66, 57, 57, 66, 72, 78, 78, 62, 48, 47, 12, 11, 16, 0, 0, },
	/*1*/ {0, 0, 0, 0, 2, 14, 18, 18, 21, 24, 24, 17, 19, 21, 27, 48, 61, 66, 57, 57, 66, 72, 78, 78, 62, 48, 47, 12, 11, 16, 0, 0, },
	/*2*/ {0, 0, 0, 0, 2, 14, 18, 18, 21, 24, 24, 17, 19, 21, 27, 48, 61, 66, 57, 57, 66, 72, 78, 78, 62, 48, 47, 12, 11, 16, 0, 0, },
	/*3*/ {0, 0, 0, 0, 2, 14, 18, 18, 21, 24, 24, 17, 19, 21, 27, 48, 61, 66, 57, 57, 66, 72, 78, 78, 62, 48, 47, 12, 11, 16, 0, 0, },
	/*4*/ {0, 0, 0, 0, 2, 14, 18, 18, 21, 24, 24, 17, 19, 21, 27, 48, 61, 66, 57, 57, 66, 72, 78, 78, 62, 48, 47, 12, 11, 16, 0, 0, },
};
unsigned short CB_TSB3_CH3_hue3[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {3, 4, 12, 268, 42, 8, 4, 18, 112, 311, 146, 28, 0, 0, 0, 0, 0, 0, 0, 0, 25, 4, 3, 3, },
	/*1*/ {3, 4, 12, 268, 42, 8, 4, 18, 112, 311, 146, 28, 0, 0, 0, 0, 0, 0, 0, 0, 25, 4, 3, 3, },
	/*2*/ {3, 4, 12, 268, 42, 8, 4, 18, 112, 311, 146, 28, 0, 0, 0, 0, 0, 0, 0, 0, 25, 4, 3, 3, },
	/*3*/ {3, 4, 12, 268, 42, 8, 4, 18, 112, 311, 146, 28, 0, 0, 0, 0, 0, 0, 0, 0, 25, 4, 3, 3, },
	/*4*/ {3, 4, 12, 268, 42, 8, 4, 18, 112, 311, 146, 28, 0, 0, 0, 0, 0, 0, 0, 0, 25, 4, 3, 3, },
};


unsigned short CB_SONY_CH84_y1[][32]=
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 1, 35, 14, 7, 8, 13, 21, 33, 45, 49, 68, 133, 124, 343, 29, 25, 19, 13, 7, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 1, 35, 14, 7, 8, 13, 21, 33, 45, 49, 68, 133, 124, 343, 29, 25, 19, 13, 7, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 1, 35, 14, 7, 8, 13, 21, 33, 45, 49, 68, 133, 124, 343, 29, 25, 19, 13, 7, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 1, 35, 14, 7, 8, 13, 21, 33, 45, 49, 68, 133, 124, 343, 29, 25, 19, 13, 7, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 35, 14, 7, 8, 13, 21, 33, 45, 49, 68, 133, 124, 343, 29, 25, 19, 13, 7, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};
unsigned short CB_SONY_CH84_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {5, 7, 22, 347, 197, 8, 13, 1, 0, 0, 0, 0, 3, 1, 0, 0, 0, 0, 363, 12, 4, 2, 2, 2, },
	/*1*/ {5, 7, 22, 347, 197, 8, 13, 1, 0, 0, 0, 0, 3, 1, 0, 0, 0, 0, 363, 12, 4, 2, 2, 2, },
	/*2*/ {5, 7, 22, 347, 197, 8, 13, 1, 0, 0, 0, 0, 3, 1, 0, 0, 0, 0, 363, 12, 4, 2, 2, 2, },
	/*3*/ {5, 7, 22, 347, 197, 8, 13, 1, 0, 0, 0, 0, 3, 1, 0, 0, 0, 0, 363, 12, 4, 2, 2, 2, },
	/*4*/ {5, 7, 22, 347, 197, 8, 13, 1, 0, 0, 0, 0, 3, 1, 0, 0, 0, 0, 363, 12, 4, 2, 2, 2, },
};

unsigned short CB_SONY_CH84_y2[][32]=
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 0, 23, 14, 8, 8, 8, 11, 16, 23, 33, 43, 80, 124, 495, 30, 26, 23, 16, 7, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 23, 14, 8, 8, 8, 11, 16, 23, 33, 43, 80, 124, 495, 30, 26, 23, 16, 7, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 23, 14, 8, 8, 8, 11, 16, 23, 33, 43, 80, 124, 495, 30, 26, 23, 16, 7, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 23, 14, 8, 8, 8, 11, 16, 23, 33, 43, 80, 124, 495, 30, 26, 23, 16, 7, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 23, 14, 8, 8, 8, 11, 16, 23, 33, 43, 80, 124, 495, 30, 26, 23, 16, 7, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
};
unsigned short CB_SONY_CH84_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {2, 3, 25, 419, 254, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 256, 8, 2, 1, 1, 1, },
	/*1*/ {2, 3, 25, 419, 254, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 256, 8, 2, 1, 1, 1, },
	/*2*/ {2, 3, 25, 419, 254, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 256, 8, 2, 1, 1, 1, },
	/*3*/ {2, 3, 25, 419, 254, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 256, 8, 2, 1, 1, 1, },
	/*4*/ {2, 3, 25, 419, 254, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 256, 8, 2, 1, 1, 1, },
};

unsigned short CB_USB_Red_Flower_Bee_y1[][32]=
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 0, 0, 1, 17, 80, 317, 139, 47, 28, 23, 18, 19, 26, 42, 66, 55, 52, 14, 13, 13, 14, 2, 0, 0, 0, 0, 0, 1, 0, },
	/*1*/ {0, 0, 0, 0, 0, 1, 17, 80, 317, 139, 47, 28, 23, 18, 19, 26, 42, 66, 55, 52, 14, 13, 13, 14, 2, 0, 0, 0, 0, 0, 1, 0, },
	/*2*/ {0, 0, 0, 0, 0, 1, 17, 80, 317, 139, 47, 28, 23, 18, 19, 26, 42, 66, 55, 52, 14, 13, 13, 14, 2, 0, 0, 0, 0, 0, 1, 0, },
	/*3*/ {0, 0, 0, 0, 0, 1, 17, 80, 317, 139, 47, 28, 23, 18, 19, 26, 42, 66, 55, 52, 14, 13, 13, 14, 2, 0, 0, 0, 0, 0, 1, 0, },
	/*4*/ {0, 0, 0, 0, 0, 1, 17, 80, 317, 139, 47, 28, 23, 18, 19, 26, 42, 66, 55, 52, 14, 13, 13, 14, 2, 0, 0, 0, 0, 0, 1, 0, },
};
unsigned short CB_USB_Red_Flower_Bee_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {397, 327, 63, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, },
	/*1*/ {397, 327, 63, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, },
	/*2*/ {397, 327, 63, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, },
	/*3*/ {397, 327, 63, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, },
	/*4*/ {397, 327, 63, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, },
};

unsigned short CB_USB_Red_Flower_Bee_y2[][32]=
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 0, 3, 8, 24, 80, 325, 136, 43, 25, 21, 17, 18, 26, 41, 62, 53, 51, 13, 13, 13, 13, 2, 0, 0, 0, 0, 0, 1, 0, },
	/*1*/ {0, 0, 0, 0, 3, 8, 24, 80, 325, 136, 43, 25, 21, 17, 18, 26, 41, 62, 53, 51, 13, 13, 13, 13, 2, 0, 0, 0, 0, 0, 1, 0, },
	/*2*/ {0, 0, 0, 0, 3, 8, 24, 80, 325, 136, 43, 25, 21, 17, 18, 26, 41, 62, 53, 51, 13, 13, 13, 13, 2, 0, 0, 0, 0, 0, 1, 0, },
	/*3*/ {0, 0, 0, 0, 3, 8, 24, 80, 325, 136, 43, 25, 21, 17, 18, 26, 41, 62, 53, 51, 13, 13, 13, 13, 2, 0, 0, 0, 0, 0, 1, 0, },
	/*4*/ {0, 0, 0, 0, 3, 8, 24, 80, 325, 136, 43, 25, 21, 17, 18, 26, 41, 62, 53, 51, 13, 13, 13, 13, 2, 0, 0, 0, 0, 0, 1, 0, },
};
unsigned short CB_USB_Red_Flower_Bee_hue2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {399, 332, 56, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19, },
	/*1*/ {399, 332, 56, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19, },
	/*2*/ {399, 332, 56, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19, },
	/*3*/ {399, 332, 56, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19, },
	/*4*/ {399, 332, 56, 78, 108, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19, },
};

#endif

unsigned short BitmapDevodeOffset_y_1[][32] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 3, 52, 0, 0, 220, 173, 80, 73, 74, 70, 53, 40, 9, 5, 5, 6, 8, 11, 13, 15, 3, 14, 10, 5, 6, 12, 25, 2, 0, 0, 0, },
	/*1*/ {0, 3, 52, 0, 0, 220, 173, 80, 73, 74, 70, 53, 40, 9, 5, 5, 6, 8, 11, 13, 15, 3, 14, 10, 5, 6, 12, 25, 2, 0, 0, 0, },
	/*2*/ {0, 3, 52, 0, 0, 220, 173, 80, 73, 74, 70, 53, 40, 9, 5, 5, 6, 8, 11, 13, 15, 3, 14, 10, 5, 6, 12, 25, 2, 0, 0, 0, },
	/*3*/ {0, 3, 52, 0, 0, 220, 173, 80, 73, 74, 70, 53, 40, 9, 5, 5, 6, 8, 11, 13, 15, 3, 14, 10, 5, 6, 12, 25, 2, 0, 0, 0, },
	/*4*/ {0, 3, 52, 0, 0, 220, 173, 80, 73, 74, 70, 53, 40, 9, 5, 5, 6, 8, 11, 13, 15, 3, 14, 10, 5, 6, 12, 25, 2, 0, 0, 0, },
};
unsigned short BitmapDevodeOffset_hue_1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 1, 5, 10, 27, 371, 435, 38, 19, 5, 7, 13, 36, 22, 2, 0, 1, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 1, 5, 10, 27, 371, 435, 38, 19, 5, 7, 13, 36, 22, 2, 0, 1, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 1, 5, 10, 27, 371, 435, 38, 19, 5, 7, 13, 36, 22, 2, 0, 1, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 1, 5, 10, 27, 371, 435, 38, 19, 5, 7, 13, 36, 22, 2, 0, 1, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 5, 10, 27, 371, 435, 38, 19, 5, 7, 13, 36, 22, 2, 0, 1, 0, 0, 0, 0, 0, },
};

unsigned short BitmapDevodeOffset_y_2[][32] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 0, 0, 206, 176, 83, 79, 69, 52, 39, 31, 9, 6, 6, 8, 11, 21, 28, 43, 5, 21, 18, 8, 11, 18, 35, 3, 0, 0, 0, },
	/*1*/ {0, 0, 0, 0, 0, 206, 176, 83, 79, 69, 52, 39, 31, 9, 6, 6, 8, 11, 21, 28, 43, 5, 21, 18, 8, 11, 18, 35, 3, 0, 0, 0, },
	/*2*/ {0, 0, 0, 0, 0, 206, 176, 83, 79, 69, 52, 39, 31, 9, 6, 6, 8, 11, 21, 28, 43, 5, 21, 18, 8, 11, 18, 35, 3, 0, 0, 0, },
	/*3*/ {0, 0, 0, 0, 0, 206, 176, 83, 79, 69, 52, 39, 31, 9, 6, 6, 8, 11, 21, 28, 43, 5, 21, 18, 8, 11, 18, 35, 3, 0, 0, 0, },
	/*4*/ {0, 0, 0, 0, 0, 206, 176, 83, 79, 69, 52, 39, 31, 9, 6, 6, 8, 11, 21, 28, 43, 5, 21, 18, 8, 11, 18, 35, 3, 0, 0, 0, },
};
unsigned short BitmapDevodeOffset_hue_2[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 2, 10, 16, 44, 369, 345, 31, 12, 8, 11, 20, 71, 48, 3, 0, 1, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 2, 10, 16, 44, 369, 345, 31, 12, 8, 11, 20, 71, 48, 3, 0, 1, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 2, 10, 16, 44, 369, 345, 31, 12, 8, 11, 20, 71, 48, 3, 0, 1, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 2, 10, 16, 44, 369, 345, 31, 12, 8, 11, 20, 71, 48, 3, 0, 1, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 2, 10, 16, 44, 369, 345, 31, 12, 8, 11, 20, 71, 48, 3, 0, 1, 0, 0, 0, 0, 0, },
};

unsigned short BitmapDevodeOffset_y_3[][32] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 48, 0, 0, 268, 202, 68, 57, 40, 14, 8, 5, 5, 5, 5, 6, 12, 25, 26, 36, 7, 27, 22, 10, 14, 25, 48, 2, 0, 0, 0, },
	/*1*/ {0, 0, 48, 0, 0, 268, 202, 68, 57, 40, 14, 8, 5, 5, 5, 5, 6, 12, 25, 26, 36, 7, 27, 22, 10, 14, 25, 48, 2, 0, 0, 0, },
	/*2*/ {0, 0, 48, 0, 0, 268, 202, 68, 57, 40, 14, 8, 5, 5, 5, 5, 6, 12, 25, 26, 36, 7, 27, 22, 10, 14, 25, 48, 2, 0, 0, 0, },
	/*3*/ {0, 0, 48, 0, 0, 268, 202, 68, 57, 40, 14, 8, 5, 5, 5, 5, 6, 12, 25, 26, 36, 7, 27, 22, 10, 14, 25, 48, 2, 0, 0, 0, },
	/*4*/ {0, 0, 48, 0, 0, 268, 202, 68, 57, 40, 14, 8, 5, 5, 5, 5, 6, 12, 25, 26, 36, 7, 27, 22, 10, 14, 25, 48, 2, 0, 0, 0, },
};
unsigned short BitmapDevodeOffset_hue_3[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {0, 0, 0, 3, 11, 21, 54, 356, 337, 29, 10, 10, 14, 26, 75, 39, 2, 1, 1, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 3, 11, 21, 54, 356, 337, 29, 10, 10, 14, 26, 75, 39, 2, 1, 1, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 3, 11, 21, 54, 356, 337, 29, 10, 10, 14, 26, 75, 39, 2, 1, 1, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 3, 11, 21, 54, 356, 337, 29, 10, 10, 14, 26, 75, 39, 2, 1, 1, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 3, 11, 21, 54, 356, 337, 29, 10, 10, 14, 26, 75, 39, 2, 1, 1, 0, 0, 0, 0, 0, },
};

unsigned short LGPTFatoryMultiC34_y[][32] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {15, 53, 124, 8, 20, 8, 3, 10, 21, 4, 14, 4, 3, 11, 19, 60, 285, 28, 19, 10, 38, 14, 16, 13, 12, 7, 8, 13, 23, 24, 87, 10, },
	/*1*/ {15, 53, 124, 8, 20, 8, 3, 10, 21, 4, 14, 4, 3, 11, 19, 60, 285, 28, 19, 10, 38, 14, 16, 13, 12, 7, 8, 13, 23, 24, 87, 10, },
	/*2*/ {15, 53, 124, 8, 20, 8, 3, 10, 21, 4, 14, 4, 3, 11, 19, 60, 285, 28, 19, 10, 38, 14, 16, 13, 12, 7, 8, 13, 23, 24, 87, 10, },
	/*3*/ {15, 53, 124, 8, 20, 8, 3, 10, 21, 4, 14, 4, 3, 11, 19, 60, 285, 28, 19, 10, 38, 14, 16, 13, 12, 7, 8, 13, 23, 24, 87, 10, },
	/*4*/ {15, 53, 124, 8, 20, 8, 3, 10, 21, 4, 14, 4, 3, 11, 19, 60, 285, 28, 19, 10, 38, 14, 16, 13, 12, 7, 8, 13, 23, 24, 87, 10, },
};
unsigned short LGPTFatoryMultiC34_hue[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0 IRE ,#1  ntsc 7.5 IRE , #2 cvbs pal  ,#3 hdmi_sd , #4 hdmi_hd
	/*0*/ {2, 8, 26, 13, 4, 7, 58, 15, 31, 45, 111, 184, 247, 94, 41, 16, 21, 31, 5, 3, 4, 18, 3, 2, },
	/*1*/ {2, 8, 26, 13, 4, 7, 58, 15, 31, 45, 111, 184, 247, 94, 41, 16, 21, 31, 5, 3, 4, 18, 3, 2, },
	/*2*/ {2, 8, 26, 13, 4, 7, 58, 15, 31, 45, 111, 184, 247, 94, 41, 16, 21, 31, 5, 3, 4, 18, 3, 2, },
	/*3*/ {2, 8, 26, 13, 4, 7, 58, 15, 31, 45, 111, 184, 247, 94, 41, 16, 21, 31, 5, 3, 4, 18, 3, 2, },
	/*4*/ {2, 8, 26, 13, 4, 7, 58, 15, 31, 45, 111, 184, 247, 94, 41, 16, 21, 31, 5, 3, 4, 18, 3, 2, },
};

unsigned short Sony_test_pattern_001_y1[][32] = //move text
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },
	/*1*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },
	/*2*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },
	/*3*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },
	/*4*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },
	/*5*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },
	/*6*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },
	/*7*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },
	/*8*/ {9, 12, 267, 4, 14, 9, 18, 85, 11, 7, 10, 173, 88, 12, 8, 143, 9, 7, 5, 6, 4, 5, 4, 5, 3, 4, 51, 9, 3, 0, 0, 0, },

};
unsigned short Sony_test_pattern_001_hue1[][COLOR_HUE_HISTOGRAM_LEVEL] =
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },
	/*1*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },
	/*2*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },
	/*3*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },
	/*4*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },
	/*5*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },
	/*6*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },
	/*7*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },
	/*8*/ {1, 60, 180, 1, 0, 0, 0, 0, 1, 77, 312, 0, 1, 28, 144, 4, 47, 117, 3, 0, 1, 7, 5, 1, },

};

unsigned short Sony_test_pattern_002_y1[][32] = //sony calculator
{ //#0  ntsc 0IRE BLV=HIGH,#1  ntsc 7.5IRE BLV=HIGH, #2 pal  ,#3 SD BLV=HIGH , #4 HD BLV=HIGH
  //#5  ntsc 0IRE BLV=LOW ,#6  ntsc 7.5IRE BLV=LOW , #7 SD BLV=LOW , #8 HD BLV=LOW
	/*0*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*1*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*2*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*3*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*4*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*5*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*6*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*7*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
	/*8*/ {0, 0, 0, 1, 4, 3, 988, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },

};





unsigned short LGBirdDemoMovie_ChromaRTNR_y[32] =
	{0, 0, 8, 5, 5, 3, 5, 5, 28, 34, 7, 11, 16, 10, 12, 46, 286, 29, 24, 29, 21, 21, 21, 109, 42, 13, 16, 23, 86, 71, 0, 0, };

unsigned short LGBirdDemoMovie_ChromaRTNR_hue[COLOR_HUE_HISTOGRAM_LEVEL] =
	{12, 16, 38, 104, 477, 85, 12, 1, 0, 0, 0, 0, 0, 1, 14, 20, 42, 19, 54, 62, 13, 6, 5, 8, };

/*LG internal TV signal "E-52"*/
unsigned short LGTVPALBGE52_y[32] =
	{2, 15, 8, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 27, 443, 463, 27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, };
/*LG internal TV signal "E-52"*/
unsigned short LGTVPALBGE52_hue[COLOR_HUE_HISTOGRAM_LEVEL] =
	{118, 5, 5, 8, 119, 27, 144, 37, 36, 24, 25, 25, 157, 20, 15, 14, 18, 16, 152, 9, 6, 3, 3, 3, };


/*info. from VD scalerVideo.c*/
//extern unsigned char SMD_flag_from_scalerVideo; // replaced by scalerVideo_Get_VD_MiddleWare(VD_STATUS_SMD_IEGSM)
/**/

#define blend_ratio 4
#define frame_print 60
#define SST_debug 0



//******************************** ID PATTERN FOR DEMO************************************************8



#define pthread_mutex_lock(a)  do {} while(0)
#define pthread_mutex_unlock(a) do {} while(0)

#define rtdf_outb 			IoReg_WriteByte0
#define rtdf_outl 				rtd_outl
//#define rtd_outw 				IoReg_WriteWord0
#define rtdf_inl				rtd_inl

//#ifndef Original_DCR
//#define Original_DCR
//#endif
#define WEIGHTED_LEFT_BOUND 0
#define WEIGHTED_RIGHT_BOUND 100

//yuan1024 rtnr n field avg
unsigned char VD_noise_status_Num = 1;

typedef enum _SEG{
    Segment_A,
    Segment_B,
    Segment_C,
    Segment_D,
    Segment_E,
    Segment_F,
    Segment_G,
    Segment_MAX,
}SEG;

//=========================================================
//====== For DCC User Curve =====================================
//=========================================================

typedef enum _HISTOGRAM_TYPE{
    HistType_dark,
    HistType_darkmiddle,
    HistType_darklight,
    HistType_middle,
    HistType_light,
    HistType_middlelight,
    HistType_darkmiddlelight,
    HistType_MAX,i
}HISTOGRAM_TYPE;

char	UserCurRatio=0;//tDCC_UserCurve[8];//0-32


typedef enum _PICTURE_MODE1 {
	COLORSTD_DEFAULT = 0,
	PICTURE_MODE1_AUTO_VIEW,
	PICTURE_MODE1_DYNAMIC,
	PICTURE_MODE1_STANDARD,
	PICTURE_MODE1_MILD,
	PICTURE_MODE1_MOVIE,
	PICTURE_MODE1_ECO,
	PICTURE_MODE1_GAME,
	PICTURE_MODE1_PC,
	PICTURE_MODE1_MAX,
} PICTURE_MODE1;

typedef enum _PICTURE_MODE2 {
	PICTURE_MODE2_USER = 0,
	PICTURE_MODE2_VIVID,
	PICTURE_MODE2_STD,
	PICTURE_MODE2_GENTLE,
	PICTURE_MODE2_MOVIE,
	PICTURE_MODE2_SPORT,
	PICTURE_MODE2_GAME,
	PICTURE_MODE2_MAX,
} PICTURE_MODE2;
//=========================================================


#if 0
unsigned int tDCC_SCurve_Coef_Dark[9] =
{
   //S_th   S_index,  S_low,    S_high,   DCL_W,   DCL_B,     DCC_level,       ratio,       reserved,
	 0x0,	0x0,	0x0,	0x0,   0x0,    0x0,		  0x0,		 0x0,		0x0,//Dark
};
unsigned int tDCC_SCurve_Coef_Middle[9] =
{
   //S_th   S_index,  S_low,    S_high,   DCL_W,   DCL_B,     	  DCC_level,     ratio,       reserved,
	 0x0,	0x0,	0x0,	0x0,   0x0,    0x0,		  0x0,		 0x0,		0x0,//Middle
};

unsigned int tDCC_SCurve_Coef_Light[9] =
{
   //S_th	 S_index,  S_low,	 S_high,   DCL_W,	DCL_B,	   DCC_level,	  ratio,	   reserved,
	 0x0,	0x0,	0x0,	0x0,   0x0,    0x0, 	  0x0,		 0x0,		0x0,//High
};
#endif

//=========================================================


//#define VIP_DEBUG_ENABLE
#ifdef VIP_DEBUG_ENABLE
  #define VIP_DEBUG_PRINTF	printk
#else
  #define VIP_DEBUG_PRINTF(x,y...)
#endif

#ifdef IO_GPIO_DEBUG
  #define IO_GPIO_DEBUG_PRINTF(format, args...) 		//printf(format, ##args)
#else //#ifdef IO_GPIO_DEBUG
  #define IO_GPIO_DEBUG_PRINTF(format, args...)
#endif //#ifdef IO_GPIO_DEBUG

// oliver-
//#define SCALERVIP_IOMGR_ERROR(format, args...)  printf(format, ##args)
#define SCALERVIP_IOMGR_ERROR(format, args...)

#define GPIO_CR GPIOPWM_GPIO_FCR_reg
#define GPIO_DATA GPIOPWM_GPIO_FDATA_reg
#define GPIO_PWM GPIOPWM_PWM_DB_CTRL_reg   //todo: spec is different in Atlantic, need checking
#define GPIO_PWM_DUTY GPIOPWM_PWM0_DUTY_SET_reg

#define GPIO_CR_ST GPIOPWM_GPIO_ACR_reg
#define GPIO_DATA_ST GPIOPWM_GPIO_ADATA_reg
#define GPIO_PWM_ST GPIOPWM_ST_PWM0_B0_reg	 //todo: spec is different in Atlantic, need checking
#define GPIO_PWM_DUTY_ST GPIOPWM_ST_PWM0_AD0_reg

//==========================================================
//				IC PWM Setting Start
//==========================================================
#define _PWM_TOTAL_NUM		10

#define _PWM_0_DUTY_MIN		0
#define _PWM_0_DUTY_MAX		100

#define _PWM_1_DUTY_MIN		0
#define _PWM_1_DUTY_MAX		100

#define _PWM_2_DUTY_MIN		0
#define _PWM_2_DUTY_MAX		100

#define _PWM_3_DUTY_MIN		0
#define _PWM_3_DUTY_MAX		100

#define _PWM_4_DUTY_MIN		0
#define _PWM_4_DUTY_MAX		100

#define _PWM_5_DUTY_MIN		0
#define _PWM_5_DUTY_MAX		100

#define _PWM_6_DUTY_MIN		0
#define _PWM_6_DUTY_MAX		100

#define _PWM_7_DUTY_MIN		0
#define _PWM_7_DUTY_MAX		100

#define _PWM_ST0_DUTY_MIN		0
#define _PWM_ST0_DUTY_MAX		100

#define _PWM_ST1_DUTY_MIN		0
#define _PWM_ST1_DUTY_MAX		100

//0x1801_2104[31],  PWMx_CTRL.PWM0L
//set PWM output wave form
#define _PWM_ACTIVE_HIGH		0
#define _PWM_ACTIVE_LOW		1

#define _PWM_0_L_ACTIVE		_PWM_ACTIVE_HIGH
#define _PWM_1_L_ACTIVE		_PWM_ACTIVE_HIGH
#define _PWM_2_L_ACTIVE		_PWM_ACTIVE_HIGH
#define _PWM_3_L_ACTIVE		_PWM_ACTIVE_HIGH
#define _PWM_4_L_ACTIVE		_PWM_ACTIVE_HIGH
#define _PWM_5_L_ACTIVE		_PWM_ACTIVE_HIGH
#define _PWM_6_L_ACTIVE		_PWM_ACTIVE_HIGH
#define _PWM_7_L_ACTIVE		_PWM_ACTIVE_HIGH
#define _PWM_ST0_L_ACTIVE	_PWM_ACTIVE_HIGH
#define _PWM_ST1_L_ACTIVE	_PWM_ACTIVE_HIGH

//0x1801_2104[30],  PWMx_CTRL.PWM0_CK
//set PWM output stage
#define _PWM_FIRST_STAGE_OUTPUT		0
#define _PWM_SECOND_STAGE_OUTPUT	1

#define _PWM_0_STAGE_OUTPUT			_PWM_SECOND_STAGE_OUTPUT
#define _PWM_1_STAGE_OUTPUT			_PWM_SECOND_STAGE_OUTPUT
#define _PWM_2_STAGE_OUTPUT			_PWM_SECOND_STAGE_OUTPUT
#define _PWM_3_STAGE_OUTPUT			_PWM_SECOND_STAGE_OUTPUT
#define _PWM_4_STAGE_OUTPUT			_PWM_SECOND_STAGE_OUTPUT
#define _PWM_5_STAGE_OUTPUT			_PWM_SECOND_STAGE_OUTPUT
#define _PWM_6_STAGE_OUTPUT			_PWM_SECOND_STAGE_OUTPUT
#define _PWM_7_STAGE_OUTPUT			_PWM_SECOND_STAGE_OUTPUT
#define _PWM_ST0_STAGE_OUTPUT		_PWM_SECOND_STAGE_OUTPUT
#define _PWM_ST1_STAGE_OUTPUT		_PWM_SECOND_STAGE_OUTPUT

//0x1801_2104[29],  PWMx_CTRL.PWM0_EN
//set PWM output enable
#define _PWM_OUTPUT_DISABLE		0
#define _PWM_OUTPUT_ENABLE		1

#define _PWM_0_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_1_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_2_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_3_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_4_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_5_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_6_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_7_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_ST0_ENABLE			_PWM_OUTPUT_ENABLE
#define _PWM_ST1_ENABLE			_PWM_OUTPUT_ENABLE

//0x1801_2104[28],  PWMx_CTRL.PWM0_VS_RST_EN
//set PWM reset by DVS
#define _PWM_RESET_BY_DVS_DISABLE	0
#define _PWM_RESET_BY_DVS_ENABLE		1

#define _PWM_0_DVS_RESET_ENABLE		_PWM_RESET_BY_DVS_DISABLE
#define _PWM_1_DVS_RESET_ENABLE		_PWM_RESET_BY_DVS_DISABLE
#define _PWM_2_DVS_RESET_ENABLE		_PWM_RESET_BY_DVS_DISABLE
#define _PWM_3_DVS_RESET_ENABLE		_PWM_RESET_BY_DVS_DISABLE
#define _PWM_4_DVS_RESET_ENABLE		_PWM_RESET_BY_DVS_DISABLE
#define _PWM_5_DVS_RESET_ENABLE		_PWM_RESET_BY_DVS_DISABLE
#define _PWM_6_DVS_RESET_ENABLE		_PWM_RESET_BY_DVS_DISABLE
#define _PWM_7_DVS_RESET_ENABLE		_PWM_RESET_BY_DVS_DISABLE
#define _PWM_ST0_DVS_RESET_ENABLE	_PWM_RESET_BY_DVS_DISABLE
#define _PWM_ST1_DVS_RESET_ENABLE	_PWM_RESET_BY_DVS_DISABLE

//0x1801_2104[27],  PWMx_CTRL.PWM0_DUT_8B
//set PWM reset by DVS
#define _PWM_08BIT_OUTPUT		1
#define _PWM_12BIT_OUTPUT		0

#define _PWM_0_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_1_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_2_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_3_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_4_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_5_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_6_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_7_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_ST0_BIT_OUTPUT	_PWM_12BIT_OUTPUT
#define _PWM_ST1_BIT_OUTPUT	_PWM_12BIT_OUTPUT

//0x1801_2104[4],  PWMx_CTRL.Open_drain_mod_sel
//Open drain mode selection
#define _PWM_NORMAL_MODE				0
#define _PWM_OPEN_DRAIN_MODE			1

#define _PWM_0_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_1_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_2_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_3_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_4_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_5_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_6_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_7_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_ST0_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE
#define _PWM_ST1_OPEN_DRAIN_MOD_SEL	_PWM_NORMAL_MODE

//0x1801_2104[0],  PWMx_CTRL.PWM_WIDTH_SEL
//Global control (for duty mode)
#define _PWM_DUTY_ACTIVE		0
#define _PWM_DUTY_INACTIVE	1

#define _PWM_0_WIDTH_SEL		_PWM_DUTY_ACTIVE
#define _PWM_1_WIDTH_SEL		_PWM_DUTY_ACTIVE
#define _PWM_2_WIDTH_SEL		_PWM_DUTY_ACTIVE
#define _PWM_3_WIDTH_SEL		_PWM_DUTY_ACTIVE
#define _PWM_4_WIDTH_SEL		_PWM_DUTY_ACTIVE
#define _PWM_5_WIDTH_SEL		_PWM_DUTY_ACTIVE
#define _PWM_6_WIDTH_SEL		_PWM_DUTY_ACTIVE
#define _PWM_7_WIDTH_SEL		_PWM_DUTY_ACTIVE
#define _PWM_ST0_WIDTH_SEL	_PWM_DUTY_ACTIVE
#define _PWM_ST1_WIDTH_SEL	_PWM_DUTY_ACTIVE

//0x1801_2108[31],  PWMx_Timing_CTRL.PWM0_CNT_MODE
#define _PWM_DUTY_MODE			0
#define _PWM_COUNTER_MODE		1

#define _PWM_0_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_1_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_2_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_3_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_4_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_5_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_6_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_7_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_ST0_CNT_MODE			_PWM_COUNTER_MODE
#define _PWM_ST1_CNT_MODE			_PWM_COUNTER_MODE

//0x1801_2108[30],  PWMx_Timing_CTRL.PWM0_CK_SEL_HS
#define _PWM_REF_CK_SEL			0
#define _PWM_REF_DHS				1

#define _PWM_0_CK_SEL_HS			_PWM_REF_CK_SEL
#define _PWM_1_CK_SEL_HS			_PWM_REF_CK_SEL
#define _PWM_2_CK_SEL_HS			_PWM_REF_CK_SEL
#define _PWM_3_CK_SEL_HS			_PWM_REF_CK_SEL
#define _PWM_4_CK_SEL_HS			_PWM_REF_CK_SEL
#define _PWM_5_CK_SEL_HS			_PWM_REF_CK_SEL
#define _PWM_6_CK_SEL_HS			_PWM_REF_CK_SEL
#define _PWM_7_CK_SEL_HS			_PWM_REF_CK_SEL
#define _PWM_ST0_CK_SEL_HS		_PWM_REF_CK_SEL
#define _PWM_ST1_CK_SEL_HS		_PWM_REF_CK_SEL

//0x1801_2108[29],  PWMx_Timing_CTRL.PWM0_CK_SEL
#define _PWM_CK_CRYSTAL			0
#define _PWM_CK_PLL_OUTPUT		1

#define _PWM_0_CK_SEL				_PWM_CK_CRYSTAL
#define _PWM_1_CK_SEL				_PWM_CK_CRYSTAL
#define _PWM_2_CK_SEL				_PWM_CK_CRYSTAL
#define _PWM_3_CK_SEL				_PWM_CK_CRYSTAL
#define _PWM_4_CK_SEL				_PWM_CK_CRYSTAL
#define _PWM_5_CK_SEL				_PWM_CK_CRYSTAL
#define _PWM_6_CK_SEL				_PWM_CK_CRYSTAL
#define _PWM_7_CK_SEL				_PWM_CK_CRYSTAL
#define _PWM_ST0_CK_SEL			_PWM_CK_CRYSTAL
#define _PWM_ST1_CK_SEL			_PWM_CK_CRYSTAL

//0x1801_2108[27:24],  PWMx_Timing_CTRL.PWM0_ CYCLE_MAX
#define _PWM_0_CYCLE_MAX			0
#define _PWM_1_CYCLE_MAX			0
#define _PWM_2_CYCLE_MAX			0
#define _PWM_3_CYCLE_MAX			0
#define _PWM_4_CYCLE_MAX			0
#define _PWM_5_CYCLE_MAX			0
#define _PWM_6_CYCLE_MAX			0
#define _PWM_7_CYCLE_MAX			0
#define _PWM_ST0_CYCLE_MAX		0
#define _PWM_ST1_CYCLE_MAX		0

//0x1801_2108[13:12],  PWMx_Timing_CTRL.PWM0_M
#define _PWM_0_M					0
#define _PWM_1_M					0
#define _PWM_2_M					0
#define _PWM_3_M					0
#define _PWM_4_M					0
#define _PWM_5_M					0
#define _PWM_6_M					0
#define _PWM_7_M					0
#define _PWM_M_MAX					3

//0x1801_2108[11:0],  PWMx_Timing_CTRL.PWM0_N
#define _PWM_0_N					0
#define _PWM_1_N					0
#define _PWM_2_N					0
#define _PWM_3_N					0
#define _PWM_4_N					0
#define _PWM_5_N					0
#define _PWM_6_N					0
#define _PWM_7_N					0
#define _PWM_N_MAX					0xFFF

//0x1801_1258[4:0],  ST_PWM0_AD0.PWM0CSD
//#define _PMM_PWM_CLOCK_SOURCE_DIVISOR		0
#define _PMM_PWM_ST0_CLOCK_SOURCE_DIVISOR	0
#define _PMM_PWM_ST1_CLOCK_SOURCE_DIVISOR	0
#define _PMM_PWM_CLOCK_SOURCE_DIVISOR_MAX	0x1F //max value = 2^0x1f

#define MAIN_PWM_TOTAL_NUM			(GPIO_TYPE_PWM7 + 1)
#define PMM_PWM_TOTAL_NUM			2
#define PWM_TOTAL_NUM					(GPIO_TYPE_ST_PWM1 + 1)
//==========================================================
//				IC PWM Setting End
//==========================================================

//static unsigned int*	 PQA_TABLE_OFFSET_TEMP = NULL;
//static unsigned int PQA_RUN[PQA_INPUT_TYPE_MAX] = {0};

//static unsigned short PQA_Input_Level[PQA_INPUT_ITEM_MAX];
//static unsigned short PQA_Input_rate[PQA_INPUT_ITEM_MAX];

/* DCTI Coef */
#define COLOR_DLCTI_DM_DCTI_OPTIONS_reg          (0xb802a01c)
#define COLOR_DLCTI_DM_DCTI_1ST_VALUE_reg        (0xb802a020)
#define COLOR_DLCTI_DM_DCTI_2ND_VALUE_reg        (0xb802a024)
#define COLOR_DLCTI_DS_DCTI_OPTIONS_reg          (0xb802a028)
#define COLOR_DLCTI_DS_DCTI_1ST_VALUE_reg        (0xb802a02c)
#define COLOR_DLCTI_DS_DCTI_2ND_VALUE_reg        (0xb802a030)
// use new table in pq misc, elieli
#if 0
static  unsigned char tDCTI_COEF[11][6] =
 {
//	unsigned char Prevent_PE,  unsigned char F_Gain, unsigned char F_th, unsigned char S_DCTI_Enable, unsigned char S_Gain, unsigned char S_Th
		{0x01, 0x00, 0x00, 0x00, 0x00, 0x00},	// 1
		{0x01, 0x03, 0x01, 0x00, 0x00, 0x00},	// 2
		{0x00, 0x06, 0x19, 0x00, 0x00, 0x00},	// 3  th 01->19 JZ
		{0x00, 0x09, 0x01, 0x00, 0x00, 0x00},	// 4
		{0x00, 0x0C, 0x01, 0x00, 0x00, 0x00},	// 5
		{0x00, 0x0F, 0x02, 0x00, 0x00, 0x00},	// 6
		{0x00, 0x03, 0x02, 0x01, 0x03, 0x10},	// 7
		{0x00, 0x06, 0x02, 0x01, 0x06, 0x20},	// 8
		{0x00, 0x0A, 0x10, 0x01, 0x0A, 0x30},	// 9
		{0x00, 0x0F, 0x1F, 0x01, 0x0F, 0x3F},	// 10
		{0x00, 0x1F, 0x1F, 0x00, 0x00, 0x00},      // 11, Color Bar
 };


 unsigned char INEWDCTI_COEF[10][10] =
 {
//	unsigned char data_sel,  unsigned char maxlen, unsigned char psmth, unsigned char lpmode, unsigned char engdiv, unsigned char offdiv, unsigned char uvgain, unsigned char dcti_mode, unsigned char cul_sel, unsigned char dcti_en
		{0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x08, 0x00, 0x00, 0x01},  // 1 SD HDMI
		{0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x10, 0x00, 0x00, 0x01},	// 2 SD Video
		{0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x20, 0x00, 0x00, 0x01},	// 3 HD
		{0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x01},	// 4 ColorBar
		{0x01, 0x07, 0x00, 0x01, 0x01, 0x03, 0x16, 0x00, 0x00, 0x01},	// 5
		{0x01, 0x07, 0x00, 0x01, 0x01, 0x03, 0x16, 0x00, 0x00, 0x01},	// 6
		{0x01, 0x02, 0x00, 0x01, 0x01, 0x03, 0x10, 0x00, 0x00, 0x01},      // 7
		{0x01, 0x07, 0x00, 0x01, 0x01, 0x03, 0x30, 0x00, 0x00, 0x01},	// 8
		{0x01, 0x07, 0x00, 0x01, 0x01, 0x03, 0x16, 0x00, 0x00, 0x01},	// 9
		{0x01, 0x07, 0x00, 0x01, 0x01, 0x03, 0x16, 0x00, 0x00, 0x01},	// 10
 };
/*
DRV_VipIDcti_t gVipIDcti[] =
{
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},	// 0
	{0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00},	// 1
	{0x01, 0x01, 0x03, 0x01, 0x00, 0x00, 0x00},	// 2
	{0x00, 0x01, 0x06, 0x19, 0x00, 0x00, 0x00},	// 3  th 01->19 JZ
	{0x00, 0x01, 0x09, 0x01, 0x00, 0x00, 0x00},	// 4
	{0x00, 0x01, 0x0C, 0x01, 0x00, 0x00, 0x00},	// 5
	{0x00, 0x01, 0x0F, 0x02, 0x00, 0x00, 0x00},	// 6
	{0x00, 0x01, 0x03, 0x02, 0x01, 0x03, 0x10},	// 7
	{0x00, 0x01, 0x06, 0x02, 0x01, 0x06, 0x20},	// 8
	{0x00, 0x01, 0x0A, 0x10, 0x01, 0x0A, 0x30},	// 9
	{0x00, 0x01, 0x0F, 0x1F, 0x01, 0x0F, 0x3F},	// 10
	{0x00, 0x01, 0x1F, 0x1F, 0x00, 0x00, 0x00},      // 11, Color Bar
};
*/

#endif

static unsigned char* RTNR_Y_Table = NULL;
static unsigned char* RTNR_C_Table = NULL;
static unsigned char* DNR_Table = NULL;

unsigned int databaseDCCsize=10;

// Hawaii add for new AutoView 20131001
unsigned char AutoView_flag;

// Hawaii add for Edge Peaking 20131022
unsigned short *Edge_Peaking_Table = NULL;
static unsigned short* Edge_AutoPk_data = NULL; //share memory start point

static unsigned int*	 COEFF_BY_Y_REG = NULL;

static unsigned char* PWM_table_tv057= NULL;

static unsigned char* 	DNR_LEVEL_TABLE=NULL;
static unsigned int*	 NR_TABLE32 = NULL;
static unsigned char* NR_TABLE8 = NULL;

//unsigned char 	SceneChange=0, SceneChange_NR=0;
unsigned char 	SubSceneChange=0;

//unsigned char 	Main_Set_SC=0;
unsigned int 	Total_HistCnt_Sub=0;


static unsigned int RTNR_MAD_count_Y_sum_avg = 0;

static unsigned char AUTO_NR_style = 1;
unsigned char DNR_Auto_lvl_SdHd = 0; //20120302 for MPEG NR setting SD/HD Auto level related with RTNR_MAD_count_Y_sum_avg
unsigned char pre_DNR_Auto_lvl_SdHd = 255;
unsigned char VD_noise_level = 0;
unsigned char pre_VD_noise_level = 255;
unsigned char rate_Lerp_NR = 10;
unsigned char DNR_Flag = 0;
unsigned char Level_Max = 10;

unsigned char AutoNR_Level_bound = 0;

//static unsigned int  DNR_TABLE_32[5] = {DNR_T0_32, DNR_T1_32, DNR_T2_32, DNR_T3_32, DNR_T4_32};
//static unsigned int DNR_TABLE_8[5] = {DNR_T0, DNR_T1, DNR_T2, DNR_T3, DNR_T4};
#if 0 //Replase by PQA adaptive control Flow
static unsigned int MPEGNR_TABLE_8[5] = {MPEGNR_T0, MPEGNR_T1, MPEGNR_T2, MPEGNR_T3, MPEGNR_T4};
#endif

//=============== Mpeg NR =================================
//static unsigned int       mean_local_var_th=0x0100;
static unsigned int       MpegRatioSum=0;
static unsigned char        ContainStill_Count=0;
static unsigned char        MpegRatioSum_Count=0;
static unsigned char        Field_Count=0;//count for every MpegPeriod fields
static unsigned int       NoiseSum_spatial=0;
unsigned char 		NR_HW_Dering_Level_isr = 0;   // New for At  // Erin '100308
static SCALERVIP_MPEGNR scalerVip_mpegNR=0;

//flora, add for Sirius
#define MpegPeriod	9
#define MpegIdxPeriod	(MpegPeriod/3)

static unsigned char        XSTEP_NUM=1;
static unsigned int       array_xstep[3]={0x1000,0x1c71,0x2aab};
static unsigned int       xstep_idx_detect=0;
static unsigned int       xstep_idx_apply=0;
static unsigned char 	    kernel_quality_init=0;
/*
static unsigned char        MpgIdx_X_arr[4]={0,0,0,0};
static unsigned char        NL_mpg=0, NL_mpg_sharp;
static unsigned char        MpgIdx_X=0,MpgIdx_Y=0;
static unsigned int         MpegRatio_ave=0, MpegCounter_H_ave=0;
static unsigned int       MpegCounter_H=0;
*/

//========================================================
//static unsigned char CircleCnt = 0; CSFC mark from 20140429
static unsigned char PictureMode; // picture mode

//=============== Skin Tone Detection =================
unsigned char        skin_tone_for_panasonic=0;
unsigned char        skin_tone_begin=0;
unsigned char        skin_detected=0;
unsigned char        dcc_first_setting = 1;
unsigned char        start_to_detected = 0;
unsigned int		regDev, enter_cnt=0;
unsigned char		bld_f0, bld_f1, bld_f2, blend_factor;
unsigned char		pre_curve[15];
unsigned char		user_curve[15];
unsigned char		skin_tone_found;
unsigned char		new_skin_tone_flag=0;
unsigned char		skin_tone_huu_bin_ratio=0;


//========= User Defined Curve & Pure Color  Detection ==========

//========= erroe distribution Detection ==========
unsigned char error_dist=0;
//-- End New for AT Erin '100308

static unsigned char		scalerVipBrightness = 0;
static unsigned char		scalerVipContrast = 0;

static unsigned char TableNRSpatial = 0;
unsigned int  hue_hist_2[COLOR_HUE_HISTOGRAM_LEVEL];

//=========hsinyi icm hue hsitogram========
unsigned char icm_hue_cnt_begin =0;
unsigned char icm_hue_cnt_result =0;
unsigned char huehist_flag=0;
//=================================

static unsigned char TableNR_MPEGNR_H;
static unsigned char TableNR_MPEGNR_V;

//=================================
unsigned char TableNR_SNR_Y;
unsigned char TableNR_SNR_C;
//==========planck add for TV AutoNR=======
static unsigned char TableNRTemporal;
static unsigned char TableNR_RTNR_Y;
static unsigned char TableNR_RTNR_C;
unsigned char VIP_FACTORY_UnShpMask;
unsigned char VIP_FACTORY_SCALEPK;
unsigned char VIP_FACTORY_SHP1D2D_EGSM;

unsigned short scalerVip_ICM_Global_Sat=0;

unsigned char scalerVip_Scaler_FIR_H=0;
unsigned char scalerVip_Scaler_FIR_V=0;

unsigned char scalerVip_Scaler_FIR_H_8tap=0;
unsigned char scalerVip_Scaler_FIR_V_6tap=0;


unsigned int scalerVip_PEAKING_POS_RANGE_MAX = 0;
unsigned int scalerVip_PEAKING_NEG_RANGE_MAX = 0;
unsigned char scalerVip_PEAKING_CORING = 0;
unsigned char scalerVip_PEAKING_LEVEL = 0;

unsigned char TableNR_HMCNR;
unsigned char TableNR_VerticalNR;

#define SU_PK_COEF_COL_MAX	6

#define COLOR_D_VC_GLOBAL_CTRL_reg               (0xb802a000)

//===================================

unsigned int Previous_TV_signal_Status;
unsigned char Previous_TV_noise_level;
unsigned int Previous_TV_DNR_level;
unsigned int TV_AutoNR_On_Off=0;

unsigned int AUTO_DNR_RTNR_Leve=0;
unsigned int AUTO_DNR_SNR_Leve=0;

unsigned int Previous_DNR_AUTOMODE_CaseLevel=0;
unsigned char AUTOMODE_status=0;
unsigned char AUTOMODE_on_off=0;

unsigned char HDMICOLORBAR_on_off=0;
unsigned char COLORBAR_on_off=0;

//=============== for MEMC Info jzl 20151231 =================

SET_MEMC_SCALER_VIP_INFO setScalerVIPInfo = {0};

//=============== for MEMC info ==============================
//#define complement2(arg) (((~arg)&0x7FF)+1)

//===============================================================//
//DCC table, Elsie 20131210
//===============================================================//
//static unsigned int dcc_histogram_write_cnt = 0;



//==================== SmartFit =================
unsigned int Smartfit_Frame_Sum = 0;

//=====================================================
//==================== new RTNR adaptive table =================
//=====================================================
#ifdef ISR_NEW_RTNR_ENABLE
#if 0
//Ypbpr/HDMI
static unsigned char New_RTNR_Coef_1[8][8] = {
		/*edge		0	1	2	3	4	5	6	7	*/
		/*sad  */
		/*	0  */{	0,	1,	2,	3,	4,	5,	7,	7},
		/*	1  */{	1,	1,	2,	3,	5,	6,	7,	7},
		/*	2  */{	2,	2,	3,	4,	5,	7,	7,	7},
		/*	3  */{	2,	3,	4,	5,	6,	7,	7,	7},
		/*	4  */{	4,	6,	6,	6,	6,	7,	7,	7},
		/*	5  */{	5,	5,	7,	7,	7,	7,	7,	7},
		/*	6  */{	7,	7,	7,	7,	7,	7,	7,	7},
		/*	7  */{	7,	7,	7,	7,	7,	7,	7,	7},
};

static unsigned char TV_AutoNr_RTNR_Coef_A[8][8]={
			/*edge		0	1	2	3	4	5	6	7	*/
			/*sad  */
			/*	0  */{	1,	1,	3,	4,	5,	6,	7,	7},
			/*	1  */{	1,	1,	3,	5,	6,	7,	7,	7},
			/*	2  */{	2,	2,	4,	5,	6,	7,	7,	7},
			/*	3  */{	4,	5,	5,	6,	6,	7,	7,	7},
			/*	4  */{	6,	6,	6,	6,	6,	7,	7,	7},
			/*	5  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	6  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	7  */{	7,	7,	7,	7,	7,	7,	7,	7},

			};
static unsigned char TV_AutoNr_RTNR_Coef_B[8][8]={
			/*edge		0	1	2	3	4	5	6	7	*/
			/*sad  */
			/*	0  */{	2,	2,	3,	3,	5,	6,	7,	7},
			/*	1  */{	2,	2,	4,	5,	6,	7,	7,	7},
			/*	2  */{	3,	4,	4,	5,	6,	7,	7,	7},
			/*	3  */{	4,	5,	5,	6,	6,	7,	7,	7},
			/*	4  */{	5,	6,	6,	6,	6,	7,	7,	7},
			/*	5  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	6  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	7  */{	7,	7,	7,	7,	7,	7,	7,	7},

			};

// CVBS
static unsigned char CVBS_AutoNr_RTNR_Coef_A[8][8]={
			/*edge		0	1	2	3	4	5	6	7	*/
			/*sad  */
			/*	0  */{	0,	1,	2,	4,	5,	6,	7,	7},
			/*	1  */{	1,	2,	3,	5,	6,	7,	7,	7},
			/*	2  */{	2,	3,	4,	5,	6,	7,	7,	7},
			/*	3  */{	4,	5,	5,	6,	6,	7,	7,	7},
			/*	4  */{	6,	6,	6,	6,	6,	7,	7,	7},
			/*	5  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	6  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	7  */{	7,	7,	7,	7,	7,	7,	7,	7},
			};
static unsigned char CVBS_AutoNr_RTNR_Coef_B[8][8]={
			/*edge		0	1	2	3	4	5	6	7	*/
			/*sad  */
			/*	0  */{	1,	2,	3,	5,	6,	7,	7,	7},
			/*	1  */{	2,	2,	4,	5,	6,	7,	7,	7},
			/*	2  */{	3,	3,	4,	5,	6,	7,	7,	7},
			/*	3  */{	4,	4,	5,	6,	7,	7,	7,	7},
			/*	4  */{	5,	6,	6,	7,	7,	7,	7,	7},
			/*	5  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	6  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	7  */{	7,	7,	7,	7,	7,	7,	7,	7},
			};
static unsigned char CVBS_AutoNr_RTNR_Coef_C[8][8]={
			/*edge		0	1	2	3	4	5	6	7	*/
			/*sad  */
			/*	0  */{	2,	2,	3,	3,	5,	6,	7,	7},
			/*	1  */{	2,	2,	4,	5,	6,	7,	7,	7},
			/*	2  */{	3,	4,	4,	5,	6,	7,	7,	7},
			/*	3  */{	4,	5,	5,	6,	6,	7,	7,	7},
			/*	4  */{	5,	6,	6,	6,	6,	7,	7,	7},
			/*	5  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	6  */{	7,	7,	7,	7,	7,	7,	7,	7},
			/*	7  */{	7,	7,	7,	7,	7,	7,	7,	7},
			};
#endif
#endif
//==========================================================================
//==========================================================================

//=======================
static unsigned int andMASK_Table1[32]=	{
							0xfffffffe, 0xfffffffc, 0xfffffff8, 0xfffffff0,
							0xffffffe0, 0xffffffc0, 0xffffff80, 0xffffff00,
							0xfffffe00, 0xfffffc00, 0xfffff800, 0xfffff000,
							0xffffe000, 0xffffc000, 0xffff8000, 0xffff0000,
							0xfffe0000, 0xfffc0000, 0xfff80000, 0xfff00000,
							0xffe00000, 0xffc00000, 0xff800000, 0xff000000,
							0xfe000000, 0xfc000000, 0xf8000000, 0xf0000000,
							0xe0000000, 0xc0000000, 0x80000000, 0x00000000
							};
static unsigned int andMASK_Table2[32]=	{
							0x00000000, 0x00000001, 0x00000003, 0x00000007,
							0x0000000f, 0x0000001f, 0x0000003f, 0x0000007f,
							0x000000ff, 0x000001ff, 0x000003ff, 0x000007ff,
							0x00000fff, 0x00001fff, 0x00003fff, 0x00007fff,
							0x0000ffff, 0x0001ffff, 0x0003ffff, 0x0007ffff,
							0x000fffff, 0x001fffff, 0x003fffff, 0x007fffff,
							0x00ffffff, 0x01ffffff, 0x03ffffff, 0x07ffffff,
							0x0fffffff, 0x1fffffff, 0x3fffffff, 0x7fffffff
							};
unsigned int PQA_Sort_Tmp[2][PQA_ITEM_MAX];
//=======================


//=================================================================================//
//  Auto MA enable/disable setting, VIP Page1
//=================================================================================//
static unsigned char TVAutoNR_Mode= 0;//default setting, final level depend by vip table
//=================================================================================//
extern _system_setting_info		*system_info_structure_table;
extern _RPC_system_setting_info	*RPC_system_info_structure_table;
extern SLR_VIP_TABLE			*g_Share_Memory_VIP_TABLE_Struct_isr;
extern SLR_VIP_TABLE_CUSTOM_TV001	 *g_Share_Memory_VIP_TABLE_Custom_Struct_isr;
extern _clues *SmartPic_clue;
extern _RPC_clues *RPC_SmartPic_clue;
extern unsigned char *DCR_TABLE;
extern VIP_table_crc_value *vip_table_crc_isr;
extern VIP_DeMura_TBL DeMura_TBL;

unsigned char					 *g_Dynamic_Peaking_Display_TABLE= NULL;

Stop_Polling_t	 Stop_Polling;
Start_Print_info_t Start_Print={1};//for scalerDi.cpp ROSprintrf( %0) issue !!!
static unsigned char Noisereduction_Vfilter= 0; //yuan1024 ::VNR::TV005
static unsigned char Noisereduction_Vfilter_ON= 0; //yuan1024 ::VNR::TV005

RPC_TV003_Table *TV003_share_memory_struct=NULL;

//=================================================================================//
//	TG45_Flag
//=================================================================================//
//static unsigned char TG45_Flag = 0;
unsigned char TG45_Flag = VIP_TG45_FLAG_NUM;
static unsigned char pre_TG45_Flag = 0;
//=================================================================================//

//=================================================================================//
static unsigned char AutoNR_Enable= TRUE;
static unsigned char AutoNR_Enable_by_Low_Mid_High= FALSE;
static unsigned char DNR_log = 0;
static unsigned char RTNR_log = 0;
static unsigned char SNR_log = 0;
static unsigned char INR_log = 0;

static unsigned char DEBUG_AUTO_NR = 0;
static unsigned char DEBUG_VD_NOISE = 0;
static unsigned char DEBUG_RTNR_MAD = 0;
static unsigned char DEBUG_HISTOGRAM_MEAN = 0;
//static unsigned char DNR_TABLE_SECET = 0;
//===========================

//======= ISR function varable Define ========
//static unsigned char TVnoise_Mode= TRUE; // TRUE-> sharp, FALSE-> Blur
//===================================

//======= RTNR K force =======
static unsigned char RTNR_K_force_level = 0;
static unsigned char RTNR_K_force_offset = 0;
//=======================

//========Debug define========
#define TV_AUTONR_Debug  TRUE
//========================
unsigned char Enable_Hist_MAD_Calculate = 1;
unsigned char colorless_flag = 0;
unsigned short hue_hist_ratio[COLOR_HUE_HISTOGRAM_LEVEL]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned short Y_hist_ratio[TV006_VPQ_chrm_bin]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned short Pre_Hue_hist_ratio[COLOR_HUE_HISTOGRAM_LEVEL] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned short Pre_Y_hist_ratio[32] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned int RTNR_MAD_count_Y_avg=0,RTNR_MAD_count_U_avg=0,RTNR_MAD_count_V_avg=0;
unsigned int RTNR_MAD_count_Y2_avg=0,RTNR_MAD_count_U2_avg=0,RTNR_MAD_count_V2_avg=0;
unsigned int RTNR_MAD_count_Y3_avg=0,RTNR_MAD_count_U3_avg=0,RTNR_MAD_count_V3_avg=0;
unsigned int hmcnr_sttistic[11];
unsigned short center=0,L1=0,R1=0,others=0;


unsigned int sat_hist_ratio[32]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned int sat_hist[32]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned int sat_ratio_mean_value;
unsigned char correctionBit1_Duty = 5;
unsigned char nonAuto_RTNR_Y_LEVEL, nonAuto_RTNR_C_LEVEL;
unsigned char correctionBit1_duty_debug = 0;
unsigned char DCC_Limit_range_dark_extend = 0; //0~16
unsigned char DCC_Limit_range_light_extend = 0; //0~16
unsigned char DCC_SCurve_Turning_Point_Smooth = 0;

//for T2 2644
#define hist_dcc_new_sony_log_flag 0
#define printf_log_flag 0
#define meanSat_meanValue_printf_log_flag 0
#define SC_detect_printf_log_flag 0
#define base_curve_benchmark 1024
#define limit_range_up_b 940


#define limit_range_low_b 64
#if 0 //Replase by PQA adaptive control Flow
static unsigned char RTNR_LEVEL_SDHD_SONY, SPNR_LEVEL_SDHD_SONY, RTNR_LEVEL_SDHD_OFFSET_byMotionCompare;
#else
/*static unsigned char RTNR_LEVEL_SDHD_OFFSET_byMotionCompare*/;
#endif
unsigned int edge_motion_count, edge_motion_count_ave, total_motion_count, total_motion_count_ave, noise_flat_motion_count, noise_flatl_motion_count_ave;


unsigned short 	*intelligent_picture_table=NULL;
unsigned char Sharpness_OSD_update = _FALSE;
//unsigned char Sony_DCC_API_ON = 0, TV_002_style_ON = 0;
//unsigned char Sony_Radio_Caculator_flag, Sony_Radio_Caculator_RTNR_offset=0;
unsigned int Noise_Stastic_Count;

//========RTNR level compute========
unsigned char DNR_motion_lvl_SdHd;
//========profile block motion========
MOTION_NOISE_TYPE MAD_motion_status = MOTION_NOISE_TYPE_STILL;
MOTION_NOISE_TYPE block_motion_status = MOTION_NOISE_TYPE_STILL;
unsigned char block_motion_count_H = 0;
unsigned char block_motion_count_V = 0;
unsigned char block_noise_count_H = 0;
unsigned char block_noise_count_V = 0;

//========Fade detection========
unsigned char Fade_flag = 0;

//========3D mode========
unsigned char is3DLRmode = FALSE;

unsigned char set_DCR_PWM_Enable = 0;
/*******************************************************************************
* Program
******************************************************************************/

extern unsigned int scalerInfo_getPanelInfo_3DPanelType(void);
extern unsigned char scalerInfo_check_is_3dMode(void);
extern unsigned char VODMA_3D_Check_Is_Idma3dMode(void);
extern void  IoReg_D_domain_SetBits(unsigned int addr, unsigned int Mask);
extern void  IoReg_D_domain_ClearBits(unsigned int addr, unsigned int Mask);
extern int rtk_pwm_backlight_set_duty(int duty);

unsigned char BusyCheckRegBit(unsigned int addr, unsigned int value, unsigned int timeoutcnt)
{
	do {
		if(scaler_rtd_inl(addr) & value) {
			return TRUE;
		}
	} while(timeoutcnt-- != 0);

	return FALSE;
}


void drif_color_Edge_Noise_level(unsigned char ch, _rtnr_enl *ENL)
{
	if(ch==1)//sub
	{
	//  scalerDrvPrint("\n drif_color_enl() SUB!\n");
	 return ;
	}
	else//main
	{
	//  scalerDrvPrint("\n enl()\n");
		di_im_di_rtnr_et_count_y_RBUS im_di_rtnr_et_count_y_reg;
		di_im_di_rtnr_et_sum_y_RBUS im_di_rtnr_et_sum_y_reg;
//		di_im_di_rtnr_et_sum_u_RBUS im_di_rtnr_et_sum_u_reg;
//		di_im_di_rtnr_et_sum_v_RBUS im_di_rtnr_et_sum_v_reg;
		im_di_rtnr_et_count_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_COUNT_Y_reg);
		im_di_rtnr_et_sum_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_Y_reg);
		//im_di_rtnr_et_sum_u_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_U_reg);
		//im_di_rtnr_et_sum_v_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_V_reg);

		(ENL->ENL_Y)=  (im_di_rtnr_et_sum_y_reg.cp_temporal_same_et_sad_sum_y)/(im_di_rtnr_et_count_y_reg.cp_temporal_same_et_cnt_y+1);
		//(ENL->ENL_U)=  (im_di_rtnr_et_sum_u_reg.cp_temporal_same_et_sad_sum_u)/(im_di_rtnr_et_count_y_reg.cp_temporal_same_et_cnt_y+1);
		//(ENL->ENL_V)=  (im_di_rtnr_et_sum_v_reg.cp_temporal_same_et_sad_sum_v)/(im_di_rtnr_et_count_y_reg.cp_temporal_same_et_cnt_y+1);

		//  if(abc_cnt>=30)
		//  {
		//   scalerDrvPrint("\n******\nVIP: cnt=%d, ENL_Y=%d, ENL_U=%d, ENL_V=%d \n\n******\n", abc_cnt, ENL_Y,ENL_U,ENL_V);
		//   abc_cnt = 0;
		//  }
		//  abc_cnt++;
	}
}

void drvif_color_ClueGather( unsigned char ch, _clues* clueA)
{
	_rtnr_enl VIP_ENL={0};


	di_im_di_si_film_motion_next_h_t_RBUS next_h_t;
	di_im_di_si_film_motion_next_h_m_RBUS next_h_m;
	di_im_di_si_film_motion_next_h_b_RBUS next_h_b;

	di_im_di_si_film_motion_pre_h_t_RBUS pre_h_t;
	di_im_di_si_film_motion_pre_h_m_RBUS pre_h_m;
	di_im_di_si_film_motion_pre_h_b_RBUS pre_h_b;

	di_im_di_si_film_motion_next_v_l_RBUS next_v_l;
	di_im_di_si_film_motion_next_v_m_RBUS next_v_m;
	di_im_di_si_film_motion_next_v_r_RBUS next_v_r;

	di_im_di_si_film_motion_pre_v_l_RBUS pre_v_l;
	di_im_di_si_film_motion_pre_v_m_RBUS pre_v_m;
	di_im_di_si_film_motion_pre_v_r_RBUS pre_v_r;

	di_im_di_si_film_motion_next_c_RBUS next_c;
	di_im_di_si_film_motion_pre_c_RBUS pre_c;

	di_im_di_si_ma_total_fm_sum_RBUS total_fm_sum;
	di_im_di_si_ma_large_fm_pixel_RBUS large_fm_pixel;
	di_im_di_si_ma_large_fm_sum_RBUS large_fm_sum;

	next_h_t.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	next_h_m.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	next_h_b.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);

	pre_h_t.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	pre_h_m.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	pre_h_b.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);

	next_v_l.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	next_v_m.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	next_v_r.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);

	pre_v_l.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	pre_v_m.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	pre_v_r.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);

	next_c.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	pre_c.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);

	total_fm_sum.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	large_fm_pixel.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);
	large_fm_sum.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_NEXT_H_T_reg);

	clueA->film_motion_next_h_t = next_h_t.film_motionstatus_699_680;
	clueA->film_motion_next_h_m = next_h_m.film_motionstatus_679_660;
	clueA->film_motion_next_h_b = next_h_b.film_motionstatus_659_640;

	clueA->film_motion_pre_h_t = pre_h_t.film_motionstatus_539_520;
	clueA->film_motion_pre_h_m = pre_h_m.film_motionstatus_519_500;
	clueA->film_motion_pre_h_b = pre_h_b.film_motionstatus_499_480;

	clueA->film_motion_next_v_l = next_v_l.film_motionstatus_639_620;
	clueA->film_motion_next_v_m = next_v_m.film_motionstatus_619_600;
	clueA->film_motion_next_v_r = next_v_r.film_motionstatus_599_580;

	clueA->film_motion_pre_v_l = pre_v_l.film_motionstatus_479_460;
	clueA->film_motion_pre_v_m = pre_v_m.film_motionstatus_459_440;
	clueA->film_motion_pre_v_r = pre_v_r.film_motionstatus_439_420;

	clueA->film_motion_next_c = next_c.film_motionstatus_579_560;
	clueA->film_motion_pre_c = pre_c.film_motionstatus_419_400;

	clueA->ma_total_fm_sum = total_fm_sum.total_frame_motion_sum;
	clueA->ma_large_fm_pixel = large_fm_pixel.large_frame_motion_pixel;
	clueA->ma_large_fm_sum = large_fm_sum.large_frame_motion_sum;

	drif_color_Edge_Noise_level(ch, &VIP_ENL);
	clueA->rtnr_noise = VIP_ENL.ENL_Y;
}

/**
 * Detect color histogram
 *
 * @param	en_test: debug mode
 * @return	void
 */
void scalerVIP_colorHistDetect(unsigned int en_test)
{
	static unsigned int DarkSum = 0;
	static unsigned int BritSum = 0;
	static unsigned char flag_g_PureColor = 0;
	color_d_vc_global_ctrl_RBUS d_vc_global_ctrl_Reg;

	unsigned char it = 0;
	unsigned int Sum_Hist = 0;
	unsigned char en_DumpHist = 0;
	unsigned int ratio_Hist = 0;
	unsigned char th_HistChk = 0;
	unsigned char th_HistChk_in = 0;
	unsigned char th_HistChk_out = 0;
	unsigned char en_HistTest = 0;
	//unsigned char flag_PureColor = 0;
	unsigned int tmp_max = 0;
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);

	//scalerDrvPrint( "enter scalerVIP_colorHistDetect\n" );
	d_vc_global_ctrl_Reg.regValue = scaler_rtd_inl(COLOR_D_VC_GLOBAL_CTRL_reg);

	//----dump histogram data and calculate sumation-----
	//en_DumpHist = (en_test<<28)>>31; //bit 3
	en_DumpHist = (en_test & _BIT3)>>3; //bit 3

	for ( it=0 ; it<32 ; it++ ) {
		Sum_Hist += reg_HistCnt[it];
		//if ( en_DumpHist == 1 ) {
		//	scalerDrvPrint( "Hist BIN%d=%d\n", it, reg_HistCnt[it] );
		//}
	}

	//if ( en_DumpHist == 1 ) {
	//	scalerDrvPrint( "Hist Sum=%d\n", Sum_Hist );
	//}

	DarkSum = (reg_HistCnt[0]<<2)+(reg_HistCnt[1]<<1)+reg_HistCnt[2]+reg_HistCnt[3];
	BritSum = (reg_HistCnt[31]<<2)+(reg_HistCnt[30]<<1)+reg_HistCnt[29]+reg_HistCnt[28];


	//th_HistChk_in = (en_test<<16)>>24;//bit8~15
	th_HistChk_in = 80;
	//th_HistChk_out = (en_test<<8)>>24;//bit16~23
	th_HistChk_out = 75;
	//en_HistTest = (en_test<<27)>>31;//bit 4
	en_HistTest = (en_test & _BIT4)>>4;//bit 4

	//-----set th----
	if ( flag_g_PureColor ==0 )
		th_HistChk = th_HistChk_in;
	else
		th_HistChk = th_HistChk_out;

	//scalerDrvPrint( "=============th_HistChk_in=%d================\n", th_HistChk_in );

	for ( it=7 ; it<22 ; it++ ) {
		if ( Sum_Hist != 0 ) {
			ratio_Hist = (reg_HistCnt[it]+reg_HistCnt[it+1]) * 100 / Sum_Hist;
			//scalerDrvPrint( "=============RatioHist=%d================\n", ratio_Hist );
		}
		if ( ratio_Hist > tmp_max )
			tmp_max = ratio_Hist;
	}

	if ( tmp_max>th_HistChk && Sum_Hist )
		flag_g_PureColor = 1;
	else
		flag_g_PureColor = 0;
}


unsigned char scalerVIP_Saturation_Detection(void)//modify for mac3 icm
{
	unsigned int m_nRatio=0;
	unsigned char m_nCount=2,nIndex;
	unsigned char Saturation_detect_flag = 0,sat_thl=98;

	for(nIndex = 0 ;nIndex <m_nCount;nIndex++)
		m_nRatio += (SmartPic_clue->Sat_Main_His_Ratio)[nIndex];

	if(m_nRatio > sat_thl)
	{
		Saturation_detect_flag = 1;
	}
	else
	{
		Saturation_detect_flag = 0;
	}
	return Saturation_detect_flag;

	return 0 ;

}

unsigned char VD_noise_Status_sum_avg()
{
	static unsigned int VD_noise_count_Status_sum_avg = 0;
	static unsigned char VD_noise_count_Status_value[255] = {0};  //store value
	unsigned char countt;
	static unsigned int counter_noise = 0;
	static unsigned char VD_noise_flag = 1;
	static unsigned int VD_noise_count_Status_sum = 0;

	if ((counter_noise < (VD_noise_status_Num+1)) && VD_noise_flag)
	{
		VD_noise_count_Status_value[counter_noise % (VD_noise_status_Num+1)] = (unsigned char)VDPQ_rtd_inl(VDTOP_NOISE_STATUS_reg);
		VD_noise_count_Status_sum = VD_noise_count_Status_sum + VD_noise_count_Status_value[counter_noise % (VD_noise_status_Num+1)];
		VD_noise_count_Status_sum_avg = VD_noise_count_Status_sum /(counter_noise+1);
		//ROSPrintf(" yuan1024VD_noise_count_Status_sum_avg222222222222  = %d  %d\n",VD_noise_count_Status_sum_avg, VD_noise_count_Status_sum);
	}
	else
	{
		countt = counter_noise % (VD_noise_status_Num+1);

		if(VD_noise_count_Status_sum > VD_noise_count_Status_value[countt])
			VD_noise_count_Status_sum = VD_noise_count_Status_sum - VD_noise_count_Status_value[countt];
		else
			VD_noise_count_Status_sum = 0;

		VD_noise_count_Status_value[countt] = (unsigned char)VDPQ_rtd_inl(VDTOP_NOISE_STATUS_reg);

		VD_noise_count_Status_sum = ( VD_noise_count_Status_sum + VD_noise_count_Status_value[countt]);
		VD_noise_count_Status_sum_avg = VD_noise_count_Status_sum / (VD_noise_status_Num+1);
		VD_noise_flag = 0;
	}

	counter_noise ++;
	#if 0
	if(counter_noise % 60 == 0)
	{
		ROSPrintf("-----------------yuan1024-----------------------\n");
		ROSPrintf(" yuan1024 VD_noise_status_Num  =%d\n",VD_noise_status_Num+1);
		ROSPrintf(" yuan1024 VD_noise_count_Status_sum_avg  = %d\n",VD_noise_count_Status_sum_avg);
		ROSPrintf(" yuan1024 TV_Auto_NR_LEVEL = %d\n",VD_noise_level);
		ROSPrintf("-----------------yuan1024-----------------------\n");


	}
	#endif

	return VD_noise_count_Status_sum_avg;

}


//====================================================
#define Field_count_check 5
#define Adap_newRTNR_Count_Num 5
#define MAD_th 5


	//=============()e
	//+++++++++++++vertical lpf
	unsigned int Gray_solution_table[5][6] =
	{
//		en,		hfd_statistic_max	hfd_statistic_min	vfir_weight_max	vfir_weight_min
		{1,		20000,			4000,			5,				9,				},	//NTSC
		{1,		20000,			4000,			5,				9,				},	//PAL
		{1,		20000,			4000,			5,				9,				},	//SD
		{1,		20000,			4000,			5,				9,				},	//HD
		{1,		20000,			4000,			5,				9,				},	//VGA
	};

unsigned char drvif_color_check_source_remmping(unsigned char display)
{
	unsigned char which_source = 255;
	unsigned char remmping_source = 255;

	which_source = (RPC_system_info_structure_table->VIP_source);

	if(which_source==VIP_QUALITY_TV_NTSC||which_source==VIP_QUALITY_CVBS_NTSC)
		remmping_source = 0;
	else if(which_source==VIP_QUALITY_TV_PAL||which_source==VIP_QUALITY_CVBS_PAL)
		remmping_source = 1;
	else if(((which_source>=VIP_QUALITY_YPbPr_480I) && (which_source<=VIP_QUALITY_YPbPr_576P))||
		    ((which_source>=VIP_QUALITY_HDMI_480I) 	&& (which_source<=VIP_QUALITY_HDMI_576P) )||
			((which_source>=VIP_QUALITY_DTV_480I) 	&& (which_source<=VIP_QUALITY_DTV_576P)  )||
			((which_source>=VIP_QUALITY_PVR_480I) 	&& (which_source<=VIP_QUALITY_PVR_576P)  ))
	{
		remmping_source = 2;
	}
	else if(((which_source>=VIP_QUALITY_YPbPr_720P) && (which_source<=VIP_QUALITY_YPbPr_1080P))||
			((which_source>=VIP_QUALITY_HDMI_720P) 	&& (which_source<=VIP_QUALITY_HDMI_1080P))||
			((which_source>=VIP_QUALITY_DTV_720P) 	&& (which_source<=VIP_QUALITY_DTV_1080P))||
			((which_source>=VIP_QUALITY_PVR_720P) 	&& (which_source<=VIP_QUALITY_PVR_1080P)))
	{
		remmping_source = 3;
	}
	else
	{
		remmping_source = 2;
	}

    return(remmping_source);
}


void drvif_color_inewdcti_set(unsigned char display, unsigned char data_sel,  unsigned char maxlen, unsigned char psmth, unsigned char lpmode, unsigned char engdiv, unsigned char offdiv, unsigned char uvgain, unsigned char dcti_mode, unsigned char cur_sel, unsigned char dcti_en)
{
	idcti_i_dcti_ctrl_1_RBUS ich1_newdcti_reg;

	if (display == SLR_MAIN_DISPLAY)
	{

		ich1_newdcti_reg.regValue=scaler_rtd_inl(IDCTI_I_DCTI_CTRL_1_reg);


		if(ich1_newdcti_reg.data_sel < data_sel)
			ich1_newdcti_reg.data_sel++;
		else if(ich1_newdcti_reg.data_sel > data_sel)
			ich1_newdcti_reg.data_sel--;

		if(ich1_newdcti_reg.maxlen < maxlen)
			ich1_newdcti_reg.maxlen++;
		else if(ich1_newdcti_reg.maxlen > maxlen)
			ich1_newdcti_reg.maxlen--;

		if(ich1_newdcti_reg.psmth < psmth)
			ich1_newdcti_reg.psmth++;
		else if(ich1_newdcti_reg.psmth > psmth)
			ich1_newdcti_reg.psmth--;


		if(ich1_newdcti_reg.lp_mode < lpmode)
			ich1_newdcti_reg.lp_mode++;
		else if(ich1_newdcti_reg.lp_mode > lpmode)
			ich1_newdcti_reg.lp_mode--;

		if(ich1_newdcti_reg.engdiv < engdiv)
			ich1_newdcti_reg.engdiv++;
		else if(ich1_newdcti_reg.engdiv > engdiv)
			ich1_newdcti_reg.engdiv--;



		if(ich1_newdcti_reg.offdiv < offdiv)
			ich1_newdcti_reg.offdiv++;
		else if(ich1_newdcti_reg.offdiv > offdiv)
			ich1_newdcti_reg.offdiv--;

		if(ich1_newdcti_reg.uvgain < uvgain)
			ich1_newdcti_reg.uvgain++;
		else if(ich1_newdcti_reg.uvgain > uvgain)
			ich1_newdcti_reg.uvgain--;

		if(ich1_newdcti_reg.dcti_mode < dcti_mode)
			ich1_newdcti_reg.dcti_mode++;
		else if(ich1_newdcti_reg.dcti_mode > dcti_mode)
			ich1_newdcti_reg.dcti_mode--;

		if(ich1_newdcti_reg.cur_sel < cur_sel)
			ich1_newdcti_reg.cur_sel++;
		else if(ich1_newdcti_reg.cur_sel > cur_sel)
			ich1_newdcti_reg.cur_sel--;

		if(ich1_newdcti_reg.dcti_en < dcti_en)
			ich1_newdcti_reg.dcti_en++;
		else if(ich1_newdcti_reg.dcti_en > dcti_en)
			ich1_newdcti_reg.dcti_en--;


		scaler_rtd_outl(IDCTI_I_DCTI_CTRL_1_reg, ich1_newdcti_reg.regValue);

	}

}

//JZ Mac3
void drvif_color_inewdcti_table_isr(DRV_VipNewIDcti_Table* ptr,unsigned char offset_gain)
{
	idcti_i_dcti_ctrl_1_RBUS ich1_newdcti_reg_1;
	idcti_i_dcti_ctrl_2_RBUS ich1_newdcti_reg_2;
	idcti_i_dcti_ctrl_3_RBUS ich1_newdcti_reg_3;
	idcti_i_dcti_ctrl_4_RBUS ich1_newdcti_reg_4;
	idcti_i_dcti_ctrl_5_RBUS ich1_newdcti_reg_5;
	idcti_i_dcti_ctrl_6_RBUS ich1_newdcti_reg_6;
	idcti_i_dcti_ctrl_7_RBUS ich1_newdcti_reg_7;

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
	{
		ROSPrintf("1.offset_gain=%d\n",offset_gain);
	}

	if(!ptr)
		return;

//Ctl1
	ich1_newdcti_reg_1.regValue= scaler_rtd_inl(IDCTI_I_DCTI_CTRL_1_reg);

	ich1_newdcti_reg_1.data_sel = ptr->VipNewIDcti_ctl1.data_sel;
	ich1_newdcti_reg_1.maxlen = ptr->VipNewIDcti_ctl1.maxlen;
	ich1_newdcti_reg_1.psmth = ptr->VipNewIDcti_ctl1.psmth;
	ich1_newdcti_reg_1.lp_mode = ptr->VipNewIDcti_ctl1.lp_mode;
	ich1_newdcti_reg_1.engdiv = ptr->VipNewIDcti_ctl1.engdiv;
	ich1_newdcti_reg_1.offdiv= ptr->VipNewIDcti_ctl1.offdiv;

	ich1_newdcti_reg_1.uvgain= ((ptr->VipNewIDcti_ctl1.uvgain)+offset_gain)>127?127:((ptr->VipNewIDcti_ctl1.uvgain)+offset_gain);

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
	{
		ROSPrintf("2.uvgain=%d, offset_gain=%d\n",(ptr->VipNewIDcti_ctl1.uvgain),offset_gain);
	}

	/*
	if(ich1_newdcti_reg_1.uvgain>127)
	{
		ich1_newdcti_reg_1.uvgain = 127;
	}
	*/
	ich1_newdcti_reg_1.dcti_mode= ptr->VipNewIDcti_ctl1.dcti_mode;
	ich1_newdcti_reg_1.cur_sel = ptr->VipNewIDcti_ctl1.cur_sel;
	ich1_newdcti_reg_1.dcti_en = ptr->VipNewIDcti_ctl1.dcti_en;

	scaler_rtd_outl(IDCTI_I_DCTI_CTRL_1_reg, ich1_newdcti_reg_1.regValue);

//Ctl2
	ich1_newdcti_reg_2.regValue= scaler_rtd_inl(IDCTI_I_DCTI_CTRL_2_reg);

	ich1_newdcti_reg_2.uvsync_en= ptr->VipNewIDcti_ctl2.uvsync_en;
	ich1_newdcti_reg_2.tran_mode= ptr->VipNewIDcti_ctl2.tran_mode;
	ich1_newdcti_reg_2.rate_steep= ptr->VipNewIDcti_ctl2.rate_steep;
	ich1_newdcti_reg_2.th_steep= ptr->VipNewIDcti_ctl2.th_steep;
	ich1_newdcti_reg_2.th_coring= ptr->VipNewIDcti_ctl2.th_coring;
	ich1_newdcti_reg_2.steep_mode= ptr->VipNewIDcti_ctl2.steep_mode;
	ich1_newdcti_reg_2.hp_mode = ptr->VipNewIDcti_ctl2.hp_mode;
	ich1_newdcti_reg_2.vlp_mode= ptr->VipNewIDcti_ctl2.vlp_mode;
	ich1_newdcti_reg_2.median_mode= ptr->VipNewIDcti_ctl2.median_mode;
	ich1_newdcti_reg_2.blending_mode = ptr->VipNewIDcti_ctl2.blending_mode;

	scaler_rtd_outl(IDCTI_I_DCTI_CTRL_2_reg, ich1_newdcti_reg_2.regValue);

//Ctl3
	ich1_newdcti_reg_3.regValue= scaler_rtd_inl(IDCTI_I_DCTI_CTRL_3_reg);

	ich1_newdcti_reg_3.maxminlen= ptr->VipNewIDcti_ctl3.maxminlen;
	ich1_newdcti_reg_3.rate_tran= ptr->VipNewIDcti_ctl3.rate_tran;
	ich1_newdcti_reg_3.th_tran= ptr->VipNewIDcti_ctl3.th_tran;
	ich1_newdcti_reg_3.region_mode= ptr->VipNewIDcti_ctl3.region_mode;
	ich1_newdcti_reg_3.rate_smooth= ptr->VipNewIDcti_ctl3.rate_smooth;
	ich1_newdcti_reg_3.th_smooth= ptr->VipNewIDcti_ctl3.th_smooth;

	scaler_rtd_outl(IDCTI_I_DCTI_CTRL_3_reg, ich1_newdcti_reg_3.regValue);

//Ctl4
	ich1_newdcti_reg_4.regValue= scaler_rtd_inl(IDCTI_I_DCTI_CTRL_4_reg);
	ich1_newdcti_reg_4.th_gtran= ptr->VipNewIDcti_ctl4.th_gtran;
	scaler_rtd_outl(IDCTI_I_DCTI_CTRL_4_reg, ich1_newdcti_reg_4.regValue);

//Ctl5
	ich1_newdcti_reg_5.regValue= scaler_rtd_inl(IDCTI_I_DCTI_CTRL_5_reg);

	ich1_newdcti_reg_5.statistic_en= ptr->VipNewIDcti_ctl5.statistic_en;
	ich1_newdcti_reg_5.th_uvmindiff= ptr->VipNewIDcti_ctl5.th_uvmindiff;
	ich1_newdcti_reg_5.rate_stair2= ptr->VipNewIDcti_ctl5.rate_stair2;
	ich1_newdcti_reg_5.rate_stair1= ptr->VipNewIDcti_ctl5.rate_stair1;
	ich1_newdcti_reg_5.th_stair= ptr->VipNewIDcti_ctl5.th_stair;

	scaler_rtd_outl(IDCTI_I_DCTI_CTRL_5_reg, ich1_newdcti_reg_5.regValue);

//Ctl6
	ich1_newdcti_reg_6.regValue= scaler_rtd_inl(IDCTI_I_DCTI_CTRL_6_reg);

	ich1_newdcti_reg_6.statistic_hist= ptr->VipNewIDcti_ctl6.statistic_hist;
	ich1_newdcti_reg_6.rate_engsync= ptr->VipNewIDcti_ctl6.rate_engsync;
	ich1_newdcti_reg_6.rate_uvmindiff= ptr->VipNewIDcti_ctl6.rate_uvmindiff;
	ich1_newdcti_reg_6.th_engsync= ptr->VipNewIDcti_ctl6.th_engsync;

	scaler_rtd_outl(IDCTI_I_DCTI_CTRL_6_reg, ich1_newdcti_reg_6.regValue);

//Ctl7
	ich1_newdcti_reg_7.regValue= scaler_rtd_inl(IDCTI_I_DCTI_CTRL_7_reg);

	ich1_newdcti_reg_7.debug_shiftbit= ptr->VipNewIDcti_ctl7.debug_shiftbit;
	ich1_newdcti_reg_7.debug_mode= ptr->VipNewIDcti_ctl7.debug_mode;
	ich1_newdcti_reg_7.high_bound= ptr->VipNewIDcti_ctl7.high_bound;
	ich1_newdcti_reg_7.low_bound= ptr->VipNewIDcti_ctl7.low_bound;

	scaler_rtd_outl(IDCTI_I_DCTI_CTRL_7_reg, ich1_newdcti_reg_7.regValue);
}


//JZ Mac3
void drvif_color_dnewdcti_table_isr(DRV_VipNewDDcti_Table* ptr, unsigned char offset_gain)
{
	color_sharp_shp_dcti_ctrl_1_RBUS dm_dcti_REG_1;
	color_d_vc_global_ctrl_RBUS d_vc_global_ctrl_Reg;
	color_sharp_shp_dcti_ctrl_2_RBUS dm_dcti_REG_2;
	color_sharp_shp_dcti_ctrl_3_RBUS dm_dcti_REG_3;
	color_sharp_shp_dcti_ctrl_4_RBUS dm_dcti_REG_4;
	color_sharp_shp_dcti_ctrl_5_RBUS dm_dcti_REG_5;
	color_sharp_shp_dcti_ctrl_6_RBUS dm_dcti_REG_6;
	color_sharp_shp_dcti_ctrl_7_RBUS dm_dcti_REG_7;

	if(!ptr)
		return;

//ctl1

	dm_dcti_REG_1.regValue= scaler_rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_1_reg);
	d_vc_global_ctrl_Reg.regValue= scaler_rtd_inl(COLOR_D_VC_GLOBAL_CTRL_reg);

	dm_dcti_REG_1.data_sel = ptr->VipNewDDcti_ctl1.data_sel;
	dm_dcti_REG_1.maxlen = ptr->VipNewDDcti_ctl1.maxlen;
	dm_dcti_REG_1.psmth = ptr->VipNewDDcti_ctl1.psmth;
	dm_dcti_REG_1.lpmode = ptr->VipNewDDcti_ctl1.lp_mode;
	dm_dcti_REG_1.engdiv = ptr->VipNewDDcti_ctl1.engdiv;
	dm_dcti_REG_1.offdiv= ptr->VipNewDDcti_ctl1.offdiv;
	dm_dcti_REG_1.uvgain= ptr->VipNewDDcti_ctl1.uvgain;
	dm_dcti_REG_1.dcti_mode= ptr->VipNewDDcti_ctl1.dcti_mode;
	dm_dcti_REG_1.uvalign_en= ptr->VipNewDDcti_ctl1.uvalign_en;
	dm_dcti_REG_1.cur_sel = ptr->VipNewDDcti_ctl1.cur_sel;

	scaler_rtd_outl(COLOR_SHARP_SHP_DCTI_CTRL_1_reg, dm_dcti_REG_1.regValue);
	scaler_rtd_outl(COLOR_D_VC_GLOBAL_CTRL_reg, d_vc_global_ctrl_Reg.regValue);

//ctl2
	dm_dcti_REG_2.regValue= scaler_rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_2_reg);

	dm_dcti_REG_2.uvsync_en= ptr->VipNewDDcti_ctl2.uvsync_en;
	dm_dcti_REG_2.tran_mode= ptr->VipNewDDcti_ctl2.tran_mode;
	dm_dcti_REG_2.rate_steep= ptr->VipNewDDcti_ctl2.rate_steep;
	dm_dcti_REG_2.th_steep= ptr->VipNewDDcti_ctl2.th_steep;
	dm_dcti_REG_2.th_coring= ptr->VipNewDDcti_ctl2.th_coring;
	dm_dcti_REG_2.steep_mode= ptr->VipNewDDcti_ctl2.steep_mode;
	dm_dcti_REG_2.hp_mode = ptr->VipNewDDcti_ctl2.hp_mode;
	dm_dcti_REG_2.vlp_mode= ptr->VipNewDDcti_ctl2.vlp_mode;
	dm_dcti_REG_2.median_mode= ptr->VipNewDDcti_ctl2.median_mode;
	dm_dcti_REG_2.blending_mode = ptr->VipNewDDcti_ctl2.blending_mode;

	scaler_rtd_outl(COLOR_SHARP_SHP_DCTI_CTRL_2_reg, dm_dcti_REG_2.regValue);

//ctl3
	dm_dcti_REG_3.regValue= scaler_rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_3_reg);

	dm_dcti_REG_3.maxminlen= ptr->VipNewDDcti_ctl3.maxminlen;
	dm_dcti_REG_3.rate_tran= ptr->VipNewDDcti_ctl3.rate_tran;
	dm_dcti_REG_3.th_tran= ptr->VipNewDDcti_ctl3.th_tran;
	dm_dcti_REG_3.region_mode= ptr->VipNewDDcti_ctl3.region_mode;
	dm_dcti_REG_3.rate_smooth= ptr->VipNewDDcti_ctl3.rate_smooth;
	dm_dcti_REG_3.th_smooth= ptr->VipNewDDcti_ctl3.th_smooth;

	scaler_rtd_outl(COLOR_SHARP_SHP_DCTI_CTRL_3_reg, dm_dcti_REG_3.regValue);

//ctl4
	dm_dcti_REG_4.regValue= scaler_rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_4_reg);

	dm_dcti_REG_4.rate_align_weight= ptr->VipNewDDcti_ctl4.rate_align_weight;
	dm_dcti_REG_4.rate_align= ptr->VipNewDDcti_ctl4.rate_align;
	dm_dcti_REG_4.th_align= ptr->VipNewDDcti_ctl4.th_align;
	dm_dcti_REG_4.align_mingain= ptr->VipNewDDcti_ctl4.align_mingain;
	dm_dcti_REG_4.th_gtran= ptr->VipNewDDcti_ctl4.th_gtran;

	scaler_rtd_outl(COLOR_SHARP_SHP_DCTI_CTRL_4_reg, dm_dcti_REG_4.regValue);

//ctl5
	dm_dcti_REG_5.regValue= scaler_rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_5_reg);

	dm_dcti_REG_5.th_uvmindiff= ptr->VipNewDDcti_ctl5.th_uvmindiff;
	dm_dcti_REG_5.rate_stair2= ptr->VipNewDDcti_ctl5.rate_stair2;
	dm_dcti_REG_5.rate_stair1= ptr->VipNewDDcti_ctl5.rate_stair1;
	dm_dcti_REG_5.th_stair= ptr->VipNewDDcti_ctl5.th_stair;
	dm_dcti_REG_5.th_align_weight= ptr->VipNewDDcti_ctl5.th_align_weight;

	scaler_rtd_outl(COLOR_SHARP_SHP_DCTI_CTRL_5_reg, dm_dcti_REG_5.regValue);

//ctl6
	dm_dcti_REG_6.regValue= scaler_rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_6_reg);

	dm_dcti_REG_6.rate_engsync= ptr->VipNewDDcti_ctl6.rate_engsync;
	dm_dcti_REG_6.rate_uvmindiff= ptr->VipNewDDcti_ctl6.rate_uvmindiff;
	dm_dcti_REG_6.th_engsync= ptr->VipNewDDcti_ctl6.th_engsync;

	scaler_rtd_outl(COLOR_SHARP_SHP_DCTI_CTRL_6_reg, dm_dcti_REG_6.regValue);

//ctl7
	dm_dcti_REG_7.regValue= scaler_rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_7_reg);
	dm_dcti_REG_7.debug_shiftbit= ptr->VipNewDDcti_ctl7.debug_shiftbit;
	dm_dcti_REG_7.debug_mode= ptr->VipNewDDcti_ctl7.debug_mode;

	scaler_rtd_outl(COLOR_SHARP_SHP_DCTI_CTRL_7_reg, dm_dcti_REG_7.regValue);
}

//=====================================================
void drvif_color_DCTI_for_ColorBar(unsigned char color_bar_flag,unsigned char colorbar_score)
{
#if 0
	static unsigned char pre_status=0, pre_offset_gain=0,pre_i_table_select=0,pre_d_table_select;
	char which_source=(RPC_system_info_structure_table->VIP_source);
	unsigned char i_table_select=0 , d_table_select=0, status=0, offset_gain=0;

	DRV_VipNewIDcti_Table* I_DCTI_Table = NULL;
	DRV_VipNewDDcti_Table* D_DCTI_Table = NULL;
	DRV_VipNewDcti_auto_adjust *VipNewDcti_auto_adjust = NULL;

	if((which_source>=VIP_QUALITY_TV_NTSC && which_source<=VIP_QUALITY_TV_PAL) )
		return; // rf don't enter color bar detected
	if((color_bar_flag==true) || (DynamicOptimizeSystem[191]==1)||(DynamicOptimizeSystem[193]==1)||(DynamicOptimizeSystem[194]==1)||(DynamicOptimizeSystem[192]==1)||(DynamicOptimizeSystem[196]==1))//change 132 -->192 for color bar condition//for_LG_demo
 	{

 		/*
 		if((which_source>=VIP_QUALITY_CVBS_NTSC) && (which_source<=VIP_QUALITY_TV_PAL))
		{
			i_table_select = 8;
			d_table_select = 8;
		}

		else if((which_source>=VIP_QUALITY_TV_NTSC) && (which_source<=VIP_QUALITY_TV_PAL))
		{
			i_table_select = 9;
			d_table_select = 9;
		}
		*/

		if((which_source>=VIP_QUALITY_HDMI_480I && which_source<=VIP_QUALITY_HDMI_576P)||(which_source>=VIP_QUALITY_YPbPr_480I && which_source<=VIP_QUALITY_YPbPr_576P))
		{
			i_table_select = 8;
			d_table_select = 8;
		}
		/*
		else if((which_source>=VIP_QUALITY_HDMI_720P && which_source<=VIP_QUALITY_HDMI_1080P)||(which_source>=VIP_QUALITY_YPbPr_720P && which_source<=VIP_QUALITY_YPbPr_1080P))
		{
			i_table_select = 8;
			d_table_select = 8;
		}
		*/
		else
		{
			i_table_select = system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.iDcti_table_select;
			d_table_select = system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.dDcti_table_select;
		}
	}
	else
	{
		i_table_select = system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.iDcti_table_select;
		d_table_select = system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.dDcti_table_select;
	}



	i_table_select = (i_table_select>=DCTI_TABLE_LEVEL_MAX)?(DCTI_TABLE_LEVEL_MAX-1):i_table_select;
	d_table_select = (d_table_select>=DCTI_TABLE_LEVEL_MAX)?(DCTI_TABLE_LEVEL_MAX-1):d_table_select;

	VipNewDcti_auto_adjust = &(system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.auto_adjust_Table[i_table_select]);
	if(VipNewDcti_auto_adjust->VipNewDcti_auto_setting.table_mode_flag == 1 )
	{
		offset_gain = 0;
		i_table_select = drvif_color_DCTI_auto_compute(VipNewDcti_auto_adjust,colorbar_score);
	}
	else
	{
		offset_gain = drvif_color_DCTI_auto_compute(VipNewDcti_auto_adjust,colorbar_score);
	}

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
	{
		ROSPrintf("offset_gain=%d,colorbar_score=%d\n ",offset_gain,colorbar_score);
		ROSPrintf("i_table_select=%d\n ",i_table_select);
	}

	if((pre_offset_gain!=offset_gain) || (pre_i_table_select!=i_table_select) || (pre_d_table_select!=d_table_select))
	{
		//ROSPrintf("pre_offset_gain=%d,offset_gain=%d\n ",pre_offset_gain,offset_gain);
		//ROSPrintf("pre_i_table_select=%d,i_table_select=%d\n ",pre_i_table_select,i_table_select);
		//ROSPrintf("pre_d_table_select=%d,d_table_select=%d\n ",pre_d_table_select,d_table_select);
		status=1;
	}
	else
	{
		status=0;
	}

	if(status==pre_status)
	{
		return;
	}
	else
	{
		//ROSPrintf("status=%d,pre_status=%d\n ",status,pre_status);
	}

	pre_status = status;
	pre_offset_gain = offset_gain;
	pre_i_table_select = i_table_select;
	pre_d_table_select = d_table_select;


	I_DCTI_Table = &(system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.iDcti_Table[i_table_select]);
	D_DCTI_Table = &(system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.dDcti_Table[d_table_select]);


	if(system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.iDcti_table_select<DCTI_TABLE_LEVEL_MAX)	//bypass=255
		drvif_color_inewdcti_table_isr(I_DCTI_Table,offset_gain);
	if(system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.dDcti_table_select<DCTI_TABLE_LEVEL_MAX)	//bypass=255
		drvif_color_dnewdcti_table_isr(D_DCTI_Table,offset_gain);

	#if 0
		static unsigned int print_cnt_JZ = 0;
		if(print_cnt_JZ % 100 == 0)
		ROSPrintf("[DCTI] vd= %d,dd=%d, ii=%d, fg=%d, src=%d\n",
		vdcti_level, dcti_level, idcti_level,color_bar_flag,which_source);
		print_cnt_JZ ++;
	#endif
#endif
}

unsigned char drvif_color_DCTI_auto_compute(DRV_VipNewDcti_auto_adjust* ptr,unsigned char colorbar_score)
{
	int i =0,score=0;
	unsigned char low_bound=0,up_bound=0,output_level=0;
	unsigned char index=0;

	low_bound = ptr->VipNewDcti_auto_setting.low_bound;
	up_bound = ptr->VipNewDcti_auto_setting.up_bound;
	score = colorbar_score - low_bound;
	if(score<0)
	{
		score=0;
	}

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
	{
		ROSPrintf("score=%d, up_bound=%d\n",score,up_bound);
	}

	if( score <= up_bound )
	{
		for(i=0;i<DCTI_TABLE_LEVEL_MAX;i++)
		{
			if(score>=(ptr->th_table[i]))
			{
				index = i ;
			}

			if(i<(DCTI_TABLE_LEVEL_MAX-1))
			{
				if((ptr->th_table[i+1])<(ptr->th_table[i]))
				{
					if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
					{
						ROSPrintf("Warring!!!,th[%d]=%d > th[%d]=%d\n",i,i+1,(ptr->th_table[i]),(ptr->th_table[i+1]));
					}
					return 0;
				}
			}

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
			{
				ROSPrintf("check i=%d,index=%d \n",i,index);
			}
		}

		if(index >= 9)
		{
			output_level = ptr->level_table[9];
		}
		else if (index==0)
		{
			if((ptr->th_table[0])==0)
			{
				output_level = (ptr->level_table[0]);
			}
			else
			{
				if( score<=(ptr->th_table[0]) )
				{
					if((ptr->level_table[0])==0)
					{
						output_level = (ptr->level_table[0]);
					}
					else
					{
						output_level = ((score-0)*((ptr->level_table[0])-0))/((ptr->th_table[0])-0);
					}

				}
				else
				{
					output_level = (ptr->level_table[0])+((score-(ptr->th_table[0]))*((ptr->level_table[1])-(ptr->level_table[index])))/((ptr->th_table[1])-(ptr->th_table[0]));
				}
			}
		}
		else
		{
			if(((ptr->th_table[index])-(ptr->th_table[index-1]))==0)
			{
				output_level = ptr->level_table[index];
			}
			else
			{
				output_level = (ptr->level_table[index])+(((score-(ptr->level_table[index]))*((ptr->level_table[index+1])-(ptr->level_table[index])))/((ptr->th_table[index+1])-(ptr->th_table[index])));
			}

		}
	}
	else
	{
		output_level = ptr->level_table[DCTI_TABLE_LEVEL_9];

	}

	return output_level;

}

void drvif_color_DELAY_for_ColorBar(unsigned char color_bar_flag,unsigned char colorbar_score)
{
	unsigned char which_source=(RPC_system_info_structure_table->VIP_source);
	static unsigned int ori_uv_delay =0;
	unsigned char m_nDelayValue =0;
	unsigned char cur_source =0;
	static unsigned char pre_source =255;
	color_dlcti_uv_delay_RBUS uv_delay_reg;


	SLR_VIP_TABLE *m_Share_Memory_VIP_TABLE_Struct= scaler_GetShare_Memory_VIP_TABLE_Struct();
        if(m_Share_Memory_VIP_TABLE_Struct==NULL){
		return;
	}

	m_nDelayValue=m_Share_Memory_VIP_TABLE_Struct->VIP_QUALITY_Coef[which_source][VIP_QUALITY_FUNCTION_UV_DELAY];
	cur_source=(RPC_system_info_structure_table->VIP_source);


	uv_delay_reg.regValue=rtd_inl(COLOR_DLCTI_UV_Delay_reg);

	if(pre_source !=cur_source)
	{
		ori_uv_delay = uv_delay_reg.regValue;

	}
	pre_source = cur_source;

	if((color_bar_flag)==true )
 	{


		if(which_source==VIP_QUALITY_CVBS_NTSC)
		{

			uv_delay_reg.u_delay=25>>4;
			uv_delay_reg.v_delay=25%16;
		}

	}
	else
	{
		uv_delay_reg.u_delay=m_nDelayValue>>4;
		uv_delay_reg.v_delay=m_nDelayValue%16;
	}

	if (which_source==VIP_QUALITY_HDMI_480I)
	{
		if((color_bar_flag)==true )
			uv_delay_reg.regValue = 5;
		else
			uv_delay_reg.regValue = ori_uv_delay;
	}



	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
	{
		ROSPrintf("u_delay = %d\n ",uv_delay_reg.u_delay);
		ROSPrintf("v_delay = %d\n ",uv_delay_reg.v_delay);
	}



	rtd_outl(COLOR_DLCTI_UV_Delay_reg,uv_delay_reg.regValue);




}

int drvif_Get_Purecolor_Weighting()
{
	return pure_color_weighting;
}


void scalerVIP_NetFlix_Smooth_TimingChange_for_RTNR()
{
	di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;
	_RPC_clues* RPC_SmartPic_clue=NULL;

	RPC_SmartPic_clue = scaler_GetShare_Memory_RPC_SmartPic_Clue_Struct();

	if(RPC_SmartPic_clue == NULL) {
		if(MA_print_count%360==0)
			ROSPrintf("scalerVIP_NetFlix_Smooth_TimingChange_for_RTNR Share Memory PQ data ERROR,SmartPic_clue = %p, \n",RPC_SmartPic_clue);
		return;
	}
	im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);

	if(RPC_SmartPic_clue->S_NetFlix_info.NetFlix_smooth_Toggle_info.TimingChange_flag_for_RTNR==1)
	{
		im_di_rtnr_control_reg.cp_rtnr_y_enable = 0;
		im_di_rtnr_control_reg.cp_rtnr_c_enable = 0;
		RPC_SmartPic_clue->S_NetFlix_info.NetFlix_smooth_Toggle_info.TimingChange_flag_for_RTNR =0;
	}
	else
	{
		im_di_rtnr_control_reg.cp_rtnr_y_enable = 1;
		if (drv_memory_get_ip_DMA420_mode() == SLR_DMA_400_mode)
			im_di_rtnr_control_reg.cp_rtnr_c_enable = 0x0;
		else
		im_di_rtnr_control_reg.cp_rtnr_c_enable = 1;
	}
}

/*======== checksum========*/
unsigned int checksum_vip(const void *buf, unsigned int size)
{
	const unsigned char *p;
	unsigned int sum = 0;
	unsigned char tmp;

	p = (const unsigned char *)buf;

	while (size--)
	{
		tmp = *p++;
		if( tmp== 0)  tmp = 1;
		sum += tmp;
	}
	return sum;
}

void scalerVIP_check_VIPTable_crc(VIP_table_crc_value_ISR * crc_value, SLR_VIP_TABLE * vip_table)
{
	SLR_VIP_TABLE *g_Share_Memory_VIP_TABLE_Struct_isr;
	g_Share_Memory_VIP_TABLE_Struct_isr = vip_table;

	crc_value->VIP_QUALITY_Coef = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->VIP_QUALITY_Coef,
		sizeof(unsigned char)*VIP_QUALITY_SOURCE_NUM*VIP_QUALITY_Coef_MAX);
	crc_value->VIP_QUALITY_Extend_Coef = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->VIP_QUALITY_Extend_Coef,
		sizeof(unsigned char)*VIP_QUALITY_SOURCE_NUM*VIP_QUALITY_Extend_Coef_MAX);
	crc_value->VIP_QUALITY_Extend2_Coef = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->VIP_QUALITY_Extend2_Coef,
		sizeof(unsigned char)*VIP_QUALITY_SOURCE_NUM*VIP_QUALITY_Extend2_Coef_MAX);
	crc_value->VIP_QUALITY_Extend3_Coef = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->VIP_QUALITY_Extend3_Coef,
		sizeof(unsigned char)*VIP_QUALITY_SOURCE_NUM*VIP_QUALITY_Extend3_Coef_MAX);
	crc_value->VIP_QUALITY_3Dmode_Coef = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->VIP_QUALITY_3Dmode_Coef,
		sizeof(unsigned char)*VIP_QUALITY_3DSOURCE_NUM*VIP_QUALITY_3Dmode_Coef_MAX);
	crc_value->VIP_QUALITY_Extend4_Coef = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->VIP_QUALITY_Extend4_Coef,
		sizeof(unsigned char)*VIP_QUALITY_SOURCE_NUM*VIP_QUALITY_Extend4_Coef_MAX);
	crc_value->SD_H_table = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->SD_H_table,
		sizeof(unsigned char)*UZD_Idx_TBL_Max*VIP_ScalingDown_FIR_Level_Max);
	crc_value->SD_V_table = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->SD_V_table,
		sizeof(unsigned char)*UZD_Idx_TBL_Max*VIP_ScalingDown_FIR_Level_Max);
	crc_value->DCR_TABLE = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->DCR_TABLE,
		sizeof(unsigned char)*t_DCR_TABLE_ROW_MAX*t_DCR_TABLE_COL_MAX);
	crc_value->ICM_by_timing_picmode = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->ICM_by_timing_picmode,
		sizeof(unsigned char)*VIP_TABLE_PICTURE_MODE_MAX*VIP_TABLE_TIMIMG_MAX);
	crc_value->D_EDGE_Smooth_Coef = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->D_EDGE_Smooth_Coef,
		sizeof(DRV_DEdgeSmooth_Coef)*t_D_EDGE_Smooth_Coef_MAX);
	crc_value->Auto_Function_Array1 = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Auto_Function_Array1,
		sizeof(unsigned char)*Auto_Function_Array_MAX);
	crc_value->Auto_Function_Array2 = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Auto_Function_Array2,
		sizeof(unsigned char)*Auto_Function_Array_MAX);
	crc_value->Auto_Function_Array3 = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Auto_Function_Array3,
		sizeof(unsigned char)*Auto_Function_Array_MAX);
	crc_value->Auto_Function_Array4 = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Auto_Function_Array4,
		sizeof(unsigned char)*Auto_Function_Array_MAX);
	crc_value->Auto_Function_Array5 = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Auto_Function_Array5,
		sizeof(unsigned char)*Auto_Function_Array_MAX);
	crc_value->DrvSetting_Skip_Flag = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->DrvSetting_Skip_Flag,
		sizeof(unsigned char)*DrvSetting_Skip_Flag_item_Max);
	crc_value->VD_ConBriHueSat = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->VD_ConBriHueSat,
		sizeof(VIP_VD_ConBriHueSat)*t_VD_ConBriHueSat_MAX);

	crc_value->Idomain_MBPKTable = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Idomain_MBPKTable, sizeof(VIP_MBPK_Table)*MBPK_table_num);

	crc_value->Tone_Mapping_LUT_R = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Tone_Mapping_LUT_R, sizeof(unsigned short)*Tone_Mapping_Table_MAX*Tone_Mapping_size);
	crc_value->ODtable_Coeff = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->ODtable_Coeff,
		sizeof(unsigned int)*t_ODtable_Coeff_ROW_MAX*t_ODtable_Coeff_COL_MAX);
	crc_value->CDS_ini = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->CDS_ini, sizeof(VIP_CDS_Table)*Sharp_table_num);
	crc_value->I_EDGE_Smooth_Coef = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->I_EDGE_Smooth_Coef,
		sizeof(DRV_IEdgeSmooth_Coef)*t_I_EDGE_Smooth_Coef_MAX);
	crc_value->YUV2RGB_CSMatrix_Table = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->YUV2RGB_CSMatrix_Table,
		sizeof(VIP_YUV2RGB_CSMatrix_Table)*YUV2RGB_TBL_Num);
	crc_value->tICM_ini = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->tICM_ini,
		sizeof(unsigned short)*VIP_ICM_TBL_X*VIP_ICM_TBL_Y*VIP_ICM_TBL_Z);
	crc_value->tICM_H_7axis = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->tICM_H_7axis, sizeof(ICM_H_7axis_table)*VIP_ICM_TBL_X);
	crc_value->tGAMMA = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->tGAMMA, sizeof(VIP_Gamma)*t_GAMMA_MAX);
	crc_value->DCC_Control_Structure = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->DCC_Control_Structure, sizeof(VIP_DCC_Control_Structure));
	crc_value->Ddomain_SHPTable = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Ddomain_SHPTable,
		sizeof(VIP_Sharpness_Table)*Sharp_table_num);
	crc_value->Manual_NR_Table = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->Manual_NR_Table,
		sizeof(DRV_NR_Item)*PQA_TABLE_MAX*DRV_NR_Level_MAX);
	crc_value->PQA_Table = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->PQA_Table,
		sizeof(unsigned int)*PQA_TABLE_MAX*PQA_MODE_MAX*PQA_ITEM_MAX*PQA_LEVEL_MAX);
	crc_value->PQA_Input_Table = checksum_vip(&g_Share_Memory_VIP_TABLE_Struct_isr->PQA_Input_Table,
		sizeof(unsigned int)*PQA_I_TABLE_MAX*PQA_I_ITEM_MAX*PQA_I_LEVEL_MAX);
	crc_value->checkSum = checksum_vip(crc_value, sizeof(VIP_table_crc_value_ISR)-sizeof(unsigned int));
}
/*========================*/


void scalerVIP_HDR_apply(void)
{
	/* dm clk will be reset every line, skip this function*/
	return;
#if 0
	if(system_info_structure_table->HDR_info.HDR_Setting_Status == 1 &&
		system_info_structure_table->HDR_info.Ctrl_Item[TV006_HDR_HDR10_set] == 0){
		dolby_v_top_top_d_buf_RBUS top_d_buf_reg;
		dm_hdr_dm_double_buffer_ctrl_RBUS dm_double_buffer_ctrl_reg;

		top_d_buf_reg.regValue = rtd_inl(DOLBY_V_TOP_TOP_D_BUF_reg);
		dm_double_buffer_ctrl_reg.regValue = rtd_inl(DM_HDR_DM_Double_Buffer_CTRL_reg);

		#if 0
		static unsigned char apply_check = 0;
		static unsigned char apply_check_conut = 0;
		if (apply_check)
		{
			if (top_d_buf_reg.dolby_double_apply == 0 &&
				dm_double_buffer_ctrl_reg.dm_db_apply == 0 &&
				apply_check_conut > 5)
			{
				apply_check = 0;
				apply_check_conut = 0;
				system_info_structure_table->HDR_info.HDR_Setting_Status = 0;
			}
			apply_check_conut++;
			return;
		}
		#endif

		vodma_vodma_line_st_RBUS vodma_line_st_reg;
		vodma_line_st_reg.regValue = rtd_inl(VODMA_VODMA_LINE_ST_reg);
		unsigned int vo_vend = (rtd_inl(VODMA_VODMA_V1VGIP_VACT1_reg) >> 16) & 0xfff;
		unsigned short lineCnt = vodma_line_st_reg.line_cnt;
		unsigned int protect_cnt = 0;
		vodma_vodma_v1sgen_RBUS vodma_vodma_v1sgen_RBUS_reg;
		unsigned char line_access_region = 17;	//default case
		vodma_vodma_v1sgen_RBUS_reg.regValue = rtd_inl(VODMA_VODMA_V1SGEN_reg);
		if (vodma_vodma_v1sgen_RBUS_reg.h_thr >= 3980)	//4k case
		{
			line_access_region = 30;
		}

		//unsigned int time_str = rtd_inl(0xb801b6a8);
		while(((lineCnt < (vo_vend + 1)) ||
			(lineCnt > (vo_vend + line_access_region))) &&
			(protect_cnt < 0x062500))
		{
			vodma_line_st_reg.regValue = rtd_inl(VODMA_VODMA_LINE_ST_reg);
			lineCnt = vodma_line_st_reg.line_cnt;
			protect_cnt++;
		}
		//unsigned int time_end = rtd_inl(0xb801b6a8);

		#if 0	//counter debug
		//force_BG, b8028300[1] = 1
		color_dcc_d_dcc_fwused_1_RBUS dcc_fwused_1_reg;
		dcc_fwused_1_reg.regValue = rtd_inl(COLOR_DCC_D_DCC_FWUSED_1_reg);
		if (protect_cnt > dcc_fwused_1_reg.ThreeSEGXIndex0)
			dcc_fwused_1_reg.ThreeSEGXIndex0 = protect_cnt;
		rtd_outl(COLOR_DCC_D_DCC_FWUSED_1_reg, dcc_fwused_1_reg.regValue);
		#endif

		//HDR10 apply
		top_d_buf_reg.dolby_double_apply = 1;
		rtd_outl(DOLBY_V_TOP_TOP_D_BUF_reg, top_d_buf_reg.regValue);

		dm_double_buffer_ctrl_reg.dm_db_apply = 1;
		rtd_outl(DM_HDR_DM_Double_Buffer_CTRL_reg, dm_double_buffer_ctrl_reg.regValue);

		system_info_structure_table->HDR_info.HDR_Setting_Status = 0;


		//ROSPrintf("roger_ST protect_cnt = %d\n", protect_cnt);

		//vodma_line_st_reg.regValue = rtd_inl(VODMA_VODMA_LINE_ST_reg);
		//unsigned short lineCnt2 = vodma_line_st_reg.line_cnt;
		//ROSPrintf("roger_HA protect_cnt = %d\n", protect_cnt);
		//ROSPrintf("roger_HA vo_vend = %d\n", vo_vend);
		//ROSPrintf("roger_HA lineCnt = %d\n", lineCnt);
		//ROSPrintf("roger_HA lineCnt2 = %d\n", lineCnt2);
		//ROSPrintf("roger_HA time_str = %d\n", time_str);
		//ROSPrintf("roger_HA time_end = %d\n", time_end);
		//ROSPrintf("roger_HA time = %d\n", (time_end - time_str) / 90);
	}
#endif
}
#if 0
void scalerVIP_HDR_clk_reset(_system_setting_info* system_info_structure_table)
{
	dolby_v_top_top_pic_size_RBUS top_pic_size_reg;
	dolby_v_top_top_pic_sta_RBUS top_pic_sta_reg;
	vodma_vodma_v1_dsize_RBUS vodma_v1_dsize_reg;
	dolby_v_top_top_d_buf_RBUS top_d_buf_reg;

	static unsigned char hdr_clk_reset_cnt = 0;
	static unsigned char pr_cnt = 0;

	unsigned char hdr_clk_reset_cnt_th = 2;
	unsigned char h_offset = 3;

	if(Rest_dm_clk_flag == 1 && (DOLBY_V_TOP_TOP_CTL_get_dolby_mode(rtd_inl(DOLBY_V_TOP_TOP_CTL_reg)) != 0)) {
		if (hdr_clk_reset_cnt >= hdr_clk_reset_cnt_th) {
			/* reset v top setting from clk reset status*/
			top_pic_size_reg.regValue = rtd_inl(DOLBY_V_TOP_TOP_PIC_SIZE_reg);
			top_pic_sta_reg.regValue = rtd_inl(DOLBY_V_TOP_TOP_PIC_STA_reg);
			vodma_v1_dsize_reg.regValue = rtd_inl(VODMA_VODMA_V1_DSIZE_reg);

			ROSPrintf("top_pic_size_reg.dolby_hsize=%d, top_pic_sta_reg.dolby_h_den_sta=%d\n", top_pic_size_reg.dolby_hsize, top_pic_sta_reg.dolby_h_den_sta);

			top_pic_size_reg.dolby_hsize = vodma_v1_dsize_reg.p_y_len;
			top_pic_sta_reg.dolby_h_den_sta = (rtd_inl(VODMA_VODMA_V1VGIP_HACT_reg) & 0x00000FFF) + h_offset; //0x008f;

			rtd_outl(DOLBY_V_TOP_TOP_PIC_SIZE_reg, top_pic_size_reg.regValue);
			rtd_outl(DOLBY_V_TOP_TOP_PIC_STA_reg, top_pic_sta_reg.regValue);

			top_d_buf_reg.regValue = rtd_inl(DOLBY_V_TOP_TOP_D_BUF_reg);
			top_d_buf_reg.dolby_double_apply = 1;
			rtd_outl(DOLBY_V_TOP_TOP_D_BUF_reg, top_d_buf_reg.regValue);

			Rest_dm_clk_flag = 0;
			hdr_clk_reset_cnt = 0;
		} else {
			hdr_clk_reset_cnt++;
			ROSPrintf("cnt=%d\n", hdr_clk_reset_cnt);
		}
	} else {
		if(pr_cnt >= 30) {
			/*ROSPrintf("HDR_clk_reset=%d, dolbyMode=%d\n",
			Rest_dm_clk_flag, (DOLBY_V_TOP_TOP_CTL_get_dolby_mode(rtd_inl(DOLBY_V_TOP_TOP_CTL_reg)) != 0));*/
			pr_cnt = 0;
		} else {
			pr_cnt++;
		}
	}
}
#endif
static void scalerVIP_Adaptive_Demura_Scale_By_APL(_system_setting_info* sysInfo, _RPC_system_setting_info* RPC_sysInfo, _clues* smartPic_clue, _RPC_clues* RPC_smartPic_clue)
{
	demura_demura_control_RBUS demura_demura_control_reg;
	unsigned int APL;
	unsigned char i;

	if (DeMura_TBL.DeMura_Adaptive_TBL.adaptiveScale_En != 1)
		return;	/* disable dynamic scale*/

	demura_demura_control_reg.regValue = IoReg_Read32(DEMURA_DEMURA_CONTROL_reg);

	APL = SmartPic_clue->Adapt_DCC_Info.Adapt_Mean_Dev_info[DCC_Tool_mean];

	for (i=0;i<VIP_Demura_Adaptive_Scale_LV_NUM;i++)
		if (APL < DeMura_TBL.DeMura_Adaptive_TBL.adaptiveScale_APL_th[i])
			break;
	if (i >= VIP_Demura_Adaptive_Scale_LV_NUM)
		i = VIP_Demura_Adaptive_Scale_LV_NUM - 1;

	demura_demura_control_reg.demura_table_scale = DeMura_TBL.DeMura_Adaptive_TBL.adaptiveScale[i];

	IoReg_Write32(DEMURA_DEMURA_CONTROL_reg, demura_demura_control_reg.regValue);

	//rtd_printk(KERN_INFO, TAG_NAME, "Adaptive Demura, i=%d, APL=%d \n", i, APL);

}
#if 0
void scalerVIP_PQ_Bypass_Monitor(void)
{
	extern VIP_PQ_ByPass_Struct PQ_ByPass_Struct[VIP_PQ_ByPass_TBL_Max];
	_RPC_system_setting_info* RPC_system_info_structure_table = NULL;
	VIP_PQ_ByPass_Struct pPQ_ByPass_Struct;
	unsigned char isIMode_Flag = 0;
	unsigned char tbl_idx, i;

	RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if((RPC_system_info_structure_table==NULL))
	{
		if(MA_print_count%360==0)
		{
			ROSPrintf("\n====scalerVIP_PQ_Bypass_Monitor NULL ERROR====\n\n");
		}
		return;
	}

	if (fwif_color_Get_PQ_ByPass_ISR_Flag() == 1) {
		fwif_color_Set_PQ_ByPass_ISR_Flag(0);

		tbl_idx = RPC_system_info_structure_table->PQ_ByPass_Ctrl.table_idx;

		if (tbl_idx >= VIP_PQ_ByPass_TBL_Max)
			tbl_idx = 0;

		memcpy((unsigned char*)&pPQ_ByPass_Struct, (unsigned char*)&(PQ_ByPass_Struct[tbl_idx]), sizeof(VIP_PQ_ByPass_Struct));

		isIMode_Flag = Scaler_DispGetStatus(SLR_MAIN_DISPLAY, SLR_DISP_INTERLACE);
		if (isIMode_Flag == 1) {
			pPQ_ByPass_Struct.VIP_PQ_ByPass_TBL[PQ_ByPass_I_DI_IP_Enable] = 0;
			pPQ_ByPass_Struct.VIP_PQ_ByPass_TBL[PQ_ByPass_I_DI] = 0;
		}

		for (i=0; i<VIP_PQ_ByPass_ITEMS_Max; i++) {
			if (pPQ_ByPass_Struct.VIP_PQ_ByPass_TBL[i] == 1)
				drvif_color_set_PQ_ByPass(i,isIMode_Flag);
		}
	}

}
#endif

void scalerVIP_color_MA_ISNR_MotionUpdate(unsigned char status)
{
	unsigned char i2rIdx, curStatus, is3a, s0Idx, s1Idx;
	unsigned int addSel = 0;
	static unsigned int s0_add0=0;
	static unsigned int s0_add1=0;
	static unsigned int s0_add2=0;
	static unsigned int s0_add3=0;
	static unsigned int s1_add0=0;
	static unsigned int s1_add1=0;
	static unsigned int s1_add2=0;
	static unsigned int s1_add3=0;

	di_rtnr_ma_isnr_getmotion_main_RBUS di_rtnr_ma_isnr_getmotion_main_reg;
	iedge_smooth_mvf_dma_work_status_RBUS iedge_smooth_mvf_dma_work_status_reg;
	di_im_di_control_RBUS di_im_di_control_reg;
	iedge_smooth_mvf_datmemorystart_s0_add0_RBUS iedge_smooth_mvf_datmemorystart_s0_add0_reg;
	iedge_smooth_mvf_datmemorystart_s0_add1_RBUS iedge_smooth_mvf_datmemorystart_s0_add1_reg;
	iedge_smooth_mvf_datmemorystart_s0_add2_RBUS iedge_smooth_mvf_datmemorystart_s0_add2_reg;
	iedge_smooth_mvf_datmemorystart_s0_add3_RBUS iedge_smooth_mvf_datmemorystart_s0_add3_reg;
	iedge_smooth_mvf_datmemorystart_s1add0_RBUS iedge_smooth_mvf_datmemorystart_s1_add0_reg;
	iedge_smooth_mvf_datmemorystart_s1_add1_RBUS iedge_smooth_mvf_datmemorystart_s1_add1_reg;
	iedge_smooth_mvf_datmemorystart_s1_add2_RBUS iedge_smooth_mvf_datmemorystart_s1_add2_reg;
	iedge_smooth_mvf_datmemorystart_s1_add3_RBUS iedge_smooth_mvf_datmemorystart_s1_add3_reg;

	di_rtnr_ma_isnr_getmotion_main_reg.regValue = rtd_inl(DI_RTNR_MA_ISNR_GETMOTION_MAIN_reg);
	iedge_smooth_mvf_dma_work_status_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DMA_Work_Status_reg);
	di_im_di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
	iedge_smooth_mvf_datmemorystart_s0_add0_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DATMemoryStart_S0_Add0_reg);
	iedge_smooth_mvf_datmemorystart_s0_add1_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DATMemoryStart_S0_Add1_reg);
	iedge_smooth_mvf_datmemorystart_s0_add2_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DATMemoryStart_S0_Add2_reg);
	iedge_smooth_mvf_datmemorystart_s0_add3_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DATMemoryStart_S0_Add3_reg);
	iedge_smooth_mvf_datmemorystart_s1_add0_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DATMemoryStart_S1Add0_reg);
	iedge_smooth_mvf_datmemorystart_s1_add1_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DATMemoryStart_S1_Add1_reg);
	iedge_smooth_mvf_datmemorystart_s1_add2_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DATMemoryStart_S1_Add2_reg);
	iedge_smooth_mvf_datmemorystart_s1_add3_reg.regValue = rtd_inl(IEDGE_SMOOTH_MVF_DATMemoryStart_S1_Add3_reg);

#ifdef CONFIG_I2RND_DUAL_VO
	i2rIdx = (Scaler_I2rnd_get_display()<=1)?(0):(1);	// Scaler_I2rnd_get_display() ==> 0: i2r disable, 1:i2r s0, 2:i2r s1
#else
	i2rIdx = 0;
#endif

	curStatus = di_rtnr_ma_isnr_getmotion_main_reg.rtnr_isnr_filmmotion_update;
	s0Idx = iedge_smooth_mvf_dma_work_status_reg.rdma_s0_frame_cnt;
	s1Idx = iedge_smooth_mvf_dma_work_status_reg.rdma_s1_frame_cnt;
	is3a = di_im_di_control_reg.ma_3aenable;

	if(curStatus==1 && status==0)
	{
		s0_add0 = iedge_smooth_mvf_datmemorystart_s0_add0_reg.s0_mstart_115_87;
		s0_add1 = iedge_smooth_mvf_datmemorystart_s0_add1_reg.s0_mstart_86_58;
		s0_add2 = iedge_smooth_mvf_datmemorystart_s0_add2_reg.s0_mstart_57_29;
		s0_add3 = iedge_smooth_mvf_datmemorystart_s0_add3_reg.s0_mstart_28_0;

		s1_add0 = iedge_smooth_mvf_datmemorystart_s1_add0_reg.s1_mstart_115_87;
		s1_add1 = iedge_smooth_mvf_datmemorystart_s1_add1_reg.s1_mstart_86_58;
		s1_add2 = iedge_smooth_mvf_datmemorystart_s1_add2_reg.s1_mstart_57_29;
		s1_add3 = iedge_smooth_mvf_datmemorystart_s1_add3_reg.s1_mstart_28_0;

		if(i2rIdx == 0)
		{
			if(is3a)//3A
			{
				if(s0Idx==0)
					addSel = s0_add2;
				else if(s0Idx==1)
					addSel = s0_add0;
				else if(s0Idx==2)
					addSel = s0_add1;
			}
			else //5A
			{
				if(s0Idx==0)
					addSel = s0_add3;
				else if(s0Idx==1)
					addSel = s0_add0;
				else if(s0Idx==2)
					addSel = s0_add1;
				else if(s0Idx==3)
					addSel = s0_add1;
			}
			iedge_smooth_mvf_datmemorystart_s0_add0_reg.s0_mstart_115_87= addSel;
			iedge_smooth_mvf_datmemorystart_s0_add1_reg.s0_mstart_86_58 = addSel;
			iedge_smooth_mvf_datmemorystart_s0_add2_reg.s0_mstart_57_29 = addSel;
			iedge_smooth_mvf_datmemorystart_s0_add3_reg.s0_mstart_28_0 = addSel;
		}
		else
		{
			if(is3a)//3A
			{
				if(s1Idx==0)
					addSel = s1_add2;
				else if(s1Idx==1)
					addSel = s1_add0;
				else if(s1Idx==2)
					addSel = s1_add1;
			}
			else //5A
			{
				if(s1Idx==0)
					addSel = s1_add3;
				else if(s1Idx==1)
					addSel = s1_add0;
				else if(s1Idx==2)
					addSel = s1_add1;
				else if(s1Idx==3)
					addSel = s1_add2;
			}
			iedge_smooth_mvf_datmemorystart_s1_add0_reg.s1_mstart_115_87= addSel;
			iedge_smooth_mvf_datmemorystart_s1_add1_reg.s1_mstart_86_58 = addSel;
			iedge_smooth_mvf_datmemorystart_s1_add2_reg.s1_mstart_57_29 = addSel;
			iedge_smooth_mvf_datmemorystart_s1_add3_reg.s1_mstart_28_0 = addSel;
		}
	}
	else if(curStatus==0 && status==1)
	{
		if(i2rIdx == 0)
		{
			iedge_smooth_mvf_datmemorystart_s0_add0_reg.s0_mstart_115_87 = s0_add0;
			iedge_smooth_mvf_datmemorystart_s0_add1_reg.s0_mstart_86_58 = s0_add1;
			iedge_smooth_mvf_datmemorystart_s0_add2_reg.s0_mstart_57_29 = s0_add2;
			iedge_smooth_mvf_datmemorystart_s0_add3_reg.s0_mstart_28_0 = s0_add3;
		}
		else
		{
			iedge_smooth_mvf_datmemorystart_s1_add0_reg.s1_mstart_115_87 = s1_add0;
			iedge_smooth_mvf_datmemorystart_s1_add1_reg.s1_mstart_86_58 = s1_add1;
			iedge_smooth_mvf_datmemorystart_s1_add2_reg.s1_mstart_57_29 = s1_add2;
			iedge_smooth_mvf_datmemorystart_s1_add3_reg.s1_mstart_28_0 = s1_add3;
		}
	}
	else
	{
		return;
	}


	if (i2rIdx == 0) {
		rtd_outl(IEDGE_SMOOTH_MVF_DATMemoryStart_S0_Add0_reg, iedge_smooth_mvf_datmemorystart_s0_add0_reg.regValue);
		rtd_outl(IEDGE_SMOOTH_MVF_DATMemoryStart_S0_Add1_reg, iedge_smooth_mvf_datmemorystart_s0_add1_reg.regValue );
		rtd_outl(IEDGE_SMOOTH_MVF_DATMemoryStart_S0_Add2_reg, iedge_smooth_mvf_datmemorystart_s0_add2_reg.regValue);
		rtd_outl(IEDGE_SMOOTH_MVF_DATMemoryStart_S0_Add3_reg, iedge_smooth_mvf_datmemorystart_s0_add3_reg.regValue);
	} else {
		rtd_outl(IEDGE_SMOOTH_MVF_DATMemoryStart_S1Add0_reg, iedge_smooth_mvf_datmemorystart_s1_add0_reg.regValue );
		rtd_outl(IEDGE_SMOOTH_MVF_DATMemoryStart_S1_Add1_reg, iedge_smooth_mvf_datmemorystart_s1_add1_reg.regValue);
		rtd_outl(IEDGE_SMOOTH_MVF_DATMemoryStart_S1_Add2_reg, iedge_smooth_mvf_datmemorystart_s1_add2_reg.regValue);
		rtd_outl(IEDGE_SMOOTH_MVF_DATMemoryStart_S1_Add3_reg, iedge_smooth_mvf_datmemorystart_s1_add3_reg.regValue);
	}

	di_rtnr_ma_isnr_getmotion_main_reg.rtnr_isnr_filmmotion_update = status;
	rtd_outl(DI_RTNR_MA_ISNR_GETMOTION_MAIN_reg, di_rtnr_ma_isnr_getmotion_main_reg.regValue);

}

#define  SE_FILM_DET_C_SET_0_0_reg		0xB800C350
#define  SE_FILM_DET_C_SET_1_0_reg		0xB800C360
#define  SE_FILM_DET_9_SET_0_0_reg		0xB800C370
#define  SE_FILM_DET_9_SET_1_0_reg		0xB800C380
#define  SE_FILM_DET_9_SET_2_0_reg		0xB800C390
#define  SE_FILM_DET_9_SET_3_0_reg		0xB800C3A0
#define  SE_FILM_DET_25_SET_0_0_reg	0xB800C3B0
#define  SE_FILM_DET_25_SET_1_0_reg	0xB800C3C0
#define  SE_FILM_DET_25_SET_2_0_reg	0xB800C3D0
#define  SE_FILM_DET_25_SET_3_0_reg	0xB800C3E0
#define  SE_FILM_DET_TH_0_reg			0xB800C650
#define  SE_FILM_DET_TH2_0_reg			0xB800C660

extern void fwif_color_sld_still_image(int* thl_count_static_time, int* thl_stop_global_drop_count_frame);//sld

#if 1
extern struct se_dev *se_devices;
extern void WriteCmd(struct se_dev *dev, uint8_t* pbyCommandBuffer, int32_t lCommandLength);
extern void WriteCmdISR(struct se_dev *dev, uint8_t* pbyCommandBuffer, int32_t lCommandLength);
unsigned int se_cnt = 0;
int SE_FilmDetect_SECmd(SE_FMT_ST *pInfo)
{
#ifdef CONFIG_RTK_KDRV_SE
	SECMD_EXD_FMT_CONV_FILM SECmd_Ext_Fmt_Conv;
	int src1_index=0, src2_index=1;
#if 0
	if(pInfo->width <= 32 || pInfo->height <= 0 ||pInfo->s1_Addr == 0 || pInfo->s2_Addr == 0 || pInfo->width%16 != 0) {
		pr_notice("[SE_FilmDetect] data error, saddr=%08x, daddr=%08x, w=%d, h=%d \n", pInfo->s1_Addr, pInfo->s2_Addr, pInfo->width, pInfo->height);
		return -1;
	}
#endif
	memset(&SECmd_Ext_Fmt_Conv,0x0,sizeof(SECMD_EXD_FMT_CONV_FILM));

	rtd_outl(0xb809d740, 0x11111111);

	/* set SE_FilmDetect params */
	rtd_outl(SE_FILM_DET_C_SET_0_0_reg, 0x00050010);
	rtd_outl(SE_FILM_DET_C_SET_1_0_reg, 0x00080040);
	rtd_outl(SE_FILM_DET_9_SET_0_0_reg, 0x08010000);
	rtd_outl(SE_FILM_DET_9_SET_1_0_reg, 0x140400c0);
	rtd_outl(SE_FILM_DET_9_SET_2_0_reg, 0x20070180);
	rtd_outl(SE_FILM_DET_9_SET_3_0_reg, 0x0000021c);
	rtd_outl(SE_FILM_DET_25_SET_0_0_reg, 0x0e01c000);
	rtd_outl(SE_FILM_DET_25_SET_1_0_reg, 0x21c70150);
	rtd_outl(SE_FILM_DET_25_SET_2_0_reg, 0x18030000);
	rtd_outl(SE_FILM_DET_25_SET_3_0_reg, 0x3c0c0240);
	//rtd_outl(SE_FILM_DET_TH_0_reg, 0x00000000);
	rtd_outl(SE_FILM_DET_TH_0_reg, 0x13000);
	rtd_outl(SE_FILM_DET_TH2_0_reg, 0x00000000);

	/* set source1 info BADDR 0 */
	SECmd_Ext_Fmt_Conv.WordAddr0.OpCode = SEINFO_OPCODE_WRITE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordAddr0.RegisterAddress = (SEINFO_WRITEREG)(SE20INFO_REG_BASE_ADDR0+(src1_index<<4));
	SECmd_Ext_Fmt_Conv.WordAddr0.Clut = SEINFO_REGMODE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordAddr0_1.RegisterValue = pInfo->s1_Addr;
	/* set source1 info pitch */
	SECmd_Ext_Fmt_Conv.WordPitch0.OpCode = SEINFO_OPCODE_WRITE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordPitch0.RegisterAddress = (SEINFO_WRITEREG)(SE20INFO_REG_PITCH0+(src1_index<<4));
	SECmd_Ext_Fmt_Conv.WordPitch0.Clut = SEINFO_REGMODE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordPitch0_1.RegisterValue = pInfo->width;

	/* set source1 info BADDR 1 */
	SECmd_Ext_Fmt_Conv.WordAddr1.OpCode = SEINFO_OPCODE_WRITE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordAddr1.RegisterAddress = (SEINFO_WRITEREG)(SE20INFO_REG_BASE_ADDR0+(src2_index<<4));
	SECmd_Ext_Fmt_Conv.WordAddr1.Clut = SEINFO_REGMODE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordAddr1_1.RegisterValue = pInfo->s2_Addr;
	/* set source1 info pitch */
	SECmd_Ext_Fmt_Conv.WordPitch1.OpCode = SEINFO_OPCODE_WRITE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordPitch1.RegisterAddress = (SEINFO_WRITEREG)(SE20INFO_REG_PITCH0+(src2_index<<4));
	SECmd_Ext_Fmt_Conv.WordPitch1.Clut = SEINFO_REGMODE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordPitch1_1.RegisterValue = pInfo->width;

	/* set source2 info BADDR 2 */
	SECmd_Ext_Fmt_Conv.WordAddr2.OpCode = SEINFO_OPCODE_NOP;
	SECmd_Ext_Fmt_Conv.WordAddr2.RegisterAddress = 0;
	SECmd_Ext_Fmt_Conv.WordAddr2.Clut = 0;
	SECmd_Ext_Fmt_Conv.WordAddr2_1.RegisterValue = SEINFO_OPCODE_NOP;

	SECmd_Ext_Fmt_Conv.WordPitch2.OpCode = SEINFO_OPCODE_NOP;
	SECmd_Ext_Fmt_Conv.WordPitch2.RegisterAddress = 0;
	SECmd_Ext_Fmt_Conv.WordPitch2.Clut = 0;
	SECmd_Ext_Fmt_Conv.WordPitch2_1.RegisterValue = SEINFO_OPCODE_NOP;

	/* set destination info BADDR 2 */
	SECmd_Ext_Fmt_Conv.WordAddr3.OpCode = SEINFO_OPCODE_NOP;
	SECmd_Ext_Fmt_Conv.WordAddr3.RegisterAddress = 0;
	SECmd_Ext_Fmt_Conv.WordAddr3.Clut = 0;
	SECmd_Ext_Fmt_Conv.WordAddr3_1.RegisterValue = SEINFO_OPCODE_NOP;

	SECmd_Ext_Fmt_Conv.WordPitch3.OpCode = SEINFO_OPCODE_NOP;
	SECmd_Ext_Fmt_Conv.WordPitch3.RegisterAddress = 0;
	SECmd_Ext_Fmt_Conv.WordPitch3.Clut = 0;
	SECmd_Ext_Fmt_Conv.WordPitch3_1.RegisterValue = SEINFO_OPCODE_NOP;

#if 0
	/* set source1 info BADDR 1 */
	SECmd_Ext_Fmt_Conv.WordAddr1.OpCode = SEINFO_OPCODE_WRITE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordAddr1.RegisterAddress = (SEINFO_WRITEREG)(SE20INFO_REG_BASE_ADDR0+(src1_index<<4));
	SECmd_Ext_Fmt_Conv.WordAddr1.Clut = SEINFO_REGMODE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordAddr1_1.RegisterValue = pInfo->s1_Addr;
	/* set source1 info pitch */
	SECmd_Ext_Fmt_Conv.WordPitch1.OpCode = SEINFO_OPCODE_WRITE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordPitch1.RegisterAddress = (SEINFO_WRITEREG)(SE20INFO_REG_PITCH0+(src1_index<<4));
	SECmd_Ext_Fmt_Conv.WordPitch1.Clut = SEINFO_REGMODE_REGISTER;
	SECmd_Ext_Fmt_Conv.WordPitch1_1.RegisterValue = 960;

	/* set source2 info BADDR 2 */
	SECmd_Ext_Fmt_Conv.WordAddr2.OpCode = SEINFO_OPCODE_WRITE_REGISTER; //SEINFO_OPCODE_WRITE_REGISTER
	SECmd_Ext_Fmt_Conv.WordAddr2.RegisterAddress = (SEINFO_WRITEREG)(SE20INFO_REG_BASE_ADDR0+(src2_index<<4));
	SECmd_Ext_Fmt_Conv.WordAddr2.Clut = SEINFO_REGMODE_REGISTER; //SEINFO_REGMODE_REGISTER
	SECmd_Ext_Fmt_Conv.WordAddr2_1.RegisterValue = pInfo->s2_Addr;
	/* set source2 info pitch */
	SECmd_Ext_Fmt_Conv.WordPitch2.OpCode = SEINFO_OPCODE_WRITE_REGISTER; //SEINFO_OPCODE_WRITE_REGISTER
	SECmd_Ext_Fmt_Conv.WordPitch2.RegisterAddress = (SEINFO_WRITEREG)(SE20INFO_REG_PITCH0+(src2_index<<4));
	SECmd_Ext_Fmt_Conv.WordPitch2.Clut = SEINFO_REGMODE_REGISTER; //SEINFO_REGMODE_REGISTER
	SECmd_Ext_Fmt_Conv.WordPitch2_1.RegisterValue = 960;

	/* set destination info BADDR 0 */
	SECmd_Ext_Fmt_Conv.WordAddr0.OpCode = SEINFO_OPCODE_NOP;
	SECmd_Ext_Fmt_Conv.WordAddr0.RegisterAddress = 0;
	SECmd_Ext_Fmt_Conv.WordAddr0.Clut = 0;
	SECmd_Ext_Fmt_Conv.WordAddr0_1.RegisterValue = SEINFO_OPCODE_NOP;

	SECmd_Ext_Fmt_Conv.WordPitch0.OpCode = SEINFO_OPCODE_NOP;
	SECmd_Ext_Fmt_Conv.WordPitch0.RegisterAddress = 0;
	SECmd_Ext_Fmt_Conv.WordPitch0.Clut = 0;
	SECmd_Ext_Fmt_Conv.WordPitch0_1.RegisterValue = SEINFO_OPCODE_NOP;

	/**/
	SECmd_Ext_Fmt_Conv.WordReg1.OpCode = SEINFO_OPCODE_NOP;
	SECmd_Ext_Fmt_Conv.WordReg1.RegisterAddress = 0;
	SECmd_Ext_Fmt_Conv.WordReg1.Clut = 0;
	SECmd_Ext_Fmt_Conv.WordReg1_1.RegisterValue = SEINFO_OPCODE_NOP;

	/**/
	SECmd_Ext_Fmt_Conv.WordAddr3.OpCode = SEINFO_OPCODE_NOP;
	SECmd_Ext_Fmt_Conv.WordAddr3.RegisterAddress = 0;
	SECmd_Ext_Fmt_Conv.WordAddr3.Clut = 0;
	SECmd_Ext_Fmt_Conv.WordAddr3_1.RegisterValue = SEINFO_OPCODE_NOP;
#endif
	rtd_outl(0xb809d744, 0x11111111);

	/* set word1 ~ word11 */
	/* word1 */
	SECmd_Ext_Fmt_Conv.Word1.two_dc_mode 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.src2_argb_order 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.rslt_argb_order 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.out_alpha 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.rslt_matx_en 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.clip_10b 			= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.itu_en 			= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.src_swp_chr 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.rslt_swp_chr 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.sync_vo 			= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.lay_num 			= 0x1;
	SECmd_Ext_Fmt_Conv.Word1.lay_ctl 			= 0x0;
	SECmd_Ext_Fmt_Conv.Word1.rslt_fmt 			= 0x12;
	SECmd_Ext_Fmt_Conv.Word1.opcode 			= 0xb;

	/* word2 */
	SECmd_Ext_Fmt_Conv.Word2.rslt_out_y 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word2.rslt_out_x 		= 0x0;

	/* word3 */
	SECmd_Ext_Fmt_Conv.Word3.rslt_blk_mode_interleave 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word3.rslt_addr_index 			= 0x1;
	SECmd_Ext_Fmt_Conv.Word3.rslt_chr1_addr_index 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word3.rslt_chr2_addr_index 		= 0x0;

	/* word4 */
	SECmd_Ext_Fmt_Conv.Word4.src1_mat_en 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word4.src1_fmt 		= 0x12;
	SECmd_Ext_Fmt_Conv.Word4.src1_inpt_h 		= 0x21c;
	SECmd_Ext_Fmt_Conv.Word4.src1_inpt_w 		= 0x3c0;

	/* word5 */
	SECmd_Ext_Fmt_Conv.Word5.src1_fcv_stch 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word5.src1_argb_order 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word5.src1_inpt_y 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word5.src1_inpt_x 		= 0x0;

	/* word6 */
	SECmd_Ext_Fmt_Conv.Word6.src1_inpt_sel 				= 0x0;
	SECmd_Ext_Fmt_Conv.Word6.src1_blk_mode_interleave 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word6.src1_addr_index 			= 0x0;
	SECmd_Ext_Fmt_Conv.Word6.src1_chr1_addr_index 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word6.src1_chr2_addr_index		= 0x0;

	/* word7 */
	SECmd_Ext_Fmt_Conv.Word7.src2_mat_en 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word7.src2_fmt 		= 0x12;
	SECmd_Ext_Fmt_Conv.Word7.src2_inpt_y 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word7.src2_inpt_x 		= 0x0;

	/* word8 */
	SECmd_Ext_Fmt_Conv.Word8.src2_linear_gradient 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word8.src2_swp_chroma 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word8.src2_inpt_sel 			= 0x0;
	SECmd_Ext_Fmt_Conv.Word8.src2_addr_index 		= src2_index;
	SECmd_Ext_Fmt_Conv.Word8.src2_c1_addr_index 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word8.src2_c2_addr_index 	= 0x0;

	/* word9 */
	SECmd_Ext_Fmt_Conv.Word9.lay_num_ext 		= 0x1;
	SECmd_Ext_Fmt_Conv.Word9.sel_s1_alpha_s1s2 	= 0x2;
	SECmd_Ext_Fmt_Conv.Word9.sel_s2_alpha_s1s2 	= 0x3;

	/* word10 */
	SECmd_Ext_Fmt_Conv.Word10.blend_sel_s1s2 				= 0x5;
	SECmd_Ext_Fmt_Conv.Word10.color_key_s1s2 				= 0x0;
	SECmd_Ext_Fmt_Conv.Word10.src_clr_transform_s1s2 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word10.src_clr_transparency_s1s2 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word10.fb_dst_premultiply_s1s2 		= 0x1;
	SECmd_Ext_Fmt_Conv.Word10.fb_src_premulcolor_s1s2 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word10.fb_src_premultiply_s1s2 		= 0x1;
	SECmd_Ext_Fmt_Conv.Word10.fb_xor_s1s2 					= 0x0;
	SECmd_Ext_Fmt_Conv.Word10.fb_colorize_s1s2 				= 0x0;
	SECmd_Ext_Fmt_Conv.Word10.fb_blend_coloralpha_s1s2 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word10.fb_blend_alphachannel_s1s2 	= 0x1;
	SECmd_Ext_Fmt_Conv.Word10.fb_demultiply_s1s2 			= 0x0;
	SECmd_Ext_Fmt_Conv.Word10.fb_sel_srcclr_blend_s1s2 		= 0x3;
	SECmd_Ext_Fmt_Conv.Word10.fb_sel_destclr_blend_s1s2 		= 0x7;
	SECmd_Ext_Fmt_Conv.Word10.ROP_code_s1s2 				= 0x0;

	/* word11 */
	SECmd_Ext_Fmt_Conv.Word11.gl_sel_src_alpha_s1s2 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word11.gl_sel_destalpha_s1s2 		= 0x0;
	SECmd_Ext_Fmt_Conv.Word11.gl_sel_srcclr_blend_s1s2 	= 0x0;
	SECmd_Ext_Fmt_Conv.Word11.gl_sel_destclr_blend_s1s2 	= 0x0;

	/* word12 */
	SECmd_Ext_Fmt_Conv.Word12.Reserved = SEINFO_OPCODE_NOP;

	rtd_outl(0xb809d748, 0x11111111);
	WriteCmd(se_devices, (uint8_t *)&SECmd_Ext_Fmt_Conv, sizeof(SECMD_EXD_FMT_CONV_FILM));
	while((rtd_inl(SE_IDLE_0_reg)&0x1) !=0x01){
		hw_msleep(1);
	}
#endif
	return 0;
}
#endif

// rolling mode issue, need to check crc dynamic, should be remove if rolling fix.
extern unsigned int get_query_start_address(unsigned char idx);
extern char DI_PQC_CRC_Check_reset_cnt;
#if 0
void scalerVIP_DI_PQC_CRC_Check(void)
{
	_system_setting_info* system_info_structure_table = NULL;

	di_di_pq_cmp_pair_RBUS di_di_pq_cmp_pair_reg;
	di_di_pq_cmp_bit_RBUS di_di_pq_cmp_bit_reg;
	di_di_pq_decmp_pair_RBUS di_di_pq_decmp_pair_reg;
	di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;
	di_di_dma_multi_req_num_RBUS di_di_dma_multi_req_num_reg;
	di_im_di_weave_window_control_RBUS di_im_di_weave_window_control_reg;

	SMOOTH_TOGGLE_UPDATE_FWINFO_PKG *sm_info_pkg;
	unsigned char aligned_val;
	unsigned char PQC_Bit_Limit;
	unsigned char PQC_mode;
	unsigned int DI_Width, DI_Height;
	unsigned int data_size, info_size;
	unsigned int data_size_aligned, info_size_aligned;
	unsigned int MemStartAddr;
	unsigned char i;
	unsigned int MemAddr[6], MemAddr_aligned[6];
	static unsigned char status;
	unsigned int isSMT_active;
	sm_info_pkg = (SMOOTH_TOGGLE_UPDATE_FWINFO_PKG *)Scaler_GetShareMemVirAddr(SCALERIOC_SMOOTHTOGGLE_SHARE_INFO);

#ifdef CONFIG_BW_96B_ALIGNED
	aligned_val = 6;
#else
	aligned_val = 0;
#endif

	system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();

	if (DI_PQC_CRC_Check_reset_cnt != 0) {
		DI_PQC_CRC_Check_reset_cnt = ((DI_PQC_CRC_Check_reset_cnt-1)<0)?(0):(DI_PQC_CRC_Check_reset_cnt-1);
		status = 0;
		//rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, reset clk=%d,\n", rtd_inl(0xB801B6B8));
		rtd_printk(KERN_DEBUG, TAG_NAME, "DI PQC ISR check, reset cnt=%d,\n", DI_PQC_CRC_Check_reset_cnt);//remove by will for mute off performance issue KTASKWBS-8506
		return;
	}

	isSMT_active = fwif_color_ChangeOneUINT32Endian(sm_info_pkg->sm_info[_CHANNEL1].update_flag, 1);
	if (isSMT_active == 1) {
		//IoReg_SetBits(DI_DI_PQ_DECMP_IRQ_st_reg, DI_DI_PQ_DECMP_IRQ_st_crc_r_error_even_st_mask); // clear crc
		//IoReg_SetBits(DI_DI_PQ_DECMP_IRQ_st_reg, DI_DI_PQ_DECMP_IRQ_st_crc_g_error_even_st_mask); // clear crc
		//IoReg_SetBits(DI_DI_PQ_DECMP_IRQ_st_reg, DI_DI_PQ_DECMP_IRQ_st_crc_b_error_even_st_mask); // clear crc
		DI_PQC_CRC_Check_reset_cnt = 10;
		status = 0xff;
		rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, SMT is active \n");
		return;
	}

	if (DI_DI_PQ_CMP_get_cmp_en(rtd_inl(DI_DI_PQ_CMP_reg)) == 0) {
		//rtd_printk(KERN_INFO, TAG_NAME, "PQC Off \n");
		return;
	}

	if ((status == 3) && (DI_db_reg_ctl_get_db_apply(rtd_inl(DI_db_reg_ctl_reg)) == 0)) {
		//rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, status 4 =%d,\n", rtd_inl(0xB801B6B8));
		IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_en_mask); // enable DB
		status = 4;
		di_im_di_weave_window_control_reg.regValue = IoReg_Read32(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg);
		di_im_di_weave_window_control_reg.force2d = 0;
		di_im_di_weave_window_control_reg.force2d_i2rnd = 0;
		IoReg_Write32(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, di_im_di_weave_window_control_reg.regValue);
		IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_apply_mask); // apply DB

	}
#if 0
	if (status == 3) {
		//rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, status 3 =%d,\n", rtd_inl(0xB801B6B8));
		status = 4;
	}
#endif
	if (status == 2) {
		//rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, status 2 =%d,\n", rtd_inl(0xB801B6B8));
		status = 3;
	}

	if ((status == 1) && (DI_db_reg_ctl_get_db_apply(rtd_inl(DI_db_reg_ctl_reg)) == 0)) {
		//rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, status 1 =%d,\n", rtd_inl(0xB801B6B8));
		IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_en_mask); // enable DB

		PQC_Bit_Limit = 7;
		PQC_mode = PQC_Frame_Mode;
		DI_Width = Scaler_DispGetInputInfo(SLR_INPUT_DI_WID);
		DI_Height = Scaler_DispGetInputInfo(SLR_INPUT_IPV_ACT_LEN);

		// calculate memory size
		data_size = (((DI_Width * DI_Height * PQC_Bit_Limit) + (DI_Width * 8) + 2048)>>3) + 1024;
		info_size = 1024;
		if (aligned_val != 0) {
			data_size_aligned = dvr_size_alignment(data_size);
			info_size_aligned = dvr_size_alignment(info_size);
		} else {
			data_size_aligned = data_size;
			info_size_aligned = info_size;
		}

		MemStartAddr = get_query_start_address(QUERY_IDX_DI);

		if(MemStartAddr == _DUMMYADDR){
			rtd_printk(KERN_EMERG , TAG_NAME, "DI PQC ISR check set MEMIDX_DI  to size fail !!!\n");
			return;
		}

		MemAddr[0] = MemStartAddr;
		MemAddr[1] = MemStartAddr + data_size_aligned;
		MemAddr[2] = MemStartAddr + data_size_aligned + data_size_aligned;
		MemAddr[3] = MemStartAddr + data_size_aligned + data_size_aligned;
		MemAddr[4] = MemStartAddr + data_size_aligned + data_size_aligned;
		MemAddr[5] = MemStartAddr + data_size_aligned + data_size_aligned;
		if (aligned_val != 0) {
			for(i = 0; i < 6; i++) {
				MemAddr_aligned[i] = dvr_memory_alignment((unsigned long)MemAddr[i], data_size_aligned);
				if (MemAddr_aligned[i] == 0) {
						rtd_printk(KERN_EMERG, TAG_NAME, "DI PQC ISR check, memory 96 byte alignment fail, data addr=%x, index=%d, data_size_aligned=%d\n",
							MemAddr[i], i,  data_size_aligned);
						return;
				}
			}
		} else {
			MemAddr_aligned[i] = MemAddr[i];
		}

		rtd_outl(DI_DI_DATMemoryStartAdd1_reg,  (MemAddr_aligned[0]&0x7FFFFFFF) );
		rtd_outl(DI_DI_DATMemoryStartAdd2_reg,  (MemAddr_aligned[1]&0x7FFFFFFF) );
		rtd_outl(DI_DI_DATMemoryStartAdd3_reg,  (MemAddr_aligned[2]&0x7FFFFFFF) );
		rtd_outl(DI_DI_DATMemoryStartAdd4_reg,  (MemAddr_aligned[3]&0x7FFFFFFF) );
		rtd_outl(DI_DI_INFMemoryStartAdd1_reg,  (MemAddr_aligned[4]&0x7FFFFFFF) );
		rtd_outl(DI_DI_INFMemoryStartAdd2_reg,  (MemAddr_aligned[5]&0x7FFFFFFF) );

		// set PQC
		di_di_pq_cmp_pair_reg.regValue = rtd_inl(DI_DI_PQ_CMP_PAIR_reg);
		di_di_pq_cmp_pair_reg.cmp_data_format = 3;
		di_di_pq_cmp_pair_reg.cmp_line_mode = 0;
		rtd_outl(DI_DI_PQ_CMP_PAIR_reg, di_di_pq_cmp_pair_reg.regValue);

		di_di_pq_cmp_bit_reg.regValue = IoReg_Read32(DI_DI_PQ_CMP_BIT_reg);
		di_di_pq_cmp_bit_reg.frame_limit_bit = PQC_Bit_Limit;
		di_di_pq_cmp_bit_reg.line_limit_bit = PQC_Bit_Limit + 4;
		di_di_pq_cmp_bit_reg.block_limit_bit = 0x3f;
		rtd_outl(DI_DI_PQ_CMP_BIT_reg, di_di_pq_cmp_bit_reg.regValue);

		di_di_pq_decmp_pair_reg.regValue = IoReg_Read32(DI_DI_PQ_DECMP_PAIR_reg);
		di_di_pq_decmp_pair_reg.decmp_data_format = 3;
		di_di_pq_decmp_pair_reg.decmp_line_mode = 0;
		rtd_outl(DI_DI_PQ_DECMP_PAIR_reg, di_di_pq_decmp_pair_reg.regValue);

		di_di_dma_multi_req_num_reg.regValue = rtd_inl(DI_DI_DMA_Multi_Req_Num_reg);
		di_di_dma_multi_req_num_reg.rdma_addr_rolling = 0;
		di_di_dma_multi_req_num_reg.wdma_addr_rolling = 0;
		rtd_outl(DI_DI_DMA_Multi_Req_Num_reg, di_di_dma_multi_req_num_reg.regValue);

		im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);
		im_di_rtnr_control_reg.cp_rtnr_c_enable = 0;
		rtd_outl(DI_IM_DI_RTNR_CONTROL_reg, im_di_rtnr_control_reg.regValue);

		IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_apply_mask); // apply DB

		//IoReg_SetBits(DI_DI_PQ_DECMP_IRQ_st_reg, DI_DI_PQ_DECMP_IRQ_st_crc_r_error_even_st_mask); // clear crc
		//IoReg_SetBits(DI_DI_PQ_DECMP_IRQ_st_reg, DI_DI_PQ_DECMP_IRQ_st_crc_g_error_even_st_mask); // clear crc
		//IoReg_SetBits(DI_DI_PQ_DECMP_IRQ_st_reg, DI_DI_PQ_DECMP_IRQ_st_crc_b_error_even_st_mask); // clear crc
		status = 2;
		rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, DI mem_end=%x,info_size=%d,data_size=%d,info_size_aligned=%d,data_size_aligned=%d,\n", MemStartAddr, info_size, data_size, info_size_aligned, data_size_aligned);
		rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, MEM addr=%x,%x,%x,%x,%x,%x\n", MemAddr[0], MemAddr[1], MemAddr[2], MemAddr[3], MemAddr[4], MemAddr[5]);
		rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, MEM_aligned addr=%x,%x,%x,%x,%x,%x\n", MemAddr_aligned[0], MemAddr_aligned[1], MemAddr_aligned[2], MemAddr_aligned[3], MemAddr_aligned[4], MemAddr_aligned[5]);
		rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, set DI frame mode, w=%d,h=%d \n", DI_Width, DI_Height);

	}

	if (((DI_DI_PQ_DECMP_IRQ_st_get_crc_r_error_even_st(rtd_inl(DI_DI_PQ_DECMP_IRQ_st_reg)) == 1) ||
	(DI_DI_PQ_DECMP_IRQ_st_get_crc_g_error_even_st(rtd_inl(DI_DI_PQ_DECMP_IRQ_st_reg)) == 1) ||
	(DI_DI_PQ_DECMP_IRQ_st_get_crc_b_error_even_st(rtd_inl(DI_DI_PQ_DECMP_IRQ_st_reg)) == 1)) &&
	(DI_DI_DMA_Multi_Req_Num_get_wdma_addr_rolling(rtd_inl(DI_DI_DMA_Multi_Req_Num_reg)) == 1) && (status == 0)) {
		//rtd_printk(KERN_INFO, TAG_NAME, "DI PQC ISR check, status 0 =%d,\n", rtd_inl(0xB801B6B8));
		IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_en_mask); // enable DB
		status = 1;
		di_im_di_weave_window_control_reg.regValue = IoReg_Read32(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg);
		di_im_di_weave_window_control_reg.force2d = 1;
		di_im_di_weave_window_control_reg.force2d_i2rnd = 1;
		IoReg_Write32(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, di_im_di_weave_window_control_reg.regValue);
		IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_apply_mask); // apply DB
	}
}
#endif
//*************************************************************
//== DCC, DCR, AUTO_NR and RTK_DEMO MODE=======
//*************************************************************
extern _SE_PARAM_FilmDetectCtrl pParam;
extern _SE_OUTPUT_FilmDetectCtrl pOutput;
extern _SE_ReadBack_Regs pRBRegs;
extern SE_FMT_ST pInfo;
extern BOOL WriteRegister(UINT32 uiAddr, SINT32 ibitStart, SINT32 ibitEnd, UINT32 uiVal);
#ifdef CONFIG_RTK_8KCODEC_INTERFACE
	unsigned char R8K_MEMC_ID_update = 0;
#endif

void scalerVIP_colorMaAutoISR(SCALER_CHANNEL_NUM channel)
{

	//IoReg_SetBits(0xb802b000,_BIT4);
	unsigned char i = 0;
	SLR_VIP_TABLE* Share_Memory_VIP_TABLE_Struct = NULL;
	_clues* SmartPic_clue=NULL;
	_RPC_clues* RPC_SmartPic_clue=NULL;
	_system_setting_info* system_info_structure_table = NULL;
	_RPC_system_setting_info* RPC_system_info_structure_table = NULL;
	_VIP_NetFlix_smooth_Toggle_info* VCPU_smooth_Toggle_info = NULL;
	SLR_VIP_TABLE_CUSTOM_TV002* custom_TBL_TV002 = NULL;
	unsigned int en_test;
	//unsigned char black_white_detected;
	//unsigned char flag_chessboard=0;
	static unsigned char isEvenFrame = 0;
	char InputSourceDetFlag;
	//unsigned char isColorBar_flag = 0;	//Elsie 20130521
	static unsigned char preSource = 255;
	DRV_RPC_AutoMA_Flag *AutoMA_Struct = NULL;
	unsigned char DCTI_auto_table_select=0;
	DRV_VipNewDcti_auto_adjust *VipNewDcti_auto_adjust_table = NULL;
	di_im_di_control_RBUS im_di_control_reg;
	di_im_di_film_new_function_main_RBUS di_im_di_film_new_function_main_reg;
#ifdef RTK_RGBW // henry - merlin5 remove rtk rgbw
	rgbw_d_rgbw_adaptwhite_2_RBUS rgbw_d_rgbw_adaptwhite_2_REG;
	int data_sel = 0;
	static int hist[9][8] = {{0}};
#endif
	void *VIP_customer_TBL=NULL;
	SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();

	static unsigned char isTNRXC = 1;
//	unsigned char k = 0;
//	unsigned char SE_rdPtr = 0;
//	unsigned char SE_wrPtr = 0;



	MA_print_count++;//for debug print


//******************************************************************
//******************Pattern detector debug !!**************************
//******************************************************************
//--------------------------------------------------------------------------//
	Share_Memory_VIP_TABLE_Struct = scaler_GetShare_Memory_VIP_TABLE_Struct();
	SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();
	RPC_SmartPic_clue = scaler_GetShare_Memory_RPC_SmartPic_Clue_Struct();
	system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();
	RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();
	VIP_customer_TBL = scalerVIP_Get_Share_Memory_VIP_TABLE_Custom_Struct();

	if((Share_Memory_VIP_TABLE_Struct == NULL) || (SmartPic_clue == NULL)|| (RPC_SmartPic_clue == NULL) || (system_info_structure_table == NULL) || (VIP_customer_TBL==NULL) || (RPC_system_info_structure_table==NULL) || (gVip_Table==NULL))
	{
		if(MA_print_count%360==0)
		{
			ROSPrintf("\n====Share Memory PQ data ERROR====\n\n");
			ROSPrintf(" Mem0 = %p\n, Mem1 = %p\n",Share_Memory_VIP_TABLE_Struct, SmartPic_clue);
			ROSPrintf(" Mem2 = %p\n, Mem3 = %p\n",system_info_structure_table,VIP_customer_TBL);
			ROSPrintf(" Mem4 = %p\n, Mem5 = %p\n",RPC_system_info_structure_table, RPC_SmartPic_clue);
			ROSPrintf("\n===============================\n\n");
		}
		return;
	}

	/* check DI PQC crc*/
	//scalerVIP_DI_PQC_CRC_Check();
	/* VIP IP Enable Monitor */
	Scaler_scalerVIP_PQ_IP_Enable_Monitor(Share_Memory_VIP_TABLE_Struct, RPC_SmartPic_clue, SmartPic_clue, RPC_system_info_structure_table, system_info_structure_table, MA_print_count);

 /*
	if(MA_print_count%360==0)
	{
		Scaler_color_print_scalerinfo_isr();
	}
*/

	//get VCPU smoothtoggle info
	VCPU_smooth_Toggle_info = &(RPC_SmartPic_clue->S_NetFlix_info.NetFlix_smooth_Toggle_info);

	if( (VCPU_smooth_Toggle_info->m_film_clear) && !(VCPU_smooth_Toggle_info->smooth_toggle_update_flag) ){
		di_im_di_film_new_function_main_reg.regValue = rtd_inl(DI_IM_DI_FILM_NEW_FUNCTION_MAIN_reg);
		im_di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
#if 0 // mark for non-used function in kernel, CSFC 20160728
		extern FILM_FW_ShareMem_ISR *g_Share_Memory_FILM_FW_isr;
		if (g_Share_Memory_FILM_FW_isr) {
			SMOOTH_TOGGLE_INFO* imdSmoothInfo = dvrif_memory_share_imdSmoothInfo();
			g_Share_Memory_FILM_FW_isr->smooth_toggle_film = imdSmoothInfo[channel].IMD_SMOOTH_MODE_CURR;		//smooth_toggle_film change timming
		}
#endif
		VCPU_smooth_Toggle_info->m_film_clear = 0;
		im_di_control_reg.film_enable = VCPU_smooth_Toggle_info->m_film;
		im_di_control_reg.write_enable_5=1;
		di_im_di_film_new_function_main_reg.fw_film_en = VCPU_smooth_Toggle_info->g_fw_film_en;
		VCPU_smooth_Toggle_info->m_film = 0;
		rtd_outl(DI_IM_DI_CONTROL_reg, im_di_control_reg.regValue);
		rtd_outl(DI_IM_DI_FILM_NEW_FUNCTION_MAIN_reg, di_im_di_film_new_function_main_reg.regValue);
	}

//---------------------------------------------------------------------------------------//
//=== Film Detect for power saving (JerryWang 20180419) ===
//---------------------------------------------------------------------------------------//
#if 0
	SE_rdPtr = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.rdPtr;
	SE_wrPtr = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.wrPtr;
	rtd_outl(0xb809d714, SE_rdPtr);
	rtd_outl(0xb809d718, SE_wrPtr);
	if(se_cnt % 120 < 8){
		pr_notice("[jerry_SE_FilmDetect_00][%d,%d]", SE_rdPtr, SE_wrPtr);
		printk(KERN_EMERG"[jerry_SE_FilmDetect_00][%d,%d]", SE_rdPtr, SE_wrPtr);
	}

	if(RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].status == DETECT){
		SE_FilmDetectCtrl_Proc(&pParam, &pOutput, &pRBRegs);
	}
	else{
//		pr_notice("[jerry_SE_FilmDetect_Fail !!][Read_Ptr = Write_Ptr][%d,%d]", SE_rdPtr, SE_wrPtr);
	}
	//update Film_all data
	RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].Film_Mode = pOutput.u8_cur_cadence_Id[0];
	RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].Film_ID = pOutput.u8_phase_Idx[0];

	//se_cmd
	pInfo.width = 960;//RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.se_info_width;
	pInfo.height = 540;//RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.se_info_height;
	//pInfo.s2_Addr = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.SeqBufAddr;

	if(se_cnt % 10 == 0){
//		SE_FilmDetect_SECmd(&pInfo);
		RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].status = OUTPUT;
		RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.rdPtr = (SE_rdPtr + 1) % MAX_FILM_BUFF;
	}
	if(se_cnt == 100){
		rtd_outl(0xb809d720, 0x11111111);
		pr_notice("[jerry_SE_FilmDetect_SECmd_00][%d,%d]", pOutput.u8_cur_cadence_Id[0], (rtd_inl(0xb800c3f0)&0x7ffff));
		printk(KERN_EMERG"[jerry_SE_FilmDetect_SECmd_00][%d,%d]", pOutput.u8_cur_cadence_Id[0], (rtd_inl(0xb800c3f0)&0x7ffff));
	}
	if(se_cnt == 101){
		pr_notice("[jerry_SE_FilmDetect_SECmd_02][%d,%d]", pOutput.u8_cur_cadence_Id[0], (rtd_inl(0xb800c3f0)&0x7ffff));
		printk(KERN_EMERG"[jerry_SE_FilmDetect_SECmd_02][%d,%d]", pOutput.u8_cur_cadence_Id[0], (rtd_inl(0xb800c3f0)&0x7ffff));
	}

	if(se_cnt % 60 == 0){
		pr_notice("[jerry_SE_FilmDetect_SECmd_01][%d,%d]", pOutput.u8_cur_cadence_Id[0], (rtd_inl(0xb800c3f0)&0x7ffff));
		printk(KERN_EMERG"[jerry_SE_FilmDetect_SECmd_01][%d,%d]", pOutput.u8_cur_cadence_Id[0], (rtd_inl(0xb800c3f0)&0x7ffff));
	}

	se_cnt++;
	if(se_cnt > 100000){
		se_cnt = 1;
	}

	RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].status = OUTPUT;
	RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.rdPtr = (SE_rdPtr + 1) % MAX_FILM_BUFF;
#endif

#if 0
	if(MA_print_count%360==0)
	{
		ROSPrintf("  Input_src_Type= %d \n",system_info_structure_table->Input_src_Type);
		ROSPrintf("  Input_src_Form= %d \n",system_info_structure_table->Input_src_Form);
		ROSPrintf("  Input_VO_Form= %d \n",system_info_structure_table->Input_VO_Form);
		ROSPrintf("  Input_TVD_Form= %d \n",system_info_structure_table->Input_TVD_Form);
		ROSPrintf(" vdc_color_standard = %d \n",system_info_structure_table->vdc_color_standard);
		ROSPrintf("  Timing= %d \n",system_info_structure_table->Timing);
		ROSPrintf("  HDMI_video_format= %d \n",system_info_structure_table->HDMI_video_format);
		ROSPrintf("  VIP_source= %d \n",system_info_structure_table->VIP_source);
	}
#endif
	vd_pwr_ok = scalerVIP_check_vdc_hw_pwr();
	scalerVIP_NetFlix_smoothtoggle_enable(RPC_SmartPic_clue,RPC_system_info_structure_table);//if AP have infomation, have to change status from AP, CSFC 20140704

	scaler_Set_VIP_info_structure(channel,SmartPic_clue);//set information!!priority first!!CSFC 20150319
	AutoMA_Struct = &(system_info_structure_table->S_RPC_AutoMA_Flag);

//if (g_IsNot4KVO || (MA_print_count&0x3f) == 0)
	scalerVIP_Set_Start_Print_Info();
	scalerVIP_Set_Stop_Polling();
	if(Start_Print.Delay_Time ==0)
	{
		Start_Print.Delay_Time =1;
	}

	#if 0
	if(MA_print_count%360==0)
	{
		ROSPrintf("[Young]ISR flag \n");
		ROSPrintf(" %d  ,%d  ,%d  ,%d  ,%d  ,\n",AutoMA_Struct->AutoMA_En,AutoMA_Struct->AutoMA1_En,AutoMA_Struct->AutoMA2_En,AutoMA_Struct->AutoMA3_En,AutoMA_Struct->AutoMA4_En);
		ROSPrintf(" %d  ,%d  ,%d  ,%d  ,%d  ,\n",AutoMA_Struct->AutoMA_API_CTRL.DI_MiddleWare_Function_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_SMD_weake_move_Detecte_En,AutoMA_Struct->AutoMA_API_CTRL.compute_PQA_level_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Profile_Block_Motion_En,AutoMA_Struct->AutoMA_API_CTRL.noise_estimation_MAD_et_En);
		ROSPrintf(" %d  ,%d  ,%d  ,%d  ,%d  ,\n",AutoMA_Struct->AutoMA_API_CTRL.Y_U_V_Mad_Calculate_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_ET_Y_MOTION_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_FMV_HMCbin_hist_ratio_Cal_En,AutoMA_Struct->AutoMA_API_CTRL.drvif_color_ClueGather_En,AutoMA_Struct->AutoMA_API_CTRL.skin_tone_Level_detect_En);
		ROSPrintf(" %d  ,%d  ,%d  ,%d  ,%d  ,\n",AutoMA_Struct->AutoMA_API_CTRL.pure_color_detect_En,AutoMA_Struct->AutoMA_API_CTRL.motion_purecolor_concentric_circles_detect_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_rtnr_noise_measure_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_color_noise_mpeg_detect_En,AutoMA_Struct->AutoMA_API_CTRL.DI_detect_Champagnet_En);
		ROSPrintf(" %d  ,%d  ,%d  ,%d  ,%d  ,\n",AutoMA_Struct->AutoMA_API_CTRL.motion_concentric_circles_detect_En,AutoMA_Struct->AutoMA_API_CTRL.motion_purecolor_concentric_circles_detect_En,AutoMA_Struct->AutoMA_API_CTRL.motion_move_concentric_circles_detect_En,AutoMA_Struct->AutoMA_API_CTRL.drvif_color_colorbar_dectector_by_SatHueProfile_En,AutoMA_Struct->AutoMA_API_CTRL.black_white_pattern_detect_En);
		ROSPrintf(" %d  ,%d  ,%d  ,%d  ,%d  ,\n",AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Fade_Detection_En,AutoMA_Struct->AutoMA_API_CTRL.histogram_new_III_dcc_EN,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_DCR_EN,AutoMA_Struct->AutoMA_API_CTRL.p_film_detection_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_PQ_Adaptive_Table_En);
		ROSPrintf(" %d  ,%d  ,%d  ,%d  ,%d  ,\n",AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_MA_IEdgeSmooth_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Dynamic_Vertical_NR_En,AutoMA_Struct->AutoMA_API_CTRL.drvif_color_DCTI_for_ColorBar_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_color_noise_mpeg_apply_En,AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_RTNR_correctionbit_period_En);

	}
	#endif

	//ini setting
	if(system_info_structure_table->ISR_Printf_Flag.Delay_Time==0)
		system_info_structure_table->ISR_Printf_Flag.Delay_Time=200;



	#if 0
	if(MA_print_count%360==0)
	{
		ROSPrintf("\n==== system_info_structure_table->HDR_flag == %d  ===	\n",system_info_structure_table->HDR_flag );
	}
	if(system_info_structure_table->HDR_flag == 1)
	{
		AutoMA_Struct->AutoMA2_En =FALSE ;
		AutoMA_Struct->AutoMA5_En = FALSE;
		AutoMA_Struct->AutoMA6_En = FALSE;


		AutoMA_Struct->AutoMA_API_CTRL.DI_MiddleWare_Function_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_SMD_weake_move_Detecte_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Profile_Block_Motion_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_FMV_HMCbin_hist_ratio_Cal_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.drvif_color_ClueGather_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.skin_tone_Level_detect_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.pure_color_detect_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.DI_detect_Champagnet_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.motion_concentric_circles_detect_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.motion_purecolor_concentric_circles_detect_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.motion_move_concentric_circles_detect_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.drvif_color_colorbar_dectector_by_SatHueProfile_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.black_white_pattern_detect_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Fade_Detection_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_DCR_EN = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.p_film_detection_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_MA_IEdgeSmooth_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Dynamic_Vertical_NR_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.drvif_color_DCTI_for_ColorBar_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_color_noise_mpeg_apply_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_RTNR_correctionbit_period_En = FALSE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_DI_Dynamic_VDNoise_FrameMotion_En = FALSE;
	}
	else
	{
		AutoMA_Struct->AutoMA2_En =TRUE ;
		AutoMA_Struct->AutoMA5_En = TRUE;
		AutoMA_Struct->AutoMA6_En = TRUE;

		AutoMA_Struct->AutoMA_API_CTRL.DI_MiddleWare_Function_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_SMD_weake_move_Detecte_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Profile_Block_Motion_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_FMV_HMCbin_hist_ratio_Cal_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.drvif_color_ClueGather_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.skin_tone_Level_detect_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.pure_color_detect_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.DI_detect_Champagnet_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.motion_concentric_circles_detect_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.motion_purecolor_concentric_circles_detect_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.motion_move_concentric_circles_detect_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.drvif_color_colorbar_dectector_by_SatHueProfile_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.black_white_pattern_detect_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Fade_Detection_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_DCR_EN = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.p_film_detection_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_MA_IEdgeSmooth_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Dynamic_Vertical_NR_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.drvif_color_DCTI_for_ColorBar_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_color_noise_mpeg_apply_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_RTNR_correctionbit_period_En = TRUE;
		AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_DI_Dynamic_VDNoise_FrameMotion_En = TRUE;
	}
	#endif
//--------------------------------------------------------------------------//

#if 0 //VIP_100_4 project
scalerVIP_100_4_Bright_Plus();
#endif

#if 1
	//scalerVIP_HDR_apply();
	//scalerVIP_HDR_clk_reset(system_info_structure_table);
#else
	/*unsigned int lineCnt_in = rtd_inl(VODMA_VODMA_LINE_ST_reg) & 0xfff;
	unsigned int vo_vend = (rtd_inl(VODMA_VODMA_V1VGIP_VACT1_reg) >> 16) & 0xfff;*/
	dolby_v_top_top_d_buf_RBUS top_d_buf_reg;
	dm_hdr_dm_double_buffer_ctrl_RBUS dm_double_buffer_ctrl_reg;

	if(system_info_structure_table->HDR_info.HDR_Setting_Status == 1){
		/*// front porch
		if (lineCnt_in < (vo_vend-1)) {
			 //ROSPrintf("\n== OFF lineCnt_in =%d ,vend	=%d \n", lineCnt_in, (vo_vend - 1));
		}else*/
		{
			top_d_buf_reg.regValue = rtd_inl(DOLBY_V_TOP_TOP_D_BUF_reg);
			top_d_buf_reg.dolby_double_apply = 1;

			dm_double_buffer_ctrl_reg.regValue = rtd_inl(DM_HDR_DM_Double_Buffer_CTRL_reg);
			dm_double_buffer_ctrl_reg.dm_db_apply = 1;

			rtd_outl(DOLBY_V_TOP_TOP_D_BUF_reg, top_d_buf_reg.regValue);
			rtd_outl(DM_HDR_DM_Double_Buffer_CTRL_reg, dm_double_buffer_ctrl_reg.regValue);

			system_info_structure_table->HDR_info.HDR_Setting_Status = 0;

		}
	}
#endif

//*********************************************************************************************
//***************** ISR Detector Information start*****************************************
//*********************************************************************************************


//---------------------------------------------------------------------------------------//
// === RGBW histogram for adaptive white (henry 20170629 happy b-day!)
// === Remove RTK RGBW on Merlin5 (henry 20180402)
//---------------------------------------------------------------------------------------//
#ifdef RTK_RGBW // henry - merlin5 remove rtk rgbw
	rgbw_d_rgbw_adaptwhite_2_REG.regValue = IoReg_Read32(RGBW_D_RGBW_ADAPTWHITE_2_reg);

	if(rgbw_d_rgbw_adaptwhite_2_REG.hist_en == 1)
	{
		rgbw_d_rgbw_adaptwhite_2_REG.hist_shift_sel = 0;
		rgbw_d_rgbw_adaptwhite_2_REG.hist_mode_sel = 1;

		for(data_sel = 0; data_sel < 9; data_sel++)
		{
		    rgbw_d_rgbw_adaptwhite_2_REG.hist_data_sel = data_sel;
		    IoReg_Write32(RGBW_D_RGBW_ADAPTWHITE_2_reg, rgbw_d_rgbw_adaptwhite_2_REG.regValue);

		    fwif_color_set_RGBW_histogram(hist[data_sel]);
		}

		fwif_color_set_RGBW_adaptive_white(hist);

	}
#endif
//---------------------------------------------------------------------------------------//
// === source and mode information
//---------------------------------------------------------------------------------------//
	SmartPic_clue->Remmping_Src_Timing_index = drvif_color_check_source_remmping(SLR_MAIN_DISPLAY);
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
// === DI SIS Initial and Update
//---------------------------------------------------------------------------------------//
if(g_IsNot4KVO) {
	if(AutoMA_Struct->AutoMA_API_CTRL.DI_MiddleWare_Function_En==TRUE)
	{
	scalerVIP_DI_MiddleWare_StatusInit(RPC_system_info_structure_table->VIP_source);
	scalerVIP_DI_MiddleWare_HistUpdate((SmartPic_clue->Y_Main_Hist));
	scalerVIP_DI_MiddleWare_StatusUpdate();
	scalerVIP_DI_MiddleWare_SetStatus(STATUS_FADING, SmartPic_clue->Fade_flag);
	scalerVIP_DI_MiddleWare_SetStatus(STATUS_STILL_CONCENTRIC_CIRCLES, (SmartPic_clue->neckin_concentric_flag)); // Sony W1 CG NO.13
	scalerVIP_DI_MiddleWare_SetStatus(STATUS_MOVING_CAN, scalerVideo_Get_VD_MiddleWare(VD_STATUS_MOVING_CAN));   // 20151014, willy, use API to get VD status
	//scalerVIP_DI_MiddleWare_SetStatus(STATUS_MOVING_CAN, MovingCan_From_ScalerVideo); // flag from scalerVideo
	}
	if (Start_Print.DI_1==TRUE)
	{
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_HMC, debug_print_delay_time);
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_HMCNR, debug_print_delay_time);
	}
	if (Start_Print.DI_2==TRUE)
	{
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_SPAN, debug_print_delay_time);
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_SLOWMOTION, debug_print_delay_time);
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_MOTION, debug_print_delay_time);
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_SMD, debug_print_delay_time);
	}
	if (Start_Print.Snr==TRUE)
	{
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_NOISE, debug_print_delay_time);
	}
	//for debug
	if((system_info_structure_table->ISR_Printf_Flag.Flag1 & _BIT0) != 0)
	{
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_PAN, system_info_structure_table->ISR_Printf_Flag.Delay_Time);
	}
	if(AutoMA_Struct->AutoMA2_En ==TRUE){

		switch(RPC_system_info_structure_table->VIP_source)
		{
			case VIP_QUALITY_CVBS_NTSC:
			case VIP_QUALITY_CVBS_PAL:
			case VIP_QUALITY_YPbPr_480I:
			//case VIP_QUALITY_YPbPr_576I:
			case VIP_QUALITY_HDMI_480I:
			case VIP_QUALITY_HDMI_576I:
				if( DynamicOptimizeSystem[139] != 1 )
					scalerVIP_DI_MiddleWare_PAN_Apply(); // rord, 20151005, for code flow issue

				scalerVIP_DI_MiddleWare_HMC_Apply();
 				break;



 			case VIP_QUALITY_HDMI_1080I:
				scalerVIP_DI_MiddleWare_PAN_Apply(); // rord, 20151005, for code flow issue
				scalerVIP_DI_MiddleWare_HMC_Apply();

                                break;
			case VIP_QUALITY_DTV_480I:
			case VIP_QUALITY_DTV_576I:
				scalerVIP_DI_MiddleWare_PAN_Apply(); // rord, 20151005, for code flow issue

				scalerVIP_DI_MiddleWare_HMC_Apply();
				break;

			default:

 				break;

		}


	//rord.tsao mark //no more use.
	//if(!(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV006 && !RPC_system_info_structure_table->PQ_demo_flag)) //20150819 remove mark due to HD 2:2 fail if do scalerVIP_DI_MiddleWare_FILM_Apply
	//{
		//scalerVIP_DI_MiddleWare_FILM_Apply(); // it can be remove.
	//}

//	crt_sys_dclkss_RBUS dclkss_reg;
/* //rord.tsao mark 2015/0710
	di_im_di_hmc_pan_control_RBUS di_im_di_hmc_pan_control_reg;
	di_im_di_hmc_pan_control_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_CONTROL_reg);
	unsigned char hmcnr_fw_en = ((di_im_di_hmc_pan_control_reg.dummy18024660_31_24 & 0x80)>>7); // bit31
	switch(RPC_system_info_structure_table->VIP_source)
	{
		case VIP_QUALITY_CVBS_NTSC:
		case VIP_QUALITY_CVBS_PAL:
		case VIP_QUALITY_YPbPr_480I:
		case VIP_QUALITY_YPbPr_576I:
		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_HDMI_576I:
			scalerVIP_DI_MiddleWare_HMCNR_Apply(hmcnr_fw_en);

		break;
		case VIP_QUALITY_HDMI_1080I:
			scalerVIP_DI_MiddleWare_HMCNR_Apply(hmcnr_fw_en);
			break;

		default:
			scalerVIP_DI_MiddleWare_HMCNR_Apply(hmcnr_fw_en);
			break;

	}
*/
	//scalerVIP_DI_MiddleWare_MCNR_Ctrl(0);

	scalerVIP_DI_MiddleWare_MCNR_Ctrl2(0);

	//scalerVIP_BTR_Detecte();
// chen 180308 remove

	//scalerVIP_SMD_weake_move_Detecte();
// end chen 180308 remove

// chen 170522
//	scalerVIP_DI_MiddleWare_ZOOMMOTION_Apply(16);
// end chen 170522
// chen 180308 remove
	//scalerVIP_DI_MiddleWare_SLOWMOTION_Apply(16);
	//scalerVIP_DI_MiddleWare_FADING_Apply(5);
	//scalerVIP_DI_MiddleWare_SMD_Apply();
//end chen 180308 remove
	scalerVIP_DI_MiddleWare_SPECIAL_Apply((SmartPic_clue->Remmping_Src_Timing_index));
	}
} else {
	scalerVIP_DI_MiddleWare_StatusInit(RPC_system_info_structure_table->VIP_source);
}
#if 0
	//============= DI detect test ================= //
	if((MA_print_count%Start_Print.Delay_Time==0)&&(Start_Print.ID_Pattern_139==TRUE))
	{
		ROSPrintf("STATUS_MOTION=%d,S_Noise=%d,S_Noise_R=%d,T_Noise=%d,T_Noise_R=%d,\n",
			scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION),scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL),
			scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE),scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_TEMPORAL_NOISE_LEVEL),
			scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_TEMPORAL_NOISE_RELIABLE));
	}

	/*if((MA_print_count%Start_Print.Delay_Time==0)&&(Start_Print.Reverse_5==TRUE))
	{
		scalerVIP_DI_MiddleWare_DebugMode(STATUS_NOISE, Start_Print.Delay_Time);
	}*/


	/*if((MA_print_count%Start_Print.Delay_Time==0)&&(Start_Print.ID_Pattern_147==TRUE))
	{
		ROSPrintf("input_src_form=%d,Input_src_Type=%d,Input_TVD_Form=%d,T_Noise=%d,Input_VO_Form=%d,\n",
			system_info_structure_table->Input_src_Form, system_info_structure_table->Input_src_Type, system_info_structure_table->Input_TVD_Form
			,system_info_structure_table->Input_VO_Form);
	}*/
#endif
//============= DI detect test ================= //

#if 0
if ((MA_print_count % 30) == 0)
{
	ROSPrintf("[SIS System-1]MOTION:%d, HMC: %d, PAN: %d:%d, VPAN: %d, ZOOM: %d, SLOW:%d\n", scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION), scalerVIP_DI_MiddleWare_GetStatus(STATUS_HMC),
		scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN), (scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_LEVEL)-16), scalerVIP_DI_MiddleWare_GetStatus(STATUS_VPAN),
		scalerVIP_DI_MiddleWare_GetStatus(STATUS_ZOOMMOTION),	scalerVIP_DI_MiddleWare_GetStatus(STATUS_SLOWMOTION));

	ROSPrintf("[SIS System-2]FADE:%d, HF:%d/%d, FILM: %d, SCC:%d\n", scalerVIP_DI_MiddleWare_GetStatus(STATUS_FADING), scalerVIP_DI_MiddleWare_GetStatus(STATUS_HIGHFREQUENCY_LEVEL), HIGHFREQUENCY_SCALE,
		scalerVIP_DI_MiddleWare_GetStatus(STATUS_FILM), scalerVIP_DI_MiddleWare_GetStatus(STATUS_STILL_CONCENTRIC_CIRCLES));

	ROSPrintf("[SIS System-3]NR_SPT_R: %d, NR_SPT_LV: %d, NR_TMP_R: %d, NR_TMP_LV: %d\n", scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE),
		scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL), scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_TEMPORAL_NOISE_RELIABLE),
		scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_TEMPORAL_NOISE_LEVEL));
}

if (scalerVIP_DI_MiddleWare_GetStatus(STATUS_SCENECHANGE))
{
	ROSPrintf("[SIS System] Scene Change Detected!!\n");
	scalerVIP_DI_MiddleWare_DebugMode(STATUS_SCENECHANGE, 1);
}
#endif

//for LG demo BW not enough, default disable!! sync. from Mac3 CSFC 20150312
#if 0//LG_Demo_flag
	od_od_cap_status_RBUS od_cap_status_reg;
	od_od_cap_ctl0_RBUS cap_ctl0_reg;
	od_od_ctrl0_RBUS od_ctrl0_reg;

	od_ctrl0_reg.regValue = rtd_inl(OD_OD_CTRL0_reg);
	od_cap_status_reg.regValue = rtd_inl(OD_OD_CAP_STATUS_reg);

	if ((od_cap_status_reg.cap_fifo_overflow == 1)&&(od_ctrl0_reg.od_ctrl==1))
	{
		rtd_clearbits(OD_OD_CAP_CTL0_reg, _BIT24);
		rtd_setbits(OD_OD_CAP_CTL0_reg, _BIT24);

		rtd_setbits(OD_OD_CAP_STATUS_reg, _BIT2);

		ROSPrintf("[OD] Bandwidth capture error, workaround solution!!!\n");
	}

	cap_ctl0_reg.regValue = rtd_inl(OD_OD_CAP_CTL0_reg);
	if(cap_ctl0_reg.cap_en==0)
		rtd_setbits(OD_OD_CAP_CTL0_reg, _BIT24);
#endif


//---------------------------------------------------------------------------------------//
// === Check DI DMA error flag and disable OD
// NOTE: need to check and fix, CSFC mark 20140429
//---------------------------------------------------------------------------------------//
//if ((MA_print_count % 20) == 0)
	//scalerVIP_OD_CheckBandwidth();

//====== Custom Lead =========
//---------------------------------------------------------------------------------------//
	if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV015)
	{
#ifdef ISR_TV015_DI_FUNCTION_ENABLE
	    scalerVIP_TV015_Lead();
#endif
	}




//---------------------------------------------------------------------------------------//
//==read profile (Elsie 20130521 seperated from still motion judge)==
//---------------------------------------------------------------------------------------//
if (g_IsNot4KVO) {
#ifdef ISR_AMBILIGHT_ENABLE
	if(m_AmbilightMode == 1)
		SmartPic_clue->Profile_Cal_INFO.ProfileFlag_Y = 0;
	else
#endif
	{
		#if 1 //new
		scalerVIP_scalerColor_profile();
		#else //old
		SmartPic_clue->Profile_Cal_INFO.ProfileFlag_Y = scalerVIP_ReadProfile(SmartPic_clue);
		#endif
	}
}





//---------------------------------------------------------------------------------------//
//==NR detector
//---------------------------------------------------------------------------------------//
	if(system_info_structure_table->Input_src_Form == _SRC_FROM_VDC && vd_pwr_ok)
		SmartPic_clue->VD_Signal_Status_value_avg = VD_noise_Status_sum_avg();  //yuan1024
		//drvif_color_compute_noise_level(SLR_MAIN_DISPLAY); //CSFC mark from 20140429, need sync. to new PQA table
	else
		SmartPic_clue->VD_Signal_Status_value_avg = 0;
if (g_IsNot4KVO || (MA_print_count&0xf) == 0) {

	if(AutoMA_Struct->AutoMA_API_CTRL.compute_PQA_level_En==TRUE)
	{
		scalerVIP_compute_PQA_level(Share_Memory_VIP_TABLE_Struct, SmartPic_clue, system_info_structure_table, RPC_SmartPic_clue);
	}
}
//---------------------------------------------------------------------------------------//
//================= Noise estimation (20131105 jimmy.lin) =========================//
//---------------------------------------------------------------------------------------//
if (g_IsNot4KVO) {
#ifdef ISR_AMBILIGHT_ENABLE
	if( (m_AmbilightMode != 1 )&&(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Profile_Block_Motion_En==TRUE)) // profile unavailable
#else
	if(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Profile_Block_Motion_En==TRUE) // profile unavailable
#endif
	{
		//Return : MOTION_NOISE_TYPE
		SmartPic_clue->block_motion_status = scalerVIP_Profile_Block_Motion(SmartPic_clue);
	}
}
	//Return:MOTION_NOISE_TYPE
	if((RPC_system_info_structure_table->Project_ID != VIP_Project_ID_TV003 )&& (AutoMA_Struct->AutoMA_API_CTRL.noise_estimation_MAD_et_En==TRUE))//for TV003, not need use this function
	{
		if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_MOTION_RTNR]==1)
		SmartPic_clue->MAD_motion_status = scalerVIP_noise_estimation_MAD_et((SmartPic_clue->SCALER_DISP_INFO.IphActWid_H), (SmartPic_clue->SCALER_DISP_INFO.IpvActLen_V));
		else
			SmartPic_clue->MAD_motion_status =0;

	}
//---------------------------------------------------------------------------------------//
if (g_IsNot4KVO) {
	if(Enable_Hist_MAD_Calculate)
	{
		if (AutoMA_Struct->AutoMA_API_CTRL.Y_U_V_Mad_Calculate_En==TRUE)
		scalerVIP_Y_U_V_Mad_Calculate(Share_Memory_VIP_TABLE_Struct, SmartPic_clue, system_info_structure_table/*, RPC_system_info_structure_table*/);
		/* use "scalerVIP_ET_Y_MOTION_En" to control HDR setting status, elieli*/
		/*if (AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_ET_Y_MOTION_En==TRUE)
		scalerVIP_ET_Y_MOTION();*/
	}
}
scalerVIP_HMCNR_statistic();
//---------------------------------------------------------------------------------------//
//=====Y, Hue, Sat Histogram detector information====
//---------------------------------------------------------------------------------------//
		scalerVIP_YHist_HueHist_Ratio_Calculate();
		scalerVIP_Sat_Hist_Calculate();
		SmartPic_clue->saturationflag = scalerVIP_Saturation_Detection(); //remove this for video book sony screen flash on/off
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//=====DI FMV HMC MV Histogram detector information====
//---------------------------------------------------------------------------------------//
if(g_IsNot4KVO) {
	if (AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_FMV_HMCbin_hist_ratio_Cal_En==TRUE)
	scalerVIP_FMV_HMCbin_hist_ratio_Cal(Share_Memory_VIP_TABLE_Struct, SmartPic_clue, system_info_structure_table);
}
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//=====Motion detector=====
//=====only for interlace signal motion detector =======
//---------------------------------------------------------------------------------------//
if(g_IsNot4KVO) {
	di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;
	im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);
	if(im_di_rtnr_control_reg.cp_rtnr_progressive != 1)
	{
		//if(system_info_structure_table->Input_src_Form == _SRC_FROM_VDC)
		//	SmartPic_clue->di_motion_status = scalerVideo_MotionDecision();
		//else
			SmartPic_clue->di_motion_status = scalerVideo_MotionDecision();

#if 0
		if(rtd_inl(0xb802e4f0)&0x1)//lesley: masnr test
		{
			if(rtd_inl(0xb802e4f0)&0x2)// disable update
				scalerVIP_color_MA_ISNR_MotionUpdate(0);
			else if(rtd_inl(0xb802e4f0)&0x4)// enable update
				scalerVIP_color_MA_ISNR_MotionUpdate(1);
		}
#endif
	}
	if(AutoMA_Struct->AutoMA_API_CTRL.drvif_color_ClueGather_En ==TRUE)
		drvif_color_ClueGather(channel, SmartPic_clue);//for getting MAD et and film motion information
}
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//==read from input source detection (Jimmy 20140213 added for Sirius) ==
//== This function can detector status for ( SD in -> HD out )
//== NOTE : Need to fix and test this function, CSFC mark on 20140429 ==
//---------------------------------------------------------------------------------------//
InputSourceDetFlag = 0;
scalerVIP_Res_Det();
scalerVIP_Bad_UpScaling();

#if 1//juwen, sld experiment
//pr_notice("[juwen,pr_notice] sld experiment\n");
	//if((log_count_lsd >20) &&(log_count_lsd <30) )
		//pr_notice("[juwen,pr_notice,before] still_frame_count, logo_count_pre = %d,%d\n",still_frame_count[0],logo_count_pre[0]);

	//fwif_color_sld_still_image(&(still_frame_count[0]), &(logo_count_pre[0]));
	fwif_color_sld_still_image(&thl_count_static_time,&thl_stop_global_drop_count_frame);

	//if((log_count_lsd >20) &&(log_count_lsd <30) )
		//pr_notice("[juwen,pr_notice] still_frame_count, logo_count_pre = %d,%d\n",still_frame_count[0],logo_count_pre[0]);

	//log_count_lsd = log_count_lsd + 1;
	//if(log_count_lsd > 1024)
		//log_count_lsd = 1024;
#endif//juwen, LC, APL




	//if( InputSourceDetFlag == SUCCESS )
		//scalerVIP_Input_Source_Detection(2);
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//==skin tone detector
//---------------------------------------------------------------------------------------//
if(g_IsNot4KVO) {
		//skin_tone_detect(_CHANNEL1, scaler_disp_info[_CHANNEL1].DispWid, scaler_disp_info[_CHANNEL1].DispLen);
		SmartPic_clue->skintoneflag=skin_tone_found;
		if (AutoMA_Struct->AutoMA_API_CTRL.skin_tone_Level_detect_En==TRUE)
		skin_tone_Level_detect(_CHANNEL1,
			Scaler_DispGetInputInfoByDisp(SLR_MAIN_DISPLAY, SLR_INPUT_DISP_WID),
			Scaler_DispGetInputInfoByDisp(SLR_MAIN_DISPLAY, SLR_INPUT_DISP_LEN));
} else
	SmartPic_clue->skintoneflag = 0;
//---------------------------------------------------------------------------------------//

//=======================================================
//===  Pure Color Detection== < if pure_color ==1, DCC.DCL_B.DCL_W all off >
//=======================================================
	//if(Sony_DCC_API_ON || TV_057_style_ON)
	//	pure_color = pure_color_detect_Sony(0, scaler_disp_info[SLR_MAIN_DISPLAY].DispWid, scaler_disp_info[SLR_MAIN_DISPLAY].DispLen);
	//else
		//pure_color = pure_color_detect_Sony(0, scaler_disp_info[SLR_MAIN_DISPLAY].DispWid, scaler_disp_info[SLR_MAIN_DISPLAY].DispLen);//for_LG_demo
if(g_IsNot4KVO) {
          if (AutoMA_Struct->AutoMA_API_CTRL.pure_color_detect_En==TRUE){
		SmartPic_clue->PureColor = pure_color_detect(0, SmartPic_clue->SCALER_DISP_INFO.DispWid, SmartPic_clue->SCALER_DISP_INFO.DispLen);
          }
		if ((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Dcc_2==TRUE))
		{
			ROSPrintf("==== pure_color =%d=====\n",(SmartPic_clue->PureColor));
			ROSPrintf("==== Saturation_detect_flag =%d=====\n",SmartPic_clue->saturationflag);
		}
}
//---------------------------------------------------------------------------------------//
//==Color Histogram Detector==
//---------------------------------------------------------------------------------------//
		en_test = 0;
		if (AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_colorHistDetect_En==TRUE)
		scalerVIP_colorHistDetect(en_test);
//---------------------------------------------------------------------------------------//


//---------------------------------------------------------------------------------------//
//==Profile Motion detector==
//---------------------------------------------------------------------------------------//
	if (Profile_Motion_Detect_ON)
	{
		if ((SmartPic_clue->Profile_Cal_INFO.ProfileFlag_Y) == 1)
			scalerVIP_Profile_Motion_Detect(channel, SmartPic_clue);
	}
//---------------------------------------------------------------------------------------//

	if(TV_05_style_ON == 0)
	{
		if(AutoMA_Struct->AutoMA6_En)// RTK demo mode
		{
			still_piccture_auto_clean =1;
		}
		else
		{
			still_piccture_auto_clean =0;
		}
	}

//*********************************************************************************************
//~~~~~ ISR Detector Information end~~~~
//*********************************************************************************************



//*********************************************************************************************
//***************************** detection ******************************************************
//*********************************************************************************************
	//scalerVIP_rtnr_noise_measure();



//---------------------------------------------------------------------------------------//
//============AUTO MA 5 : MPEG NR Function (detection)===========
//---------------------------------------------------------------------------------------//
if(g_IsNot4KVO) {
	if(AutoMA_Struct->AutoMA5_En==TRUE){
		scalerVIP_color_noise_mpeg_detect();
		scalerVIP_color_noise_mpeg_v_detect();
		//scalerVIP_color_noise_dejag_detect();
	}
}
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//============RTNR_Adaptive_detect===========
//---------------------------------------------------------------------------------------//
	//scalerVIP_newRTNR_Adaptive_detect(_CHANNEL1,&motion_level_flag,&Pan_flag,&BigSmoothArea_flag); // CSFC, mark from 20140429
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//===  chessboard detection, jason9.ccc  '100119 =======
//---------------------------------------------------------------------------------------//
	//flag_chessboard = drvif_color_chessboard_detection(16, 3, 80, 10, 12); // CSFC, mark from 20140429
//threshld	(16, th1-> bigger=>looser, th2-> smaller=>looser, th3-> bigger=>looser, th4-> smaller=>looser)
//-----------------------------------------------------------------------------------------------
if (g_IsNot4KVO) {
//---------------------------------------------------------------------------------------//
//=== DI detect champange ====
//---------------------------------------------------------------------------------------//
      if (AutoMA_Struct->AutoMA_API_CTRL.DI_detect_Champagnet_En==TRUE)
	 SmartPic_clue->Champagne_flag = DI_detect_Champagne(SmartPic_clue->SCALER_DISP_INFO.DispWid, SmartPic_clue->SCALER_DISP_INFO.DispLen);
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//===concentric circles detection===
//---------------------------------------------------------------------------------------//
	//if (AutoMA_Struct->AutoMA_API_CTRL.motion_concentric_circles_detect_En==TRUE)
	SmartPic_clue->neckin_concentric_flag = motion_concentric_circles_detect(SmartPic_clue->SCALER_DISP_INFO.DispWid, SmartPic_clue->SCALER_DISP_INFO.DispLen);
	if (AutoMA_Struct->AutoMA_API_CTRL.motion_purecolor_concentric_circles_detect_En==TRUE)
	SmartPic_clue->PureColor_neckin_concentric_flag = motion_purecolor_concentric_circles_detect(SmartPic_clue->SCALER_DISP_INFO.DispWid, SmartPic_clue->SCALER_DISP_INFO.DispLen);

	if (AutoMA_Struct->AutoMA_API_CTRL.motion_move_concentric_circles_detect_En==TRUE)
	SmartPic_clue->Motion_concentric_flag = motion_move_concentric_circles_detect(SmartPic_clue->SCALER_DISP_INFO.DispWid, SmartPic_clue->SCALER_DISP_INFO.DispLen);

//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//================colorbar detection (Elsie 20130521)=============(modify CSFC 201501)
//---------------------------------------------------------------------------------------//
	//isColorBar_flag = scalerVIP_ColorbarDetector();
	//SmartPic_clue->Colorbar_flag = drvif_color_colorbar_dectector(SmartPic_clue);
	DCTI_auto_table_select = system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.iDcti_table_select;
	VipNewDcti_auto_adjust_table = &(system_info_structure_table->PQ_Setting_Info.I_D_Dcti_INFO.auto_adjust_Table[DCTI_auto_table_select]);
	if (AutoMA_Struct->AutoMA_API_CTRL.drvif_color_colorbar_dectector_by_SatHueProfile_En==TRUE)
	SmartPic_clue->colorbar_score= drvif_color_colorbar_dectector_by_SatHueProfile(SmartPic_clue);//20141226, CSFC
	if((SmartPic_clue->colorbar_score)>(VipNewDcti_auto_adjust_table->VipNewDcti_auto_setting.low_bound))
	{
		if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
		{
			ROSPrintf(" low_bound=%d !!\n",(VipNewDcti_auto_adjust_table->VipNewDcti_auto_setting.low_bound));
			ROSPrintf(" Enable DCTI enhance for colobar !!\n");
		};

		SmartPic_clue->Colorbar_flag = true;
	}
	else
	{
		SmartPic_clue->Colorbar_flag = false;
	}

//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//==================black-white detection (only CVBS)=======================
//---------------------------------------------------------------------------------------//
	if (AutoMA_Struct->AutoMA_API_CTRL.black_white_pattern_detect_En==TRUE)
	SmartPic_clue->CVBS_black_white_falg= black_white_pattern_detect();
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//================= Fade Detection (20131105 jimmy.lin) ==========================//
//---------------------------------------------------------------------------------------//
	if(((SmartPic_clue->Profile_Cal_INFO.ProfileFlag_Y)==SUCCESS)&&(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Fade_Detection_En==TRUE))
	{
		SmartPic_clue->Fade_flag = scalerVIP_Fade_Detection();
		//if( Fade_flag ) ROSPrintf( "[ScalerVIP] Fade detected\n" );
	}
}

//*********************************************************************************************
//~~~~~~end detection~~~~~~
//*********************************************************************************************


//*********************************************************************************************
//**************** Some Basic algo. function  *********************************
//*********************************************************************************************

//---------------------------------------------------------------------------------------//
//== DCC ==
//---------------------------------------------------------------------------------------//
	if (Stop_Polling.Stop_Dcc==FALSE) //Stop_polling =TRUE : STOP DCC ,
	{
		extern unsigned char bSkipHistIIR;

		if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV006 && RPC_system_info_structure_table->PQ_demo_flag == 0)
		{
			bSkipHistIIR = 1;
			if (system_info_structure_table->DCC_FW_ONOFF)
				scalerDCC_tv006_apply_dcc(channel, 7);
		}
		else if (AutoMA_Struct->AutoMA_API_CTRL.histogram_new_III_dcc_EN==TRUE)
		{
			bSkipHistIIR = 0;
			if(COLOR_HISTOGRAM_LEVEL ==128){
				histogram_new_III_dcc(channel,7, 7);
			} else {
			histogram_new_III_dcc(channel,5, 7);
		}
	}
	}
//---------------------------------------------------------------------------------------//

#if 0
//scalerVIP_DI_Dynamic_Status_Adjust_by_Global_Motion(motion_level_flag);
// VD save initial register value when source change, willy 20150715
if(system_info_structure_table->Input_src_Form == _SRC_FROM_VDC && vd_pwr_ok)
{
    scalerVideo_NoistStatusUpdate(); // move to VGIPISR?
}

if (g_IsNot4KVO) {
//if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV006 &&
//   ( (RPC_system_info_structure_table->VIP_source==VIP_QUALITY_CVBS_NTSC)||
//   (RPC_system_info_structure_table->VIP_source==VIP_QUALITY_CVBS_PAL)) ){
if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV006 ){

    scalerVIP_Identify_Pattern_forLGM2();
    scalerVIP_Set_Parameter_forLGM2(1);
}
else
{
    scalerVIP_Identify_Pattern_forLG_K2L();
    scalerVIP_Set_Parameter_forLG_K2L();
}
}
#endif

//---------------------------------------------------------------------------------------//
//=== DCR Function ===
//---------------------------------------------------------------------------------------//

	//if(MA_print_count%1000==0)
		//ROSPrintf(" yuan,project_ID=%d,%d \n",project_ID,VIP_Project_ID_TV003);
	//if(project_ID ==PRJ_TV003)
	//scalerVIP_DCR();


if (g_IsNot4KVO) {
if((Stop_Polling.Stop_Dcr== FALSE)&&(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_DCR_EN==TRUE)) //Stop_polling =TRUE : STOP  DCR,
{
	//if(MA_print_count%250==0)
	//	printk(KERN_EMERG "scalerVIP_DCR_EN\n");

	if((TV_05_style_ON == 0)&&(system_info_structure_table->RTK_DCR_Enable==1)&&(Scaler_access_Project_TV002_Style(0, 0) == Project_TV002_OFF))
	{
		scalerVIP_DCR();

		if (set_DCR_PWM_Enable == 1) {
#ifdef CONFIG_RTK_KDRV_PWM
			rtk_pwm_backlight_set_duty((int)SmartPic_clue->DCR_GDBC_mappingValue);
#endif
		}

	}
}
}
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//=== film detector ===
//---------------------------------------------------------------------------------------//
#if 0 //mark for non use
if((Stop_Polling.Stop_Film_Mode_Detector==FALSE)&&(AutoMA_Struct->AutoMA_API_CTRL.p_film_detection_En==TRUE)) //Stop_polling[4] =TRUE : STOP  Film_Mode
{
	p_film_detection();
}
#endif
//---------------------------------------------------------------------------------------//

//*********************************************************************************************
//~~~ end some basic function ~~~~
//*********************************************************************************************



//*********************************************************************************************
//***************************** Apply : inherit from detection  block *********************************
//*********************************************************************************************
//---------------------------------------------------------------------------------------//
//====== RTNR correction bit period ======
//---------------------------------------------------------------------------------------//
	//if((AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_RTNR_correctionbit_period_En==TRUE)) //Stop_polling =TRUE : STOP  Auto NR function ,
		//scalerVIP_RTNR_correctionbit_period();
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//====== // for TV002 PQ function ======
//---------------------------------------------------------------------------------------//
	if (Scaler_access_Project_TV002_Style(0, 0) == Project_TV002_Style_1) {
		/* BP, DBC and Zero-D*/
		custom_TBL_TV002 = Scaler_get_tv002_Custom_struct();
		Scaler_scalerVIP_Brightness_Plus_Function_TV002(Share_Memory_VIP_TABLE_Struct, SmartPic_clue, system_info_structure_table, custom_TBL_TV002, MA_print_count);
		Scaler_scalerVIP_DBC_CTRL_TV002(custom_TBL_TV002, system_info_structure_table, SmartPic_clue, MA_print_count);
		//Scaler_scalerVIP_ZERO_D_CTRL_TV002(custom_TBL_TV002, system_info_structure_table, SmartPic_clue, MA_print_count);
		if (set_DCR_PWM_Enable == 1) {
#ifdef CONFIG_RTK_KDRV_PWM
			rtk_pwm_backlight_set_duty((int)SmartPic_clue->DCR_GDBC_mappingValue);
#endif
		}
		/* ID */
		Scaler_scalerVIP_ID_TV002(Share_Memory_VIP_TABLE_Struct, RPC_SmartPic_clue, SmartPic_clue, RPC_system_info_structure_table, system_info_structure_table, MA_print_count);
		Scaler_scalerVIP_ID_Apply_TV002(Share_Memory_VIP_TABLE_Struct,RPC_system_info_structure_table, system_info_structure_table, SmartPic_clue, MA_print_count);
	}

//---------------------------------------------------------------------------------------//
//======== Auto NR function ===========
//---------------------------------------------------------------------------------------//

if (g_IsNot4KVO || (MA_print_count&0xf) == 0) {
	if((Stop_Polling.Stop_Auto_Nr==FALSE)&&(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_PQ_Adaptive_Table_En==TRUE)) //Stop_polling =TRUE : STOP  Auto NR function ,
	{
		// set rtnrC running flag for scalerVideo.c "void LG_XCRemove_by_RTNR_C(UINT8 format, UINT8 MA_motion)", reset condition,  elieli
		scalerVIP_Reset_PQA_TBL_ContentCheck_Flag(&(SmartPic_clue->PQA_ISR_Cal_Info.ContentCheck_Flag[0]));

		scalerVIP_PQ_Adaptive_Table(PQA_MODE_WRITE, Share_Memory_VIP_TABLE_Struct, SmartPic_clue, system_info_structure_table);
		scalerVIP_PQ_Adaptive_Table(PQA_MODE_OFFSET, Share_Memory_VIP_TABLE_Struct, SmartPic_clue, system_info_structure_table);
		if((RPC_SmartPic_clue->S_NetFlix_info.Netflix_Enable)==1)	//Netflix
		{
			scalerVIP_NetFlix_Smooth_TimingChange_for_RTNR();
		}
/* Replase by PQA adaptive control Flow
	if(AutoNR_Enable == TRUE && AutoMA_Struct->AutoMA4_En==TRUE)//if OSD DNR=4, AutoNR_Enable=TRUE
		drvif_color_DNRAUTO(SLR_MAIN_DISPLAY, AUTO_NR_style, VD_noise_level, DNR_Auto_lvl_SdHd);
*/
//scalerVIP_CorrectionBit1_Ctrl(AutoNR_Enable, VD_noise_level, RTNR_LEVEL_SDHD_SONY, nonAuto_RTNR_Y_LEVEL, nonAuto_RTNR_C_LEVEL, SmartPic_clue->Fade_flag);
//scalerVIP_RTNR_SceneChange_Policy(TRUE, AutoNR_Enable, VD_noise_level, RTNR_LEVEL_SDHD_SONY, nonAuto_RTNR_Y_LEVEL, nonAuto_RTNR_C_LEVEL);
	}
}
	//if(MA_print_count%250==0)
		//ROSPrintf("PQA_CC=%d,%d\n",SmartPic_clue->PQA_ISR_Cal_Info.ContentCheck_Flag[0],SmartPic_clue->PQA_ISR_Cal_Info.ContentCheck_Flag[1]);

//---------------------------------------------------------------------------------------//
//=============Motion Adaptive I edge smooth for CVBS moving scene===================//
//---------------------------------------------------------------------------------------//
if (g_IsNot4KVO) {
	if(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_MA_IEdgeSmooth_En==TRUE)
	scalerVIP_MA_IEdgeSmooth(SmartPic_clue->neckin_concentric_flag); // Lydia 140314
}
//---------------------------------------------------------------------------------------//

//-------------------------------------------------------------------------------------------//
//===================IEGSM line mode check====================================//
//------------------------------------------------------------------------------------------//
//    scalerVIP_IEedgeSmooth_Linemode_check(); //Lydia 140925
if (g_IsNot4KVO) {
	if(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_Dynamic_Vertical_NR_En==TRUE)
    scalerVIP_Dynamic_Vertical_NR();
}
//---------------------------------------------------------------------------------------//
//====================AUTO MA 1 start for DCTI=================================
//---------------------------------------------------------------------------------------//
if (g_IsNot4KVO) {
if((Stop_Polling.Stop_Dcti_for_colorbar==FALSE)&&(AutoMA_Struct->AutoMA_API_CTRL.drvif_color_DCTI_for_ColorBar_En==TRUE)) //Stop_polling =TRUE : STOP  DCTI_for colorbar
{
	if(AutoMA_Struct->AutoMA1_En)
	{
		//drvif_color_DELAY_for_ColorBar(SmartPic_clue->Colorbar_flag,SmartPic_clue->colorbar_score);
		//drvif_color_DCTI_for_ColorBar(SmartPic_clue->Colorbar_flag,SmartPic_clue->colorbar_score);
	}
}
}
//---------------------------------------------------------------------------------------//

//---------------------------------------------------------------------------------------//
//====================Auto MA 5 application: for MPEG NR====================
//---------------------------------------------------------------------------------------//
if(g_IsNot4KVO) {
	if((Stop_Polling.Stop_Noise_Mpeg==FALSE)&&(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_color_noise_mpeg_apply_En==TRUE)) //Stop_polling =TRUE : STOP  noise_mpeg,
	{
		//Elsie 20130425: detect/apply seperation
		if(AutoMA_Struct->AutoMA5_En)
		{
			if(RPC_system_info_structure_table->Project_ID != VIP_Project_ID_TV003)//for TV003, Need to remove when bug fix!!
			{
				scalerVIP_color_noise_mpeg_apply();
				scalerVIP_color_noise_mpeg_v_apply();
				//scalerVIP_color_noise_dejag_apply();
			}
		}
	}
}
//---------------------------------------------------------------------------------------//
    if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV015)
    {
#ifdef ISR_TV015_DI_FUNCTION_ENABLE
		scalerVIP_TV015_Adjust();
#endif
    }

//---------------------------------------------------------------------------------------//
//====== DI Dynamic VDNoise adjustment ======
//---------------------------------------------------------------------------------------//
if((Stop_Polling.Stop_VD_Noise==FALSE)&&(AutoMA_Struct->AutoMA_API_CTRL.scalerVIP_DI_Dynamic_VDNoise_FrameMotion_En==TRUE)) //Stop_polling =TRUE : STOP  Dynamic VD_Noise
{
    if( (RPC_system_info_structure_table->VIP_source==VIP_QUALITY_TV_NTSC) ||
        (RPC_system_info_structure_table->VIP_source==VIP_QUALITY_TV_NTSC443) ||
        (RPC_system_info_structure_table->VIP_source==VIP_QUALITY_TV_PAL) ||
        (RPC_system_info_structure_table->VIP_source==VIP_QUALITY_TV_SECAN) ||
        (RPC_system_info_structure_table->VIP_source==VIP_QUALITY_TV_PAL_M)  )
        /*
    if( Scaler_InputSrcGetMainChType()==_SRC_CVBS ||
        Scaler_InputSrcGetMainChType()==_SRC_TV ||
        Scaler_InputSrcGetMainChType()==_SRC_SV||
        Scaler_InputSrcGetMainChType()==_SRC_SCART)
        */
{
    	if (vd_pwr_ok)
            scalerVIP_DI_Dynamic_VDNoise_FrameMotion();
}
}
//---------------------------------------------------------------------------------------//
//====== DI Dynamic Status adjustment ======
//---------------------------------------------------------------------------------------//


//---------------------------------------------------------------------------------------//
//====== Set Info to MEMC  jzl 20151231======

	scalerVIP_Set_Info_toMEMC();
	scalerVIP_Set_MEMC_Info_toVCPU();
//---------------------------------------------------------------------------------------//

#if 1

	  //scalerVIP_Identify_Pattern_forSKY();
	  //scalerVIP_Set_Parameter_forSKY(1);
if (g_IsNot4KVO) {
//if(system_info_structure_table->Project_ID == VIP_Project_ID_TV006 &&
//   ( (system_info_structure_table->VIP_source==VIP_QUALITY_CVBS_NTSC)||
//   (system_info_structure_table->VIP_source==VIP_QUALITY_CVBS_PAL)) ){
	if (Scaler_access_Project_TV002_Style(0, 0) == Project_TV002_OFF) {
		if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV006 ){
		    scalerVIP_Identify_Pattern_forLGM2();
		    scalerVIP_Set_Parameter_forLGM2(1);
		}
		else
		{
		   scalerVIP_Identify_Pattern_forLGM2();
		    scalerVIP_Set_Parameter_forLGM2(1);
		}
	}
}
    scalerVIP_Set_Decontour();

#endif
//scalerVIP_DI_MCNR_RTNR_bottom_fresh_line_patch(system_info_structure_table->Input_src_Form != _SRC_FROM_VO);// only merlin need

#if 0//CB_flag
			scalerVIP_Identify_Pattern_forCB();
			scalerVIP_Set_Parameter_forCB();
#endif
	//====== Set Info to MEMC  jzl 20151231======

	scalerVIP_Set_Info_toMEMC();
	scalerVIP_Set_MEMC_Info_toVCPU();
	scalerVIP_Identify_Pattern_forMEMC();
//send pattern identity id to slave
	for(i = 0; i != 255; ++i)
	{
		if(DynamicOptimizeMEMC_pre[i] != DynamicOptimizeMEMC[i])
		{
			//call rlink
#ifdef CONFIG_RTK_8KCODEC_INTERFACE
			R8K_MEMC_ID_update = 1;			
#endif
		}
	}
	strncpy(DynamicOptimizeMEMC_pre,DynamicOptimizeMEMC,255);
//

	
	//===================================
	scalerVIP_IP_OnOff_By_MEMC_Film(RPC_system_info_structure_table); //rord.tsao 2016/0325
	scalerVIP_Dynamic_DeXCXL_CTRL(RPC_system_info_structure_table, Share_Memory_VIP_TABLE_Struct, RPC_SmartPic_clue);

	scalerVIP_Adaptive_Demura_Scale_By_APL(system_info_structure_table, RPC_system_info_structure_table, SmartPic_clue, RPC_SmartPic_clue);

	if(preSource != (RPC_system_info_structure_table->VIP_source))
	{
		isTNRXC = (rtd_inl(DI_IM_DI_TNR_XC_CONTROL_reg) & _BIT0);
	}

	if(RPC_SmartPic_clue->SceneChange)
	{
		rtd_clearbits(DI_IM_DI_TNR_XC_CONTROL_reg, _BIT0);	//disable TNR XC when SceneChange

		if(RPC_system_info_structure_table->VIP_source==VIP_QUALITY_CVBS_SECAN)
			rtd_setbits(DI_IM_DI_TNR_XC_CONTROL_reg, _BIT0);

	}
/*	for LG-PAL_SceneChange, marked by nick187 @ 2014/03/15
	else
	{
		rtd_maskl(DI_IM_DI_TNR_XC_CONTROL_reg, 0xfffffffe, isTNRXC);
	}
*/
	#ifdef ISR_TV002_BRIGHTNESS_PLUS_FUNCTION_ENABLE

	// for TV002
	if(system_info_structure_table->Project_ID==VIP_Project_ID_TV002)
	{
		scalerVIP_Brightness_Plus_Function(Share_Memory_VIP_TABLE_Struct, SmartPic_clue, system_info_structure_table, (SLR_VIP_TABLE_CUSTOM_TV002*) VIP_customer_TBL);
		scalerVIP_DBC_CTRL_TV002((SLR_VIP_TABLE_CUSTOM_TV002*) VIP_customer_TBL, system_info_structure_table, SmartPic_clue);
		scalerVIP_Identify_Pattern_forSONY(Share_Memory_VIP_TABLE_Struct, SmartPic_clue, system_info_structure_table);
	}
	#endif

	/* for TC change by frame*/
	/* move to data start ISR*/
	//fwif_color_ScalerVIP_TC_metadata_frameSync();

//*********************************************************************************************
// ~~~ end apply ~~~~
//*********************************************************************************************

//*****update pre data ********
	pre_VD_noise_level = VD_noise_level;
	pre_DNR_Auto_lvl_SdHd  = DNR_Auto_lvl_SdHd;
	pre_TG45_Flag = TG45_Flag;

	isEvenFrame = (isEvenFrame+1) % 2;
	preSource = (RPC_system_info_structure_table->VIP_source);

	RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.AutoMA_Running_flag = 1;
/*
	if(MA_print_count%360==0)
	{
		ROSPrintf("scalerVIP_colorMaAutoISR End\n");
	}
*/
}



#ifdef ISR_TV015_DI_FUNCTION_ENABLE
void scalerVIP_TV015_Lead(void)
{
	//====== ambilight sensor =========
	//m_AmbilightMode = 1;
	//scalerVIP_AmbiLight(_CHANNEL1);
}
void scalerVIP_TV015_Adjust(void)
{

	//DI  chroma error for Grayscale dot crawing  de cvbs adc limitation
	scalerVIP_DI_Chroma_Error_de_DotCrawing();

}
void scalerVIP_DI_Chroma_Error_de_DotCrawing(void)
{
	if(RPC_system_info_structure_table->VIP_source == VIP_QUALITY_CVBS_NTSC || RPC_system_info_structure_table->VIP_source == VIP_QUALITY_CVBS_PAL)
	{
		di_im_di_framesobel_statistic_RBUS FrameSobel_statistic_Reg;
		FrameSobel_statistic_Reg.regValue = scaler_rtd_inl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg);
		if((SmartPic_clue->Sat_Main_His_Ratio)[0] >=994)
			FrameSobel_statistic_Reg.chromaerror_en = 0;
		else
			FrameSobel_statistic_Reg.chromaerror_en = 1;
		scaler_rtd_outl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg, FrameSobel_statistic_Reg.regValue);
	}
}

#endif

#ifdef ISR_AMBILIGHT_ENABLE
void scalerVIP_AmbiLight(unsigned char display)
{
	// using profile to get YUV data for ambilight sensor, elieli
		static unsigned char color_flag = 0;
		//ROSPrintf(" color_flag =%d,=%d\n",color_flag,flag_profile_read_status);
		if(color_flag == 0)
			flag_profile_read_status = drvif_color_dragon_profile_dectector_ambilight(display, &Profile_Y_H[0], &Profile_Y_V[0], &PF_Trans_Sum, 30, 13, 3);	// Erin tmp 100310
		else if(color_flag == 1)
			flag_profile_read_status = drvif_color_dragon_profile_dectector_ambilight(display, &Profile_U_H[0], &Profile_U_V[0], &PF_Trans_Sum, 30, 13, 3);
		else if(color_flag == 2)
			flag_profile_read_status = drvif_color_dragon_profile_dectector_ambilight(display, &Profile_V_H[0], &Profile_V_V[0], &PF_Trans_Sum, 30, 13, 3);

		//ROSPrintf("color_flag=%d,=%d\n",color_flag,flag_profile_read_status);

		if(color_flag == flag_profile_read_status)
		{
			color_flag = (flag_profile_read_status>=2)? 0: flag_profile_read_status+1;
			if(color_flag == 0)
			{
				scalerVIP_yuv2rgb_convert();
				Profile_RGB_data_flag_H = 1;
				Profile_RGB_data_flag_V = 1;
			}
		}
	//==============================================

}
#endif


extern RPC_TV003_Active_Backlight m_customVipTable3_tv003;

//Elsie 20130425: seperated from Auto MA
//********************************************************************************
//***** DCR Function ********
void scalerVIP_DCR(void)
{

	if(RPC_system_info_structure_table == NULL)
		return;
/* ========================== ===================*/
/* === Get DCR Table form VIP Table ====================== */
/* ============================================== */
	scalerVIP_setDcrTable();
	scalerVIP_Set_DCR_BackLightMappingRange();

/* ========================== ======*/
/* === DCR Driver ====================== */
/* =================================*/
	if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV003)
	{
		scalerVIP_DCR_TV003();
                return;
	}

	/*m_nTV057_New_DCR==1       use Panasonic DCR*/
	if(m_nTV057_New_DCR){//panasonic DCR from Mac1 20130624
		scalerVIP_DCR_TV057();
	}

	/*m_nTPV_New_DCR >=0   use TPV DCR*/
	if(m_nTPV_New_DCR>0){
		scalerVIP_DCR_TV015();
	} else { // default TV001 DCR

		scalerVIP_DCR_OLD();
			}

//********************************************************************************
}

void scalerVIP_DCR_TV057(void)
{
	unsigned char  APL=0,YMax=0,APL_osd0=0,APL_lowerbound=0,YMAX_lowerbound=0,APL_lowerbound_osd0=0;
	unsigned char interpolation_value=0,interpolation_value_osd0=0;
	unsigned char Set_PWMValue=0,breakflag=0;
	unsigned char i,j;
	short his_mean_value_scale16_235=0;
	unsigned char peak_mean_diff=0;
	unsigned char APLflag=0;
	unsigned char  OSDBL_ratio=0;

	his_mean_value_scale16_235=scalerVIP_get_Mean_and_Peak_Value_in_SmartFit();//0~100
	#if 0
	if((MA_print_count % 300) == 0)
	{
			ROSPrintf("[Young]his_mean_value_scale16_235=%d\n", his_mean_value_scale16_235);
		ROSPrintf("[Young]========scalerVIP_DCR=========\n");
		for(i=0;i<DCR_NUM_OSD;i++)//to find the APL curve PWM value
		{
			ROSPrintf("\n");
			for(j=0;j<DCR_NUM_APL;j++)
				ROSPrintf("%d\t", PWM_table_tv057[i*12+j]);
		}
		ROSPrintf("\n");
	}
	#endif

	peak_mean_diff= ABS((SmartPic_clue->Hist_Peak_White_IRE_Value),(SmartPic_clue->Hist_Y_Mean_Value));
	APLflag=((SmartPic_clue->Hist_Y_MAX_bin_ratio)>=99) && (peak_mean_diff<=5);
	if(APLflag )//choose APL Curve or YMAX curve
	{
		for(i=0;i<DCR_NUM_OSD;i++)//to find the APL curve PWM value
		{
			for(j=0;j<DCR_NUM_APL;j++)
			{
				if( (m_BL_LV_From_User<=OSD_LEVEL[i])    && (his_mean_value_scale16_235<=(APL_LEVEL[j]))  )
				{
					#if 0
					if((MA_print_count % 300) == 0)
					{
						ROSPrintf("[PANA_DCR]i=%d--j=%d\n", i, j);
					}
					#endif

				/*
					APL= Duty_APL_OSD[i][j];
					APL_lowerbound=Duty_APL_OSD[i][((j-1)<0)?0:(j-1)];

					APL_osd0= Duty_APL_OSD[((i-1)<0)?0:(i-1)][j];
					APL_lowerbound_osd0=Duty_APL_OSD[((i-1)<0)?0:(i-1)][((j-1)<0)?0:(j-1)];*/

					APL= PWM_table_tv057[i*12+j];
					APL_lowerbound=PWM_table_tv057[i*12+(((j-1)<0)?0:(j-1))];

					APL_osd0= PWM_table_tv057[(((i-1)<0)?0:(i-1))*12+j];
					APL_lowerbound_osd0=PWM_table_tv057[(((i-1)<0)?0:(i-1))*12+(((j-1)<0)?0:(j-1))];

					//ROSPrintf("m_nPANASONIC_New_DCR---Duty_APL[%d]=%d-----APL=%d-------\n",i,Duty_APL[i],APL);
					//======interpolation duty==========

					if( (i==0) && (j==0))
					{
						Set_PWMValue=APL;
					}
					else if(i==0)
					{

						interpolation_value=((APL-APL_lowerbound)*(his_mean_value_scale16_235-APL_LEVEL[(j-1)])/(APL_LEVEL[j]-APL_LEVEL[(j-1)]))+APL_lowerbound;
						Set_PWMValue=interpolation_value;

					}
					else if(j==0)
					{
						interpolation_value=APL;
						interpolation_value_osd0=APL_osd0;
						Set_PWMValue=(interpolation_value-interpolation_value_osd0)*(m_BL_LV_From_User-OSD_LEVEL[(i-1)])/(OSD_LEVEL[i]-OSD_LEVEL[(i-1)])+interpolation_value_osd0;
					}
					else
					{
						interpolation_value=((APL-APL_lowerbound)*(his_mean_value_scale16_235-APL_LEVEL[j-1])/(APL_LEVEL[j]-APL_LEVEL[j-1]))+APL_lowerbound;
	                         		interpolation_value_osd0=((APL_osd0-APL_lowerbound_osd0)*(his_mean_value_scale16_235-APL_LEVEL[j-1])/(APL_LEVEL[j]-APL_LEVEL[j-1]))+APL_lowerbound_osd0;
						Set_PWMValue=(interpolation_value-interpolation_value_osd0)*(m_BL_LV_From_User-OSD_LEVEL[i-1])/(OSD_LEVEL[i]-OSD_LEVEL[i-1])+interpolation_value_osd0;
					}
					//setPWM=(interpolation_value-interpolation_value_osd0)*(m_BL_LV_From_User-OSD_LEVEL[((i-1)<0)?0:(i-1)])/(OSD_LEVEL[i]-OSD_LEVEL[((i-1)<0)?0:(i-1)])+interpolation_value_osd0;

					breakflag=1;
					break;

				}

			}
			if(breakflag==1)
				break;
		}
} else {
		// for YMAX interpolation
	for(i=0;i<DCR_NUM_APL;i++) {
		if((SmartPic_clue->Hist_Peak_White_IRE_Value)<=(APL_LEVEL[i])) {
				YMax = Duty_YMax[i];
				YMAX_lowerbound=Duty_YMax[((i-1)<0)?0:(i-1)];
				if(i==0)
					Set_PWMValue=YMax;
				else
					Set_PWMValue=((YMax-YMAX_lowerbound)*((SmartPic_clue->Hist_Peak_White_IRE_Value)-APL_LEVEL[(i-1)])/(APL_LEVEL[i]-APL_LEVEL[(i-1)]))+YMAX_lowerbound;
				break;
			}
		}
		OSDBL_ratio=m_BL_LV_From_User*255/100;//ratio
		Set_PWMValue=OSDBL_ratio*(Set_PWMValue-37)/255+37;
	}
	#if 0
		if((MA_print_count % 300) == 0)
		{

			ROSPrintf("[PANA_DCR]-APL=%d--APL_lowerbound=%d, interpolation_value=%d-\n", APL, APL_lowerbound,interpolation_value);
			ROSPrintf("[PANA_DCR]-APL_osd0=%d--APL_lowerbound_osd0=%d-\n", APL_osd0, APL_lowerbound_osd0);
			ROSPrintf("[PANA_DCR]-YMax=%d--YMAX_lowerbound=%d, Set_PWMValue=%d-APLflag=%d\n", YMax, YMAX_lowerbound,Set_PWMValue,APLflag);
			ROSPrintf("[PANA_DCR]---Mean_value=%d---DCC_Histogram_MAX_ratio=%d,peak_mean_diff=%d----\n",DCC_Histogram_Mean_value,DCC_Histogram_MAX_ratio,peak_mean_diff);
		}

	#endif
	//Set_PWMValue=((Set_PWMValue*100)*10)/996;//PWMvalue scale to Dutyvalue
	Set_PWMValue = Set_PWMValue &0xFF;

	drvif_color_ma_DCR_TV057(Set_PWMValue);

}



void scalerVIP_DCR_TV003(void)
{
#if 0
		unsigned char frames_num = 10;
		static unsigned char frames_count = 0;
		static unsigned short TV_003_APL[10] = {0};
		static unsigned short TV_003_PeakLevel[10] = {0};
		static unsigned short TV_003_APL_avg_sum = 0;
		static unsigned short TV_003_PeakLevel_sum = 0;
		unsigned char TV_003_APL_avg = 0, TV_003_PeakLevel_avg = 0, nMappingValue;
		unsigned char i=0;

		unsigned char PeakLevel_low = m_customVipTable3_tv003.TV003_ABL_PeakLevel_low*100>>8;//TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_PeakLevel_low*100>>8;		//range 0~255 to 0~100
		unsigned char PeakLevel_high = m_customVipTable3_tv003.TV003_ABL_PeakLevel_high*100>>8;//TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_PeakLevel_high*100>>8;//range 0~255 to 0~100
		unsigned char PeakLevel_thl =m_customVipTable3_tv003.TV003_ABL_APL_thl;// TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_PeakLevel_thl;
		unsigned char APL_low = m_customVipTable3_tv003.TV003_ABL_APL_low;//TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_APL_low;
		unsigned char APL_high = m_customVipTable3_tv003.TV003_ABL_APL_high;//TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_APL_high;
		unsigned char APL_thl = m_customVipTable3_tv003.TV003_ABL_APL_thl;//TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_APL_thl;
		unsigned char TV003_ABL_En =m_customVipTable3_tv003.TV003_ABL_En;
		unsigned char TV003_ABL_H_rate =m_customVipTable3_tv003.TV003_ABL_H_rate;
		unsigned char TV003_ABL_V_rate =m_customVipTable3_tv003.TV003_ABL_V_rate;
		if(TV003_ABL_En)//(TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_En)
		{
			unsigned char  APL=0;
			unsigned int  PeakLevel=SmartPic_clue->Hist_Y_Mean_Value;
			//APL = scalerVIP_get_Mean_and_Peak_Value_in_SmartFit_003(TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_H_rate, TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_V_rate);
			APL = scalerVIP_get_Mean_and_Peak_Value_in_SmartFit_003(TV003_ABL_H_rate, TV003_ABL_V_rate);

			//PeakLevel range 0~100
			if(PeakLevel < PeakLevel_low)
				PeakLevel = 0;
			else if(PeakLevel > PeakLevel_high)
				PeakLevel = 100;
			else
				PeakLevel = (((PeakLevel - PeakLevel_low) * 100) + ((PeakLevel_high-PeakLevel_low)>>1))/(PeakLevel_high-PeakLevel_low);

			//APL range 0~100
			if(APL < APL_low)
				APL = 0;
			else if(APL > APL_high)
				APL = 100;
			else
				APL = (((APL - APL_low) * 100) + ((APL_high-APL_low)>>1))/(APL_high-APL_low);

			if(frames_count < frames_num)
			{
				TV_003_APL[MA_print_count%frames_num] = APL;
				TV_003_PeakLevel[MA_print_count%frames_num] = PeakLevel;
				TV_003_APL_avg_sum = TV_003_APL_avg_sum + APL;
				TV_003_PeakLevel_sum = TV_003_PeakLevel_sum + PeakLevel;
				frames_count++;
			}
			else
			{
				TV_003_APL_avg_sum = 0;
				TV_003_PeakLevel_sum = 0;
				//TV_003_APL_avg_sum = TV_003_APL_avg_sum - TV_003_APL[MA_print_count%frames_num] + APL;
				//TV_003_PeakLevel_sum = TV_003_PeakLevel_sum - TV_003_PeakLevel[MA_print_count%frames_num] + PeakLevel;
				TV_003_APL[MA_print_count%frames_num] = APL;
				TV_003_PeakLevel[MA_print_count%frames_num] = PeakLevel;
				for(i=0; i<frames_num; i++)
				{
					TV_003_APL_avg_sum += TV_003_APL[i];
					TV_003_PeakLevel_sum += TV_003_PeakLevel[i];
				}
			}

			if(frames_count == 0)
				return;
#if 0
			if(MA_print_count%600==0)
			{
				ROSPrintf("PeakLevel_low = %d, PeakLevel_high = %d\n",PeakLevel_low, PeakLevel_high);
				ROSPrintf("APL = %d, PeakLevel = %d\n",APL, PeakLevel);
				ROSPrintf("TV_003_APL_avg_sum = %d, TV_003_PeakLevel_sum = %d\n",TV_003_APL_avg_sum, TV_003_PeakLevel_sum);
				ROSPrintf("TV_003_APL = ");
				for(i=0; i<frames_num; i++)
					ROSPrintf("%d	",TV_003_APL[i]);
				ROSPrintf("\n");
			}
#endif
			TV_003_APL_avg = TV_003_APL_avg_sum / frames_count;
			TV_003_PeakLevel_avg = TV_003_PeakLevel_sum / frames_count;
#if 0
			if(MA_print_count%60==0)
				ROSPrintf("TV_003_APL_avg = %d, TV_003_PeakLevel_avg = %d\n",TV_003_APL_avg, TV_003_PeakLevel_avg);
#endif
			if(TV_003_PeakLevel_avg < PeakLevel_thl && TV_003_APL_avg < APL_thl)
				nMappingValue = TV_003_APL_avg*255/APL_thl;
			else
				nMappingValue = 255;
#if 1
			if(MA_print_count%60==0)
				ROSPrintf("yuan,nMappingValue= %d\n",nMappingValue);
#endif
//			scalerVIP_IoGpio_SetPwmDuty(m_PIN_BL_ADJ, nMappingValue);
			//TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_nMappingValue = nMappingValue;
			m_customVipTable3_tv003.TV003_ABL_nMappingValue= nMappingValue;
			return;
	}
		else
		{
			frames_count = 0;
			TV_003_APL_avg_sum = 0;
			TV_003_PeakLevel_sum = 0;
			//TV003_share_memory_struct->TV003_Active_Backlight.TV003_ABL_nMappingValue = 255;
			m_customVipTable3_tv003.TV003_ABL_nMappingValue= 255;
			return;
		}
#endif
}

void scalerVIP_DCR_TV015(void)
		{

	#if DCR_DEBUG_TPV
	if((MA_print_count % 300) == 0) {
			ROSPrintf("m_nTPV_New_DCR = %d\n",m_nTPV_New_DCR);
			ROSPrintf("m_DCR_On_Off = %d\n",m_DCR_On_Off);
			ROSPrintf("m_bDefault_OFF = %d\n",m_bDefault_OFF);
		}
	#endif

	if( !m_bDefault_OFF && !m_DCR_On_Off && m_nTPV_New_DCR >0){ // Default On & OSD SET OFF

		short nMappingValue;
		if(m_isIncreaseMode)
			nMappingValue = (m_BL_LV_From_User-0)*(m_BL_LV_Act_Max - m_BL_LV_Act_Min)/(100-0)+ m_BL_LV_Act_Min;
		else
			nMappingValue = m_BL_LV_Act_Max - ((m_BL_LV_From_User-0)*(m_BL_LV_Act_Max - m_BL_LV_Act_Min)/(100-0)+ m_BL_LV_Act_Min);

		//Set Pwm Duty
		nMappingValue&= 0xFF;
		if(BL_prev != m_BL_LV_From_User)
		    scalerVIP_IoGpio_SetPwmDuty(m_PIN_BL_ADJ, nMappingValue);

		BL_current = m_BL_LV_From_User;
		BL_prev = BL_current;
	} else {
		if(m_nTPV_New_DCR == 1 )
		{
			scalerVIP_DCR_TPV();
		}
		else if(m_nTPV_New_DCR == 2 )
		{
			scalerVIP_DCR_TPV_TV();
		}
		else if(m_nTPV_New_DCR == 3 )
		{
			scalerVIP_DCR_TPV_2694A();
		}
		else if(m_nTPV_New_DCR == 4 )
		{
			scalerVIP_DCR_TPV_TV_2694A();
		}
		}

	}



unsigned char  scalerVIP_get_Mean_and_Peak_Value_in_SmartFit(void)//sync form panasonic, can be use for pattern Recognize
{

	return 0;
#if 0

	//=======================use smartfit to get mean value 20121228=====================

	vgip_vgip_chn1_act_hsta_width_RBUS vgip_chn1_act_hsta_width_reg;
	vgip_vgip_chn1_act_vsta_length_RBUS vgip_chn1_act_vsta_length_reg;

//find the input position start &end
	vgip_chn1_act_hsta_width_reg.regValue  = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	vgip_chn1_act_vsta_length_reg.regValue = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg);

	unsigned short Hstart =14+ vgip_chn1_act_hsta_width_reg.ch1_ih_act_sta;
	unsigned short Hend = vgip_chn1_act_hsta_width_reg.ch1_ih_act_wid;
	unsigned short Vstart = 20+vgip_chn1_act_vsta_length_reg.ch1_iv_act_sta;
	unsigned short Vend = vgip_chn1_act_vsta_length_reg.ch1_iv_act_len;


//unsigned short Hstart=500,Hend=10,Vstart=10,Vend=10;
	smartfit_auto_h_boundary_RBUS auto_h_boundary_reg;
	smartfit_auto_v_boundary_RBUS auto_v_boundary_reg;
	smartfit_auto_r_g_b_margin_RBUS auto_r_g_b_margin_reg;
	smartfit_auto_adj_RBUS auto_adj_reg;
	auto_h_boundary_reg.regValue     = scaler_rtd_inl(SMARTFIT_AUTO_H_BOUNDARY_reg);
	auto_v_boundary_reg.regValue     = scaler_rtd_inl(SMARTFIT_AUTO_V_BOUNDARY_reg);
	auto_r_g_b_margin_reg.regValue  =scaler_rtd_inl(SMARTFIT_AUTO_R_G_B_MARGIN_reg);
	auto_adj_reg.regValue                 = scaler_rtd_inl(SMARTFIT_AUTO_ADJ_reg);

	//H & V boundary setting
		auto_h_boundary_reg.hb_sta = Hstart;
		auto_h_boundary_reg.hb_end= Hend;
		auto_v_boundary_reg.vb_sta=Vstart;
		auto_v_boundary_reg.vb_end=Vend;

		scaler_rtd_outl(SMARTFIT_AUTO_H_BOUNDARY_reg, auto_h_boundary_reg.regValue);
		scaler_rtd_outl(SMARTFIT_AUTO_V_BOUNDARY_reg, auto_v_boundary_reg.regValue);

	//Color Source Select for Detection //20070713 SmartFit YUV definition's wrong on ver.FIB !! Notice whether spec. been changed?

			auto_r_g_b_margin_reg.color_sel=0x02;//auto_r_g_b_margin_reg.color_sel=0x1;


	//MIN color measured, Accumulation Mode, Start Auto-Function Tracking Function
		auto_adj_reg.force_flip_ = 1;
		auto_adj_reg.sum_max	 = 1;
		auto_adj_reg.now_af	 = 1;
		auto_adj_reg.diff_en =0;


	smartfit_auto_field_RBUS auto_field_reg;
	smartfit_auto_result_phase_m_RBUS auto_result_phase_m_reg;
	smartfit_auto_result_phase_l_RBUS auto_result_phase_l_reg;
	auto_field_reg.regValue = scaler_rtd_inl(SMARTFIT_AUTO_FIELD_reg);

	unsigned long long SUM;
	unsigned  int  PxlNum,Hlength,vlength,PxlNum2;
	unsigned  int  PEAK = 0;

//	if(Scaler_DispGetInputInfo(SLR_INPUT_CHANNEL))
//		auto_field_reg.adj_source = 1;//sub(channel 2)
//	else
		auto_field_reg.adj_source = 0;//main(channel 1)

	scaler_rtd_outl(SMARTFIT_AUTO_FIELD_reg,auto_field_reg.regValue);

	auto_r_g_b_margin_reg.diff_th = 0;
	scaler_rtd_outl(SMARTFIT_AUTO_R_G_B_MARGIN_reg,auto_r_g_b_margin_reg.regValue);


			auto_result_phase_m_reg.regValue =  scaler_rtd_inl(SMARTFIT_AUTO_RESULT_PHASE_M_reg);
			auto_result_phase_l_reg.regValue =  scaler_rtd_inl(SMARTFIT_AUTO_RESULT_PHASE_L_reg);

			SUM = ( ( (unsigned long long)(auto_result_phase_m_reg.acc_41_32) ) <<32) + (unsigned long long)(auto_result_phase_l_reg.acc_31_0);
			Hlength=Hend-Hstart+1;
			vlength=Vend-Vstart+1;
			PxlNum2=Hlength*vlength;
			PxlNum = (Hend-Hstart+1)*(Vend-Vstart+1);
			do_div(SUM, PxlNum2);
			PEAK=SUM;

	scaler_rtd_outl(SMARTFIT_AUTO_ADJ_reg, auto_adj_reg.regValue);
	#if 0
		if((MA_print_count % 300) == 0)
		{
			//ROSPrintf("[Young]***,Hstart=%d,Hend=%d,Vstart=%d,Vend=%d***\n",Hstart,Hend,Vstart,Vend);
			//ROSPrintf("[Young]***Hlength=%d,vlength=%d***\n",Hlength,vlength);
			//ROSPrintf("[Young]***PxlNum=%d ,PxlNum2=%d ,***\n",PxlNum,PxlNum2);
			//ROSPrintf("[Young]***SUM=%d ***\n",SUM);
			ROSPrintf("[Young]***PEAK=%d ,***\n",PEAK);
		}
	#endif
//=======================use smartfit to get mean value 20121228=====================

	short his_mean_value_scale16_235=0;

	his_mean_value_scale16_235=((PEAK-58)*100/860);//shift the input value to 0~100

	if(his_mean_value_scale16_235<0)
		his_mean_value_scale16_235=0;
	if(his_mean_value_scale16_235>100)
		his_mean_value_scale16_235=100;

	Smartfit_Mean_value=his_mean_value_scale16_235;
	Smartfit_Frame_Sum = (unsigned int)(SUM >> 4); // scale to 32 bits
	return his_mean_value_scale16_235;
#endif
}

unsigned char  scalerVIP_get_Mean_and_Peak_Value_in_SmartFit_003(unsigned char H_rate, unsigned char V_rate)
{
			return 0;
#if 0  //tihis IC remove other function only support position detected .

	//=======================use smartfit to get mean value 20121228=====================
	unsigned short Hstart = 0;
	unsigned short Hend = 0;
	unsigned short H_rate_offset = 0;
	unsigned short H_rate_wid = 0;
	unsigned short Vstart = 0;
	unsigned short Vend = 0;
	unsigned short V_rate_offset = 0;
	unsigned short V_rate_len = 0;

	unsigned short VGIP_H_sta = 0;
	unsigned short VGIP_H_wid = 0;
	unsigned short VGIP_V_sta = 0;
	unsigned short VGIP_V_len = 0;

	vgip_vgip_chn1_act_hsta_width_RBUS vgip_chn1_act_hsta_width_reg;
	vgip_vgip_chn1_act_vsta_length_RBUS vgip_chn1_act_vsta_length_reg;
	vgip_vgip_chn1_delay_RBUS vgip_chn1_delay_reg;

//find the input position start &end
	vgip_chn1_act_hsta_width_reg.regValue  = IoReg_Read32(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	vgip_chn1_act_vsta_length_reg.regValue = IoReg_Read32(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg);
	vgip_chn1_delay_reg.regValue = IoReg_Read32(VGIP_VGIP_CHN1_DELAY_reg);


	VGIP_H_sta = vgip_chn1_act_hsta_width_reg.ch1_ih_act_sta + vgip_chn1_delay_reg.ch1_ihs_dly+2;
	VGIP_H_wid = vgip_chn1_act_hsta_width_reg.ch1_ih_act_wid;
	VGIP_V_sta = vgip_chn1_act_vsta_length_reg.ch1_iv_act_sta + vgip_chn1_delay_reg.ch1_ivs_dly;
	VGIP_V_len = vgip_chn1_act_vsta_length_reg.ch1_iv_act_len;

//unsigned short Hstart=500,Hend=10,Vstart=10,Vend=10;
	smartfit_auto_h_boundary_RBUS auto_h_boundary_reg;
	smartfit_auto_v_boundary_RBUS auto_v_boundary_reg;
	smartfit_auto_r_g_b_margin_RBUS auto_r_g_b_margin_reg;
	smartfit_auto_adj_RBUS auto_adj_reg;
	auto_h_boundary_reg.regValue     = IoReg_Read32(SMARTFIT_AUTO_H_BOUNDARY_reg);
	auto_v_boundary_reg.regValue     = IoReg_Read32(SMARTFIT_AUTO_V_BOUNDARY_reg);
	auto_r_g_b_margin_reg.regValue  = IoReg_Read32(SMARTFIT_AUTO_R_G_B_MARGIN_reg);
	auto_adj_reg.regValue                 = IoReg_Read32(SMARTFIT_AUTO_ADJ_reg);

	//H & V boundary setting
#if 1
		H_rate_wid = ((VGIP_H_wid*H_rate)/100);
		H_rate_offset =  ((VGIP_H_wid - H_rate_wid)+1)>>1;
		Hstart = VGIP_H_sta + H_rate_offset;
		Hend = Hstart + H_rate_wid;
#if 0
		if(MA_print_count%60==0)
		{
			ROSPrintf("VGIP_H_sta = %d,	VGIP_H_wid = %d\n", VGIP_H_sta, VGIP_H_wid);
			ROSPrintf("H_rate_wid = %d,	H_rate_offset = %d\n", H_rate_wid, H_rate_offset);
			ROSPrintf("Hstart = %d,	Hend = %d\n", Hstart, Hend);
		}
#endif
		V_rate_len = ((VGIP_V_len*V_rate)/100);
		V_rate_offset =  ((VGIP_V_len - V_rate_len)+1)>>1;
		Vstart = VGIP_V_sta + V_rate_offset;
		Vend = Vstart + V_rate_len;
#if 0
		if(MA_print_count%60==0)
		{
			ROSPrintf("VGIP_V_sta = %d,	VGIP_V_len = %d\n", VGIP_V_sta, VGIP_V_len);
			ROSPrintf("V_rate_len = %d,	V_rate_offset = %d\n", V_rate_len, V_rate_offset);
			ROSPrintf("Vstart = %d,	Vend = %d\n", Vstart, Vend);
		}
#endif
		auto_h_boundary_reg.hb_sta = Hstart;
		auto_h_boundary_reg.hb_end= Hend;
		auto_v_boundary_reg.vb_sta=Vstart;
		auto_v_boundary_reg.vb_end=Vend;
#endif

	IoReg_Write32(SMARTFIT_AUTO_H_BOUNDARY_reg, auto_h_boundary_reg.regValue);
	IoReg_Write32(SMARTFIT_AUTO_V_BOUNDARY_reg, auto_v_boundary_reg.regValue);

	//Color Source Select for Detection //20070713 SmartFit YUV definition's wrong on ver.FIB !! Notice whether spec. been changed?

	auto_r_g_b_margin_reg.color_sel=0x02;//auto_r_g_b_margin_reg.color_sel=0x1;

	//MIN color measured, Accumulation Mode, Start Auto-Function Tracking Function
	auto_adj_reg.force_flip_ = 1;
	auto_adj_reg.sum_max	 = 1;
	auto_adj_reg.now_af	 = 1;
	auto_adj_reg.diff_en =0;


	smartfit_auto_field_RBUS auto_field_reg;
	smartfit_auto_result_phase_m_RBUS auto_result_phase_m_reg;
	smartfit_auto_result_phase_l_RBUS auto_result_phase_l_reg;
	auto_field_reg.regValue = IoReg_Read32(SMARTFIT_AUTO_FIELD_reg);

	unsigned long long SUM;
	unsigned  int  PxlNum,Hlength,vlength,PxlNum2;
	unsigned  int  PEAK = 0;

//	if(Scaler_DispGetInputInfo(SLR_INPUT_CHANNEL))
//		auto_field_reg.adj_source = 1;//sub(channel 2)
//	else
		auto_field_reg.adj_source = 0;//main(channel 1)

	IoReg_Write32(SMARTFIT_AUTO_FIELD_reg,auto_field_reg.regValue);

	auto_r_g_b_margin_reg.diff_th = 0;
	IoReg_Write32(SMARTFIT_AUTO_R_G_B_MARGIN_reg,auto_r_g_b_margin_reg.regValue);


	auto_result_phase_m_reg.regValue =  IoReg_Read32(SMARTFIT_AUTO_RESULT_PHASE_M_reg);
	auto_result_phase_l_reg.regValue =  IoReg_Read32(SMARTFIT_AUTO_RESULT_PHASE_L_reg);

	SUM = ( ( (unsigned long long)(auto_result_phase_m_reg.acc_41_32) ) <<32) + (unsigned long long)(auto_result_phase_l_reg.acc_31_0);
#if 0
	if(MA_print_count%60==0)
		ROSPrintf("SUM_ = %d\n", (auto_result_phase_l_reg.acc_31_0));
#endif
	smartfit_auto_result_hsta_end_RBUS auto_result_hsta_end_reg;
	smartfit_auto_result_vsta_end_RBUS auto_result_vsta_end_reg;
	auto_result_hsta_end_reg.regValue  = IoReg_Read32(SMARTFIT_AUTO_RESULT_HSTA_END_reg);
	auto_result_vsta_end_reg.regValue = IoReg_Read32(SMARTFIT_AUTO_RESULT_VSTA_END_reg);

	Hstart = auto_result_hsta_end_reg.hx_sta;
	Hend = auto_result_hsta_end_reg.hx_end;
	Vstart = auto_result_vsta_end_reg.vx_sta;
	Vend = auto_result_vsta_end_reg.vx_end;

	Hlength=Hend-Hstart+1;
	vlength=Vend-Vstart+1;
	PxlNum2=Hlength*vlength;
	PxlNum = (Hend-Hstart)*(Vend-Vstart);
	do_div(SUM, PxlNum2);
	PEAK=SUM;


	IoReg_Write32(SMARTFIT_AUTO_ADJ_reg, auto_adj_reg.regValue);
	#if 0
//		if((MA_print_count % 300) == 0)
//		{
			printf("[Young]***,Hstart=%d,Hend=%d,Vstart=%d,Vend=%d***\n",Hstart,Hend,Vstart,Vend);
			printf("[Young]***Hlength=%d,vlength=%d***\n",Hlength,vlength);
			printf("[Young]***PxlNum=%d ,PxlNum2=%d ,***\n",PxlNum,PxlNum2);
			printf("[Young]***SUM=%d ***\n",SUM);
			printf("[Young]***PEAK=%d ,***\n",PEAK);
//		}
	#endif
//=======================use smartfit to get mean value 20121228=====================
#if 0
	if(MA_print_count%60==0)
		ROSPrintf("(PEAK>>2) = %d\n", (PEAK>>2));
#endif

	return (PEAK>>2);
#endif
}

//============================Elsie 20130425: color mpeg========================


int scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[9][8]={
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0}
};
int scalerVIP_color_noise_mpeg_h_detect__HisCntHor[8]={0,0,0,0,0,0,0,0};
int scalerVIP_color_noise_mpeg_h_detect__a_scaling[9]={0x1000,0x1000,0x1000,0,0,0,0,0,0};//{0x1000,0x1000,0x1000,0x1555,0x1555,0x1555,0x2aab,0x2aab,0x2aab};//{0x1000,0x1555,0,0x2000,0x2aab,0,0,0,0};//
int scalerVIP_color_noise_mpeg_h_detect__amax1p[3][9]={{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0}};
int scalerVIP_color_noise_mpeg_h_detect__a2[3][9]={{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0}};
int scalerVIP_color_noise_mpeg_h_detect__a3[3][9]={{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0}};
int scalerVIP_color_noise_mpeg_h_detect__x3L=0x2000;// minimum detail
int scalerVIP_color_noise_mpeg_h_detect__x3R=0x3000;// maximum detail
int scalerVIP_color_noise_mpeg_h_detect__xwidth=1920;
int scalerVIP_color_noise_mpeg_h_detect__xheight=1080;
int scalerVIP_color_noise_mpeg_h_detect__x_requires_ver=0;
int scalerVIP_color_noise_mpeg_h_detect__x_pipeline=0;
int scalerVIP_color_noise_mpeg_h_detect__x_ub_ub=18;
int scalerVIP_color_noise_mpeg_h_detect__x_ub_ub4=18;
int scalerVIP_color_noise_mpeg_h_detect__yen=0;
int scalerVIP_color_noise_mpeg_h_detect__yub=0;// higher means more detail
int scalerVIP_color_noise_mpeg_h_detect__yub2=0;// higher means more blocking effect
int scalerVIP_color_noise_mpeg_h_detect__y_scaling=0;
int scalerVIP_color_noise_mpeg_h_detect__y_turn=8;// winning turn
int scalerVIP_color_noise_mpeg_h_detect__y_max1p=0;// the bin with the largest number
int scalerVIP_color_noise_mpeg_h_detect__y3_for_other_ip=0;
int scalerVIP_color_noise_mpeg_h_detect__z_mad=0;
int scalerVIP_color_noise_mpeg_h_detect__z_mad_pre=-88;
int scalerVIP_color_noise_mpeg_h_detect__z_mad_wait=0;
int scalerVIP_color_noise_mpeg_h_detect__z_scaling=0;
int scalerVIP_color_noise_mpeg_h_detect__z_turn=8;
int scalerVIP_color_noise_mpeg_detect_y=0;
int scalerVIP_color_noise_mpeg_detect_y4=0;
int scalerVIP_color_noise_mpeg_detect_y_delta3=0;
int scalerVIP_color_noise_mpeg_detect_x_by_motion_en=1;
int scalerVIP_color_noise_mpeg_detect_y_by_motion=0;
//#define mpegnr_h_170705h 1
#if 1//mpegnr_h_170705h
#define Min(a, b)   ( ((a) < (b)) ? (a) : (b) )
unsigned int RTNR_MAD_count_Y3_count=0;
unsigned int MCNR_GMV_Ratio = 0;
void scalerVIP_color_noise_mpeg_detect(void){
	int i=0;
	int z=0;
	int z_max1=0;
	int z_max2=0;
	int z_max2_4=0;
	//int z_max2p=0;
	int x2=0;// block effect level detected
	int x2_4=0;
	int x20=0;// block effect ratio * 256
	int x20_4=0;
	int x2L=0x1000;
	int y2L=0;
	int x2R=0x3000;
	int y2R=256;
	int x2L4=0x1000;
	int y2L4=0;
	int x2R4=0x3000;
	int y2R4=36;
	int x2div=0x80;
	int x3=0;
	int y3L=48;
	int y3R=12;
	int x3div=0x80;
	int ratio_W1=0x500;
	int ratio_W2=0x800;
	int ratio_W1_=0;
	int ratio_W2_=0;
	int x2_=0;
	int x3L_=0;
	int x3R_=0;
	int x3_=0;
	int x2L_= 0;
	int x2R_= 0;
	int z_mad_d=0;
	static int static_cnt = 180;
	static int is_static_cnt_tsin_ku = 0;

	mpegnr_ich1_cnthor0_RBUS ich1_CntHor0_reg;
	mpegnr_ich1_cnthor1_RBUS ich1_CntHor1_reg;
	mpegnr_ich1_cnthor2_RBUS ich1_CntHor2_reg;
	mpegnr_ich1_cnthor3_RBUS ich1_CntHor3_reg;
	mpegnr_ich1_cnthor4_RBUS ich1_CntHor4_reg;
	mpegnr_ich1_cnthor5_RBUS ich1_CntHor5_reg;
	mpegnr_ich1_cnthor6_RBUS ich1_CntHor6_reg;
	mpegnr_ich1_cnthor7_RBUS ich1_CntHor7_reg;
	di_im_di_rtnr_control_RBUS di_im_di_rtnr_control_r;
	nr_dch1_mpegnr1_RBUS	nr_dch1_mpegnr1_r;
	int scalerVIP_color_noise_mpeg_detect_y_ =0;
	DRV_MPEGNR_16_SW_CTRL Mpeg_16_sw_ctrl_h;


	_system_setting_info *VIP_system_info_structure_table = (_system_setting_info*)Scaler_GetShareMemVirAddr(SCALERIOC_VIP_system_info_structure);
	unsigned char PQA_table_select = scaler_GetShare_Memory_system_setting_info_Struct()->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_table_select;
	unsigned int *pPQA_InputMAD_MPEG = &(scaler_GetShare_Memory_VIP_TABLE_Struct()->PQA_Input_Table[PQA_table_select][I_MPEG_MAD][0]);
	if(VIP_system_info_structure_table ==NULL || pPQA_InputMAD_MPEG ==NULL ){
		return;
	}

	drvif_color_get_DRV_MPG_H_SW_Ctrl((DRV_MPEGNR_16_SW_CTRL*)&Mpeg_16_sw_ctrl_h);
	x2L=Mpeg_16_sw_ctrl_h.x2l;
	x2R=Mpeg_16_sw_ctrl_h.x2r;
	scalerVIP_color_noise_mpeg_h_detect__x3L=Mpeg_16_sw_ctrl_h.x3l;
	scalerVIP_color_noise_mpeg_h_detect__x3R=Mpeg_16_sw_ctrl_h.x3r;
	y3L=Mpeg_16_sw_ctrl_h.y3l;
	y3R=Mpeg_16_sw_ctrl_h.y3r;
	scalerVIP_color_noise_mpeg_h_detect__x_ub_ub =Mpeg_16_sw_ctrl_h.x_ub_ub;

	//printk("x2L=%d,x2R=%d,x3l=%d,x3r=%d,y3l=%d,y3r=%d,ub=%d \n ",x2L,x2R,
	//scalerVIP_color_noise_mpeg_h_detect__x3L,scalerVIP_color_noise_mpeg_h_detect__x3R,
	//y3L,y3R,scalerVIP_color_noise_mpeg_h_detect__x_ub_ub);

	scalerVIP_color_noise_mpeg_h_detect__z_turn=scalerVIP_color_noise_mpeg_h_detect__z_turn<8?scalerVIP_color_noise_mpeg_h_detect__z_turn+1:0;
	scalerVIP_color_noise_mpeg_h_detect__z_scaling=scalerVIP_color_noise_mpeg_h_detect__a_scaling[scalerVIP_color_noise_mpeg_h_detect__z_turn];
	// different resolution (default 1920*1080)
	scalerVIP_color_noise_mpeg_h_detect__xwidth=VIP_system_info_structure_table->I_Width;
	scalerVIP_color_noise_mpeg_h_detect__xheight=VIP_system_info_structure_table->I_Height;
	di_im_di_rtnr_control_r.regValue=IoReg_Read32(DI_IM_DI_RTNR_CONTROL_reg);
	ich1_CntHor0_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor0_reg);
	ich1_CntHor1_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor1_reg);
	ich1_CntHor2_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor2_reg);
	ich1_CntHor3_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor3_reg);
	ich1_CntHor4_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor4_reg);
	ich1_CntHor5_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor5_reg);
	ich1_CntHor6_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor6_reg);
	ich1_CntHor7_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor7_reg);
	if(di_im_di_rtnr_control_r.cp_rtnr_progressive==1){
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[0]=ich1_CntHor0_reg.cp_cnthor0;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[1]=ich1_CntHor1_reg.cp_cnthor1;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[2]=ich1_CntHor2_reg.cp_cnthor2;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[3]=ich1_CntHor3_reg.cp_cnthor3;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[4]=ich1_CntHor4_reg.cp_cnthor4;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[5]=ich1_CntHor5_reg.cp_cnthor5;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[6]=ich1_CntHor6_reg.cp_cnthor6;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[7]=ich1_CntHor7_reg.cp_cnthor7;
	}else{
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[0]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][0]+ich1_CntHor0_reg.cp_cnthor0;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[1]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][1]+ich1_CntHor1_reg.cp_cnthor1;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[2]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][2]+ich1_CntHor2_reg.cp_cnthor2;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[3]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][3]+ich1_CntHor3_reg.cp_cnthor3;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[4]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][4]+ich1_CntHor4_reg.cp_cnthor4;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[5]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][5]+ich1_CntHor5_reg.cp_cnthor5;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[6]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][6]+ich1_CntHor6_reg.cp_cnthor6;
		scalerVIP_color_noise_mpeg_h_detect__HisCntHor[7]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][7]+ich1_CntHor7_reg.cp_cnthor7;
		for(i=0;i<8;i++){
			if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
				printk(
					KERN_INFO "\n[histhor_subtract] %d %06x - %06x = %06x[/histhor_subtract]"
					,i
					,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[i]
					,scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][i]
					,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[i]-scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][i]
				);
			}
			scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][i]=scalerVIP_color_noise_mpeg_h_detect__HisCntHor[i]-scalerVIP_color_noise_mpeg_h_detect__HisCntHor_pre[scalerVIP_color_noise_mpeg_h_detect__z_turn][i];
		}
	}
	scalerVIP_color_noise_mpeg_h_detect__a_scaling[3]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[4]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[5]=0;
	scalerVIP_color_noise_mpeg_h_detect__a_scaling[6]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[7]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[8]=0;
	switch((RPC_system_info_structure_table->VIP_source)){
		case VIP_QUALITY_HDMI_4k2kI_30:
		case VIP_QUALITY_HDMI_4k2kP_30:
		case VIP_QUALITY_HDMI_4k2kP_60:
		case VIP_QUALITY_DTV_4k2kI_30:
		case VIP_QUALITY_DTV_4k2kP_30:
		case VIP_QUALITY_DTV_4k2kP_60:
		case VIP_QUALITY_PVR_4k2kI_30:
		case VIP_QUALITY_PVR_4k2kP_30:
		case VIP_QUALITY_PVR_4k2kP_60:
			scalerVIP_color_noise_mpeg_h_detect__a_scaling[3]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[4]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[5]=0x1555;
			scalerVIP_color_noise_mpeg_h_detect__a_scaling[6]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[7]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[8]=0x2aab;
		break;
		case VIP_QUALITY_HDMI_720P:
		case VIP_QUALITY_YPbPr_720P:
		case VIP_QUALITY_DTV_720P:
		case VIP_QUALITY_PVR_720P:
			scalerVIP_color_noise_mpeg_h_detect__a_scaling[3]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[4]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[5]=0x1c71;
		break;
		case VIP_QUALITY_HDMI_1080I:
		case VIP_QUALITY_HDMI_1080P:
		case VIP_QUALITY_YPbPr_1080I:
		case VIP_QUALITY_YPbPr_1080P:
		case VIP_QUALITY_PVR_1080I:
		case VIP_QUALITY_PVR_1080P:
			scalerVIP_color_noise_mpeg_h_detect__a_scaling[3]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[4]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[5]=0x1555;
			scalerVIP_color_noise_mpeg_h_detect__a_scaling[6]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[7]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[8]=0x2aab;
		break;
		case VIP_QUALITY_DTV_1080I:
		case VIP_QUALITY_DTV_1080P:
			scalerVIP_color_noise_mpeg_h_detect__a_scaling[3]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[4]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[5]=0x1555;
			scalerVIP_color_noise_mpeg_h_detect__a_scaling[6]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[7]=scalerVIP_color_noise_mpeg_h_detect__a_scaling[8]=0x2aab;
		break;
		case VIP_QUALITY_YPbPr_480I:
		case VIP_QUALITY_YPbPr_576I:
		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_HDMI_576I:
			//
		break;
		case VIP_QUALITY_YPbPr_480P:
		case VIP_QUALITY_YPbPr_576P:
		case VIP_QUALITY_HDMI_480P:
		case VIP_QUALITY_HDMI_576P:
			//
		break;
		case VIP_QUALITY_DTV_480P:
		case VIP_QUALITY_DTV_576P:
		case VIP_QUALITY_PVR_480P:
		case VIP_QUALITY_PVR_576P:
			//
		break;
		case VIP_QUALITY_DTV_480I:
		case VIP_QUALITY_DTV_576I:
		case VIP_QUALITY_PVR_480I:
		case VIP_QUALITY_PVR_576I:
			//
		break;
		case VIP_QUALITY_CVBS_NTSC:
		case VIP_QUALITY_CVBS_PAL:
			//
		break;
		default:
			//
		break;
	}

	nr_dch1_mpegnr1_r.regValue=IoReg_Read32(NR_DCH1_MPEGNR1_reg);

	do{
		if(
			(scalerVIP_color_noise_mpeg_h_detect__z_scaling<0x800)
			||(!scalerVIP_color_noise_mpeg_h_detect__x_pipeline&&scalerVIP_color_noise_mpeg_h_detect__z_turn%3!=2)
		){
			for(i=2;i>=0;i--){
				scalerVIP_color_noise_mpeg_h_detect__amax1p[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]=0;
				scalerVIP_color_noise_mpeg_h_detect__a2[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]=0;
				scalerVIP_color_noise_mpeg_h_detect__a3[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]=0;
			}
			break;
		}
			//*
		if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
			printk(
				KERN_INFO "\n[histhor_ori] %d %06x %06x %06x %06x %06x %06x %06x %06x[/histhor_ori]"
				,scalerVIP_color_noise_mpeg_h_detect__z_scaling
				,ich1_CntHor0_reg.cp_cnthor0
				,ich1_CntHor1_reg.cp_cnthor1
				,ich1_CntHor2_reg.cp_cnthor2
				,ich1_CntHor3_reg.cp_cnthor3
				,ich1_CntHor4_reg.cp_cnthor4
				,ich1_CntHor5_reg.cp_cnthor5
				,ich1_CntHor6_reg.cp_cnthor6
				,ich1_CntHor7_reg.cp_cnthor7
			);
		}
		if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
			printk(
				KERN_INFO "\n[histhor] %d %06x %06x %06x %06x %06x %06x %06x %06x[/histhor]"
				,scalerVIP_color_noise_mpeg_h_detect__z_scaling
				,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[0]
				,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[1]
				,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[2]
				,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[3]
				,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[4]
				,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[5]
				,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[6]
				,scalerVIP_color_noise_mpeg_h_detect__HisCntHor[7]
			);
		}
			//*/
		scalerVIP_color_noise_mpeg_h_detect__y_max1p=0;
		z_max1=scalerVIP_color_noise_mpeg_h_detect__HisCntHor[0];
		z_max2=0;
		for(i=1;i<8;i++){
			z=scalerVIP_color_noise_mpeg_h_detect__HisCntHor[i];
			if(z>z_max1){
				z_max2=z_max1;
				scalerVIP_color_noise_mpeg_h_detect__y_max1p=i;
				z_max1=z;
			}
			else if(z>z_max2){
				z_max2=z;
			}
		}
#if 1
		if((scalerVIP_color_noise_mpeg_detect_x_by_motion_en == 1) && !(nr_dch1_mpegnr1_r.cp_mpglowerbound&0x08) ){

			MCNR_GMV_Ratio = 100 - scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio();//MCNR_GMV_Ratio : 100 -> 0 ( still -> motion )
			if(RTNR_MAD_count_Y3_count > (RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio)){
				RTNR_MAD_count_Y3_count = RTNR_MAD_count_Y3_count - (((RTNR_MAD_count_Y3_count - (RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio))>>3) + 1);
			}
			else if(((RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio) > (RTNR_MAD_count_Y3_count+10))) {
				RTNR_MAD_count_Y3_count = RTNR_MAD_count_Y3_count + ((((RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio) - RTNR_MAD_count_Y3_count)>>3) + 1) ;
			}

			scalerVIP_color_noise_mpeg_h_detect__z_mad=RTNR_MAD_count_Y3_count;
			if(scalerVIP_color_noise_mpeg_h_detect__z_mad_pre<=-88){
				scalerVIP_color_noise_mpeg_h_detect__z_mad_wait=0;
			}else{
				z_mad_d=scalerVIP_color_noise_mpeg_h_detect__z_mad-scalerVIP_color_noise_mpeg_h_detect__z_mad_pre;
				scalerVIP_color_noise_mpeg_h_detect__z_mad_wait=scalerVIP_color_noise_mpeg_h_detect__z_mad_wait+5-z_mad_d;
			}
			scalerVIP_color_noise_mpeg_h_detect__z_mad_pre=scalerVIP_color_noise_mpeg_h_detect__z_mad;
			if(scalerVIP_color_noise_mpeg_h_detect__z_mad_wait<0){
				scalerVIP_color_noise_mpeg_h_detect__z_mad_wait=0;
			}
			RTNR_MAD_count_Y3_count=RTNR_MAD_count_Y3_count+scalerVIP_color_noise_mpeg_h_detect__z_mad_wait;

			if(Mpeg_16_sw_ctrl_h.fw_ctrl1<Mpeg_16_sw_ctrl_h.fw_ctrl2){
				ratio_W1 = Mpeg_16_sw_ctrl_h.fw_ctrl1;
				ratio_W2 = Mpeg_16_sw_ctrl_h.fw_ctrl2;
			}else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L00]){
				ratio_W1 = 0x500;
				ratio_W2 = 0x800;
			}else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L01]){
				ratio_W1 = 0x480;
				ratio_W2 = 0x780;
			}else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L02]){
				ratio_W1 = 0x400;
				ratio_W2 = 0x700;
			}else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L03]){
				ratio_W1 = 0x380;
				ratio_W2 = 0x680;
			}else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L04]){
				ratio_W1 = 0x300;
				ratio_W2 = 0x600;
			}else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L05]){
				ratio_W1 = 0x300;
				ratio_W2 = 0x580;
			}else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L06]){
				ratio_W1 = 0x300;
				ratio_W2 = 0x500;
			}else{
				ratio_W1 = 0x300;
				ratio_W2 = 0x500;
			}
			if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
				printk(
					KERN_INFO "\n[motion]%d %d %d %08x, [/motion]"
					,RTNR_MAD_count_Y3_avg
					,MCNR_GMV_Ratio
					,RTNR_MAD_count_Y3_count
					,z_max2>0?(z_max1<<8)/z_max2:0
					);
			}

			//scalerVIP_color_noise_mpeg_detect_y = (scalerVIP_color_noise_mpeg_detect_y*scalerVIP_color_noise_mpeg_detect_y_by_motion)>>5;

		}
#endif
		z_max2_4=-z_max1-scalerVIP_color_noise_mpeg_h_detect__HisCntHor[scalerVIP_color_noise_mpeg_h_detect__y_max1p^4];
		for(i=0;i<8;i++){
			z_max2_4=z_max2_4+scalerVIP_color_noise_mpeg_h_detect__HisCntHor[i];
		}
		z_max2_4=z_max2_4/6;
		if(Mpeg_16_sw_ctrl_h.fw_ctrl1<Mpeg_16_sw_ctrl_h.fw_ctrl2){
			x20=z_max2>0?(z_max1<<8)/z_max2:0;
			x20=(x20*scalerVIP_color_noise_mpeg_h_detect__z_scaling/4096)|0;
		} else if((nr_dch1_mpegnr1_r.cp_mpglowerbound&0x08) ){
			x20=z_max2>0?(z_max1<<8)/z_max2:0;
			x20=(x20*scalerVIP_color_noise_mpeg_h_detect__z_scaling/4096)|0;
		} else {
			x20 = ratio_W2;
		}

		if(x2L==x2R){
			scalerVIP_color_noise_mpeg_detect_y_by_motion=x2L;
		}else if(ratio_W1==ratio_W2){
			scalerVIP_color_noise_mpeg_detect_y_by_motion=(x2L+x2R)>>1;
		}else if(x20<=ratio_W1){
			scalerVIP_color_noise_mpeg_detect_y_by_motion=x2L;
		}else if(x20>=ratio_W2){
			scalerVIP_color_noise_mpeg_detect_y_by_motion=x2R;
		}else{
			x2div=1;//ratio_W2-ratio_W1>x2L-x2R?(abs_value((ratio_W2-ratio_W1)/(x2L-x2R))+1)>>1:1;
			ratio_W1_=((ratio_W1+(x2div>>1))/x2div)|0;
			ratio_W2_=((ratio_W2+(x2div>>1))/x2div)|0;
			x2_=((x20+(x2div>>1))/x2div)|0;
			scalerVIP_color_noise_mpeg_detect_y_by_motion=(x2L*(ratio_W2_-x2_)+x2R*(x2_-ratio_W1_)+((ratio_W2_-ratio_W1_)>>1))/(ratio_W2_-ratio_W1_);
		}

		if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
			printk(
				KERN_INFO "\n[x2,x3] %d ,%d, %d [/x2,x3]"
				,(z_max1-z_max2)
				,scalerVIP_color_noise_mpeg_detect_y_by_motion
				,-z_max1-z_max2
				);
		}

		x2=z_max1-z_max2;
		if(scalerVIP_color_noise_mpeg_detect_y_by_motion<x2R&&scalerVIP_color_noise_mpeg_detect_y_by_motion<x2){
			x2=scalerVIP_color_noise_mpeg_detect_y_by_motion;
		}
		x3=-z_max1-z_max2;
		for(i=0;i<8;i++){
			x3=x3+scalerVIP_color_noise_mpeg_h_detect__HisCntHor[i];
		}

		x2_4=z_max1-z_max2_4;
		x20_4=z_max2_4>10?(z_max1<<8)/z_max2_4:0;
		if(x2L4==x2R4){
			scalerVIP_color_noise_mpeg_detect_y_by_motion=x2L4;
		}else if(ratio_W1==ratio_W2){
			scalerVIP_color_noise_mpeg_detect_y_by_motion=(x2L4+x2R4)>>1;
		}else if(x20_4<=ratio_W1){
			scalerVIP_color_noise_mpeg_detect_y_by_motion=x2L4;
		}else if(x20_4>=ratio_W2){
			scalerVIP_color_noise_mpeg_detect_y_by_motion=x2R4;
		}else{
			x2div=1;//ratio_W2-ratio_W1>x2L-x2R?(abs_value((ratio_W2-ratio_W1)/(x2L-x2R))+1)>>1:1;
			ratio_W1_=((ratio_W1+(x2div>>1))/x2div)|0;
			ratio_W2_=((ratio_W2+(x2div>>1))/x2div)|0;
			x2_=((x20_4+(x2div>>1))/x2div)|0;
			scalerVIP_color_noise_mpeg_detect_y_by_motion=(x2L4*(ratio_W2_-x2_)+x2R4*(x2_-ratio_W1_)+((ratio_W2_-ratio_W1_)>>1))/(ratio_W2_-ratio_W1_);
		}
		if(scalerVIP_color_noise_mpeg_detect_y_by_motion<x2R4&&scalerVIP_color_noise_mpeg_detect_y_by_motion<x2_4){
			x2_4=scalerVIP_color_noise_mpeg_detect_y_by_motion;
		}
		// scalerVIP_color_noise_mpeg_detect_y4=0;

		for(i=2;i>0;i--){
			scalerVIP_color_noise_mpeg_h_detect__amax1p[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]=scalerVIP_color_noise_mpeg_h_detect__amax1p[i-1][scalerVIP_color_noise_mpeg_h_detect__z_turn];
			scalerVIP_color_noise_mpeg_h_detect__a2[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]=scalerVIP_color_noise_mpeg_h_detect__a2[i-1][scalerVIP_color_noise_mpeg_h_detect__z_turn];
			scalerVIP_color_noise_mpeg_h_detect__a3[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]=scalerVIP_color_noise_mpeg_h_detect__a3[i-1][scalerVIP_color_noise_mpeg_h_detect__z_turn];
		}
		x2=(x2*1920/scalerVIP_color_noise_mpeg_h_detect__xwidth*1080/scalerVIP_color_noise_mpeg_h_detect__xheight)|0;
		x3=(x3*320/scalerVIP_color_noise_mpeg_h_detect__xwidth*1080/scalerVIP_color_noise_mpeg_h_detect__xheight)|0;// 320 = 1920 / 6
		x2_4=(x2_4*1920/scalerVIP_color_noise_mpeg_h_detect__xwidth*1080/scalerVIP_color_noise_mpeg_h_detect__xheight)|0;
		if(di_im_di_rtnr_control_r.cp_rtnr_progressive==0){
			x2=x2>>1;
			x3=x3>>1;
			x2_4=x2_4>>1;
		}
		scalerVIP_color_noise_mpeg_h_detect__amax1p[0][scalerVIP_color_noise_mpeg_h_detect__z_turn]=scalerVIP_color_noise_mpeg_h_detect__y_max1p;
		scalerVIP_color_noise_mpeg_h_detect__a2[0][scalerVIP_color_noise_mpeg_h_detect__z_turn]=x2;
		scalerVIP_color_noise_mpeg_h_detect__a3[0][scalerVIP_color_noise_mpeg_h_detect__z_turn]=x3;
			/*
			printk(
				KERN_EMERG "\n[mpegnr_h] %d %d %d %d %d %d %d[/mpegnr_h]",
				scalerVIP_color_noise_mpeg_h_detect__z_turn,
				scalerVIP_color_noise_mpeg_h_detect__y_turn,
				(scalerVIP_color_noise_mpeg_h_detect__z_turn!=scalerVIP_color_noise_mpeg_h_detect__y_turn?1:0)|(scalerVIP_color_noise_mpeg_h_detect__y_turn<9?2:0),
				scalerVIP_color_noise_mpeg_h_detect__z_scaling,
				x2,
				scalerVIP_color_noise_mpeg_h_detect__a2[1][scalerVIP_color_noise_mpeg_h_detect__y_turn],
				scalerVIP_color_noise_mpeg_h_detect__a2[scalerVIP_color_noise_mpeg_h_detect__y_turn>scalerVIP_color_noise_mpeg_h_detect__z_turn?2:0][scalerVIP_color_noise_mpeg_h_detect__y_turn]
			);
			//*/
		if(
			scalerVIP_color_noise_mpeg_h_detect__y_max1p!=scalerVIP_color_noise_mpeg_h_detect__amax1p[1][scalerVIP_color_noise_mpeg_h_detect__z_turn] ||
			scalerVIP_color_noise_mpeg_h_detect__y_max1p!=scalerVIP_color_noise_mpeg_h_detect__amax1p[2][scalerVIP_color_noise_mpeg_h_detect__z_turn]
		){
			if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
				printk(
					KERN_INFO "\n[histhor.break]max1p_changed %d %d %d[/histhor.break]"
					,scalerVIP_color_noise_mpeg_h_detect__y_max1p
					,scalerVIP_color_noise_mpeg_h_detect__amax1p[1][scalerVIP_color_noise_mpeg_h_detect__z_turn]
					,scalerVIP_color_noise_mpeg_h_detect__amax1p[2][scalerVIP_color_noise_mpeg_h_detect__z_turn]
				);
			}
			if(scalerVIP_color_noise_mpeg_h_detect__y_turn==scalerVIP_color_noise_mpeg_h_detect__z_turn){
				scalerVIP_color_noise_mpeg_h_detect__yen=0;
				for(i=0;i<3;i++){
					scalerVIP_color_noise_mpeg_h_detect__a2[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]=0;
				}
			}
			break;
		}
		if(scalerVIP_color_noise_mpeg_h_detect__z_turn!=scalerVIP_color_noise_mpeg_h_detect__y_turn&&scalerVIP_color_noise_mpeg_h_detect__y_turn<9){
			if(
				x2<x3div+scalerVIP_color_noise_mpeg_h_detect__a2[1][scalerVIP_color_noise_mpeg_h_detect__y_turn]
				&&x2<x3div+scalerVIP_color_noise_mpeg_h_detect__a2[scalerVIP_color_noise_mpeg_h_detect__y_turn>scalerVIP_color_noise_mpeg_h_detect__z_turn?2:0][scalerVIP_color_noise_mpeg_h_detect__y_turn]
			){
				if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
					printk(
						KERN_INFO "\n[histhor.break]factor_keep %d %d %d %d[/histhor.break]"
						,x2
						,x3div+scalerVIP_color_noise_mpeg_h_detect__a2[1][scalerVIP_color_noise_mpeg_h_detect__y_turn]
						,x3div+scalerVIP_color_noise_mpeg_h_detect__a2[scalerVIP_color_noise_mpeg_h_detect__y_turn>scalerVIP_color_noise_mpeg_h_detect__z_turn?2:0][scalerVIP_color_noise_mpeg_h_detect__y_turn]
						,scalerVIP_color_noise_mpeg_detect_y4
					);
				}
				break;
			}
		}
		scalerVIP_color_noise_mpeg_h_detect__y_turn=scalerVIP_color_noise_mpeg_h_detect__z_turn;
		for(i=2;i>0;i--){
			if(x2>scalerVIP_color_noise_mpeg_h_detect__a2[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]){x2=scalerVIP_color_noise_mpeg_h_detect__a2[i][scalerVIP_color_noise_mpeg_h_detect__z_turn];}
			if(x3<scalerVIP_color_noise_mpeg_h_detect__a3[i][scalerVIP_color_noise_mpeg_h_detect__z_turn]){x3=scalerVIP_color_noise_mpeg_h_detect__a3[i][scalerVIP_color_noise_mpeg_h_detect__z_turn];}
		}
		scalerVIP_color_noise_mpeg_h_detect__y3_for_other_ip=x3;
		if(scalerVIP_color_noise_mpeg_h_detect__a_scaling[scalerVIP_color_noise_mpeg_h_detect__y_turn]>0x1000){
			x3=(x3*scalerVIP_color_noise_mpeg_h_detect__a_scaling[scalerVIP_color_noise_mpeg_h_detect__y_turn])>>12;
		}
		if(y3L==y3R){
			scalerVIP_color_noise_mpeg_h_detect__yub=y3L;
		}else if(scalerVIP_color_noise_mpeg_h_detect__x3L==scalerVIP_color_noise_mpeg_h_detect__x3R){
			scalerVIP_color_noise_mpeg_h_detect__yub=(y3L+y3R)>>1;
		}else if(x3<=scalerVIP_color_noise_mpeg_h_detect__x3L){
			scalerVIP_color_noise_mpeg_h_detect__yub=y3L;
		}else if(x3>=scalerVIP_color_noise_mpeg_h_detect__x3R){
			scalerVIP_color_noise_mpeg_h_detect__yub=y3R;
		}else{
			// x3div=(abs_value(y3L-y3R)+1)>>1;
			x3L_=((scalerVIP_color_noise_mpeg_h_detect__x3L+(x3div>>1))/x3div)|0;
			x3R_=((scalerVIP_color_noise_mpeg_h_detect__x3R+(x3div>>1))/x3div)|0;
			x3_=((x3+(x3div>>1))/x3div)|0;
			scalerVIP_color_noise_mpeg_h_detect__yub=(y3L*(x3R_-x3_)+y3R*(x3_-x3L_)+((x3R_-x3L_)>>1))/(x3R_-x3L_);
		}
		if(y2L==y2R){
			scalerVIP_color_noise_mpeg_h_detect__yub2=y2L;
		}else if(x2L==x2R){
			scalerVIP_color_noise_mpeg_h_detect__yub2=(y2L+y2R)>>1;
		}else if(x2<=x2L){
			scalerVIP_color_noise_mpeg_h_detect__yub2=y2L;
		}else if(x2>=x2R){
			scalerVIP_color_noise_mpeg_h_detect__yub2=y2R;
		}else{
			x2div=(abs_value(y2L-y2R)+1)>>1;
			x2L_=((x2L+(x2div>>1))/x2div)|0;
			x2R_=((x2R+(x2div>>1))/x2div)|0;
			x2_=((x2+(x2div>>1))/x2div)|0;
			scalerVIP_color_noise_mpeg_h_detect__yub2=(y2L*(x2R_-x2_)+y2R*(x2_-x2L_)+((x2R_-x2L_)>>1))/(x2R_-x2L_);
		}

		/*if(y2L4==y2R4){
			scalerVIP_color_noise_mpeg_detect_y4=y2L4;
		}else
		if(x2L4==x2R4){
			scalerVIP_color_noise_mpeg_detect_y4=(y2L4+y2R4)>>1;
		}else */ //for Coverity issue mark first
		if(x2_4<=x2L4){
			scalerVIP_color_noise_mpeg_detect_y4=y2L4;
		}else if(x2_4>=x2R4){
			scalerVIP_color_noise_mpeg_detect_y4=y2R4;
		}else{
			x2div=(abs_value(y2L4-y2R4)+1)>>1;
			x2L_=((x2L4+(x2div>>1))/x2div)|0;
			x2R_=((x2R4+(x2div>>1))/x2div)|0;
			x2_=((x2_4+(x2div>>1))/x2div)|0;
			scalerVIP_color_noise_mpeg_detect_y4=(y2L4*(x2R_-x2_)+y2R4*(x2_-x2L_)+((x2R_-x2L_)>>1))/(x2R_-x2L_);
		}

		scalerVIP_color_noise_mpeg_h_detect__yen=1;
		if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
			printk(
				KERN_INFO "\n[yub]%d ,%d, %d, [/yub]"
				,scalerVIP_color_noise_mpeg_h_detect__yub
				,scalerVIP_color_noise_mpeg_h_detect__yub2
				,scalerVIP_color_noise_mpeg_detect_y4
				);
		}

	scalerVIP_color_noise_mpeg_detect_y_=(scalerVIP_color_noise_mpeg_h_detect__yub*scalerVIP_color_noise_mpeg_h_detect__yub2)>>8;
	if(scalerVIP_color_noise_mpeg_detect_y_>scalerVIP_color_noise_mpeg_h_detect__x_ub_ub){
		scalerVIP_color_noise_mpeg_detect_y_=scalerVIP_color_noise_mpeg_h_detect__x_ub_ub;
	}
	if(scalerVIP_color_noise_mpeg_detect_y4>scalerVIP_color_noise_mpeg_h_detect__x_ub_ub4)
	{
		scalerVIP_color_noise_mpeg_detect_y4=scalerVIP_color_noise_mpeg_h_detect__x_ub_ub4;
	}
	if(scalerVIP_color_noise_mpeg_detect_y4<scalerVIP_color_noise_mpeg_detect_y_)
	{
		scalerVIP_color_noise_mpeg_detect_y4=scalerVIP_color_noise_mpeg_detect_y_;
	}
	scalerVIP_color_noise_mpeg_detect_y_delta3=scalerVIP_color_noise_mpeg_detect_y4;
	if(z_max2_4<scalerVIP_color_noise_mpeg_h_detect__HisCntHor[scalerVIP_color_noise_mpeg_h_detect__y_max1p^4]&&z_max1>z_max2_4)
	{
		scalerVIP_color_noise_mpeg_detect_y_delta3=scalerVIP_color_noise_mpeg_detect_y_delta3*(z_max1-scalerVIP_color_noise_mpeg_h_detect__HisCntHor[scalerVIP_color_noise_mpeg_h_detect__y_max1p^4])/(z_max1-z_max2_4);
	}

	if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
			printk(
					KERN_INFO "\n[pre_mpeg_detect_y]%d %d %d %d %d %d [/pre_mpeg_detect_y]"
				,scalerVIP_color_noise_mpeg_detect_y
					,scalerVIP_color_noise_mpeg_detect_y_
					,RTNR_MAD_count_Y3_count
					,static_cnt
					,scalerVIP_color_noise_mpeg_h_detect__z_mad_pre
					,scalerVIP_color_noise_mpeg_h_detect__z_mad
				);
	}

		if(scalerVIP_color_noise_mpeg_h_detect__z_mad != 0){
		static_cnt = 180;
		scalerVIP_color_noise_mpeg_detect_y = scalerVIP_color_noise_mpeg_detect_y_;
	} else {
			if(static_cnt>=-999 ){
				static_cnt -=3;
			is_static_cnt_tsin_ku=0;
			if(static_cnt>0){
				is_static_cnt_tsin_ku=1;
			}else
			if(static_cnt<-30){
				static_cnt+=30;
				is_static_cnt_tsin_ku=1;
			}
			if(is_static_cnt_tsin_ku){
			if(scalerVIP_color_noise_mpeg_detect_y_>scalerVIP_color_noise_mpeg_detect_y){
				scalerVIP_color_noise_mpeg_detect_y=scalerVIP_color_noise_mpeg_detect_y+1;
			}
			//else if(scalerVIP_color_noise_mpeg_detect_y_<scalerVIP_color_noise_mpeg_detect_y){
			//	scalerVIP_color_noise_mpeg_detect_y=scalerVIP_color_noise_mpeg_detect_y-1;
			//}
			}
			if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
				printk(
					KERN_INFO "\n[mpeg_detect_y]%d [/mpeg_detect_y]"
					,scalerVIP_color_noise_mpeg_detect_y
					);
			}
		}
		if(static_cnt <=-999)
			static_cnt =-999;


	}
	}while(false);

#if 0
	if((scalerVIP_color_noise_mpeg_detect_x_by_motion_en == 1) && !(nr_dch1_mpegnr1_r.cp_mpglowerbound&0x08) ){

		MCNR_GMV_Ratio = 100 - scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio();//MCNR_GMV_Ratio : 100 -> 0 ( still -> motion )
		if(RTNR_MAD_count_Y3_count > (RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio)){
			RTNR_MAD_count_Y3_count = RTNR_MAD_count_Y3_count - (((RTNR_MAD_count_Y3_count - (RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio))>>3) + 1);
		}
		else if(((RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio) > (RTNR_MAD_count_Y3_count+10))) {
			RTNR_MAD_count_Y3_count = RTNR_MAD_count_Y3_count + ((((RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio) - RTNR_MAD_count_Y3_count)>>3) + 1) ;
		}

		if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L00])
			scalerVIP_color_noise_mpeg_detect_y_by_motion = 0;
		else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L01])
			scalerVIP_color_noise_mpeg_detect_y_by_motion = 5 ;
		else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L02])
			scalerVIP_color_noise_mpeg_detect_y_by_motion = 10;
		else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L03])
			scalerVIP_color_noise_mpeg_detect_y_by_motion = 20;
		else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L04])
			scalerVIP_color_noise_mpeg_detect_y_by_motion = 25;
		else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L05])
			scalerVIP_color_noise_mpeg_detect_y_by_motion = 32;
		else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L06])
			scalerVIP_color_noise_mpeg_detect_y_by_motion = 32;
		else
			scalerVIP_color_noise_mpeg_detect_y_by_motion = 32;

		if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
			printk(
				KERN_INFO "\n[motion]%d %d %d %d, [/motion]"
				,RTNR_MAD_count_Y3_avg
				,MCNR_GMV_Ratio
				,RTNR_MAD_count_Y3_count
				,scalerVIP_color_noise_mpeg_detect_y_by_motion
				);
		}

		scalerVIP_color_noise_mpeg_detect_y = (scalerVIP_color_noise_mpeg_detect_y*scalerVIP_color_noise_mpeg_detect_y_by_motion)>>5;


	}
#endif

}
#else
static unsigned int counter_ratio_sum = 0;

void scalerVIP_color_noise_mpeg_detect(void)
{

	_RPC_clues* RPC_SmartPic_clue=NULL;
	RPC_SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();

	if((RPC_SmartPic_clue->S_NetFlix_info.Netflix_Enable) ==1)
	{
		if((RPC_SmartPic_clue->S_NetFlix_info.NetFlix_smooth_Toggle_info.MPEG_BLK_init)==1)
		{
			RPC_SmartPic_clue->S_NetFlix_info.NetFlix_smooth_Toggle_info.MPEG_BLK_init=0;
			return;
		}

	}


	unsigned short   temp = 0;
	unsigned int   MaxValue = 0, SecondMaxValue;
	unsigned short   MaxValue_V, SecondMaxValue_V;
	unsigned char   i, RTNR_Pro;
	unsigned int  MpegRatio, MpegRatio_V;
	unsigned int 	MA_data[3]={0}, RTNR_TempMAD_count_Y;
	unsigned short  width,height;

	// oliver-, not define in darwin.
	mpegnr_ich1_cnthor0_RBUS ich1_CntHor0_reg;
	mpegnr_ich1_cnthor1_RBUS ich1_CntHor1_reg;
	mpegnr_ich1_cnthor2_RBUS ich1_CntHor2_reg;
	mpegnr_ich1_cnthor3_RBUS ich1_CntHor3_reg;
	mpegnr_ich1_cnthor4_RBUS ich1_CntHor4_reg;
	mpegnr_ich1_cnthor5_RBUS ich1_CntHor5_reg;
	mpegnr_ich1_cnthor6_RBUS ich1_CntHor6_reg;
	mpegnr_ich1_cnthor7_RBUS ich1_CntHor7_reg;

	unsigned short      MpgHorStart = 0;
	unsigned short      MpgHorEnd = 0;
	unsigned short      MpgVerStart = 0;
	unsigned short      MpgVerEnd = 0;
	unsigned short      th1,th2,th3,th4;
	unsigned int		counter_H = 0, counter_ratio = 0;

	/*
	if(MA_print_count%60==0)
	{
	ROSPrintf("2.[mpeg_data_reset]ucMode_Curr=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].ucMode_Curr);
	}
	*/
	mpegnr_ich1_hist_blking_hor_range_RBUS ich1_Hist_Blking_Hor_Range_reg;
	mpegnr_ich1_hist_blking_ver_range_RBUS ich1_Hist_Blking_Ver_Range_reg;

	di_im_di_si_ma_total_fm_sum_RBUS ma_total_fm_sum;
	di_im_di_si_ma_large_fm_pixel_RBUS ma_large_fm_pixel;
	di_im_di_si_ma_large_fm_sum_RBUS ma_large_fm_sum;
	di_im_di_rtnr_mad_y_counter_RBUS rtnr_mad_y_counter;
	di_im_di_rtnr_control_RBUS rtnr_control;

	ma_total_fm_sum.regValue = rtd_inl(DI_IM_DI_SI_MA_TOTAL_FM_SUM_reg);
	ma_large_fm_pixel.regValue = rtd_inl(DI_IM_DI_SI_MA_LARGE_FM_PIXEL_reg);
	ma_large_fm_sum.regValue = rtd_inl(DI_IM_DI_SI_MA_LARGE_FM_SUM_reg);
	rtnr_mad_y_counter.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_reg);
	rtnr_control.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);

	MA_data[0] = ma_total_fm_sum.total_frame_motion_sum;
	MA_data[1] = ma_large_fm_pixel.large_frame_motion_pixel;
	MA_data[2] = ma_large_fm_sum.large_frame_motion_sum;
	RTNR_TempMAD_count_Y = rtnr_mad_y_counter.cp_temporal_mad_countery;
	RTNR_Pro = rtnr_control.cp_rtnr_progressive;

	//MPEG block effect detection///////////////////////////////////////////////////////
	//horizotal mpeg detection th
	ich1_Hist_Blking_Hor_Range_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_Hist_Blking_Hor_Range_reg);
	MpgHorStart = ich1_Hist_Blking_Hor_Range_reg.cp_histhorstart ;
	MpgHorEnd = ich1_Hist_Blking_Hor_Range_reg.cp_histhorend;
	// scaler_rtd_outl(MPEGNR_ICH1_HIST_BLKING_HOR_RANGE_reg, ich1_Hist_Blking_Hor_Range_reg.regValue);

	ich1_Hist_Blking_Ver_Range_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_Hist_Blking_Ver_Range_reg);
	MpgVerStart = ich1_Hist_Blking_Ver_Range_reg.cp_histverstart ;
	MpgVerEnd = ich1_Hist_Blking_Ver_Range_reg.cp_histverend;
	// scaler_rtd_outl(MPEGNR_ICH1_HIST_BLKING_HOR_RANGE_reg, ich1_Hist_Blking_Ver_Range_reg.regValue);

	// //scalervip_printf(AutoMADebugMsg,"o---MpgHorStart=%d, MpgHorEnd=%d---o\n",MpgHorStart,MpgHorEnd);
	// //scalervip_printf(AutoMADebugMsg,"o---MpgVerStart=%d, MpgVerEnd=%d---o\n",MpgVerStart,MpgVerEnd);

	width=MpgHorEnd-MpgHorStart;
	height=MpgVerEnd-MpgVerStart;
	th4=(width*height)>>9;//300
	th3=width*height/1152;//300
	th2=th3/3;
	th1=th3/30;

	if(xstep_idx_detect==1)
	{
		th4 =th4*9/16;
		th3 =th3*9/16;
		th2 =th2*9/16;
		th1 =th1*9/16;

	}
	else if(xstep_idx_detect==2)
	{
		th4 =th4*3/8;
		th3 =th3*3/8;
		th2 =th2*3/8;
		th1 =th1*3/8;

	}


	//read horizontal counter to get MpgIdx_X
	//horizontal
	MaxValue = 0;
	SecondMaxValue = 0;
	ich1_CntHor0_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor0_reg);
	ich1_CntHor1_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor1_reg);
	ich1_CntHor2_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor2_reg);
	ich1_CntHor3_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor3_reg);
	ich1_CntHor4_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor4_reg);
	ich1_CntHor5_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor5_reg);
	ich1_CntHor6_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor6_reg);
	ich1_CntHor7_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_CntHor7_reg);
	for(i=0;i<8;i++)//read hor 8 counters
	{
		switch(i)
		{
		case 0:
			temp=ich1_CntHor0_reg.cp_cnthor0;
			break;
		case 1:
			temp=ich1_CntHor1_reg.cp_cnthor1;
			break;
		case 2:
			temp=ich1_CntHor2_reg.cp_cnthor2;
			break;
		case 3:
			temp=ich1_CntHor3_reg.cp_cnthor3;
			break;
		case 4:
			temp=ich1_CntHor4_reg.cp_cnthor4;
			break;
		case 5:
			temp=ich1_CntHor5_reg.cp_cnthor5;
			break;
		case 6:
			temp=ich1_CntHor6_reg.cp_cnthor6;
			break;
		case 7:
			temp=ich1_CntHor7_reg.cp_cnthor7;
			break;
		}
		if(MaxValue <= temp)
		{
			SecondMaxValue = MaxValue;
			MaxValue = temp;
			MpgIdx_X = i;
		}
		else if(SecondMaxValue <= temp)
		{
			SecondMaxValue = temp;
		}
#if 0 // mark for always big weight, 20170704
		counter_H= counter_H + temp;
#endif
	}

#if 0 // mark for smooth MpegRatio, 20170704

	if( (SecondMaxValue<th1) || (SecondMaxValue==0) )
		MpegRatio=0;
	else if(SecondMaxValue<th2)
		MpegRatio=(((MaxValue<<6)/SecondMaxValue)/8);
	else if(SecondMaxValue<th3)
		MpegRatio=(((MaxValue<<6)/SecondMaxValue)/4);
	else if(SecondMaxValue<th4)
		MpegRatio=(((MaxValue<<6)/SecondMaxValue)/2);
	else
		MpegRatio=(MaxValue<<6)/SecondMaxValue;
#else
	counter_H = MaxValue-SecondMaxValue;
	if( (SecondMaxValue<th1) || (SecondMaxValue==0) ){
		MpegRatio=0;
	}else if(SecondMaxValue<th2){
		MpegRatio=(16*(SecondMaxValue-th1))/(th2-th1);
	}else if(SecondMaxValue<th3){
		MpegRatio=16+(16*(SecondMaxValue-th2))/(th3-th2);
	}else if(SecondMaxValue<th4){
		MpegRatio=32+(32*(SecondMaxValue-th3))/(th4-th3);
	}else{
		MpegRatio=64;
	}
	MpegRatio=MpegRatio*(MaxValue-SecondMaxValue)/SecondMaxValue/64;

#endif

	if( (MA_print_count%debug_print_delay_time==0) && (Start_Print.Mpeg_Nr==TRUE) )
	{
		//ROSPrintf("\nField_Count=%d", Field_Count);
		//ROSPrintf("\nxstep=%d", array_xstep[xstep_idx_detect]);
		//ROSPrintf("\nth1 = %d, th2 = %d, th3 = %d th4 = %d\n", th1, th2, th3, th4);
		printk(KERN_EMERG "\nMaxValue = %d, SecondMaxValue = %d, MpegRatio = %d, MpgIdx_X = %d\n", MaxValue, SecondMaxValue, MpegRatio, MpgIdx_X);
	}

	if( (Field_Count%MpegIdxPeriod)==1 )
	{
		MpgIdx_X_arr[(Field_Count/MpegIdxPeriod)%4] =	MpgIdx_X;
		if(Start_Print.Mpeg_Nr==TRUE)
		{
			printk(KERN_EMERG "\nField_Count=%d\n", Field_Count);
			printk(KERN_EMERG "MpegIdxPeriod=%d\n", MpegIdxPeriod);
			printk(KERN_EMERG "MpgIdx_X=%d\n", MpgIdx_X);
		}
	}

	MpegRatioSum+=MpegRatio;//sony demo
	MpegRatioSum_Count++;//sony demo
	Field_Count++;//sony demo
	MpegCounter_H+=counter_H;

#if 1
	if(Start_Print.Mpeg_Nr==TRUE)
	{

	if(MA_print_count%MpegPeriod==0)//sony demo
	{
			printk(KERN_EMERG "o--- scalerVIP_color_noise_mpeg Debug print ---o\n");
			printk(KERN_EMERG "o---MpegCounter_H = %d, counter_H = %d---o\n", MpegCounter_H, counter_H);
#if 0
		ROSPrintf("o---MpgHorStart = %d, MpgHorEnd = %d, MpgVerStart = %d,MpgVerEnd = %d  ---o\n", MpgHorStart, MpgHorEnd, MpgVerStart, MpgVerEnd);
		ROSPrintf("o---th1 = %d, th2 = %d, th3 = %d---o\n", th1, th2, th3);
		ROSPrintf("o---cp_cnthor0 = %d, cp_cnthor1 = %d, cp_cnthor2 = %d, cp_cnthor3=%d---o\n", ich1_CntHor0_reg.cp_cnthor0, ich1_CntHor0_reg.cp_cnthor1, ich1_CntHor2_reg.cp_cnthor2, ich1_CntHor2_reg.cp_cnthor3);
		ROSPrintf("o---cp_cnthor4 = %d, cp_cnthor5 = %d, cp_cnthor6 = %d, cp_cnthor7=%d---o\n", ich1_CntHor4_reg.cp_cnthor4, ich1_CntHor4_reg.cp_cnthor5, ich1_CntHor6_reg.cp_cnthor6, ich1_CntHor6_reg.cp_cnthor7);
		ROSPrintf("o---MaxValue = %d, SecondMaxValue = %d, MpegRatio = %d, MpgIdx_X = %d---o\n", MaxValue, SecondMaxValue, MpegRatio, MpgIdx_X);
		ROSPrintf("o---scalerVip_mpegNR = %d, TableNR_MPEGNR_H = %d, TableNR_MPEGNR_V = %d---o\n", scalerVip_mpegNR, TableNR_MPEGNR_H, TableNR_MPEGNR_V);
#endif
		}
	}
#endif

	//MpegRatioSum+=MpegRatio;//sony demo original
	//MpegRatioSum_Count++;//sony demo original

	//Field_Count++;//sony demo original

	//adjust register for every MpegPeriod input fields///////////////////////////////////////////////////////////////////
	if(th3!=0)
		counter_ratio = (counter_H*10/th3);//ratio of total pixel

	counter_ratio_sum = counter_ratio_sum+counter_ratio;

#if 0
	if(MA_print_count%MpegPeriod==0)
	{
		ROSPrintf("o---MpgHorStart = %d, MpgHorEnd = %d, MpgVerStart = %d,MpgVerEnd = %d  ---o\n", MpgHorStart, MpgHorEnd, MpgVerStart, MpgVerEnd);
		ROSPrintf("o---MpgHor = %d,MpgVer = %d, Sum_total = %d  ---o\n", (MpgHorEnd-MpgHorStart), (MpgVerEnd-MpgVerStart), (MpgHorEnd-MpgHorStart)*(MpgVerEnd-MpgVerStart));
		ROSPrintf("o---counter_H = %d, counter_ratio = %d  ---o\n", counter_H,counter_ratio);
		ROSPrintf("o---counter_ratio_sum = %d,MpegRatioSum=%d---o\n", counter_ratio_sum,MpegRatioSum);
		ROSPrintf("o---MpegRatioSum_Count = %d---o\n", MpegRatioSum_Count);
	}
#endif
}
#endif

int scalerVIP_color_noise_mpeg_v_detect__VisCntVer[8]={0,0,0,0,0,0,0,0};
int scalerVIP_color_noise_mpeg_v_detect__a_scaling[9]={0x1000,0x1000,0x1000,0x1e00,0x1e00,0x1e00,0x2000,0x2000,0x2000};//{0x1000,0x1000,0x1000,0,0,0,0,0,0};//{0x1000,0,0,0x2000,0,0x1e00,0,0x2400,0};//
int scalerVIP_color_noise_mpeg_v_detect__amax1p[3][9]={{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0}};
int scalerVIP_color_noise_mpeg_v_detect__a2[3][9]={{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0}};
int scalerVIP_color_noise_mpeg_v_detect__a3[3][9]={{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0}};
int scalerVIP_color_noise_mpeg_v_detect__x3L=0x2000;// minimum detail
int scalerVIP_color_noise_mpeg_v_detect__x3R=0x3000;// maximum detail
int scalerVIP_color_noise_mpeg_v_detect__xwidth=1920;
int scalerVIP_color_noise_mpeg_v_detect__xheight=1080;
int scalerVIP_color_noise_mpeg_v_detect__x_pipeline=0;
int scalerVIP_color_noise_mpeg_v_detect__x_requires_hor=1;
int scalerVIP_color_noise_mpeg_v_detect__yen=0;
int scalerVIP_color_noise_mpeg_v_detect__yub=0;// higher means more detail
int scalerVIP_color_noise_mpeg_v_detect__yub2=0;// higher means more blocking effect
int scalerVIP_color_noise_mpeg_v_detect__y_scaling=0;
int scalerVIP_color_noise_mpeg_v_detect__y_turn=8;// winning turn
int scalerVIP_color_noise_mpeg_v_detect__y_max1p=0;// the bin with the largest number
int scalerVIP_color_noise_mpeg_v_detect__z_scaling=0;
int scalerVIP_color_noise_mpeg_v_detect__z_turn=8;
int scalerVIP_color_noise_mpeg_v_detect_y=0;
void scalerVIP_color_noise_mpeg_v_detect(void){
	int i=0;//,j=0,k=0;
	int z=0;
	int z_max1=0;
	int z_max2=0;
	//int z_max2p=0;
	int x2=0;// block effect level detected
	int x2L=0x1000;
	int y2L=0;
	int x2R=0x3000;
	int y2R=256;
	int x2div=0x80;
	int x3=0;
	int y3L=48;
	int y3R=12;
	int x3div=0x80;
	int x2L_=0;
	int x2R_=0;
	int x2_=0;


	nr_dch1_mpegnr1_RBUS	nr_dch1_mpegnr1_r;
	nr_dch1_viscntver0_RBUS nr_dch1_viscntver0_r;
	nr_dch1_viscntver1_RBUS nr_dch1_viscntver1_r;
	nr_dch1_viscntver2_RBUS nr_dch1_viscntver2_r;
	nr_dch1_viscntver3_RBUS nr_dch1_viscntver3_r;
	nr_dch1_viscntver4_RBUS nr_dch1_viscntver4_r;
	nr_dch1_viscntver5_RBUS nr_dch1_viscntver5_r;
	nr_dch1_viscntver6_RBUS nr_dch1_viscntver6_r;
	nr_dch1_viscntver7_RBUS nr_dch1_viscntver7_r;
	di_im_di_rtnr_control_RBUS di_im_di_rtnr_control_r;
	DRV_MPEGNR_16_SW_CTRL Mpeg_16_sw_ctrl_v;


	_system_setting_info *VIP_system_info_structure_table = (_system_setting_info*)Scaler_GetShareMemVirAddr(SCALERIOC_VIP_system_info_structure);
	scalerVIP_color_noise_mpeg_v_detect__z_turn=scalerVIP_color_noise_mpeg_v_detect__z_turn<8?scalerVIP_color_noise_mpeg_v_detect__z_turn+1:0;
	scalerVIP_color_noise_mpeg_v_detect__z_scaling=scalerVIP_color_noise_mpeg_v_detect__a_scaling[scalerVIP_color_noise_mpeg_v_detect__z_turn];


	drvif_color_get_DRV_MPG_V_SW_Ctrl((DRV_MPEGNR_16_SW_CTRL*)&Mpeg_16_sw_ctrl_v);
	x2L=Mpeg_16_sw_ctrl_v.x2l;
	x2R=Mpeg_16_sw_ctrl_v.x2r;
	scalerVIP_color_noise_mpeg_v_detect__x3L=Mpeg_16_sw_ctrl_v.x3l;
	scalerVIP_color_noise_mpeg_v_detect__x3R=Mpeg_16_sw_ctrl_v.x3r;
	y3L=Mpeg_16_sw_ctrl_v.y3l;
	y3R=Mpeg_16_sw_ctrl_v.y3r;
	scalerVIP_color_noise_mpeg_h_detect__x_ub_ub =Mpeg_16_sw_ctrl_v.x_ub_ub; //current not use it

	//printk("v x2L=%d,x2R=%d,x3l=%d,x3r=%d,y3l=%d,y3r=%d,ub=%d \n ",x2L,x2R,
	//scalerVIP_color_noise_mpeg_h_detect__x3L,scalerVIP_color_noise_mpeg_h_detect__x3R,
	//y3L,y3R,scalerVIP_color_noise_mpeg_h_detect__x_ub_ub);



	//debug for resolution detector!if enable -> disable the V_MPEG resolution detector
	nr_dch1_mpegnr1_r.regValue=IoReg_Read32(NR_DCH1_MPEGNR1_reg);

	// different resolution (default 1920*1080)
	scalerVIP_color_noise_mpeg_v_detect__xwidth=VIP_system_info_structure_table->I_Width;
	scalerVIP_color_noise_mpeg_v_detect__xheight=VIP_system_info_structure_table->I_Height;
	nr_dch1_viscntver0_r.regValue=IoReg_Read32(NR_DCH1_VisCntVer0_reg);
	scalerVIP_color_noise_mpeg_v_detect__VisCntVer[0]=nr_dch1_viscntver0_r.cp_viscntver0;
	nr_dch1_viscntver1_r.regValue=IoReg_Read32(NR_DCH1_VisCntVer1_reg);
	scalerVIP_color_noise_mpeg_v_detect__VisCntVer[1]=nr_dch1_viscntver1_r.cp_viscntver1;
	nr_dch1_viscntver2_r.regValue=IoReg_Read32(NR_DCH1_VisCntVer2_reg);
	scalerVIP_color_noise_mpeg_v_detect__VisCntVer[2]=nr_dch1_viscntver2_r.cp_viscntver2;
	nr_dch1_viscntver3_r.regValue=IoReg_Read32(NR_DCH1_VisCntVer3_reg);
	scalerVIP_color_noise_mpeg_v_detect__VisCntVer[3]=nr_dch1_viscntver3_r.cp_viscntver3;
	nr_dch1_viscntver4_r.regValue=IoReg_Read32(NR_DCH1_VisCntVer4_reg);
	scalerVIP_color_noise_mpeg_v_detect__VisCntVer[4]=nr_dch1_viscntver4_r.cp_viscntver4;
	nr_dch1_viscntver5_r.regValue=IoReg_Read32(NR_DCH1_VisCntVer5_reg);
	scalerVIP_color_noise_mpeg_v_detect__VisCntVer[5]=nr_dch1_viscntver5_r.cp_viscntver5;
	nr_dch1_viscntver6_r.regValue=IoReg_Read32(NR_DCH1_VisCntVer6_reg);
	scalerVIP_color_noise_mpeg_v_detect__VisCntVer[6]=nr_dch1_viscntver6_r.cp_viscntver6;
	nr_dch1_viscntver7_r.regValue=IoReg_Read32(NR_DCH1_VisCntVer7_reg);
	scalerVIP_color_noise_mpeg_v_detect__VisCntVer[7]=nr_dch1_viscntver7_r.cp_viscntver7;
	di_im_di_rtnr_control_r.regValue=IoReg_Read32(DI_IM_DI_RTNR_CONTROL_reg);
	if(di_im_di_rtnr_control_r.cp_rtnr_progressive==0){
		scalerVIP_color_noise_mpeg_v_detect__xheight=scalerVIP_color_noise_mpeg_v_detect__xheight<<1;
	}
	do{

		if(
			(scalerVIP_color_noise_mpeg_v_detect__z_scaling<0x800)
			||(!scalerVIP_color_noise_mpeg_v_detect__x_pipeline&&scalerVIP_color_noise_mpeg_v_detect__z_turn%3!=2)
		){
			for(i=2;i>=0;i--){
				scalerVIP_color_noise_mpeg_v_detect__amax1p[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]=0;
				scalerVIP_color_noise_mpeg_v_detect__a2[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]=0;
				scalerVIP_color_noise_mpeg_v_detect__a3[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]=0;
			}
			break;
		}
			/*
		if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x80)) {//MPEG_dummy, b8025550[24:31], bit31
				printk(
				KERN_INFO "\n[V_MPEG][vistver] %d %06x %06x %06x %06x %06x %06x %06x %06x[/vistver]"
				,scalerVIP_color_noise_mpeg_v_detect__xheight
				,scalerVIP_color_noise_mpeg_v_detect__VisCntVer[0]
				,scalerVIP_color_noise_mpeg_v_detect__VisCntVer[1]
				,scalerVIP_color_noise_mpeg_v_detect__VisCntVer[2]
				,scalerVIP_color_noise_mpeg_v_detect__VisCntVer[3]
				,scalerVIP_color_noise_mpeg_v_detect__VisCntVer[4]
				,scalerVIP_color_noise_mpeg_v_detect__VisCntVer[5]
				,scalerVIP_color_noise_mpeg_v_detect__VisCntVer[6]
				,scalerVIP_color_noise_mpeg_v_detect__VisCntVer[7]
			);
		}
			//*/
		scalerVIP_color_noise_mpeg_v_detect__y_max1p=0;
		z_max1=scalerVIP_color_noise_mpeg_v_detect__VisCntVer[0];
		z_max2=0;
		for(i=1;i<8;i++){
			z=scalerVIP_color_noise_mpeg_v_detect__VisCntVer[i];
			if(z>z_max1){
				z_max2=z_max1;
				scalerVIP_color_noise_mpeg_v_detect__y_max1p=i;
				z_max1=z;
			}
			else if(z>z_max2){
				z_max2=z;
			}
		}
		x2=z_max1-z_max2;//block effect
		x3=-z_max1-z_max2;//detail
		for(i=0;i<8;i++){
			x3=x3+scalerVIP_color_noise_mpeg_v_detect__VisCntVer[i];
		}
		for(i=2;i>0;i--){
			scalerVIP_color_noise_mpeg_v_detect__amax1p[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]=scalerVIP_color_noise_mpeg_v_detect__amax1p[i-1][scalerVIP_color_noise_mpeg_v_detect__z_turn];
			scalerVIP_color_noise_mpeg_v_detect__a2[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]=scalerVIP_color_noise_mpeg_v_detect__a2[i-1][scalerVIP_color_noise_mpeg_v_detect__z_turn];
			scalerVIP_color_noise_mpeg_v_detect__a3[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]=scalerVIP_color_noise_mpeg_v_detect__a3[i-1][scalerVIP_color_noise_mpeg_v_detect__z_turn];
		}
		x2=(x2*1920/scalerVIP_color_noise_mpeg_v_detect__xwidth*1080/scalerVIP_color_noise_mpeg_v_detect__xheight)|0;
		x3=(x3*320/scalerVIP_color_noise_mpeg_v_detect__xwidth*1080/scalerVIP_color_noise_mpeg_v_detect__xheight)|0;// 320 = 1920 / 6
		scalerVIP_color_noise_mpeg_v_detect__amax1p[0][scalerVIP_color_noise_mpeg_v_detect__z_turn]=scalerVIP_color_noise_mpeg_v_detect__y_max1p;
		scalerVIP_color_noise_mpeg_v_detect__a2[0][scalerVIP_color_noise_mpeg_v_detect__z_turn]=x2;
		scalerVIP_color_noise_mpeg_v_detect__a3[0][scalerVIP_color_noise_mpeg_v_detect__z_turn]=x3;
			/*
			printk(
				KERN_EMERG "\n[mpegnr_v] %d %d %d %d %d %d %d[/mpegnr_v]",
				scalerVIP_color_noise_mpeg_v_detect__z_turn,
				scalerVIP_color_noise_mpeg_v_detect__y_turn,
				(scalerVIP_color_noise_mpeg_v_detect__z_turn!=scalerVIP_color_noise_mpeg_v_detect__y_turn?1:0)|(scalerVIP_color_noise_mpeg_v_detect__y_turn<9?2:0),
				scalerVIP_color_noise_mpeg_v_detect__z_scaling,
				x2,
				scalerVIP_color_noise_mpeg_v_detect__a2[1][scalerVIP_color_noise_mpeg_v_detect__y_turn],
				scalerVIP_color_noise_mpeg_v_detect__a2[scalerVIP_color_noise_mpeg_v_detect__y_turn>scalerVIP_color_noise_mpeg_v_detect__z_turn?2:0][scalerVIP_color_noise_mpeg_v_detect__y_turn]
			);
			//*/
		if(
			scalerVIP_color_noise_mpeg_v_detect__y_max1p!=scalerVIP_color_noise_mpeg_v_detect__amax1p[1][scalerVIP_color_noise_mpeg_v_detect__z_turn] ||
			scalerVIP_color_noise_mpeg_v_detect__y_max1p!=scalerVIP_color_noise_mpeg_v_detect__amax1p[2][scalerVIP_color_noise_mpeg_v_detect__z_turn]
		){
			if(scalerVIP_color_noise_mpeg_v_detect__y_turn==scalerVIP_color_noise_mpeg_v_detect__z_turn){
				scalerVIP_color_noise_mpeg_v_detect__yen=0;
				for(i=0;i<3;i++){
					scalerVIP_color_noise_mpeg_v_detect__a2[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]=0;
				}
			}
			break;
		}
		if(scalerVIP_color_noise_mpeg_v_detect__z_turn!=scalerVIP_color_noise_mpeg_v_detect__y_turn&&scalerVIP_color_noise_mpeg_v_detect__y_turn<9){
			if(
				x2<x3div+scalerVIP_color_noise_mpeg_v_detect__a2[1][scalerVIP_color_noise_mpeg_v_detect__y_turn]
				&&x2<x3div+scalerVIP_color_noise_mpeg_v_detect__a2[scalerVIP_color_noise_mpeg_v_detect__y_turn>scalerVIP_color_noise_mpeg_v_detect__z_turn?2:0][scalerVIP_color_noise_mpeg_v_detect__y_turn]
			){break;}
		}
		scalerVIP_color_noise_mpeg_v_detect__y_turn=scalerVIP_color_noise_mpeg_v_detect__z_turn;
		for(i=2;i>0;i--){
			if(x2>scalerVIP_color_noise_mpeg_v_detect__a2[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]){x2=scalerVIP_color_noise_mpeg_v_detect__a2[i][scalerVIP_color_noise_mpeg_v_detect__z_turn];}
			if(x3<scalerVIP_color_noise_mpeg_v_detect__a3[i][scalerVIP_color_noise_mpeg_v_detect__z_turn]){x3=scalerVIP_color_noise_mpeg_v_detect__a3[i][scalerVIP_color_noise_mpeg_v_detect__z_turn];}
		}
		if(y3L==y3R){
			scalerVIP_color_noise_mpeg_v_detect__yub=y3L;
		}else if(scalerVIP_color_noise_mpeg_v_detect__x3L==scalerVIP_color_noise_mpeg_v_detect__x3R){
			scalerVIP_color_noise_mpeg_v_detect__yub=(y3L+y3R)>>1;
		}else if(x3<=scalerVIP_color_noise_mpeg_v_detect__x3L){
			scalerVIP_color_noise_mpeg_v_detect__yub=y3L;
		}else if(x3>=scalerVIP_color_noise_mpeg_v_detect__x3R){
			scalerVIP_color_noise_mpeg_v_detect__yub=y3R;
		}else{
			// x3div=(abs_value(y3L-y3R)+1)>>1;
			int x3L_=((scalerVIP_color_noise_mpeg_v_detect__x3L+(x3div>>1))/x3div)|0;
			int x3R_=((scalerVIP_color_noise_mpeg_v_detect__x3R+(x3div>>1))/x3div)|0;
			int x3_=((x3+(x3div>>1))/x3div)|0;
			scalerVIP_color_noise_mpeg_v_detect__yub=(y3L*(x3R_-x3_)+y3R*(x3_-x3L_)+((x3R_-x3L_)>>1))/(x3R_-x3L_);
		}
		if(y2L==y2R){
			scalerVIP_color_noise_mpeg_v_detect__yub2=y2L;
		}else if(x2L==x2R){
			scalerVIP_color_noise_mpeg_v_detect__yub2=(y2L+y2R)>>1;
		}else if(x2<=x2L){
			scalerVIP_color_noise_mpeg_v_detect__yub2=y2L;
		}else if(x2>=x2R){
			scalerVIP_color_noise_mpeg_v_detect__yub2=y2R;
		}else{
			x2div=(abs_value(y2L-y2R)+1)>>1;
			x2L_=((x2L+(x2div>>1))/x2div)|0;
			x2R_=((x2R+(x2div>>1))/x2div)|0;
			x2_=((x2+(x2div>>1))/x2div)|0;
			scalerVIP_color_noise_mpeg_v_detect__yub2=(y2L*(x2R_-x2_)+y2R*(x2_-x2L_)+((x2R_-x2L_)>>1))/(x2R_-x2L_);
		}
		scalerVIP_color_noise_mpeg_v_detect__yen=1;
	}while(false);
	scalerVIP_color_noise_mpeg_v_detect_y=(scalerVIP_color_noise_mpeg_v_detect__yub*scalerVIP_color_noise_mpeg_v_detect__yub2)>>8;
}

int scalerVIP_color_noise_mpeg_h_apply__x_14641=0x1100;
int scalerVIP_color_noise_mpeg_h_apply__x_24442=0x1400;

#if 1//mpegnr_h_170705h
void scalerVIP_color_noise_mpeg_apply(void)
{

	mpegnr_ich1_blend_nr_hor_step_RBUS	mpegnr_ich1_blend_nr_hor_step_r	;
	mpegnr_ich1_mpegnr1_RBUS	mpegnr_ich1_mpegnr1_r	;
	mpegnr_ich1_mpegnr2_RBUS	mpegnr_ich1_mpegnr2_r	;
	mpegnr_ich1_mpegnr_ub_delta1_RBUS	mpegnr_ich1_mpegnr_ub_delta1_r	;
	mpegnr_ich1_mpegnr_ub_delta2_RBUS	mpegnr_ich1_mpegnr_ub_delta2_r	;
	mpegnr_ich1_det_hist_hor_step_RBUS	mpegnr_ich1_det_hist_hor_step_r	;
	nr_dch1_mpegnr1_RBUS	nr_dch1_mpegnr1_r;
	nr_dch1_mpegnr1_RBUS nr_dch1_mpegnr1_q;
	static int cnt=0;



	mpegnr_ich1_blend_nr_hor_step_r	.regValue=IoReg_Read32(	MPEGNR_ICH1_blend_NR_Hor_step_reg);
	mpegnr_ich1_mpegnr1_r	.regValue=IoReg_Read32(	MPEGNR_ICH1_MPEGNR1_reg);
	mpegnr_ich1_mpegnr2_r	.regValue=IoReg_Read32(	MPEGNR_ICH1_MPEGNR2_reg);
	mpegnr_ich1_mpegnr_ub_delta1_r	.regValue=IoReg_Read32(	MPEGNR_ICH1_MPEGNR_UB_delta1_reg);
	mpegnr_ich1_mpegnr_ub_delta2_r	.regValue=IoReg_Read32(	MPEGNR_ICH1_MPEGNR_UB_delta2_reg);
	mpegnr_ich1_det_hist_hor_step_r	.regValue=IoReg_Read32(	MPEGNR_ICH1_det_Hist_Hor_step_reg);

	nr_dch1_mpegnr1_r.regValue=IoReg_Read32(NR_DCH1_MPEGNR1_reg);

	//debug for resolution detector!if enable -> disable the H_MPEG resolution detector
	nr_dch1_mpegnr1_q.regValue=IoReg_Read32(NR_DCH1_MPEGNR1_reg);
	cnt++;

	// apply
	scalerVIP_color_noise_mpeg_h_detect__y_scaling=scalerVIP_color_noise_mpeg_h_detect__a_scaling[scalerVIP_color_noise_mpeg_h_detect__y_turn];
	if(
		scalerVIP_color_noise_mpeg_h_detect__a_scaling[scalerVIP_color_noise_mpeg_h_detect__z_turn]>=0x800
		&&(!scalerVIP_color_noise_mpeg_h_detect__x_pipeline||scalerVIP_color_noise_mpeg_h_detect__z_turn%3==2)
	){


		if(scalerVIP_color_noise_mpeg_h_detect__yen){// ||scalerVIP_color_noise_mpeg_h_detect__z_turn==scalerVIP_color_noise_mpeg_h_detect__y_turn
			if(scalerVIP_color_noise_mpeg_h_detect__x_requires_ver&&scalerVIP_color_noise_mpeg_detect_y>scalerVIP_color_noise_mpeg_v_detect_y){
				scalerVIP_color_noise_mpeg_detect_y=scalerVIP_color_noise_mpeg_v_detect_y;
			}
			mpegnr_ich1_mpegnr2_r.cp_mpegenable_x=1;
			mpegnr_ich1_blend_nr_hor_step_r.cp_mpghor_blend_xstep=scalerVIP_color_noise_mpeg_h_detect__y_scaling;
			mpegnr_ich1_mpegnr2_r.cp_mpgidx_x=scalerVIP_color_noise_mpeg_h_detect__amax1p[0][scalerVIP_color_noise_mpeg_h_detect__y_turn];
			mpegnr_ich1_mpegnr1_r.cp_mpgupperbound_x=scalerVIP_color_noise_mpeg_detect_y4;
			mpegnr_ich1_mpegnr_ub_delta2_r.cp_mpgub_delta3=scalerVIP_color_noise_mpeg_detect_y_delta3;
			mpegnr_ich1_mpegnr_ub_delta1_r.cp_mpgub_delta2=scalerVIP_color_noise_mpeg_detect_y4;

                                if(scalerVIP_color_noise_mpeg_h_detect__y_scaling ==12288)
                                        mpeg_ratio = 3;
                                else if(scalerVIP_color_noise_mpeg_h_detect__y_scaling ==8192)
                                        mpeg_ratio = 2;
                                else if(scalerVIP_color_noise_mpeg_h_detect__y_scaling ==4096)
                                        mpeg_ratio = 1;


			if(scalerVIP_color_noise_mpeg_h_detect__y_scaling<scalerVIP_color_noise_mpeg_h_apply__x_14641){
				mpegnr_ich1_mpegnr_ub_delta1_r.cp_mpgub_delta1=scalerVIP_color_noise_mpeg_detect_y4;
				mpegnr_ich1_mpegnr1_r.cp_mpgnr_filter_sel=0;
			}else{
				if(scalerVIP_color_noise_mpeg_h_detect__y_scaling<scalerVIP_color_noise_mpeg_h_apply__x_24442){
					mpegnr_ich1_mpegnr1_r.cp_mpgnr_filter_sel=2;
					mpegnr_ich1_mpegnr_ub_delta1_r.cp_mpgub_delta1=((scalerVIP_color_noise_mpeg_detect_y*5)/6)+(scalerVIP_color_noise_mpeg_detect_y4-scalerVIP_color_noise_mpeg_detect_y);
				}else{
					mpegnr_ich1_mpegnr1_r.cp_mpgnr_filter_sel=1;
					mpegnr_ich1_mpegnr_ub_delta1_r.cp_mpgub_delta1=(scalerVIP_color_noise_mpeg_detect_y*2/3)+(scalerVIP_color_noise_mpeg_detect_y4-scalerVIP_color_noise_mpeg_detect_y);
}
			}// todo : mpegai
		}
                else
                {
			mpegnr_ich1_mpegnr2_r.cp_mpegenable_x=0;

                        mpeg_ratio = 0;
		}


		if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
			printk(
				KERN_INFO "\n[apply_mpeg_detect_y]0x%x %d 0x%x[/apply_mpeg_detect_y]"
				,mpegnr_ich1_mpegnr1_r.cp_mpgupperbound_x
				,cnt
				,mpegnr_ich1_mpegnr1_r.regValue
				);
		}

		// write to registers
		IoReg_Write32(	MPEGNR_ICH1_blend_NR_Hor_step_reg,	mpegnr_ich1_blend_nr_hor_step_r.regValue);
		IoReg_Write32(	MPEGNR_ICH1_MPEGNR1_reg	,	mpegnr_ich1_mpegnr1_r.regValue);
		IoReg_Write32(	MPEGNR_ICH1_MPEGNR2_reg	,	mpegnr_ich1_mpegnr2_r.regValue);
		IoReg_Write32(	MPEGNR_ICH1_MPEGNR_UB_delta1_reg,	mpegnr_ich1_mpegnr_ub_delta1_r.regValue);
		IoReg_Write32(	MPEGNR_ICH1_MPEGNR_UB_delta2_reg,	mpegnr_ich1_mpegnr_ub_delta2_r.regValue);
			/*
			printk(
				KERN_EMERG "\n[mpegnr_v]jin %08x %08x %08x %08x[/mpegnr_v]",
				nr_dch1_blend_nr_ver_step_r	.regValue,
				nr_dch1_mpegnr1_r	.regValue,
				nr_dch1_mpegnr_ub_delta1_r	.regValue,
				nr_dch1_mpegnr_ub_delta2_r	.regValue
			);
			//*/
}


	if(mpegnr_ich1_mpegnr1_r.cp_mpgupperbound_x != scalerVIP_color_noise_mpeg_detect_y){

		if((Start_Print.Mpeg_Nr==TRUE) || (nr_dch1_mpegnr1_r.cp_mpglowerbound&0x40)) {//MPEG_dummy, b8025550[24:31], bit30
		printk(
			KERN_INFO "\n[apply_mpeg_detect_y]%x %x[/apply_mpeg_detect_y]"
			,mpegnr_ich1_mpegnr1_r.cp_mpgupperbound_x
			,scalerVIP_color_noise_mpeg_detect_y
			);
		}

	}
	// next frame setting
	{
		int y_next_scaling=scalerVIP_color_noise_mpeg_h_detect__a_scaling[(scalerVIP_color_noise_mpeg_h_detect__z_turn+(scalerVIP_color_noise_mpeg_h_detect__x_pipeline?2:0))%9];
		if(y_next_scaling>=0x800){
			if((nr_dch1_mpegnr1_q.cp_mpglowerbound&0x10)){//MPEG_dummy, b8025550[24:31], bit29
				mpegnr_ich1_det_hist_hor_step_r.cp_histhor_det_xstep=0x1000;
			}else{
				mpegnr_ich1_det_hist_hor_step_r.cp_histhor_det_xstep=y_next_scaling;
			}
			IoReg_Write32(	MPEGNR_ICH1_det_Hist_Hor_step_reg	,	mpegnr_ich1_det_hist_hor_step_r	.regValue);
		}
	}
	// db_apply
	IoReg_SetBits(MPEGNR_ICH1_MPEGNR_DB_CTRL_reg, MPEGNR_ICH1_MPEGNR_DB_CTRL_mpegnr_db_apply_mask); /* DB apply */
			/*
			printk(
				KERN_EMERG "\n[mpegnr_v]jin %d %d %d %d %d[/mpegnr_v]",
				mpegnr_ich1_mpegnr2_r.cp_mpegenable_x,
				scalerVIP_color_noise_mpeg_h_detect__z_turn,
				scalerVIP_color_noise_mpeg_h_detect__y_turn,
				scalerVIP_color_noise_mpeg_h_detect__yub,
				scalerVIP_color_noise_mpeg_h_detect__yub2
			);
			//*/
}
#else

unsigned int RTNR_MAD_count_Y3_count=0;
unsigned int MCNR_GMV_Ratio = 0;
void scalerVIP_color_noise_mpeg_apply(void)
{
	unsigned int		counter_ratio_avg =0 ;
	unsigned int		counter_ratio_th =0;
	unsigned int		MpegRatio_th =0;
	unsigned int		mpgupperbound_x_rate = 0;
	unsigned char 		mpgupperbound_x_gain =0;
	mpegnr_ich1_mpegnr2_RBUS ich1_MPEGNR2_reg;
	static unsigned int MpegRatioSum_Max = 0;
	static unsigned char cp_mpegenable_x_temp = 0,cp_mpegenable_x_temp_keep = 0;
	static signed char flag_cp_mpegenable_x=0;
	unsigned char PQA_table_select = scaler_GetShare_Memory_system_setting_info_Struct()->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_table_select;
	unsigned int *pPQA_InputMAD_MPEG = &(scaler_GetShare_Memory_VIP_TABLE_Struct()->PQA_Input_Table[PQA_table_select][I_MPEG_MAD][0]);

	nr_dch1_local_var1_RBUS dch1_local_var1_reg;
	dch1_local_var1_reg.regValue = scaler_rtd_inl(NR_DCH1_Local_Var1_reg);
	ich1_MPEGNR2_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_MPEGNR2_reg);

	if( Field_Count==MpegPeriod )
	{
		//flora, add for Sirius non8x8 detector/////////////////////////////////////////////////////////
		switch((RPC_system_info_structure_table->VIP_source))
		{
			case VIP_QUALITY_HDMI_4k2kI_30:
			case VIP_QUALITY_HDMI_4k2kP_30:
			case VIP_QUALITY_HDMI_4k2kP_60:
			case VIP_QUALITY_DTV_4k2kI_30:
			case VIP_QUALITY_DTV_4k2kP_30:
			case VIP_QUALITY_DTV_4k2kP_60:
			case VIP_QUALITY_PVR_4k2kI_30:
			case VIP_QUALITY_PVR_4k2kP_30:
			case VIP_QUALITY_PVR_4k2kP_60:
				mpgupperbound_x_gain =1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1000;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=120;
				else
					MpegRatio_th=100;
			break;

			case VIP_QUALITY_HDMI_720P:
			case VIP_QUALITY_YPbPr_720P:
			case VIP_QUALITY_DTV_720P:
			case VIP_QUALITY_PVR_720P:
				mpgupperbound_x_gain =1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1c71;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=96;
				else
					MpegRatio_th=80;
			break;
			case VIP_QUALITY_HDMI_1080I:
			case VIP_QUALITY_HDMI_1080P:
			case VIP_QUALITY_YPbPr_1080I:
			case VIP_QUALITY_YPbPr_1080P:
			case VIP_QUALITY_PVR_1080I:
			case VIP_QUALITY_PVR_1080P:
				mpgupperbound_x_gain =1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1000;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=120;
				else
					MpegRatio_th=100;
			break;
			case VIP_QUALITY_DTV_1080I:
			case VIP_QUALITY_DTV_1080P:
				mpgupperbound_x_gain =1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1000;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=340;
				else
					MpegRatio_th=330;
			break;
			case VIP_QUALITY_YPbPr_480I:
			case VIP_QUALITY_YPbPr_576I:
			case VIP_QUALITY_HDMI_480I:
			case VIP_QUALITY_HDMI_576I:

				mpgupperbound_x_gain = 1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1000;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=96;
				else
					MpegRatio_th=70;
				break;
			case VIP_QUALITY_YPbPr_480P:
			case VIP_QUALITY_YPbPr_576P:
			case VIP_QUALITY_HDMI_480P:
			case VIP_QUALITY_HDMI_576P:
				mpgupperbound_x_gain =1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1000;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=160;
				else
					MpegRatio_th=140;
			break;

			case VIP_QUALITY_DTV_480P:
			case VIP_QUALITY_DTV_576P:
			case VIP_QUALITY_PVR_480P:
			case VIP_QUALITY_PVR_576P:
				mpgupperbound_x_gain =1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1000;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=160;
				else
					MpegRatio_th=140;
			break;

			case VIP_QUALITY_DTV_480I:
			case VIP_QUALITY_DTV_576I:
			case VIP_QUALITY_PVR_480I:
			case VIP_QUALITY_PVR_576I:

				mpgupperbound_x_gain =1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1000;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=96;
				else
					MpegRatio_th=80;
				break;

			case VIP_QUALITY_CVBS_NTSC:
			case VIP_QUALITY_CVBS_PAL:

				mpgupperbound_x_gain =1;
				XSTEP_NUM=1;
				array_xstep[0]=0x1000;
				if(flag_cp_mpegenable_x==0)
					MpegRatio_th=80;
				else
					MpegRatio_th=75;

				break;

			default:
				mpgupperbound_x_gain =1;
				ich1_MPEGNR2_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_MPEGNR2_reg);
				ich1_MPEGNR2_reg.cp_mpegenable_x = 0;
				scaler_rtd_outl(MPEGNR_ICH1_MPEGNR2_reg, ich1_MPEGNR2_reg.regValue);
				return;
				break;

		}

		//debug for resolution detector!if enable -> disable the H_MPEG resolution detector
		nr_dch1_mpegnr1_RBUS nr_dch1_mpegnr1_q;
		nr_dch1_mpegnr1_q.regValue=IoReg_Read32(NR_DCH1_MPEGNR1_reg);
		if((nr_dch1_mpegnr1_q.cp_mpglowerbound&0x10))//MPEG_dummy, b8025550[24:31], bit28
			XSTEP_NUM = 1;

		xstep_idx_apply=xstep_idx_detect;
		xstep_idx_detect++;
		if(xstep_idx_detect>=XSTEP_NUM)
			xstep_idx_detect=0;

		mpegnr_ich1_det_hist_hor_step_RBUS ich1_det_hist_hor_step_reg;
		ich1_det_hist_hor_step_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_det_Hist_Hor_step_reg);
		ich1_det_hist_hor_step_reg.cp_histhor_det_xstep=array_xstep[xstep_idx_detect];
		scaler_rtd_outl(MPEGNR_ICH1_det_Hist_Hor_step_reg, ich1_det_hist_hor_step_reg.regValue);

		//threshold for center diff
		mpegnr_ich1_det_hist_hor_thd_RBUS ich1_det_hist_hor_thd_reg;
		ich1_det_hist_hor_thd_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_det_Hist_Hor_thd_reg);
		ich1_det_hist_hor_thd_reg.cp_histhor_diff_th_high=0xf0;
		if((system_info_structure_table->Input_src_Type == _SRC_HDMI)&&array_xstep[xstep_idx_detect]==4096)
			ich1_det_hist_hor_thd_reg.cp_histhor_diff_th_low=10;
		else
			ich1_det_hist_hor_thd_reg.cp_histhor_diff_th_low=1;
		scaler_rtd_outl(MPEGNR_ICH1_det_Hist_Hor_thd_reg, ich1_det_hist_hor_thd_reg.regValue);

		////////////////////////////////////////////////////////////////////////////////////////////

		if(MpegRatioSum_Count!=0)
		{
			MpegRatio_ave=(MpegRatioSum)/MpegRatioSum_Count;
			MpegCounter_H_ave = MpegCounter_H/MpegRatioSum_Count;
			counter_ratio_avg = counter_ratio_sum/MpegRatioSum_Count;
		}

		if((Start_Print.Mpeg_Nr==TRUE)||((nr_dch1_mpegnr1_q.cp_mpglowerbound&0x40))) { //MPEG_dummy, b8025550[24:31], bit30
				printk(KERN_INFO "\n=======Mpeg info by Flora================================\n");
				printk(KERN_INFO "MAD_motion_status = %d\n", SmartPic_clue->MAD_motion_status);
				printk(KERN_INFO "MpegRatio_ave=%d	MpegRatio_th=%d, gain=%d\n", MpegRatio_ave, MpegRatio_th,mpgupperbound_x_gain);
				printk(KERN_INFO "counter_ratio_avg=%d	counter_ratio_th=%d\n", counter_ratio_avg, counter_ratio_th);
				printk(KERN_INFO "MpgIdx_X_arr[0]=%d	MpgIdx_X_arr[1]=%d MpgIdx_X_arr[2]=%d\n", MpgIdx_X_arr[0], MpgIdx_X_arr[1],MpgIdx_X_arr[2]);
		}


		if( (MpegRatio_ave>=MpegRatio_th) && (counter_ratio_avg>=counter_ratio_th) &&
				(MpgIdx_X_arr[0]==MpgIdx_X_arr[1]) && (MpgIdx_X_arr[1]==MpgIdx_X_arr[2]) ) {

			NL_mpg=(MpegRatio_ave*3/2-64)>>6;
			if(NL_mpg>10)
				NL_mpg=10;

			if(DynamicOptimizeSystem[12] || scalerVIP_DI_MiddleWare_GetStatus(STATUS_HMC))//LG boat or no.107
				NL_mpg=2;

			if(Start_Print.Mpeg_Nr==TRUE)
			{
				printk(KERN_INFO "NL_mpg=%d\n", NL_mpg);
				printk(KERN_INFO "MpegRatio_ave=	%d MpegRatioSum_Max=%d\n", MpegRatio_ave, MpegRatioSum_Max);
				printk(KERN_INFO "TableNR_MPEGNR_H=	%d scalerVip_mpegNR=%d\n", TableNR_MPEGNR_H, scalerVip_mpegNR);
				printk(KERN_INFO "vip_src=%d Y[1]=%d,Y[2]=%d,sat[0]=%d\n", system_info_structure_table->VIP_source, Y_hist_ratio[1], Y_hist_ratio[2], sat_hist_ratio[0]);
			}

			/* exclude artificial pattern in HDMI 1080i*/
			if ((RPC_system_info_structure_table->VIP_source == VIP_QUALITY_HDMI_1080I) && ((Y_hist_ratio[1] + Y_hist_ratio[2]) > 800)
				&& (sat_hist_ratio[0] > 700))
				NL_mpg = 0;

			if(NL_mpg>=2 && MpegRatio_ave>=MpegRatioSum_Max)
			{
				MpegRatioSum_Max = MpegRatio_ave;
				cp_mpegenable_x_temp = 1;
			}else if(NL_mpg>=1){
				cp_mpegenable_x_temp_keep = 1;
			}
		}
		else
		{
			NL_mpg=0;
		}
		if(xstep_idx_detect == 0)		//Field_Count = MpegPeriod*XSTEP_NUM
		{
			mpegnr_ich1_mpegnr1_RBUS ich1_MPEGNR1_reg;
			ich1_MPEGNR1_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_MPEGNR1_reg);

			if(MpegCounter_H_ave<=2048)
				mpgupperbound_x_rate = 0;
			else if(MpegCounter_H_ave>=4096)
				mpgupperbound_x_rate = 256;
			else
				mpgupperbound_x_rate = 256 - ((4096-MpegCounter_H_ave)>>3);

			mpgupperbound_x_rate *= mpgupperbound_x_gain;

			if((cp_mpegenable_x_temp == 1) || ((DynamicOptimizeSystem[5]==1)||(DynamicOptimizeSystem[12]==1)||(DynamicOptimizeSystem[23]==1)||(DynamicOptimizeSystem[COLOR_HUE_HISTOGRAM_LEVEL]==1)))
			{
				ich1_MPEGNR2_reg.cp_mpegenable_x = 1;
				flag_cp_mpegenable_x++;
				if(flag_cp_mpegenable_x>5)
					flag_cp_mpegenable_x=5;
				ich1_MPEGNR1_reg.cp_mpgupperbound_x = (35 * mpgupperbound_x_rate)>>8;
			}
			else
			{

				//ich1_MPEGNR2_reg.cp_mpegenable_x = 0;
				if(cp_mpegenable_x_temp_keep == 0){
					flag_cp_mpegenable_x--;
				}
				if(flag_cp_mpegenable_x<=0)
					flag_cp_mpegenable_x=0;

				ich1_MPEGNR2_reg.cp_mpegenable_x = 1;

				MCNR_GMV_Ratio = 100 - scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio();//MCNR_GMV_Ratio : 100 -> 0 ( still -> motion )
				if(RTNR_MAD_count_Y3_count > (RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio)){
					RTNR_MAD_count_Y3_count = RTNR_MAD_count_Y3_count - (((RTNR_MAD_count_Y3_count - (RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio))>>3) + 1);
				}
				else if(((RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio) > (RTNR_MAD_count_Y3_count+10))) {
					RTNR_MAD_count_Y3_count = RTNR_MAD_count_Y3_count + ((((RTNR_MAD_count_Y3_avg+MCNR_GMV_Ratio) - RTNR_MAD_count_Y3_count)>>3) + 1) ;
				}

				if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L00])
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = 0;
				else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L01])
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = (5 * mpgupperbound_x_rate)>>8;
				else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L02])
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = (10 * mpgupperbound_x_rate)>>8;
				else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L03])
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = (15 * mpgupperbound_x_rate)>>8;
				else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L04])
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = (20 * mpgupperbound_x_rate)>>8;
				else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L05])
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = (25 * mpgupperbound_x_rate)>>8;
				else if(RTNR_MAD_count_Y3_count<pPQA_InputMAD_MPEG[PQA_I_L06])
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = (30 * mpgupperbound_x_rate)>>8;
				else
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = (35 * mpgupperbound_x_rate)>>8;

				if(flag_cp_mpegenable_x >0)
					ich1_MPEGNR1_reg.cp_mpgupperbound_x = (35 * mpgupperbound_x_rate)>>8;



			}
			scalerVIP_color_noise_mpeg_detect_y=ich1_MPEGNR1_reg.cp_mpgupperbound_x;
			scaler_rtd_outl(MPEGNR_ICH1_MPEGNR1_reg, ich1_MPEGNR1_reg.regValue);
			cp_mpegenable_x_temp = 0;
			cp_mpegenable_x_temp_keep = 0;
			MpegRatioSum_Max = 0;
		}

		ich1_MPEGNR2_reg.cp_mpgidx_x=MpgIdx_X;

#if 1
	if((Start_Print.Mpeg_Nr==TRUE)||((nr_dch1_mpegnr1_q.cp_mpglowerbound&0x40))) { //MPEG_dummy, b8025550[24:31], bit30
		if(ich1_MPEGNR2_reg.cp_mpegenable_x==1) {
			printk(KERN_INFO "o------MPEG NR Enable-------------------------------------------o\n");
			printk(KERN_INFO "o---counter_ratio_avg = %d, xstep_idx_detect=%d, MpegCounter_H_ave=%d  ---o\n", counter_ratio_avg, xstep_idx_detect, MpegCounter_H_ave);
			printk(KERN_INFO "o---MpegRatio_ave = %d, MpegRatioSum = %d, MpegRatioSum_Count = %d\n", MpegRatio_ave, MpegRatioSum, MpegRatioSum_Count);
			printk(KERN_INFO "o---Mpeg_level_sum = %d, mpgupperbound_x_rate = %d----o\n", (scalerVip_mpegNR+TableNR_MPEGNR_H+TableNR_MPEGNR_V), mpgupperbound_x_rate);
			printk(KERN_INFO "o---scalerVip_mpegNR=%d,TableNR_MPEGNR_H=%d,TableNR_MPEGNR_V=%d---o\n",scalerVip_mpegNR,TableNR_MPEGNR_H,TableNR_MPEGNR_V);
			printk(KERN_INFO "o---NL_mpg = %d, cp_mpgidx_x = %d, cp_mpegenable_x=%d ---o\n", NL_mpg, ich1_MPEGNR2_reg.cp_mpgidx_x, ich1_MPEGNR2_reg.cp_mpegenable_x);
			printk(KERN_INFO "o---cp_mpegresultweight_x=%d, cp_mpgdcgain=%d ---o\n", ich1_MPEGNR2_reg.cp_mpegresultweight_x, ich1_MPEGNR2_reg.cp_mpgdcgain);
			printk(KERN_INFO "o---GMV_Ratio=%d, %d, %d ---o\n",  scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),RTNR_MAD_count_Y3_avg , RTNR_MAD_count_Y3_count);
			printk(KERN_INFO "o----------------------------------------------------------------------------------o\n");
		} else {
			// oliver-
			printk(KERN_INFO "o---scalerVip_mpegNR_H offoffoffoffoffoffoffoffoffoff------o\n");
			printk(KERN_INFO "o---scalerVip_mpegNR=%d,TableNR_MPEGNR_H=%d,TableNR_MPEGNR_V=%d---o\n",scalerVip_mpegNR,TableNR_MPEGNR_H,TableNR_MPEGNR_V);
		}
		}
#endif

		////scalervip_printf(AutoMADebugMsg,"ooo---Scaler_InputSrcGetMainChType()=%d---ooo\n",Scaler_InputSrcGetMainChType());
		////scalervip_printf(AutoMADebugMsg,"ooo---drvif_module_vdc_NoiseStatus_isr=%d---ooo\n",drvif_module_vdc_NoiseStatus_isr());

		if((nr_dch1_mpegnr1_q.cp_mpglowerbound&1)!=1){
		scaler_rtd_outl(MPEGNR_ICH1_MPEGNR2_reg, ich1_MPEGNR2_reg.regValue);
		}

		IoReg_SetBits(NR_SNR_DB_CTRL_reg, NR_SNR_DB_CTRL_snr_db_apply_mask); /* DB apply */

		NL_mpg_sharp = NL_mpg;


		counter_ratio_sum =0;
		MpegRatioSum=0;
		MpegCounter_H = 0;
		MpegRatioSum_Count=0;
		Field_Count=0;
		NL_mpg=0;
    }

}
#endif

void scalerVIP_color_noise_mpeg_v_apply(void){

	nr_dch1_det_vist_hor_step_RBUS	nr_dch1_det_vist_hor_step_r	;
	nr_dch1_blend_nr_ver_step_RBUS	nr_dch1_blend_nr_ver_step_r	;
	nr_dch1_mpegnr1_RBUS	nr_dch1_mpegnr1_r	;
	nr_dch1_mpegnr_ub_delta1_RBUS	nr_dch1_mpegnr_ub_delta1_r	;
	nr_dch1_mpegnr_ub_delta2_RBUS	nr_dch1_mpegnr_ub_delta2_r	;
	nr_dch1_mpegnr1_RBUS nr_dch1_mpegnr1_q;


	nr_dch1_det_vist_hor_step_r	.regValue=IoReg_Read32(	NR_DCH1_det_Vist_Hor_step_reg	);
	nr_dch1_blend_nr_ver_step_r	.regValue=IoReg_Read32(	NR_DCH1_blend_NR_Ver_step_reg	);
	nr_dch1_mpegnr1_r	.regValue=IoReg_Read32(	NR_DCH1_MPEGNR1_reg	);
	nr_dch1_mpegnr_ub_delta1_r	.regValue=IoReg_Read32(	NR_DCH1_MPEGNR_UB_delta1_reg	);
	nr_dch1_mpegnr_ub_delta2_r	.regValue=IoReg_Read32(	NR_DCH1_MPEGNR_UB_delta2_reg	);
	// apply
	scalerVIP_color_noise_mpeg_v_detect__y_scaling=scalerVIP_color_noise_mpeg_v_detect__a_scaling[scalerVIP_color_noise_mpeg_v_detect__y_turn];
	//debug for resolution detector!if enable -> disable the V_MPEG resolution detector
	nr_dch1_mpegnr1_q.regValue=IoReg_Read32(NR_DCH1_MPEGNR1_reg);

	if(
		scalerVIP_color_noise_mpeg_v_detect__a_scaling[scalerVIP_color_noise_mpeg_v_detect__z_turn]>=0x800
		&&(!scalerVIP_color_noise_mpeg_v_detect__x_pipeline||scalerVIP_color_noise_mpeg_v_detect__z_turn%3==2)
	){
		if(scalerVIP_color_noise_mpeg_v_detect__yen){// ||scalerVIP_color_noise_mpeg_v_detect__z_turn==scalerVIP_color_noise_mpeg_v_detect__y_turn
			if(scalerVIP_color_noise_mpeg_v_detect__x_requires_hor&&scalerVIP_color_noise_mpeg_v_detect_y>scalerVIP_color_noise_mpeg_detect_y){
				scalerVIP_color_noise_mpeg_v_detect_y=scalerVIP_color_noise_mpeg_detect_y;
			}
			nr_dch1_mpegnr1_r.cp_mpegenable_y_y=1;
			nr_dch1_blend_nr_ver_step_r.cp_mpgver_blend_ystep=scalerVIP_color_noise_mpeg_v_detect__y_scaling;
			nr_dch1_mpegnr1_r.cp_mpgidx_y=scalerVIP_color_noise_mpeg_v_detect__amax1p[0][scalerVIP_color_noise_mpeg_v_detect__y_turn];
			nr_dch1_mpegnr1_r.cp_mpgupperbound=scalerVIP_color_noise_mpeg_v_detect_y>>0;// K5L changed to 10bits
			nr_dch1_mpegnr_ub_delta2_r.cp_mpgub_delta3=nr_dch1_mpegnr1_r.cp_mpgupperbound;
			nr_dch1_mpegnr_ub_delta1_r.cp_mpgub_delta2=nr_dch1_mpegnr1_r.cp_mpgupperbound;
			if(scalerVIP_color_noise_mpeg_v_detect__y_scaling<0x1800){
				nr_dch1_mpegnr_ub_delta1_r.cp_mpgub_delta1=nr_dch1_mpegnr1_r.cp_mpgupperbound;
				if(scalerVIP_color_noise_mpeg_v_detect__y_scaling<0x1000){
					nr_dch1_mpegnr1_r.cp_mpglpmode=1;
				}else{
					nr_dch1_mpegnr1_r.cp_mpglpmode=0;
				}
			}else{
				if(scalerVIP_color_noise_mpeg_v_detect__y_scaling<0x2000){
					nr_dch1_mpegnr1_r.cp_mpglpmode=3;
					nr_dch1_mpegnr_ub_delta1_r.cp_mpgub_delta1=((scalerVIP_color_noise_mpeg_v_detect_y*5)/3)>>3;
				}else{
					nr_dch1_mpegnr1_r.cp_mpglpmode=2;
					nr_dch1_mpegnr_ub_delta1_r.cp_mpgub_delta1=(scalerVIP_color_noise_mpeg_v_detect_y/3)>>1;
				}
			}// todo : mpegai
		}else{
			nr_dch1_mpegnr1_r.cp_mpegenable_y_y=0;
		}
		// write to registers
		IoReg_Write32(	NR_DCH1_blend_NR_Ver_step_reg	,	nr_dch1_blend_nr_ver_step_r	.regValue);
		IoReg_Write32(	NR_DCH1_MPEGNR1_reg	,	nr_dch1_mpegnr1_r	.regValue);
		IoReg_Write32(	NR_DCH1_MPEGNR_UB_delta1_reg	,	nr_dch1_mpegnr_ub_delta1_r	.regValue);
		IoReg_Write32(	NR_DCH1_MPEGNR_UB_delta2_reg	,	nr_dch1_mpegnr_ub_delta2_r	.regValue);
			/*
			printk(
				KERN_EMERG "\n[mpegnr_v]jin %08x %08x %08x %08x[/mpegnr_v]",
				nr_dch1_blend_nr_ver_step_r	.regValue,
				nr_dch1_mpegnr1_r	.regValue,
				nr_dch1_mpegnr_ub_delta1_r	.regValue,
				nr_dch1_mpegnr_ub_delta2_r	.regValue
			);
			//*/
	}
	// next frame setting
	{
		int y_next_scaling=scalerVIP_color_noise_mpeg_v_detect__a_scaling[(scalerVIP_color_noise_mpeg_v_detect__z_turn+(scalerVIP_color_noise_mpeg_v_detect__x_pipeline?2:0))%9];
		if(y_next_scaling>=0x800){
			if((nr_dch1_mpegnr1_q.cp_mpglowerbound&0x20)){//MPEG_dummy, b8025550[24:31], bit29
				nr_dch1_det_vist_hor_step_r.cp_visthor_det_ystep=0x1000;
			} else {
			nr_dch1_det_vist_hor_step_r.cp_visthor_det_ystep=y_next_scaling;
			}

			IoReg_Write32(	NR_DCH1_det_Vist_Hor_step_reg	,	nr_dch1_det_vist_hor_step_r	.regValue);
		}
	}
	// db_apply
	IoReg_SetBits(NR_V_MPEGNR_DB_CTRL_reg, NR_V_MPEGNR_DB_CTRL_mpegnr_db_apply_mask); /* DB apply */
			/*
			printk(
				KERN_EMERG "\n[mpegnr_v]jin %d %d %d %d %d[/mpegnr_v]",
				nr_dch1_mpegnr1_r.cp_mpegenable_y_y,
				scalerVIP_color_noise_mpeg_v_detect__z_turn,
				scalerVIP_color_noise_mpeg_v_detect__y_turn,
				scalerVIP_color_noise_mpeg_v_detect__yub,
				scalerVIP_color_noise_mpeg_v_detect__yub2
			);
			//*/
}
//============================Elsie 20130425: color mpeg end=====================

#if 0
void scalerVIP_color_mpeg_data_reset(unsigned long arg) {
	NoiseSum_spatial=0;
	MpegRatioSum=0;
	MpegRatioSum_Count=0;
	ContainStill_Count=0;
	Field_Count=0;

	//flora, add for Sirius non8x8 detector
	XSTEP_NUM= arg;
	/*
	ROSPrintf("1.[mpeg_data_reset]ucMode_Curr=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].ucMode_Curr);
	ROSPrintf("1.[mpeg_data_reset]XSTEP_NUM=%d\n",XSTEP_NUM);
	*/
	xstep_idx_detect=0;
	xstep_idx_apply=0;
	mpegnr_ich1_det_hist_hor_step_RBUS ich1_det_hist_hor_step_reg;
	ich1_det_hist_hor_step_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_det_Hist_Hor_step_reg);
	ich1_det_hist_hor_step_reg.cp_histhor_det_xstep=array_xstep[0];
	scaler_rtd_outl(MPEGNR_ICH1_det_Hist_Hor_step_reg, ich1_det_hist_hor_step_reg.regValue);
}
#endif



//=========================== Pure Color Detection ===========================
unsigned char pure_color_detect(unsigned char channel, unsigned int width, unsigned int height)
{
	static int purecolor_weighting_buffer[32] = {0}; //buffer = 32 frames
	int weighting_gap = 0;
	unsigned char MainDCC_SC = (RPC_SmartPic_clue->SceneChange);
	unsigned int hist_sum;//, hue_hist_sum;
	unsigned int i;//, hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];
	unsigned int hist_sum_max=0;
	int max_index=0;//, hue_max_index=0;
	unsigned int pure_color_weighting_of_max_bin_ratio = 0;
	unsigned int pure_color_weighting_of_first_and_second_bin_ratio = 0;
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);


	hist_sum = 0;
	pure_color_weighting = 0;
	for(i = 0; i< (COLOR_HISTOGRAM_LEVEL - 1); i++) {
		hist_sum = reg_HistCnt[i]+reg_HistCnt[i+1];

		if(hist_sum>hist_sum_max) {
			max_index = i;
			hist_sum_max = hist_sum;
		}
	}

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Dcc_2==TRUE)) {
		ROSPrintf("====== pure_color_detect ========\n");
		ROSPrintf("hist_sum_max=%d \n",hist_sum_max);
		ROSPrintf("Total_HistCnt=%d \n",(SmartPic_clue->Hist_Y_Total_sum));
		ROSPrintf("((Total_HistCnt*31)>>5)=%d \n",(((SmartPic_clue->Hist_Y_Total_sum)*31)>>5));
		ROSPrintf("DCC_Histogram_Peak_White=%d \n",(SmartPic_clue->Hist_Peak_White_IRE_Value));
		ROSPrintf("Histogram_Mean_value=%d \n",(SmartPic_clue->Hist_Y_Mean_Value));
	}

	//if the highest 2 bins take higher percentage, higher pure color weighting will be set.

	if( (hist_sum_max > (((SmartPic_clue->Hist_Y_Total_sum)*31)>>5)) )
	{
		if(hist_sum_max >= ((SmartPic_clue->Hist_Y_Total_sum*127)>>7))//tolerence some noise
			pure_color_weighting_of_max_bin_ratio = 32;
		else if(hist_sum_max <= (((SmartPic_clue->Hist_Y_Total_sum)*31)>>5))
			pure_color_weighting_of_max_bin_ratio = 0;
		else if(hist_sum_max < ((SmartPic_clue->Hist_Y_Total_sum*127)>>7) && hist_sum_max > (((SmartPic_clue->Hist_Y_Total_sum)*31)>>5))
		{
			weighting_gap = (((SmartPic_clue->Hist_Y_Total_sum*127)>>7) - (((SmartPic_clue->Hist_Y_Total_sum)*31)>>5)) >> 5;

			for( i = 0; i < 32; i++)
			{
				if((((SmartPic_clue->Hist_Y_Total_sum)*31)>>5) + weighting_gap * i <= hist_sum_max
					&& (((SmartPic_clue->Hist_Y_Total_sum)*31)>>5) + weighting_gap * (i+1) > hist_sum_max)
				{
					pure_color_weighting_of_max_bin_ratio = i;
				}
				else if((((SmartPic_clue->Hist_Y_Total_sum)*31)>>5) + weighting_gap * (i+1) <= hist_sum_max)
					pure_color_weighting_of_max_bin_ratio = 32;
			}
		}
	}
	else
	{
		pure_color_weighting_of_max_bin_ratio = 0;
	}

	//if it enter the purecolor above and the highest two bins are closer, it means the 1 bins are not the noise(there are two Y histogram). Then, pure color weighting will be set lower.
	pure_color_weighting_of_first_and_second_bin_ratio = 0;
	if(hist_sum_max > (((SmartPic_clue->Hist_Y_Total_sum)*31)>>5))
	{
		if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Dcc_2==TRUE))
	{
			ROSPrintf("max_index = %d\n", max_index);
			ROSPrintf("reg_HistCnt[max_index] = %d\n", reg_HistCnt[max_index]);
			ROSPrintf("reg_HistCnt[max_index+1] = %d\n", reg_HistCnt[max_index+1]);
		}
		if(reg_HistCnt[max_index] > ((reg_HistCnt[max_index+1]) >> 1))
		{
			if(reg_HistCnt[max_index+1] == 0)
				pure_color_weighting_of_first_and_second_bin_ratio = 32;
			else
				pure_color_weighting_of_first_and_second_bin_ratio = (reg_HistCnt[max_index] / reg_HistCnt[max_index+1]);
		}
		else if(reg_HistCnt[max_index+1] >= ((reg_HistCnt[max_index]) >> 1))
		{
			if(reg_HistCnt[max_index] == 0)
				pure_color_weighting_of_first_and_second_bin_ratio = 32;
		else
				pure_color_weighting_of_first_and_second_bin_ratio = (reg_HistCnt[max_index+1] / reg_HistCnt[max_index]);
		}

		if(pure_color_weighting_of_first_and_second_bin_ratio >= 32)
			pure_color_weighting_of_first_and_second_bin_ratio = 32;
		else if(pure_color_weighting_of_first_and_second_bin_ratio <= 0)
			pure_color_weighting_of_first_and_second_bin_ratio = 0;
	}

	//combine two weighting above together
	pure_color_weighting = (pure_color_weighting_of_max_bin_ratio + pure_color_weighting_of_first_and_second_bin_ratio) >> 1;
	if(pure_color_weighting >= 32)
		pure_color_weighting = 32;
	else if (pure_color_weighting <= 0)
		pure_color_weighting = 0;

//20171005 hugh: for CVBS, there is some noise that will effect purecolor weighting and lead to flick
	if(MainDCC_SC == 0)
	{
		//update weighting buffer
		int tmp_value = 0;
		for(i = 0; i != 32; ++i)
		{
			tmp_value = purecolor_weighting_buffer[i];
			if(i < 31)
				purecolor_weighting_buffer[i] = purecolor_weighting_buffer[i+1];
			else// i=31
				purecolor_weighting_buffer[i] = pure_color_weighting;
		}

		for(i = 0; i != 32; ++i)
			pure_color_weighting +=  purecolor_weighting_buffer[i];
		pure_color_weighting = pure_color_weighting >> 5;
	}
	else
	{
		for(i = 0; i != 32; ++i)
			purecolor_weighting_buffer[i] = pure_color_weighting;
	}



	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Dcc_2==TRUE))
	{
		ROSPrintf("====== pure_color_detect ========\n");
		ROSPrintf("pure_color_weighting_of_max_bin_ratio=%d \n",pure_color_weighting_of_max_bin_ratio);
		ROSPrintf("pure_color_weighting_of_first_and_second_bin_ratio=%d \n",pure_color_weighting_of_first_and_second_bin_ratio);
		ROSPrintf("pure_color_weighting=%d \n",pure_color_weighting);
	}

	if(pure_color_weighting > 0)
		return 1;
	else
		return 0;

}


#ifdef ISR_SONY_DETECT_ENABLE
unsigned char pure_color_detect_Sony(unsigned char channel, unsigned int width, unsigned int height)
{
	unsigned int hist_sum;//, hue_hist_sum;
	unsigned int i;//, hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];
	unsigned int hist_sum_max=0;
	//unsigned int hue_hist_sum_max=0;
	int max_index=0;//, hue_max_index=0;
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);

	if(sat_hist_ratio[0]>850)
		return FALSE;

	hist_sum = 0;
	hist_sum_max=0;
	for(i = 0; i< COLOR_HUE_HISTOGRAM_LEVEL-1; i++)
	{
		hist_sum = hue_hist_ratio[i]+hue_hist_ratio[i+1];
		if(hist_sum>hist_sum_max)
		{
			max_index = i;
			hist_sum_max = hist_sum;
		}
	}
	if((hist_sum_max < 900))
		return FALSE;

	hist_sum_max=0;
	hist_sum = 0;
	for(i = 0; i< 31; i++)
	{
		hist_sum = reg_HistCnt[i]+reg_HistCnt[i+1];
		if(hist_sum>hist_sum_max)
		{
			max_index = i;
			hist_sum_max = hist_sum;
		}
	}

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Dcc_2==TRUE))
	{
		ROSPrintf("==== pure_color_detect_Sony======\n");
		ROSPrintf("hist_sum_max=%d \n",hist_sum_max);
		ROSPrintf("Total_HistCnt=%d \n",(SmartPic_clue->Hist_Y_Total_sum));
		ROSPrintf("((Total_HistCnt*15)>>4)=%d \n",(((SmartPic_clue->Hist_Y_Total_sum)*15)>>4));
	}

	//o------ judge the pure color ------o
	if( (hist_sum_max > (((SmartPic_clue->Hist_Y_Total_sum)*15)>>4)) )
		return 1;
	else
		return 0;

}
#endif

void skin_tone_Level_detect(unsigned char channel, unsigned int width, unsigned int height)
{
	unsigned int i;
	unsigned int Total_hue_hist_sum=0, Total_hue_hist_ratio;
	unsigned char max_index=0, secondindex=0;
	unsigned int hue_max_bin_cnt=0,hue_second_bin_cnt=0;
	unsigned char hue_max_bin_ratio=0,hue_second_bin_ratio=0;
	unsigned char hue_zero_bin_counter =0;

	unsigned int hue_his_sum_2_7=0, hue_his_ratio_2_7=0;

	unsigned short Y_his_max_ratio = 0 ;
	unsigned int Y_his_sum_12_18=0, Y_his_ratio_12_18=0;

	static unsigned int skin_tone_count=0;
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);


	for(i=12;i<=18;i++)
	{
		Y_his_sum_12_18+=reg_HistCnt[i];
	}

	Y_his_max_ratio = SmartPic_clue->Hist_Y_MAX_bin_ratio;// his max ration
	Y_his_ratio_12_18 = Y_his_sum_12_18*100/((SmartPic_clue->Hist_Y_Total_sum)+1);//his local ratio

	for(i=0;i<24;i++)
	{
		//Hue_His_Bin[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));

		Total_hue_hist_sum+= (SmartPic_clue->Hue_Main_His[i]); //total hue cnt

		if((SmartPic_clue->Hue_Main_His[i])==0)
			hue_zero_bin_counter++; //zero bin cnt

		if(hue_max_bin_cnt<=(SmartPic_clue->Hue_Main_His[i])) //decide max and second hue bin info
		{
			hue_second_bin_cnt = hue_max_bin_cnt;
			hue_max_bin_cnt = (SmartPic_clue->Hue_Main_His[i]);
			max_index=i;
		}
		else if(hue_second_bin_cnt<=(SmartPic_clue->Hue_Main_His[i]))
		{
			hue_second_bin_cnt = (SmartPic_clue->Hue_Main_His[i]);
			secondindex = i;
		}

		if( (i>=4) && (i<=7) )
		{
			hue_his_sum_2_7+=(SmartPic_clue->Hue_Main_His[i]);
		}
#if 0
		if(MA_print_count%120==0)
		{
			ROSPrintf("Hue_His_Bin[%d]=%d \n",i, (SmartPic_clue->Hue_Main_His[i]));
		}
#endif

	}

	Total_hue_hist_ratio = (Total_hue_hist_sum*100)/(width*height+1);//hue cnt ratio by total pixcel

	hue_max_bin_ratio=(hue_max_bin_cnt*100)/(Total_hue_hist_sum+1);
	hue_second_bin_ratio=(hue_second_bin_cnt*100)/(Total_hue_hist_sum+1);

	hue_his_sum_2_7+=1;
	hue_his_ratio_2_7 =(hue_his_sum_2_7*100)/(Total_hue_hist_sum+1);

	if( (Y_his_max_ratio>=40) && (Y_his_ratio_12_18>=70) && (Total_hue_hist_ratio>=15))
	{
		if((hue_his_ratio_2_7>=68)&&(hue_max_bin_ratio>=50))
		{
			skin_tone_huu_bin_ratio = hue_his_ratio_2_7;
		}
		new_skin_tone_flag = 1;

	}
	else
	{
		skin_tone_huu_bin_ratio = 0;
		new_skin_tone_flag = 0;
	}


#if 0
	if(skin_tone_count%120==0)
	{
		ROSPrintf("Total_pixel=%d,Total_hue_hist_sum=%d \n",width*height, Total_hue_hist_sum );
		ROSPrintf("hue_zero_bin_counter=%d,Total_hue_hist_ratio=%d \n",hue_zero_bin_counter,Total_hue_hist_ratio);
		ROSPrintf("max: index=%d, cnt=%d,hue_max_bin_ratio=%d \n",max_index,hue_max_bin_cnt,hue_max_bin_ratio );
		ROSPrintf("second: index=%d, cnt=%d, hue_second_bin_ratio=%d \n",secondindex,hue_second_bin_cnt, hue_second_bin_ratio);
		ROSPrintf("hue_his_sum_4_7=%d, hue_his_ratio_4_7=%d \n",hue_his_sum_2_7,hue_his_ratio_2_7);

		ROSPrintf("Y_his_max_ratio=%d, Y_his_ratio_12_18=%d \n",Y_his_max_ratio,Y_his_ratio_12_18);


		ROSPrintf("!!!new_skin_tone_flag = %d \n",new_skin_tone_flag);

	}
#endif

	skin_tone_count++;


}




//=========================== Skin Tone Detection ===========================
#ifdef ISR_SKIN_TONE_DETECT_FUNCTION_ENABLE
#define Print_skin_tone 0

void skin_tone_detect(unsigned char channel, unsigned int width, unsigned int height)
{
	unsigned int hist_sum, hist_sum_local, hist_ratio=0, hist_local_ratio=0, hist2_sum,hist_bin01_ratio;
	unsigned int i;//, hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];
	unsigned char histogram_non_zero[COLOR_HUE_HISTOGRAM_LEVEL], non_zero_sum =0, corn_check =0; //, line_girl_check =0;
	static unsigned int skin_tone_count=0;

//===== default judge bound =====
	unsigned char Hue_histogram_weight[COLOR_HUE_HISTOGRAM_LEVEL], non_zero_count =0;
	unsigned char Hue_up_bound_count = 0,  Hue_center_bound_count = 0, Hue_low_bound_count = 0, Hue_high_bound_count =0 ;
	unsigned char Hue_count_up_bound=20 ,Hue_count_low_bound=10, Hue_count_high_bound =20 ;
	unsigned char sum_high_bound= 0;


	unsigned int hist_sum2, hist_ratio2=0, hist_local_ratio2=0;//sony demo
	di_im_di_hfd_statistic_RBUS	im_di_hfd_statistic_Reg;//sony demo
	im_di_hfd_statistic_Reg.regValue = rtd_inl(DI_IM_DI_HFD_STATISTIC_reg);//sony demo
	unsigned char result_check=0;
	unsigned char max_index=0;
	unsigned int tmp=0;
	unsigned int Hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];

	hist2_sum = 0;

	for(i=0;i<24;i++)
	{
		Hue_hist[i] = (SmartPic_clue->Hue_Main_His)[i];

		histogram_non_zero[i] = 0;
		hist2_sum+= Hue_hist[i];
		if(Hue_hist[i]>tmp)
		{
			max_index=i;
			tmp=Hue_hist[i];
		}
	}

	hist2_sum+=1;


//	      scalerDrvPrint("\n>>>>>>>>>>>>>>>> skin_tone_begin = %d <<<<<<<<<<<<<<<\n",skin_tone_begin);


	//}


//	for(i = 0; i< 24; i++)
//		scalerDrvPrint("\n>>>>nick187print>>>>>> hue2_%d = %d <<<<<<\n",i,100*hue_hist_2[i]/hist2_sum);


	// following section to detect the corn move hue color
	non_zero_sum = 0;
	non_zero_count = 0;
	for(i = 0; i< 24; i++)
	{
		if(((unsigned char)(100*Hue_hist[i] /hist2_sum)) == 0)
		{
			histogram_non_zero[i] = 0;
			Hue_histogram_weight[i] = 0;
		}
		else
		{
			histogram_non_zero[i] = 1;
			Hue_histogram_weight[i]=(unsigned char)(100*Hue_hist[i] /hist2_sum);
		}

		Hue_histogram_weight[i] = (Hue_histogram_weight[i]>100)?0:Hue_histogram_weight[i];

		non_zero_count += histogram_non_zero[i];

		non_zero_sum += histogram_non_zero[i];
		if(non_zero_sum == 0)
		{
			switch(i)
				{
				case 4:// hue2[0]~[4] doesn't have value,
				case 9:// hue2[9] reset to 0, hue2[5]~[8] this for yelllow and green corn
				case 13: //hue[8]~[13]  always 0
				case 17://hue2[17] reset to 0, hue2[14]~[16] for cyan sky   //20100611 nick187
				case 23://hue2[16]~[23] always 0
						corn_check += 1;

						break;
				default:
						corn_check += 0;
						break;
				}
		}
		else
		{
			if( i == 5) // hue2[5]~[7] this for yelllow and green cone
				corn_check += 1; // hue2[5] has value, hue2[14] has value
			if(i ==14)//  hue2[14]~[15] for cyan sky
				corn_check += 1; // hue2[5] has value, hue2[14] has value


			non_zero_sum = 0;
		}


	}


	hist_bin01_ratio=Hue_hist[1]*100/(hist2_sum);


	hist_sum = Hue_hist[2]+Hue_hist[3]+Hue_hist[4];
		hist_sum2 = Hue_hist[3]+Hue_hist[4]+Hue_hist[5];//sony demo

	if(hist_bin01_ratio>58)
		hist_sum_local = hist_sum+Hue_hist[5];
	else
		hist_sum_local = Hue_hist[0]+Hue_hist[1]+hist_sum+Hue_hist[5];

	if (hist2_sum)
		hist_ratio = hist_sum*100/ (width*height+1);      //(hist2_sum); avoid divide by zero

	if (hist_sum_local)  // hist_sum_local could be zero when system booting
		hist_local_ratio = hist_sum*100/hist_sum_local;

	//sony demo
    	if (hist2_sum)
			hist_ratio2 = hist_sum2*100/ (width*height+1);
        //sony demo
		if (hist_sum_local)  // hist_sum_local could be zero when system booting
			hist_local_ratio2 = hist_sum2*100/hist_sum_local;

	//LG demo 45and 46 flag
	Hue_up_bound_count = 0;
	Hue_low_bound_count= 0;
	Hue_center_bound_count = 0;
	Hue_high_bound_count= 0;
	sum_high_bound=0;
	for(i = 0; i< 24; i++)
	{
		if(Hue_histogram_weight[i]<=Hue_count_up_bound && Hue_histogram_weight[i]>Hue_count_low_bound)
		{
		 	Hue_center_bound_count++;
		}
		else if(Hue_histogram_weight[i]<=Hue_count_low_bound && Hue_histogram_weight[i]!=0)
		{
		 	Hue_low_bound_count++;
		}
		else if( Hue_histogram_weight[i]>Hue_count_up_bound)
		{
		 	Hue_up_bound_count++;
		}

		if(Hue_histogram_weight[i]>Hue_count_high_bound)
		{
			Hue_high_bound_count++;
			sum_high_bound = sum_high_bound+Hue_histogram_weight[i];
		}

	}

	#define SKIN_TONE_MV_THL 25
	if( (hist_local_ratio>75) && (hist_ratio>8) && (Hue_hist[3]>Hue_hist[2]) && (Hue_hist[3]>Hue_hist[1]) && (Hue_hist[3]>Hue_hist[4]) && (Hue_hist[3]>Hue_hist[5]) &&((SmartPic_clue->Hist_Y_Mean_Value) > SKIN_TONE_MV_THL))
	{ //org (hist_ratio>10)  change by Jerry Wu 20101103, condition:max hue_hist_2[3]
		Line_girl_tone_result = 0;
		Corn_tone_result = 0;
		(SmartPic_clue->skintoneflag) = 1;
		start_to_detected =1;
		result_check=1;
		//avoid moving moon pattern
		if(((SmartPic_clue->Hist_Y_Mean_Value)==37||(SmartPic_clue->Hist_Y_Mean_Value)==36))
		{
			if((Hue_hist[3]<((Hue_hist[2]*225)>>7)))
				(SmartPic_clue->skintoneflag) = 0;
		}
		// oliver-
	//	if((skin_tone_count % 90) == 0)//sony demo
		{
			//ROSPrintf("[skin]section 0!! \n");
			VIP_DEBUG_PRINTF("[skin]section 0!! \n");
			VIP_DEBUG_PRINTF("[skin]section 0,Histogram_Mean_value =%d\n",(SmartPic_clue->Hist_Y_Mean_Value));
		}
	}
	else if( (hist_local_ratio>75) && (hist_ratio>8) && (Hue_hist[3]>Hue_hist[2]) && ((Hue_hist[3]*2)>Hue_hist[1]) && (Hue_hist[3]>Hue_hist[4]) && (Hue_hist[3]>Hue_hist[5])&&((SmartPic_clue->Hist_Y_Mean_Value) > SKIN_TONE_MV_THL) )
	{// (hist_ratio>10) change by Jerry Wu 20101103,
		Line_girl_tone_result = 0;
		Corn_tone_result = 0;
		(SmartPic_clue->skintoneflag) = 1;
		start_to_detected =1;
		result_check=2;
	//oliver-
	//	if((skin_tone_count % 90) == 0)//sony demo
		{
			//ROSPrintf("[skin]section 1!! \n");
			VIP_DEBUG_PRINTF("[skin]section 1!! \n");
			VIP_DEBUG_PRINTF("[skin]section 1,Histogram_Mean_value=%d\n",(SmartPic_clue->Hist_Y_Mean_Value));
		}
	}
	else if( (hist_local_ratio>75) && (hist_ratio>45) && (Hue_hist[2]>Hue_hist[3]) && ((Hue_hist[3]*2)>Hue_hist[1]) && (Hue_hist[3]>Hue_hist[4]) && (Hue_hist[3]>Hue_hist[5])&&((SmartPic_clue->Hist_Y_Mean_Value) > SKIN_TONE_MV_THL) )
	{ // for SONY little baby, 20100126 Jerry Wu
		Line_girl_tone_result = 0;
		Corn_tone_result = 0;
		(SmartPic_clue->skintoneflag) = 1;
		start_to_detected =1;
		result_check=3;
		// oliver-
		//if((skin_tone_count % 90) == 0)//sony demo
		{
			//ROSPrintf("[skin]section 2!! \n");
			VIP_DEBUG_PRINTF("[skin]section 2!! \n");
			VIP_DEBUG_PRINTF("[skin]section 2,Histogram_Mean_value=%d\n",(SmartPic_clue->Hist_Y_Mean_Value));
		}
	}
	else if( (hist_local_ratio>40) &&(hist_local_ratio<50)&& (hist_ratio>10) && (hist_ratio<20) && (Hue_hist[3]>Hue_hist[2]) && ( (Hue_hist[3]>Hue_hist[4]) && (Hue_hist[3]>Hue_hist[5]) )&&((SmartPic_clue->Hist_Y_Mean_Value) > SKIN_TONE_MV_THL))
	{ // for SONY Red swather girl, 20100127 Jerry Wu
		Line_girl_tone_result = 0;
		Corn_tone_result = 0;
		(SmartPic_clue->skintoneflag) = 1;
		start_to_detected =1;
		result_check=4;
		// oliver-
		//if((skin_tone_count % 90) == 0)//sony demo
		{
			//ROSPrintf("[skin]section 3!! \n");
			VIP_DEBUG_PRINTF("[skin]section 3!! \n");
			VIP_DEBUG_PRINTF("[skin]section 3,Histogram_Mean_value=%d\n",(SmartPic_clue->Hist_Y_Mean_Value));
		}
	}
	else if( (hist_local_ratio>75) && (hist_ratio>8) && (Hue_hist[4]>Hue_hist[3]) && (Hue_hist[4]>Hue_hist[2]) && (Hue_hist[4]>Hue_hist[5]) && (Hue_hist[4]>Hue_hist[6])&&((SmartPic_clue->Hist_Y_Mean_Value) > SKIN_TONE_MV_THL) )
	{ //org (hist_ratio>10)  change by Jerry Wu 20101103, condition:max hue_hist_2[3]
		Line_girl_tone_result = 0;
		Corn_tone_result = 0;
		(SmartPic_clue->skintoneflag) = 1;
		start_to_detected =1;
		result_check=5;
		if(((SmartPic_clue->Hist_Y_Mean_Value)==40||(SmartPic_clue->Hist_Y_Mean_Value)==41))
		{
			if(hist_ratio<=9)
				(SmartPic_clue->skintoneflag) = 0;
		}

		// oliver-
		//if((skin_tone_count % 90) == 0)//sony demo
		{
			//ROSPrintf("[skin]section 4!! \n");
	   	 	VIP_DEBUG_PRINTF("[skin]section 4!! \n");
			VIP_DEBUG_PRINTF("[skin]section 4,Histogram_Mean_value=%d\n",(SmartPic_clue->Hist_Y_Mean_Value));
		}
	}
	else if(hist_local_ratio2>78 &&((Hue_hist[3]>Hue_hist[0]) && (Hue_hist[3]>Hue_hist[1]) && (Hue_hist[3]>Hue_hist[2]) && (Hue_hist[3]>Hue_hist[4]))&&((SmartPic_clue->Hist_Y_Mean_Value) > 63) )
	{
		(SmartPic_clue->skintoneflag) = 1;
		skin_tone_for_panasonic =1;
		result_check=6;
		//if((skin_tone_count % 90) == 0)//panasonic style for skin tone
		{
			//ROSPrintf("[skin]section 5!! \n");
	   	 	VIP_DEBUG_PRINTF("[skin]section 4!! \n");
			VIP_DEBUG_PRINTF("[skin]section 4,Histogram_Mean_value=%d\n",(SmartPic_clue->Hist_Y_Mean_Value));
		}
	}
	else if(hist_local_ratio2>80 &&((Hue_hist[4]>Hue_hist[1]) && (Hue_hist[4]>Hue_hist[2]) && (Hue_hist[4]>Hue_hist[3]) && (Hue_hist[4]>Hue_hist[5]))&&((SmartPic_clue->Hist_Y_Mean_Value) > 63) )
	{
		(SmartPic_clue->skintoneflag) = 1;
		skin_tone_for_panasonic =1;
		result_check=7;
		//if((skin_tone_count % 90) == 0)//panasonic style for skin tone
		{
			//ROSPrintf("[skin]section 6!! \n");
	   	 	VIP_DEBUG_PRINTF("[skin]section 4!! \n");
			VIP_DEBUG_PRINTF("[skin]section 4,Histogram_Mean_value=%d\n",(SmartPic_clue->Hist_Y_Mean_Value));
		}
	}

	else if(corn_check >=7)
	{ //this function implement in drvif_color_ma_hfd_problem
		Line_girl_tone_result = 0;
		Corn_tone_result = 1;
		(SmartPic_clue->skintoneflag) = 0;
		start_to_detected =1;
		//if((skin_tone_count % 90) == 0)//sony demo
		{
			//ROSPrintf("[skin]section 8!! \n");
			VIP_DEBUG_PRINTF("[skin]section 6!!,Histogram_Mean_value=%d \n",(SmartPic_clue->Hist_Y_Mean_Value));
			VIP_DEBUG_PRINTF("--------------------------------------------Corn Detect--------------------------\n");
		}
	}
	else
	{
		if((skin_tone_count % 10) == 0)//sony demo
		{
			VIP_DEBUG_PRINTF("[skin]Yes.corn_check =%d, hfd=%d\n",corn_check,im_di_hfd_statistic_Reg.regValue);
		}


		Line_girl_tone_result = 0;
		Corn_tone_result = 0;
		(SmartPic_clue->skintoneflag) = 0;
		skin_tone_for_panasonic =0;
		result_check=0;
	}

	//max index must be 1,2,3,4,5,6
	if(max_index>6)
		(SmartPic_clue->skintoneflag) = 0;

#if 0
	if(MA_print_count%100==0)
		ROSPrintf("r=%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d\n",
		result_check,(SmartPic_clue->Hist_Y_Mean_Value),hist_local_ratio,hist_ratio,max_index,
		Hue_hist[0],Hue_hist[1],Hue_hist[2],Hue_hist[3],Hue_hist[4],Hue_hist[5],Hue_hist[6]);
#endif
	skin_tone_begin = 1;
	skin_tone_count++;

}
#endif

//if( ((SmartPic_clue->Hist_Y_Mean_Value)<47&&(SmartPic_clue->Hist_Y_Mean_Value)>40) && (im_di_hfd_statistic_Reg.regValue>=105000)  && (hist2_sum<=40000) && (Center_Difference>=15 && Center_Difference<=130))//sony demo
unsigned int mcc_detect_table[6][7] =
{
	{51,		43,		80000,		1700000,		0,		145,		10},		//NTSC // cychen LG deno 45 -> temp disable	// mcc_detect_table[NTSC][3]= 120000 from 40000
	{51,		42,		100000,		40000,		0,		140,		10},		//PAL // cychen LG deno 45 -> temp disable 43->42
	{47,		40,		90000,		40000,		0,		130,		10},		//SD
	{47,		40,		90000,		40000,		0,		130,		10},		//HD
	{47,		40,		100000,		40000,		15,		130,		10},		//VGA
	{47,		40,		100000,		40000,		0,		180,		10},		//HDMI PAL
};

unsigned char motion_concentric_circles_detect(unsigned int width, unsigned int height)
{

	unsigned int hist_local_sum, hist_sum_localrange, hist_ratio_allrange=0, hist_local_ratio=0, hist2_sum;
	unsigned int i;//, hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];
	unsigned char radio_color_dete_config=0,curr_motion_status_flag=0;
    //unsigned char motion_condiction_flag=0;	//sony demo
	unsigned int local_HistCnt_ratio[8] = {0};
	unsigned int HistCnt_sum, HistCnt_flag=0, local_ratio_sum=0,local_ratio_average_high=0;
	unsigned char curr_motion_status = 0, ii = 0;

	unsigned int Center_Difference = 0;
	static unsigned int pre_Center_Difference = 0;

	static unsigned int counter_file=0;//sony demo
	static unsigned int sat_hist_sum_bin3to31=0;//2014/03/05 since Sirius
	static unsigned char pre_Saturation_detect_flag=1;
	unsigned char still_concentric_circles_detect_flag=0;

	unsigned int Hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);
	unsigned int printf_Flag=0,print_delay=0;

	 di_im_di_hfd_statistic_RBUS	 im_di_hfd_statistic_Reg;//sony demo
	 _system_setting_info *system_info_structure_table=NULL;
	system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;

	im_di_hfd_statistic_Reg.regValue = rtd_inl(DI_IM_DI_HFD_STATISTIC_reg);//sony demo

	curr_motion_status = scalerVideo_GetCurMotionStatus();


	hist2_sum = 0;
	for(i=0;i<24;i++)
	{
		Hue_hist[i] =(SmartPic_clue->Hue_Main_His)[i];
		hist2_sum+= Hue_hist[i];//already read info. from skin tone detector
	}
	hist2_sum+=1;

	HistCnt_sum = 0;
	for(i=0;i<32;i++)
	{
		HistCnt_sum+= reg_HistCnt[i];//already read info. from skin tone detector
	}
	HistCnt_sum+=1;

	if(HistCnt_sum>0)
	{
		local_HistCnt_ratio[0]=100*(reg_HistCnt[0]+reg_HistCnt[1]+reg_HistCnt[2]+reg_HistCnt[3])/HistCnt_sum;
		local_HistCnt_ratio[1]=100*(reg_HistCnt[4]+reg_HistCnt[5]+reg_HistCnt[6]+reg_HistCnt[7])/HistCnt_sum;
		local_HistCnt_ratio[2]=100*(reg_HistCnt[8]+reg_HistCnt[9]+reg_HistCnt[10]+reg_HistCnt[11])/HistCnt_sum;
		local_HistCnt_ratio[3]=100*(reg_HistCnt[12]+reg_HistCnt[13]+reg_HistCnt[14]+reg_HistCnt[15])/HistCnt_sum;
		local_HistCnt_ratio[4]=100*(reg_HistCnt[16]+reg_HistCnt[17]+reg_HistCnt[18]+reg_HistCnt[19])/HistCnt_sum;
		local_HistCnt_ratio[5]=100*(reg_HistCnt[20]+reg_HistCnt[21]+reg_HistCnt[22]+reg_HistCnt[23])/HistCnt_sum;
		local_HistCnt_ratio[6]=100*(reg_HistCnt[24]+reg_HistCnt[25]+reg_HistCnt[26]+reg_HistCnt[27])/HistCnt_sum;
		local_HistCnt_ratio[7]=100*(reg_HistCnt[28]+reg_HistCnt[29]+reg_HistCnt[30]+reg_HistCnt[31])/HistCnt_sum;
	}

/*
	for(i=0;i<8;i++)//sony demo
	{
		if(local_HistCnt_ratio[i]<0)
			local_HistCnt_ratio[i]=0;
	}
*/
	hist_local_sum = reg_HistCnt[9]+reg_HistCnt[10]+reg_HistCnt[14];//sony demo

	for(i=1;i<17;i++)
	{
		hist_sum_localrange = reg_HistCnt[i];//sony demo
	}

	if (hist2_sum) //(hist2_sum); avoid divide by zero
		hist_ratio_allrange = hist_local_sum*100/hist2_sum;

	if (hist_sum_localrange)  // hist_sum_local could be zero when system booting
		hist_local_ratio = hist_local_sum*100/hist_sum_localrange;

	local_ratio_sum=local_HistCnt_ratio[1]+local_HistCnt_ratio[2]+local_HistCnt_ratio[3]+local_HistCnt_ratio[4]+local_HistCnt_ratio[5];//sony demo
	local_ratio_average_high=(local_HistCnt_ratio[6]+local_HistCnt_ratio[7]);//sony demo

//==========HistCnt_flag condiction===================================
	if( (SmartPic_clue->Hist_Y_Mean_Value)<mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][0]&&(SmartPic_clue->Hist_Y_Mean_Value)>mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][1] )
	{
		if(local_ratio_sum>80&&local_ratio_average_high<10&&(local_HistCnt_ratio[1]+local_HistCnt_ratio[2])<=40&&(local_HistCnt_ratio[0]>0 && local_HistCnt_ratio[0]<10))//sony demo
		{

			HistCnt_flag=1;
		}
		else
		{
			HistCnt_flag=0;
		}
	}
	else
	{
		HistCnt_flag=0;
	}
//===========================================================


//==========Saturation_detect_flag condiction============================
	if( (SmartPic_clue->saturationflag)==0)//add for hue_hist_2=0; no data
	{
		radio_color_dete_config=0;
		pre_Saturation_detect_flag = radio_color_dete_config;
	}
	else if( (SmartPic_clue->saturationflag)==3 && pre_Saturation_detect_flag==0)
	{
		radio_color_dete_config=0;
	}
	else
	{
		radio_color_dete_config=1;
		pre_Saturation_detect_flag=radio_color_dete_config;
	}
//================================================================

//===========curr_motion_status condiction==================================
	if( (curr_motion_status<3&&curr_motion_status>0)||curr_motion_status==7)//add for hue_hist_2=0; no data
	{
		curr_motion_status_flag=1;
	}
	else
	{
		curr_motion_status_flag=0;
	}
//================================================================

//===========motion
	Center_Difference = 0;
	for(ii = 4; ii < 12 ; ii++)
	{
		Center_Difference = Center_Difference + Difference_H[ii] + Difference_V[ii];
	}
//===============


//================================================================
	/*START: new "low-sat." condition for still_concentric_circles_detect_flag @ 2014/03/05 since Sirius*/
	sat_hist_sum_bin3to31=0;
	for(i=3;i<32;i++)
		sat_hist_sum_bin3to31 += sat_hist_ratio[i];
	/*END*/
	//scalerVIP_StillMotion(SmartPic_clue); //rord.tsao mark 2015/06/18
	scalerVIP_Difference_H_V_Calculate();

//#if motion_concentric_circles_log
	if((printf_Flag==4) && (MA_print_count%print_delay==0))
		{

			ROSPrintf("ooo--- Histogram_Mean_value=%d ---ooo\n",(SmartPic_clue->Hist_Y_Mean_Value));
			ROSPrintf("ooo--- im_di_hfd_statistic_Reg=%d ---ooo\n",im_di_hfd_statistic_Reg.regValue);
			ROSPrintf("ooo--- Center_Difference=%d 	---ooo\n",Center_Difference/*,	scalerVIP_StillMotion()*/);
			ROSPrintf("ooo--- hist2_sum=%d 	%d---ooo\n",hist2_sum,SmartPic_clue->RTNR_MAD_count_Y_avg_ratio);
			ROSPrintf("ooo--- %d 	%d 		%d	 	%d---ooo\n",((SmartPic_clue->Hist_Y_Mean_Value)<mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][0]&&(SmartPic_clue->Hist_Y_Mean_Value)>mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][1]),(im_di_hfd_statistic_Reg.regValue>=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][2]), (hist2_sum<=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][3]),(Center_Difference>=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][4] && Center_Difference<=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][5]));
			ROSPrintf("ooo--- sat_hist_sum_bin3to31=%d---ooo\n",sat_hist_sum_bin3to31);
			ROSPrintf("ooo-----------------------------------------------ooo\n");
			if(((SmartPic_clue->Hist_Y_Mean_Value)<mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][0]&&(SmartPic_clue->Hist_Y_Mean_Value)>mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][1])==0)
				ROSPrintf("ooo---1. %d < %d < %d---ooo\n",mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][1],(SmartPic_clue->Hist_Y_Mean_Value),mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][0]);
			if((im_di_hfd_statistic_Reg.regValue>=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][2])==0)
				ROSPrintf("ooo---2. %d >= %d---ooo\n",im_di_hfd_statistic_Reg.regValue,mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][2]);
			if((hist2_sum<=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][3])==0)
				ROSPrintf("ooo---3. %d <= %d---ooo\n",hist2_sum,mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][3]);
			if((Center_Difference>=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][4] && Center_Difference<=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][5])==0)
				ROSPrintf("ooo---4. %d <= %d <= %d---ooo\n",mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][4] ,Center_Difference, mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][5]);
			if((sat_hist_sum_bin3to31<=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][6])==0)
				ROSPrintf("ooo---5. %d <= %d ---ooo\n",sat_hist_sum_bin3to31,mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][6]);

		}
//#endif

//	if( ((SmartPic_clue->Hist_Y_Mean_Value)<47&&(SmartPic_clue->Hist_Y_Mean_Value)>40) && curr_motion_status_flag==1 && HistCnt_flag==1 && (im_di_hfd_statistic_Reg.regValue>=120000)   )//sony demo
	if( ((SmartPic_clue->Hist_Y_Mean_Value)<mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][0] &&
		(SmartPic_clue->Hist_Y_Mean_Value)>mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][1]) &&
		(im_di_hfd_statistic_Reg.regValue>=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][2]) &&
		(hist2_sum<=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][3]) &&
		(Center_Difference>=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][4] &&
		Center_Difference<=mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][5]) &&
		sat_hist_sum_bin3to31 <= mcc_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][6])
	{
		still_concentric_circles_detect_flag=1;
	}
	else
	{
		still_concentric_circles_detect_flag=0;
	}
	pre_Center_Difference = Center_Difference;
	counter_file++;

	return still_concentric_circles_detect_flag;

}


unsigned char motion_purecolor_concentric_circles_detect(unsigned int width, unsigned int height)//sony demo
{


	unsigned int hist2_sum;
	unsigned int i;//, hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];
	static unsigned int local_hue_his1=0,local_hue_his2=0,local_hue_his3=0;
	unsigned char radio_color_dete_config=0,curr_motion_status_flag=0;
	unsigned int local_HistCnt_ratio[8] = {0};
	unsigned int HistCnt_sum, HistCnt_flag=0, local_ratio_sum=0;
	unsigned char curr_motion_status = 0;

	static unsigned int counter_file=0;
	unsigned char motion_purecolor_concentric_circles_detect_flag=0;//sony demo
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);

	di_im_di_hfd_statistic_RBUS	im_di_hfd_statistic_Reg;
	im_di_hfd_statistic_Reg.regValue = rtd_inl(DI_IM_DI_HFD_STATISTIC_reg);



    curr_motion_status = scalerVideo_GetCurMotionStatus();
	// oliver-
	//static unsigned short H_Block_Pre1[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	//static unsigned short V_Block_Pre1[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	//static unsigned short H_Block_Pre2[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	//static unsigned short V_Block_Pre2[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

	hist2_sum = 0;
	for(i=0;i<24;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		hist2_sum+= hue_hist_2[i];//already read info. from skin tone detector
	}
	hist2_sum+=1;

	HistCnt_sum = 0;
	for(i=0;i<32;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		HistCnt_sum+= reg_HistCnt[i];//already read info. from skin tone detector
	}
	HistCnt_sum+=1;

	local_HistCnt_ratio[0]=100*(reg_HistCnt[0]+reg_HistCnt[1]+reg_HistCnt[2]+reg_HistCnt[3])/HistCnt_sum;
	local_HistCnt_ratio[1]=100*(reg_HistCnt[4]+reg_HistCnt[5]+reg_HistCnt[6]+reg_HistCnt[7])/HistCnt_sum;
	local_HistCnt_ratio[2]=100*(reg_HistCnt[8]+reg_HistCnt[9]+reg_HistCnt[10]+reg_HistCnt[11])/HistCnt_sum;
	local_HistCnt_ratio[3]=100*(reg_HistCnt[12]+reg_HistCnt[13]+reg_HistCnt[14]+reg_HistCnt[15])/HistCnt_sum;
	local_HistCnt_ratio[4]=100*(reg_HistCnt[16]+reg_HistCnt[17]+reg_HistCnt[18]+reg_HistCnt[19])/HistCnt_sum;
	local_HistCnt_ratio[5]=100*(reg_HistCnt[20]+reg_HistCnt[21]+reg_HistCnt[22]+reg_HistCnt[23])/HistCnt_sum;
	local_HistCnt_ratio[6]=100*(reg_HistCnt[24]+reg_HistCnt[25]+reg_HistCnt[26]+reg_HistCnt[27])/HistCnt_sum;
	local_HistCnt_ratio[7]=100*(reg_HistCnt[28]+reg_HistCnt[29]+reg_HistCnt[30]+reg_HistCnt[31])/HistCnt_sum;

/*
	for(i=0;i<8;i++)
	{
		if(local_HistCnt_ratio[i]<0)
			local_HistCnt_ratio[i]=0;
	}
*/
    if(hist2_sum!=0)
    {
		local_hue_his1 =100*hue_hist_2[9]/hist2_sum;
		local_hue_his2 =100*hue_hist_2[17]/hist2_sum;
		local_hue_his3 =100*hue_hist_2[2]/hist2_sum;
    }


	local_ratio_sum=local_HistCnt_ratio[4]+local_HistCnt_ratio[5]+local_HistCnt_ratio[6]+local_HistCnt_ratio[7];

//==========HistCnt_flag condiction===================================
	if( (SmartPic_clue->Hist_Y_Mean_Value)<30 )
	{
		if(local_ratio_sum<3)
		{

			HistCnt_flag=1;
	}
		else
	{
			HistCnt_flag=0;
		}
	}
	else
	{
		HistCnt_flag=0;
	}
//===========================================================


//==========Saturation_detect_flag condiction============================
if(hist2_sum!=0)
{
	if( (local_hue_his1>=82 && local_hue_his1<=88 ) || (local_hue_his2>=78 && local_hue_his2<=87) || (local_hue_his3>=80 && local_hue_his3<=93) )//add for hue_hist_2=0; no data
	{
		radio_color_dete_config=1;
	}
	else
	{
		radio_color_dete_config=0;
	}
}
//================================================================

//===========curr_motion_status condiction==================================
	if( curr_motion_status<=1)//add for hue_hist_2=0; no data
	{
		curr_motion_status_flag=1;
	}
	else
	{
		curr_motion_status_flag=0;
	}
//================================================================

//================================================================


	if( radio_color_dete_config==1 && curr_motion_status_flag==1 && HistCnt_flag==1 )
	{

		if(counter_file%60==0)
		{
			//ROSPrintf("ooo---motion_purecolor_concentric_circles_detect=1---ooo\n");
		}
		motion_purecolor_concentric_circles_detect_flag=1;
		counter_file++;
		//return 1;
	}
	else
	{
/*
		if(counter_file%60==0)
		{
			ROSPrintf("ooo---motion_purecolor_concentric_circles_detect=0---ooo\n");
			ROSPrintf("ooo--- local_hue_his1=%d,local_hue_his2=%d, local_hue_his3=%d ---ooo\n",local_hue_his1,local_hue_his2,local_hue_his3);
			ROSPrintf("ooo--- hist2_sum=%d, color_dete_config=%d ---ooo\n",hist2_sum,radio_color_dete_config);
			ROSPrintf("ooo--- curr_motion_status = %d,curr_motion_status_flag=%d ---ooo\n",curr_motion_status,curr_motion_status_flag);
			ROSPrintf("ooo--- local_ratio_sum=%d, local_ratio_average_high=%d ---ooo\n",local_ratio_sum);
			ROSPrintf("ooo--- Histogram_Mean_value=%d ,HistCnt_flag=%d---ooo\n",(SmartPic_clue->Hist_Y_Mean_Value),HistCnt_flag);
			ROSPrintf("ooo--- im_di_hfd_statistic_Reg=%d ---ooo\n",im_di_hfd_statistic_Reg.regValue);

		}
*/
		motion_purecolor_concentric_circles_detect_flag=0;
		counter_file++;
		//return 0;
	}

	return motion_purecolor_concentric_circles_detect_flag;


}


unsigned char motion_move_concentric_circles_detect(unsigned int width, unsigned int height)
{
	unsigned int hist_local_sum, hist_sum_localrange, hist_ratio_allrange=0, hist_local_ratio=0, hist2_sum;
	unsigned int i;//, hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];
	unsigned char radio_color_dete_config=0,curr_motion_status_flag=0;
	unsigned int local_HistCnt_ratio[8] = {0};
	unsigned int HistCnt_sum, HistCnt_flag=0, local_ratio_sum=0,local_ratio_average_high=0;
	unsigned char curr_motion_status = 0;
	static unsigned char pre_Saturation_detect_flag=1;

	static unsigned int counter_file=0;
	unsigned char motion_move_concentric_circles_detect_flag=0;
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);

	di_im_di_hfd_statistic_RBUS	im_di_hfd_statistic_Reg;
	im_di_hfd_statistic_Reg.regValue = rtd_inl(DI_IM_DI_HFD_STATISTIC_reg);



       curr_motion_status = scalerVideo_GetCurMotionStatus();
	// oliver-
	//static unsigned short H_Block_Pre1[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	//static unsigned short V_Block_Pre1[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	//static unsigned short H_Block_Pre2[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	//static unsigned short V_Block_Pre2[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

	hist2_sum = 0;
	for(i=0;i<24;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		hist2_sum+= hue_hist_2[i];//already read info. from skin tone detector
	}
	hist2_sum+=1;

	HistCnt_sum = 0;
	for(i=0;i<32;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		HistCnt_sum+= reg_HistCnt[i];//already read info. from skin tone detector
	}
	HistCnt_sum+=1;


	local_HistCnt_ratio[0]=100*(reg_HistCnt[0]+reg_HistCnt[1]+reg_HistCnt[2]+reg_HistCnt[3])/HistCnt_sum;
	local_HistCnt_ratio[1]=100*(reg_HistCnt[4]+reg_HistCnt[5]+reg_HistCnt[6]+reg_HistCnt[7])/HistCnt_sum;
	local_HistCnt_ratio[2]=100*(reg_HistCnt[8]+reg_HistCnt[9]+reg_HistCnt[10]+reg_HistCnt[11])/HistCnt_sum;
	local_HistCnt_ratio[3]=100*(reg_HistCnt[12]+reg_HistCnt[13]+reg_HistCnt[14]+reg_HistCnt[15])/HistCnt_sum;
	local_HistCnt_ratio[4]=100*(reg_HistCnt[16]+reg_HistCnt[17]+reg_HistCnt[18]+reg_HistCnt[19])/HistCnt_sum;
	local_HistCnt_ratio[5]=100*(reg_HistCnt[20]+reg_HistCnt[21]+reg_HistCnt[22]+reg_HistCnt[23])/HistCnt_sum;
	local_HistCnt_ratio[6]=100*(reg_HistCnt[24]+reg_HistCnt[25]+reg_HistCnt[26]+reg_HistCnt[27])/HistCnt_sum;
	local_HistCnt_ratio[7]=100*(reg_HistCnt[28]+reg_HistCnt[29]+reg_HistCnt[30]+reg_HistCnt[31])/HistCnt_sum;
/*
		for(i=0;i<8;i++)
		{
		if(local_HistCnt_ratio[i]<0)
			local_HistCnt_ratio[i]=0;
	}
*/
	hist_local_sum = reg_HistCnt[9]+reg_HistCnt[10]+reg_HistCnt[14];

	for(i=1;i<17;i++)
	{
		hist_sum_localrange = reg_HistCnt[i];
	}

	if (hist2_sum) //(hist2_sum); avoid divide by zero
		hist_ratio_allrange = hist_local_sum*100/hist2_sum;

	if (hist_sum_localrange)  // hist_sum_local could be zero when system booting
		hist_local_ratio = hist_local_sum*100/hist_sum_localrange;

	local_ratio_sum=local_HistCnt_ratio[1]+local_HistCnt_ratio[2]+local_HistCnt_ratio[3]+local_HistCnt_ratio[4]+local_HistCnt_ratio[5];
	local_ratio_average_high=(local_HistCnt_ratio[6]+local_HistCnt_ratio[7]);

//==========HistCnt_flag condiction===================================
	if( (SmartPic_clue->Hist_Y_Mean_Value)<47&&(SmartPic_clue->Hist_Y_Mean_Value)>40 )
	{
		if(local_ratio_sum>80 && local_ratio_average_high<=6 && local_HistCnt_ratio[0]<3 )
		{

			HistCnt_flag=1;
	}
	else
	{
			HistCnt_flag=0;
		}
	}
	else
	{
		HistCnt_flag=0;
	}
//===========================================================


//==========Saturation_detect_flag condiction============================
	if( (SmartPic_clue->saturationflag)==0)//add for hue_hist_2=0; no data
	{
		radio_color_dete_config=0;
		pre_Saturation_detect_flag = radio_color_dete_config;
	}
	else if( (SmartPic_clue->saturationflag)==3 && pre_Saturation_detect_flag==0)
	{
		radio_color_dete_config=0;
	}
	else
	{
		radio_color_dete_config=1;
		pre_Saturation_detect_flag=radio_color_dete_config;
	}
//================================================================

//===========curr_motion_status condiction==================================
	if(system_info_structure_table->Input_src_Form == _SRC_FROM_VDC)
	{
		if(scalerVideo_readMode()==VDC_MODE_PALI)
		{
			if( curr_motion_status==7)//add for hue_hist_2=0; no data
			{
				curr_motion_status_flag=1;
			}
			else
			{
				curr_motion_status_flag=0;
			}
		}

		if(scalerVideo_readMode()==VDC_MODE_NTSC)
			{
			if( curr_motion_status>=5)//add for hue_hist_2=0; no data
			{
				curr_motion_status_flag=1;
			}
			else
			{
				curr_motion_status_flag=0;
			}
		}
	}


//================================================================

//================================================================


#if 0
static unsigned int print_cnt = 0;
if(print_cnt % 60 == 0)
	ROSPrintf("[nick187] curr_ms=%d, DCC_MC=%d, lrah=%d, lHr[0]=%d, hfd_statistic=%d\n",
	curr_motion_status_flag, (SmartPic_clue->Hist_Y_Mean_Value), local_ratio_average_high, local_HistCnt_ratio[0], im_di_hfd_statistic_Reg.regValue);
print_cnt ++;
#endif

	if( curr_motion_status_flag==1 && HistCnt_flag==1 && (im_di_hfd_statistic_Reg.regValue>=50000)   )
	{

		if(counter_file%60==0)
		{
			//ROSPrintf("ooo---motion_move_concentric_circles_detect=1---ooo\n");
		}
		motion_move_concentric_circles_detect_flag=1;
		counter_file++;
		//return 1;
	}
	else
	{
/*
		if(counter_file%60==0)
		{
			ROSPrintf("ooo---motion_move_concentric_circles_detect=0---ooo\n");
			ROSPrintf("ooo--- Saturation_detect_flag=%d ---ooo\n",(SmartPic_clue->saturationflag));
			ROSPrintf("ooo--- curr_motion_status = %d,curr_motion_status_flag=%d ---ooo\n",curr_motion_status,curr_motion_status_flag);
			ROSPrintf("ooo--- hist_ratio_allrange=%d, hist_local_ratio=%d ---ooo\n",hist_ratio_allrange,hist_local_ratio);
			ROSPrintf("ooo--- local_ratio_sum=%d, local_ratio_average_high=%d ---ooo\n",local_ratio_sum,local_ratio_average_high);
			ROSPrintf("ooo--- Histogram_Mean_value=%d ,HistCnt_flag=%d---ooo\n",(SmartPic_clue->Hist_Y_Mean_Value),HistCnt_flag);
			ROSPrintf("ooo--- im_di_hfd_statistic_Reg=%d ---ooo\n",im_di_hfd_statistic_Reg.regValue);

		for(i=0;i<8;i++)
		{
				ROSPrintf("ooo--- local_HistCnt_ratio[%d]=%d ---ooo\n",i,local_HistCnt_ratio[i]);
		}

		}
*/
		motion_move_concentric_circles_detect_flag=0;
		counter_file++;
		//return 0;
	}

	return motion_move_concentric_circles_detect_flag;


}





void DI_Champagne_problem(void)
{

		di_im_di_ma_frame_motion_th_a_RBUS frame_motion_a_reg;// frame motion a
		di_im_di_ma_frame_motion_th_b_RBUS frame_motion_b_reg;// frame motion b
		di_im_di_ma_frame_motion_th_c_RBUS frame_motion_c_reg;// frame motion c
		di_im_di_ma_field_teeth_th_a_RBUS  field_teeth_th_a_reg;

		//if((SmartPic_clue->Champagne_flag)==1)// && film_motion_top > 4 && film_motion_bot > 4 && film_motion_left > 4 && film_motion_right > 4)
		//{
			frame_motion_a_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg);
			frame_motion_b_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg);
			frame_motion_c_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg);
			field_teeth_th_a_reg.regValue = rtd_inl(DI_IM_DI_MA_FIELD_TEETH_TH_A_reg);

			frame_motion_a_reg.ma_framemtha = 0x04;
			frame_motion_a_reg.ma_framehtha = 0x05;
			frame_motion_a_reg.ma_framerlvtha = 0x01;
			frame_motion_a_reg.ma_framestha = 0x01;

			frame_motion_b_reg.ma_framemthb = 0x14;
			frame_motion_b_reg.ma_framehthb = 0x0a;
			frame_motion_b_reg.ma_framerlvthb = 0x02;
			frame_motion_b_reg.ma_framesthb = 0x02;

			frame_motion_c_reg.ma_framemthc = 0x32;
			frame_motion_c_reg.ma_framehthc = 0x14;
			frame_motion_c_reg.ma_framerlvthc = 0x01;
			frame_motion_c_reg.ma_framesthc = 0x01;

			field_teeth_th_a_reg.ma_fieldteethstha = 0x32;
			field_teeth_th_a_reg.ma_fieldteethmtha = 0x14;
			field_teeth_th_a_reg.ma_fieldteethhtha = 0x03;
			field_teeth_th_a_reg.ma_fieldteethrlvtha = 0x03;

			/*
			frame_motion_a_reg.regValue =   0x04050101; //0x04050202;
			frame_motion_b_reg.regValue =   0x140a0202; //0x140a060c;
			frame_motion_c_reg.regValue =   0x32140101; //0x140a060c;
			field_teeth_th_a_reg.regValue = 0x32140303; //0x3a141018;
			*/

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, frame_motion_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, frame_motion_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, frame_motion_c_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FIELD_TEETH_TH_A_reg, field_teeth_th_a_reg.regValue);
		//}
		//else
		//{
		//	scalerVIP_colorMAQuickSetTh(2);
		//}


}


unsigned char DI_detect_Champagne(unsigned int width, unsigned int height)
{

	unsigned int cur_total_motion;
	static unsigned int counter_file=0;
	unsigned int film_motion_c, film_motion_top, film_motion_bot, film_motion_left, film_motion_right;
	unsigned int motion_h_09, motion_h_10, motion_h_11;

	unsigned int hist_local_sum, hist_sum_localrange, hist_ratio_allrange=0, hist_local_ratio=0, hist2_sum;
	int i;
	unsigned int local_HistCnt_ratio[8],HistCnt_sum;
	unsigned char curr_motion_status = 0;

	unsigned char his_flag=0, Mean_value_flag=0, motion_flag=0;
	unsigned char DI_detect_Champagne_flag=0;
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);


	di_im_di_si_ma_total_fm_sum_RBUS ma_total_fm_sum;
	di_im_di_si_film_motion_c_RBUS di_si_film_motion_c;
	di_im_di_si_film_motion_h_t_RBUS di_si_film_motion_h_t;
	di_im_di_si_film_motion_h_b_RBUS di_si_film_motion_h_b;
	di_im_di_si_film_motion_v_l_RBUS di_si_film_motion_v_l;
	di_im_di_si_film_motion_v_r_RBUS di_si_film_motion_v_r;
	di_im_di_si_film_motion_h_09_RBUS di_si_film_motion_h_09;
	di_im_di_si_film_motion_h_10_RBUS di_si_film_motion_h_10;
	di_im_di_si_film_motion_h_11_RBUS di_si_film_motion_h_11;

	di_im_di_hfd_statistic_RBUS	im_di_hfd_statistic_Reg;


	im_di_hfd_statistic_Reg.regValue = rtd_inl(DI_IM_DI_HFD_STATISTIC_reg);

	//di_im_di_si_film_motion_h_09_RBUS im_di_si_film_motion_h_09_reg;
	//di_im_di_si_film_motion_h_10_RBUS im_di_si_film_motion_h_10_reg;
	//di_im_di_si_film_motion_h_11_RBUS im_di_si_film_motion_h_11_reg;


	ma_total_fm_sum.regValue = rtd_inl(DI_IM_DI_SI_MA_TOTAL_FM_SUM_reg);
	di_si_film_motion_c.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_C_reg);
	di_si_film_motion_h_t.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_T_reg);
	di_si_film_motion_h_b.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_B_reg);
	di_si_film_motion_v_l.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_V_L_reg);
	di_si_film_motion_v_r.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_V_R_reg);

	di_si_film_motion_h_09.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_09_reg);
	di_si_film_motion_h_10.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_10_reg);
	di_si_film_motion_h_11.regValue = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_11_reg);


	cur_total_motion = ma_total_fm_sum.total_frame_motion_sum;
	film_motion_c = di_si_film_motion_c.film_motionstatus_259_240;
	film_motion_top = di_si_film_motion_h_t.film_motionstatus_379_360;
	film_motion_bot = di_si_film_motion_h_b.film_motionstatus_339_320;
	film_motion_left = di_si_film_motion_v_l.film_motionstatus_319_300;
	film_motion_right = di_si_film_motion_v_r.film_motionstatus_279_260;

	motion_h_09 = di_si_film_motion_h_09.film_motionstatus_199_180;
	motion_h_10 = di_si_film_motion_h_10.film_motionstatus_219_200;
	motion_h_11 = di_si_film_motion_h_11.film_motionstatus_239_220;

	curr_motion_status = scalerVideo_GetCurMotionStatus();

	hist2_sum = 0;
	for(i=0;i<24;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		hist2_sum+= hue_hist_2[i];//already read info. from skin tone detector
	}
	hist2_sum+=1;

	hist_local_sum = hue_hist_2[3]+hue_hist_2[4];
	hist_sum_localrange = hue_hist_2[2]+hist_local_sum+hue_hist_2[5]+hue_hist_2[6];

	if (hist2_sum) //(hist2_sum); avoid divide by zero
		hist_ratio_allrange = hist_local_sum*100/hist2_sum;

	if (hist_sum_localrange)  // hist_sum_local could be zero when system booting
		hist_local_ratio = hist_local_sum*100/hist_sum_localrange;

	HistCnt_sum = 0;
	for(i=0;i<32;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		HistCnt_sum+= reg_HistCnt[i];//already read info. from skin tone detector
	}
	HistCnt_sum+=1;

//===================FOR add condiction avoid restaurant  (not OK)==========================================

		local_HistCnt_ratio[0]=100*(reg_HistCnt[0]+reg_HistCnt[1]+reg_HistCnt[2]+reg_HistCnt[3])/HistCnt_sum;
		local_HistCnt_ratio[1]=100*(reg_HistCnt[4]+reg_HistCnt[5]+reg_HistCnt[6]+reg_HistCnt[7])/HistCnt_sum;
		local_HistCnt_ratio[2]=100*(reg_HistCnt[8]+reg_HistCnt[9]+reg_HistCnt[10]+reg_HistCnt[11])/HistCnt_sum;
		local_HistCnt_ratio[3]=100*(reg_HistCnt[12]+reg_HistCnt[13]+reg_HistCnt[14]+reg_HistCnt[15])/HistCnt_sum;
		local_HistCnt_ratio[4]=100*(reg_HistCnt[16]+reg_HistCnt[17]+reg_HistCnt[18]+reg_HistCnt[19])/HistCnt_sum;
		local_HistCnt_ratio[5]=100*(reg_HistCnt[20]+reg_HistCnt[21]+reg_HistCnt[22]+reg_HistCnt[23])/HistCnt_sum;
		local_HistCnt_ratio[6]=100*(reg_HistCnt[24]+reg_HistCnt[25]+reg_HistCnt[26]+reg_HistCnt[27])/HistCnt_sum;
		local_HistCnt_ratio[7]=100*(reg_HistCnt[28]+reg_HistCnt[29]+reg_HistCnt[30]+reg_HistCnt[31])/HistCnt_sum;


	if(local_HistCnt_ratio[3]>=70 && local_HistCnt_ratio[3]<=90)
	{
		his_flag=1;
	}
	else
	{
		his_flag=0;
	}

	if((SmartPic_clue->Hist_Y_Mean_Value)>=38 && (SmartPic_clue->Hist_Y_Mean_Value)<=47)
	{
		Mean_value_flag=1;
	}
	else
	{
		Mean_value_flag=0;
	}

	if(motion_h_09<=300 && motion_h_10<=80 && motion_h_11<=60 && film_motion_left<=20 && film_motion_bot<=100 )
	{
		motion_flag=1;
	}
	else
	{
		motion_flag=0;
	}


	counter_file++;


	if( his_flag==1 && Mean_value_flag==1 && motion_flag==1 && (SmartPic_clue->di_motion_status)<=3 && im_di_hfd_statistic_Reg.regValue<=1000)
	{

		DI_detect_Champagne_flag =1;
	}
	else
	{
		DI_detect_Champagne_flag =0;
	}


	if(counter_file%10==0)
	{
		if(DI_detect_Champagne_flag==1)
		{
			VIP_DEBUG_PRINTF("oo---DI_detect_Champagne_flag=%d---oo\n",DI_detect_Champagne_flag);
		}
		else
		{

			VIP_DEBUG_PRINTF("oo---DI_detect_Champagne_flag=%d---oo\n",DI_detect_Champagne_flag);
/*
		ROSPrintf("o---film_motion_left = %d, MA_data[1] = %d, MA_data[2] = %d  ---o\n", film_motion_left, film_motion_bot, film_motion_c);
		ROSPrintf("oo---motion_h_09=%d, motion_h_10=%d, motion_h_11=%d---oo\n",motion_h_09,motion_h_10,motion_h_11);
		ROSPrintf("oo---Histogram_Mean_value=%d---oo\n",(SmartPic_clue->Hist_Y_Mean_Value));
		ROSPrintf("oo---motion_flag=%d, Mean_value_flag=%d,his_flag=%d---oo\n",motion_flag,Mean_value_flag,his_flag);
		for(i=0;i<8;i++)
		{
			ROSPrintf("ooo--- local_HistCnt_ratio[%d]=%d ---ooo\n",i,local_HistCnt_ratio[i]);
		}

		for(i=0;i<COLOR_HISTOGRAM_LEVEL;i++)
		{
			ROSPrintf(">>>>>>>>>>>>>>>> reg_HistCnt[%d] = %d <<<<<<<<<<<<<<<\n",i,reg_HistCnt[i]);
		}

		for(i=0; i<24; i++)
		{
			ROSPrintf(">>>>>>>>>>>>>>>> hue_hist_2[%d] = %d <<<<<<<<<<<<<<<\n",i,hue_hist_2[i]);
		}
*/
		}

}



	return DI_detect_Champagne_flag;


}

unsigned char Sony_radio_detect(unsigned char channel, unsigned int width, unsigned int height)
{
	unsigned int hist_local_sum, hist_sum_localrange, hist_ratio_allrange=0, hist_local_ratio=0, hist2_sum;
	unsigned int i;//, hue_hist[COLOR_HUE_HISTOGRAM_LEVEL];
	unsigned char radio_color_dete_config=0;
	unsigned int local_HistCnt_ratio[8],HistCnt_sum;
	unsigned char curr_motion_status = 0;
	static unsigned char pre_Saturation_detect_flag=1;

	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);
	unsigned char his_up_th=0, his_low_th=0;
	unsigned char which_source=255;

    curr_motion_status = scalerVideo_GetCurMotionStatus();

	hist2_sum = 0;
	for(i=0;i<24;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		hist2_sum+= hue_hist_2[i];//already read info. from skin tone detector
	}
	hist2_sum+=1;

	hist_local_sum = hue_hist_2[3]+hue_hist_2[4];
	hist_sum_localrange = hue_hist_2[2]+hist_local_sum+hue_hist_2[5]+hue_hist_2[6];

	if (hist2_sum) //(hist2_sum); avoid divide by zero
		hist_ratio_allrange = hist_local_sum*100/hist2_sum;

	if (hist_sum_localrange)  // hist_sum_local could be zero when system booting
		hist_local_ratio = hist_local_sum*100/hist_sum_localrange;

	HistCnt_sum = 0;
	for(i=0;i<32;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		HistCnt_sum+= reg_HistCnt[i];//already read info. from skin tone detector
	}
	HistCnt_sum+=1;

//===================FOR add condiction avoid restaurant  (not OK)==========================================
	if(HistCnt_sum>0)
	{
		local_HistCnt_ratio[0]=100*(reg_HistCnt[0]+reg_HistCnt[1]+reg_HistCnt[2]+reg_HistCnt[3])/HistCnt_sum;
		local_HistCnt_ratio[1]=100*(reg_HistCnt[4]+reg_HistCnt[5]+reg_HistCnt[6]+reg_HistCnt[7])/HistCnt_sum;
		local_HistCnt_ratio[2]=100*(reg_HistCnt[8]+reg_HistCnt[9]+reg_HistCnt[10]+reg_HistCnt[11])/HistCnt_sum;
		local_HistCnt_ratio[3]=100*(reg_HistCnt[12]+reg_HistCnt[13]+reg_HistCnt[14]+reg_HistCnt[15])/HistCnt_sum;
		local_HistCnt_ratio[4]=100*(reg_HistCnt[16]+reg_HistCnt[17]+reg_HistCnt[18]+reg_HistCnt[19])/HistCnt_sum;
		local_HistCnt_ratio[5]=100*(reg_HistCnt[20]+reg_HistCnt[21]+reg_HistCnt[22]+reg_HistCnt[23])/HistCnt_sum;
		local_HistCnt_ratio[6]=100*(reg_HistCnt[24]+reg_HistCnt[25]+reg_HistCnt[26]+reg_HistCnt[27])/HistCnt_sum;
		local_HistCnt_ratio[7]=100*(reg_HistCnt[28]+reg_HistCnt[29]+reg_HistCnt[30]+reg_HistCnt[31])/HistCnt_sum;
	}
//=====================================================================================


	if( (SmartPic_clue->saturationflag)==0)//add for hue_hist_2=0; no data
	{
		radio_color_dete_config=0;
		pre_Saturation_detect_flag = radio_color_dete_config;
	}
	else if( (SmartPic_clue->saturationflag)==3 && pre_Saturation_detect_flag==0)
	{
		radio_color_dete_config=0;
	}
	else
	{
		radio_color_dete_config=1;
		pre_Saturation_detect_flag=radio_color_dete_config;
	}

#if 0

	for(i=0;i<COLOR_HISTOGRAM_LEVEL;i++)
	{
		//scalervip_printf(AutoMADebugMsg,">>>>>>>>>>>>>>>> reg_HistCnt[%d] = %d <<<<<<<<<<<<<<<\n",i,reg_HistCnt[i]);
	}

	 //scalervip_printf(AutoMADebugMsg,"\nooo--- hue_hist_2---ooo\n");
	for(i=0; i<24; i++)
	{
		//scalervip_printf(AutoMADebugMsg,">>>>>>>>>>>>>>>> hue_hist_2[%d] = %d <<<<<<<<<<<<<<<\n",i,hue_hist_2[i]);
	}


	//if(MA_print_count%20 == 0)
		//ROSPrintf("%d,%d,%d\n",(SmartPic_clue->Hist_Y_Mean_Value),curr_motion_status,radio_color_dete_config);
#endif

	which_source=(RPC_system_info_structure_table->VIP_source);

	if((which_source>=VIP_QUALITY_HDMI_480I && which_source<=VIP_QUALITY_HDMI_576P)||(which_source>=VIP_QUALITY_YPbPr_480I && which_source<=VIP_QUALITY_YPbPr_576P))
	{
		his_up_th = 13;
		his_low_th = 7;
	}
	else if((which_source>=VIP_QUALITY_HDMI_720P && which_source<=VIP_QUALITY_HDMI_1080P))
	{
		his_up_th = 19;
		his_low_th = 16;
	}

	//if((SmartPic_clue->Hist_Y_Mean_Value)<12 && curr_motion_status<3 && radio_color_dete_config==0 )//sony demo
	if((SmartPic_clue->Hist_Y_Mean_Value)<=his_up_th && (SmartPic_clue->Hist_Y_Mean_Value)>=his_low_th && curr_motion_status<3 && radio_color_dete_config==0 )// for sony demo 480i,blu-ray 4:3,16:9
	{
		if(MA_print_count%30 ==0)
		{
			//ROSPrintf("ooo---Sony_radio_detect=1---ooo\n");
		}
//===================FOR add condiction avoid restaurant  (not OK)==========================================
		//for(i=0;i<8;i++)
		//{
			//scalervip_printf(AutoMADebugMsg,"ooo--- local_HistCnt_ratio[%d]=%d ---ooo\n",i,local_HistCnt_ratio[i]);
		//}
//===================FOR add condiction avoid restaurant  (not OK)==========================================
		return 1;
	}
	else
	{
		//ROSPrintf("ooo---Sony_radio_detect=0---ooo\n");
		//ROSPrintf("ooo--- Saturation_detect_flag=%d, radio_color_dete_config=%d, pre_Saturation_detect_flag=%d ---ooo\n",(SmartPic_clue->saturationflag),radio_color_dete_config,pre_Saturation_detect_flag);
		//ROSPrintf("ooo--- curr_motion_status = %d ---ooo\n",curr_motion_status);
		//ROSPrintf("ooo--- hist_ratio_allrange=%d, hist_local_ratio=%d ---ooo\n",hist_ratio_allrange,hist_local_ratio);
		//ROSPrintf("ooo--- Histogram_Mean_value=%d ---ooo\n",(SmartPic_clue->Hist_Y_Mean_Value));

		return 0;
	}

}

unsigned int black_white_detect_table[5][6] =
{
	{300,	1,		60000,		2		},	//NTSC
	{300,	1,		60000,		2		},	//PAL
	{1,		1,		40000,		40000	},	//SD
	{1,		1,		40000,		40000	},	//HD
	{1,		1,		40000,		40000	},	//VGA
};
unsigned char black_white_pattern_detect(void)
{
	color_icm_dm_uv_coring_RBUS dm_uv_coring_REG;
	unsigned int MA_hist2_sum;
	unsigned int hist2_sum;
	unsigned char i;
	unsigned char u_coring,v_coring;
	hist2_sum = 0;
	for(i=0;i<24;i++)
	{
		//hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
		hist2_sum+= hue_hist_2[i];//already read info. from skin tone detector
	}
	hist2_sum+=1;

	MA_hist2_sum = Lerp(SmartPic_clue->RTNR_MAD_count_Y_avg_ratio, black_white_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][0], black_white_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][1], black_white_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][2], black_white_detect_table[(SmartPic_clue->Remmping_Src_Timing_index)][3], 0, 0);

	dm_uv_coring_REG.regValue = rtd_inl(COLOR_ICM_DM_UV_Coring_reg);
	u_coring = dm_uv_coring_REG.u_coring;
	v_coring = dm_uv_coring_REG.v_coring;

#if black_white_pattern_log
	if(MA_print_count%30 ==0)
	{
		ROSPrintf(" RTNR_MAD_count_Y_sum_avg  = %d\n",RTNR_MAD_count_Y);
		ROSPrintf(" u_coring  = %d\n",u_coring);
		ROSPrintf(" MA_hist2_sum  = %d\n",MA_hist2_sum);
		ROSPrintf(" hist2_sum  = %d\n",hist2_sum);
		ROSPrintf(" (MA_hist2_sum - ((MA_hist2_sum*u_coring)>>7))  = %d\n",(MA_hist2_sum - ((MA_hist2_sum*u_coring)>>7)));
		if((hist2_sum<(MA_hist2_sum - ((MA_hist2_sum*u_coring)>>7))) == 0)
			ROSPrintf("1. %d < %d\n",hist2_sum ,(MA_hist2_sum - ((MA_hist2_sum*u_coring)>>7)));
	}
#endif

	if((hist2_sum<(MA_hist2_sum - ((MA_hist2_sum*u_coring)>>7))))
	{
		return 1;
	}
	else
	{
		return 0;
	}

}

//------------------------------------------------------
// Erin move 100305

//------------------------------------------------------
/**
 * Color histogram ISR
 *
 * @param	void
 * @return	void
 */
short SHP_Coef [VIP_QUALITY_SOURCE_NUM][VIP_QUALITY_D_PEAKING_NUM];

//--------------------------------------------------
// Move from Pacific Start , Erin 100305
//--------------------------------------------------

#if 0//frank@1127 reduce code
void drvif_color_AutoColorBarNR_ON(unsigned char channel)//Leo Chen add,20101227
{
	color_d_vc_global_ctrl_RBUS d_vc_global_ctrl_reg;
	d_vc_global_ctrl_reg.regValue = scaler_rtd_inl(COLOR_D_VC_GLOBAL_CTRL_reg);

	d_vc_global_ctrl_reg.m_sharp_en=0;
	//d_vc_global_ctrl_reg.m_icm_en=0; //affect colorbar detection, mark it
	drvif_color_setcdcti(channel,10);

	scaler_rtd_outl(COLOR_D_VC_GLOBAL_CTRL_reg, d_vc_global_ctrl_reg.regValue);

}

void drvif_color_AutoColorBarNR_OFF(unsigned char channel)//Leo Chen add,20101227
{
	color_d_vc_global_ctrl_RBUS d_vc_global_ctrl_reg;
	d_vc_global_ctrl_reg.regValue = scaler_rtd_inl(COLOR_D_VC_GLOBAL_CTRL_reg);

	d_vc_global_ctrl_reg.m_sharp_en=1;
	//d_vc_global_ctrl_reg.m_icm_en=1;//affect colorbar detection, mark it
	drvif_color_setcdcti(channel,TableDCTI);

	scaler_rtd_outl(COLOR_D_VC_GLOBAL_CTRL_reg, d_vc_global_ctrl_reg.regValue);
}
#endif

unsigned short H_Block_Pre1[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned short V_Block_Pre1[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned short H_Block_Pre2[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
unsigned short V_Block_Pre2[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

int drvif_color_colorbar_dectector(_clues* SmartPic_clue)//planck_HDMI
{
	unsigned char i;
	unsigned short Left_Total=0;
	unsigned short Right_Total=0;
	unsigned char Left_high=0;
	unsigned char imcolorbar_H_Ratio = 0;
	unsigned char imcolorbar_V_Ratio = 0;
	unsigned char imcolorbar_H_diff = 0;
	unsigned char imcolorbar_V_diff = 0;
	unsigned char imcolorbar_Hue = 0;
	unsigned short Max=0;
	unsigned short Min=65535;
	unsigned short H_Block_Diff[16] ;
	unsigned short V_Block_Diff[16] ;
	unsigned char H_Block_Diff_Count=0;
	unsigned char V_Block_Diff_Count=0;
	static unsigned char print_cnt=0;
	//static int imcolorbar_H_diff_temp = 0, imcolorbar_V_diff_temp=0;

	unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	for ( i=0 ; i<24 ; i++ )
	{
		if(hue_hist_2[i] != 0){
			imcolorbar_Hue = 1;
			break;
		}
		else{
			imcolorbar_Hue = 0;
		}
	}
	for(i=1;i<10;i++)
	{
		if(H_Block[i]<=Min)
			Min=H_Block[i];
		if(H_Block[i]>=Max)
			Max=H_Block[i];
	}
	if( (Max-Min)*100/(Min+1)<10 )
		imcolorbar_H_Ratio=1;

	if((print_cnt % 120) == 0)
	{
		//ROSPrintf("Max_H=%d\n",Max);
		//ROSPrintf("Min_H=%d\n",Min);
	}

	Max=0;
	Min=65535;
	for(i=0;i<15;i++)
	{
		if(V_Block[i]<=Min)
			Min=V_Block[i];
		if(V_Block[i]>=Max)
			Max=V_Block[i];
	}
	if( (Max-Min)*100/(Min+1)>4 )
		imcolorbar_V_Ratio=1;

	for(i=0;i<8;i++)
	{
		Left_Total+=V_Block[7-i];
		Right_Total+=V_Block[i+8];
	}

if((print_cnt % 300) == 0){

	//ROSPrintf("Max_V=%d\n",Max);
	//ROSPrintf("Min_V=%d\n",Min);

	//ROSPrintf("Left_Total=%d\n",Left_Total);
	//ROSPrintf("Right_Total=%d\n",Right_Total);
}

	if(((Left_Total*103)/(Right_Total+1))>200)
		Left_high=1;

	for(i=0;i<16;i++)
	{
		H_Block_Diff[i] = ABS(H_Block[i], H_Block_Pre2[i] );
		V_Block_Diff[i] = ABS(V_Block[i], V_Block_Pre2[i] );

		if(H_Block_Diff[i] <= 15){
			H_Block_Diff_Count++;
		}
		if(V_Block_Diff[i] <= 15){
			V_Block_Diff_Count++;
		}
	}
	if(H_Block_Diff_Count >= 15){
		imcolorbar_H_diff = 1;
	}
	if(V_Block_Diff_Count >= 15){
		imcolorbar_V_diff = 1;
	}

	for ( i=0 ; i<16 ; i++ )
	{
		H_Block_Pre2[i] = H_Block_Pre1[i];
		V_Block_Pre2[i] = V_Block_Pre1[i];
		H_Block_Pre1[i] = H_Block[i];
		V_Block_Pre1[i] = V_Block[i];
	}

#if 0
	if((print_cnt % 300) == 0){
		for(i=0;i<16;i++)
		{
			ROSPrintf("H_Block_Diff[%d]=%d, V_Block_Diff[%d]=%d\n",i,H_Block_Diff[i],i,V_Block_Diff[i]);
		}
		ROSPrintf("H_Block_Diff_Count=%d, V_Block_Diff_Count=%d\n",H_Block_Diff_Count,V_Block_Diff_Count);
		ROSPrintf("imcolorbar_H_diff_temp=%d, imcolorbar_V_diff_temp=%d\n",imcolorbar_H_diff_temp,imcolorbar_V_diff_temp);
		ROSPrintf("imcolorbar_H_diff=%d, imcolorbar_V_diff=%d, imcolorbar_Hue= %d\n",imcolorbar_H_diff,imcolorbar_V_diff,imcolorbar_Hue);
		ROSPrintf("imcolorbar_H_Ratio=%d, imcolorbar_V_Ratio=%d, Left_high= %d\n",imcolorbar_H_Ratio,imcolorbar_V_Ratio,Left_high);

		if(( imcolorbar_H_diff_temp>=2 || imcolorbar_V_diff_temp>=2))
		{
			ROSPrintf("diff_temp = 1\n");
		}

		if((imcolorbar_H_diff ==1 || imcolorbar_V_diff ==1))
		{
			ROSPrintf("diff = 1\n");
		}

		if(( (imcolorbar_H_diff ==1) || (imcolorbar_V_diff ==1) || ((imcolorbar_H_diff_temp>=2) || (imcolorbar_V_diff_temp>=2))))
		{
			ROSPrintf("mix_diff = 1\n");
		}

	}
#endif

	print_cnt++;
	if((imcolorbar_H_Ratio ==1)  && (imcolorbar_V_Ratio ==1) && (Left_high==1) && ( (imcolorbar_H_diff ==1) || (imcolorbar_V_diff ==1) ) && imcolorbar_Hue==1 )
	{
		if((print_cnt % 120) == 0){
		/*
			ROSPrintf(" i'm a vertical colobar!!\n");
		*/
				print_cnt = 0;
		};
		return 1;
	}
	else
	{
			if(((print_cnt % 120) == 0)){
			/*
				ROSPrintf(" Not a vertical colobar!!\n");
				ROSPrintf("H_Block_Diff_Count=%d, V_Block_Diff_Count=%d\n",H_Block_Diff_Count,V_Block_Diff_Count);
				ROSPrintf("imcolorbar_H_diff_temp=%d, imcolorbar_V_diff_temp=%d\n",imcolorbar_H_diff_temp,imcolorbar_V_diff_temp);
				ROSPrintf("imcolorbar_H_diff=%d, imcolorbar_V_diff=%d, imcolorbar_Hue= %d\n",imcolorbar_H_diff,imcolorbar_V_diff,imcolorbar_Hue);
				ROSPrintf("imcolorbar_H_Ratio=%d, imcolorbar_V_Ratio=%d, Left_high= %d\n",imcolorbar_H_Ratio,imcolorbar_V_Ratio,Left_high);
				ROSPrintf("Max_H=%d\n",Max);
				ROSPrintf("Min_H=%d\n",Min);
			*/
				print_cnt = 0;
			}

		return 0;
	}

}


int drvif_color_colorbar_dectector_by_SatHueProfile(_clues* SmartPic_clue)//planck_HDMI
{
	unsigned char i;
	unsigned char imcolorbar_H_diff = 0;
	unsigned char imcolorbar_V_diff = 0;
	unsigned char imcolorbar_Hue = 0;

	unsigned short Max_range[6]={0,0,0,0,0,0};
	unsigned short Min_range[6]={65535,65535,65535,65535,65535,65535};
	unsigned short diff[6]={0,0,0,0,0,0},max_ratio=0,min_ratio=0;
	unsigned short diff_min_index=6,min_diff=65535,diff_max_index=6,max_diff=0;

	unsigned short H_Block_Diff[16] ;
	unsigned short V_Block_Diff[16] ;
	unsigned char H_Block_Diff_Count=0;
	unsigned char V_Block_Diff_Count=0;

	int symmetry_score = 0, hue_score=0, color_bar_score =0, HV_diff_score=0;
	static short debounce = 5, pre_color_bar_score=255;
	unsigned short colorbar_hue_ratio_total = 0, avg_hue_ratio=0, diff_sum_hue_ratio=0;
	unsigned short hue_ratio[6];
	unsigned char sat_flag = 0;

	unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	//== symmetry judge for H====
	for(i=0;i<16;i++)
	{
		//up
	 	if((i>=1) && (i<=7))
	  	{
	  		if(H_Block[i]<=Min_range[0])
				Min_range[0]=H_Block[i];
			if(H_Block[i]>=Max_range[0])
				Max_range[0]=H_Block[i];
	 	}
		//middle
		if((i>=6) && (i<=10))
	  	{
	  		if(H_Block[i]<=Min_range[1])
				Min_range[1]=H_Block[i];
			if(H_Block[i]>=Max_range[1])
				Max_range[1]=H_Block[i];
	 	}
		//down
		if((i>=8) && (i<=14))
	  	{
	  		if(H_Block[i]<=Min_range[2])
				Min_range[2]=H_Block[i];
			if(H_Block[i]>=Max_range[2])
				Max_range[2]=H_Block[i];
	 	}
		//extend_up
		if((i>=1) && (i<=10))
	  	{
	  		if(H_Block[i]<=Min_range[3])
				Min_range[3]=H_Block[i];
			if(H_Block[i]>=Max_range[3])
				Max_range[3]=H_Block[i];
	 	}
		//extend_down
		if((i>=6) && (i<=14))
	  	{
	  		if(H_Block[i]<=Min_range[4])
				Min_range[4]=H_Block[i];
			if(H_Block[i]>=Max_range[4])
				Max_range[4]=H_Block[i];
	 	}
		//up_two_bin
	 	if(/*(i>=0) && */(i<=1))
	  	{
	  		if(H_Block[i]<=Min_range[5])
				Min_range[5]=H_Block[i];
			if(H_Block[i]>=Max_range[5])
				Max_range[5]=H_Block[i];
	 	}
	}

	for(i=0;i<6;i++)
	{
		diff[i]=Max_range[i]-Min_range[i];
		if(diff[i]<=min_diff)
		{
			min_diff = diff[i];
			diff_min_index = i;
		}
		if(diff[i]>=max_diff)
		{
			max_diff = diff[i];
			diff_max_index = i;
		}
	}

	min_ratio = (min_diff*1000)/(Min_range[diff_min_index]+1);
	max_ratio = (max_diff*1000)/(Min_range[diff_max_index]+1);

	if(min_ratio<=10)
	{
		symmetry_score = min_ratio;
	}
	else
	{
		symmetry_score = max_ratio - min_ratio;
		if(symmetry_score<=0)
		{
			symmetry_score =0;
		}
		else if(symmetry_score >= 64)
		{
			symmetry_score =64;
		}
	}

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
	{
		for(i=0;i<6;i++)
		{
			ROSPrintf("diff[%d]=%d\n",i,diff[i]);
		}
		ROSPrintf("max_rario=%d, %d\n",max_ratio,Min_range[diff_min_index]);
		ROSPrintf("min_rario=%d, %d\n",min_ratio,Max_range[diff_min_index]);
	}
	//========================

	//======== motion judge =============
	for(i=0;i<16;i++)
	{
		H_Block_Diff[i] = ABS(H_Block[i], H_Block_Pre2[i] );
		V_Block_Diff[i] = ABS(V_Block[i], V_Block_Pre2[i] );

		if(H_Block_Diff[i] <= 15){
			H_Block_Diff_Count++;
		}
		if(V_Block_Diff[i] <= 15){
			V_Block_Diff_Count++;
		}
	}

	if(H_Block_Diff_Count >= 10)
	{
		imcolorbar_H_diff = 1;
	}

	if(V_Block_Diff_Count >= 10)
	{
		imcolorbar_V_diff = 1;
	}

	HV_diff_score = (H_Block_Diff_Count + V_Block_Diff_Count) - 20;

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
	{
		ROSPrintf("H_Block_Diff_Count=%d, V_Block_Diff_Count=%d\n",H_Block_Diff_Count,V_Block_Diff_Count);
	}
	//===============================

	//====== hue judge= =======

	//R-> hue[2], G->hue[10], B->hue[17]~[18], C->hue[13]~[14], M->hue[21]~[22] ,Y->hue[6]

	hue_ratio[0]=(SmartPic_clue->Hue_Main_His_Ratio)[1]+(SmartPic_clue->Hue_Main_His_Ratio)[2];//R
	hue_ratio[1]=(SmartPic_clue->Hue_Main_His_Ratio)[9]+(SmartPic_clue->Hue_Main_His_Ratio)[10];//G
	hue_ratio[2]=(SmartPic_clue->Hue_Main_His_Ratio)[17]+(SmartPic_clue->Hue_Main_His_Ratio)[18];//B
	hue_ratio[3]=(SmartPic_clue->Hue_Main_His_Ratio)[13]+(SmartPic_clue->Hue_Main_His_Ratio)[14];//C
	hue_ratio[4]=(SmartPic_clue->Hue_Main_His_Ratio)[21]+(SmartPic_clue->Hue_Main_His_Ratio)[22];//M
	hue_ratio[5]=(SmartPic_clue->Hue_Main_His_Ratio)[5]+(SmartPic_clue->Hue_Main_His_Ratio)[6];//Y

	for ( i=0 ; i<6 ; i++ )
	{
		if(hue_ratio[i] != 0)
		{
			imcolorbar_Hue = 1;
			break;
		}
		else
		{
			imcolorbar_Hue = 0;
		}
	}

	for(i = 0; i < 6; i++)
	{
		colorbar_hue_ratio_total += hue_ratio[i];
	}

	avg_hue_ratio = colorbar_hue_ratio_total/6;

	for(i = 0; i < 6; i++)
	{
		diff_sum_hue_ratio += ABS(hue_ratio[i],avg_hue_ratio);
	}

	//more score, less colorbar
	if(colorbar_hue_ratio_total<=800)
	{
		hue_score = 64;
	}
	else
	{
		hue_score = diff_sum_hue_ratio-70;
		if(hue_score<=0)
		{
			hue_score =0;
		}
		else if(hue_score>=64)
		{
			hue_score =64;
		}
	}
	//=====================

	//====== sat judge= =======
	if(SmartPic_clue->sat_ratio_mean_value>=43)
	{
		sat_flag = 1;
	}
	else
	{
		sat_flag = 0;
	}
	//=====================

	//color_bar_score => 0 ~ 160, more score, more colorbar
	color_bar_score = ((64- hue_score)+(64-symmetry_score))*sat_flag*imcolorbar_Hue + HV_diff_score;

	if(color_bar_score<=0)
	{
		color_bar_score =0;
	}

	if( abs_value(pre_color_bar_score-color_bar_score)>1 )
	{
		debounce++;
	}
	else
	{
		debounce--;
	}

	if(debounce<0)
		debounce =0;

	if(debounce>5)
		debounce =5;

	if(debounce>=5)
	{
		pre_color_bar_score = color_bar_score;
	}

	for ( i=0 ; i<16 ; i++ )
	{
		H_Block_Pre2[i] = H_Block_Pre1[i];
		V_Block_Pre2[i] = V_Block_Pre1[i];
		H_Block_Pre1[i] = H_Block[i];
		V_Block_Pre1[i] = V_Block[i];
	}

#if 1
if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ColorBar==TRUE))
{
	ROSPrintf("=== Profile ===\n");
	ROSPrintf(" DispLen=%d, DispWid=%d\n",SmartPic_clue->SCALER_DISP_INFO.DispLen,SmartPic_clue->SCALER_DISP_INFO.DispWid);
	for(i=0;i<16;i++)
	{
		//ROSPrintf("[%d ] H = %d, H_Pre2=%d, H_diff=%d, H_Pre1=%d \n",i,H_Block[i],H_Block_Pre2[i],H_Block_Diff[i],H_Block_Pre1[i]);
		ROSPrintf("[%d ] H = %d\n",i,H_Block[i]);

	}
/*
	for(i=0;i<16;i++)
	{
		//ROSPrintf("[%d ] V = %d, V_Pre2=%d, V_diff=%d, V_Pre1=%d \n",i,V_Block[i],V_Block_Pre2[i],V_Block_Diff[i],V_Block_Pre1[i]);
		ROSPrintf("[%d ] V = %d\n",i,V_Block[i]);
	}
*/
	for(i=0;i<24;i++)
	{
		ROSPrintf("[%d ] HUE = %d, ratio=%d\n",i,hue_hist_2[i], (SmartPic_clue->Hue_Main_His_Ratio)[i]);
	}

	for(i = 0; i < 6; i++)
	{
		ROSPrintf("hue_ratio[%d] = %d\n",i,hue_ratio[i]);
	}

	for(i = 0; i < 32; i++)
	{
		ROSPrintf("[%d ] sat = %d\n",i,(SmartPic_clue->Sat_Main_His_Ratio)[i]);
	}
	ROSPrintf("sat_ratio_mean_value=%d\n",SmartPic_clue->sat_ratio_mean_value);
	ROSPrintf("sat_sumcnt_ratio sat_=%d, hue = %d\n",SmartPic_clue->sat_sumcnt_ratio,SmartPic_clue->hue_sumcnt_ratio);
	ROSPrintf("colorbar_hue_ratio_total=%d\n",colorbar_hue_ratio_total);
	ROSPrintf("avg_hue_ratio=%d,diff_sum_hue_ratio=%d\n",avg_hue_ratio,diff_sum_hue_ratio);
	ROSPrintf("sat_flag=%d,time_H_diff=%d\n",sat_flag, imcolorbar_H_diff);
	ROSPrintf("H_Block_Diff_Count=%d, V_Block_Diff_Count=%d\n",H_Block_Diff_Count,V_Block_Diff_Count);
	ROSPrintf("HV_diff_score=%d\n",HV_diff_score);
	ROSPrintf("symmetry_score=%d\n",symmetry_score);
	ROSPrintf("hue_score=%d\n",hue_score);
	ROSPrintf("color_bar_score=%d,pre_color_bar_score=%d\n",color_bar_score,pre_color_bar_score);

	ROSPrintf("=== detector flag ===\n");
	ROSPrintf("imcolorbar_Hue= %d\n",imcolorbar_Hue);


}
#endif

	return pre_color_bar_score;

}


/*==================================================*/
/*                                                                                                                 */
/* Progressive film detection                                                              */
/*                                                                                                                 */
/*================================================== */
void p_film_detection(void)
{
#if 0	//20150706 roger mark for compiler error
	unsigned int film_cnt_avg=0;
	unsigned char i;
	di_di_p_film_ctrl1_RBUS di_p_film_ctrl1_reg;
	di_di_p_film_read_RBUS di_p_film_read_reg;

	di_p_film_read_reg.regValue= rtd_inl(DI_DI_P_FILM_READ_reg);
	film_cnt[9]=film_cnt[8];
	film_cnt[8]=film_cnt[7];
	film_cnt[7]=film_cnt[6];
	film_cnt[6]=film_cnt[5];
	film_cnt[5]=film_cnt[4];
	film_cnt[4]=film_cnt[3];
	film_cnt[3]=film_cnt[2];
	film_cnt[2]=film_cnt[1];
	film_cnt[1]=film_cnt[0];
	film_cnt[0]=di_p_film_read_reg.prgfilm_motion_cnt;

	for(i=0;i<10;i++)
		film_cnt_avg=film_cnt_avg+film_cnt[i];
	film_cnt_avg=film_cnt_avg/10;
	di_p_film_ctrl1_reg.regValue= rtd_inl(DI_DI_P_FILM_CTRL1_reg);
	di_p_film_ctrl1_reg.prgfilm_fw_motion_cnt_avg = film_cnt_avg;
	rtd_outl(DI_DI_P_FILM_CTRL1_reg, di_p_film_ctrl1_reg.regValue);
	//scalerDrvPrint("",);
#endif
}

int scalerVIP_pwm_set(int index, int duty) {
	misc_pwm_pwm0_duty_set_RBUS 	pwm_duty_set_reg;
	int duty_max;

	static unsigned int printcount=0;
	printcount++;

	#if DCR_DEBUG_TPV
  		ROSPrintf("\033[1;31m %s: index = %d, duty = %d   m_isIncreaseMode=%d \033[m\n", __FUNCTION__, index, duty,m_isIncreaseMode);
	#endif

	if (index >= 8) return -1;

	pwm_duty_set_reg.regValue = rtd_inl(MISC_PWM_PWM0_DUTY_SET_reg + index * 12);
	duty_max = pwm_duty_set_reg.pwm0_totalcnt;

	if (duty >= duty_max) duty = duty_max;
	if (duty <= 0) duty = 0;
	pwm_duty_set_reg.pwm0_dut = duty;

	#if DCR_DEBUG_TPV
		ROSPrintf("\033[1;31m pwm_duty_set_reg.pwm0_dut = %d  duty_max=%d,m_BL_LV_Act_Max = %d \033[m\n", pwm_duty_set_reg.pwm0_dut,duty_max,m_BL_LV_Act_Max);
	#endif
	rtd_outl(MISC_PWM_PWM0_DUTY_SET_reg + index * 12, pwm_duty_set_reg.regValue);
	return 0;

}
unsigned char scalerVIP_pwm_get(int index) {
	misc_pwm_pwm0_duty_set_RBUS 	pwm_duty_set_reg;

	if (index >= 8) return -1;

	pwm_duty_set_reg.regValue = rtd_inl(MISC_PWM_PWM0_DUTY_SET_reg + index * 12);

	return pwm_duty_set_reg.pwm0_dut;
}

int scalerVIP_iso_pwm_set(int index, int duty) {

	iso_misc_pwm_mis_pwm0_duty_set_RBUS 	pwm_duty_set_reg;
	int duty_max;

	#if DCR_DEBUG_TPV
		ROSPrintf("\033[1;31m %s: index = %d, duty = %d   m_isIncreaseMode=%d  \033[m\n", __FUNCTION__, index, duty, m_isIncreaseMode);
	#endif

	if (index >= 8) return -1;

	pwm_duty_set_reg.regValue = rtd_inl(ISO_MISC_PWM_MIS_PWM0_DUTY_SET_reg + index * 12);
	duty_max = pwm_duty_set_reg.mis_pwm0_totalcnt;

	if (duty >= duty_max) duty = duty_max;
	if (duty <= 0) duty = 0;
	pwm_duty_set_reg.mis_pwm0_dut = duty;

	#if DCR_DEBUG_TPV
		ROSPrintf("\033[1;31m pwm_duty_set_reg.pwm0_dut = %d  duty_max=%d,m_BL_LV_Act_Max = %d \033[m\n", pwm_duty_set_reg.pwm0_dut,duty_max,m_BL_LV_Act_Max);
	#endif
	rtd_outl(ISO_MISC_PWM_MIS_PWM0_DUTY_SET_reg + index * 12, pwm_duty_set_reg.regValue);

	return 0;
}
unsigned char scalerVIP_iso_pwm_get(int index) {

	iso_misc_pwm_mis_pwm0_duty_set_RBUS 	pwm_duty_set_reg;

	if (index >= 8) return -1;
	pwm_duty_set_reg.regValue = rtd_inl(ISO_MISC_PWM_MIS_PWM0_DUTY_SET_reg + index * 12);

	return pwm_duty_set_reg.mis_pwm0_dut;
}

void scalerVIP_IoGpio_SetPwmDuty(unsigned int pwmInfo, unsigned int duty)
{
	unsigned int pin_type, pwmNum;

	pin_type = pwmInfo >> 16;
	pwmNum = pwmInfo & 0x0000FFFF;

	pthread_mutex_lock(&gpio_mutex);
	if (pin_type) { // iso
		scalerVIP_iso_pwm_set(pwmNum, duty);
	}
	else { //mis
		scalerVIP_pwm_set(pwmNum, duty);
	}
	pthread_mutex_unlock(&gpio_mutex);
}
unsigned char scalerVIP_IoGpio_GetPwmDuty(unsigned int pwmInfo)
{
	UINT32 pin_type, pwmNum;

	pin_type = pwmInfo >> 16;
	pwmNum = pwmInfo & 0x0000FFFF;

	if (pin_type) { // iso
		return scalerVIP_iso_pwm_get(pwmNum);
	}
	else { //mis
		return scalerVIP_pwm_get(pwmNum);
	}
}

void scalerVIP_DCR_TPV_TV()
{
	scalerVIP_TVSource_Separation();
	if(m_bIsTVSource)
	{
		scalerVIP_DCR_TPV();
	}
	else   //not tv source
	{
		if(DCR_set_mapping==FALSE)  //20130502
		{
			int i,offset;
			#ifdef fix_DCR_Table_memory
			offset=0;//2*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM;
			for(i=0; i<5;i++)
			{
				MV_ref[i] = DCR_Table_TPV_non_TV[offset+0*DCT_TABLE_NUM+i];
				BL_ref[i] = DCR_Table_TPV_non_TV[offset+1*DCT_TABLE_NUM+i];
				BL_Duty_ref[i]=DCR_Table_TPV_non_TV[offset+2*DCT_TABLE_NUM+i];
				Duty_ref[i]=DCR_Table_TPV_non_TV[offset+3*DCT_TABLE_NUM+i];

				ROSPrintf("\n [DCR] MV_ref[%d]=%d, BL_ref[%d]=%d,",i,MV_ref[i],i,BL_ref[i]);
				ROSPrintf("\n [DCR] BL_Duty_ref[%d]=%d, Duty_ref[%d]=%d\n",i,BL_Duty_ref[i],i,Duty_ref[i]);



			}
			m_DCR_mode = DCR_Table_TPV_non_TV[offset+4*DCT_TABLE_NUM+0];
			m_frame_need_SC=DCR_Table_TPV_non_TV[offset+4*DCT_TABLE_NUM+1];
			m_frame_need_NML=DCR_Table_TPV_non_TV[offset+4*DCT_TABLE_NUM+2];
			m_stable_buf_thl=DCR_Table_TPV_non_TV[offset+4*DCT_TABLE_NUM+3];
			m_DZ_break_thl=DCR_Table_TPV_non_TV[offset+4*DCT_TABLE_NUM+4];
			ROSPrintf("\n [DCR] DCR_TABLE[4]=%d,  %d,  %d,	%d\n",m_frame_need_SC,m_frame_need_NML,m_stable_buf_thl,m_DZ_break_thl);
			#else
			offset=2*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM;
			for(i=0; i<5;i++)
			{
				MV_ref[i] = DCR_TABLE[offset+0*DCT_TABLE_NUM+i];
				BL_ref[i] = DCR_TABLE[offset+1*DCT_TABLE_NUM+i];
				BL_Duty_ref[i]=DCR_TABLE[offset+2*DCT_TABLE_NUM+i];
				Duty_ref[i]=DCR_TABLE[offset+3*DCT_TABLE_NUM+i];

				ROSPrintf("\n [DCR] MV_ref[%d]=%d, BL_ref[%d]=%d,",i,MV_ref[i],i,BL_ref[i]);
				ROSPrintf("\n [DCR] BL_Duty_ref[%d]=%d, Duty_ref[%d]=%d\n",i,BL_Duty_ref[i],i,Duty_ref[i]);



			}
			m_DCR_mode = DCR_TABLE[offset+4*DCT_TABLE_NUM+0];
			m_frame_need_SC=DCR_TABLE[offset+4*DCT_TABLE_NUM+1];
			m_frame_need_NML=DCR_TABLE[offset+4*DCT_TABLE_NUM+2];
			m_stable_buf_thl=DCR_TABLE[offset+4*DCT_TABLE_NUM+3];
			m_DZ_break_thl=DCR_TABLE[offset+4*DCT_TABLE_NUM+4];
			ROSPrintf("\n [DCR] DCR_TABLE[4]=%d,  %d,  %d,	%d\n",m_frame_need_SC,m_frame_need_NML,m_stable_buf_thl,m_DZ_break_thl);
			#endif
			DCR_set_mapping=TRUE;
		}

		/* ======================= */
		/* ======= On/Off DCR ======= */
		/* ======================= */
	#if DCR_DEBUG_TPV
		if((MA_print_count % 300) == 0)
		{
			ROSPrintf("DCR_Table_DEBUG\n");
			ROSPrintf(" %d	%d	%d	%d	%d\n", MV_ref[0],MV_ref[1],MV_ref[2],MV_ref[3],MV_ref[4] );
			ROSPrintf(" %d	%d	%d	%d	%d\n", BL_ref[0],BL_ref[1],BL_ref[2],BL_ref[3],BL_ref[4] );
			ROSPrintf(" %d	%d	%d	%d	%d\n", BL_Duty_ref[0],BL_Duty_ref[1],BL_Duty_ref[2],BL_Duty_ref[3],BL_Duty_ref[4] );
			ROSPrintf(" %d	%d	%d	%d	%d\n", Duty_ref[0],Duty_ref[1],Duty_ref[2],Duty_ref[3],Duty_ref[4] );
			ROSPrintf("APL = %d  Motion_Value = %d\n",SmartPic_clue->Hist_Y_Mean_Value,scalerVIP_Get_Profile_Motion());
		}
	#endif
		if((m_DCR_On_Off == TRUE) && (TV_05_style_ON == 0))
		{
				if(frame_idx < 20){  // frame_idx fix
					frame_idx++;
				}
				else{
					drvif_color_ma_DCR_new(m_frame_need_SC, m_frame_need_NML, m_stable_buf_thl, m_DZ_break_thl);
				}
		}

		m_last_DCR_On_Off=m_DCR_On_Off;

		log_count++;

	}

}
void scalerVIP_DCR_TPV()
{
	#if 0
		if((MA_print_count % 300) == 0){
		ROSPrintf("m_nTPV_New_DCR_isr\n");
		ROSPrintf("======DCR_On_Off=%d,  DetectMotion=%d, Motion_Par_In=%d=========== \n", m_DCR_On_Off,m_bDetectMotion,m_bMotion_Par_Ini);
		}
	#endif
	//only APL buffer
	unsigned char nAPL_frame=50;
	if((MA_print_count % nAPL_frame) == 0){
		RecordAPL((unsigned char)(SmartPic_clue->Hist_Y_Mean_Value));
	}
	if(frame_idx < DCR_Table_TPV[2*DCR_TABLE_COL_NUM+4]){
		frame_idx++;
	}
	else
	{
		//DCR setting update
		unsigned char idx_c,offset;
		#ifdef fix_DCR_Table_2694A_global
		offset=DCR_TABLE_COL_NUM*2;
		for(idx_c=0; idx_c<DCR_TABLE_COL_NUM*2;idx_c++)
		{
			DCR_Table_TPV[offset+idx_c]=DCR_Table_TPV_global_setting[idx_c];
		}
		#else
		unsigned char idx_r;
		for(idx_r=DCR_TABLE_ROW_NUM-1;idx_r>=DCR_TABLE_ROW_NUM-2;idx_r--)
			for(idx_c=0;idx_c<DCR_TABLE_COL_NUM;idx_c++)
			{
				offset=m_DCR_On_Off*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM+idx_r*DCR_TABLE_COL_NUM+idx_c;
				DCR_Table_TPV[(idx_r-2)*DCR_TABLE_COL_NUM+idx_c] = DCR_TABLE[offset];
			}
		#endif
		drvif_color_Plan_DCR_Curve();


		//detect motion
		#if 1
		if( (GetMaxValue(&APL_Buf[0],APL_Buf_NUM) - GetMinValue(&APL_Buf[0],APL_Buf_NUM)) <= DCR_Table_TPV[m_nAPL_Tolerate] )
			m_bDetectMotion = FALSE;
		else
			m_bDetectMotion = TRUE;
		#if DCR_DEBUG_TPV
		unsigned char i;
		ROSPrintf("DetectMotion_DEBUG\n");
		for(i=0;i<APL_Buf_NUM;i++)
			ROSPrintf(" =%d=",APL_Buf[i]);
		ROSPrintf("\nDetectMotion_DEBUG\n");
		#endif
		#else
		if(DCR_Table_TPV[m_nMotion_Th] >= scalerVIP_Get_Profile_Motion())
		{	//((SmartPic_clue->Hist_Y_Mean_Value)>=18 && (SmartPic_clue->Hist_Y_Mean_Value)<=19)  Ec
			if(( ( (GetMaxValue(&APL_Buf[0],APL_Buf_NUM) - GetMinValue(&APL_Buf[0],APL_Buf_NUM)) == 0 )&& (scalerVIP_Get_Profile_Motion()>=19 && scalerVIP_Get_Profile_Motion()<=24))||(scalerVIP_Get_Profile_Motion()<=2))
				m_bDetectMotion = FALSE;
			else
				m_bDetectMotion = TRUE;
		}
		else
			m_bDetectMotion = TRUE;
		#endif
		if(m_bDetectMotion == m_bMotion_Par_Ini) //Motion Detect update
		{
			drvif_color_Plan_DCR_Curve();
			m_bMotion_Par_Ini = !m_bMotion_Par_Ini;
		}
		#if DCR_DEBUG_TPV
		//if((MA_print_count % 300) == 0)
		{
			ROSPrintf("DCR_Table_DEBUG\n");
			ROSPrintf(" %d	%d	%d	%d	%d\n", DCR_Table_TPV[0],DCR_Table_TPV[1],DCR_Table_TPV[2],DCR_Table_TPV[3],DCR_Table_TPV[4] );
			ROSPrintf(" %d	%d	%d	%d	%d\n", DCR_Table_TPV[5],DCR_Table_TPV[6],DCR_Table_TPV[7],DCR_Table_TPV[8],DCR_Table_TPV[9] );
			ROSPrintf(" %d	%d	%d	%d	%d\n", DCR_Table_TPV[10],DCR_Table_TPV[11],DCR_Table_TPV[12],DCR_Table_TPV[13],DCR_Table_TPV[14] );
			ROSPrintf(" %d	%d	%d	%d	%d\n", DCR_Table_TPV[15],DCR_Table_TPV[16],DCR_Table_TPV[17],DCR_Table_TPV[18],DCR_Table_TPV[19] );
			//ROSPrintf("DCC_Histogram_Mean_value = %d	m_DCR_Max_Value = %d   Motion_Value = %d\n",DCC_Histogram_Mean_value,m_BL_LV_From_User,scalerVIP_Get_Profile_Motion());
			ROSPrintf("APL = %d  Motion_Value = %d\n",SmartPic_clue->Hist_Y_Mean_Value,scalerVIP_Get_Profile_Motion());
		}
		#endif
		frame_idx = 0;
		/* ======================= */
		/* ======= On/Off DCR ==&& ==DCR Default=== */
		/* ======================= */
		if( m_bDefault_OFF || m_DCR_On_Off )
			drvif_color_ma_DCR_TPV(DCR_Table_TPV, (SmartPic_clue->Hist_Y_Mean_Value),m_BL_LV_From_User);
		m_last_DCR_On_Off=m_DCR_On_Off;
	}

}

void scalerVIP_DCR_OLD()
{
	if(DCR_TABLE == NULL)
		return;

	if(DCR_set_mapping==FALSE){
		int i;
		for(i=0; i<5;i++) {
			MV_ref[i] = DCR_TABLE[0*DCT_TABLE_NUM+i];
			BL_ref[i] = DCR_TABLE[1*DCT_TABLE_NUM+i];
			BL_Duty_ref[i]=DCR_TABLE[2*DCT_TABLE_NUM+i];
			Duty_ref[i]=DCR_TABLE[3*DCT_TABLE_NUM+i];

			if((MA_print_count % 300) == 0){
				printk(KERN_NOTICE "\n [DCR] MV_ref[%d]=%d, BL_ref[%d]=%d,",i,MV_ref[i],i,BL_ref[i]);
				printk(KERN_NOTICE "\n [DCR] BL_Duty_ref[%d]=%d, Duty_ref[%d]=%d\n",i,BL_Duty_ref[i],i,Duty_ref[i]);
			}
		}

		m_DCR_mode = DCR_TABLE[4*DCT_TABLE_NUM+0];
		m_frame_need_SC=DCR_TABLE[4*DCT_TABLE_NUM+1];
		m_frame_need_NML=DCR_TABLE[4*DCT_TABLE_NUM+2];
		m_stable_buf_thl=DCR_TABLE[4*DCT_TABLE_NUM+3];
		m_DZ_break_thl=DCR_TABLE[4*DCT_TABLE_NUM+4];
		if((MA_print_count % 300) == 0)
			printk(KERN_NOTICE "\n [DCR] DCR_TABLE[4]=%d,  %d,  %d,  %d\n",m_frame_need_SC,m_frame_need_NML,m_stable_buf_thl,m_DZ_break_thl);

		DCR_set_mapping=TRUE;
	}

	/* ======================= */
	/* ======= On/Off DCR ======= */
	/* ======================= */
	if((m_DCR_On_Off == TRUE) && (TV_05_style_ON == 0)) {
		drvif_color_ma_DCR_new(m_frame_need_SC, m_frame_need_NML, m_stable_buf_thl, m_DZ_break_thl);
	}

	m_last_DCR_On_Off=m_DCR_On_Off;

	if(m_DCR_On_Off == TRUE){
		//drvif_color_TSB_Active_Backlight_Control();
	}
	log_count++;

}
void scalerVIP_DCR_TPV_2694A()
{
	#if DCR_DEBUG_TPV
	if(MA_print_count%100==0)
		ROSPrintf("\n=== m_nDCR_Mode = %d\n",m_nDCR_Mode);
	#endif
	if(m_nDCR_Mode == 1 || m_nDCR_Mode == 2)
		scalerVIP_DCR_TPV_Multi_Mode();
	else
		scalerVIP_DCR_TPV();
}

void scalerVIP_DCR_TPV_TV_2694A()
{
	scalerVIP_TVSource_Separation();
	if(m_bIsTVSource)
	{
		scalerVIP_DCR_TPV_2694A();
	}
	else   //not tv source
	{
		scalerVIP_DCR_TPV_Multi_Mode();
	}
}
//1=standard, 2=best power, 3=best picture
void scalerVIP_DCR_TPV_Multi_Mode()
{
	unsigned char i, MV, current_osd, dcr_mode, osd_bl_max, osd_bl_min, osd_bl_lower_boundary;
	unsigned char his_ref_start, his_ref_end, osd_bl_ref_start, osd_bl_ref_end;
	unsigned char BL_current_pwm, BL_set=0, his_ref[DCR_TABLE_COL_NUM], bl_ref[DCR_TABLE_COL_NUM], ctrl[DCR_TABLE_COL_NUM];
	unsigned char  SC_flag;
	short BL_target;
	unsigned char offset;


	SC_flag = (RPC_SmartPic_clue->SceneChange);
	//get current duty pwm	setting
	BL_current_pwm = scalerVIP_IoGpio_GetPwmDuty(m_PIN_BL_ADJ);
	//duty_max = pwm_duty_set_reg.pwm0_totalcnt;
	if(BL_current_pwm==0) //reg is 0, when ui osd set 100 ==> fix this bug.
		BL_current_pwm = 255;

	// osd max =100, increase mode for TPV 2958i
	osd_bl_max = 100;
	osd_bl_min = 0;
	osd_bl_lower_boundary = 15;
	dcr_mode = m_nDCR_Mode;
	MV = (SmartPic_clue->Hist_Y_Mean_Value);
	current_osd = m_BL_LV_From_User;

	if(dcr_mode > 3 || dcr_mode == 0) // 0=off, 1=standard, 2=best power, 3=best picture
		return;

	// update curve
	#ifdef fix_DCR_Table_memory
	offset=0;//2*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM;
	for(i=0;i<DCR_TABLE_COL_NUM;i++)
	{
		his_ref[i] = *(DCR_Table_TPV_non_TV + offset + ((dcr_mode-1)*2+0)*DCR_TABLE_COL_NUM+i);
		bl_ref[i] = *(DCR_Table_TPV_non_TV + offset + ((dcr_mode-1)*2+1)*DCR_TABLE_COL_NUM+i);
	}
	#else
	offset=2*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM;
	for(i=0;i<DCR_TABLE_COL_NUM;i++)
	{
		his_ref[i] = *(DCR_TABLE + offset + ((dcr_mode-1)*2+0)*DCR_TABLE_COL_NUM+i);
		bl_ref[i] = *(DCR_TABLE + offset + ((dcr_mode-1)*2+1)*DCR_TABLE_COL_NUM+i);
	}
	#endif
	//use DCR ON/OFF TABLE
	offset=m_DCR_On_Off*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM+4*DCR_TABLE_COL_NUM;
	for(i=0;i<DCR_TABLE_COL_NUM;i++)
	{
		//offset=m_DCR_On_Off*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM+4*DCR_TABLE_COL_NUM+i;
		ctrl[i] = *(DCR_TABLE + offset + i);
	}
	#if DCR_DEBUG_TPV
	if(MA_print_count%100==0)
	{
		ROSPrintf("\n=== DCR_TPV_Multi_Mode , ctrl = %d,%d,%d ,%d ,%d===\n",ctrl[0],ctrl[1],ctrl[2],ctrl[3],ctrl[4]);
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,his_ref = %d,%d,%d,%d,%d===\n",his_ref[0],his_ref[1],his_ref[2],his_ref[3],his_ref[4]);
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,bl_ref = %d,%d,%d,%d,%d===\n",bl_ref[0],bl_ref[1],bl_ref[2],bl_ref[3],bl_ref[4]);
	}
	#endif
	//================


	//mapping range
	for(i=0;i<DCR_TABLE_COL_NUM;i++)
		if(MV<his_ref[i])
			break;
	if(i==5)
	{
		his_ref_end = his_ref[i-1];
	        osd_bl_ref_end = bl_ref[i-1];
	}
	else
	{
	his_ref_end = his_ref[i];
	osd_bl_ref_end = bl_ref[i];
	}
	if(i==0)
	{
		his_ref_start = his_ref[i];
		osd_bl_ref_start = bl_ref[i];
	}
	else
	{
		his_ref_start = his_ref[i-1];
		osd_bl_ref_start = bl_ref[i-1];
	}

	//osd backlight control
	current_osd = current_osd * (osd_bl_max-osd_bl_lower_boundary) / osd_bl_max + osd_bl_lower_boundary;//low is 15, re mapping
	osd_bl_ref_start = osd_bl_ref_start * (current_osd - osd_bl_min) / (osd_bl_max - osd_bl_min);
	osd_bl_ref_end = osd_bl_ref_end * (current_osd - osd_bl_min) / (osd_bl_max - osd_bl_min);

	// compute target BL value and mapping to PWM value
	#if DCR_DEBUG_TPV
	if(MA_print_count%300==0)
	{
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,his_ref_start = %d,his_ref_end =%d===\n",his_ref_start,his_ref_end);
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,osd_bl_ref_start=%d,osd_bl_ref_end=%d===\n",osd_bl_ref_start,osd_bl_ref_end);
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,m_BL_LV_Act_Max = %d,m_BL_LV_Act_Min = %d===\n",m_BL_LV_Act_Max,m_BL_LV_Act_Min);
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,osd_bl_max=%d,osd_bl_min=%d===\n",osd_bl_max,osd_bl_min);
	}
	#endif
	if(i==0) //minimun is  his_ref[0]
		BL_target = osd_bl_ref_end;
	else if(i==5)
		BL_target = osd_bl_ref_end;
	else
		BL_target = (MV - his_ref_start) * (osd_bl_ref_end - osd_bl_ref_start) / (his_ref_end - his_ref_start) + osd_bl_ref_start;
	#if DCR_DEBUG_TPV
	if(MA_print_count%100==0)
		ROSPrintf("\n=== DCR_TPV_Multi_Mode , BL_target = %d ===\n",BL_target);
	#endif
	BL_target = BL_target * (m_BL_LV_Act_Max - m_BL_LV_Act_Min) / (osd_bl_max - osd_bl_min) + m_BL_LV_Act_Min;

	#if DCR_DEBUG_TPV
	if(MA_print_count%100==0)
	{
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,dcr_mode=%d,MV=%d,BL_target=%d,BL_current_pwm=%d===\n",dcr_mode,MV,BL_target,BL_current_pwm);
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,i=%d,current_osd=%d,m_BL_LV_From_User=%d,m_isIncreaseMode%d===\n",i,current_osd,m_BL_LV_From_User,m_isIncreaseMode);
	}
	#endif

	if(BL_target>BL_current_pwm && BL_target-BL_current_pwm>=ctrl[2*SC_flag])
		BL_set = BL_current_pwm + ctrl[2*SC_flag];		// backlight setting with a step
	else if (BL_target<BL_current_pwm && BL_current_pwm-BL_target>=ctrl[1+2*SC_flag])
		BL_set = BL_current_pwm - ctrl[1+2*SC_flag];
	else if(BL_target != BL_current_pwm)
		BL_set=BL_target;
	else
		return;
	//record
	#if DCR_DEBUG_TPV
	if(MA_print_count%100==0)
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,BL_prev=%d,BL_current=%d,BL_target=%d,BL_set=%d===\n",BL_prev,BL_current,BL_target,BL_set);
	#endif


	BL_target=BL_set;
	BL_target = (BL_target-m_BL_LV_Act_Min) * (osd_bl_max - osd_bl_min) / (m_BL_LV_Act_Max - m_BL_LV_Act_Min)+osd_bl_min;
	BL_current = BL_target;//BL_set;
	BL_prev = BL_current;
	#if DCR_DEBUG_TPV
	if(MA_print_count%100==0)
		ROSPrintf("\n=== DCR_TPV_Multi_Mode ,BL_prev=%d,BL_current=%d,BL_target=%d,BL_set=%d===\n",BL_prev,BL_current,BL_target,BL_set);
	#endif
	if(!m_isIncreaseMode)
		BL_set = m_BL_LV_Act_Max - BL_set;
 	#if DCR_DEBUG_TPV
	if(MA_print_count%100==0)
		ROSPrintf("\n= DCR_TPV_Multi_Mode BL_set =%d=\n",BL_set);
	#endif
	scalerVIP_IoGpio_SetPwmDuty(m_PIN_BL_ADJ, BL_set);

}

//20121106 roger add
unsigned char scalerVIP_Get_Profile_Motion()
{
	return Profile_Motion_Detect_Value;
}

//roger add 20110830, for motion detect for all source
void scalerVIP_Profile_Motion_Detect(unsigned char display, _clues* SmartPic_clue)
{
	static unsigned short H_Block_Pre_PMD[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};	//roger add 20110826, PMD = profile motion detect
	static unsigned short V_Block_Pre_PMD[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};	//roger add 20110826, PMD = profile motion detect
	unsigned int H_PMDV_temp = 0;
	unsigned int V_PMDV_temp = 0;
	unsigned int H_diff_Sum = 0;
	unsigned int V_diff_Sum = 0;
	int i;
	unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	for (i = 0; i < 16; i++)
	{
		H_diff_Sum = H_diff_Sum + ABS(H_Block[i], H_Block_Pre_PMD[i]);
 		V_diff_Sum = V_diff_Sum + ABS(V_Block[i], V_Block_Pre_PMD[i]);
	}

	//H: xxxK, V: xxxK is the sum of the white patten of block 0 to 15, but it's only for reference
	//the range of H_PMDV is 50, the range of V_PMDV is also 50
	switch(SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:		//H: 114K, V: 38K
		case _MODE_576I:		//H: 139K, V: 46K
			H_PMDV_temp = H_diff_Sum >> 4;
			V_PMDV_temp = V_diff_Sum >> 3;
			break;
		case _MODE_480P:	//H: 237K, V: 79K
		case _MODE_576P:	//H: 286K, V: 95K
			H_PMDV_temp = H_diff_Sum >> 5;
			V_PMDV_temp = V_diff_Sum >> 4;
			break;
		case _MODE_720P50:	//H: 351K, V: 131K
		case _MODE_720P60:	//H: 351K, V: 131K
			H_PMDV_temp = H_diff_Sum >> 5;
			V_PMDV_temp = V_diff_Sum >> 4;
			break;
		case _MODE_1080I25:	//H: 261K, V: 131K
		case _MODE_1080I30:	//H: 261K, V: 131K
			H_PMDV_temp = H_diff_Sum >> 6;
			V_PMDV_temp = V_diff_Sum >> 4;
			break;
		case _MODE_1080P50:	//H: 531K, V: 131K
		case _MODE_1080P60:	//H: 531K, V: 131K
			H_PMDV_temp = H_diff_Sum >> 6;
			V_PMDV_temp = V_diff_Sum >> 4;
			break;
		default:
			H_PMDV_temp = H_diff_Sum >> 5;
			V_PMDV_temp = V_diff_Sum >> 4;
			break;
	}

	#ifdef CONFIG_USE_RT_STORAGE_NO_DDR
	//20121106 roger add, ONLY for Pacific' no DDR set. In DDR set, don't use this
	switch(SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_1080I25:
		case _MODE_1080I30:
			//rtd_log(_LOGGER_INFO, "scalerVIP_Profile_Motion_Detect, i-signal re-adjust H_PMDV!! H_PMDV_temp = %d\n", H_PMDV_temp);
			if (H_PMDV_temp > 15)
				H_PMDV_temp = H_PMDV_temp - 15;
			else
				H_PMDV_temp = 0;
			break;
		default:
			break;
	}
	#endif

	H_PMDV_temp = (H_PMDV_temp > 50) ? 50 : H_PMDV_temp;
	V_PMDV_temp = (V_PMDV_temp > 50) ? 50 : V_PMDV_temp;
	Profile_Motion_Detect_Value = H_PMDV_temp + V_PMDV_temp;
	if (Profile_Motion_Detect_Value == 0) Profile_Motion_Detect_Value = 1;		//avoid the value=0

	for (i = 0; i < 16; i++)
	{
		H_Block_Pre_PMD[i] = H_Block[i];
		V_Block_Pre_PMD[i] = V_Block[i];
	}

#if 0	//debug message
	static unsigned int print_cnt = 0;
	print_cnt++;
	if ((print_cnt % 10) == 0)
	{
		//for (i = 0; i < 16; i++)
			//printk("H_Block[%d] = %d, V_Block[%d] = %d\n", i, H_Block[i], i, V_Block[i]);

		rtd_log(_LOGGER_INFO, "source = %d\n", info->ucMode_Curr);
		rtd_log(_LOGGER_INFO, "H_diff_Sum = %d, \nV_diff_Sum = %d\n", H_diff_Sum, V_diff_Sum);
		rtd_log(_LOGGER_INFO, "H_PMDV_temp = %d, \nV_PMDV_temp = %d, \nProfile_Motion_Detect_Value = %d\n", H_PMDV_temp, V_PMDV_temp, Profile_Motion_Detect_Value);
	}
#endif

	return;
}



void drvif_color_ma_DCR_TV057(unsigned char Set_PWMValue)
{


	unsigned int pwmNum=0;
	unsigned char Target_Dutyvalue=0;
	//unsigned int OSDBL_ratio=0;
	//unsigned char MinPWMbyspec=0,MaxPWMbyspec=0;
	unsigned char diff=0,duty_step=0;
	unsigned char danger_zoom_th =0;
	unsigned char powersave_weight=5;
	misc_pwm_pwm0_duty_set_RBUS 	pwm_duty_set_reg;

	//when OSD powersave=on
	if(VIP_DCR_powersave_enable==1)
		powersave_weight=4;
	else
		powersave_weight=5;

	//cut the  pwmNum to(0,FFFF)
	pwmNum = m_PIN_BL_ADJ & 0x0000FFFF;

	//scale the backlight OSD (0,100) to range(5,100)
	//MinPWMbyspec=((14-2)*Set_PWMValue)/255+2;
	//MaxPWMbyspec=Set_PWMValue;
	//OSDBL_ratio=m_BL_LV_From_User*255/100;//ratio

	//Target_Dutyvalue=OSDBL_ratio*(MaxPWMbyspec-MinPWMbyspec)/255+MinPWMbyspec;//100;>>a*b+c;
	//Target_Dutyvalue=Target_Dutyvalue & 0xFF;
	Target_Dutyvalue=Set_PWMValue;
	Target_Dutyvalue=Target_Dutyvalue*powersave_weight/5;

#if 0
		if((MA_print_count % 150) == 0)
		{
			ROSPrintf("[Young]@@  OSD DCR m_BL_LV_From_User=%d@@ \n",m_BL_LV_From_User);
			//ROSPrintf("[Young]@@  MinPWMbyspec=%d,MaxPWMbyspec=%d @@ \n",MinPWMbyspec,MaxPWMbyspec);
			ROSPrintf("[Young]***  DCR_refresh_TV057=%d,SceneChange=%d  *** \n",DCR_refresh_TV057,SceneChange);
			ROSPrintf("[Young]@@  OSD DCR Current_Dutyvalue=%d,Target_Dutyvalue=%d@@ \n",Current_Dutyvalue,Target_Dutyvalue);

		}
#endif
	if(panaFlag)//for DC on init setting
	{
		//ROSPrintf("[Young]***  target_OSD_duty=%d,BL_current_pana=%d,panaFlag=%d  *** \n",target_OSD_duty,BL_current_pana,panaFlag);
		Current_Dutyvalue = Target_Dutyvalue;
		panaFlag = FALSE;
	}

	diff=ABS(Target_Dutyvalue,Current_Dutyvalue);

	if( ((RPC_SmartPic_clue->SceneChange)==1) || (DCR_refresh_TV057==TRUE) )
	{
		danger_zoom_th =0;
		if( DCR_refresh_TV057==TRUE && diff==0)
		{
			Current_Dutyvalue= (Current_Dutyvalue>0)?(Current_Dutyvalue-1):(Current_Dutyvalue+1);
		}
		else
		{
			duty_step = diff;
		}
		DCR_refresh_TV057 = FALSE;
	}
	else
	{
		danger_zoom_th =5;
		duty_step = ((diff>>1)+1)>=5?5:((diff>>1)+1);
	}

	pwm_duty_set_reg.regValue = rtd_inl(MISC_PWM_PWM0_DUTY_SET_reg + pwmNum * 12);



	if((Target_Dutyvalue >Current_Dutyvalue)&&(diff>danger_zoom_th))
		Current_Dutyvalue = Current_Dutyvalue +duty_step;		// backlight setting with a step  //step_up=4
	else if(( Current_Dutyvalue>Target_Dutyvalue)&&(diff>danger_zoom_th))
		Current_Dutyvalue = Current_Dutyvalue -duty_step;       //step_down=1
	else if(Target_Dutyvalue != Current_Dutyvalue)
		Current_Dutyvalue=Target_Dutyvalue;
	else
		return;


	if(Current_Dutyvalue>255)
		Current_Dutyvalue=255;
	if(Current_Dutyvalue<0)
		Current_Dutyvalue=0;


//set duty,duty is (0,255)
	//scalerVIP_pwm_set(pwmNum, linearrange_duty);
	scalerVIP_pwm_set(pwmNum, Current_Dutyvalue);


#if 0
		if((MA_print_count % 300) == 0)
		{
			//ROSPrintf("[Young]@@  OSD DCR m_BL_LV_From_User=%d ,,target_OSD_duty=%d@@ \n",m_BL_LV_From_User,target_OSD_duty);
			ROSPrintf("[Young]@@  linearrange_duty=%d @@ \n",linearrange_duty);
			ROSPrintf("[Young]@@  BL_current_pana=%d @@ \n",BL_current_pana);
			//ROSPrintf("[Young]@@ pwmNum=%d ,BL_set=%d  BL_set_duty=%d @@ \n",pwmNum,BL_set,BL_set_duty);
		}
#endif


}



void scalerVIP_TVSource_Separation()
{
	unsigned char input_src_from;
	input_src_from = Scaler_DispGetInputInfoByDisp(SLR_MAIN_DISPLAY, SLR_INPUT_INPUT_SRC);
	#if DCR_DEBUG_TPV
	if((MA_print_count % 300) == 0)
		ROSPrintf(" TVSource_Separation : %d	(1:Atv 2:Dtv) \n",input_src_from );
	#endif
	switch(input_src_from)
	{
		case _SRC_TV:
			m_bIsTVSource=TRUE;
		break;
		case _SRC_VO:
			m_bIsTVSource=TRUE;
		break;
		default :
		 	m_bIsTVSource=FALSE;
		break;
	}
	//ROSPrintf(" m_bIsTVSource : %d	\n",m_bIsTVSource );
}
short drvif_color_BL_PWM__Interpolation(short nDiff,short nOffset,short nBLDiff,short nHisDiff)
{
	INT16 nSetting=nDiff*nBLDiff/nHisDiff+nOffset;
	//if((MA_print_count % 100) == 0)
		//ROSPrintf("==nDiff	=%d,nOffset=%d  ,nBLDiff=%d ,nHisDiff=%d,nSetting=%d====== \n",nDiff,nOffset,nBLDiff,nHisDiff,nSetting);
	return nSetting;
}
void RecordAPL(unsigned char nAPL)
{
	APL_Buf[nAPL_Buf_index]=nAPL;
	nAPL_Buf_index++;
	if(nAPL_Buf_index == APL_Buf_NUM)
		nAPL_Buf_index=0;
}
char GetMaxValue(unsigned char * Array ,char nLen)
{
	unsigned char nMax,nIdx;
	nMax=Array[0];
	for( nIdx = 0 ;nIdx<=nLen-1;nIdx++)
		if(Array[nIdx] > nMax)
			nMax=Array[nIdx];
	return nMax;
}
char GetMinValue(unsigned char * Array ,char nLen)
{
	unsigned char nMin,nIdx;
		nMin=Array[0];
		for( nIdx = 0 ;nIdx<=nLen-1;nIdx++)
			if(Array[nIdx] < nMin)
				nMin=Array[nIdx];
		return nMin;
}


void drvif_color_ma_DCR_TPV(unsigned char *TPV_DCR_TABLE, unsigned int DCC_HIS_MV, unsigned char BL_OSD)
{
	unsigned char i;
	unsigned char SC_flag ;
	static unsigned char blFlag = TRUE;
	static unsigned char blFirstOpenFlag = FALSE;
	short BL_target, BL_set,nMappingValue;
	//static short BL_current = 100;
	static unsigned char   BL_max=100,BL_min=0;
	BL_max = m_DCR_UI_Max_Value;
	BL_min = m_DCR_UI_Min_Value;
	SC_flag = (RPC_SmartPic_clue->SceneChange);
	//get BL_current at 1st
	if(blFlag){
		BL_current = BL_OSD;
		blFlag = FALSE;
		blFirstOpenFlag = TRUE;
	}
	if( !m_last_DCR_On_Off && !m_bDefault_OFF)
    {
        BL_current=BL_OSD;
    }
	//RecordAPL((unsigned char)DCC_HIS_MV);

	// i=0  BL_target = min, i=5 BL_target = max, i=1~4  interpolation
	for(i=0;i<DCR_TABLE_COL_NUM;i++)
		if(DCC_HIS_MV<(*(TPV_DCR_TABLE+i)))
			break;
	if(i==0)
		BL_target = *(TPV_DCR_TABLE+DCR_TABLE_COL_NUM+0);
	else if(i == 5)
		BL_target = *(TPV_DCR_TABLE+DCR_TABLE_COL_NUM+4);
	else
	{
		/*if(i == 1 && !m_bDetectMotion) //static
		{
			if(DCC_HIS_MV >0 && DCC_HIS_MV<7)
				BL_target=9*DCC_HIS_MV+37;  //PWM =8.94*APL+36.86%
			else
				BL_target=drvif_color_BL_PWM__Interpolation((DCC_HIS_MV-(*(TPV_DCR_TABLE+i-1))),(*(TPV_DCR_TABLE+1*DCR_TABLE_COL_NUM+i-1)),((*(TPV_DCR_TABLE+1*DCR_TABLE_COL_NUM+i))-(*(TPV_DCR_TABLE+1*DCR_TABLE_COL_NUM+i-1))),(*(TPV_DCR_TABLE+i)-(*(TPV_DCR_TABLE+i-1))));
		}
		else*/
			BL_target=drvif_color_BL_PWM__Interpolation((DCC_HIS_MV-(*(TPV_DCR_TABLE+i-1))),(*(TPV_DCR_TABLE+1*DCR_TABLE_COL_NUM+i-1)),((*(TPV_DCR_TABLE+1*DCR_TABLE_COL_NUM+i))-(*(TPV_DCR_TABLE+1*DCR_TABLE_COL_NUM+i-1))),(*(TPV_DCR_TABLE+i)-(*(TPV_DCR_TABLE+i-1))));

	}
	// DCR_SLAVE mode BL_target max = osd
	if(*(TPV_DCR_TABLE+3*DCR_TABLE_COL_NUM+0) == DCR_SLAVE_ISR){
		if(!(blFirstOpenFlag && (BL_OSD==0)))
		{
			BL_target = (BL_OSD*BL_target)/100;
			blFirstOpenFlag=FALSE;
		}
		else
			blFirstOpenFlag=FALSE;
	}
	if( !m_bDefault_OFF && !m_DCR_On_Off)// Default On & OSD SET OFF
	{
		BL_target=BL_OSD;
		BL_set=BL_target;
	}
	else
	{
		if(BL_target>BL_current && BL_target-BL_current>=(*(TPV_DCR_TABLE+2*DCR_TABLE_COL_NUM+2*SC_flag+0)))
			BL_set = BL_current + (*(TPV_DCR_TABLE+2*DCR_TABLE_COL_NUM+2*SC_flag+0));		// backlight setting with a step
		else if (BL_target<BL_current && BL_current-BL_target>=(*(TPV_DCR_TABLE+2*DCR_TABLE_COL_NUM+2*SC_flag+1)))
			BL_set = BL_current - (*(TPV_DCR_TABLE+2*DCR_TABLE_COL_NUM+2*SC_flag+1));
		else if(BL_target != BL_current)
			BL_set=BL_target;
		else
			return;
	}

	//MAPPING TO 255
	if(m_isIncreaseMode)
		nMappingValue = (BL_set-BL_min)*(m_BL_LV_Act_Max - m_BL_LV_Act_Min)/(BL_max-BL_min)+ m_BL_LV_Act_Min;
	else
		nMappingValue = m_BL_LV_Act_Max - ((BL_set-BL_min)*(m_BL_LV_Act_Max - m_BL_LV_Act_Min)/(BL_max-BL_min)+ m_BL_LV_Act_Min);
	//Set Pwm Duty
	nMappingValue&= 0xFF;
	//scalerVIP_pwm_set(7, nMappingValue);
	scalerVIP_IoGpio_SetPwmDuty(m_PIN_BL_ADJ, nMappingValue);
	BL_current = BL_set;
	BL_prev = BL_current;
	#if DCR_DEBUG_TPV
	//if((MA_print_count % 300) == 0)
	ROSPrintf("======DCC_HIS_MV=%d, BL_target=%d, BL_set=%d, i=%d, BL_OSD=%d ,nMappingValue=%d  =========== \n", DCC_HIS_MV,BL_target,BL_set,i,BL_OSD,nMappingValue);
	#endif

}


void drvif_color_Plan_DCR_Curve()
{
	unsigned char idx_r, idx_c,offset;
	if( !m_bDefault_OFF && !m_DCR_On_Off)// Default On & OSD SET OFF
	{
		for(idx_r=DCR_TABLE_ROW_NUM-6;idx_r <= DCR_TABLE_ROW_NUM-5;idx_r++)
		{
			if(idx_r == DCR_TABLE_ROW_NUM-5)
			{
				for(idx_c=0;idx_c<DCR_TABLE_COL_NUM;idx_c++)
					DCR_Table_TPV[DCR_TABLE_COL_NUM+idx_c] = 100;
			}
			else
			{
				for(idx_c=0;idx_c<DCR_TABLE_COL_NUM;idx_c++)
				{
					offset=m_DCR_On_Off*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM+idx_r*DCR_TABLE_COL_NUM+idx_c;
					DCR_Table_TPV[idx_c] = DCR_TABLE[offset];
				}
			}
		}
	}
	else
	{
		if(!m_bDetectMotion) //static
		{

			for(idx_r=DCR_TABLE_ROW_NUM-6;idx_r <= DCR_TABLE_ROW_NUM-5;idx_r++)
					for(idx_c=0;idx_c<DCR_TABLE_COL_NUM;idx_c++)
					{
						offset=m_DCR_On_Off*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM+idx_r*DCR_TABLE_COL_NUM+idx_c;
						DCR_Table_TPV[idx_r*DCR_TABLE_COL_NUM+idx_c] =  DCR_TABLE[offset];
					}
		}
		else //dynamic
		{
			for(idx_r=DCR_TABLE_ROW_NUM-4;idx_r<=DCR_TABLE_ROW_NUM-3;idx_r++)
					for(idx_c=0;idx_c<DCR_TABLE_COL_NUM;idx_c++)
					{
						offset=m_DCR_On_Off*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM+idx_r*DCR_TABLE_COL_NUM+idx_c;
						DCR_Table_TPV[(idx_r-2)*DCR_TABLE_COL_NUM+idx_c] = DCR_TABLE[offset];
					}
		}
	}
}
//===============end_DCR=============


/*=============================================
/ Function name:drvif_color_ma_DCR_new
/ Input:
/       [Frame_need_SC] : how many frame need to achieve target when scene change.
/       [Frame_need_NML] : how many frame need to achieve target nomally.
/       [stable_buf_thl] : Define Dead Zone thl.
/       [DZ_break_thl] : how many frame to break Dead Zone.
=============================================*/
void drvif_color_ma_DCR_new(unsigned short Frame_need_SC, unsigned short Frame_need_NML, unsigned short stable_buf_thl, unsigned short DZ_break_thl)
{
        /* BL_prev : previous Backlight */
        /* BL_current : current Backlight */
        /* BL_desired : desired calculating Backlight */
        /* BL_desired_prev : previous desired calculating Backlight */
        /* BL_target : tracking target Backlight */
        static unsigned char   BL_max=100,BL_min=0;
        static unsigned int mappingValue=255;
        static int BL_current=100,BL_prev=100,BL_desired=100,BL_desired_prev=100,BL_target=100,MV=0,BL_Duty=0;
        static unsigned short Frame_need=30;
        static unsigned char SegWide=10,dead_zone_break_count=0;
        static unsigned char frame_count=0,frame_leave=60,t=0,vel=0;
        static int   diff=0,stable_buffer=0;
        static unsigned char   Segment=Segment_F;
        static unsigned char is_DeadZone=false;
		#if 0
		static unsigned short DCR_count = 0;
		DCR_count++;
		if (DCR_count % 60 == 0)
			ROSPrintf("\n drvif_color_ma_DCR_new, MV = %d, m_BL_LV_From_User = %d, BL_desired = %d, m_DCR_mode = %d\n", (SmartPic_clue->Hist_Y_Mean_Value), m_BL_LV_From_User, BL_desired, m_DCR_mode);
		#endif
	BL_max = m_DCR_UI_Max_Value;
	BL_min = m_DCR_UI_Min_Value;
        MV=(SmartPic_clue->Hist_Y_Mean_Value);
        frame_count++;

        if(m_last_DCR_On_Off==0){
            BL_current=m_BL_LV_From_User;
        }

        /*======================*/
        /*     DCR Calculating Backlight       */
        /*======================*/
        /* DCR fomulation */
        if(MV<MV_ref[0])
            Segment = Segment_A;
        else if(MV<MV_ref[1] && MV>=MV_ref[0])
            Segment = Segment_B;
        else if(MV<MV_ref[2] && MV>=MV_ref[1])
            Segment = Segment_C;
        else if(MV<MV_ref[3] && MV>=MV_ref[2])
            Segment = Segment_D;
        else if(MV<MV_ref[4] && MV>=MV_ref[3])
            Segment = Segment_E;
        else if(MV>=MV_ref[4])
            Segment = Segment_F;


        /* DCR fomulation */
        switch(Segment) {
                case Segment_A:
                                BL_desired = BL_ref[0];
                    break;
                case Segment_B:
                case Segment_C:
                case Segment_D:
                case Segment_E:
                                BL_desired=(BL_ref[Segment]-BL_ref[Segment-1])*((MV)-MV_ref[Segment-1])/(MV_ref[Segment]-MV_ref[Segment-1])+BL_ref[Segment-1];
                    break;
                case Segment_F:
                                BL_desired = BL_ref[4];
                    break;
                default:
                                BL_desired = BL_ref[4];
                    break;
        }

		//20120523 roger add for slave mode
		if (m_DCR_mode == DCR_SLAVE_ISR)
			BL_desired = (BL_desired * m_BL_LV_From_User) / 100;

        if((RPC_SmartPic_clue->SceneChange)==1) {/* 20100901 LeoChen add */

            Frame_need=Frame_need_SC;
        } else {
            Frame_need=Frame_need_NML;
        }
        /*=============*/
        /*     DCR Tracking     */
        /*=============*/
        /* ========== accumulate difference of backlight  ========== */
        stable_buffer+=(BL_desired-BL_desired_prev);
        /* ========== RDBL : Reliable Desired Backlight  ========== */
        if(1){//RDBL enable

                /* ==========  Define Dead zone for stable desired backlight  ========== */
                if(stable_buffer>stable_buf_thl||stable_buffer<-stable_buf_thl){//break dead zone

                        is_DeadZone=false;
                        BL_target=BL_desired; /* update desired backlight */
                        stable_buffer=0; /* reset accumulating */
                        dead_zone_break_count=0;
                }
                else if(stable_buffer!=0) {//dead zone with umstable desired backlight

                        is_DeadZone=true;
                        if(dead_zone_break_count==DZ_break_thl) {

                                BL_target=BL_desired;/* update desired backlight */
                                stable_buffer=0; /* reset accumulating */
                                frame_leave=Frame_need-DZ_break_thl;
                                frame_leave=frame_leave>0?frame_leave:-frame_leave;
                                dead_zone_break_count=0;
                        } else {
                                dead_zone_break_count++;
                        }
                } else {//dead zone with stable desired backlight

                        is_DeadZone=true;
                        dead_zone_break_count=0;
                }
        } else {
                BL_target=BL_desired;
                stable_buf_thl=0;
        }

        /*  ========== calculating difference between desired and present  ========== */
        diff=ABS(BL_target,BL_current);
#ifdef DCR_debug_en
	if((MA_print_count % 300) == 0) {
               printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR1  BL_target %d\n",BL_target);
               printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR1  BL_current %d\n",BL_current);
        }
#endif
        if(diff!=0) {
                if(is_DeadZone){//dead zone

                        frame_leave--;
                        frame_leave=frame_leave<1?1:frame_leave; /* avoid divide 0 */
                } else {
                        frame_leave=Frame_need;
                        stable_buffer=0;

                }
                /* ========== Adaptive SegWide ========== */
                if(frame_leave<diff) {//stage1

                        vel=diff/(frame_leave+1);
                } else {//stage2

                        SegWide=/*(diff==0)?frame_leave:*/(frame_leave/diff);
                        t=(t<(SegWide))?(t+1):0;
                        vel=(t==0)?1:0;
                }

                if((BL_target)>(BL_current))
                        BL_current=BL_current+vel;
                else
                        BL_current=BL_current-vel;
        }


        /*  ========== update BL_desired_prev  ========== */
        BL_desired_prev=BL_desired;
        BL_current=(BL_current>=BL_max)?BL_max:((BL_current<=BL_min)?BL_min:BL_current);

#ifdef DCR_debug_en
        if((MA_print_count % 300) == 0) {
               printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&Histogram_Mean_value %d\n",(SmartPic_clue->Hist_Y_Mean_Value));
               printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR1  BL_desired %d\n",BL_desired);
               printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR1  BL_current %d\n",BL_current);
        }
#endif

        /*===================*/
        /*== DCR Writing to BL Reg==*/
        /*===================*/
#ifdef DCR_debug_en
	if((MA_print_count % 300) == 0)
		printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR	BL_current=%d,BL_prev=%d\n",BL_current, BL_prev);

	if((MA_print_count % 300) == 0){
		printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR  BL_Duty=%d, mode= %d\n",BL_Duty,m_isIncreaseMode);
		printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR  m_BL_LV_Act_Max=%d, m_BL_LV_Act_Min= %d\n",m_BL_LV_Act_Max, m_BL_LV_Act_Min);
		printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR  BL_max=%d, BL_min= %d\n",BL_max, BL_min);
        }
#endif
    	if((BL_current != BL_prev) || (m_DCR_refresh == TRUE)) {// || (m_last_DCR_On_Off==0))

			 //ROSPrintf("Histogram_Mean_value %d\n",(SmartPic_clue->Hist_Y_Mean_Value));
			 //ROSPrintf("DCR  BL_current %d\n",BL_current);
			 m_DCR_refresh = FALSE;

                /* ====   RE-MAPPING  :  mapping from backlight to PWM Duty  ==== */
                if(BL_current<BL_Duty_ref[0])
                    Segment = Segment_A;
                else if(BL_current<BL_Duty_ref[1] && BL_current>=BL_Duty_ref[0])
                    Segment = Segment_B;
                else if(BL_current<BL_Duty_ref[2] && BL_current>=BL_Duty_ref[1])
                    Segment = Segment_C;
                else if(BL_current<BL_Duty_ref[3] && BL_current>=BL_Duty_ref[2])
                    Segment = Segment_D;
                else if(BL_current<BL_Duty_ref[4] && BL_current>=BL_Duty_ref[3])
                    Segment = Segment_E;
                else if(BL_current>=BL_Duty_ref[4])
                    Segment = Segment_F;

                switch(Segment) {
                        case Segment_A:
                                        BL_Duty = Duty_ref[0];
                            break;
                        case Segment_B:
                        case Segment_C:
                        case Segment_D:
                        case Segment_E:
                                        BL_Duty=(Duty_ref[Segment]-Duty_ref[Segment-1])*((BL_current)-BL_Duty_ref[Segment-1])/(BL_Duty_ref[Segment]-BL_Duty_ref[Segment-1])+Duty_ref[Segment-1];
                            break;
                        case Segment_F:
                                        BL_Duty = Duty_ref[4];
                            break;
                        default:
                                        BL_Duty = Duty_ref[4];
                            break;
                }

                if(m_isIncreaseMode) {
		   			mappingValue = (BL_Duty-BL_min)*(m_BL_LV_Act_Max - m_BL_LV_Act_Min)/(BL_max-BL_min+1) + m_BL_LV_Act_Min;
                } else {
		  			mappingValue = m_BL_LV_Act_Max-((BL_Duty-BL_min)*(m_BL_LV_Act_Max - m_BL_LV_Act_Min)/(BL_max-BL_min+1) + m_BL_LV_Act_Min);
                }

	      mappingValue &= 0xFF;
		  //ROSPrintf("DCR  mappingValue %d\n",mappingValue);

              	//scalerVIP_IoGpio_SetPwmDuty(m_PIN_BL_ADJ, mappingValue);

            	// backlight on
           // 	scalerVIP_IoGpio_SetPinLevel(m_PIN_BL_ON_OFF, m_BACKLIGHT_ON);
           	SmartPic_clue->DCR_GDBC_mappingValue = mappingValue;
#ifdef DCR_debug_en
		printk(KERN_NOTICE "\n >>>>>>>>>>>> &&&&&&&&DCR  mappingValue=%d, BL_Duty= %d\n",mappingValue, BL_Duty);
#endif
                 BL_prev=BL_current;
    	}



}
//===============end_DCR=============


int abs_dcc( int input )
{
    return ( input < 0 ) ? -input : input;
}

unsigned int Lerp(unsigned int X_current, unsigned int X_1, unsigned int X_0, unsigned int Y_1, unsigned int Y_0, unsigned int x_offset_1, unsigned int x_offset_0)
{
	unsigned int Lerp_value;

	if ((Y_1 - Y_0) == 0)
		Lerp_value = Y_0;
	else
	{
		if (X_current <= (X_0 + x_offset_0))
			Lerp_value = Y_0;
		else if (X_current >= (X_1 - x_offset_1))
			Lerp_value = Y_1;
		else
		{
			//Lerp_value = (Y_0 + (((X_current - (X_0 + x_offset_0)) * (Y_1 - Y_0) * 8) / ((X_1 - x_offset_1) - (X_0 + x_offset_0))) / 8);
			if(Y_1 > Y_0)	//	if positive lerp
				Lerp_value = (Y_0 + (((X_current - X_0 - x_offset_0) * (Y_1 - Y_0) * 8) / (X_1 - X_0 - x_offset_1 - x_offset_0)) / 8);
			else	//	if negative lerp
				Lerp_value = (Y_0 - (((X_current - X_0 - x_offset_0) * (Y_0 - Y_1) * 8) / (X_1 - X_0 - x_offset_1 - x_offset_0)) / 8);
		}
	}
	return Lerp_value;
}

unsigned int Lerp_NR_rate(unsigned short NRX, unsigned char NR_LEVEL, unsigned char rate)
{
	unsigned int X_1, X_0;
	if(NR_LEVEL >= 14)
		NR_LEVEL = 14;

	X_1 = (unsigned int)(*(NR_TABLE8+ NRX * NR_LEVEL_MAX + NR_LEVEL));
	X_0 = (unsigned int)(*(NR_TABLE8 + NRX * NR_LEVEL_MAX + NR_LEVEL - 1));

	if( X_1 >= X_0 )
		return ((X_1 - X_0)*rate/100) + X_0;
	else
		return ((X_0 - X_1)*rate/100) + X_1;
}

unsigned int Lerp_NR_rate_32(unsigned short NRX, unsigned char NR_LEVEL, unsigned char rate)
{
	unsigned int X_1, X_0;
	if(NR_LEVEL >= 14)
		NR_LEVEL = 14;

	X_1 = (unsigned int)(*(NR_TABLE32+ NRX * NR_LEVEL_MAX + NR_LEVEL));
	X_0 = (unsigned int)(*(NR_TABLE32 + NRX * NR_LEVEL_MAX + NR_LEVEL - 1));

	if( X_1 >= X_0 )
		return ((X_1 - X_0)*rate/100) + X_0;
	else
		return ((X_0 - X_1)*rate/100) + X_1;
}


//=========================== Pure Color Detection ===========================
unsigned int di_pow(unsigned int x, unsigned int p)
{
	int i=0;
	unsigned int r = 1;

	  if(p == 0) return 1;
	  if(x == 0) return 0;


	for(i=0;i<p;i++)
	{
		r*=x;
	}
	return r;
/*
	  unsigned int r = 1;
	  for(;;)
	  {
	  	if(p & 1)
			r *= x;
	    	if((p >>= 1) == 0)
			return r;
	   	 x *= x;
	  }
	  */
}


unsigned int DCCsqrt_table[4096]={ // this table means SQRT(X)*1024
0x0000,0x0400,0x05a8,0x06ed,0x0800,0x08f1,0x09cc,0x0a95,
0x0b50,0x0c00,0x0ca6,0x0d44,0x0ddb,0x0e6c,0x0ef7,0x0f7d,
0x1000,0x107e,0x10f8,0x116f,0x11e3,0x1254,0x12c2,0x132e,
0x1398,0x1400,0x1465,0x14c8,0x152a,0x158a,0x15e8,0x1645,
0x16a0,0x16fa,0x1752,0x17aa,0x1800,0x1854,0x18a8,0x18fa,
0x194c,0x199c,0x19ec,0x1a3a,0x1a88,0x1ad5,0x1b21,0x1b6c,
0x1bb6,0x1c00,0x1c48,0x1c90,0x1cd8,0x1d1e,0x1d64,0x1daa,
0x1dee,0x1e33,0x1e76,0x1eb9,0x1efb,0x1f3d,0x1f7e,0x1fbf,
0x2000,0x203f,0x207f,0x20bd,0x20fc,0x2139,0x2177,0x21b4,
0x21f0,0x222d,0x2268,0x22a4,0x22df,0x2319,0x2353,0x238d,
0x23c6,0x2400,0x2438,0x2471,0x24a9,0x24e0,0x2518,0x254f,
0x2585,0x25bc,0x25f2,0x2628,0x265d,0x2693,0x26c8,0x26fc,
0x2731,0x2765,0x2799,0x27cc,0x2800,0x2833,0x2865,0x2898,
0x28ca,0x28fc,0x292e,0x2960,0x2991,0x29c2,0x29f3,0x2a24,
0x2a54,0x2a85,0x2ab5,0x2ae5,0x2b14,0x2b44,0x2b73,0x2ba2,
0x2bd1,0x2c00,0x2c2e,0x2c5c,0x2c8a,0x2cb8,0x2ce6,0x2d13,
0x2d41,0x2d6e,0x2d9b,0x2dc8,0x2df4,0x2e21,0x2e4d,0x2e79,
0x2ea5,0x2ed1,0x2efd,0x2f28,0x2f54,0x2f7f,0x2faa,0x2fd5,
0x3000,0x302a,0x3055,0x307f,0x30a9,0x30d3,0x30fd,0x3127,
0x3150,0x317a,0x31a3,0x31cc,0x31f5,0x321e,0x3247,0x3270,
0x3298,0x32c1,0x32e9,0x3311,0x3339,0x3361,0x3389,0x33b0,
0x33d8,0x3400,0x3427,0x344e,0x3475,0x349c,0x34c3,0x34ea,
0x3510,0x3537,0x355d,0x3584,0x35aa,0x35d0,0x35f6,0x361c,
0x3642,0x3667,0x368d,0x36b2,0x36d8,0x36fd,0x3722,0x3747,
0x376c,0x3791,0x37b6,0x37db,0x3800,0x3824,0x3848,0x386d,
0x3891,0x38b5,0x38d9,0x38fd,0x3921,0x3945,0x3969,0x398c,
0x39b0,0x39d3,0x39f7,0x3a1a,0x3a3d,0x3a60,0x3a83,0x3aa6,
0x3ac9,0x3aec,0x3b0f,0x3b31,0x3b54,0x3b76,0x3b99,0x3bbb,
0x3bdd,0x3c00,0x3c22,0x3c44,0x3c66,0x3c87,0x3ca9,0x3ccb,
0x3ced,0x3d0e,0x3d30,0x3d51,0x3d72,0x3d94,0x3db5,0x3dd6,
0x3df7,0x3e18,0x3e39,0x3e5a,0x3e7b,0x3e9c,0x3ebc,0x3edd,
0x3efd,0x3f1e,0x3f3e,0x3f5f,0x3f7f,0x3f9f,0x3fbf,0x3fdf,
0x4000,0x401f,0x403f,0x405f,0x407f,0x409f,0x40be,0x40de,
0x40fe,0x411d,0x413c,0x415c,0x417b,0x419a,0x41ba,0x41d9,
0x41f8,0x4217,0x4236,0x4255,0x4273,0x4292,0x42b1,0x42d0,
0x42ee,0x430d,0x432b,0x434a,0x4368,0x4387,0x43a5,0x43c3,
0x43e1,0x4400,0x441e,0x443c,0x445a,0x4478,0x4495,0x44b3,
0x44d1,0x44ef,0x450c,0x452a,0x4548,0x4565,0x4583,0x45a0,
0x45be,0x45db,0x45f8,0x4615,0x4633,0x4650,0x466d,0x468a,
0x46a7,0x46c4,0x46e1,0x46fe,0x471b,0x4737,0x4754,0x4771,
0x478d,0x47aa,0x47c7,0x47e3,0x4800,0x481c,0x4838,0x4855,
0x4871,0x488d,0x48a9,0x48c6,0x48e2,0x48fe,0x491a,0x4936,
0x4952,0x496e,0x498a,0x49a5,0x49c1,0x49dd,0x49f9,0x4a14,
0x4a30,0x4a4b,0x4a67,0x4a83,0x4a9e,0x4ab9,0x4ad5,0x4af0,
0x4b0b,0x4b27,0x4b42,0x4b5d,0x4b78,0x4b93,0x4bae,0x4bca,
0x4be5,0x4c00,0x4c1a,0x4c35,0x4c50,0x4c6b,0x4c86,0x4ca1,
0x4cbb,0x4cd6,0x4cf1,0x4d0b,0x4d26,0x4d40,0x4d5b,0x4d75,
0x4d90,0x4daa,0x4dc4,0x4ddf,0x4df9,0x4e13,0x4e2d,0x4e48,
0x4e62,0x4e7c,0x4e96,0x4eb0,0x4eca,0x4ee4,0x4efe,0x4f18,
0x4f32,0x4f4c,0x4f65,0x4f7f,0x4f99,0x4fb3,0x4fcc,0x4fe6,
0x5000,0x5019,0x5033,0x504c,0x5066,0x507f,0x5099,0x50b2,
0x50cb,0x50e5,0x50fe,0x5117,0x5130,0x514a,0x5163,0x517c,
0x5195,0x51ae,0x51c7,0x51e0,0x51f9,0x5212,0x522b,0x5244,
0x525d,0x5276,0x528f,0x52a7,0x52c0,0x52d9,0x52f2,0x530a,
0x5323,0x533c,0x5354,0x536d,0x5385,0x539e,0x53b6,0x53cf,
0x53e7,0x5400,0x5418,0x5430,0x5449,0x5461,0x5479,0x5491,
0x54a9,0x54c2,0x54da,0x54f2,0x550a,0x5522,0x553a,0x5552,
0x556a,0x5582,0x559a,0x55b2,0x55ca,0x55e2,0x55fa,0x5611,
0x5629,0x5641,0x5659,0x5670,0x5688,0x56a0,0x56b7,0x56cf,
0x56e6,0x56fe,0x5716,0x572d,0x5745,0x575c,0x5773,0x578b,
0x57a2,0x57ba,0x57d1,0x57e8,0x5800,0x5817,0x582e,0x5845,
0x585c,0x5874,0x588b,0x58a2,0x58b9,0x58d0,0x58e7,0x58fe,
0x5915,0x592c,0x5943,0x595a,0x5971,0x5988,0x599f,0x59b5,
0x59cc,0x59e3,0x59fa,0x5a11,0x5a27,0x5a3e,0x5a55,0x5a6b,
0x5a82,0x5a99,0x5aaf,0x5ac6,0x5adc,0x5af3,0x5b09,0x5b20,
0x5b36,0x5b4d,0x5b63,0x5b7a,0x5b90,0x5ba6,0x5bbd,0x5bd3,
0x5be9,0x5c00,0x5c16,0x5c2c,0x5c42,0x5c58,0x5c6f,0x5c85,
0x5c9b,0x5cb1,0x5cc7,0x5cdd,0x5cf3,0x5d09,0x5d1f,0x5d35,
0x5d4b,0x5d61,0x5d77,0x5d8d,0x5da3,0x5db9,0x5dce,0x5de4,
0x5dfa,0x5e10,0x5e26,0x5e3b,0x5e51,0x5e67,0x5e7c,0x5e92,
0x5ea8,0x5ebd,0x5ed3,0x5ee9,0x5efe,0x5f14,0x5f29,0x5f3f,
0x5f54,0x5f6a,0x5f7f,0x5f95,0x5faa,0x5fbf,0x5fd5,0x5fea,
0x6000,0x6015,0x602a,0x603f,0x6055,0x606a,0x607f,0x6094,
0x60aa,0x60bf,0x60d4,0x60e9,0x60fe,0x6113,0x6128,0x613d,
0x6152,0x6168,0x617d,0x6192,0x61a7,0x61bb,0x61d0,0x61e5,
0x61fa,0x620f,0x6224,0x6239,0x624e,0x6263,0x6277,0x628c,
0x62a1,0x62b6,0x62ca,0x62df,0x62f4,0x6309,0x631d,0x6332,
0x6347,0x635b,0x6370,0x6384,0x6399,0x63ad,0x63c2,0x63d7,
0x63eb,0x6400,0x6414,0x6428,0x643d,0x6451,0x6466,0x647a,
0x648e,0x64a3,0x64b7,0x64cb,0x64e0,0x64f4,0x6508,0x651d,
0x6531,0x6545,0x6559,0x656e,0x6582,0x6596,0x65aa,0x65be,
0x65d2,0x65e6,0x65fa,0x660f,0x6623,0x6637,0x664b,0x665f,
0x6673,0x6687,0x669b,0x66af,0x66c3,0x66d6,0x66ea,0x66fe,
0x6712,0x6726,0x673a,0x674e,0x6761,0x6775,0x6789,0x679d,
0x67b1,0x67c4,0x67d8,0x67ec,0x6800,0x6813,0x6827,0x683b,
0x684e,0x6862,0x6875,0x6889,0x689d,0x68b0,0x68c4,0x68d7,
0x68eb,0x68fe,0x6912,0x6925,0x6939,0x694c,0x6960,0x6973,
0x6986,0x699a,0x69ad,0x69c1,0x69d4,0x69e7,0x69fb,0x6a0e,
0x6a21,0x6a35,0x6a48,0x6a5b,0x6a6e,0x6a82,0x6a95,0x6aa8,
0x6abb,0x6ace,0x6ae2,0x6af5,0x6b08,0x6b1b,0x6b2e,0x6b41,
0x6b54,0x6b67,0x6b7a,0x6b8d,0x6ba1,0x6bb4,0x6bc7,0x6bda,
0x6bed,0x6c00,0x6c12,0x6c25,0x6c38,0x6c4b,0x6c5e,0x6c71,
0x6c84,0x6c97,0x6caa,0x6cbc,0x6ccf,0x6ce2,0x6cf5,0x6d08,
0x6d1a,0x6d2d,0x6d40,0x6d53,0x6d65,0x6d78,0x6d8b,0x6d9e,
0x6db0,0x6dc3,0x6dd6,0x6de8,0x6dfb,0x6e0d,0x6e20,0x6e33,
0x6e45,0x6e58,0x6e6a,0x6e7d,0x6e8f,0x6ea2,0x6eb4,0x6ec7,
0x6ed9,0x6eec,0x6efe,0x6f11,0x6f23,0x6f36,0x6f48,0x6f5a,
0x6f6d,0x6f7f,0x6f92,0x6fa4,0x6fb6,0x6fc9,0x6fdb,0x6fed,
0x7000,0x7012,0x7024,0x7036,0x7049,0x705b,0x706d,0x707f,
0x7091,0x70a4,0x70b6,0x70c8,0x70da,0x70ec,0x70fe,0x7110,
0x7123,0x7135,0x7147,0x7159,0x716b,0x717d,0x718f,0x71a1,
0x71b3,0x71c5,0x71d7,0x71e9,0x71fb,0x720d,0x721f,0x7231,
0x7243,0x7255,0x7267,0x7279,0x728a,0x729c,0x72ae,0x72c0,
0x72d2,0x72e4,0x72f5,0x7307,0x7319,0x732b,0x733d,0x734e,
0x7360,0x7372,0x7384,0x7395,0x73a7,0x73b9,0x73ca,0x73dc,
0x73ee,0x7400,0x7411,0x7423,0x7434,0x7446,0x7458,0x7469,
0x747b,0x748c,0x749e,0x74b0,0x74c1,0x74d3,0x74e4,0x74f6,
0x7507,0x7519,0x752a,0x753c,0x754d,0x755f,0x7570,0x7581,
0x7593,0x75a4,0x75b6,0x75c7,0x75d8,0x75ea,0x75fb,0x760d,
0x761e,0x762f,0x7641,0x7652,0x7663,0x7674,0x7686,0x7697,
0x76a8,0x76ba,0x76cb,0x76dc,0x76ed,0x76fe,0x7710,0x7721,
0x7732,0x7743,0x7754,0x7766,0x7777,0x7788,0x7799,0x77aa,
0x77bb,0x77cc,0x77dd,0x77ee,0x7800,0x7811,0x7822,0x7833,
0x7844,0x7855,0x7866,0x7877,0x7888,0x7899,0x78aa,0x78bb,
0x78cc,0x78dd,0x78ee,0x78fe,0x790f,0x7920,0x7931,0x7942,
0x7953,0x7964,0x7975,0x7986,0x7996,0x79a7,0x79b8,0x79c9,
0x79da,0x79eb,0x79fb,0x7a0c,0x7a1d,0x7a2e,0x7a3e,0x7a4f,
0x7a60,0x7a71,0x7a81,0x7a92,0x7aa3,0x7ab3,0x7ac4,0x7ad5,
0x7ae5,0x7af6,0x7b07,0x7b17,0x7b28,0x7b39,0x7b49,0x7b5a,
0x7b6b,0x7b7b,0x7b8c,0x7b9c,0x7bad,0x7bbd,0x7bce,0x7bde,
0x7bef,0x7c00,0x7c10,0x7c21,0x7c31,0x7c41,0x7c52,0x7c62,
0x7c73,0x7c83,0x7c94,0x7ca4,0x7cb5,0x7cc5,0x7cd5,0x7ce6,
0x7cf6,0x7d07,0x7d17,0x7d27,0x7d38,0x7d48,0x7d58,0x7d69,
0x7d79,0x7d89,0x7d9a,0x7daa,0x7dba,0x7dcb,0x7ddb,0x7deb,
0x7dfb,0x7e0c,0x7e1c,0x7e2c,0x7e3c,0x7e4d,0x7e5d,0x7e6d,
0x7e7d,0x7e8d,0x7e9e,0x7eae,0x7ebe,0x7ece,0x7ede,0x7eee,
0x7efe,0x7f0f,0x7f1f,0x7f2f,0x7f3f,0x7f4f,0x7f5f,0x7f6f,
0x7f7f,0x7f8f,0x7f9f,0x7faf,0x7fbf,0x7fcf,0x7fdf,0x7fef,
0x8000,0x800f,0x801f,0x802f,0x803f,0x804f,0x805f,0x806f,
0x807f,0x808f,0x809f,0x80af,0x80bf,0x80cf,0x80df,0x80ef,
0x80ff,0x810e,0x811e,0x812e,0x813e,0x814e,0x815e,0x816d,
0x817d,0x818d,0x819d,0x81ad,0x81bc,0x81cc,0x81dc,0x81ec,
0x81fc,0x820b,0x821b,0x822b,0x823b,0x824a,0x825a,0x826a,
0x8279,0x8289,0x8299,0x82a8,0x82b8,0x82c8,0x82d7,0x82e7,
0x82f7,0x8306,0x8316,0x8326,0x8335,0x8345,0x8354,0x8364,
0x8374,0x8383,0x8393,0x83a2,0x83b2,0x83c1,0x83d1,0x83e0,
0x83f0,0x8400,0x840f,0x841f,0x842e,0x843e,0x844d,0x845c,
0x846c,0x847b,0x848b,0x849a,0x84aa,0x84b9,0x84c9,0x84d8,
0x84e7,0x84f7,0x8506,0x8516,0x8525,0x8534,0x8544,0x8553,
0x8562,0x8572,0x8581,0x8591,0x85a0,0x85af,0x85be,0x85ce,
0x85dd,0x85ec,0x85fc,0x860b,0x861a,0x862a,0x8639,0x8648,
0x8657,0x8667,0x8676,0x8685,0x8694,0x86a3,0x86b3,0x86c2,
0x86d1,0x86e0,0x86ef,0x86ff,0x870e,0x871d,0x872c,0x873b,
0x874a,0x8759,0x8769,0x8778,0x8787,0x8796,0x87a5,0x87b4,
0x87c3,0x87d2,0x87e1,0x87f0,0x8800,0x880f,0x881e,0x882d,
0x883c,0x884b,0x885a,0x8869,0x8878,0x8887,0x8896,0x88a5,
0x88b4,0x88c3,0x88d2,0x88e1,0x88f0,0x88ff,0x890e,0x891c,
0x892b,0x893a,0x8949,0x8958,0x8967,0x8976,0x8985,0x8994,
0x89a3,0x89b2,0x89c0,0x89cf,0x89de,0x89ed,0x89fc,0x8a0b,
0x8a19,0x8a28,0x8a37,0x8a46,0x8a55,0x8a64,0x8a72,0x8a81,
0x8a90,0x8a9f,0x8aad,0x8abc,0x8acb,0x8ada,0x8ae8,0x8af7,
0x8b06,0x8b15,0x8b23,0x8b32,0x8b41,0x8b50,0x8b5e,0x8b6d,
0x8b7c,0x8b8a,0x8b99,0x8ba8,0x8bb6,0x8bc5,0x8bd4,0x8be2,
0x8bf1,0x8c00,0x8c0e,0x8c1d,0x8c2b,0x8c3a,0x8c49,0x8c57,
0x8c66,0x8c74,0x8c83,0x8c91,0x8ca0,0x8caf,0x8cbd,0x8ccc,
0x8cda,0x8ce9,0x8cf7,0x8d06,0x8d14,0x8d23,0x8d31,0x8d40,
0x8d4e,0x8d5d,0x8d6b,0x8d7a,0x8d88,0x8d97,0x8da5,0x8db4,
0x8dc2,0x8dd1,0x8ddf,0x8ded,0x8dfc,0x8e0a,0x8e19,0x8e27,
0x8e36,0x8e44,0x8e52,0x8e61,0x8e6f,0x8e7d,0x8e8c,0x8e9a,
0x8ea9,0x8eb7,0x8ec5,0x8ed4,0x8ee2,0x8ef0,0x8eff,0x8f0d,
0x8f1b,0x8f2a,0x8f38,0x8f46,0x8f54,0x8f63,0x8f71,0x8f7f,
0x8f8e,0x8f9c,0x8faa,0x8fb8,0x8fc7,0x8fd5,0x8fe3,0x8ff1,
0x9000,0x900e,0x901c,0x902a,0x9038,0x9047,0x9055,0x9063,
0x9071,0x907f,0x908d,0x909c,0x90aa,0x90b8,0x90c6,0x90d4,
0x90e2,0x90f0,0x90ff,0x910d,0x911b,0x9129,0x9137,0x9145,
0x9153,0x9161,0x916f,0x917e,0x918c,0x919a,0x91a8,0x91b6,
0x91c4,0x91d2,0x91e0,0x91ee,0x91fc,0x920a,0x9218,0x9226,
0x9234,0x9242,0x9250,0x925e,0x926c,0x927a,0x9288,0x9296,
0x92a4,0x92b2,0x92c0,0x92ce,0x92dc,0x92ea,0x92f8,0x9306,
0x9314,0x9321,0x932f,0x933d,0x934b,0x9359,0x9367,0x9375,
0x9383,0x9391,0x939f,0x93ac,0x93ba,0x93c8,0x93d6,0x93e4,
0x93f2,0x9400,0x940d,0x941b,0x9429,0x9437,0x9445,0x9452,
0x9460,0x946e,0x947c,0x948a,0x9497,0x94a5,0x94b3,0x94c1,
0x94cf,0x94dc,0x94ea,0x94f8,0x9506,0x9513,0x9521,0x952f,
0x953c,0x954a,0x9558,0x9566,0x9573,0x9581,0x958f,0x959c,
0x95aa,0x95b8,0x95c5,0x95d3,0x95e1,0x95ee,0x95fc,0x960a,
0x9617,0x9625,0x9633,0x9640,0x964e,0x965c,0x9669,0x9677,
0x9684,0x9692,0x96a0,0x96ad,0x96bb,0x96c8,0x96d6,0x96e4,
0x96f1,0x96ff,0x970c,0x971a,0x9727,0x9735,0x9742,0x9750,
0x975d,0x976b,0x9779,0x9786,0x9794,0x97a1,0x97af,0x97bc,
0x97ca,0x97d7,0x97e5,0x97f2,0x9800,0x980d,0x981a,0x9828,
0x9835,0x9843,0x9850,0x985e,0x986b,0x9879,0x9886,0x9893,
0x98a1,0x98ae,0x98bc,0x98c9,0x98d6,0x98e4,0x98f1,0x98ff,
0x990c,0x9919,0x9927,0x9934,0x9942,0x994f,0x995c,0x996a,
0x9977,0x9984,0x9992,0x999f,0x99ac,0x99ba,0x99c7,0x99d4,
0x99e2,0x99ef,0x99fc,0x9a09,0x9a17,0x9a24,0x9a31,0x9a3f,
0x9a4c,0x9a59,0x9a66,0x9a74,0x9a81,0x9a8e,0x9a9b,0x9aa9,
0x9ab6,0x9ac3,0x9ad0,0x9ade,0x9aeb,0x9af8,0x9b05,0x9b12,
0x9b20,0x9b2d,0x9b3a,0x9b47,0x9b54,0x9b62,0x9b6f,0x9b7c,
0x9b89,0x9b96,0x9ba3,0x9bb1,0x9bbe,0x9bcb,0x9bd8,0x9be5,
0x9bf2,0x9c00,0x9c0d,0x9c1a,0x9c27,0x9c34,0x9c41,0x9c4e,
0x9c5b,0x9c68,0x9c75,0x9c83,0x9c90,0x9c9d,0x9caa,0x9cb7,
0x9cc4,0x9cd1,0x9cde,0x9ceb,0x9cf8,0x9d05,0x9d12,0x9d1f,
0x9d2c,0x9d39,0x9d46,0x9d53,0x9d60,0x9d6d,0x9d7a,0x9d87,
0x9d94,0x9da1,0x9dae,0x9dbb,0x9dc8,0x9dd5,0x9de2,0x9def,
0x9dfc,0x9e09,0x9e16,0x9e23,0x9e30,0x9e3d,0x9e4a,0x9e57,
0x9e64,0x9e71,0x9e7e,0x9e8b,0x9e98,0x9ea4,0x9eb1,0x9ebe,
0x9ecb,0x9ed8,0x9ee5,0x9ef2,0x9eff,0x9f0c,0x9f18,0x9f25,
0x9f32,0x9f3f,0x9f4c,0x9f59,0x9f66,0x9f72,0x9f7f,0x9f8c,
0x9f99,0x9fa6,0x9fb3,0x9fbf,0x9fcc,0x9fd9,0x9fe6,0x9ff3,
0xa000,0xa00c,0xa019,0xa026,0xa033,0xa03f,0xa04c,0xa059,
0xa066,0xa073,0xa07f,0xa08c,0xa099,0xa0a6,0xa0b2,0xa0bf,
0xa0cc,0xa0d9,0xa0e5,0xa0f2,0xa0ff,0xa10b,0xa118,0xa125,
0xa132,0xa13e,0xa14b,0xa158,0xa164,0xa171,0xa17e,0xa18a,
0xa197,0xa1a4,0xa1b0,0xa1bd,0xa1ca,0xa1d6,0xa1e3,0xa1f0,
0xa1fc,0xa209,0xa216,0xa222,0xa22f,0xa23c,0xa248,0xa255,
0xa261,0xa26e,0xa27b,0xa287,0xa294,0xa2a0,0xa2ad,0xa2ba,
0xa2c6,0xa2d3,0xa2df,0xa2ec,0xa2f8,0xa305,0xa312,0xa31e,
0xa32b,0xa337,0xa344,0xa350,0xa35d,0xa369,0xa376,0xa382,
0xa38f,0xa39b,0xa3a8,0xa3b5,0xa3c1,0xa3ce,0xa3da,0xa3e7,
0xa3f3,0xa400,0xa40c,0xa418,0xa425,0xa431,0xa43e,0xa44a,
0xa457,0xa463,0xa470,0xa47c,0xa489,0xa495,0xa4a2,0xa4ae,
0xa4ba,0xa4c7,0xa4d3,0xa4e0,0xa4ec,0xa4f9,0xa505,0xa511,
0xa51e,0xa52a,0xa537,0xa543,0xa54f,0xa55c,0xa568,0xa574,
0xa581,0xa58d,0xa59a,0xa5a6,0xa5b2,0xa5bf,0xa5cb,0xa5d7,
0xa5e4,0xa5f0,0xa5fc,0xa609,0xa615,0xa621,0xa62e,0xa63a,
0xa646,0xa653,0xa65f,0xa66b,0xa678,0xa684,0xa690,0xa69d,
0xa6a9,0xa6b5,0xa6c1,0xa6ce,0xa6da,0xa6e6,0xa6f2,0xa6ff,
0xa70b,0xa717,0xa724,0xa730,0xa73c,0xa748,0xa754,0xa761,
0xa76d,0xa779,0xa785,0xa792,0xa79e,0xa7aa,0xa7b6,0xa7c3,
0xa7cf,0xa7db,0xa7e7,0xa7f3,0xa800,0xa80c,0xa818,0xa824,
0xa830,0xa83c,0xa849,0xa855,0xa861,0xa86d,0xa879,0xa885,
0xa892,0xa89e,0xa8aa,0xa8b6,0xa8c2,0xa8ce,0xa8da,0xa8e6,
0xa8f3,0xa8ff,0xa90b,0xa917,0xa923,0xa92f,0xa93b,0xa947,
0xa953,0xa960,0xa96c,0xa978,0xa984,0xa990,0xa99c,0xa9a8,
0xa9b4,0xa9c0,0xa9cc,0xa9d8,0xa9e4,0xa9f0,0xa9fc,0xaa09,
0xaa15,0xaa21,0xaa2d,0xaa39,0xaa45,0xaa51,0xaa5d,0xaa69,
0xaa75,0xaa81,0xaa8d,0xaa99,0xaaa5,0xaab1,0xaabd,0xaac9,
0xaad5,0xaae1,0xaaed,0xaaf9,0xab05,0xab11,0xab1d,0xab29,
0xab35,0xab41,0xab4d,0xab58,0xab64,0xab70,0xab7c,0xab88,
0xab94,0xaba0,0xabac,0xabb8,0xabc4,0xabd0,0xabdc,0xabe8,
0xabf4,0xac00,0xac0b,0xac17,0xac23,0xac2f,0xac3b,0xac47,
0xac53,0xac5f,0xac6b,0xac76,0xac82,0xac8e,0xac9a,0xaca6,
0xacb2,0xacbe,0xacc9,0xacd5,0xace1,0xaced,0xacf9,0xad05,
0xad11,0xad1c,0xad28,0xad34,0xad40,0xad4c,0xad57,0xad63,
0xad6f,0xad7b,0xad87,0xad92,0xad9e,0xadaa,0xadb6,0xadc2,
0xadcd,0xadd9,0xade5,0xadf1,0xadfd,0xae08,0xae14,0xae20,
0xae2c,0xae37,0xae43,0xae4f,0xae5b,0xae66,0xae72,0xae7e,
0xae8a,0xae95,0xaea1,0xaead,0xaeb8,0xaec4,0xaed0,0xaedc,
0xaee7,0xaef3,0xaeff,0xaf0a,0xaf16,0xaf22,0xaf2e,0xaf39,
0xaf45,0xaf51,0xaf5c,0xaf68,0xaf74,0xaf7f,0xaf8b,0xaf97,
0xafa2,0xafae,0xafba,0xafc5,0xafd1,0xafdd,0xafe8,0xaff4,
0xb000,0xb00b,0xb017,0xb022,0xb02e,0xb03a,0xb045,0xb051,
0xb05c,0xb068,0xb074,0xb07f,0xb08b,0xb097,0xb0a2,0xb0ae,
0xb0b9,0xb0c5,0xb0d0,0xb0dc,0xb0e8,0xb0f3,0xb0ff,0xb10a,
0xb116,0xb121,0xb12d,0xb139,0xb144,0xb150,0xb15b,0xb167,
0xb172,0xb17e,0xb189,0xb195,0xb1a0,0xb1ac,0xb1b8,0xb1c3,
0xb1cf,0xb1da,0xb1e6,0xb1f1,0xb1fd,0xb208,0xb214,0xb21f,
0xb22b,0xb236,0xb242,0xb24d,0xb259,0xb264,0xb270,0xb27b,
0xb286,0xb292,0xb29d,0xb2a9,0xb2b4,0xb2c0,0xb2cb,0xb2d7,
0xb2e2,0xb2ee,0xb2f9,0xb305,0xb310,0xb31b,0xb327,0xb332,
0xb33e,0xb349,0xb355,0xb360,0xb36b,0xb377,0xb382,0xb38e,
0xb399,0xb3a4,0xb3b0,0xb3bb,0xb3c7,0xb3d2,0xb3dd,0xb3e9,
0xb3f4,0xb400,0xb40b,0xb416,0xb422,0xb42d,0xb438,0xb444,
0xb44f,0xb45a,0xb466,0xb471,0xb47c,0xb488,0xb493,0xb49f,
0xb4aa,0xb4b5,0xb4c1,0xb4cc,0xb4d7,0xb4e2,0xb4ee,0xb4f9,
0xb504,0xb510,0xb51b,0xb526,0xb532,0xb53d,0xb548,0xb554,
0xb55f,0xb56a,0xb575,0xb581,0xb58c,0xb597,0xb5a3,0xb5ae,
0xb5b9,0xb5c4,0xb5d0,0xb5db,0xb5e6,0xb5f1,0xb5fd,0xb608,
0xb613,0xb61e,0xb62a,0xb635,0xb640,0xb64b,0xb657,0xb662,
0xb66d,0xb678,0xb684,0xb68f,0xb69a,0xb6a5,0xb6b0,0xb6bc,
0xb6c7,0xb6d2,0xb6dd,0xb6e8,0xb6f4,0xb6ff,0xb70a,0xb715,
0xb720,0xb72c,0xb737,0xb742,0xb74d,0xb758,0xb763,0xb76f,
0xb77a,0xb785,0xb790,0xb79b,0xb7a6,0xb7b2,0xb7bd,0xb7c8,
0xb7d3,0xb7de,0xb7e9,0xb7f4,0xb800,0xb80b,0xb816,0xb821,
0xb82c,0xb837,0xb842,0xb84d,0xb858,0xb864,0xb86f,0xb87a,
0xb885,0xb890,0xb89b,0xb8a6,0xb8b1,0xb8bc,0xb8c7,0xb8d3,
0xb8de,0xb8e9,0xb8f4,0xb8ff,0xb90a,0xb915,0xb920,0xb92b,
0xb936,0xb941,0xb94c,0xb957,0xb962,0xb96d,0xb978,0xb983,
0xb98f,0xb99a,0xb9a5,0xb9b0,0xb9bb,0xb9c6,0xb9d1,0xb9dc,
0xb9e7,0xb9f2,0xb9fd,0xba08,0xba13,0xba1e,0xba29,0xba34,
0xba3f,0xba4a,0xba55,0xba60,0xba6b,0xba76,0xba81,0xba8c,
0xba97,0xbaa2,0xbaad,0xbab8,0xbac3,0xbace,0xbad8,0xbae3,
0xbaee,0xbaf9,0xbb04,0xbb0f,0xbb1a,0xbb25,0xbb30,0xbb3b,
0xbb46,0xbb51,0xbb5c,0xbb67,0xbb72,0xbb7d,0xbb88,0xbb92,
0xbb9d,0xbba8,0xbbb3,0xbbbe,0xbbc9,0xbbd4,0xbbdf,0xbbea,
0xbbf5,0xbc00,0xbc0a,0xbc15,0xbc20,0xbc2b,0xbc36,0xbc41,
0xbc4c,0xbc57,0xbc61,0xbc6c,0xbc77,0xbc82,0xbc8d,0xbc98,
0xbca3,0xbcad,0xbcb8,0xbcc3,0xbcce,0xbcd9,0xbce4,0xbcef,
0xbcf9,0xbd04,0xbd0f,0xbd1a,0xbd25,0xbd30,0xbd3a,0xbd45,
0xbd50,0xbd5b,0xbd66,0xbd70,0xbd7b,0xbd86,0xbd91,0xbd9c,
0xbda6,0xbdb1,0xbdbc,0xbdc7,0xbdd2,0xbddc,0xbde7,0xbdf2,
0xbdfd,0xbe08,0xbe12,0xbe1d,0xbe28,0xbe33,0xbe3d,0xbe48,
0xbe53,0xbe5e,0xbe68,0xbe73,0xbe7e,0xbe89,0xbe93,0xbe9e,
0xbea9,0xbeb4,0xbebe,0xbec9,0xbed4,0xbedf,0xbee9,0xbef4,
0xbeff,0xbf0a,0xbf14,0xbf1f,0xbf2a,0xbf34,0xbf3f,0xbf4a,
0xbf55,0xbf5f,0xbf6a,0xbf75,0xbf7f,0xbf8a,0xbf95,0xbf9f,
0xbfaa,0xbfb5,0xbfbf,0xbfca,0xbfd5,0xbfdf,0xbfea,0xbff5,
0xc000,0xc00a,0xc015,0xc01f,0xc02a,0xc035,0xc03f,0xc04a,
0xc055,0xc05f,0xc06a,0xc075,0xc07f,0xc08a,0xc095,0xc09f,
0xc0aa,0xc0b5,0xc0bf,0xc0ca,0xc0d4,0xc0df,0xc0ea,0xc0f4,
0xc0ff,0xc109,0xc114,0xc11f,0xc129,0xc134,0xc13e,0xc149,
0xc154,0xc15e,0xc169,0xc173,0xc17e,0xc189,0xc193,0xc19e,
0xc1a8,0xc1b3,0xc1bd,0xc1c8,0xc1d3,0xc1dd,0xc1e8,0xc1f2,
0xc1fd,0xc207,0xc212,0xc21d,0xc227,0xc232,0xc23c,0xc247,
0xc251,0xc25c,0xc266,0xc271,0xc27b,0xc286,0xc290,0xc29b,
0xc2a5,0xc2b0,0xc2bb,0xc2c5,0xc2d0,0xc2da,0xc2e5,0xc2ef,
0xc2fa,0xc304,0xc30f,0xc319,0xc324,0xc32e,0xc339,0xc343,
0xc34e,0xc358,0xc363,0xc36d,0xc377,0xc382,0xc38c,0xc397,
0xc3a1,0xc3ac,0xc3b6,0xc3c1,0xc3cb,0xc3d6,0xc3e0,0xc3eb,
0xc3f5,0xc400,0xc40a,0xc414,0xc41f,0xc429,0xc434,0xc43e,
0xc449,0xc453,0xc45d,0xc468,0xc472,0xc47d,0xc487,0xc492,
0xc49c,0xc4a6,0xc4b1,0xc4bb,0xc4c6,0xc4d0,0xc4da,0xc4e5,
0xc4ef,0xc4fa,0xc504,0xc50e,0xc519,0xc523,0xc52e,0xc538,
0xc542,0xc54d,0xc557,0xc562,0xc56c,0xc576,0xc581,0xc58b,
0xc595,0xc5a0,0xc5aa,0xc5b4,0xc5bf,0xc5c9,0xc5d4,0xc5de,
0xc5e8,0xc5f3,0xc5fd,0xc607,0xc612,0xc61c,0xc626,0xc631,
0xc63b,0xc645,0xc650,0xc65a,0xc664,0xc66f,0xc679,0xc683,
0xc68e,0xc698,0xc6a2,0xc6ac,0xc6b7,0xc6c1,0xc6cb,0xc6d6,
0xc6e0,0xc6ea,0xc6f5,0xc6ff,0xc709,0xc713,0xc71e,0xc728,
0xc732,0xc73d,0xc747,0xc751,0xc75b,0xc766,0xc770,0xc77a,
0xc784,0xc78f,0xc799,0xc7a3,0xc7ae,0xc7b8,0xc7c2,0xc7cc,
0xc7d7,0xc7e1,0xc7eb,0xc7f5,0xc800,0xc80a,0xc814,0xc81e,
0xc828,0xc833,0xc83d,0xc847,0xc851,0xc85c,0xc866,0xc870,
0xc87a,0xc884,0xc88f,0xc899,0xc8a3,0xc8ad,0xc8b7,0xc8c2,
0xc8cc,0xc8d6,0xc8e0,0xc8ea,0xc8f5,0xc8ff,0xc909,0xc913,
0xc91d,0xc928,0xc932,0xc93c,0xc946,0xc950,0xc95a,0xc965,
0xc96f,0xc979,0xc983,0xc98d,0xc997,0xc9a2,0xc9ac,0xc9b6,
0xc9c0,0xc9ca,0xc9d4,0xc9df,0xc9e9,0xc9f3,0xc9fd,0xca07,
0xca11,0xca1b,0xca26,0xca30,0xca3a,0xca44,0xca4e,0xca58,
0xca62,0xca6c,0xca76,0xca81,0xca8b,0xca95,0xca9f,0xcaa9,
0xcab3,0xcabd,0xcac7,0xcad1,0xcadc,0xcae6,0xcaf0,0xcafa,
0xcb04,0xcb0e,0xcb18,0xcb22,0xcb2c,0xcb36,0xcb40,0xcb4a,
0xcb55,0xcb5f,0xcb69,0xcb73,0xcb7d,0xcb87,0xcb91,0xcb9b,
0xcba5,0xcbaf,0xcbb9,0xcbc3,0xcbcd,0xcbd7,0xcbe1,0xcbeb,
0xcbf5,0xcc00,0xcc0a,0xcc14,0xcc1e,0xcc28,0xcc32,0xcc3c,
0xcc46,0xcc50,0xcc5a,0xcc64,0xcc6e,0xcc78,0xcc82,0xcc8c,
0xcc96,0xcca0,0xccaa,0xccb4,0xccbe,0xccc8,0xccd2,0xccdc,
0xcce6,0xccf0,0xccfa,0xcd04,0xcd0e,0xcd18,0xcd22,0xcd2c,
0xcd36,0xcd40,0xcd4a,0xcd54,0xcd5e,0xcd68,0xcd72,0xcd7c,
0xcd86,0xcd90,0xcd99,0xcda3,0xcdad,0xcdb7,0xcdc1,0xcdcb,
0xcdd5,0xcddf,0xcde9,0xcdf3,0xcdfd,0xce07,0xce11,0xce1b,
0xce25,0xce2f,0xce39,0xce43,0xce4c,0xce56,0xce60,0xce6a,
0xce74,0xce7e,0xce88,0xce92,0xce9c,0xcea6,0xceb0,0xceba,
0xcec3,0xcecd,0xced7,0xcee1,0xceeb,0xcef5,0xceff,0xcf09,
0xcf13,0xcf1d,0xcf26,0xcf30,0xcf3a,0xcf44,0xcf4e,0xcf58,
0xcf62,0xcf6c,0xcf75,0xcf7f,0xcf89,0xcf93,0xcf9d,0xcfa7,
0xcfb1,0xcfbb,0xcfc4,0xcfce,0xcfd8,0xcfe2,0xcfec,0xcff6,
0xd000,0xd009,0xd013,0xd01d,0xd027,0xd031,0xd03b,0xd044,
0xd04e,0xd058,0xd062,0xd06c,0xd076,0xd07f,0xd089,0xd093,
0xd09d,0xd0a7,0xd0b0,0xd0ba,0xd0c4,0xd0ce,0xd0d8,0xd0e1,
0xd0eb,0xd0f5,0xd0ff,0xd109,0xd112,0xd11c,0xd126,0xd130,
0xd13a,0xd143,0xd14d,0xd157,0xd161,0xd16b,0xd174,0xd17e,
0xd188,0xd192,0xd19b,0xd1a5,0xd1af,0xd1b9,0xd1c3,0xd1cc,
0xd1d6,0xd1e0,0xd1ea,0xd1f3,0xd1fd,0xd207,0xd211,0xd21a,
0xd224,0xd22e,0xd238,0xd241,0xd24b,0xd255,0xd25f,0xd268,
0xd272,0xd27c,0xd285,0xd28f,0xd299,0xd2a3,0xd2ac,0xd2b6,
0xd2c0,0xd2c9,0xd2d3,0xd2dd,0xd2e7,0xd2f0,0xd2fa,0xd304,
0xd30d,0xd317,0xd321,0xd32b,0xd334,0xd33e,0xd348,0xd351,
0xd35b,0xd365,0xd36e,0xd378,0xd382,0xd38b,0xd395,0xd39f,
0xd3a8,0xd3b2,0xd3bc,0xd3c6,0xd3cf,0xd3d9,0xd3e3,0xd3ec,
0xd3f6,0xd400,0xd409,0xd413,0xd41c,0xd426,0xd430,0xd439,
0xd443,0xd44d,0xd456,0xd460,0xd46a,0xd473,0xd47d,0xd487,
0xd490,0xd49a,0xd4a3,0xd4ad,0xd4b7,0xd4c0,0xd4ca,0xd4d4,
0xd4dd,0xd4e7,0xd4f0,0xd4fa,0xd504,0xd50d,0xd517,0xd521,
0xd52a,0xd534,0xd53d,0xd547,0xd551,0xd55a,0xd564,0xd56d,
0xd577,0xd581,0xd58a,0xd594,0xd59d,0xd5a7,0xd5b0,0xd5ba,
0xd5c4,0xd5cd,0xd5d7,0xd5e0,0xd5ea,0xd5f4,0xd5fd,0xd607,
0xd610,0xd61a,0xd623,0xd62d,0xd637,0xd640,0xd64a,0xd653,
0xd65d,0xd666,0xd670,0xd679,0xd683,0xd68c,0xd696,0xd6a0,
0xd6a9,0xd6b3,0xd6bc,0xd6c6,0xd6cf,0xd6d9,0xd6e2,0xd6ec,
0xd6f5,0xd6ff,0xd708,0xd712,0xd71b,0xd725,0xd72f,0xd738,
0xd742,0xd74b,0xd755,0xd75e,0xd768,0xd771,0xd77b,0xd784,
0xd78e,0xd797,0xd7a1,0xd7aa,0xd7b4,0xd7bd,0xd7c7,0xd7d0,
0xd7da,0xd7e3,0xd7ed,0xd7f6,0xd800,0xd809,0xd812,0xd81c,
0xd825,0xd82f,0xd838,0xd842,0xd84b,0xd855,0xd85e,0xd868,
0xd871,0xd87b,0xd884,0xd88e,0xd897,0xd8a0,0xd8aa,0xd8b3,
0xd8bd,0xd8c6,0xd8d0,0xd8d9,0xd8e3,0xd8ec,0xd8f5,0xd8ff,
0xd908,0xd912,0xd91b,0xd925,0xd92e,0xd938,0xd941,0xd94a,
0xd954,0xd95d,0xd967,0xd970,0xd979,0xd983,0xd98c,0xd996,
0xd99f,0xd9a9,0xd9b2,0xd9bb,0xd9c5,0xd9ce,0xd9d8,0xd9e1,
0xd9ea,0xd9f4,0xd9fd,0xda07,0xda10,0xda19,0xda23,0xda2c,
0xda35,0xda3f,0xda48,0xda52,0xda5b,0xda64,0xda6e,0xda77,
0xda81,0xda8a,0xda93,0xda9d,0xdaa6,0xdaaf,0xdab9,0xdac2,
0xdacb,0xdad5,0xdade,0xdae8,0xdaf1,0xdafa,0xdb04,0xdb0d,
0xdb16,0xdb20,0xdb29,0xdb32,0xdb3c,0xdb45,0xdb4e,0xdb58,
0xdb61,0xdb6a,0xdb74,0xdb7d,0xdb86,0xdb90,0xdb99,0xdba2,
0xdbac,0xdbb5,0xdbbe,0xdbc8,0xdbd1,0xdbda,0xdbe4,0xdbed,
0xdbf6,0xdc00,0xdc09,0xdc12,0xdc1b,0xdc25,0xdc2e,0xdc37,
0xdc41,0xdc4a,0xdc53,0xdc5d,0xdc66,0xdc6f,0xdc78,0xdc82,
0xdc8b,0xdc94,0xdc9e,0xdca7,0xdcb0,0xdcb9,0xdcc3,0xdccc,
0xdcd5,0xdcde,0xdce8,0xdcf1,0xdcfa,0xdd04,0xdd0d,0xdd16,
0xdd1f,0xdd29,0xdd32,0xdd3b,0xdd44,0xdd4e,0xdd57,0xdd60,
0xdd69,0xdd73,0xdd7c,0xdd85,0xdd8e,0xdd98,0xdda1,0xddaa,
0xddb3,0xddbd,0xddc6,0xddcf,0xddd8,0xdde2,0xddeb,0xddf4,
0xddfd,0xde06,0xde10,0xde19,0xde22,0xde2b,0xde35,0xde3e,
0xde47,0xde50,0xde59,0xde63,0xde6c,0xde75,0xde7e,0xde87,
0xde91,0xde9a,0xdea3,0xdeac,0xdeb5,0xdebf,0xdec8,0xded1,
0xdeda,0xdee3,0xdeed,0xdef6,0xdeff,0xdf08,0xdf11,0xdf1a,
0xdf24,0xdf2d,0xdf36,0xdf3f,0xdf48,0xdf52,0xdf5b,0xdf64,
0xdf6d,0xdf76,0xdf7f,0xdf89,0xdf92,0xdf9b,0xdfa4,0xdfad,
0xdfb6,0xdfbf,0xdfc9,0xdfd2,0xdfdb,0xdfe4,0xdfed,0xdff6,
0xe000,0xe009,0xe012,0xe01b,0xe024,0xe02d,0xe036,0xe03f,
0xe049,0xe052,0xe05b,0xe064,0xe06d,0xe076,0xe07f,0xe088,
0xe092,0xe09b,0xe0a4,0xe0ad,0xe0b6,0xe0bf,0xe0c8,0xe0d1,
0xe0db,0xe0e4,0xe0ed,0xe0f6,0xe0ff,0xe108,0xe111,0xe11a,
0xe123,0xe12c,0xe136,0xe13f,0xe148,0xe151,0xe15a,0xe163,
0xe16c,0xe175,0xe17e,0xe187,0xe190,0xe199,0xe1a3,0xe1ac,
0xe1b5,0xe1be,0xe1c7,0xe1d0,0xe1d9,0xe1e2,0xe1eb,0xe1f4,
0xe1fd,0xe206,0xe20f,0xe218,0xe221,0xe22b,0xe234,0xe23d,
0xe246,0xe24f,0xe258,0xe261,0xe26a,0xe273,0xe27c,0xe285,
0xe28e,0xe297,0xe2a0,0xe2a9,0xe2b2,0xe2bb,0xe2c4,0xe2cd,
0xe2d6,0xe2df,0xe2e8,0xe2f1,0xe2fa,0xe303,0xe30c,0xe315,
0xe31f,0xe328,0xe331,0xe33a,0xe343,0xe34c,0xe355,0xe35e,
0xe367,0xe370,0xe379,0xe382,0xe38b,0xe394,0xe39d,0xe3a6,
0xe3af,0xe3b8,0xe3c1,0xe3ca,0xe3d3,0xe3dc,0xe3e5,0xe3ee,
0xe3f7,0xe400,0xe408,0xe411,0xe41a,0xe423,0xe42c,0xe435,
0xe43e,0xe447,0xe450,0xe459,0xe462,0xe46b,0xe474,0xe47d,
0xe486,0xe48f,0xe498,0xe4a1,0xe4aa,0xe4b3,0xe4bc,0xe4c5,
0xe4ce,0xe4d7,0xe4e0,0xe4e9,0xe4f2,0xe4fa,0xe503,0xe50c,
0xe515,0xe51e,0xe527,0xe530,0xe539,0xe542,0xe54b,0xe554,
0xe55d,0xe566,0xe56f,0xe578,0xe580,0xe589,0xe592,0xe59b,
0xe5a4,0xe5ad,0xe5b6,0xe5bf,0xe5c8,0xe5d1,0xe5da,0xe5e3,
0xe5eb,0xe5f4,0xe5fd,0xe606,0xe60f,0xe618,0xe621,0xe62a,
0xe633,0xe63c,0xe644,0xe64d,0xe656,0xe65f,0xe668,0xe671,
0xe67a,0xe683,0xe68c,0xe694,0xe69d,0xe6a6,0xe6af,0xe6b8,
0xe6c1,0xe6ca,0xe6d3,0xe6db,0xe6e4,0xe6ed,0xe6f6,0xe6ff,
0xe708,0xe711,0xe71a,0xe722,0xe72b,0xe734,0xe73d,0xe746,
0xe74f,0xe758,0xe760,0xe769,0xe772,0xe77b,0xe784,0xe78d,
0xe795,0xe79e,0xe7a7,0xe7b0,0xe7b9,0xe7c2,0xe7cb,0xe7d3,
0xe7dc,0xe7e5,0xe7ee,0xe7f7,0xe800,0xe808,0xe811,0xe81a,
0xe823,0xe82c,0xe834,0xe83d,0xe846,0xe84f,0xe858,0xe861,
0xe869,0xe872,0xe87b,0xe884,0xe88d,0xe895,0xe89e,0xe8a7,
0xe8b0,0xe8b9,0xe8c1,0xe8ca,0xe8d3,0xe8dc,0xe8e5,0xe8ed,
0xe8f6,0xe8ff,0xe908,0xe911,0xe919,0xe922,0xe92b,0xe934,
0xe93c,0xe945,0xe94e,0xe957,0xe960,0xe968,0xe971,0xe97a,
0xe983,0xe98b,0xe994,0xe99d,0xe9a6,0xe9ae,0xe9b7,0xe9c0,
0xe9c9,0xe9d2,0xe9da,0xe9e3,0xe9ec,0xe9f5,0xe9fd,0xea06,
0xea0f,0xea18,0xea20,0xea29,0xea32,0xea3b,0xea43,0xea4c,
0xea55,0xea5e,0xea66,0xea6f,0xea78,0xea80,0xea89,0xea92,
0xea9b,0xeaa3,0xeaac,0xeab5,0xeabe,0xeac6,0xeacf,0xead8,
0xeae0,0xeae9,0xeaf2,0xeafb,0xeb03,0xeb0c,0xeb15,0xeb1d,
0xeb26,0xeb2f,0xeb38,0xeb40,0xeb49,0xeb52,0xeb5a,0xeb63,
0xeb6c,0xeb74,0xeb7d,0xeb86,0xeb8f,0xeb97,0xeba0,0xeba9,
0xebb1,0xebba,0xebc3,0xebcb,0xebd4,0xebdd,0xebe5,0xebee,
0xebf7,0xec00,0xec08,0xec11,0xec1a,0xec22,0xec2b,0xec34,
0xec3c,0xec45,0xec4e,0xec56,0xec5f,0xec68,0xec70,0xec79,
0xec82,0xec8a,0xec93,0xec9c,0xeca4,0xecad,0xecb5,0xecbe,
0xecc7,0xeccf,0xecd8,0xece1,0xece9,0xecf2,0xecfb,0xed03,
0xed0c,0xed15,0xed1d,0xed26,0xed2e,0xed37,0xed40,0xed48,
0xed51,0xed5a,0xed62,0xed6b,0xed74,0xed7c,0xed85,0xed8d,
0xed96,0xed9f,0xeda7,0xedb0,0xedb8,0xedc1,0xedca,0xedd2,
0xeddb,0xede4,0xedec,0xedf5,0xedfd,0xee06,0xee0f,0xee17,
0xee20,0xee28,0xee31,0xee3a,0xee42,0xee4b,0xee53,0xee5c,
0xee65,0xee6d,0xee76,0xee7e,0xee87,0xee8f,0xee98,0xeea1,
0xeea9,0xeeb2,0xeeba,0xeec3,0xeecc,0xeed4,0xeedd,0xeee5,
0xeeee,0xeef6,0xeeff,0xef08,0xef10,0xef19,0xef21,0xef2a,
0xef32,0xef3b,0xef43,0xef4c,0xef55,0xef5d,0xef66,0xef6e,
0xef77,0xef7f,0xef88,0xef90,0xef99,0xefa2,0xefaa,0xefb3,
0xefbb,0xefc4,0xefcc,0xefd5,0xefdd,0xefe6,0xefee,0xeff7,
0xf000,0xf008,0xf011,0xf019,0xf022,0xf02a,0xf033,0xf03b,
0xf044,0xf04c,0xf055,0xf05d,0xf066,0xf06e,0xf077,0xf07f,
0xf088,0xf090,0xf099,0xf0a1,0xf0aa,0xf0b2,0xf0bb,0xf0c3,
0xf0cc,0xf0d4,0xf0dd,0xf0e5,0xf0ee,0xf0f6,0xf0ff,0xf107,
0xf110,0xf118,0xf121,0xf129,0xf132,0xf13a,0xf143,0xf14b,
0xf154,0xf15c,0xf165,0xf16d,0xf176,0xf17e,0xf187,0xf18f,
0xf198,0xf1a0,0xf1a9,0xf1b1,0xf1ba,0xf1c2,0xf1cb,0xf1d3,
0xf1dc,0xf1e4,0xf1ec,0xf1f5,0xf1fd,0xf206,0xf20e,0xf217,
0xf21f,0xf228,0xf230,0xf239,0xf241,0xf24a,0xf252,0xf25a,
0xf263,0xf26b,0xf274,0xf27c,0xf285,0xf28d,0xf296,0xf29e,
0xf2a6,0xf2af,0xf2b7,0xf2c0,0xf2c8,0xf2d1,0xf2d9,0xf2e1,
0xf2ea,0xf2f2,0xf2fb,0xf303,0xf30c,0xf314,0xf31c,0xf325,
0xf32d,0xf336,0xf33e,0xf347,0xf34f,0xf357,0xf360,0xf368,
0xf371,0xf379,0xf381,0xf38a,0xf392,0xf39b,0xf3a3,0xf3ac,
0xf3b4,0xf3bc,0xf3c5,0xf3cd,0xf3d6,0xf3de,0xf3e6,0xf3ef,
0xf3f7,0xf400,0xf408,0xf410,0xf419,0xf421,0xf429,0xf432,
0xf43a,0xf443,0xf44b,0xf453,0xf45c,0xf464,0xf46d,0xf475,
0xf47d,0xf486,0xf48e,0xf496,0xf49f,0xf4a7,0xf4b0,0xf4b8,
0xf4c0,0xf4c9,0xf4d1,0xf4d9,0xf4e2,0xf4ea,0xf4f2,0xf4fb,
0xf503,0xf50c,0xf514,0xf51c,0xf525,0xf52d,0xf535,0xf53e,
0xf546,0xf54e,0xf557,0xf55f,0xf567,0xf570,0xf578,0xf580,
0xf589,0xf591,0xf599,0xf5a2,0xf5aa,0xf5b2,0xf5bb,0xf5c3,
0xf5cb,0xf5d4,0xf5dc,0xf5e4,0xf5ed,0xf5f5,0xf5fd,0xf606,
0xf60e,0xf616,0xf61f,0xf627,0xf62f,0xf638,0xf640,0xf648,
0xf651,0xf659,0xf661,0xf66a,0xf672,0xf67a,0xf682,0xf68b,
0xf693,0xf69b,0xf6a4,0xf6ac,0xf6b4,0xf6bd,0xf6c5,0xf6cd,
0xf6d6,0xf6de,0xf6e6,0xf6ee,0xf6f7,0xf6ff,0xf707,0xf710,
0xf718,0xf720,0xf728,0xf731,0xf739,0xf741,0xf74a,0xf752,
0xf75a,0xf762,0xf76b,0xf773,0xf77b,0xf784,0xf78c,0xf794,
0xf79c,0xf7a5,0xf7ad,0xf7b5,0xf7bd,0xf7c6,0xf7ce,0xf7d6,
0xf7de,0xf7e7,0xf7ef,0xf7f7,0xf800,0xf808,0xf810,0xf818,
0xf821,0xf829,0xf831,0xf839,0xf842,0xf84a,0xf852,0xf85a,
0xf863,0xf86b,0xf873,0xf87b,0xf883,0xf88c,0xf894,0xf89c,
0xf8a4,0xf8ad,0xf8b5,0xf8bd,0xf8c5,0xf8ce,0xf8d6,0xf8de,
0xf8e6,0xf8ef,0xf8f7,0xf8ff,0xf907,0xf90f,0xf918,0xf920,
0xf928,0xf930,0xf939,0xf941,0xf949,0xf951,0xf959,0xf962,
0xf96a,0xf972,0xf97a,0xf982,0xf98b,0xf993,0xf99b,0xf9a3,
0xf9ab,0xf9b4,0xf9bc,0xf9c4,0xf9cc,0xf9d4,0xf9dd,0xf9e5,
0xf9ed,0xf9f5,0xf9fd,0xfa06,0xfa0e,0xfa16,0xfa1e,0xfa26,
0xfa2f,0xfa37,0xfa3f,0xfa47,0xfa4f,0xfa58,0xfa60,0xfa68,
0xfa70,0xfa78,0xfa80,0xfa89,0xfa91,0xfa99,0xfaa1,0xfaa9,
0xfab1,0xfaba,0xfac2,0xfaca,0xfad2,0xfada,0xfae2,0xfaeb,
0xfaf3,0xfafb,0xfb03,0xfb0b,0xfb13,0xfb1c,0xfb24,0xfb2c,
0xfb34,0xfb3c,0xfb44,0xfb4c,0xfb55,0xfb5d,0xfb65,0xfb6d,
0xfb75,0xfb7d,0xfb85,0xfb8e,0xfb96,0xfb9e,0xfba6,0xfbae,
0xfbb6,0xfbbe,0xfbc7,0xfbcf,0xfbd7,0xfbdf,0xfbe7,0xfbef,
0xfbf7,0xfc00,0xfc08,0xfc10,0xfc18,0xfc20,0xfc28,0xfc30,
0xfc38,0xfc40,0xfc49,0xfc51,0xfc59,0xfc61,0xfc69,0xfc71,
0xfc79,0xfc81,0xfc8a,0xfc92,0xfc9a,0xfca2,0xfcaa,0xfcb2,
0xfcba,0xfcc2,0xfcca,0xfcd2,0xfcdb,0xfce3,0xfceb,0xfcf3,
0xfcfb,0xfd03,0xfd0b,0xfd13,0xfd1b,0xfd23,0xfd2c,0xfd34,
0xfd3c,0xfd44,0xfd4c,0xfd54,0xfd5c,0xfd64,0xfd6c,0xfd74,
0xfd7c,0xfd84,0xfd8d,0xfd95,0xfd9d,0xfda5,0xfdad,0xfdb5,
0xfdbd,0xfdc5,0xfdcd,0xfdd5,0xfddd,0xfde5,0xfded,0xfdf5,
0xfdfd,0xfe06,0xfe0e,0xfe16,0xfe1e,0xfe26,0xfe2e,0xfe36,
0xfe3e,0xfe46,0xfe4e,0xfe56,0xfe5e,0xfe66,0xfe6e,0xfe76,
0xfe7e,0xfe86,0xfe8e,0xfe97,0xfe9f,0xfea7,0xfeaf,0xfeb7,
0xfebf,0xfec7,0xfecf,0xfed7,0xfedf,0xfee7,0xfeef,0xfef7,
0xfeff,0xff07,0xff0f,0xff17,0xff1f,0xff27,0xff2f,0xff37,
0xff3f,0xff47,0xff4f,0xff57,0xff5f,0xff67,0xff6f,0xff77,
0xff7f,0xff87,0xff8f,0xff97,0xff9f,0xffa7,0xffaf,0xffb7,
0xffbf,0xffc7,0xffcf,0xffd7,0xffdf,0xffe7,0xffef,0xfff7};





//--------------------------------------------------------------------------------------
// Copy functions from VIP libs for scalerVIP.c , because it can't call lib function in kernel space
// Start
//--------------------------------------------------------------------------------------

//>>>>>>>>>>>>>>>  old RTNR start <<<<<<<<<<<<<<<<<<<<<<<<<<<
void drvif_color_rtnr_y_th_isr(unsigned char channel, unsigned char *Th_Y)
{
//write register
	//RTD_Log(LOGGER_DEBUG,"\n jason==> Start RTNR_Y setting ... \n");


	//di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;
	di_im_di_rtnr_y_16_k0_k7_RBUS im_di_rtnr_y_k_reg;
	di_im_di_rtnr_y_16_th0_th3_RBUS im_di_rtnr_y_16_th0_th3_reg;
	di_im_di_rtnr_y_16_th4_th7_RBUS im_di_rtnr_y_16_th4_th7_reg;
	di_im_di_rtnr_y_16_th8_th11_RBUS im_di_rtnr_y_16_th8_th11_reg;
	di_im_di_rtnr_y_16_th12_th14_RBUS im_di_rtnr_y_16_th12_th14_reg;

	//im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);
	im_di_rtnr_y_k_reg.regValue = rtd_inl(DI_IM_DI_RTNR_Y_16_K0_K7_reg);
	im_di_rtnr_y_16_th0_th3_reg.regValue = rtd_inl(DI_IM_DI_RTNR_Y_16_TH0_TH3_reg);
	im_di_rtnr_y_16_th4_th7_reg.regValue = rtd_inl(DI_IM_DI_RTNR_Y_16_TH4_TH7_reg);
	im_di_rtnr_y_16_th8_th11_reg.regValue = rtd_inl(DI_IM_DI_RTNR_Y_16_TH8_TH11_reg);
	im_di_rtnr_y_16_th12_th14_reg.regValue = rtd_inl(DI_IM_DI_RTNR_Y_16_TH12_TH14_reg);

	if(channel == _CHANNEL1)
	{
		im_di_rtnr_y_16_th0_th3_reg.cp_temporalthly0 = Th_Y[0];
		im_di_rtnr_y_16_th0_th3_reg.cp_temporalthly1 = Th_Y[1];
		im_di_rtnr_y_16_th0_th3_reg.cp_temporalthly2 = Th_Y[2];
		im_di_rtnr_y_16_th0_th3_reg.cp_temporalthly3 = Th_Y[3];
		im_di_rtnr_y_16_th4_th7_reg.cp_temporalthly4 = Th_Y[4];
		im_di_rtnr_y_16_th4_th7_reg.cp_temporalthly5 = Th_Y[5];
		im_di_rtnr_y_16_th4_th7_reg.cp_temporalthly6 = Th_Y[6];
		im_di_rtnr_y_16_th4_th7_reg.cp_temporalthly7 = Th_Y[7];
		im_di_rtnr_y_16_th8_th11_reg.cp_temporalthly8 = Th_Y[8];
		im_di_rtnr_y_16_th8_th11_reg.cp_temporalthly9 = Th_Y[9];
		im_di_rtnr_y_16_th8_th11_reg.cp_temporalthly10 = Th_Y[10];
		im_di_rtnr_y_16_th8_th11_reg.cp_temporalthly11 = Th_Y[11];
		im_di_rtnr_y_16_th12_th14_reg.cp_temporalthly12 = Th_Y[12];
		im_di_rtnr_y_16_th12_th14_reg.cp_temporalthly13 = Th_Y[13];
		im_di_rtnr_y_16_th12_th14_reg.cp_temporalthly14 = Th_Y[14];
	/*
		if(Th_Y[0]!=0)//GET_RTNR_MODE(channel) flag must be turned on by menucofig
		{
			im_di_rtnr_y_16_th0_th3_reg.cp_temporalthly0 = Th_Y[0];
			im_di_rtnr_y_16_th0_th3_reg.cp_temporalthly1 = Th_Y[1];
			im_di_rtnr_y_16_th0_th3_reg.cp_temporalthly2 = Th_Y[2];
			im_di_rtnr_y_16_th0_th3_reg.cp_temporalthly3 = Th_Y[3];
			im_di_rtnr_y_16_th4_th7_reg.cp_temporalthly4 = Th_Y[4];
			im_di_rtnr_y_16_th4_th7_reg.cp_temporalthly5 = Th_Y[5];
			im_di_rtnr_y_16_th4_th7_reg.cp_temporalthly6 = Th_Y[6];
		}
		else
		{
			im_di_rtnr_y_k_reg.cp_temporal_y_k0 = 7;//no rtnr effect
			im_di_rtnr_y_k_reg.cp_temporal_y_k1=  7;
			im_di_rtnr_y_k_reg.cp_temporal_y_k2 = 7;
			im_di_rtnr_y_k_reg.cp_temporal_y_k3 = 7;
			im_di_rtnr_y_k_reg.cp_temporal_y_k4 = 7;
			im_di_rtnr_y_k_reg.cp_temporal_y_k5 = 7;
			im_di_rtnr_y_k_reg.cp_temporal_y_k6 = 7;
			im_di_rtnr_y_k_reg.cp_temporal_y_k7 = 7;
		}
	*/

		//scaler_rtd_outl(DI_IM_DI_RTNR_CONTROL_reg,im_di_rtnr_control_reg.regValue);
		scaler_rtd_outl(DI_IM_DI_RTNR_Y_16_K0_K7_reg,im_di_rtnr_y_k_reg.regValue);
		scaler_rtd_outl(DI_IM_DI_RTNR_Y_16_TH0_TH3_reg,im_di_rtnr_y_16_th0_th3_reg.regValue);
		scaler_rtd_outl(DI_IM_DI_RTNR_Y_16_TH4_TH7_reg,im_di_rtnr_y_16_th4_th7_reg.regValue);
		scaler_rtd_outl(DI_IM_DI_RTNR_Y_16_TH8_TH11_reg,im_di_rtnr_y_16_th8_th11_reg.regValue);
		scaler_rtd_outl(DI_IM_DI_RTNR_Y_16_TH12_TH14_reg,im_di_rtnr_y_16_th12_th14_reg.regValue);
		//WaitFor_IEN_STOP1();//20080516 jason for double buffer

	}


}

void drvif_color_rtnr_c_th_isr(unsigned char channel, unsigned char *Th_C)
{


	//di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;
	di_im_di_rtnr_c_k_RBUS im_di_rtnr_c_k_reg;
	di_im_di_rtnr_c_th0_th3_RBUS im_di_rtnr_c_th0_th3_reg;
	di_im_di_rtnr_c_th4_th6_RBUS im_di_rtnr_c_th4_th6_reg;


	//im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);
	im_di_rtnr_c_k_reg.regValue = rtd_inl(DI_IM_DI_RTNR_C_K_reg);
	im_di_rtnr_c_th0_th3_reg.regValue = rtd_inl(DI_IM_DI_RTNR_C_TH0_TH3_reg);
	im_di_rtnr_c_th4_th6_reg.regValue = rtd_inl(DI_IM_DI_RTNR_C_TH4_TH6_reg);

	if(channel == _CHANNEL1)
	{
		im_di_rtnr_c_th0_th3_reg.cp_temporalthlc0 = Th_C[0];
		im_di_rtnr_c_th0_th3_reg.cp_temporalthlc1 = Th_C[1];
		im_di_rtnr_c_th0_th3_reg.cp_temporalthlc2 = Th_C[2];
		im_di_rtnr_c_th0_th3_reg.cp_temporalthlc3 = Th_C[3];
		im_di_rtnr_c_th4_th6_reg.cp_temporalthlc4 = Th_C[4];
		im_di_rtnr_c_th4_th6_reg.cp_temporalthlc5 = Th_C[5];
		im_di_rtnr_c_th4_th6_reg.cp_temporalthlc6 = Th_C[6];
	/*
		if(Th_C[0]!=0)//GET_RTNR_MODE(channel) flag must be turned on by menucofig
		{
			im_di_rtnr_c_th0_th3_reg.cp_temporalthlc0 = Th_C[0];
			im_di_rtnr_c_th0_th3_reg.cp_temporalthlc1 = Th_C[1];
			im_di_rtnr_c_th0_th3_reg.cp_temporalthlc2 = Th_C[2];
			im_di_rtnr_c_th0_th3_reg.cp_temporalthlc3 = Th_C[3];
			im_di_rtnr_c_th4_th6_reg.cp_temporalthlc4 = Th_C[4];
			im_di_rtnr_c_th4_th6_reg.cp_temporalthlc5 = Th_C[5];
			im_di_rtnr_c_th4_th6_reg.cp_temporalthlc6 = Th_C[6];

		}
		else//th1 = 0 or project no support RTNR
		{
			im_di_rtnr_c_k_reg.cp_temporal_c_k0 = 7;//no rtnr effect
			im_di_rtnr_c_k_reg.cp_temporal_c_k1=  7;
			im_di_rtnr_c_k_reg.cp_temporal_c_k2 = 7;
			im_di_rtnr_c_k_reg.cp_temporal_c_k3 = 7;
			im_di_rtnr_c_k_reg.cp_temporal_c_k4 = 7;
			im_di_rtnr_c_k_reg.cp_temporal_c_k5 = 7;
			im_di_rtnr_c_k_reg.cp_temporal_c_k6 = 7;
			im_di_rtnr_c_k_reg.cp_temporal_c_k7 = 7;
		}
	*/
		//IoReg_Write32(DI_IM_DI_RTNR_CONTROL_reg,RecursiveTemporalNRCtrl_reg.regValue);
		//scaler_rtd_outl(DI_IM_DI_RTNR_CONTROL_reg,im_di_rtnr_control_reg.regValue);
		scaler_rtd_outl(DI_IM_DI_RTNR_C_K_reg,im_di_rtnr_c_k_reg.regValue);
		scaler_rtd_outl(DI_IM_DI_RTNR_C_TH0_TH3_reg,im_di_rtnr_c_th0_th3_reg.regValue);
		scaler_rtd_outl(DI_IM_DI_RTNR_C_TH4_TH6_reg,im_di_rtnr_c_th4_th6_reg.regValue);
	}


}

#ifdef ISR_OLD_RTNR_ENABLE

void drvif_color_rtnr_y_k(unsigned char channel, unsigned int Y_K0_K7, unsigned int Y_K8_K15)
{
//write register

	if(channel == _CHANNEL1)
	{
		scaler_rtd_maskl( DI_IM_DI_RTNR_Y_16_K0_K7_reg, ~(0xffffffff), (unsigned int)(Y_K0_K7));
		scaler_rtd_maskl( DI_IM_DI_RTNR_Y_16_K8_K15_reg, ~(0xffffffff), (unsigned int)(Y_K8_K15));

	}

}


void drvif_color_rtnr_c_k(unsigned char channel, unsigned int K_C)
{
//write register
	if(channel == _CHANNEL1)
	{

		scaler_rtd_maskl( DI_IM_DI_RTNR_C_K_reg, ~(0xffffffff), (unsigned int)(K_C));	// nick187 marked @ 20110223

	}

}
#endif
//>>>>>>>>>>>>>>>  old RTNR  end <<<<<<<<<<<<<<<<<<<<<<<<<<<




//>>>>>>>>>>>>>>>  new RTNR start <<<<<<<<<<<<<<<<<<<<<<<<<<<
// chen 170522
#if 0
#ifdef ISR_NEW_RTNR_ENABLE
void fwif_color_new_rtnr_adjust(unsigned char channel, unsigned char RTNR_level)
{
		int i;
		unsigned char *rtnr_2D_kmap=NULL;

		if (channel == _CHANNEL1)
		{
			if(Scaler_InputSrcGetMainChType()==_SRC_HDMI || Scaler_InputSrcGetMainChType()==_SRC_COMPONENT || Scaler_InputSrcGetMainChType()==_SRC_YPBPR)
			{
				switch (RTNR_level)
				{
					case 0:
						rtnr_2D_kmap = &New_RTNR_Coef_1[0][0];
						break;
					case 1:
						rtnr_2D_kmap = &TV_AutoNr_RTNR_Coef_A[0][0];
						break;
					case 2:
					case 3:
					case 4:
					case 5:
					case 6:
					case 7:
					case 8:
						rtnr_2D_kmap = &TV_AutoNr_RTNR_Coef_B[0][0];
				    	break;
					case 9:
							//rtnr_2D_kmap = &TV_AutoNr_RTNR_Coef_C[0][0];
							//break;
					case 10:
							//rtnr_2D_kmap = &TV_AutoNr_RTNR_Coef_D[0][0];
							//break;
					default://default off
						rtnr_2D_kmap = &TV_AutoNr_RTNR_Coef_A[0][0];
					break;
				}
			}
			else if(Scaler_InputSrcGetMainChType()==_SRC_CVBS)
			{

				switch (RTNR_level)
				{
					case 0:
						rtnr_2D_kmap = &CVBS_AutoNr_RTNR_Coef_A[0][0];
						break;
					case 1:
					case 2:
					case 3:
					case 4:
					case 5:
					case 6:
						rtnr_2D_kmap = &CVBS_AutoNr_RTNR_Coef_B[0][0];
						break;
					break;
					case 7:
						rtnr_2D_kmap = &CVBS_AutoNr_RTNR_Coef_C[0][0];
						break;
					case 8:
						//	rtnr_2D_kmap = &CVBS_AutoNr_RTNR_Coef_C[0][0];
			    		//	break;
					case 9:
						//	rtnr_2D_kmap = &CVBS_AutoNr_RTNR_Coef_C[0][0];
						//	break;
					case 10:
						//	rtnr_2D_kmap = &CVBS_AutoNr_RTNR_Coef_D[0][0];
						//	break;
					default://default off
						rtnr_2D_kmap = &CVBS_AutoNr_RTNR_Coef_B[0][0];
					break;
				}

			}
		}

	if(rtnr_2D_kmap!=NULL)
	{
		for(i=0;i<8;i++)
		{
			drvif_color_newrtnr_rtnr_k(i,&rtnr_2D_kmap[i*8]);
		}
	}


}

void drvif_color_newrtnr_rtnr_k(unsigned char row_select, unsigned char *th)
{

	di_im_di_rtnr_new_k_00_RBUS rtnr_new_k_00;
	di_im_di_rtnr_new_k_10_RBUS rtnr_new_k_10;
	di_im_di_rtnr_new_k_20_RBUS rtnr_new_k_20;
	di_im_di_rtnr_new_k_30_RBUS rtnr_new_k_30;
	di_im_di_rtnr_new_k_40_RBUS rtnr_new_k_40;
	di_im_di_rtnr_new_k_50_RBUS rtnr_new_k_50;
	di_im_di_rtnr_new_k_60_RBUS rtnr_new_k_60;
	di_im_di_rtnr_new_k_70_RBUS rtnr_new_k_70;

	switch (row_select)
	{
	case 0:


		rtnr_new_k_00.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_K_00_reg);

		rtnr_new_k_00.rtnr_k_00 = th[0];
		rtnr_new_k_00.rtnr_k_01 = th[1];
		rtnr_new_k_00.rtnr_k_02 = th[2];
		rtnr_new_k_00.rtnr_k_03 = th[3];
		rtnr_new_k_00.rtnr_k_04 = th[4];
		rtnr_new_k_00.rtnr_k_05 = th[5];
		rtnr_new_k_00.rtnr_k_06 = th[6];
		rtnr_new_k_00.rtnr_k_07 = th[7];

		//for(int i=1;i<8;i++)
		//printf("k_th0[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_K_00_reg, rtnr_new_k_00.regValue);
		break;

	case 1:


		rtnr_new_k_10.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_K_10_reg);

		rtnr_new_k_10.rtnr_k_10 = th[0];
		rtnr_new_k_10.rtnr_k_11 = th[1];
		rtnr_new_k_10.rtnr_k_12 = th[2];
		rtnr_new_k_10.rtnr_k_13 = th[3];
		rtnr_new_k_10.rtnr_k_14 = th[4];
		rtnr_new_k_10.rtnr_k_15 = th[5];
		rtnr_new_k_10.rtnr_k_16 = th[6];
		rtnr_new_k_10.rtnr_k_17 = th[7];

		//for(int i=1;i<8;i++)
		//printf("k_th1[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_K_10_reg, rtnr_new_k_10.regValue);
		break;

	case 2:


		rtnr_new_k_20.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_K_20_reg);

		rtnr_new_k_20.rtnr_k_20 = th[0];
		rtnr_new_k_20.rtnr_k_21 = th[1];
		rtnr_new_k_20.rtnr_k_22 = th[2];
		rtnr_new_k_20.rtnr_k_23 = th[3];
		rtnr_new_k_20.rtnr_k_24 = th[4];
		rtnr_new_k_20.rtnr_k_25 = th[5];
		rtnr_new_k_20.rtnr_k_26 = th[6];
		rtnr_new_k_20.rtnr_k_27 = th[7];

		//for(int i=1;i<8;i++)
		//printf("k_th2[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_K_20_reg, rtnr_new_k_20.regValue);
		break;

	case 3:


		rtnr_new_k_30.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_K_30_reg);

		rtnr_new_k_30.rtnr_k_30 = th[0];
		rtnr_new_k_30.rtnr_k_31 = th[1];
		rtnr_new_k_30.rtnr_k_32 = th[2];
		rtnr_new_k_30.rtnr_k_33 = th[3];
		rtnr_new_k_30.rtnr_k_34 = th[4];
		rtnr_new_k_30.rtnr_k_35 = th[5];
		rtnr_new_k_30.rtnr_k_36 = th[6];
		rtnr_new_k_30.rtnr_k_37 = th[7];

		//for(int i=1;i<8;i++)
		//printf("k_th3[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_K_30_reg, rtnr_new_k_30.regValue);
		break;

	case 4:

		rtnr_new_k_40.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_K_40_reg);

		rtnr_new_k_40.rtnr_k_40 = th[0];
		rtnr_new_k_40.rtnr_k_41 = th[1];
		rtnr_new_k_40.rtnr_k_42 = th[2];
		rtnr_new_k_40.rtnr_k_43 = th[3];
		rtnr_new_k_40.rtnr_k_44 = th[4];
		rtnr_new_k_40.rtnr_k_45 = th[5];
		rtnr_new_k_40.rtnr_k_46 = th[6];
		rtnr_new_k_40.rtnr_k_47 = th[7];

		//for(int i=1;i<8;i++)
		//printf("k_th4[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_K_40_reg, rtnr_new_k_40.regValue);
		break;

	case 5:


		rtnr_new_k_50.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_K_50_reg);

		rtnr_new_k_50.rtnr_k_50 =th[0];
		rtnr_new_k_50.rtnr_k_51 =th[1];
		rtnr_new_k_50.rtnr_k_52 =th[2];
		rtnr_new_k_50.rtnr_k_53 =th[3];
		rtnr_new_k_50.rtnr_k_54 =th[4];
		rtnr_new_k_50.rtnr_k_55 =th[5];
		rtnr_new_k_50.rtnr_k_56 =th[6];
		rtnr_new_k_50.rtnr_k_57 =th[7];

		//for(int i=1;i<8;i++)
		//printf("k_th5[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_K_50_reg, rtnr_new_k_50.regValue);
		break;

	case 6:


		rtnr_new_k_60.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_K_60_reg);

		rtnr_new_k_60.rtnr_k_60 =th[0];
		rtnr_new_k_60.rtnr_k_61 =th[1];
		rtnr_new_k_60.rtnr_k_62 =th[2];
		rtnr_new_k_60.rtnr_k_63 =th[3];
		rtnr_new_k_60.rtnr_k_64 =th[4];
		rtnr_new_k_60.rtnr_k_65 =th[5];
		rtnr_new_k_60.rtnr_k_66 =th[6];
		rtnr_new_k_60.rtnr_k_67 =th[7];

		//for(int i=1;i<8;i++)
		//printf("k_th6[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_K_60_reg, rtnr_new_k_60.regValue);
		break;

	case 7:


		rtnr_new_k_70.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_K_70_reg);

		rtnr_new_k_70.rtnr_k_70 = th[0];
		rtnr_new_k_70.rtnr_k_71 = th[1];
		rtnr_new_k_70.rtnr_k_72 = th[2];
		rtnr_new_k_70.rtnr_k_73 = th[3];
		rtnr_new_k_70.rtnr_k_74 = th[4];
		rtnr_new_k_70.rtnr_k_75 = th[5];
		rtnr_new_k_70.rtnr_k_76 = th[6];
		rtnr_new_k_70.rtnr_k_77 = th[7];

		//for(int i=1;i<8;i++)
		//printf("k_th7[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_K_70_reg, rtnr_new_k_70.regValue);
		break;

	default:
		break;
	}
}

void drvif_color_newrtnr_sad_th(unsigned char edge, unsigned char *th)
{

	if (edge)
	{
		di_im_di_rtnr_new_sad_edge_th_1_RBUS rtnr_new_sad_edge_th_1;
		di_im_di_rtnr_new_sad_edge_th_2_RBUS rtnr_new_sad_edge_th_2;

		rtnr_new_sad_edge_th_1.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_SAD_EDGE_TH_1_reg);
		rtnr_new_sad_edge_th_2.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_SAD_EDGE_TH_2_reg);

		rtnr_new_sad_edge_th_1.rtnr_calculate_motion_sad_edge_th1 = th[0];
		rtnr_new_sad_edge_th_1.rtnr_calculate_motion_sad_edge_th2 = th[1];
		rtnr_new_sad_edge_th_1.rtnr_calculate_motion_sad_edge_th3 = th[2];
		rtnr_new_sad_edge_th_1.rtnr_calculate_motion_sad_edge_th4 = th[3];
		rtnr_new_sad_edge_th_2.rtnr_calculate_motion_sad_edge_th5 = th[4];
		rtnr_new_sad_edge_th_2.rtnr_calculate_motion_sad_edge_th6 = th[5];
		rtnr_new_sad_edge_th_2.rtnr_calculate_motion_sad_edge_th7 = th[6];

		//for(int i=1;i<7;i++)
		//printf("sad_edge_th[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_SAD_EDGE_TH_1_reg, rtnr_new_sad_edge_th_1.regValue);
		rtd_outl(DI_IM_DI_RTNR_NEW_SAD_EDGE_TH_2_reg, rtnr_new_sad_edge_th_2.regValue);
	}
	else
	{
		di_im_di_rtnr_new_sad_nonedge_th_1_RBUS rtnr_new_sad_nonedge_th_1;
		di_im_di_rtnr_new_sad_nonedge_th_2_RBUS rtnr_new_sad_nonedge_th_2;

		rtnr_new_sad_nonedge_th_1.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_SAD_NONEDGE_TH_1_reg);
		rtnr_new_sad_nonedge_th_2.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_SAD_NONEDGE_TH_2_reg);

		rtnr_new_sad_nonedge_th_1.rtnr_calculate_motion_sad_nonedge_th1 = th[0];
		rtnr_new_sad_nonedge_th_1.rtnr_calculate_motion_sad_nonedge_th2 = th[1];
		rtnr_new_sad_nonedge_th_1.rtnr_calculate_motion_sad_nonedge_th3 = th[2];
		rtnr_new_sad_nonedge_th_1.rtnr_calculate_motion_sad_nonedge_th4 = th[3];
		rtnr_new_sad_nonedge_th_2.rtnr_calculate_motion_sad_nonedge_th5 = th[4];
		rtnr_new_sad_nonedge_th_2.rtnr_calculate_motion_sad_nonedge_th6 = th[5];
		rtnr_new_sad_nonedge_th_2.rtnr_calculate_motion_sad_nonedge_th7 = th[6];

		//for(int i=1;i<7;i++)
		//printf("sad_noedge_th[%d]=%x\n",i,th[i]);

		rtd_outl(DI_IM_DI_RTNR_NEW_SAD_NONEDGE_TH_1_reg, rtnr_new_sad_nonedge_th_1.regValue);
		rtd_outl(DI_IM_DI_RTNR_NEW_SAD_NONEDGE_TH_2_reg, rtnr_new_sad_nonedge_th_2.regValue);
	}
}


void drvif_color_newrtnr_sta_th(unsigned char *th)
{

	di_im_di_rtnr_new_sad_count_th_RBUS rtnr_new_sad_count_th;
	di_im_di_rtnr_new_sad_nonedge_th_2_RBUS rtnr_new_sad_nonedge_th_2;
	rtnr_new_sad_count_th.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_SAD_COUNT_TH_reg);
	rtnr_new_sad_nonedge_th_2.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_SAD_NONEDGE_TH_2_reg);

	rtnr_new_sad_count_th.rtnr_statistic_motion_count_th1 = th[0];
	rtnr_new_sad_count_th.rtnr_statistic_motion_count_th2 = th[1];
	rtnr_new_sad_count_th.rtnr_statistic_motion_count_th3 = th[2];
	rtnr_new_sad_count_th.rtnr_statistic_motion_count_th4 = th[3];
	rtnr_new_sad_count_th.rtnr_statistic_motion_count_th5 = th[4];
	rtnr_new_sad_count_th.rtnr_statistic_motion_count_th6 = th[5];
//	rtnr_new_sad_count_th.rtnr_statistic_motion_count_th7 = th[6];
#if 0	//20150706 roger mark for compiler error
	rtnr_new_sad_nonedge_th_2.rtnr_statistic_motion_count_th7 = th[6];
#endif
	//for(int i=1;i<7;i++)
		//printf("sad_sta_th[%d]=%x\n",i,th[i]);

	rtd_outl(DI_IM_DI_RTNR_NEW_SAD_COUNT_TH_reg, rtnr_new_sad_count_th.regValue);
	rtd_outl(DI_IM_DI_RTNR_NEW_SAD_NONEDGE_TH_2_reg, rtnr_new_sad_nonedge_th_2.regValue);
}

void drvif_color_newrtnr_edgetypediff_th(unsigned char *th)
{

	di_im_di_rtnr_new_edgetypediff_th_1_RBUS rtnr_new_edgetypediff_th_1;
	di_im_di_rtnr_new_edgetypediff_th_2_RBUS rtnr_new_edgetypediff_th_2;

	rtnr_new_edgetypediff_th_1.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_EDGETYPEDIFF_TH_1_reg);
	rtnr_new_edgetypediff_th_2.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_EDGETYPEDIFF_TH_2_reg);

	rtnr_new_edgetypediff_th_1.rtnr_edgetypediff_count_th1 = th[0];
	rtnr_new_edgetypediff_th_1.rtnr_edgetypediff_count_th2 = th[1];
	rtnr_new_edgetypediff_th_1.rtnr_edgetypediff_count_th3 = th[2];
	rtnr_new_edgetypediff_th_1.rtnr_edgetypediff_count_th4 = th[3];
	rtnr_new_edgetypediff_th_2.rtnr_edgetypediff_count_th5 = th[4];
	rtnr_new_edgetypediff_th_2.rtnr_edgetypediff_count_th6 = th[5];
	rtnr_new_edgetypediff_th_2.rtnr_edgetypediff_count_th7 = th[6];

	//for(int i=1;i<7;i++)
		//printf("sad_dgetype_th[%d]=%x\n",i,th[i]);

	rtd_outl(DI_IM_DI_RTNR_NEW_EDGETYPEDIFF_TH_1_reg, rtnr_new_edgetypediff_th_1.regValue);
	rtd_outl(DI_IM_DI_RTNR_NEW_EDGETYPEDIFF_TH_2_reg, rtnr_new_edgetypediff_th_2.regValue);
}

void drvif_color_newrtnr_snr_edge_th(unsigned int *th)
{
//Elsie 20140724: Old RTNR SNR has been removed
#if 0
	di_im_di_rtnr_new_snr_th_1_RBUS rtnr_new_snr_th_1;
	di_im_di_rtnr_new_snr_th2_RBUS rtnr_new_snr_th_2;
	rtnr_new_snr_th_1.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_SNR_TH_1_reg);
	rtnr_new_snr_th_2.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_SNR_TH2_reg);
	rtnr_new_snr_th_1.rtnr_snr_edgestatus_th1 = th[0];
	rtnr_new_snr_th_1.rtnr_snr_edgestatus_th2 = th[1];
	rtnr_new_snr_th_1.rtnr_snr_edgestatus_th3 = th[2];
	rtnr_new_snr_th_1.rtnr_snr_edgestatus_th4 = th[3];
	rtnr_new_snr_th_2.rtnr_snr_edgestatus_th5 = th[4];
	rtnr_new_snr_th_2.rtnr_snr_edgestatus_th6 = th[5];
	rtnr_new_snr_th_2.rtnr_snr_edgestatus_th7 = th[6];

	rtd_outl(DI_IM_DI_RTNR_NEW_SNR_TH_1_reg, rtnr_new_snr_th_1.regValue);
 	rtd_outl(DI_IM_DI_RTNR_NEW_SNR_TH2_reg, rtnr_new_snr_th_2.regValue);
#endif
}
#endif

#endif
// end chen 170522


//>>>>>>>>>>>>>>>  new RTNR end <<<<<<<<<<<<<<<<<<<<<<<<<<<

#ifdef ISR_AMBILIGHT_ENABLE
unsigned char drvif_color_dragon_profile_dectector_ambilight(unsigned char display, unsigned short *H_ambBlock, unsigned short *V_ambBlock, unsigned short *Profile_transition_sum, unsigned char hx_offset, unsigned char vy_offset, unsigned char Color_sel)
{

//This function will return profile data
//in Profile block, input is always 8 bit(truncated from 10 bit)
//	scalerDrvPrint("=================================  Start of Colobar_dectector =================================\n");
	unsigned int h_tmp, v_tmp;
	//unsigned short Active_Region[4];
	unsigned short IphActWid_H=0,IpvActLen_V=0;
	static unsigned char ini_flag = 1;
	static unsigned char color_set = 0;
	unsigned char ret, color, i;
	unsigned char h_shift_num=0, v_shift_num=0;
	unsigned char block_num = 4; //16 block in profile
	unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);
	vgip_vgip_chn1_act_hsta_width_RBUS vgip_chn1_act_hsta_width_reg;
	vgip_vgip_chn1_act_vsta_length_RBUS vgip_chn1_act_vsta_length_reg;
	#if AMBI_PROFILE_DETECT_DEBUG_TPV
	static unsigned char profile_dectector_count = 0;
	profile_dectector_count++;
	if((profile_dectector_count % 300) == 0)
	ROSPrintf("\n===1\n");
	#endif

	vgip_chn1_act_hsta_width_reg.regValue  = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	vgip_chn1_act_vsta_length_reg.regValue = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg);
	// color select, 0=y, 1=u, 2=v, 3=y, then u, then v.
	if(Color_sel<3)
		color = Color_sel;
	else
		color = color_set;

	profile_ich1_hist_profile_ctrl_RBUS	hist_profile_ctrl_reg;
	profile_ich1_hist_profile_size_RBUS hist_profile_size_reg;
	profile_ich1_hist_profile_starth_RBUS hist_profile_starth_reg;
	profile_ich1_hist_profile_startv_RBUS hist_profile_startv_reg;

	profile_ich1_hist_profile_data_00_RBUS hist_profile_data_00_reg;
	profile_ich1_hist_profile_data_01_RBUS hist_profile_data_01_reg;
	profile_ich1_hist_profile_data_02_RBUS hist_profile_data_02_reg;
	profile_ich1_hist_profile_data_03_RBUS hist_profile_data_03_reg;
	profile_ich1_hist_profile_data_04_RBUS hist_profile_data_04_reg;
	profile_ich1_hist_profile_data_05_RBUS hist_profile_data_05_reg;
	profile_ich1_hist_profile_data_06_RBUS hist_profile_data_06_reg;
	profile_ich1_hist_profile_data_07_RBUS hist_profile_data_07_reg;
	profile_ich1_hist_profile_data_08_RBUS hist_profile_data_08_reg;
	profile_ich1_hist_profile_data_09_RBUS hist_profile_data_09_reg;
	profile_ich1_hist_profile_data_10_RBUS hist_profile_data_10_reg;
	profile_ich1_hist_profile_data_11_RBUS hist_profile_data_11_reg;
	profile_ich1_hist_profile_data_12_RBUS hist_profile_data_12_reg;
	profile_ich1_hist_profile_data_13_RBUS hist_profile_data_13_reg;
	profile_ich1_hist_profile_data_14_RBUS hist_profile_data_14_reg;
	profile_ich1_hist_profile_data_15_RBUS hist_profile_data_15_reg;

	profile_ich1_hist_profile_data_16_RBUS hist_profile_data_16_reg;
	profile_ich1_hist_profile_data_17_RBUS hist_profile_data_17_reg;
	profile_ich1_hist_profile_data_18_RBUS hist_profile_data_18_reg;
	profile_ich1_hist_profile_data_19_RBUS hist_profile_data_19_reg;
	profile_ich1_hist_profile_data_20_RBUS hist_profile_data_20_reg;
	profile_ich1_hist_profile_data_21_RBUS hist_profile_data_21_reg;
	profile_ich1_hist_profile_data_22_RBUS hist_profile_data_22_reg;
	profile_ich1_hist_profile_data_23_RBUS hist_profile_data_23_reg;



	hist_profile_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_CTRL_reg);
	hist_profile_size_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_size_reg);
	hist_profile_starth_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_StartH_reg);
	hist_profile_startv_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_StartV_reg);

	//drvif_color_activeregion_dragon(display, &Active_Region[0]);
	IphActWid_H=(SmartPic_clue->SCALER_DISP_INFO.IphActWid_H);
	IpvActLen_V=(SmartPic_clue->SCALER_DISP_INFO.IpvActLen_V);
//	scalerDrvPrint("Active_Region[0]=%d\n",Active_Region[0]);
//	scalerDrvPrint("Active_Region[1]=%d\n",Active_Region[1]);
//	scalerDrvPrint("Active_Region[2]=%d\n",Active_Region[2]);
//	scalerDrvPrint("Active_Region[3]=%d\n",Active_Region[3]);

	//Set block size
    switch(SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x2;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x1;
			h_shift_num = 9;
			v_shift_num = 10;
			#if AMBI_PROFILE_DETECT_DEBUG_TPV
			if((profile_dectector_count % 300) == 0)
			ROSPrintf("\n===1.1\n");
			#endif
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x2;
			h_shift_num = 10;
			v_shift_num = 11;
			#if AMBI_PROFILE_DETECT_DEBUG_TPV
			if((profile_dectector_count % 300) == 0)
			ROSPrintf("\n===1.2\n");
			#endif
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x3;
			h_shift_num = 10;
			v_shift_num = 12;
			#if AMBI_PROFILE_DETECT_DEBUG_TPV
			if((profile_dectector_count % 300) == 0)
			ROSPrintf("\n===1.3\n");
			#endif
			break;
		default:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x2;
			h_shift_num = 10;
			v_shift_num = 11;
			#if AMBI_PROFILE_DETECT_DEBUG_TPV
			if((profile_dectector_count % 300) == 0)
			ROSPrintf("\n===1.4\n");
			#endif
			break;
	}
	#if AMBI_PROFILE_DETECT_DEBUG_TPV
	if((profile_dectector_count % 300) == 0)
	ROSPrintf("\n====2=  h_shift=%d,v_shift= %d\n"  ,h_shift_num,v_shift_num);
	#endif
	hist_profile_size_reg.ch1_pf_hsize = (IphActWid_H>>block_num) - ((2*hx_offset)>>block_num) - 1;//according to spec., size should be minus 1
	hist_profile_size_reg.ch1_pf_vsize = (IpvActLen_V>>block_num) - ((2*vy_offset)>>block_num) - 1;//according to spec., size should be minus 1
	//Set Start Position
	hist_profile_starth_reg.ch1_pf_starth = hx_offset;
	hist_profile_startv_reg.ch1_pf_startv = vy_offset;
	#if AMBI_PROFILE_DETECT_DEBUG_TPV
	if((profile_dectector_count % 300) == 0)
	ROSPrintf("\n====2.1=  hsize=%d ,vsize=%d\n"  ,hist_profile_size_reg.ch1_pf_hsize,hist_profile_size_reg.ch1_pf_vsize);
	#endif
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_size_reg, hist_profile_size_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_StartH_reg, hist_profile_starth_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_StartV_reg, hist_profile_startv_reg.regValue);


	if(ini_flag)
	{
		//enable profile
		hist_profile_ctrl_reg.ch1_pf_field_sel = 0x2;//next field
		hist_profile_ctrl_reg.ch1_pf_enable_profile = 0x1;
		ini_flag = 0;
	}


	// add for truncate HNSR & VNSR value before read his_profile, csfanchiang 20100908
	hist_profile_ctrl_reg.ch1_pf_yuv_sel = color;

	scaler_rtd_outl(PROFILE_ICH1_HIST_PROFILE_CTRL_reg, hist_profile_ctrl_reg.regValue);

	hist_profile_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_CTRL_reg);
	#if AMBI_PROFILE_DETECT_DEBUG_TPV
	if((profile_dectector_count % 60) == 0)
	ROSPrintf("\n===3====  IphActWid_H=%d ,IpvActLen_V=%d \n",IphActWid_H,IpvActLen_V);
	#endif
	if(hist_profile_ctrl_reg.ch1_pf_enable_profile==0)//wait for finish flag
	{
		hist_profile_data_00_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_00_reg);
		hist_profile_data_01_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_01_reg);
		hist_profile_data_02_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_02_reg);
		hist_profile_data_03_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_03_reg);
		hist_profile_data_04_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_04_reg);
		hist_profile_data_05_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_05_reg);
		hist_profile_data_06_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_06_reg);
		hist_profile_data_07_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_07_reg);
		hist_profile_data_08_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_08_reg);
		hist_profile_data_09_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_09_reg);
		hist_profile_data_10_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_10_reg);
		hist_profile_data_11_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_11_reg);
		hist_profile_data_12_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_12_reg);
		hist_profile_data_13_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_13_reg);
		hist_profile_data_14_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_14_reg);
		hist_profile_data_15_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_15_reg);

		hist_profile_data_16_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_16_reg);
		hist_profile_data_17_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_17_reg);
		hist_profile_data_18_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_18_reg);
		hist_profile_data_19_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_19_reg);
		hist_profile_data_20_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_20_reg);
		hist_profile_data_21_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_21_reg);
		hist_profile_data_22_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_22_reg);
		hist_profile_data_23_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_Data_23_reg);

		H_ambBlock[0]   = hist_profile_data_00_reg.ch1_pf_h00;
		H_ambBlock[1]   = hist_profile_data_00_reg.ch1_pf_h01;
		H_ambBlock[2]   = hist_profile_data_01_reg.ch1_pf_h02;
		H_ambBlock[3]   = hist_profile_data_01_reg.ch1_pf_h03;
		H_ambBlock[4]   = hist_profile_data_02_reg.ch1_pf_h04;
		H_ambBlock[5]   = hist_profile_data_02_reg.ch1_pf_h05;
		H_ambBlock[6]   = hist_profile_data_03_reg.ch1_pf_h06;
		H_ambBlock[7]   = hist_profile_data_03_reg.ch1_pf_h07;
		H_ambBlock[8]   = hist_profile_data_04_reg.ch1_pf_h08;
		H_ambBlock[9]   = hist_profile_data_04_reg.ch1_pf_h09;
		H_ambBlock[10] = hist_profile_data_05_reg.ch1_pf_h10;
		H_ambBlock[11] = hist_profile_data_05_reg.ch1_pf_h11;
		H_ambBlock[12] = hist_profile_data_06_reg.ch1_pf_h12;
		H_ambBlock[13] = hist_profile_data_06_reg.ch1_pf_h13;
		H_ambBlock[14] = hist_profile_data_07_reg.ch1_pf_h14;
		H_ambBlock[15] = hist_profile_data_07_reg.ch1_pf_h15;

		V_ambBlock[0]   = hist_profile_data_08_reg.ch1_pf_v00;
		V_ambBlock[1]   = hist_profile_data_08_reg.ch1_pf_v01;
		V_ambBlock[2]   = hist_profile_data_09_reg.ch1_pf_v02;
		V_ambBlock[3]   = hist_profile_data_09_reg.ch1_pf_v03;
		V_ambBlock[4]   = hist_profile_data_10_reg.ch1_pf_v04;
		V_ambBlock[5]   = hist_profile_data_10_reg.ch1_pf_v05;
		V_ambBlock[6]   = hist_profile_data_11_reg.ch1_pf_v06;
		V_ambBlock[7]   = hist_profile_data_11_reg.ch1_pf_v07;
		V_ambBlock[8]   = hist_profile_data_12_reg.ch1_pf_v08;
		V_ambBlock[9]   = hist_profile_data_12_reg.ch1_pf_v09;
		V_ambBlock[10] = hist_profile_data_13_reg.ch1_pf_v10;
		V_ambBlock[11] = hist_profile_data_13_reg.ch1_pf_v11;
		V_ambBlock[12] = hist_profile_data_14_reg.ch1_pf_v12;
		V_ambBlock[13] = hist_profile_data_14_reg.ch1_pf_v13;
		V_ambBlock[14] = hist_profile_data_15_reg.ch1_pf_v14;
		V_ambBlock[15] = hist_profile_data_15_reg.ch1_pf_v15;

		if(hist_profile_ctrl_reg.ch1_pf_yuv_sel == 0)
		{
		H_Block[0]   = hist_profile_data_00_reg.ch1_pf_h00;
		H_Block[1]   = hist_profile_data_00_reg.ch1_pf_h01;
		H_Block[2]   = hist_profile_data_01_reg.ch1_pf_h02;
		H_Block[3]   = hist_profile_data_01_reg.ch1_pf_h03;
		H_Block[4]   = hist_profile_data_02_reg.ch1_pf_h04;
		H_Block[5]   = hist_profile_data_02_reg.ch1_pf_h05;
		H_Block[6]   = hist_profile_data_03_reg.ch1_pf_h06;
		H_Block[7]   = hist_profile_data_03_reg.ch1_pf_h07;
		H_Block[8]   = hist_profile_data_04_reg.ch1_pf_h08;
		H_Block[9]   = hist_profile_data_04_reg.ch1_pf_h09;
		H_Block[10] = hist_profile_data_05_reg.ch1_pf_h10;
		H_Block[11] = hist_profile_data_05_reg.ch1_pf_h11;
		H_Block[12] = hist_profile_data_06_reg.ch1_pf_h12;
		H_Block[13] = hist_profile_data_06_reg.ch1_pf_h13;
		H_Block[14] = hist_profile_data_07_reg.ch1_pf_h14;
		H_Block[15] = hist_profile_data_07_reg.ch1_pf_h15;

		V_Block[0]   = hist_profile_data_08_reg.ch1_pf_v00;
		V_Block[1]   = hist_profile_data_08_reg.ch1_pf_v01;
		V_Block[2]   = hist_profile_data_09_reg.ch1_pf_v02;
		V_Block[3]   = hist_profile_data_09_reg.ch1_pf_v03;
		V_Block[4]   = hist_profile_data_10_reg.ch1_pf_v04;
		V_Block[5]   = hist_profile_data_10_reg.ch1_pf_v05;
		V_Block[6]   = hist_profile_data_11_reg.ch1_pf_v06;
		V_Block[7]   = hist_profile_data_11_reg.ch1_pf_v07;
		V_Block[8]   = hist_profile_data_12_reg.ch1_pf_v08;
		V_Block[9]   = hist_profile_data_12_reg.ch1_pf_v09;
		V_Block[10] = hist_profile_data_13_reg.ch1_pf_v10;
		V_Block[11] = hist_profile_data_13_reg.ch1_pf_v11;
		V_Block[12] = hist_profile_data_14_reg.ch1_pf_v12;
		V_Block[13] = hist_profile_data_14_reg.ch1_pf_v13;
		V_Block[14] = hist_profile_data_15_reg.ch1_pf_v14;
		V_Block[15] = hist_profile_data_15_reg.ch1_pf_v15;
		}


		#if AMBI_PROFILE_DETECT_DEBUG_TPV
		if((profile_dectector_count % 60) == 0)
		ROSPrintf("\n===4\n");
		#endif
		// caculate average,
		for(i=0;i<16;i++)
		{
			h_tmp = H_ambBlock[i];
			v_tmp = V_ambBlock[i];
			#if AMBI_PROFILE_DETECT_DEBUG_TPV
			if((profile_dectector_count % 60) == 0)
		        ROSPrintf("\n== yuv_sel = %d , H_Block[%d] = %d , V_Block[%d] = %d \n",color,i,H_ambBlock[i],i,V_ambBlock[i]);
			#endif
			if(((hist_profile_size_reg.ch1_pf_vsize+1)*(IphActWid_H-(2*hx_offset))) == 0)
				H_ambBlock[i] = 0;
			else
				H_ambBlock[i] = (unsigned short)((h_tmp<<h_shift_num) / ((hist_profile_size_reg.ch1_pf_vsize+1)*(IphActWid_H-(2*hx_offset))))<<2;//left shift 2 for 8 bit to 10bit
			if(((hist_profile_size_reg.ch1_pf_hsize+1)*(IpvActLen_V-(2*vy_offset))) == 0)
				V_ambBlock[i] = 0;
			else
				V_ambBlock[i] = (unsigned short)((v_tmp<<v_shift_num) / ((hist_profile_size_reg.ch1_pf_hsize+1)*(IpvActLen_V-(2*vy_offset))))<<2;

			#if AMBI_PROFILE_DETECT_DEBUG_TPV
			if((profile_dectector_count % 60) == 0)
		        ROSPrintf("\n== H_Block[%d] = %d , V_Block[%d] = %d \n",i,H_ambBlock[i],i,V_ambBlock[i]);
			#endif
		}
	#if AMBI_PROFILE_DETECT_DEBUG_TPV
	if((profile_dectector_count % 60) == 0)
	ROSPrintf("\n===5\n");
	#endif
		/*
		*Profile_transition_sum    = hist_profile_data_16_reg.ch1_pf_h00_right;
		*Profile_transition_sum  += hist_profile_data_16_reg.ch1_pf_h01_right;
		*Profile_transition_sum  += hist_profile_data_17_reg.ch1_pf_h02_right;
		*Profile_transition_sum  += hist_profile_data_17_reg.ch1_pf_h03_right;
		*Profile_transition_sum  += hist_profile_data_18_reg.ch1_pf_h04_right;
		*Profile_transition_sum  += hist_profile_data_18_reg.ch1_pf_h05_right;
		*Profile_transition_sum  += hist_profile_data_19_reg.ch1_pf_h06_right;
		*Profile_transition_sum  += hist_profile_data_19_reg.ch1_pf_h07_right;
		*Profile_transition_sum  += hist_profile_data_20_reg.ch1_pf_h08_right;
		*Profile_transition_sum  += hist_profile_data_20_reg.ch1_pf_h09_right;
		*Profile_transition_sum  += hist_profile_data_21_reg.ch1_pf_h10_right;
		*Profile_transition_sum  += hist_profile_data_21_reg.ch1_pf_h11_right;
		*Profile_transition_sum  += hist_profile_data_22_reg.ch1_pf_h12_right;
		*Profile_transition_sum  += hist_profile_data_22_reg.ch1_pf_h13_right;
		*Profile_transition_sum  += hist_profile_data_23_reg.ch1_pf_h14_right;
		*Profile_transition_sum  += hist_profile_data_23_reg.ch1_pf_h15_right;
		*/
		//enable profile
		hist_profile_ctrl_reg.ch1_pf_field_sel = 0x2;//next field
//		hist_profile_ctrl_reg.profile_ch_sel = 0x0;//ch1
		hist_profile_ctrl_reg.ch1_pf_enable_profile = 0x1;

		ret = color;
		// if Color_sel == 3, get yuv data, elieli 20130131
		if(Color_sel>=3)
			color = (color>=2)? 0:color+1;

		color_set = color;
		hist_profile_ctrl_reg.ch1_pf_yuv_sel = color;

		scaler_rtd_outl(PROFILE_ICH1_HIST_PROFILE_CTRL_reg, hist_profile_ctrl_reg.regValue);
	}
	else
	{
		ret = 3;//there's no new h and v data -> do no detection
	}
	#if AMBI_PROFILE_DETECT_DEBUG_TPV
	if((profile_dectector_count % 60) == 0)
		ROSPrintf("\n === profile_sel =%d,=%d\n",color,hist_profile_ctrl_reg.ch1_pf_enable_profile);
	#endif
	return (ret);
}
#endif

void scaler_Set_VIP_info_structure(unsigned char display,_clues* SmartPic_clue)
{
	unsigned int ulTemp=0;

	//== Get disp info from scaler_disp_info. ==
	SmartPic_clue->SCALER_DISP_INFO.input_src	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_INPUT_SRC);
	SmartPic_clue->SCALER_DISP_INFO.disp_status	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_DISP_STATUS);
	SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_MODE_CURR);
	SmartPic_clue->SCALER_DISP_INFO.display		= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_DISPLAY);
	SmartPic_clue->SCALER_DISP_INFO.DispWid		= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_DISP_WID);
	SmartPic_clue->SCALER_DISP_INFO.DispLen		= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_DISP_LEN);
	SmartPic_clue->SCALER_DISP_INFO.CapWid		= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_CAP_WID);
	SmartPic_clue->SCALER_DISP_INFO.CapLen		= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_CAP_LEN);
	SmartPic_clue->SCALER_DISP_INFO.IpvActSTA_H	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_IPH_ACT_STA);
	SmartPic_clue->SCALER_DISP_INFO.IpvActSTA_V	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_IPV_ACT_STA);
	SmartPic_clue->SCALER_DISP_INFO.IphActWid_H	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_IPH_ACT_WID);
	SmartPic_clue->SCALER_DISP_INFO.IpvActLen_V	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_IPV_ACT_LEN);

	SmartPic_clue->SCALER_DISP_INFO.IphActSTA_Pre	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_IPH_ACT_STA_PRE);//scaler_disp_info[display].IphActSTA_Pre;
	SmartPic_clue->SCALER_DISP_INFO.IpvActSTA_Pre	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_IPV_ACT_STA_PRE);//scaler_disp_info[display].IpvActSTA_Pre;
	SmartPic_clue->SCALER_DISP_INFO.IphActWid_Pre	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_IPH_ACT_WID_PRE);//scaler_disp_info[display].IphActWid_Pre;
	SmartPic_clue->SCALER_DISP_INFO.IpvActLen_Pre	= Scaler_DispGetInputInfoByDisp(display, SLR_INPUT_IPV_ACT_LEN_PRE);//scaler_disp_info[display].IpvActLen_Pre;

	//== set system VGIP H and V DELAY Setting ==
	ulTemp = scaler_rtd_inl(VGIP_VGIP_CHN1_DELAY_reg);
	SmartPic_clue->SCALER_DISP_INFO.HDelay = (unsigned short)ulTemp  & 0x0fff;
	SmartPic_clue->SCALER_DISP_INFO.VDelay = (unsigned short)(ulTemp >> 16) & 0x0fff;

}


unsigned char drvif_color_activeregion_dragon(unsigned char display, unsigned short *Region)
{

	vgip_vgip_chn1_act_hsta_width_RBUS vgip_chn1_act_hsta_width_reg;
	vgip_vgip_chn1_act_vsta_length_RBUS vgip_chn1_act_vsta_length_reg;
	//forster modified 071128
	unsigned int ulTemp;
	unsigned short HDelay;
	unsigned short VDelay;

	vgip_chn1_act_hsta_width_reg.regValue  = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	vgip_chn1_act_vsta_length_reg.regValue = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg);
	ulTemp = scaler_rtd_inl(VGIP_VGIP_CHN1_DELAY_reg);
	VDelay = (unsigned short)ulTemp  & 0x0fff;
	HDelay = (unsigned short)(ulTemp >> 16) & 0x0fff;

	Region[0] = (vgip_chn1_act_hsta_width_reg.ch1_ih_act_sta);//Active_HStart
	Region[0] += HDelay;
	Region[1] = (vgip_chn1_act_hsta_width_reg.ch1_ih_act_wid);//Active_HWidtht
	Region[2] = (vgip_chn1_act_vsta_length_reg.ch1_iv_act_sta);//Active_VStart
	Region[2] += VDelay;
	Region[3] = (vgip_chn1_act_vsta_length_reg.ch1_iv_act_len);//Active_VLines
/*
	if(MA_print_count%150==0)
	{
		ROSPrintf("Region= %d, %d, %d, %d\n",Region[0],Region[1],Region[2],Region[3]);
		ROSPrintf("ulTemp=%d, VDelay=%d,HDelay=%d\n",ulTemp,VDelay,HDelay);

		ROSPrintf("DispLen=%d,DispWid=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].DispLen,scaler_disp_info[SLR_MAIN_DISPLAY].DispWid);
		ROSPrintf("MEM_ACT_WID=%d, MEM_ACT_LEN=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].MEM_ACT_WID,scaler_disp_info[SLR_MAIN_DISPLAY].MEM_ACT_LEN);
		ROSPrintf("MEM_ACT_HSTA=%d, MEM_ACT_VSTA=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].MEM_ACT_HSTA,scaler_disp_info[SLR_MAIN_DISPLAY].MEM_ACT_VSTA);
		ROSPrintf("CapWid=%d, CapLen=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].CapWid,scaler_disp_info[SLR_MAIN_DISPLAY].CapLen);
		ROSPrintf("disp_status=%x\n",scaler_disp_info[SLR_MAIN_DISPLAY].disp_status);
		ROSPrintf("IphActWid_Pre=%d, IpvActLen_Pre=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].IphActWid_Pre,scaler_disp_info[SLR_MAIN_DISPLAY].IpvActLen_Pre);
		ROSPrintf("IpvActSTA_H=%d, IpvActSTA_V=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].IpvActSTA_H,scaler_disp_info[SLR_MAIN_DISPLAY].IpvActSTA_V);
		ROSPrintf("IphActWid_H=%d, IpvActLen_V=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].IphActWid_H,scaler_disp_info[SLR_MAIN_DISPLAY].IpvActLen_V);
	}
*/
	//20071126 for CSW ypbpr display adjustment
	/*
	#ifndef CONFIG_YPBPR_OPEN_H_V_POSITION // CSW+ for project instead of Xoceco
		Region[0]+=0x32;
	#endif
       */
	return(1);
}

#ifdef ISR_SHARPNESS_BY_MEAN_ENABLE
void scalerVIP_Adjusted_Shp_by_HistMeanValue_HDMI()//for T2 @ HDMI, elieli 20130925
{
	unsigned char y_th[5]={15,20,25,30,40};
	unsigned char reduce_ratio[5]={108,115,128,128,128};//max ratio = 128
	unsigned char y_th0, y_th1, r0, r1;
	unsigned char moving_step = 1;
	unsigned char factor_index, factor;
	unsigned char text_pos_goal, text_neg_goal, edge_pos_goal, edge_neg_goal, ver_pos_goal, ver_neg_goal;
	unsigned char text_pos_cur, text_neg_cur, edge_pos_cur, edge_neg_cur, ver_pos_cur, ver_neg_cur;
	unsigned int DCC_Histogram_Mean_value = 0;

	DCC_Histogram_Mean_value = SmartPic_clue->Hist_Y_Mean_Value;

	color_sharp_dm_peaking_gain_RBUS dm_peaking_gain_reg;
	dm_peaking_gain_reg.regValue = rtd_inl(COLOR_SHARP_DM_PEAKING_GAIN_reg);
	color_sharp_dm_segpk_edgpk3_RBUS dm_segpk_edgpk3;
	dm_segpk_edgpk3.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_EDGPK3_reg);
	color_sharp_dm_segpk_vpk2_RBUS dm_segpk_vpk2;
	dm_segpk_vpk2.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_VPK2_reg);

	if(DCC_Histogram_Mean_value<=y_th[0])
		factor_index = 0;
	else if(DCC_Histogram_Mean_value<=y_th[1])
		factor_index = 1;
	else if(DCC_Histogram_Mean_value<=y_th[2])
		factor_index = 2;
	else if(DCC_Histogram_Mean_value<=y_th[3])
		factor_index = 3;
	else if(DCC_Histogram_Mean_value<=y_th[4])
		factor_index = 4;
	else
		factor_index = 5;

	if(factor_index==0)
		factor = reduce_ratio[0];
	else if(factor_index == 5)
		factor = reduce_ratio[4];
	else
	{
		y_th0 = y_th[factor_index-1];
		y_th1 = y_th[factor_index];
		r0 = reduce_ratio[factor_index-1];
		r1 = reduce_ratio[factor_index];
		if(r1 >= r0)
			factor = (DCC_Histogram_Mean_value - y_th0) * (r1 - r0) / (y_th1 - y_th0) + r0;
		else
			factor =  r0 - (DCC_Histogram_Mean_value - y_th0) * (r0 - r1) / (y_th1 - y_th0);
	}

	text_pos_cur = dm_peaking_gain_reg.gain_pos;
	text_neg_cur = dm_peaking_gain_reg.gain_neg;
	edge_pos_cur = dm_segpk_edgpk3.gain_pos;
	edge_neg_cur = dm_segpk_edgpk3.gain_neg;
	ver_pos_cur = dm_segpk_vpk2.vpk_gain_pos;
	ver_neg_cur = dm_segpk_vpk2.vpk_gain_neg;

	text_pos_goal = (intelligent_picture_table[INTELLIGENT_PICTURE_TABLE_TEXTURE_POS_GAIN] * factor)>>7;//max ratio is 128
	text_neg_goal = (intelligent_picture_table[INTELLIGENT_PICTURE_TABLE_TEXTURE_NEG_GAIN] * factor)>>7;
	edge_pos_goal = (intelligent_picture_table[INTELLIGENT_PICTURE_TABLE_EDGE_POS_GAIN] * factor)>>7;
	edge_neg_goal = (intelligent_picture_table[INTELLIGENT_PICTURE_TABLE_EDGE_NEG_GAIN] * factor)>>7;
	ver_pos_goal = (intelligent_picture_table[INTELLIGENT_PICTURE_TABLE_VERTICAL_POS_GAIN] * factor)>>7;
	ver_neg_goal = (intelligent_picture_table[INTELLIGENT_PICTURE_TABLE_VERTICAL_NEG_GAIN] * factor)>>7;

	if(text_pos_cur>text_pos_goal)
		text_pos_cur = text_pos_cur - moving_step;
	else if(text_pos_cur<text_pos_goal)
		text_pos_cur = text_pos_cur + moving_step;
	else
		text_pos_cur = text_pos_cur;

	if(text_neg_cur>text_neg_goal)
		text_neg_cur = text_neg_cur - moving_step;
	else if(text_neg_cur<text_neg_goal)
		text_neg_cur = text_neg_cur + moving_step;
	else
		text_neg_cur = text_neg_cur;

	if(edge_pos_cur>edge_pos_goal)
		edge_pos_cur = edge_pos_cur - moving_step;
	else if(edge_pos_cur<edge_pos_goal)
		edge_pos_cur = edge_pos_cur + moving_step;
	else
		edge_pos_cur = edge_pos_cur;

	if(edge_neg_cur>edge_neg_goal)
		edge_neg_cur = edge_neg_cur - moving_step;
	else if(edge_neg_cur<edge_neg_goal)
		edge_neg_cur = edge_neg_cur + moving_step;
	else
		edge_neg_cur = edge_neg_cur;

	if(ver_pos_cur>ver_pos_goal)
		ver_pos_cur = ver_pos_cur - moving_step;
	else if(ver_pos_cur<ver_pos_goal)
		ver_pos_cur = ver_pos_cur + moving_step;
	else
		ver_pos_cur = ver_pos_cur;

	if(ver_neg_cur>ver_neg_goal)
		ver_neg_cur = ver_neg_cur - moving_step;
	else if(ver_neg_cur<ver_neg_goal)
		ver_neg_cur = ver_neg_cur + moving_step;
	else
		ver_neg_cur = ver_neg_cur;

	dm_peaking_gain_reg.gain_pos = text_pos_cur;
	dm_peaking_gain_reg.gain_neg = text_neg_cur;
	dm_segpk_edgpk3.gain_pos = edge_pos_cur;
	dm_segpk_edgpk3.gain_neg = edge_neg_cur;
	dm_segpk_vpk2.vpk_gain_pos = ver_pos_cur;
	dm_segpk_vpk2.vpk_gain_neg = ver_neg_cur;

	rtd_outl(COLOR_SHARP_DM_PEAKING_GAIN_reg, dm_peaking_gain_reg.regValue);
	rtd_outl(COLOR_SHARP_DM_SEGPK_EDGPK3_reg, dm_segpk_edgpk3.regValue);
	rtd_outl(COLOR_SHARP_DM_SEGPK_VPK2_reg, dm_segpk_vpk2.regValue);

#if 0
	if(MA_print_count%100==0)
	{
		ROSPrintf("==========%d,%d,%d,%d,%d,%d,============\n",text_pos_goal, text_neg_goal, edge_pos_goal, edge_neg_goal, ver_pos_goal, ver_neg_goal);
		ROSPrintf("==========%d,%d,%d,%d,%d,%d,============\n",text_pos_cur, text_neg_cur, edge_pos_cur, edge_neg_cur, ver_pos_cur, ver_neg_cur);
		ROSPrintf("==========%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,============\n",intelligent_picture_table[0],intelligent_picture_table[1],
			intelligent_picture_table[2],intelligent_picture_table[3],intelligent_picture_table[4],intelligent_picture_table[5],intelligent_picture_table[6],
			intelligent_picture_table[7],intelligent_picture_table[8],intelligent_picture_table[9]);
		ROSPrintf("==========%d,%d,coRatio=%d,%d============\n",DCC_Histogram_Mean_value,factor,factor_index);
	}
#endif
}
#endif


#if 0
void drvif_color_MpegNR_AutoMode_Off(void)
{
	mpegnr_ich1_mpegnr2_RBUS ich1_MPEGNR2_reg;
	nr_dch1_mpegnr1_RBUS dch1_MPEGNR1_Reg;

	ich1_MPEGNR2_reg.regValue = rtd_inl(MPEGNR_ICH1_MPEGNR2_reg);
	dch1_MPEGNR1_Reg.regValue = rtd_inl(NR_DCH1_MPEGNR1_reg);

	ich1_MPEGNR2_reg.cp_mpegenable_x = 0;
	dch1_MPEGNR1_Reg.cp_mpegenable_y_c = 0;
	dch1_MPEGNR1_Reg.cp_mpegenable_y_y = 0;

	rtd_outl(MPEGNR_ICH1_MPEGNR2_reg, ich1_MPEGNR2_reg.regValue);
	rtd_outl(NR_DCH1_MPEGNR1_reg, dch1_MPEGNR1_Reg.regValue);
}
#endif

#if 0
#ifdef ISR_RTNR_SWITCH_CORRECTION_BIT_FUNCTION_ENABLE
void drvif_color_switch_rtnr_rounding_correction_bit(unsigned char switch_on)
{
	//switch correction_bit for remnant shade.
	di_im_di_rtnr_control_RBUS di_im_di_rtnr_control_RBUS_reg;
	di_im_di_rtnr_control_RBUS_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);

	if((switch_on ==1)&&(pre_correction_flag==99))
	{
		if((di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction == 0)&&(di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en == 0)){
			pre_correction_flag = 0;
		}
		else if((di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction == 0)&&(di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en == 1)){
			pre_correction_flag = 1;
		}
		else if((di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction == 1)&&(di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en == 0)){
			pre_correction_flag = 2;
		}
		else if((di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction == 1)&&(di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en == 1)){
			pre_correction_flag = 3;
		}
	}

	if(switch_on ==1)
	{
		if(di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction == 1)//correction1 is enable
		{
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction = 0;
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en = 1;
			rtd_outl(DI_IM_DI_RTNR_CONTROL_reg, di_im_di_rtnr_control_RBUS_reg.regValue);
		}
		else if(di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en == 1)//correction2 is enable
		{
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction = 1;
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en = 0;
			rtd_outl(DI_IM_DI_RTNR_CONTROL_reg, di_im_di_rtnr_control_RBUS_reg.regValue);
		}
		else
		{
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction = 0;
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en = 1;
			rtd_outl(DI_IM_DI_RTNR_CONTROL_reg, di_im_di_rtnr_control_RBUS_reg.regValue);
		}
	}
	else{
		if(pre_correction_flag == 0){
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction = 0;
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en = 0;
			rtd_outl(DI_IM_DI_RTNR_CONTROL_reg, di_im_di_rtnr_control_RBUS_reg.regValue);
			pre_correction_flag = 99;
		}
		else if(pre_correction_flag == 1){
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction = 0;
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en = 1;
			rtd_outl(DI_IM_DI_RTNR_CONTROL_reg, di_im_di_rtnr_control_RBUS_reg.regValue);
			pre_correction_flag = 99;
		}
		else if(pre_correction_flag == 2){
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction = 1;
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en = 0;
			rtd_outl(DI_IM_DI_RTNR_CONTROL_reg, di_im_di_rtnr_control_RBUS_reg.regValue);
			pre_correction_flag = 99;
		}
		else if(pre_correction_flag == 3){
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction = 1;
			di_im_di_rtnr_control_RBUS_reg.cp_rtnr_rounding_correction2_en = 1;
			rtd_outl(DI_IM_DI_RTNR_CONTROL_reg, di_im_di_rtnr_control_RBUS_reg.regValue);
			pre_correction_flag = 99;
		}
	}
}
#endif
#endif

//--------------------------------------------------------------------------------------
// Copy functions from VIP libs for scalerVIP.c , because it can't call lib function in kernel space
// End
//--------------------------------------------------------------------------------------

char scalerVIP_ReadProfile(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile_ctrl_RBUS hist_profile_ctrl_reg;
	profile_ich1_hist_profile_size_RBUS hist_profile_size_reg;
	profile_ich1_hist_profile_starth_RBUS hist_profile_starth_reg;
	profile_ich1_hist_profile_startv_RBUS hist_profile_startv_reg;
	vgip_vgip_chn1_act_hsta_width_RBUS vgip_chn1_act_hsta_width_reg;
	vgip_vgip_chn1_act_vsta_length_RBUS vgip_chn1_act_vsta_length_reg;
	unsigned short IWid, ILen;	//I-domain width & length
	unsigned char Profile_Block_Num = 16;//set profile h&V block number
	unsigned char ii;
	unsigned char profsum_shift=0;

	unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	hist_profile_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_CTRL_reg);
	hist_profile_size_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_size_reg);

	vgip_chn1_act_hsta_width_reg.regValue  = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	vgip_chn1_act_vsta_length_reg.regValue = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg);

	IWid = vgip_chn1_act_hsta_width_reg.ch1_ih_act_wid; //Active_HWidtht
	ILen = vgip_chn1_act_vsta_length_reg.ch1_iv_act_len; //Active_VLines
	//IWid = scaler_disp_info[_CHANNEL1].DispWid;
	//ILen = scaler_disp_info[_CHANNEL1].DispLen;

	//Set block size
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x2;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x1;
			profsum_shift = 9;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x2;
			profsum_shift = 10;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x3;
			profsum_shift = 10;
			break;
	}

	hist_profile_size_reg.ch1_pf_hsize = (IWid/Profile_Block_Num) -1;//according to spec., size should be minus 1
	//if( isInterlaced )
	if( (SmartPic_clue->SCALER_DISP_INFO.disp_status & _BIT8) != 0) // interlaced
		hist_profile_size_reg.ch1_pf_vsize = (ILen/Profile_Block_Num)*2 -1;//according to spec., size should be minus 1
	else
		hist_profile_size_reg.ch1_pf_vsize = (ILen/Profile_Block_Num) -1;//according to spec., size should be minus 1

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_size_reg, hist_profile_size_reg.regValue);

	//Set Start Position
	hist_profile_starth_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_StartH_reg);
	hist_profile_startv_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_StartV_reg);
	hist_profile_starth_reg.ch1_pf_starth = 0;
	hist_profile_startv_reg.ch1_pf_startv = 0;
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_StartH_reg, hist_profile_starth_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_StartV_reg, hist_profile_startv_reg.regValue);

	if ( hist_profile_ctrl_reg.ch1_pf_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile_data_00_RBUS data_00;
		profile_ich1_hist_profile_data_01_RBUS data_01;
		profile_ich1_hist_profile_data_02_RBUS data_02;
		profile_ich1_hist_profile_data_03_RBUS data_03;
		profile_ich1_hist_profile_data_04_RBUS data_04;
		profile_ich1_hist_profile_data_05_RBUS data_05;
		profile_ich1_hist_profile_data_06_RBUS data_06;
		profile_ich1_hist_profile_data_07_RBUS data_07;
		profile_ich1_hist_profile_data_08_RBUS data_08;
		profile_ich1_hist_profile_data_09_RBUS data_09;
		profile_ich1_hist_profile_data_10_RBUS data_10;
		profile_ich1_hist_profile_data_11_RBUS data_11;
		profile_ich1_hist_profile_data_12_RBUS data_12;
		profile_ich1_hist_profile_data_13_RBUS data_13;
		profile_ich1_hist_profile_data_14_RBUS data_14;
		profile_ich1_hist_profile_data_15_RBUS data_15;

		data_00.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_00_reg);
		data_01.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_01_reg);
		data_02.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_02_reg);
		data_03.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_03_reg);
		data_04.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_04_reg);
		data_05.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_05_reg);
		data_06.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_06_reg);
		data_07.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_07_reg);
		data_08.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_08_reg);
		data_09.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_09_reg);
		data_10.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_10_reg);
		data_11.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_11_reg);
		data_12.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_12_reg);
		data_13.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_13_reg);
		data_14.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_14_reg);
		data_15.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_15_reg);

		H_Block[0]   = data_00.ch1_pf_h00;
		H_Block[1]   = data_00.ch1_pf_h01;
		H_Block[2]   = data_01.ch1_pf_h02;
		H_Block[3]   = data_01.ch1_pf_h03;
		H_Block[4]   = data_02.ch1_pf_h04;
		H_Block[5]   = data_02.ch1_pf_h05;
		H_Block[6]   = data_03.ch1_pf_h06;
		H_Block[7]   = data_03.ch1_pf_h07;
		H_Block[8]   = data_04.ch1_pf_h08;
		H_Block[9]   = data_04.ch1_pf_h09;
		H_Block[10] = data_05.ch1_pf_h10;
		H_Block[11] = data_05.ch1_pf_h11;
		H_Block[12] = data_06.ch1_pf_h12;
		H_Block[13] = data_06.ch1_pf_h13;
		H_Block[14] = data_07.ch1_pf_h14;
		H_Block[15] = data_07.ch1_pf_h15;

		V_Block[0]   = data_08.ch1_pf_v00;
		V_Block[1]   = data_08.ch1_pf_v01;
		V_Block[2]   = data_09.ch1_pf_v02;
		V_Block[3]   = data_09.ch1_pf_v03;
		V_Block[4]   = data_10.ch1_pf_v04;
		V_Block[5]   = data_10.ch1_pf_v05;
		V_Block[6]   = data_11.ch1_pf_v06;
		V_Block[7]   = data_11.ch1_pf_v07;
		V_Block[8]   = data_12.ch1_pf_v08;
		V_Block[9]   = data_12.ch1_pf_v09;
		V_Block[10] = data_13.ch1_pf_v10;
		V_Block[11] = data_13.ch1_pf_v11;
		V_Block[12] = data_14.ch1_pf_v12;
		V_Block[13] = data_14.ch1_pf_v13;
		V_Block[14] = data_15.ch1_pf_v14;
		V_Block[15] = data_15.ch1_pf_v15;
		//enable profile
		hist_profile_ctrl_reg.ch1_pf_field_sel = 0x2;	//next field
		hist_profile_ctrl_reg.ch1_pf_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile_ctrl_reg.regValue);

		ProfSum = 0;
		for( ii=0; ii<16; ii++ ) {
			ProfSum += H_Block[ii];
		}
		//ProfSum = ProfSum << profsum_shift;
		//ROSPrintf( "[ScalerVIP] ========Profile OK, ProfSum=%d========\n", ProfSum );

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}
}

void scalerVIP_scalerColor_profile(void)
{
	_system_setting_info* system_info_structure_table = NULL;
	_clues* SmartPic_clue=NULL;
	unsigned char Profile1_YUV_Sel, Profile2_YUV_Sel, Profile3_YUV_Sel ;

	system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();
	SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();

	if((system_info_structure_table == NULL) || (SmartPic_clue == NULL) ) {
		if(MA_print_count%360==0)
			ROSPrintf("scalerVIP_scalerColor_profile Share Memory PQ data ERROR,system_info_structure_table = %p, SmartPic_clue = %p\n",system_info_structure_table, SmartPic_clue);
		return;
	}


	scalerVIP_fwif_color_set_profile();

	Profile1_YUV_Sel = system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_CTRL_t.ch1_pf_yuv_sel_t;
	Profile2_YUV_Sel = system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_CTRL_t.ch1_pf_yuv_sel_t;
	Profile3_YUV_Sel = system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_CTRL_t.ch1_pf_yuv_sel_t;

	#if Print_Profile_Data
  	if (Profile_Print_Count_2%500==0)
	{

		ROSPrintf( "Profile1_YUV_Sel =%d \n", Profile1_YUV_Sel);
		ROSPrintf( "Profile2_YUV_Sel =%d \n", Profile2_YUV_Sel);
		ROSPrintf( "Profile3_YUV_Sel =%d \n", Profile3_YUV_Sel);

		Profile_Print_Count_2 = 0;
	}

	Profile_Print_Count_2++;
	#endif

	//Profile 1
	#if 1   		// Profile1's ch1_pf_yuv_sel needs to set 0 to run Y for detected_black_region function, etc.
	SmartPic_clue->Profile_Cal_INFO.ProfileFlag_Y = scalerVIP_ReadProfile1_Y(SmartPic_clue);
	ProfSum = Profile1_Y_Sum;
	#else
	if(Profile1_YUV_Sel ==0)
	{
		SmartPic_clue->Profile_Cal_INFO.ProfileFlag_Y = scalerVIP_ReadProfile1_Y(SmartPic_clue);
		ProfSum = Profile1_Y_Sum;
	}
	else if(Profile1_YUV_Sel ==1)
	{
		SmartPic_clue->Profile_Cal_INFO.ProfileFlag_U = scalerVIP_ReadProfile1_U(SmartPic_clue);
		ProfSum = Profile1_U_Sum;
	}
	else if(Profile1_YUV_Sel ==2)
	{
		SmartPic_clue->Profile_Cal_INFO.ProfileFlag_V = scalerVIP_ReadProfile1_V(SmartPic_clue);
		ProfSum = Profile1_V_Sum;
	}
	else
	{
		SmartPic_clue->Profile_Cal_INFO.ProfileFlag_Y = scalerVIP_ReadProfile1_Y(SmartPic_clue);
		ProfSum = Profile1_Y_Sum;
	}
	#endif

	//Profile 2
	if(Profile2_YUV_Sel ==0)
		SmartPic_clue->Profile_Cal_INFO.Profile2_Flag_Y = scalerVIP_ReadProfile2_Y(SmartPic_clue);
	else if(Profile2_YUV_Sel ==1)
		SmartPic_clue->Profile_Cal_INFO.Profile2_Flag_U = scalerVIP_ReadProfile2_U(SmartPic_clue);
	else if(Profile2_YUV_Sel ==2)
		SmartPic_clue->Profile_Cal_INFO.Profile2_Flag_V = scalerVIP_ReadProfile2_V(SmartPic_clue);
	else
		SmartPic_clue->Profile_Cal_INFO.Profile2_Flag_Y = scalerVIP_ReadProfile2_Y(SmartPic_clue);

	//Profile 3
	if(Profile3_YUV_Sel ==0)
		SmartPic_clue->Profile_Cal_INFO.Profile3_Flag_Y = scalerVIP_ReadProfile3_Y(SmartPic_clue);
	else if(Profile3_YUV_Sel ==1)
		SmartPic_clue->Profile_Cal_INFO.Profile3_Flag_U = scalerVIP_ReadProfile3_U(SmartPic_clue);
	else if(Profile3_YUV_Sel ==2)
		SmartPic_clue->Profile_Cal_INFO.Profile3_Flag_V = scalerVIP_ReadProfile3_V(SmartPic_clue);
	else
		SmartPic_clue->Profile_Cal_INFO.Profile3_Flag_Y = scalerVIP_ReadProfile3_Y(SmartPic_clue);

}


void scalerVIP_fwif_color_set_profile(void)
{
	unsigned  short Profile1_Start_Offset_H, Profile1_Start_Offset_V;
	unsigned  short Profile2_Start_Offset_H, Profile2_Start_Offset_V;
	unsigned  short Profile3_Start_Offset_H, Profile3_Start_Offset_V;
	unsigned short Profile1_IWid, Profile1_ILen;				//I-domain width & length
	unsigned short Profile2_IWid, Profile2_ILen;
	unsigned short Profile3_IWid, Profile3_ILen;
	unsigned char Profile_Block_Num = 16;			//set profile h&V block number

	DRV_Vip_Profile  Vip_Profile_Coef;
	_system_setting_info* system_info_structure_table = NULL;
	_clues* SmartPic_clue=NULL;

	system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();
	SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();

	if((system_info_structure_table == NULL) || (SmartPic_clue == NULL) ) {
		if(MA_print_count%360==0)
			ROSPrintf("Share Memory PQ data ERROR,system_info_structure_table = %p, SmartPic_clue = %p\n",system_info_structure_table,SmartPic_clue);
		return;
	}


	//  Initial parameters from Misc Table.
	if(Profile_Initial_Flag==0)
	{
		//Profile 1
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.en_4k2k_mode = system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_CTRL_t.en_4k2k_mode_t;
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.en_3d_mode =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_CTRL_t.en_3d_mode_t;
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_CTRL_t.ch1_pf_yuv_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_CTRL_t.ch1_pf_field_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_CTRL_t.ch1_pf_overflow_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_CTRL_t.ch1_pf_enable_profile_t;

		//Profile 2
		Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.en_4k2k_mode = system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_CTRL_t.en_4k2k_mode_t;  //  Profile2 has no en_4k2k_mode.
		Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.en_3d_mode =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_CTRL_t.en_3d_mode_t;	    	//  Profile2 has no en_3d_mode.
		Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_CTRL_t.ch1_pf_yuv_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_CTRL_t.ch1_pf_field_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_CTRL_t.ch1_pf_overflow_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_CTRL_t.ch1_pf_enable_profile_t;

		//Profile 3
		Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.en_4k2k_mode = system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_CTRL_t.en_4k2k_mode_t;	//  Profile3 has no en_4k2k_mode.
		Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.en_3d_mode =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_CTRL_t.en_3d_mode_t;		//  Profile3 has no en_3d_mode.
		Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_CTRL_t.ch1_pf_yuv_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_CTRL_t.ch1_pf_field_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_CTRL_t.ch1_pf_overflow_sel_t;
		Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_CTRL_t.ch1_pf_enable_profile_t;

	}

	#if Print_Profile_Data
  	if (Profile_Print_Count_1%3000 ==0)
	{
			ROSPrintf( "Profile0 - en_4k2k_mode =%d \n", Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.en_4k2k_mode);
			ROSPrintf( "en_3d_mode  =%d \n", Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.en_3d_mode);
			ROSPrintf( "ch1_pf_yuv_sel =%d \n", Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel);
			ROSPrintf( "ch1_pf_field_sel =%d \n", Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel);
			ROSPrintf( "ch1_pf_overflow_sel =%d \n", Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel);
			ROSPrintf( "ch1_pf_enable_profile =%d \n\n", Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile);

			ROSPrintf( "Profile1 -en_4k2k_mode =%d \n", Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.en_4k2k_mode);
			ROSPrintf( "en_3d_mode =%d \n", Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.en_3d_mode);
			ROSPrintf( "ch1_pf_yuv_sel =%d \n",Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel);
			ROSPrintf( "ch1_pf_field_sel  =%d \n",Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel);
			ROSPrintf( "ch1_pf_overflow_sel =%d \n", Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel);
			ROSPrintf( "ch1_pf_enable_profile =%d \n\n", Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile);

			ROSPrintf( "Profile2 -en_4k2k_mode =%d \n", Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.en_4k2k_mode);
			ROSPrintf( "en_3d_mode  =%d \n", Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.en_3d_mode);
			ROSPrintf( "ch1_pf_yuv_sel =%d \n",  Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel);
			ROSPrintf( "ch1_pf_field_sel =%d \n", Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel);
			ROSPrintf( "ch1_pf_overflow_sel =%d \n",Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel);
			ROSPrintf( "ch1_pf_enable_profile =%d \n\n", Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile);

			Profile_Print_Count_1 = 0;
	}

	Profile_Print_Count_1++;
	#endif

	// Get H & V Start Offset from Misc Table.
	Profile1_Start_Offset_H =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_StartH_t.ch1_pf_starth_t;
	Profile1_Start_Offset_V =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[0].VipICH1_Hist_Profile_StartV_t.ch1_pf_startv_t;

	Profile2_Start_Offset_H =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_StartH_t.ch1_pf_starth_t;
	Profile2_Start_Offset_V =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[1].VipICH1_Hist_Profile_StartV_t.ch1_pf_startv_t;

	Profile3_Start_Offset_H =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_StartH_t.ch1_pf_starth_t;
	Profile3_Start_Offset_V =  system_info_structure_table->PQ_Setting_Info.Profile_Table_Coef.Vip_Profile_Table[2].VipICH1_Hist_Profile_StartV_t.ch1_pf_startv_t;

	if((Profile1_Start_Offset_H > 1000)||(Profile1_Start_Offset_V > 500))
	{
		Profile1_Start_Offset_H = 0;
		Profile1_Start_Offset_V = 0;
	}

	if((Profile2_Start_Offset_H > 1000)||(Profile2_Start_Offset_V > 500))
	{
		Profile2_Start_Offset_H = 0;
		Profile2_Start_Offset_V = 0;
	}

	if((Profile3_Start_Offset_H > 1000)||(Profile3_Start_Offset_V > 500))
	{
		Profile3_Start_Offset_H = 0;
		Profile3_Start_Offset_V = 0;
	}

	//Set Profile Start Position
	Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_StartH.ch1_pf_starth  = Profile1_Start_Offset_H;
	Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_StartV.ch1_pf_startv = Profile1_Start_Offset_V;

	Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_StartH.ch1_pf_starth  = Profile2_Start_Offset_H;
	Vip_Profile_Coef.Vip_Profile_Info[1].VipICH1_Hist_Profile_StartV.ch1_pf_startv = Profile2_Start_Offset_V;

	Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_StartH.ch1_pf_starth  = Profile3_Start_Offset_H;
	Vip_Profile_Coef.Vip_Profile_Info[2].VipICH1_Hist_Profile_StartV.ch1_pf_startv = Profile3_Start_Offset_V;

	//Set Profile Block Size
	// Profile 1
	Profile1_IWid = SmartPic_clue->SCALER_DISP_INFO.IphActWid_H;
	Profile1_ILen = SmartPic_clue->SCALER_DISP_INFO.IpvActLen_V;

	Profile1_IWid -= Profile1_Start_Offset_H*2;
	Profile1_ILen	-= Profile1_Start_Offset_V*2;

	Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_hsize  = (Profile1_IWid/Profile_Block_Num) -1;		//according to spec., size should be minus 1

	if( (SmartPic_clue->SCALER_DISP_INFO.disp_status & _BIT8) != 0 ) 	// Interlaced
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_vsize = (Profile1_ILen/Profile_Block_Num)*2 -1;	//according to spec., size should be minus 1
	else
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_vsize = (Profile1_ILen/Profile_Block_Num) -1;	//according to spec., size should be minus 1

	// Profile 2
	Profile2_IWid = SmartPic_clue->SCALER_DISP_INFO.IphActWid_H;
	Profile2_ILen = SmartPic_clue->SCALER_DISP_INFO.IpvActLen_V;

	Profile2_IWid -= Profile1_Start_Offset_H*2;
	Profile2_ILen	-= Profile1_Start_Offset_V*2;

	Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_hsize  = (Profile2_IWid/Profile_Block_Num) -1;		//according to spec., size should be minus 1

	if( (SmartPic_clue->SCALER_DISP_INFO.disp_status & _BIT8) != 0 ) 	// Interlaced
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_vsize = (Profile2_ILen/Profile_Block_Num)*2 -1;	//according to spec., size should be minus 1
	else
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_vsize = (Profile2_ILen/Profile_Block_Num) -1;	//according to spec., size should be minus 1

	// Profile 3
	Profile3_IWid = SmartPic_clue->SCALER_DISP_INFO.IphActWid_H;
	Profile3_ILen = SmartPic_clue->SCALER_DISP_INFO.IpvActLen_V;

	Profile3_IWid -= Profile1_Start_Offset_H*2;
	Profile3_ILen	-= Profile1_Start_Offset_V*2;

	Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_hsize  = (Profile3_IWid/Profile_Block_Num) -1;		//according to spec., size should be minus 1

	if( (SmartPic_clue->SCALER_DISP_INFO.disp_status & _BIT8) != 0 ) 	// Interlaced
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_vsize = (Profile3_ILen/Profile_Block_Num)*2 -1;	//according to spec., size should be minus 1
	else
		Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_vsize = (Profile3_ILen/Profile_Block_Num) -1;	//according to spec., size should be minus 1

	scalerVIP_drvif_color_profile(&Vip_Profile_Coef);

	Profile1_H_Block_size = Profile1_IWid*(Vip_Profile_Coef.Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_vsize+1);
}


void scalerVIP_drvif_color_profile(DRV_Vip_Profile *ptr)
{

	profile_ich1_hist_profile_ctrl_RBUS hist_profile_ctrl_reg;
	profile_ich1_hist_profile_size_RBUS hist_profile_size_reg;
	profile_ich1_hist_profile_starth_RBUS hist_profile_starth_reg;
	profile_ich1_hist_profile_startv_RBUS hist_profile_startv_reg;

	profile_ich1_hist_profile2_ctrl_RBUS hist_profile2_ctrl_reg;
	profile_ich1_hist_profile2_size_RBUS hist_profile2_size_reg;
	profile_ich1_hist_profile2_starth_RBUS hist_profile2_starth_reg;
	profile_ich1_hist_profile2_startv_RBUS hist_profile2_startv_reg;

	profile_ich1_hist_profile3_ctrl_RBUS hist_profile3_ctrl_reg;
	profile_ich1_hist_profile3_size_RBUS hist_profile3_size_reg;
	profile_ich1_hist_profile3_starth_RBUS hist_profile3_starth_reg;
	profile_ich1_hist_profile3_startv_RBUS hist_profile3_startv_reg;

	// Profile1
	hist_profile_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_CTRL_reg);
	hist_profile_size_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_size_reg);
	hist_profile_starth_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_StartH_reg);
	hist_profile_startv_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_StartV_reg);

	// Profile2
	hist_profile2_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile2_CTRL_reg);
	hist_profile2_size_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile2_size_reg);
	hist_profile2_starth_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile2_StartH_reg);
	hist_profile2_startv_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile2_StartV_reg);

	// Profile3
	hist_profile3_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile3_CTRL_reg);
	hist_profile3_size_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile3_size_reg);
	hist_profile3_starth_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile3_StartH_reg);
	hist_profile3_startv_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile3_StartV_reg);

	if(Profile_Initial_Flag==0)
	{
		// Profile1
		hist_profile_ctrl_reg.en_4k2k_mode = ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.en_4k2k_mode;
		hist_profile_ctrl_reg.en_3d_mode =ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.en_3d_mode;
		hist_profile_ctrl_reg.ch1_pf_yuv_sel = ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel;
		hist_profile_ctrl_reg.ch1_pf_field_sel = ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel;
		hist_profile_ctrl_reg.ch1_pf_overflow_sel = ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel;
		hist_profile_ctrl_reg.ch1_pf_enable_profile = ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile;

		// Profile2
		hist_profile2_ctrl_reg.ch1_pf2_yuv_sel = ptr->Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel;
		hist_profile2_ctrl_reg.ch1_pf2_field_sel = ptr->Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel;
		hist_profile2_ctrl_reg.ch1_pf2_overflow_sel = ptr->Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel;
		hist_profile2_ctrl_reg.ch1_pf2_enable_profile = ptr->Vip_Profile_Info[1].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile;

		// Profile3
		hist_profile3_ctrl_reg.ch1_pf3_yuv_sel = ptr->Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_yuv_sel;
		hist_profile3_ctrl_reg.ch1_pf3_field_sel = ptr->Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_field_sel;
		hist_profile3_ctrl_reg.ch1_pf3_overflow_sel = ptr->Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_overflow_sel;
		hist_profile3_ctrl_reg.ch1_pf3_enable_profile = ptr->Vip_Profile_Info[2].VipICH1_Hist_Profile_CTRL.ch1_pf_enable_profile;
	}

	// Profile1
	hist_profile_size_reg.ch1_pf_vsize = ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_vsize;
	hist_profile_size_reg.ch1_pf_hsize = ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_Size.ch1_pf_hsize;
	hist_profile_starth_reg.ch1_pf_starth= ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_StartH.ch1_pf_starth;
	hist_profile_startv_reg.ch1_pf_startv = ptr->Vip_Profile_Info[0].VipICH1_Hist_Profile_StartV.ch1_pf_startv;

	// Profile2
	hist_profile2_size_reg.ch1_pf2_vsize = ptr->Vip_Profile_Info[1].VipICH1_Hist_Profile_Size.ch1_pf_vsize;
	hist_profile2_size_reg.ch1_pf2_hsize = ptr->Vip_Profile_Info[1].VipICH1_Hist_Profile_Size.ch1_pf_hsize;
	hist_profile2_starth_reg.ch1_pf2_starth= ptr->Vip_Profile_Info[1].VipICH1_Hist_Profile_StartH.ch1_pf_starth;
	hist_profile2_startv_reg.ch1_pf2_startv = ptr->Vip_Profile_Info[1].VipICH1_Hist_Profile_StartV.ch1_pf_startv;

	// Profile3
	hist_profile3_size_reg.ch1_pf3_vsize = ptr->Vip_Profile_Info[2].VipICH1_Hist_Profile_Size.ch1_pf_vsize;
	hist_profile3_size_reg.ch1_pf3_hsize = ptr->Vip_Profile_Info[2].VipICH1_Hist_Profile_Size.ch1_pf_hsize;
	hist_profile3_starth_reg.ch1_pf3_starth= ptr->Vip_Profile_Info[2].VipICH1_Hist_Profile_StartH.ch1_pf_starth;
	hist_profile3_startv_reg.ch1_pf3_startv = ptr->Vip_Profile_Info[2].VipICH1_Hist_Profile_StartV.ch1_pf_startv;


	if(Profile_Initial_Flag==0)
	{
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile_ctrl_reg.regValue);
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile2_CTRL_reg, hist_profile2_ctrl_reg.regValue);
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_CTRL_reg, hist_profile3_ctrl_reg.regValue);
		Profile_Initial_Flag=1;
	}

	// Profile1
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_size_reg, hist_profile_size_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_StartH_reg, hist_profile_starth_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_StartV_reg, hist_profile_startv_reg.regValue);

	// Profile2
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile2_size_reg, hist_profile2_size_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile2_StartH_reg, hist_profile2_starth_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile2_StartV_reg, hist_profile2_startv_reg.regValue);

	// Profile3
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_size_reg, hist_profile3_size_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_StartH_reg, hist_profile3_starth_reg.regValue);
	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_StartV_reg, hist_profile3_startv_reg.regValue);

}


char scalerVIP_ReadProfile1_Y(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile_ctrl_RBUS hist_profile_ctrl_reg;
	unsigned char profsum_shift=10;
	unsigned long long Y_Sum = 0;
	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *H_Block_Y = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block_Y = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	hist_profile_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x2;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x1;
			profsum_shift = 9;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x2;
			profsum_shift = 10;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x3;
			profsum_shift = 10;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile_ctrl_reg.regValue);

	if ( hist_profile_ctrl_reg.ch1_pf_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile_data_00_RBUS data_00;
		profile_ich1_hist_profile_data_01_RBUS data_01;
		profile_ich1_hist_profile_data_02_RBUS data_02;
		profile_ich1_hist_profile_data_03_RBUS data_03;
		profile_ich1_hist_profile_data_04_RBUS data_04;
		profile_ich1_hist_profile_data_05_RBUS data_05;
		profile_ich1_hist_profile_data_06_RBUS data_06;
		profile_ich1_hist_profile_data_07_RBUS data_07;
		profile_ich1_hist_profile_data_08_RBUS data_08;
		profile_ich1_hist_profile_data_09_RBUS data_09;
		profile_ich1_hist_profile_data_10_RBUS data_10;
		profile_ich1_hist_profile_data_11_RBUS data_11;
		profile_ich1_hist_profile_data_12_RBUS data_12;
		profile_ich1_hist_profile_data_13_RBUS data_13;
		profile_ich1_hist_profile_data_14_RBUS data_14;
		profile_ich1_hist_profile_data_15_RBUS data_15;

		data_00.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_00_reg);
		data_01.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_01_reg);
		data_02.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_02_reg);
		data_03.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_03_reg);
		data_04.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_04_reg);
		data_05.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_05_reg);
		data_06.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_06_reg);
		data_07.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_07_reg);
		data_08.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_08_reg);
		data_09.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_09_reg);
		data_10.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_10_reg);
		data_11.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_11_reg);
		data_12.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_12_reg);
		data_13.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_13_reg);
		data_14.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_14_reg);
		data_15.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_15_reg);

		// Get Horizontal profile data for Y.
		H_Block_Y[0]   = data_00.ch1_pf_h00;
		H_Block_Y[1]   = data_00.ch1_pf_h01;
		H_Block_Y[2]   = data_01.ch1_pf_h02;
		H_Block_Y[3]   = data_01.ch1_pf_h03;
		H_Block_Y[4]   = data_02.ch1_pf_h04;
		H_Block_Y[5]   = data_02.ch1_pf_h05;
		H_Block_Y[6]   = data_03.ch1_pf_h06;
		H_Block_Y[7]   = data_03.ch1_pf_h07;
		H_Block_Y[8]   = data_04.ch1_pf_h08;
		H_Block_Y[9]   = data_04.ch1_pf_h09;
		H_Block_Y[10] = data_05.ch1_pf_h10;
		H_Block_Y[11] = data_05.ch1_pf_h11;
		H_Block_Y[12] = data_06.ch1_pf_h12;
		H_Block_Y[13] = data_06.ch1_pf_h13;
		H_Block_Y[14] = data_07.ch1_pf_h14;
		H_Block_Y[15] = data_07.ch1_pf_h15;

		// Get Vertical profile data for Y.
		V_Block_Y[0]   = data_08.ch1_pf_v00;
		V_Block_Y[1]   = data_08.ch1_pf_v01;
		V_Block_Y[2]   = data_09.ch1_pf_v02;
		V_Block_Y[3]   = data_09.ch1_pf_v03;
		V_Block_Y[4]   = data_10.ch1_pf_v04;
		V_Block_Y[5]   = data_10.ch1_pf_v05;
		V_Block_Y[6]   = data_11.ch1_pf_v06;
		V_Block_Y[7]   = data_11.ch1_pf_v07;
		V_Block_Y[8]   = data_12.ch1_pf_v08;
		V_Block_Y[9]   = data_12.ch1_pf_v09;
		V_Block_Y[10] = data_13.ch1_pf_v10;
		V_Block_Y[11] = data_13.ch1_pf_v11;
		V_Block_Y[12] = data_14.ch1_pf_v12;
		V_Block_Y[13] = data_14.ch1_pf_v13;
		V_Block_Y[14] = data_15.ch1_pf_v14;
		V_Block_Y[15] = data_15.ch1_pf_v15;

		//Enable profile
		hist_profile_ctrl_reg.ch1_pf_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile_ctrl_reg.regValue);

		Profile1_Y_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile1_Y_Sum += H_Block_Y[ii];
		}
		//Profile1_Y_Sum = Profile1_Y_Sum << profsum_shift;

		/* calc profile Y APL start*/
		Y_Sum = ProfSum;
		Y_Sum = Y_Sum << (profsum_shift-2);
		if (Profile1_H_Block_size)
		{
			Y_Sum=Y_Sum + (Profile1_H_Block_size>>1);
			do_div(Y_Sum, Profile1_H_Block_size);
		}

		SmartPic_clue->Profile_Cal_INFO.ProfileAPL_Y = Y_Sum & 0xffff;
		/* calc profile Y APL end*/

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%500 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### H_Block_Y[%d] =%d ### \n", jj, H_Block_Y[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### V_Block_Y[%d] =%d ### \n", jj, V_Block_Y[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile1_Y_Sum =%d========\n", Profile1_Y_Sum );

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}

char scalerVIP_ReadProfile1_U(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile_ctrl_RBUS hist_profile_ctrl_reg;

	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *H_Block_U = &(SmartPic_clue->Profile_Cal_INFO.H_Block_U[0]);
	unsigned short *V_Block_U = &(SmartPic_clue->Profile_Cal_INFO.V_Block_U[0]);

	hist_profile_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x2;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x1;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x2;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x3;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile_ctrl_reg.regValue);

	if ( hist_profile_ctrl_reg.ch1_pf_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile_data_00_RBUS data_00;
		profile_ich1_hist_profile_data_01_RBUS data_01;
		profile_ich1_hist_profile_data_02_RBUS data_02;
		profile_ich1_hist_profile_data_03_RBUS data_03;
		profile_ich1_hist_profile_data_04_RBUS data_04;
		profile_ich1_hist_profile_data_05_RBUS data_05;
		profile_ich1_hist_profile_data_06_RBUS data_06;
		profile_ich1_hist_profile_data_07_RBUS data_07;
		profile_ich1_hist_profile_data_08_RBUS data_08;
		profile_ich1_hist_profile_data_09_RBUS data_09;
		profile_ich1_hist_profile_data_10_RBUS data_10;
		profile_ich1_hist_profile_data_11_RBUS data_11;
		profile_ich1_hist_profile_data_12_RBUS data_12;
		profile_ich1_hist_profile_data_13_RBUS data_13;
		profile_ich1_hist_profile_data_14_RBUS data_14;
		profile_ich1_hist_profile_data_15_RBUS data_15;

		data_00.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_00_reg);
		data_01.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_01_reg);
		data_02.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_02_reg);
		data_03.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_03_reg);
		data_04.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_04_reg);
		data_05.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_05_reg);
		data_06.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_06_reg);
		data_07.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_07_reg);
		data_08.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_08_reg);
		data_09.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_09_reg);
		data_10.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_10_reg);
		data_11.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_11_reg);
		data_12.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_12_reg);
		data_13.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_13_reg);
		data_14.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_14_reg);
		data_15.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_15_reg);

		// Get Horizontal profile data for U.
		H_Block_U[0]   = data_00.ch1_pf_h00;
		H_Block_U[1]   = data_00.ch1_pf_h01;
		H_Block_U[2]   = data_01.ch1_pf_h02;
		H_Block_U[3]   = data_01.ch1_pf_h03;
		H_Block_U[4]   = data_02.ch1_pf_h04;
		H_Block_U[5]   = data_02.ch1_pf_h05;
		H_Block_U[6]   = data_03.ch1_pf_h06;
		H_Block_U[7]   = data_03.ch1_pf_h07;
		H_Block_U[8]   = data_04.ch1_pf_h08;
		H_Block_U[9]   = data_04.ch1_pf_h09;
		H_Block_U[10] = data_05.ch1_pf_h10;
		H_Block_U[11] = data_05.ch1_pf_h11;
		H_Block_U[12] = data_06.ch1_pf_h12;
		H_Block_U[13] = data_06.ch1_pf_h13;
		H_Block_U[14] = data_07.ch1_pf_h14;
		H_Block_U[15] = data_07.ch1_pf_h15;

		// Get Vertical profile data for U.
		V_Block_U[0]    = data_08.ch1_pf_v00;
		V_Block_U[1]    = data_08.ch1_pf_v01;
		V_Block_U[2]    = data_09.ch1_pf_v02;
		V_Block_U[3]    = data_09.ch1_pf_v03;
		V_Block_U[4]    = data_10.ch1_pf_v04;
		V_Block_U[5]    = data_10.ch1_pf_v05;
		V_Block_U[6]    = data_11.ch1_pf_v06;
		V_Block_U[7]    = data_11.ch1_pf_v07;
		V_Block_U[8]    = data_12.ch1_pf_v08;
		V_Block_U[9]    = data_12.ch1_pf_v09;
		V_Block_U[10] = data_13.ch1_pf_v10;
		V_Block_U[11] = data_13.ch1_pf_v11;
		V_Block_U[12] = data_14.ch1_pf_v12;
		V_Block_U[13] = data_14.ch1_pf_v13;
		V_Block_U[14] = data_15.ch1_pf_v14;
		V_Block_U[15] = data_15.ch1_pf_v15;

		//Enable profile
		hist_profile_ctrl_reg.ch1_pf_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile_ctrl_reg.regValue);

		Profile1_U_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile1_U_Sum += H_Block_U[ii];
		}
		//Profile1_U_Sum = Profile1_U_Sum << profsum_shift;

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%500 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### H_Block_U[%d] =%d ### \n", jj, H_Block_U[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### V_Block_U[%d] =%d ### \n", jj, V_Block_U[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile1_U_Sum =%d========\n", Profile1_U_Sum);

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}


char scalerVIP_ReadProfile1_V(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile_ctrl_RBUS hist_profile_ctrl_reg;

	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *H_Block_V = &(SmartPic_clue->Profile_Cal_INFO.H_Block_V[0]);
	unsigned short *V_Block_V = &(SmartPic_clue->Profile_Cal_INFO.V_Block_V[0]);

	hist_profile_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x2;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x1;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x2;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile_ctrl_reg.ch1_pf_hnsr = 0x3;
			hist_profile_ctrl_reg.ch1_pf_vnsr = 0x3;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile_ctrl_reg.regValue);

	if ( hist_profile_ctrl_reg.ch1_pf_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile_data_00_RBUS data_00;
		profile_ich1_hist_profile_data_01_RBUS data_01;
		profile_ich1_hist_profile_data_02_RBUS data_02;
		profile_ich1_hist_profile_data_03_RBUS data_03;
		profile_ich1_hist_profile_data_04_RBUS data_04;
		profile_ich1_hist_profile_data_05_RBUS data_05;
		profile_ich1_hist_profile_data_06_RBUS data_06;
		profile_ich1_hist_profile_data_07_RBUS data_07;
		profile_ich1_hist_profile_data_08_RBUS data_08;
		profile_ich1_hist_profile_data_09_RBUS data_09;
		profile_ich1_hist_profile_data_10_RBUS data_10;
		profile_ich1_hist_profile_data_11_RBUS data_11;
		profile_ich1_hist_profile_data_12_RBUS data_12;
		profile_ich1_hist_profile_data_13_RBUS data_13;
		profile_ich1_hist_profile_data_14_RBUS data_14;
		profile_ich1_hist_profile_data_15_RBUS data_15;

		data_00.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_00_reg);
		data_01.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_01_reg);
		data_02.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_02_reg);
		data_03.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_03_reg);
		data_04.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_04_reg);
		data_05.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_05_reg);
		data_06.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_06_reg);
		data_07.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_07_reg);
		data_08.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_08_reg);
		data_09.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_09_reg);
		data_10.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_10_reg);
		data_11.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_11_reg);
		data_12.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_12_reg);
		data_13.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_13_reg);
		data_14.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_14_reg);
		data_15.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_15_reg);

		// Get Horizontal profile data for V.
		H_Block_V[0]  = data_00.ch1_pf_h00;
		H_Block_V[1]  = data_00.ch1_pf_h01;
		H_Block_V[2]  = data_01.ch1_pf_h02;
		H_Block_V[3]  = data_01.ch1_pf_h03;
		H_Block_V[4]  = data_02.ch1_pf_h04;
		H_Block_V[5]  = data_02.ch1_pf_h05;
		H_Block_V[6]  = data_03.ch1_pf_h06;
		H_Block_V[7]  = data_03.ch1_pf_h07;
		H_Block_V[8]  = data_04.ch1_pf_h08;
		H_Block_V[9]  = data_04.ch1_pf_h09;
		H_Block_V[10] = data_05.ch1_pf_h10;
		H_Block_V[11] = data_05.ch1_pf_h11;
		H_Block_V[12] = data_06.ch1_pf_h12;
		H_Block_V[13] = data_06.ch1_pf_h13;
		H_Block_V[14] = data_07.ch1_pf_h14;
		H_Block_V[15] = data_07.ch1_pf_h15;

		// Get Vertical profile data for V.
		V_Block_V[0]    = data_08.ch1_pf_v00;
		V_Block_V[1]    = data_08.ch1_pf_v01;
		V_Block_V[2]    = data_09.ch1_pf_v02;
		V_Block_V[3]    = data_09.ch1_pf_v03;
		V_Block_V[4]    = data_10.ch1_pf_v04;
		V_Block_V[5]    = data_10.ch1_pf_v05;
		V_Block_V[6]    = data_11.ch1_pf_v06;
		V_Block_V[7]    = data_11.ch1_pf_v07;
		V_Block_V[8]    = data_12.ch1_pf_v08;
		V_Block_V[9]    = data_12.ch1_pf_v09;
		V_Block_V[10]  = data_13.ch1_pf_v10;
		V_Block_V[11]  = data_13.ch1_pf_v11;
		V_Block_V[12]  = data_14.ch1_pf_v12;
		V_Block_V[13]  = data_14.ch1_pf_v13;
		V_Block_V[14]  = data_15.ch1_pf_v14;
		V_Block_V[15]  = data_15.ch1_pf_v15;

		//Enable profile
		hist_profile_ctrl_reg.ch1_pf_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile_ctrl_reg.regValue);

		Profile1_V_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile1_V_Sum += H_Block_V[ii];
		}
		//Profile1_V_Sum = Profile1_V_Sum << profsum_shift;

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%500 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### H_Block_V[%d] =%d ### \n", jj, H_Block_V[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### V_Block_V[%d] =%d ### \n", jj, V_Block_V[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile1_V_Sum =%d========\n", Profile1_V_Sum);

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}

char scalerVIP_ReadProfile2_Y(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile2_ctrl_RBUS hist_profile2_ctrl_reg;

	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *Profile2_H_Block_Y = &(SmartPic_clue->Profile_Cal_INFO.Profile2_H_Block_Y[0]);
	unsigned short *Profile2_V_Block_Y = &(SmartPic_clue->Profile_Cal_INFO.Profile2_V_Block_Y[0]);

	hist_profile2_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile2_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x2;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x1;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x3;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x2;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x3;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x3;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile2_ctrl_reg.regValue);

	if ( hist_profile2_ctrl_reg.ch1_pf2_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile_data_16_RBUS data_16;
		profile_ich1_hist_profile_data_17_RBUS data_17;
		profile_ich1_hist_profile_data_18_RBUS data_18;
		profile_ich1_hist_profile_data_19_RBUS data_19;
		profile_ich1_hist_profile_data_20_RBUS data_20;
		profile_ich1_hist_profile_data_21_RBUS data_21;
		profile_ich1_hist_profile_data_22_RBUS data_22;
		profile_ich1_hist_profile_data_23_RBUS data_23;
		profile_ich1_hist_profile_data_24_RBUS data_24;
		profile_ich1_hist_profile_data_25_RBUS data_25;
		profile_ich1_hist_profile_data_26_RBUS data_26;
		profile_ich1_hist_profile_data_27_RBUS data_27;
		profile_ich1_hist_profile_data_28_RBUS data_28;
		profile_ich1_hist_profile_data_29_RBUS data_29;
		profile_ich1_hist_profile_data_30_RBUS data_30;
		profile_ich1_hist_profile_data_31_RBUS data_31;

		data_16.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_16_reg);
		data_17.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_17_reg);
		data_18.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_18_reg);
		data_19.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_19_reg);
		data_20.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_20_reg);
		data_21.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_21_reg);
		data_22.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_22_reg);
		data_23.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_23_reg);
		data_24.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_24_reg);
		data_25.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_25_reg);
		data_26.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_26_reg);
		data_27.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_27_reg);
		data_28.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_28_reg);
		data_29.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_29_reg);
		data_30.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_30_reg);
		data_31.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_31_reg);

		Profile2_H_Block_Y[0]   = data_16.ch1_pf_h00_right;
		Profile2_H_Block_Y[1]   = data_16.ch1_pf_h01_right;
		Profile2_H_Block_Y[2]   = data_17.ch1_pf_h02_right;
		Profile2_H_Block_Y[3]   = data_17.ch1_pf_h03_right;
		Profile2_H_Block_Y[4]   = data_18.ch1_pf_h04_right;
		Profile2_H_Block_Y[5]   = data_18.ch1_pf_h05_right;
		Profile2_H_Block_Y[6]   = data_19.ch1_pf_h06_right;
		Profile2_H_Block_Y[7]   = data_19.ch1_pf_h07_right;
		Profile2_H_Block_Y[8]   = data_20.ch1_pf_h08_right;
		Profile2_H_Block_Y[9]   = data_20.ch1_pf_h09_right;
		Profile2_H_Block_Y[10] = data_21.ch1_pf_h10_right;
		Profile2_H_Block_Y[11] = data_21.ch1_pf_h11_right;
		Profile2_H_Block_Y[12] = data_22.ch1_pf_h12_right;
		Profile2_H_Block_Y[13] = data_22.ch1_pf_h13_right;
		Profile2_H_Block_Y[14] = data_23.ch1_pf_h14_right;
		Profile2_H_Block_Y[15] = data_23.ch1_pf_h15_right;

		Profile2_V_Block_Y[0]   = data_24.ch1_pf_v00_right;
		Profile2_V_Block_Y[1]   = data_24.ch1_pf_v01_right;
		Profile2_V_Block_Y[2]   = data_25.ch1_pf_v02_right;
		Profile2_V_Block_Y[3]   = data_25.ch1_pf_v03_right;
		Profile2_V_Block_Y[4]   = data_26.ch1_pf_v04_right;
		Profile2_V_Block_Y[5]   = data_26.ch1_pf_v05_right;
		Profile2_V_Block_Y[6]   = data_27.ch1_pf_v06_right;
		Profile2_V_Block_Y[7]   = data_27.ch1_pf_v07_right;
		Profile2_V_Block_Y[8]   = data_28.ch1_pf_v08_right;
		Profile2_V_Block_Y[9]   = data_28.ch1_pf_v09_right;
		Profile2_V_Block_Y[10] = data_29.ch1_pf_v10_right;
		Profile2_V_Block_Y[11] = data_29.ch1_pf_v11_right;
		Profile2_V_Block_Y[12] = data_30.ch1_pf_v12_right;
		Profile2_V_Block_Y[13] = data_30.ch1_pf_v13_right;
		Profile2_V_Block_Y[14] = data_31.ch1_pf_v14_right;
		Profile2_V_Block_Y[15] = data_31.ch1_pf_v15_right;
		//Enable profile
		hist_profile2_ctrl_reg.ch1_pf2_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile_CTRL_reg, hist_profile2_ctrl_reg.regValue);

		Profile2_Y_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile2_Y_Sum += Profile2_H_Block_Y[ii];
		}
		//Profile2_Y_Sum = Profile2_Y_Sum << profsum_shift;

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%600 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile2_H_Block_Y[%d] =%d ### \n", jj, Profile2_H_Block_Y[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile2_V_Block_Y[%d] =%d ### \n", jj, Profile2_V_Block_Y[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile2_Y_Sum =%d========\n", Profile2_Y_Sum);

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}

char scalerVIP_ReadProfile2_U(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile2_ctrl_RBUS hist_profile2_ctrl_reg;

	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *Profile2_H_Block_U = &(SmartPic_clue->Profile_Cal_INFO.Profile2_H_Block_U[0]);
	unsigned short *Profile2_V_Block_U = &(SmartPic_clue->Profile_Cal_INFO.Profile2_V_Block_U[0]);

	hist_profile2_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile2_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x2;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x1;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x3;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x2;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x3;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x3;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile2_CTRL_reg, hist_profile2_ctrl_reg.regValue);

	if ( hist_profile2_ctrl_reg.ch1_pf2_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile_data_16_RBUS data_16;
		profile_ich1_hist_profile_data_17_RBUS data_17;
		profile_ich1_hist_profile_data_18_RBUS data_18;
		profile_ich1_hist_profile_data_19_RBUS data_19;
		profile_ich1_hist_profile_data_20_RBUS data_20;
		profile_ich1_hist_profile_data_21_RBUS data_21;
		profile_ich1_hist_profile_data_22_RBUS data_22;
		profile_ich1_hist_profile_data_23_RBUS data_23;
		profile_ich1_hist_profile_data_24_RBUS data_24;
		profile_ich1_hist_profile_data_25_RBUS data_25;
		profile_ich1_hist_profile_data_26_RBUS data_26;
		profile_ich1_hist_profile_data_27_RBUS data_27;
		profile_ich1_hist_profile_data_28_RBUS data_28;
		profile_ich1_hist_profile_data_29_RBUS data_29;
		profile_ich1_hist_profile_data_30_RBUS data_30;
		profile_ich1_hist_profile_data_31_RBUS data_31;

		data_16.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_16_reg);
		data_17.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_17_reg);
		data_18.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_18_reg);
		data_19.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_19_reg);
		data_20.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_20_reg);
		data_21.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_21_reg);
		data_22.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_22_reg);
		data_23.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_23_reg);
		data_24.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_24_reg);
		data_25.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_25_reg);
		data_26.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_26_reg);
		data_27.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_27_reg);
		data_28.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_28_reg);
		data_29.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_29_reg);
		data_30.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_30_reg);
		data_31.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_31_reg);

		// Get Horizontal profile data for U.
		Profile2_H_Block_U[0]   = data_16.ch1_pf_h00_right;
		Profile2_H_Block_U[1]   = data_16.ch1_pf_h01_right;
		Profile2_H_Block_U[2]   = data_17.ch1_pf_h02_right;
		Profile2_H_Block_U[3]   = data_17.ch1_pf_h03_right;
		Profile2_H_Block_U[4]   = data_18.ch1_pf_h04_right;
		Profile2_H_Block_U[5]   = data_18.ch1_pf_h05_right;
		Profile2_H_Block_U[6]   = data_19.ch1_pf_h06_right;
		Profile2_H_Block_U[7]   = data_19.ch1_pf_h07_right;
		Profile2_H_Block_U[8]   = data_20.ch1_pf_h08_right;
		Profile2_H_Block_U[9]   = data_20.ch1_pf_h09_right;
		Profile2_H_Block_U[10] = data_21.ch1_pf_h10_right;
		Profile2_H_Block_U[11] = data_21.ch1_pf_h11_right;
		Profile2_H_Block_U[12] = data_22.ch1_pf_h12_right;
		Profile2_H_Block_U[13] = data_22.ch1_pf_h13_right;
		Profile2_H_Block_U[14] = data_23.ch1_pf_h14_right;
		Profile2_H_Block_U[15] = data_23.ch1_pf_h15_right;

		// Get Vertical profile data for U.
		Profile2_V_Block_U[0]   = data_24.ch1_pf_v00_right;
		Profile2_V_Block_U[1]   = data_24.ch1_pf_v01_right;
		Profile2_V_Block_U[2]   = data_25.ch1_pf_v02_right;
		Profile2_V_Block_U[3]   = data_25.ch1_pf_v03_right;
		Profile2_V_Block_U[4]   = data_26.ch1_pf_v04_right;
		Profile2_V_Block_U[5]   = data_26.ch1_pf_v05_right;
		Profile2_V_Block_U[6]   = data_27.ch1_pf_v06_right;
		Profile2_V_Block_U[7]   = data_27.ch1_pf_v07_right;
		Profile2_V_Block_U[8]   = data_28.ch1_pf_v08_right;
		Profile2_V_Block_U[9]   = data_28.ch1_pf_v09_right;
		Profile2_V_Block_U[10] = data_29.ch1_pf_v10_right;
		Profile2_V_Block_U[11] = data_29.ch1_pf_v11_right;
		Profile2_V_Block_U[12] = data_30.ch1_pf_v12_right;
		Profile2_V_Block_U[13] = data_30.ch1_pf_v13_right;
		Profile2_V_Block_U[14] = data_31.ch1_pf_v14_right;
		Profile2_V_Block_U[15] = data_31.ch1_pf_v15_right;

		//Enable profile
		hist_profile2_ctrl_reg.ch1_pf2_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile2_CTRL_reg, hist_profile2_ctrl_reg.regValue);

		Profile2_U_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile2_U_Sum += Profile2_H_Block_U[ii];
		}
		//Profile2_U_Sum = Profile2_U_Sum << profsum_shift;

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%600 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile2_H_Block_U[%d] =%d ### \n", jj, Profile2_H_Block_U[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile2_V_Block_U[%d] =%d ### \n", jj, Profile2_V_Block_U[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile2_U_Sum =%d========\n", Profile2_U_Sum);

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}


char scalerVIP_ReadProfile2_V(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile2_ctrl_RBUS hist_profile2_ctrl_reg;

	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *Profile2_H_Block_V = &(SmartPic_clue->Profile_Cal_INFO.Profile2_H_Block_V[0]);
	unsigned short *Profile2_V_Block_V = &(SmartPic_clue->Profile_Cal_INFO.Profile2_V_Block_V[0]);

	hist_profile2_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile2_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x2;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x1;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x3;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x2;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile2_ctrl_reg.ch1_pf2_hnsr = 0x3;
			hist_profile2_ctrl_reg.ch1_pf2_vnsr = 0x3;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile2_CTRL_reg, hist_profile2_ctrl_reg.regValue);

	if ( hist_profile2_ctrl_reg.ch1_pf2_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile_data_16_RBUS data_16;
		profile_ich1_hist_profile_data_17_RBUS data_17;
		profile_ich1_hist_profile_data_18_RBUS data_18;
		profile_ich1_hist_profile_data_19_RBUS data_19;
		profile_ich1_hist_profile_data_20_RBUS data_20;
		profile_ich1_hist_profile_data_21_RBUS data_21;
		profile_ich1_hist_profile_data_22_RBUS data_22;
		profile_ich1_hist_profile_data_23_RBUS data_23;
		profile_ich1_hist_profile_data_24_RBUS data_24;
		profile_ich1_hist_profile_data_25_RBUS data_25;
		profile_ich1_hist_profile_data_26_RBUS data_26;
		profile_ich1_hist_profile_data_27_RBUS data_27;
		profile_ich1_hist_profile_data_28_RBUS data_28;
		profile_ich1_hist_profile_data_29_RBUS data_29;
		profile_ich1_hist_profile_data_30_RBUS data_30;
		profile_ich1_hist_profile_data_31_RBUS data_31;

		data_16.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_16_reg);
		data_17.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_17_reg);
		data_18.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_18_reg);
		data_19.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_19_reg);
		data_20.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_20_reg);
		data_21.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_21_reg);
		data_22.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_22_reg);
		data_23.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_23_reg);
		data_24.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_24_reg);
		data_25.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_25_reg);
		data_26.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_26_reg);
		data_27.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_27_reg);
		data_28.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_28_reg);
		data_29.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_29_reg);
		data_30.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_30_reg);
		data_31.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_Data_31_reg);

		// Get Horizontal profile data for U.
		Profile2_H_Block_V[0]   = data_16.ch1_pf_h00_right;
		Profile2_H_Block_V[1]   = data_16.ch1_pf_h01_right;
		Profile2_H_Block_V[2]   = data_17.ch1_pf_h02_right;
		Profile2_H_Block_V[3]   = data_17.ch1_pf_h03_right;
		Profile2_H_Block_V[4]   = data_18.ch1_pf_h04_right;
		Profile2_H_Block_V[5]   = data_18.ch1_pf_h05_right;
		Profile2_H_Block_V[6]   = data_19.ch1_pf_h06_right;
		Profile2_H_Block_V[7]   = data_19.ch1_pf_h07_right;
		Profile2_H_Block_V[8]   = data_20.ch1_pf_h08_right;
		Profile2_H_Block_V[9]   = data_20.ch1_pf_h09_right;
		Profile2_H_Block_V[10] = data_21.ch1_pf_h10_right;
		Profile2_H_Block_V[11] = data_21.ch1_pf_h11_right;
		Profile2_H_Block_V[12] = data_22.ch1_pf_h12_right;
		Profile2_H_Block_V[13] = data_22.ch1_pf_h13_right;
		Profile2_H_Block_V[14] = data_23.ch1_pf_h14_right;
		Profile2_H_Block_V[15] = data_23.ch1_pf_h15_right;

		// Get Vertical profile data for U.
		Profile2_V_Block_V[0]   = data_24.ch1_pf_v00_right;
		Profile2_V_Block_V[1]   = data_24.ch1_pf_v01_right;
		Profile2_V_Block_V[2]   = data_25.ch1_pf_v02_right;
		Profile2_V_Block_V[3]   = data_25.ch1_pf_v03_right;
		Profile2_V_Block_V[4]   = data_26.ch1_pf_v04_right;
		Profile2_V_Block_V[5]   = data_26.ch1_pf_v05_right;
		Profile2_V_Block_V[6]   = data_27.ch1_pf_v06_right;
		Profile2_V_Block_V[7]   = data_27.ch1_pf_v07_right;
		Profile2_V_Block_V[8]   = data_28.ch1_pf_v08_right;
		Profile2_V_Block_V[9]   = data_28.ch1_pf_v09_right;
		Profile2_V_Block_V[10] = data_29.ch1_pf_v10_right;
		Profile2_V_Block_V[11] = data_29.ch1_pf_v11_right;
		Profile2_V_Block_V[12] = data_30.ch1_pf_v12_right;
		Profile2_V_Block_V[13] = data_30.ch1_pf_v13_right;
		Profile2_V_Block_V[14] = data_31.ch1_pf_v14_right;
		Profile2_V_Block_V[15] = data_31.ch1_pf_v15_right;
		//Enable profile
		hist_profile2_ctrl_reg.ch1_pf2_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile2_CTRL_reg, hist_profile2_ctrl_reg.regValue);

		Profile2_V_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile2_V_Sum += Profile2_H_Block_V[ii];
		}
		//Profile2_V_Sum = Profile2_V_Sum << profsum_shift;

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%600 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile2_H_Block_V[%d] =%d ### \n", jj, Profile2_H_Block_V[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile2_V_Block_V[%d] =%d ### \n", jj, Profile2_V_Block_V[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile2_V_Sum =%d========\n", Profile2_V_Sum );

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}

char scalerVIP_ReadProfile3_Y(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile3_ctrl_RBUS hist_profile3_ctrl_reg;

	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *Profile3_H_Block_Y = &(SmartPic_clue->Profile_Cal_INFO.Profile3_H_Block_Y[0]);
	unsigned short *Profile3_V_Block_Y = &(SmartPic_clue->Profile_Cal_INFO.Profile3_V_Block_Y[0]);

	hist_profile3_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile3_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x2;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x1;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x3;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x2;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x3;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x3;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_CTRL_reg, hist_profile3_ctrl_reg.regValue);

	if ( hist_profile3_ctrl_reg.ch1_pf3_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile3_data_00_RBUS data_00;
		profile_ich1_hist_profile3_data_01_RBUS data_01;
		profile_ich1_hist_profile3_data_02_RBUS data_02;
		profile_ich1_hist_profile3_data_03_RBUS data_03;
		profile_ich1_hist_profile3_data_04_RBUS data_04;
		profile_ich1_hist_profile3_data_05_RBUS data_05;
		profile_ich1_hist_profile3_data_06_RBUS data_06;
		profile_ich1_hist_profile3_data_07_RBUS data_07;
		profile_ich1_hist_profile3_data_08_RBUS data_08;
		profile_ich1_hist_profile3_data_09_RBUS data_09;
		profile_ich1_hist_profile3_data_10_RBUS data_10;
		profile_ich1_hist_profile3_data_11_RBUS data_11;
		profile_ich1_hist_profile3_data_12_RBUS data_12;
		profile_ich1_hist_profile3_data_13_RBUS data_13;
		profile_ich1_hist_profile3_data_14_RBUS data_14;
		profile_ich1_hist_profile3_data_15_RBUS data_15;

		data_00.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_00_reg);
		data_01.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_01_reg);
		data_02.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_02_reg);
		data_03.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_03_reg);
		data_04.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_04_reg);
		data_05.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_05_reg);
		data_06.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_06_reg);
		data_07.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_07_reg);
		data_08.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_08_reg);
		data_09.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_09_reg);
		data_10.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_10_reg);
		data_11.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_11_reg);
		data_12.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_12_reg);
		data_13.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_13_reg);
		data_14.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_14_reg);
		data_15.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_15_reg);

		// Get Horizontal profile data for V.
		Profile3_H_Block_Y[0]   = data_00.ch1_pf3_h00;
		Profile3_H_Block_Y[1]   = data_00.ch1_pf3_h01;
		Profile3_H_Block_Y[2]   = data_01.ch1_pf3_h02;
		Profile3_H_Block_Y[3]   = data_01.ch1_pf3_h03;
		Profile3_H_Block_Y[4]   = data_02.ch1_pf3_h04;
		Profile3_H_Block_Y[5]   = data_02.ch1_pf3_h05;
		Profile3_H_Block_Y[6]   = data_03.ch1_pf3_h06;
		Profile3_H_Block_Y[7]   = data_03.ch1_pf3_h07;
		Profile3_H_Block_Y[8]   = data_04.ch1_pf3_h08;
		Profile3_H_Block_Y[9]   = data_04.ch1_pf3_h09;
		Profile3_H_Block_Y[10] = data_05.ch1_pf3_h10;
		Profile3_H_Block_Y[11] = data_05.ch1_pf3_h11;
		Profile3_H_Block_Y[12] = data_06.ch1_pf3_h12;
		Profile3_H_Block_Y[13] = data_06.ch1_pf3_h13;
		Profile3_H_Block_Y[14] = data_07.ch1_pf3_h14;
		Profile3_H_Block_Y[15] = data_07.ch1_pf3_h15;

		// Get Vertical profile data for V.
		Profile3_V_Block_Y[0]   = data_08.ch1_pf3_v00;
		Profile3_V_Block_Y[1]   = data_08.ch1_pf3_v01;
		Profile3_V_Block_Y[2]   = data_09.ch1_pf3_v02;
		Profile3_V_Block_Y[3]   = data_09.ch1_pf3_v03;
		Profile3_V_Block_Y[4]   = data_10.ch1_pf3_v04;
		Profile3_V_Block_Y[5]   = data_10.ch1_pf3_v05;
		Profile3_V_Block_Y[6]   = data_11.ch1_pf3_v06;
		Profile3_V_Block_Y[7]   = data_11.ch1_pf3_v07;
		Profile3_V_Block_Y[8]   = data_12.ch1_pf3_v08;
		Profile3_V_Block_Y[9]   = data_12.ch1_pf3_v09;
		Profile3_V_Block_Y[10] = data_13.ch1_pf3_v10;
		Profile3_V_Block_Y[11] = data_13.ch1_pf3_v11;
		Profile3_V_Block_Y[12] = data_14.ch1_pf3_v12;
		Profile3_V_Block_Y[13] = data_14.ch1_pf3_v13;
		Profile3_V_Block_Y[14] = data_15.ch1_pf3_v14;
		Profile3_V_Block_Y[15] = data_15.ch1_pf3_v15;
		//Enable profile
		hist_profile3_ctrl_reg.ch1_pf3_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_CTRL_reg, hist_profile3_ctrl_reg.regValue);

		Profile3_Y_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile3_Y_Sum += Profile3_H_Block_Y[ii];
		}
		//Profile3_Y_Sum = Profile3_Y_Sum << profsum_shift;

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%700 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile3_H_Block_Y[%d] =%d ### \n", jj, Profile3_H_Block_Y[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile3_V_Block_Y[%d] =%d ### \n", jj, Profile3_V_Block_Y[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile3_Y_Sum =%d========\n", Profile3_Y_Sum);

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}

char scalerVIP_ReadProfile3_U(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile3_ctrl_RBUS hist_profile3_ctrl_reg;

	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *Profile3_H_Block_U = &(SmartPic_clue->Profile_Cal_INFO.Profile3_H_Block_U[0]);
	unsigned short *Profile3_V_Block_U = &(SmartPic_clue->Profile_Cal_INFO.Profile3_V_Block_U[0]);

	hist_profile3_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile3_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x2;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x1;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x3;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x2;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x3;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x3;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_CTRL_reg, hist_profile3_ctrl_reg.regValue);

	if ( hist_profile3_ctrl_reg.ch1_pf3_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile3_data_00_RBUS data_00;
		profile_ich1_hist_profile3_data_01_RBUS data_01;
		profile_ich1_hist_profile3_data_02_RBUS data_02;
		profile_ich1_hist_profile3_data_03_RBUS data_03;
		profile_ich1_hist_profile3_data_04_RBUS data_04;
		profile_ich1_hist_profile3_data_05_RBUS data_05;
		profile_ich1_hist_profile3_data_06_RBUS data_06;
		profile_ich1_hist_profile3_data_07_RBUS data_07;
		profile_ich1_hist_profile3_data_08_RBUS data_08;
		profile_ich1_hist_profile3_data_09_RBUS data_09;
		profile_ich1_hist_profile3_data_10_RBUS data_10;
		profile_ich1_hist_profile3_data_11_RBUS data_11;
		profile_ich1_hist_profile3_data_12_RBUS data_12;
		profile_ich1_hist_profile3_data_13_RBUS data_13;
		profile_ich1_hist_profile3_data_14_RBUS data_14;
		profile_ich1_hist_profile3_data_15_RBUS data_15;

		data_00.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_00_reg);
		data_01.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_01_reg);
		data_02.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_02_reg);
		data_03.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_03_reg);
		data_04.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_04_reg);
		data_05.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_05_reg);
		data_06.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_06_reg);
		data_07.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_07_reg);
		data_08.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_08_reg);
		data_09.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_09_reg);
		data_10.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_10_reg);
		data_11.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_11_reg);
		data_12.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_12_reg);
		data_13.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_13_reg);
		data_14.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_14_reg);
		data_15.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_15_reg);

		// Get Horizontal profile data for U.
		Profile3_H_Block_U[0]   = data_00.ch1_pf3_h00;
		Profile3_H_Block_U[1]   = data_00.ch1_pf3_h01;
		Profile3_H_Block_U[2]   = data_01.ch1_pf3_h02;
		Profile3_H_Block_U[3]   = data_01.ch1_pf3_h03;
		Profile3_H_Block_U[4]   = data_02.ch1_pf3_h04;
		Profile3_H_Block_U[5]   = data_02.ch1_pf3_h05;
		Profile3_H_Block_U[6]   = data_03.ch1_pf3_h06;
		Profile3_H_Block_U[7]   = data_03.ch1_pf3_h07;
		Profile3_H_Block_U[8]   = data_04.ch1_pf3_h08;
		Profile3_H_Block_U[9]   = data_04.ch1_pf3_h09;
		Profile3_H_Block_U[10] = data_05.ch1_pf3_h10;
		Profile3_H_Block_U[11] = data_05.ch1_pf3_h11;
		Profile3_H_Block_U[12] = data_06.ch1_pf3_h12;
		Profile3_H_Block_U[13] = data_06.ch1_pf3_h13;
		Profile3_H_Block_U[14] = data_07.ch1_pf3_h14;
		Profile3_H_Block_U[15] = data_07.ch1_pf3_h15;

		// Get Vertical profile data for U.
		Profile3_V_Block_U[0]   = data_08.ch1_pf3_v00;
		Profile3_V_Block_U[1]   = data_08.ch1_pf3_v01;
		Profile3_V_Block_U[2]   = data_09.ch1_pf3_v02;
		Profile3_V_Block_U[3]   = data_09.ch1_pf3_v03;
		Profile3_V_Block_U[4]   = data_10.ch1_pf3_v04;
		Profile3_V_Block_U[5]   = data_10.ch1_pf3_v05;
		Profile3_V_Block_U[6]   = data_11.ch1_pf3_v06;
		Profile3_V_Block_U[7]   = data_11.ch1_pf3_v07;
		Profile3_V_Block_U[8]   = data_12.ch1_pf3_v08;
		Profile3_V_Block_U[9]   = data_12.ch1_pf3_v09;
		Profile3_V_Block_U[10] = data_13.ch1_pf3_v10;
		Profile3_V_Block_U[11] = data_13.ch1_pf3_v11;
		Profile3_V_Block_U[12] = data_14.ch1_pf3_v12;
		Profile3_V_Block_U[13] = data_14.ch1_pf3_v13;
		Profile3_V_Block_U[14] = data_15.ch1_pf3_v14;
		Profile3_V_Block_U[15] = data_15.ch1_pf3_v15;
		//Enable profile
		hist_profile3_ctrl_reg.ch1_pf3_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_CTRL_reg, hist_profile3_ctrl_reg.regValue);

		Profile3_U_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile3_U_Sum += Profile3_H_Block_U[ii];
		}
		//Profile3_U_Sum = Profile3_U_Sum << profsum_shift;

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%700 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile3_H_Block_U[%d] =%d ### \n", jj, Profile3_H_Block_U[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile3_V_Block_U[%d] =%d ### \n", jj, Profile3_V_Block_U[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile3_U_Sum =%d========\n", Profile3_U_Sum);

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}


char scalerVIP_ReadProfile3_V(_clues* SmartPic_clue)
{
	profile_ich1_hist_profile3_ctrl_RBUS hist_profile3_ctrl_reg;

	unsigned char ii;
	#if Print_Profile_Data
	unsigned char jj;
	#endif

	unsigned short *Profile3_H_Block_V = &(SmartPic_clue->Profile_Cal_INFO.Profile3_H_Block_V[0]);
	unsigned short *Profile3_V_Block_V = &(SmartPic_clue->Profile_Cal_INFO.Profile3_V_Block_V[0]);

	hist_profile3_ctrl_reg.regValue = scaler_rtd_inl(PROFILE_ICH1_Hist_Profile3_CTRL_reg);

	// H & V Shift right hnsr bits each line.
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_480I:
		case _MODE_576I:
		case _MODE_480P:
		case _MODE_576P:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x2;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x1;
			break;
		case _MODE_720P50:
		case _MODE_720P60:
		case _MODE_1080I25:
		case _MODE_1080I30:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x3;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x2;
			break;
		case _MODE_1080P50:
		case _MODE_1080P60:
			hist_profile3_ctrl_reg.ch1_pf3_hnsr = 0x3;
			hist_profile3_ctrl_reg.ch1_pf3_vnsr = 0x3;
			break;
	}

	scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_CTRL_reg, hist_profile3_ctrl_reg.regValue);

	if ( hist_profile3_ctrl_reg.ch1_pf3_enable_profile == 0 ) //wait for finish flag
	{

		profile_ich1_hist_profile3_data_00_RBUS data_00;
		profile_ich1_hist_profile3_data_01_RBUS data_01;
		profile_ich1_hist_profile3_data_02_RBUS data_02;
		profile_ich1_hist_profile3_data_03_RBUS data_03;
		profile_ich1_hist_profile3_data_04_RBUS data_04;
		profile_ich1_hist_profile3_data_05_RBUS data_05;
		profile_ich1_hist_profile3_data_06_RBUS data_06;
		profile_ich1_hist_profile3_data_07_RBUS data_07;
		profile_ich1_hist_profile3_data_08_RBUS data_08;
		profile_ich1_hist_profile3_data_09_RBUS data_09;
		profile_ich1_hist_profile3_data_10_RBUS data_10;
		profile_ich1_hist_profile3_data_11_RBUS data_11;
		profile_ich1_hist_profile3_data_12_RBUS data_12;
		profile_ich1_hist_profile3_data_13_RBUS data_13;
		profile_ich1_hist_profile3_data_14_RBUS data_14;
		profile_ich1_hist_profile3_data_15_RBUS data_15;

		data_00.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_00_reg);
		data_01.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_01_reg);
		data_02.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_02_reg);
		data_03.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_03_reg);
		data_04.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_04_reg);
		data_05.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_05_reg);
		data_06.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_06_reg);
		data_07.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_07_reg);
		data_08.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_08_reg);
		data_09.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_09_reg);
		data_10.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_10_reg);
		data_11.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_11_reg);
		data_12.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_12_reg);
		data_13.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_13_reg);
		data_14.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_14_reg);
		data_15.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile3_Data_15_reg);

		// Get Horizontal profile data for V.
		Profile3_H_Block_V[0]   = data_00.ch1_pf3_h00;
		Profile3_H_Block_V[1]   = data_00.ch1_pf3_h01;
		Profile3_H_Block_V[2]   = data_01.ch1_pf3_h02;
		Profile3_H_Block_V[3]   = data_01.ch1_pf3_h03;
		Profile3_H_Block_V[4]   = data_02.ch1_pf3_h04;
		Profile3_H_Block_V[5]   = data_02.ch1_pf3_h05;
		Profile3_H_Block_V[6]   = data_03.ch1_pf3_h06;
		Profile3_H_Block_V[7]   = data_03.ch1_pf3_h07;
		Profile3_H_Block_V[8]   = data_04.ch1_pf3_h08;
		Profile3_H_Block_V[9]   = data_04.ch1_pf3_h09;
		Profile3_H_Block_V[10] = data_05.ch1_pf3_h10;
		Profile3_H_Block_V[11] = data_05.ch1_pf3_h11;
		Profile3_H_Block_V[12] = data_06.ch1_pf3_h12;
		Profile3_H_Block_V[13] = data_06.ch1_pf3_h13;
		Profile3_H_Block_V[14] = data_07.ch1_pf3_h14;
		Profile3_H_Block_V[15] = data_07.ch1_pf3_h15;

		// Get Vertical profile data for V.
		Profile3_V_Block_V[0]   = data_08.ch1_pf3_v00;
		Profile3_V_Block_V[1]   = data_08.ch1_pf3_v01;
		Profile3_V_Block_V[2]   = data_09.ch1_pf3_v02;
		Profile3_V_Block_V[3]   = data_09.ch1_pf3_v03;
		Profile3_V_Block_V[4]   = data_10.ch1_pf3_v04;
		Profile3_V_Block_V[5]   = data_10.ch1_pf3_v05;
		Profile3_V_Block_V[6]   = data_11.ch1_pf3_v06;
		Profile3_V_Block_V[7]   = data_11.ch1_pf3_v07;
		Profile3_V_Block_V[8]   = data_12.ch1_pf3_v08;
		Profile3_V_Block_V[9]   = data_12.ch1_pf3_v09;
		Profile3_V_Block_V[10] = data_13.ch1_pf3_v10;
		Profile3_V_Block_V[11] = data_13.ch1_pf3_v11;
		Profile3_V_Block_V[12] = data_14.ch1_pf3_v12;
		Profile3_V_Block_V[13] = data_14.ch1_pf3_v13;
		Profile3_V_Block_V[14] = data_15.ch1_pf3_v14;
		Profile3_V_Block_V[15] = data_15.ch1_pf3_v15;

		//Enable profile
		hist_profile3_ctrl_reg.ch1_pf3_enable_profile = 0x1;
		scaler_rtd_outl(PROFILE_ICH1_Hist_Profile3_CTRL_reg, hist_profile3_ctrl_reg.regValue);

		Profile3_V_Sum = 0;
		for( ii=0; ii<16; ii++ ) {
			Profile3_V_Sum += Profile3_H_Block_V[ii];
		}
		//Profile3_V_Sum = Profile3_V_Sum << profsum_shift;

		#if Print_Profile_Data
		if (Profile1_Y_Print_Count%700 ==0)
		{
			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile3_H_Block_V[%d] =%d ### \n", jj, Profile3_H_Block_V[jj]);
			}

			for(jj=0; jj<16; jj++ )
			{
				ROSPrintf( "### Profile3_V_Block_V[%d] =%d ### \n", jj, Profile3_V_Block_V[jj]);
			}

			ROSPrintf( "[ScalerVIP] ========Profile OK, Profile3_V_Sum =%d========\n", Profile3_V_Sum);

			Profile1_Y_Print_Count = 0;
		}

		Profile1_Y_Print_Count++;
		#endif

		return SUCCESS;
	}
	else
	{
		//ROSPrintf( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

}

void scalerVIP_Difference_H_V_Calculate()
{
	unsigned char ii;
	unsigned char Profile_Block_Num = 16;//set profile h&V block number


	unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	static unsigned short pre_H_Block[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	static unsigned short pre_V_Block[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

//	unsigned short Difference_H[16], Difference_V[16];
	unsigned int sum_of_difference = 0;

	for (ii=0;ii<Profile_Block_Num;ii++)
	{
		//calculate difference
		Difference_H[ii] = abs_value(H_Block[ii] - pre_H_Block[ii]);
		Difference_V[ii] = abs_value(V_Block[ii] - pre_V_Block[ii]);

		//calculate sum of difference
		sum_of_difference = sum_of_difference + Difference_H[ii] + Difference_V[ii];
	}

	//save profile to buffer:pre_H_Block, pre_V_Block
	for (ii=0;ii<Profile_Block_Num;ii++)
	{
		pre_H_Block[ii] = H_Block[ii];
		pre_V_Block[ii] = V_Block[ii];
	}

}

//20130402 Elsie: Still Motion judgement
MOTION_LEVEL scalerVIP_StillMotion(_clues* SmartPic_clue)
{
	unsigned char ii;
	unsigned char Profile_Block_Num = 16;//set profile h&V block number

	static unsigned char exit_motion_cnt_still = 0;
	static unsigned char exit_motion_cnt_very_still = 0;
	static unsigned char very_motion_cnt2 =0;

	MOTION_LEVEL flag_motion_type = MOTION_LEVEL_MOTION;
	static MOTION_LEVEL flag_motion_type_pre = MOTION_LEVEL_MOTION;
	static unsigned char isEvenFrame = 0;

	unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	static unsigned short pre_H_Block[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	static unsigned short pre_V_Block[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

//	unsigned short Difference_H[16], Difference_V[16];
	unsigned int sum_of_difference = 0;

	//unsigned short H_Block[16], V_Block[16];
	unsigned short threshold_still = 180;

	MOTION_LEVEL MAD_level =0;

	//scalerDrvPrint( "enter scalerVIP_colorProfileStillMotion\n" );

	//Set threshold_still
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_1080PM50:
		case _MODE_1080PM60:
		case _MODE_1080P50:
		case _MODE_1080P60:
			threshold_still = 640;
			break;
		case _MODE_1080I25:
		case _MODE_1080I30:
			threshold_still =300;
			break;
		default:
			threshold_still = 180;	//CVBS, YPbPr
			break;
	}

	MAD_level  =999 ;
	//motion detection
	for (ii=0;ii<Profile_Block_Num;ii++)
	{
		//calculate difference
		Difference_H[ii] = abs_value(H_Block[ii] - pre_H_Block[ii]);
		Difference_V[ii] = abs_value(V_Block[ii] - pre_V_Block[ii]);

		//calculate sum of difference
		sum_of_difference = sum_of_difference + Difference_H[ii] + Difference_V[ii];
	}

	if (sum_of_difference <= threshold_still)	//not "very motion"
	{

		MAD_level = scalerVIP_MADStillMotion();	//Using MAD value
		very_motion_cnt2=0;
		if (MAD_level == MOTION_LEVEL_VERY_STILL)	//very still
		{
			very_motion_cnt=0;
			very_still_cnt ++;
			exit_motion_cnt_very_still++;
			if ( exit_motion_cnt_very_still >= 2 )
				flag_motion_type = MOTION_LEVEL_VERY_STILL; //pattern is very still
			else
				flag_motion_type = flag_motion_type_pre;
		}
		else if (MAD_level == MOTION_LEVEL_STILL) //still
		{
			very_motion_cnt++;
			very_still_cnt=0;
			exit_motion_cnt_still++;
			if ( exit_motion_cnt_still >= 2 )
				flag_motion_type = MOTION_LEVEL_STILL; //pattern is still
			else
				flag_motion_type = flag_motion_type_pre;
		}
		else
		{
			flag_motion_type = MOTION_LEVEL_SLOW_MOTION;
			very_motion_cnt++;
			very_still_cnt=0;
			exit_motion_cnt_still = 0;
			exit_motion_cnt_very_still = 0;
		}
		if (very_motion_cnt>20) very_motion_cnt=20;

	}
	else
	{
		very_motion_cnt++;
		very_motion_cnt2 ++;
		very_still_cnt=0;

		if ( very_motion_cnt2 >= 2 )
			flag_motion_type = MOTION_LEVEL_MOTION; //pattern is motion
		else
			flag_motion_type = flag_motion_type_pre; //pattern is motion

		exit_motion_cnt_still = 0;
		exit_motion_cnt_very_still = 0;
	}
#if 0
	if(MA_print_count % 3 == 0)
	{
		ROSPrintf("sum_of_difference=%d,threshold_still=%d\n",sum_of_difference,threshold_still );
		ROSPrintf("flag_motion_type=%d,MAD_level=%d ====\n",flag_motion_type,MAD_level  );
	}
#endif


	//save profile to buffer:pre_H_Block, pre_V_Block
	for (ii=0;ii<Profile_Block_Num;ii++)
	{
		pre_H_Block[ii] = H_Block[ii];
		pre_V_Block[ii] = V_Block[ii];
	}

	isEvenFrame = (isEvenFrame+1) % 2;
	flag_motion_type_pre = flag_motion_type;

	return flag_motion_type;
}

//20130402 Elsie add for motion detection with MAD value.
MOTION_LEVEL scalerVIP_MADStillMotion(void)
{
	di_im_di_rtnr_mad_y_th_RBUS im_di_rtnr_mad_y_th_reg;
	di_im_di_rtnr_mad_c_th_RBUS im_di_rtnr_mad_c_th_reg;
	di_im_di_rtnr_mad_y_counter_RBUS mad_y;
	di_im_di_rtnr_mad_u_counter_RBUS mad_u;
	di_im_di_rtnr_mad_v_counter_RBUS mad_v;

	unsigned int MAD_counter[3]; //Y,U,V respectively
	unsigned short MAD_threshold_y = 56;
	unsigned short MAD_threshold_c = 56;
	unsigned int MAD_counter_sum = 0;
	unsigned int MAD_counter_sum_threshold;
	static unsigned int preMAD_csum=0;
	_RPC_system_setting_info* RPC_system_info_structure_table = NULL;
	RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if((RPC_system_info_structure_table == NULL))
	{
		if(MA_print_count%360==0)
			ROSPrintf("Share Memory PQ data ERROR, system_info = %p, \n",RPC_system_info_structure_table);
		return MOTION_LEVEL_MOTION;
	}


	im_di_rtnr_mad_y_th_reg.regValue = scaler_rtd_inl(DI_IM_DI_RTNR_MAD_Y_TH_reg);
	im_di_rtnr_mad_c_th_reg.regValue = scaler_rtd_inl(DI_IM_DI_RTNR_MAD_C_TH_reg);
	im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = MAD_threshold_y;
	im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1 = MAD_threshold_c;
	if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV006){
	scaler_rtd_outl(DI_IM_DI_RTNR_MAD_Y_TH_reg,im_di_rtnr_mad_y_th_reg.regValue);
	scaler_rtd_outl(DI_IM_DI_RTNR_MAD_C_TH_reg,im_di_rtnr_mad_c_th_reg.regValue);
	}

	mad_y.res1 = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_reg);
	mad_u.res1 = rtd_inl(DI_IM_DI_RTNR_MAD_U_COUNTER_reg);
	mad_v.res1 = rtd_inl(DI_IM_DI_RTNR_MAD_V_COUNTER_reg);

	MAD_counter[0] = mad_y.cp_temporal_mad_countery;
	MAD_counter[1] = mad_u.cp_temporal_mad_counteru;
	MAD_counter[2] = mad_v.cp_temporal_mad_counterv;
	MAD_counter_sum =  MAD_counter[0] + MAD_counter[1] + MAD_counter[2];

	//Set MAD_counter_sum_threshold
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_1080PM50:
		case _MODE_1080PM60:
		case  _MODE_1080P50:
		case _MODE_1080P60:
			MAD_counter_sum_threshold = 220;
			break;
		case  _MODE_1080I25:
		case  _MODE_1080I30:
			MAD_counter_sum_threshold = 300;	//HDMI
			  if (MAD_counter_sum <= 10 || ( preMAD_csum+MAD_counter_sum)<260 )
			  	{
		   		      preMAD_csum=MAD_counter_sum;
				      return MOTION_LEVEL_VERY_STILL;	//very still
			  	}
			  else if (MAD_counter_sum <= MAD_counter_sum_threshold)
			  	{
			  	  preMAD_csum=MAD_counter_sum;
			         return MOTION_LEVEL_STILL;	//almost still
			  	}
			  else
			  	{
			  	  preMAD_csum=MAD_counter_sum;
			    	  return MOTION_LEVEL_SLOW_MOTION;	//slow motion, suppose it is randomly
				}
			break;
		default:
			MAD_counter_sum_threshold = 72;	//CVBS, YPbPr
			break;
	}

	if(MA_print_count % 9 == 0)
	{
//		ROSPrintf("MAD_counter_sum=%d,threshold=%d\n",MAD_counter_sum,MAD_counter_sum_threshold );
	}


	if (MAD_counter_sum == 0)
		return MOTION_LEVEL_VERY_STILL;	//very still
	else if (MAD_counter_sum <= MAD_counter_sum_threshold)
		return MOTION_LEVEL_STILL;	//almost still
	else
		return MOTION_LEVEL_SLOW_MOTION;	//slow motion, suppose it is randomly
}

#ifdef ISR_FADE_DETECT_FUNCTIOM_ENABLE
//Elsie 20130416: big smooth area & fade in/fade out detection.
unsigned char scalerVIP_BigSmoothAreaDetection_luma(void)
{
#if 0 // rbus sync error!! CSFC 2015/03/04
	unsigned int ii;
	unsigned int max_hist[3],max_hist_ID[3],hist_sum_tmp;
	unsigned char flag_big_smooth_area_luma = 0;
	unsigned char flag_sharpness_on, flag_high_edge_density = 0;
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);

	scalerDrvPrint("enter scalerVIP_ReadHist\n");

	// Luma
	max_hist[0] = max_hist[1] = max_hist[2] = 0;
	max_hist_ID[0] = max_hist_ID[1] = max_hist_ID[2] = 0;
	hist_sum_tmp = 0;
	for(ii=0;ii<COLOR_HISTOGRAM_LEVEL;ii++)
	{
		if(max_hist[0] < reg_HistCnt[ii])
		{
			max_hist[2] = max_hist[1];
			max_hist_ID[2] = max_hist_ID[1];
			max_hist[1] = max_hist[0];
			max_hist_ID[1] = max_hist_ID[0];
			max_hist[0] = reg_HistCnt[ii];
			max_hist_ID[0] = ii;
		}
		else if(max_hist[1] < reg_HistCnt[ii])
		{
			max_hist[2] = max_hist[1];
			max_hist_ID[2] = max_hist_ID[1];
			max_hist[1] = reg_HistCnt[ii];
			max_hist_ID[1] = ii;
		}
		else if(max_hist[2] < reg_HistCnt[ii])
		{
			max_hist[2] = reg_HistCnt[ii];
			max_hist_ID[2] = ii;
		}
	}

	//"edge" density: if there is too many edges, force the return value to false.
	flag_sharpness_on = rtd_t_inl(color_sharp_dm_nr_shp_ctrl_RBUS, COLOR_SHARP_DM_NR_SHP_CTRL_reg).mkiii_en;
	if(flag_sharpness_on == 1)
	{
		color_sharp_dm_auto_shp_data_RBUS dm_auto_shp_data_reg;
		dm_auto_shp_data_reg.regValue = rtd_inl(COLOR_SHARP_DM_AUTO_SHP_DATA_reg);
		unsigned int Hist_HPF[16], Hist_HPF_total = 0;

		if(dm_auto_shp_data_reg.enable == 1)	//histogram after HPF
		{
			Hist_HPF[0] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_00_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_00_reg).lut0;
			Hist_HPF[1] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_01_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_01_reg).lut1;
			Hist_HPF[2] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_02_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_02_reg).lut2;
			Hist_HPF[3] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_03_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_03_reg).lut3;
			Hist_HPF[4] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_04_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_04_reg).lut4;
			Hist_HPF[5] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_05_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_05_reg).lut5;
			Hist_HPF[6] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_06_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_06_reg).lut6;
			Hist_HPF[7] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_07_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_07_reg).lut7;
			Hist_HPF[8] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_08_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_08_reg).lut8;
			Hist_HPF[9] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_09_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_09_reg).lut9;
			Hist_HPF[10] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_10_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_10_reg).lut10;
			Hist_HPF[11] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_11_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_11_reg).lut11;
			Hist_HPF[12] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_12_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_12_reg).lut12;
			Hist_HPF[13] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_13_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_13_reg).lut13;
			Hist_HPF[14] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_14_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_14_reg).lut14;
			Hist_HPF[15] = rtd_t_inl(color_sharp_dm_auto_shp_fir_count_15_RBUS, COLOR_SHARP_DM_AUTO_SHP_FIR_COUNT_15_reg).lut15;

			for(ii=0;ii<16;ii++)
			{
				Hist_HPF_total = Hist_HPF_total + Hist_HPF[ii];
			}
			if(Hist_HPF_total*4/5 > Hist_HPF[0]+Hist_HPF[1])
				flag_high_edge_density = 1;
		}
		dm_auto_shp_data_reg.enable = 1;
		dm_auto_shp_data_reg.shift_bit = 0;
		rtd_outl(COLOR_SHARP_DM_AUTO_SHP_DATA_reg, dm_auto_shp_data_reg.regValue);
	}

	if(flag_high_edge_density == 1)
	{
		flag_big_smooth_area_luma = 0;
	}
	else if((max_hist[0]>>2)>max_hist[1]) 	//max_hist[0]>(max_hist[1]*4)
	{
		flag_big_smooth_area_luma = 1;
	}
	else if(abs_value(max_hist_ID[0]-max_hist_ID[1])==1)	//nearby
	{
		hist_sum_tmp = max_hist[0] + max_hist[1];
		if((hist_sum_tmp>>2)>max_hist[2])
		{
			flag_big_smooth_area_luma = 1;
		}
		else
		{
			flag_big_smooth_area_luma = 0;
		}
	}
	else
	{
		flag_big_smooth_area_luma = 0;
	}
	return flag_big_smooth_area_luma;
#endif
   return 0 ;
}

unsigned char scalerVIP_BigSmoothAreaDetection_chroma(void)
{
	unsigned int ii,hue_max_hist[3],hue_max_hist_ID[3],hue_hist_01 = 0,hue_hist_sum = 0;
	unsigned char flag_big_smooth_area_chroma = 0;

	// Hue
	hue_max_hist[0] = hue_max_hist[1] = hue_max_hist[2] = 0;
	hue_max_hist_ID[0] = hue_max_hist_ID[1] = hue_max_hist_ID[2] = 0;
	for(ii=0;ii<24;ii++)
	{
		if(hue_max_hist[0] < hue_hist_2[ii])
		{
			hue_max_hist[2] = hue_max_hist[1];
			hue_max_hist_ID[2] = hue_max_hist_ID[1];
			hue_max_hist[1] = hue_max_hist[0];
			hue_max_hist_ID[1] = hue_max_hist_ID[0];
			hue_max_hist[0] = hue_hist_2[ii];
			hue_max_hist_ID[0] = ii;
		}
		else if(hue_max_hist[1] < hue_hist_2[ii])
		{
			hue_max_hist[2] = hue_max_hist[1];
			hue_max_hist_ID[2] = hue_max_hist_ID[1];
			hue_max_hist[1] = hue_hist_2[ii];
			hue_max_hist_ID[1] = ii;
		}
		else if(hue_max_hist[2] < hue_hist_2[ii])
		{
			hue_max_hist[2] = hue_hist_2[ii];
			hue_max_hist_ID[2] = ii;
		}
		hue_hist_sum = hue_hist_sum + hue_hist_2[ii];
	}

	if (hue_max_hist[0]==0)	// pure gray level image, force the return value to true.
	{
		flag_big_smooth_area_chroma = 1;
	}
	else if((hue_max_hist[0]>>2)>hue_max_hist[1])	//max_hist[0]>(max_hist[1]*4)
	{
		flag_big_smooth_area_chroma = 1;
	}
	else if(abs_value(hue_max_hist_ID[0]-hue_max_hist_ID[1])==1)	//nearby
	{
		hue_hist_01 = hue_max_hist[0] + hue_max_hist[1];
		if((hue_hist_01>>2)>hue_max_hist[2])
		{
			flag_big_smooth_area_chroma = 1;
		}
		else
		{
			flag_big_smooth_area_chroma = 0;
		}
	}
	else
	{
		flag_big_smooth_area_chroma = 0;
	}

	return flag_big_smooth_area_chroma;
}
#endif

unsigned char scalerVIP_ColorbarDetector(_clues* SmartPic_clue)
{
	unsigned char ii, ProfileCount = 0;
	unsigned short thl;
	//unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	//Set threshold_still
	switch (SmartPic_clue->SCALER_DISP_INFO.ucMode_Curr)
	{
		case _MODE_1080PM50:
		case _MODE_1080PM60:
		case _MODE_1080P50:
		case _MODE_1080P60:
			thl = 20;
			break;
		case _MODE_1080I25:
		case _MODE_1080I30:
			thl =10;
			break;
		default:
			thl = 6;	//CVBS, YPbPr
			break;
	}

	for(ii=1;ii<9;ii++)
	{
		if(V_Block[ii]-V_Block[ii-1] < thl)
			ProfileCount++;
	}

	if(ProfileCount == 8)
		return TRUE;
	else
		return FALSE;

}

void scalerVIP_newdcti(unsigned char isColorBar)
{
/*
	idcti_i_dcti_ctrl_1_RBUS i_dcti_ctrl_1_reg;
	i_dcti_ctrl_1_reg.regValue = rtd_inl(IDCTI_I_DCTI_CTRL_1_reg);

	if(isColorBar == TRUE)
	{
		switch (scaler_disp_info[_CHANNEL1].ucMode_Curr)
		{
			case _MODE_480I:
			case _MODE_576I:	//SD
				i_dcti_ctrl_1_reg.data_sel = 1;
				i_dcti_ctrl_1_reg.maxlen = 2;
				i_dcti_ctrl_1_reg.psmth = 0;
				i_dcti_ctrl_1_reg.lp_mode = 1;
				i_dcti_ctrl_1_reg.engdiv = 0;
				i_dcti_ctrl_1_reg.offdiv = 0;
				i_dcti_ctrl_1_reg.uvgain = 16;
				i_dcti_ctrl_1_reg.dcti_mode = 0;
				i_dcti_ctrl_1_reg.cur_sel = 1;
				i_dcti_ctrl_1_reg.dcti_en = 1;
				break;
			case _MODE_480P:
			case _MODE_576P:
			case _MODE_720P50:
			case _MODE_720P60:
			case _MODE_1080I25:
			case _MODE_1080I30:
			case _MODE_1080P50:
			case _MODE_1080P60:		//HD
			default:
				i_dcti_ctrl_1_reg.data_sel = 1;
				i_dcti_ctrl_1_reg.maxlen = 2;
				i_dcti_ctrl_1_reg.psmth = 0;
				i_dcti_ctrl_1_reg.lp_mode = 1;
				i_dcti_ctrl_1_reg.engdiv = 0;
				i_dcti_ctrl_1_reg.offdiv = 1;
				i_dcti_ctrl_1_reg.uvgain = 48;
				i_dcti_ctrl_1_reg.dcti_mode = 0;
				i_dcti_ctrl_1_reg.cur_sel = 1;
				i_dcti_ctrl_1_reg.dcti_en = 1;
				break;
		}
	}
	else
	{
		switch (scaler_disp_info[_CHANNEL1].ucMode_Curr)
		{
			case _MODE_480I:
			case _MODE_576I:	//SD
				i_dcti_ctrl_1_reg.data_sel = 1;
				i_dcti_ctrl_1_reg.maxlen = 2;
				i_dcti_ctrl_1_reg.psmth = 0;
				i_dcti_ctrl_1_reg.lp_mode = 1;
				i_dcti_ctrl_1_reg.engdiv = 0;
				i_dcti_ctrl_1_reg.offdiv = 0;
				i_dcti_ctrl_1_reg.uvgain = 8;
				i_dcti_ctrl_1_reg.dcti_mode = 0;
				i_dcti_ctrl_1_reg.cur_sel = 1;
				i_dcti_ctrl_1_reg.dcti_en = 1;
				break;
			case _MODE_480P:
			case _MODE_576P:
			case _MODE_720P50:
			case _MODE_720P60:
			case _MODE_1080I25:
			case _MODE_1080I30:
			case _MODE_1080P50:
			case _MODE_1080P60:		//HD
			default:
				i_dcti_ctrl_1_reg.data_sel = 1;
				i_dcti_ctrl_1_reg.maxlen = 2;
				i_dcti_ctrl_1_reg.psmth = 0;
				i_dcti_ctrl_1_reg.lp_mode = 1;
				i_dcti_ctrl_1_reg.engdiv = 0;
				i_dcti_ctrl_1_reg.offdiv = 1;
				i_dcti_ctrl_1_reg.uvgain = 16;
				i_dcti_ctrl_1_reg.dcti_mode = 0;
				i_dcti_ctrl_1_reg.cur_sel = 1;
				i_dcti_ctrl_1_reg.dcti_en = 1;
				break;
		}

#if 0
		//D-domain DCTI for colorbar
		dm_dcti_options_RBUS dm_dcti_options_reg;
		dm_dcti_1st_value_RBUS dm_dcti_1st_value_reg;
		dm_dcti_2nd_value_RBUS dm_dcti_2nd_value_reg;

		dm_dcti_options_reg.regValue = rtd_inl(COLOR_DLCTI_DM_DCTI_OPTIONS_reg);
		dm_dcti_1st_value_reg.regValue = rtd_inl(COLOR_DLCTI_DM_DCTI_1ST_VALUE_reg);
		dm_dcti_2nd_value_reg.regValue = rtd_inl(COLOR_DLCTI_DM_DCTI_2ND_VALUE_reg);

		dm_dcti_options_reg.enabled = 1;
		dm_dcti_options_reg.prevent_pe = 0;
		dm_dcti_1st_value_reg.gain_value = 31;
		dm_dcti_1st_value_reg.th_value = 31;
		dm_dcti_2nd_value_reg.gain_value = 0;
		dm_dcti_2nd_value_reg.th_value = 6;
		rtd_outl(COLOR_DLCTI_DM_DCTI_OPTIONS_reg, dm_dcti_options_reg.regValue);
		rtd_outl(COLOR_DLCTI_DM_DCTI_1ST_VALUE_reg, dm_dcti_1st_value_reg.regValue);
		rtd_outl(COLOR_DLCTI_DM_DCTI_2ND_VALUE_reg, dm_dcti_2nd_value_reg.regValue);
#endif
	}

	rtd_outl(IDCTI_I_DCTI_CTRL_1_reg, i_dcti_ctrl_1_reg.regValue);
	*/
}

#if 1

void scalerVIP_luma_level_distribution_Remapping(unsigned int *luma_distribution, unsigned char size)
{
	unsigned char nTotalSize = COLOR_HISTOGRAM_LEVEL;
	unsigned char nSegment = nTotalSize / size;
	unsigned char nIndex = 0, nSegIndx = 0;
	_clues* SmartPic_clue=NULL;
	unsigned short nPoint = 1;
	unsigned int nSumPoint = 0;

	SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();

	if (SmartPic_clue == NULL) {
		for (nIndex = 0; nIndex < size; nIndex++) {
			luma_distribution[nIndex] = 0;
		}
		return;
	}

	for (nIndex = 0; nIndex < size; nIndex++) {
		luma_distribution[nIndex] = 0;
	}
	for (nIndex = 0; nIndex < size; nIndex++) {
		nSumPoint = 0;
		for (nSegIndx = 0; nSegIndx < nSegment; nSegIndx++) {
			if (nIndex * nSegment + nSegIndx < nTotalSize) {
				nSumPoint +=  SmartPic_clue->Y_Main_Hist[nIndex * nSegment + nSegIndx];
			}
		}
		luma_distribution[nIndex]  = nSumPoint*nPoint;

	}
}


void scalerVIP_YHist_HueHist_Ratio_Calculate()
{
	unsigned char i;
	unsigned int hue_sum = 0;

	//unsigned int printf_Flag = system_info_structure_table->ISR_Printf_Flag.Y_Hue_Sat_Hist_Flag0;
	//unsigned int print_delay = (system_info_structure_table->ISR_Printf_Flag.Delay_Time == 0)?(1):(system_info_structure_table->ISR_Printf_Flag.Delay_Time);
	for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++) {
		//hue_hist_total += hue_hist_2[i];

                if(i<24)
                        hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_00_reg + (i<<2));
                else
                        hue_hist_2[i] = scaler_rtd_inl( COLOR_ICM_HUE_COUNT_18_reg + ((i-24)<<2));

                hue_sum += hue_hist_2[i];
	}

	/*for(i=0;i<32;i++)
		y_sum += reg_HistCnt[i];*/
	if((SmartPic_clue->SCALER_DISP_INFO.DispLen*SmartPic_clue->SCALER_DISP_INFO.DispWid)!=0) {
		SmartPic_clue->hue_sumcnt_ratio = hue_sum*1000/(SmartPic_clue->SCALER_DISP_INFO.DispLen*SmartPic_clue->SCALER_DISP_INFO.DispWid);
	}

	if(hue_sum <= 1000) {
		//calculate permillage for Hue
		for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++)
			 hue_hist_ratio[i] = 0;
		colorless_flag =1;
	} else {
		//calculate permillage for Hue
		for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++)
			 hue_hist_ratio[i] = (hue_hist_2[i]/(hue_sum/1000));
		colorless_flag =0;
	}

	SmartPic_clue->colorlessflag = colorless_flag;
	for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++) {
		(SmartPic_clue->Hue_Main_His)[i]	= hue_hist_2[i];
		(SmartPic_clue->Hue_Main_His_Ratio)[i] = hue_hist_ratio[i];
	}

	if((SmartPic_clue->Hist_Y_Total_sum)==0) {
		//calculate permillage for Y
		for(i=0;i<TV006_VPQ_chrm_bin;i++)
			 Y_hist_ratio[i] = 0;
	}
	else
	{
		//calculate permillage for Y
               if( (TV006_VPQ_chrm_bin > COLOR_HISTOGRAM_LEVEL) || ((COLOR_HISTOGRAM_LEVEL%TV006_VPQ_chrm_bin) != 0)) {
			for(i=0;i<TV006_VPQ_chrm_bin;i++)
			 	Y_hist_ratio[i] = 0;
		}
		else
		{
			unsigned int Tmp_Y_Histogram[32] = {0};
			scalerVIP_luma_level_distribution_Remapping(Tmp_Y_Histogram, TV006_VPQ_chrm_bin);
			for(i=0;i<TV006_VPQ_chrm_bin;i++)
				Y_hist_ratio[i] = (Tmp_Y_Histogram[i]*1000/(SmartPic_clue->Hist_Y_Total_sum));
		}
	}

	for(i=0;i<TV006_VPQ_chrm_bin;i++) {
		(SmartPic_clue->Y_Main_Hist_Ratio)[i] = Y_hist_ratio[i];
	}

#if 0
	if(MA_print_count%150==0 )
	{
		ROSPrintf("{");
		for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++)
			ROSPrintf("%d,%d,%d ",hue_hist_ratio[i],(SmartPic_clue->Hue_Main_His)[i],(SmartPic_clue->Hue_Main_His_Ratio)[i]);
		ROSPrintf("}\n");

		ROSPrintf("{");
		for(i=0;i<32;i++)
			ROSPrintf("%d,%d ",Y_hist_ratio[i],(SmartPic_clue->Y_Main_Hist_Ratio)[i]);
		ROSPrintf("}\n");

		ROSPrintf("clf=%d,%d\n",colorless_flag,hue_sum);
	}
#endif

#if 0
	//for debug.
	if(((printf_Flag&_BIT0)!=0))
	{
		if(MA_print_count%print_delay==0)
		{
			printk("Y_Hue_Sat cal, Y={");
			for(i=0;i<TV006_VPQ_chrm_bin;i++)
				printk("%d,", SmartPic_clue->Y_Main_Hist_Ratio[i]);
			printk("}\n");
		}
	}
	if(((printf_Flag&_BIT1)!=0))
	{
		if(MA_print_count%print_delay==0)
		{
			printk("Y_Hue_Sat cal, Y={");
			for(i=0;i<TV006_VPQ_chrm_bin;i++)
				printk("%d,", SmartPic_clue->Y_Main_Hist_Ratio[i]);
			printk("}\n");
		}
	}

	if(((printf_Flag&_BIT2)!=0))
	{
		if(MA_print_count%print_delay==0)
		{
			printk("Y_Hue_Sat cal, Hue={");
			for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++)
				printk("%d,", SmartPic_clue->Hue_Main_His[i]);
			printk("}\n");
		}
	}
	if(((printf_Flag&_BIT3)!=0))
	{
		if(MA_print_count%print_delay==0)
		{
			printk("Y_Hue_Sat cal, Hue_ratio={");
			for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++)
				printk("%d,", SmartPic_clue->Hue_Main_His_Ratio[i]);
			printk("}\n");
		}
	}
#else
	ROSPrintf_YHueSat_Hist("Y={%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d}\n",
		SmartPic_clue->Y_Main_Hist_Ratio[0], SmartPic_clue->Y_Main_Hist_Ratio[1], SmartPic_clue->Y_Main_Hist_Ratio[2],
		SmartPic_clue->Y_Main_Hist_Ratio[3], SmartPic_clue->Y_Main_Hist_Ratio[4], SmartPic_clue->Y_Main_Hist_Ratio[5],
		SmartPic_clue->Y_Main_Hist_Ratio[6], SmartPic_clue->Y_Main_Hist_Ratio[7], SmartPic_clue->Y_Main_Hist_Ratio[8],
		SmartPic_clue->Y_Main_Hist_Ratio[9], SmartPic_clue->Y_Main_Hist_Ratio[10], SmartPic_clue->Y_Main_Hist_Ratio[11],
		SmartPic_clue->Y_Main_Hist_Ratio[12], SmartPic_clue->Y_Main_Hist_Ratio[13], SmartPic_clue->Y_Main_Hist_Ratio[14],
		SmartPic_clue->Y_Main_Hist_Ratio[15], SmartPic_clue->Y_Main_Hist_Ratio[16], SmartPic_clue->Y_Main_Hist_Ratio[17],
		SmartPic_clue->Y_Main_Hist_Ratio[18], SmartPic_clue->Y_Main_Hist_Ratio[19], SmartPic_clue->Y_Main_Hist_Ratio[20],
		SmartPic_clue->Y_Main_Hist_Ratio[21], SmartPic_clue->Y_Main_Hist_Ratio[22], SmartPic_clue->Y_Main_Hist_Ratio[23],
		SmartPic_clue->Y_Main_Hist_Ratio[24], SmartPic_clue->Y_Main_Hist_Ratio[25], SmartPic_clue->Y_Main_Hist_Ratio[26],
		SmartPic_clue->Y_Main_Hist_Ratio[27], SmartPic_clue->Y_Main_Hist_Ratio[28], SmartPic_clue->Y_Main_Hist_Ratio[29],
		SmartPic_clue->Y_Main_Hist_Ratio[30], SmartPic_clue->Y_Main_Hist_Ratio[31]);

	ROSPrintf_YHueSat_Hist("H={%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d}\n",
		SmartPic_clue->Hue_Main_His_Ratio[0], SmartPic_clue->Hue_Main_His_Ratio[1], SmartPic_clue->Hue_Main_His_Ratio[2],
		SmartPic_clue->Hue_Main_His_Ratio[3], SmartPic_clue->Hue_Main_His_Ratio[4], SmartPic_clue->Hue_Main_His_Ratio[5],
		SmartPic_clue->Hue_Main_His_Ratio[6], SmartPic_clue->Hue_Main_His_Ratio[7], SmartPic_clue->Hue_Main_His_Ratio[8],
		SmartPic_clue->Hue_Main_His_Ratio[9], SmartPic_clue->Hue_Main_His_Ratio[10], SmartPic_clue->Hue_Main_His_Ratio[11],
		SmartPic_clue->Hue_Main_His_Ratio[12], SmartPic_clue->Hue_Main_His_Ratio[13], SmartPic_clue->Hue_Main_His_Ratio[14],
		SmartPic_clue->Hue_Main_His_Ratio[15], SmartPic_clue->Hue_Main_His_Ratio[16], SmartPic_clue->Hue_Main_His_Ratio[17],
		SmartPic_clue->Hue_Main_His_Ratio[18], SmartPic_clue->Hue_Main_His_Ratio[19], SmartPic_clue->Hue_Main_His_Ratio[20],
		SmartPic_clue->Hue_Main_His_Ratio[21], SmartPic_clue->Hue_Main_His_Ratio[22], SmartPic_clue->Hue_Main_His_Ratio[23]);

#endif

}

void scalerVIP_Y_U_V_Mad_Calculate(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table/*, _RPC_system_setting_info* RPC_system_info_structure_table*/)
{
	unsigned short IphActWid_H=0,IpvActLen_V=0;
	unsigned int RTNR_TempMAD_count_Y=0,RTNR_TempMAD_count_U=0,RTNR_TempMAD_count_V=0;
	unsigned int RTNR_TempMAD_count_Y2=0,RTNR_TempMAD_count_U2=0,RTNR_TempMAD_count_V2=0;
	unsigned int RTNR_TempMAD_count_Y3=0,RTNR_TempMAD_count_U3=0,RTNR_TempMAD_count_V3=0;
	unsigned int RTNR_TempMAD_count_Y4=0,RTNR_TempMAD_count_U4=0,RTNR_TempMAD_count_V4=0;

	unsigned int total_pix; //rtnr_noise_new;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_MAD_HistTh_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_MAD_Hist_Th][0]);

//==============================================================
//========================Set MAD Threshold  =======================

	di_im_di_rtnr_mad_y_th_RBUS im_di_rtnr_mad_y_th_reg;
	di_im_di_rtnr_mad_y_th2_c_th2_RBUS im_di_rtnr_mad_y_th2_c_th2_reg;
	di_im_di_rtnr_mad_c_th_RBUS im_di_rtnr_mad_c_th_reg;
	//di_im_di_rtnr_level_bound_RBUS im_di_rtnr_level_bound_reg;
	di_im_new_mcnr_control3_RBUS di_im_new_mcnr_control3;
	di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;

	di_im_di_rtnr_mad_y_counter_RBUS im_di_rtnr_mad_y_counter_reg;
	di_im_di_rtnr_mad_u_counter_RBUS im_di_rtnr_mad_u_counter_reg;
	di_im_di_rtnr_mad_v_counter_RBUS im_di_rtnr_mad_v_counter_reg;

	di_im_di_rtnr_mad_y_counter_2_RBUS im_di_rtnr_mad_y_counter_2_reg;
	di_im_di_rtnr_mad_u_counter_2_RBUS im_di_rtnr_mad_u_counter_2_reg;
	di_im_di_rtnr_mad_v_counter_2_RBUS im_di_rtnr_mad_v_counter_2_reg;

	di_im_di_rtnr_mad_y_counter_3_RBUS im_di_rtnr_mad_y_counter_3_reg;
	di_im_di_rtnr_mad_u_counter_3_RBUS im_di_rtnr_mad_u_counter_3_reg;
	di_im_di_rtnr_mad_v_counter_3_RBUS im_di_rtnr_mad_v_counter_3_reg;

	//unsigned int printf_Flag = system_info_structure_table->ISR_Printf_Flag.MAD_Hist_Flag0;
	//unsigned int print_delay = (system_info_structure_table->ISR_Printf_Flag.Delay_Time == 0)?(1):(system_info_structure_table->ISR_Printf_Flag.Delay_Time);

	im_di_rtnr_mad_y_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_TH_reg);

	im_di_rtnr_mad_c_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_C_TH_reg);
	im_di_rtnr_mad_y_th2_c_th2_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_TH2_C_TH2_reg);

	di_im_new_mcnr_control3.regValue = rtd_inl(DI_IM_NEW_MCNR_CONTROL3_reg);

	/* get size info from scaler*/
	/*scalerVIP_Get_DI_Width_Height(&IphActWid_H, &IpvActLen_V);*/
	IpvActLen_V = system_info_structure_table->I_Height;
	IphActWid_H = system_info_structure_table->I_Width;

	im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);

	if (pPQA_MAD_HistTh_TBL[PQA_I_L00] == 1) {	/* controlled by PQA input table*/
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = pPQA_MAD_HistTh_TBL[PQA_I_L01];
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = pPQA_MAD_HistTh_TBL[PQA_I_L02];
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_y_th3=pPQA_MAD_HistTh_TBL[PQA_I_L03];

			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1 =pPQA_MAD_HistTh_TBL[PQA_I_L04];
			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2 =pPQA_MAD_HistTh_TBL[PQA_I_L05];
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_c_th3=pPQA_MAD_HistTh_TBL[PQA_I_L06]; //big motion

			if(IphActWid_H <=1920)
				di_im_new_mcnr_control3.n_mcnr_mad_hist_shift_en = 0;
			else
				di_im_new_mcnr_control3.n_mcnr_mad_hist_shift_en = 1;

	}
	else if (pPQA_MAD_HistTh_TBL[PQA_I_L00] == 2) {	/* controlled by PQA input table*/
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = pPQA_MAD_HistTh_TBL[PQA_I_L01];
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = pPQA_MAD_HistTh_TBL[PQA_I_L02];
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_y_th3=pPQA_MAD_HistTh_TBL[PQA_I_L03];

			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1 =pPQA_MAD_HistTh_TBL[PQA_I_L04];
			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2 =pPQA_MAD_HistTh_TBL[PQA_I_L05];
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_c_th3=pPQA_MAD_HistTh_TBL[PQA_I_L06]; //big motion

			if(IphActWid_H <=1920)
				di_im_new_mcnr_control3.n_mcnr_mad_hist_shift_en = 0;
			else
				di_im_new_mcnr_control3.n_mcnr_mad_hist_shift_en = 1;

	}
	else {
		if(IphActWid_H <=960){

			if(im_di_rtnr_control_reg.cp_rtnr_progressive != 1)
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = 8;
			else
				im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = 3;

			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = 0x20;
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_y_th3=128;


			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1 =2;
			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2 =12;

			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_c_th3=1023;

			di_im_new_mcnr_control3.n_mcnr_mad_hist_shift_en=0;


		}else if(IphActWid_H <=1920){
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = 4;
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = 0x20;
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_y_th3=128;

			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1 =0;
			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2 =2;
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_c_th3=2047; //big motion

			di_im_new_mcnr_control3.n_mcnr_mad_hist_shift_en=0;

		}
		else
		{
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = 4;
			im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = 0x20;
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_y_th3=2047;

			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1 =0;
			im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2 =2;
			im_di_rtnr_mad_y_th2_c_th2_reg.cp_temporal_mad_c_th3=2047; //big motion

			di_im_new_mcnr_control3.n_mcnr_mad_hist_shift_en=1;


		}
	}

	rtd_outl(DI_IM_NEW_MCNR_CONTROL3_reg,di_im_new_mcnr_control3.regValue);

	rtd_outl(DI_IM_DI_RTNR_MAD_Y_TH_reg, im_di_rtnr_mad_y_th_reg.regValue);
	rtd_outl(DI_IM_DI_RTNR_MAD_C_TH_reg, im_di_rtnr_mad_c_th_reg.regValue);
	rtd_outl(DI_IM_DI_RTNR_MAD_Y_TH2_C_TH2_reg, im_di_rtnr_mad_y_th2_c_th2_reg.regValue);

//=============================================================
//========================Motion MAD Check =======================


	im_di_rtnr_mad_y_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_reg);
	im_di_rtnr_mad_u_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_U_COUNTER_reg);
	im_di_rtnr_mad_v_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_V_COUNTER_reg);

	im_di_rtnr_mad_y_counter_2_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_2_reg);
	im_di_rtnr_mad_u_counter_2_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_U_COUNTER_2_reg);
	im_di_rtnr_mad_v_counter_2_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_V_COUNTER_2_reg);

	im_di_rtnr_mad_y_counter_3_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_3_reg);
	im_di_rtnr_mad_u_counter_3_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_U_COUNTER_3_reg);
	im_di_rtnr_mad_v_counter_3_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_V_COUNTER_3_reg);


	RTNR_TempMAD_count_Y = im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery;
	RTNR_TempMAD_count_U = im_di_rtnr_mad_u_counter_reg.cp_temporal_mad_counteru;
	RTNR_TempMAD_count_V = im_di_rtnr_mad_v_counter_reg.cp_temporal_mad_counterv;

	RTNR_TempMAD_count_Y2 = im_di_rtnr_mad_y_counter_2_reg.cp_temporal_mad_countery2;
	RTNR_TempMAD_count_U2 = im_di_rtnr_mad_u_counter_2_reg.cp_temporal_mad_counteru2;
	RTNR_TempMAD_count_V2 = im_di_rtnr_mad_v_counter_2_reg.cp_temporal_mad_counterv2;

	RTNR_TempMAD_count_Y3 = im_di_rtnr_mad_y_counter_3_reg.cp_temporal_mad_countery3;
	RTNR_TempMAD_count_U3 = im_di_rtnr_mad_u_counter_3_reg.cp_temporal_mad_counteru3;
	RTNR_TempMAD_count_V3 = im_di_rtnr_mad_v_counter_3_reg.cp_temporal_mad_counterv3;

	//IphActWid_H=(SmartPic_clue->SCALER_DISP_INFO.IphActWid_H);
	//IpvActLen_V=(SmartPic_clue->SCALER_DISP_INFO.IpvActLen_V);

//====================get condition===========================
	total_pix = IphActWid_H*IpvActLen_V;//Active_Region[1]*Active_Region[3];

	if(di_im_new_mcnr_control3.n_mcnr_mad_hist_shift_en==1)
		total_pix =total_pix/4;
	if(total_pix==0)
		return;

	RTNR_TempMAD_count_Y4 = total_pix - (RTNR_TempMAD_count_Y + RTNR_TempMAD_count_Y2 + RTNR_TempMAD_count_Y3);
	RTNR_TempMAD_count_U4 = total_pix - (RTNR_TempMAD_count_U + RTNR_TempMAD_count_U2 + RTNR_TempMAD_count_U3);
	RTNR_TempMAD_count_V4 = total_pix - (RTNR_TempMAD_count_V + RTNR_TempMAD_count_V2 + RTNR_TempMAD_count_V3);



	if (pPQA_MAD_HistTh_TBL[PQA_I_L00] == 2){ //this is for new algo
		int flat_area_rate=0;
		flat_area_rate= pPQA_MAD_HistTh_TBL[PQA_I_L08];
		if(flat_area_rate>100)
			flat_area_rate=100;

		if(RTNR_TempMAD_count_Y >((total_pix*flat_area_rate)/100))
		{
			RTNR_TempMAD_count_Y = (total_pix*flat_area_rate)/100; //for dvd  menu prtoect
		}
		total_pix = total_pix - RTNR_TempMAD_count_Y;  // threshold1 don't include
		if(total_pix==0)
			total_pix=1;


		RTNR_MAD_count_Y_avg = (RTNR_TempMAD_count_Y2*1000)/total_pix;
		RTNR_MAD_count_U_avg = (RTNR_TempMAD_count_U2*1000)/total_pix;
		RTNR_MAD_count_V_avg = (RTNR_TempMAD_count_V2*1000)/total_pix;

		RTNR_MAD_count_Y2_avg = (RTNR_TempMAD_count_Y3*1000)/total_pix;
		RTNR_MAD_count_U2_avg = (RTNR_TempMAD_count_U3*1000)/total_pix;
		RTNR_MAD_count_V2_avg = (RTNR_TempMAD_count_V3*1000)/total_pix;

		RTNR_MAD_count_Y3_avg = (RTNR_TempMAD_count_Y4*1000)/total_pix;
		RTNR_MAD_count_U3_avg = (RTNR_TempMAD_count_U4*1000)/total_pix;
		RTNR_MAD_count_V3_avg = (RTNR_TempMAD_count_V4*1000)/total_pix;


	}
	else
	{	/* controlled by PQA input table*/

	RTNR_MAD_count_Y_avg = (RTNR_TempMAD_count_Y*1000)/total_pix;
	RTNR_MAD_count_U_avg = (RTNR_TempMAD_count_U*1000)/total_pix;
	RTNR_MAD_count_V_avg = (RTNR_TempMAD_count_V*1000)/total_pix;

	RTNR_MAD_count_Y2_avg = (RTNR_TempMAD_count_Y2*1000)/total_pix;
	RTNR_MAD_count_U2_avg = (RTNR_TempMAD_count_U2*1000)/total_pix;
	RTNR_MAD_count_V2_avg = (RTNR_TempMAD_count_V2*1000)/total_pix;

	RTNR_MAD_count_Y3_avg = (RTNR_TempMAD_count_Y3*1000)/total_pix;
	RTNR_MAD_count_U3_avg = (RTNR_TempMAD_count_U3*1000)/total_pix;
	RTNR_MAD_count_V3_avg = (RTNR_TempMAD_count_V3*1000)/total_pix;
	}


	SmartPic_clue->RTNR_MAD_count_Y_avg_ratio = RTNR_MAD_count_Y_avg;
	SmartPic_clue->RTNR_MAD_count_U_avg_ratio = RTNR_MAD_count_U_avg;
	SmartPic_clue->RTNR_MAD_count_V_avg_ratio = RTNR_MAD_count_V_avg;
	SmartPic_clue->RTNR_MAD_count_Y2_avg_ratio = RTNR_MAD_count_Y2_avg;
	SmartPic_clue->RTNR_MAD_count_U2_avg_ratio = RTNR_MAD_count_U2_avg;
	SmartPic_clue->RTNR_MAD_count_V2_avg_ratio = RTNR_MAD_count_V2_avg;
	SmartPic_clue->RTNR_MAD_count_Y3_avg_ratio = RTNR_MAD_count_Y3_avg;
	SmartPic_clue->RTNR_MAD_count_U3_avg_ratio = RTNR_MAD_count_U3_avg;
	SmartPic_clue->RTNR_MAD_count_V3_avg_ratio = RTNR_MAD_count_V3_avg;

	SmartPic_clue->RTNR_MAD_count_Y4_avg_ratio = (RTNR_TempMAD_count_Y4*1000)/total_pix;
	SmartPic_clue->RTNR_MAD_count_U4_avg_ratio = (RTNR_TempMAD_count_U4*1000)/total_pix;
	SmartPic_clue->RTNR_MAD_count_V4_avg_ratio = (RTNR_TempMAD_count_V4*1000)/total_pix;

	SmartPic_clue->noise_ratio = RTNR_MAD_count_Y2_avg;


	/*if(rtd_inl(0xb802e4f4) == 11){
		printk("MAD_1=%d=%d,=%d\n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_U_avg,RTNR_MAD_count_V_avg);
		printk("MAD_2=%d=%d,=%d\n",RTNR_MAD_count_Y2_avg,RTNR_MAD_count_U2_avg,RTNR_MAD_count_V2_avg);
		printk("MAD_3=%d=%d,=%d\n",RTNR_MAD_count_Y3_avg,RTNR_MAD_count_U3_avg,RTNR_MAD_count_V3_avg);
		printk("\n H=%d V=%d,pix=%d\n",IphActWid_H,IpvActLen_V,total_pix);
	}*/

	/*if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
	{
		printk("H=%d V=%d,pix=%d\n",IphActWid_H,IpvActLen_V,total_pix);
		printk("MAD_1=%d=%d,=%d\n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_U_avg,RTNR_MAD_count_V_avg);
		printk("MAD_2=%d=%d,=%d\n",RTNR_MAD_count_Y2_avg,RTNR_MAD_count_U2_avg,RTNR_MAD_count_V2_avg);
		printk("MAD_3=%d=%d,=%d\n",RTNR_MAD_count_Y3_avg,RTNR_MAD_count_U3_avg,RTNR_MAD_count_V3_avg);
	}*/
#if 1
	//for debug.
	//if(((printf_Flag&_BIT0)!=0))
	{
		//if(MA_print_count%print_delay==0)
		{
			ROSPrintf_MadHist("MAD_1=%d=%d,=%d\n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_U_avg,RTNR_MAD_count_V_avg);
			ROSPrintf_MadHist("MAD_2=%d=%d,=%d\n",RTNR_MAD_count_Y2_avg,RTNR_MAD_count_U2_avg,RTNR_MAD_count_V2_avg);
			ROSPrintf_MadHist("MAD_3=%d=%d,=%d\n",RTNR_MAD_count_Y3_avg,RTNR_MAD_count_U3_avg,RTNR_MAD_count_V3_avg);
			ROSPrintf_MadHist("MAD_4=%d=%d,=%d\n",SmartPic_clue->RTNR_MAD_count_Y4_avg_ratio,SmartPic_clue->RTNR_MAD_count_U4_avg_ratio,SmartPic_clue->RTNR_MAD_count_V4_avg_ratio);
			ROSPrintf_MadHist("H=%d V=%d,pix=%d\n",IphActWid_H,IpvActLen_V,total_pix);
		}
	}
#endif

}


void scalerVIP_HMCNR_statistic(void) // this fucntion is for progressive mode
{
	unsigned int total=0;
	unsigned char i=0;

	di_im_di_rtnr_hmcnr_RBUS di_im_di_rtnr_hmcnr_RBUS_reg;
	di_im_di_rtnr_hmcnr_statistic_1_RBUS di_im_di_rtnr_hmcnr_statistic_1_reg;
	di_im_di_rtnr_hmcnr_statistic_2_RBUS di_im_di_rtnr_hmcnr_statistic_2_reg;
	di_im_di_rtnr_hmcnr_statistic_3_RBUS di_im_di_rtnr_hmcnr_statistic_3_reg;
	di_im_di_rtnr_hmcnr_statistic_4_RBUS di_im_di_rtnr_hmcnr_statistic_4_reg;
	di_im_di_rtnr_hmcnr_statistic_5_RBUS di_im_di_rtnr_hmcnr_statistic_5_reg;
	di_im_di_rtnr_hmcnr_statistic_6_RBUS di_im_di_rtnr_hmcnr_statistic_6_reg;


	di_im_di_rtnr_hmcnr_RBUS_reg.regValue = rtd_inl(DI_IM_DI_RTNR_HMCNR_reg);

#if 0	//20150706 roger mark for compiler error
	di_im_di_rtnr_hmcnr_RBUS_reg.cp_temporal_hmcnr_search_range=5;
#endif
	rtd_outl(DI_IM_DI_RTNR_HMCNR_reg,di_im_di_rtnr_hmcnr_RBUS_reg.regValue);
	di_im_di_rtnr_hmcnr_statistic_1_reg.regValue = rtd_inl(DI_IM_DI_RTNR_HMCNR_STATISTIC_1_reg);
	di_im_di_rtnr_hmcnr_statistic_2_reg.regValue = rtd_inl(DI_IM_DI_RTNR_HMCNR_STATISTIC_2_reg);
	di_im_di_rtnr_hmcnr_statistic_3_reg.regValue = rtd_inl(DI_IM_DI_RTNR_HMCNR_STATISTIC_3_reg);
	di_im_di_rtnr_hmcnr_statistic_4_reg.regValue = rtd_inl(DI_IM_DI_RTNR_HMCNR_STATISTIC_4_reg);
	di_im_di_rtnr_hmcnr_statistic_5_reg.regValue = rtd_inl(DI_IM_DI_RTNR_HMCNR_STATISTIC_5_reg);
	di_im_di_rtnr_hmcnr_statistic_6_reg.regValue = rtd_inl(DI_IM_DI_RTNR_HMCNR_STATISTIC_6_reg);


	hmcnr_sttistic[0]=di_im_di_rtnr_hmcnr_statistic_6_reg.hmcnr_l5_sum;
	hmcnr_sttistic[1]=di_im_di_rtnr_hmcnr_statistic_5_reg.hmcnr_l4_sum;
	hmcnr_sttistic[2]=di_im_di_rtnr_hmcnr_statistic_5_reg.hmcnr_l3_sum;
	hmcnr_sttistic[3]=di_im_di_rtnr_hmcnr_statistic_4_reg.hmcnr_l2_sum;
	hmcnr_sttistic[4]=di_im_di_rtnr_hmcnr_statistic_4_reg.hmcnr_l1_sum;
	hmcnr_sttistic[5]=di_im_di_rtnr_hmcnr_statistic_3_reg.hmcnr_c0_sum;
	hmcnr_sttistic[6]=di_im_di_rtnr_hmcnr_statistic_3_reg.hmcnr_r1_sum;
	hmcnr_sttistic[7]=di_im_di_rtnr_hmcnr_statistic_2_reg.hmcnr_r2_sum;
	hmcnr_sttistic[8]=di_im_di_rtnr_hmcnr_statistic_2_reg.hmcnr_r3_sum;
	hmcnr_sttistic[9]=di_im_di_rtnr_hmcnr_statistic_1_reg.hmcnr_r4_sum;
	hmcnr_sttistic[10]=di_im_di_rtnr_hmcnr_statistic_1_reg.hmcnr_r5_sum;

	for(i=0;i<11;i++)
	{

		total+=hmcnr_sttistic[i];
	}

	if(total==0)
		return;
	center = (hmcnr_sttistic[5]*1000)/total;
	L1 = (hmcnr_sttistic[4]*1000)/total;
	R1 = (hmcnr_sttistic[6]*1000)/total;
	others= ((hmcnr_sttistic[6]+hmcnr_sttistic[5]+hmcnr_sttistic[4])*1000)/total;

	SmartPic_clue->motion_ratio = center;

}



unsigned char scalerVIP_ET_Y_MOTION(void)
{
	static unsigned int et_y_sum_1, et_y_count_1, et_y_sum_2, et_y_count_2;
	di_im_di_rtnr_sad_offset_RBUS im_di_rtnr_sad_offset_reg;
	di_im_di_rtnr_ediff_sobel_th_RBUS im_di_rtnr_ediff_sobel_th_reg;
	di_im_di_rtnr_level_bound_RBUS im_di_rtnr_level_bound_reg;
	di_im_di_rtnr_et_count_y_RBUS im_di_et_count_y_reg;
	di_im_di_rtnr_et_sum_y_RBUS im_di_et_sum_y_reg;
	di_im_di_rtnr_ediff_control_RBUS di_im_di_rtnr_ediff_control_RBUS_reg;
	unsigned char ret_value;

	unsigned int total_pixel;
	//unsigned short Active_Region[4]={0};
	unsigned short IphActWid_H=0,IpvActLen_V=0;

	    // offset table
	unsigned char motion_table[10][10] =
	{
		    {0, 1, 2, 3, 4, 5, 6, 7, 8, 9},
		    {1, 2, 3, 4, 5, 6, 7, 8, 9, 9},
		    {2, 3, 4, 5, 6, 7, 8, 9, 9, 9},
		    {3, 4, 5, 6, 7, 8, 9, 9, 9, 9},
		    {4, 5, 6, 7, 8, 9, 9, 9, 9, 9},
		    {5, 6, 7, 8, 9, 9, 9, 9, 9, 9},
		    {6, 7, 8, 9, 9, 9, 9, 9, 9, 9},
		    {7, 8, 9, 9, 9, 9, 9, 9, 9, 9},
		    {8, 9, 9, 9, 9, 9, 9, 9, 9, 9},
		    {9, 9, 9, 9, 9, 9, 9, 9, 9, 9},
	};

	unsigned char mation_x=0, mation_y=0;
	unsigned int motion_value_1=0, motion_value_2 = 0, motion_diff = 0;




	IphActWid_H=(SmartPic_clue->SCALER_DISP_INFO.IphActWid_H);
	IpvActLen_V=(SmartPic_clue->SCALER_DISP_INFO.IpvActLen_V);
	//drvif_color_activeregion_dragon(_CHANNEL1, &Active_Region[0]);
	total_pixel = IphActWid_H*IpvActLen_V;//Active_Region[1] * Active_Region[3];
	//unsigned short noise_ratio=0, motion_ratio=0, noise_th=0;

	im_di_et_count_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_COUNT_Y_reg);
	im_di_et_sum_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_Y_reg);

	im_di_rtnr_sad_offset_reg.regValue = rtd_inl(DI_IM_DI_RTNR_SAD_OFFSET_reg);
	im_di_rtnr_sad_offset_reg.cp_temporal_sad_offset_y = 0;
	rtd_outl(DI_IM_DI_RTNR_SAD_OFFSET_reg, im_di_rtnr_sad_offset_reg.regValue);

	im_di_rtnr_ediff_sobel_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_EDIFF_SOBEL_TH_reg);
	im_di_rtnr_ediff_sobel_th_reg.cp_temporal_sbl_thm_y = 10;
	im_di_rtnr_ediff_sobel_th_reg.cp_temporal_sbl_ths_y = 10;
	rtd_outl(DI_IM_DI_RTNR_EDIFF_SOBEL_TH_reg, im_di_rtnr_ediff_sobel_th_reg.regValue);

	im_di_rtnr_level_bound_reg.regValue = rtd_inl(DI_IM_DI_RTNR_LEVEL_BOUND_reg);
	im_di_rtnr_level_bound_reg.cp_temporal_nl_low_bnd_y = 0x00;
	im_di_rtnr_level_bound_reg.cp_temporal_nl_up_bnd_y = 0xff;
	rtd_outl(DI_IM_DI_RTNR_LEVEL_BOUND_reg, im_di_rtnr_level_bound_reg.regValue);

	di_im_di_rtnr_ediff_control_RBUS_reg.regValue = rtd_inl(DI_IM_DI_RTNR_EDIFF_CONTROL_reg);
	if(MA_print_count % 2 == 0)
	{
	    et_y_count_1 = im_di_et_count_y_reg.cp_temporal_same_et_cnt_y;
	    et_y_sum_1 = im_di_et_sum_y_reg.cp_temporal_same_et_sad_sum_y;
			total_motion_count = im_di_et_count_y_reg.cp_temporal_same_et_cnt_y;
	    di_im_di_rtnr_ediff_control_RBUS_reg.cp_temporal_num_match_l = 5;
	}
	else
	{
	    et_y_count_2 = im_di_et_count_y_reg.cp_temporal_same_et_cnt_y;
	    et_y_sum_2 = im_di_et_sum_y_reg.cp_temporal_same_et_sad_sum_y;
			noise_flat_motion_count = im_di_et_count_y_reg.cp_temporal_same_et_cnt_y;
	    di_im_di_rtnr_ediff_control_RBUS_reg.cp_temporal_num_match_l = 0;
	}
	rtd_outl(DI_IM_DI_RTNR_EDIFF_CONTROL_reg, di_im_di_rtnr_ediff_control_RBUS_reg.regValue);

#if 0
	noise_ratio = 1000-1000*et_y_count_1/(total_pixel+1);
	motion_ratio = 1000-1000*et_y_count_2/(total_pixel+1);
	edge_motion_count = motion_ratio;

	if(motion_ratio<10)
		noise_th=10;
	else
		noise_th = motion_ratio;

	noise_th = (noise_th*5);

	if(Which_Source==VIP_QUALITY_HDMI_720P||Which_Source==VIP_QUALITY_YPbPr_720P)
	{
		if(Sony_Radio_Caculator_flag==1)
		{
			Off_Correction1_Flag = 0;
		}
		else if(noise_ratio>=noise_th)
		{
			Off_Correction1_Flag = 1;
			Off_Correction1_Flag = 0;
		}
		else
		{
			Off_Correction1_Flag = 0;
		}
	}
	else
	{
		Off_Correction1_Flag = 0;
	}

	if(INR_log==1&&noise_meter_sony_log_flag)
	{
		ROSPrintf("et=%d,%d,%d,%d,%d,%d,%d\n",
			noise_ratio,motion_ratio,noise_th,Off_Correction1_Flag,edge_motion_count,Sony_Radio_Caculator_flag,Which_Source);
	}
	return 0;
#endif
#if 1
	motion_value_1 = (et_y_sum_1 / (et_y_count_1+1));
	total_motion_count_ave = motion_value_1;
	motion_value_2 = (et_y_sum_2 / (et_y_count_2+1));
	noise_flatl_motion_count_ave = motion_value_2;
	motion_diff = ABS(motion_value_1,motion_value_2);
	edge_motion_count_ave = motion_diff;
	edge_motion_count =  ABS(et_y_count_1,et_y_count_2);

	if(Scaler_InputSrcGetMainChType() == _SRC_CVBS)
	{
	    if(motion_value_1 <= 20)               //noise 
	            mation_x = 0;
	    else if(motion_value_1 <= 40)
	            mation_x = 1;
	    else if(motion_value_1 <= 60)
	            mation_x = 2;
	    else if(motion_value_1 <= 80)
	            mation_x = 3;
	    else if(motion_value_1 <= 100)
	            mation_x = 4;
	    else if(motion_value_1 <= 120)
	            mation_x = 5;
	    else if(motion_value_1 <= 140)
	            mation_x = 6;
	    else
	            mation_x = 7;

	    if(motion_diff <= 5)
	            mation_y = 0;
	    else if(motion_diff <= 10)
	            mation_y = 1;
	    else if(motion_diff <= 15)
	            mation_y = 2;
	    else if(motion_diff <= 20)
	            mation_y = 3;
	    else if(motion_diff <= 25)
	            mation_y = 4;
	    else if(motion_diff <= 30)
	            mation_y = 5;
	    else if(motion_diff <= 35)
	            mation_y = 6;
	    else
	            mation_y = 7;

	}
	else
	{
		if(motion_value_1 <= 35)			   //noise 
				mation_x = 0;
		else if(motion_value_1 <= 50)
				mation_x = 1;
		else if(motion_value_1 <= 65)
				mation_x = 2;
		else if(motion_value_1 <= 85)
				mation_x = 3;
		else if(motion_value_1 <= 105)
				mation_x = 4;
		else if(motion_value_1 <= 135)
				mation_x = 5;
		else if(motion_value_1 <= 175)
				mation_x = 6;
		else if(motion_value_1 <= 215)
				mation_x = 7;
		else if(motion_value_1 <= 260)
				mation_x = 8;
		else
				mation_x = 9;

		if(motion_diff <= 15)
				mation_y = 0;
		else if(motion_diff <= 25)
				mation_y = 1;
		else if(motion_diff <= 35)
				mation_y = 2;
		else if(motion_diff <= 50)
				mation_y = 3;
		else if(motion_diff <= 65)
				mation_y = 4;
		else if(motion_diff <= 80)
				mation_y = 5;
		else if(motion_diff <= 95)
				mation_y = 6;
		else if(motion_diff <= 115)
				mation_y = 7;
		else if(motion_diff <= 140)
				mation_y = 8;
		else
				mation_y = 9;

	}
	ret_value = motion_table[mation_y][mation_x];

#if 0
	if(INR_log==1&&noise_meter_sony_log_flag)
	{
	  ROSPrintf("et=%d,%d,%d,%d,\n",
		  total_motion_count_ave,noise_flatl_motion_count_ave,edge_motion_count_ave,edge_motion_count);
	}
#endif
	return motion_table[mation_y][mation_x];
#endif
}

unsigned short scalerVIP_ratio_inner_product_base(unsigned int *vector1, unsigned int *vector2, unsigned char length)
{

	unsigned int inner_product=0;
	unsigned char i;
	for(i=0;i<length;i++)
		inner_product += DCCsqrt_table[*(vector1+i)] * DCCsqrt_table[*(vector2+i)];
	return (inner_product/1000)>>10;// permillage = 1000;
}

unsigned short scalerVIP_ratio_inner_product_base_16(unsigned short *vector1, unsigned short *vector2, unsigned char length)
{

	unsigned int inner_product=0;
	unsigned char i;
	for(i=0;i<length;i++)
		inner_product += DCCsqrt_table[*(vector1+i)] * DCCsqrt_table[*(vector2+i)];
	return (inner_product/1000)>>10;// permillage = 1000;
}

unsigned short scalerVIP_ratio_inner_product(unsigned short *vector1, unsigned short *vector2, unsigned char length)
{
/*	unsigned int inner_product=0;
	unsigned char i;
	for(i=0;i<length;i++)
		inner_product += DCCsqrt_table[*(vector1+i)] * DCCsqrt_table[*(vector2+i)];
	return (inner_product/1000)>>10;// permillage = 1000;
*/
	unsigned int inner_product1=0;
	unsigned int inner_product2=0;
	unsigned char i;
	unsigned int inner_product3=0;
	unsigned int inner_product4=0;

	unsigned short even1[16];
	unsigned short even2[16];

	unsigned short odd1[17];
	unsigned short odd2[17];


	if ((!vector1)||(!vector2))
		return 0;

	if(length>32)
		length=32;

	for(i=0;i<length/2;i++)
	{
		even1[i]=( *(vector1+i*2)+ *(vector1+1+i*2));

		even2[i]=( *(vector2+i*2)+ *(vector2+1+i*2));

	//ROSPrintf("even2[%d]=%d,inner_product4=%d \n",inner_product3,inner_product4);


	}


	for(i=0;i<length/2;i++)
		inner_product1 += DCCsqrt_table[*(even1+i)] * DCCsqrt_table[*(even2+i)];

	//return (inner_product/1000)>>10;// permillage = 1000;


	for(i=0;i<length/2+1;i++)
	{
		if(i==0)
		{
			odd1[i]= *(vector1);
			odd2[i]=*(vector2);

		}
		else if(i==length/2)
		{
			odd1[i]= *(vector1+i*2-1);
			odd2[i]= *(vector2+i*2-1);

		}
		else
		{
			odd1[i]=( *(vector1+i*2-1)+ *(vector1+i*2));
			odd2[i]=( *(vector2+i*2-1)+ *(vector2+i*2));
		}
	}



/*
i=0,data1=0 ,data2=d
i=1,data1=135 ,data2=d
i=2,data1=2 ,data2=d
i=3,data1=134 ,data2=d
i=4,data1=135 ,data2=d
i=5,data1=1 ,data2=d
i=6,data1=134 ,data2=d
i=7,data1=135 ,data2=d
i=8,data1=1 ,data2=d
i=9,data1=133 ,data2=d
i=10,data1=1 ,data2=d
i=11,data1=1 ,data2=d
i=12,data1=0 ,data2=d
i=13,data1=1 ,data2=d
i=14,data1=92 ,data2=d
i=15,data1=2 ,data2=

//No.192 ColorBar
unsigned short DynamicOptimizeSystem_192_y[][32]=
{ //#0 cvbs ntsc , #1 cvbs pal  ,#2 hdmi_sd , #3 hdmi_hd
	{12, 44, 84, 13, 127, 0, 0, 1, 136, 0, 119, 0, 0, 1, 103, 0, 119, 0, 0, 1, 103, 0, 82, 0, 0, 0, 0, 0, 0, 44, 0, 0, },
	{0, 77, 5, 3, 132, 1, 1, 7, 127, 2, 133, 0, 1, 128, 6, 1, 134, 0, 1, 2, 131, 1, 0, 0, 1, 0, 0, 0, 1, 92, 0, 0, },
	//{0, 79, 4, 2, 133, 1, 1, 4, 129, 2, 133, 1, 1, 5, 130, 1, 133, 1, 0, 3, 132, 0, 0, 1, 0, 0, 0, 1, 0, 94, 0, 0, }


	{0, 0, 108, 2, 125, 1, 0, 8, 119, 2, 127, 1, 0, 127, 2, 2, 125, 1, 0, 127, 1, 0, 0, 0, 1, 0, 0, 1, 108, 0, 0, 0, }
};

*/

	for(i=0;i<length/2;i++)
	{
		inner_product2 += DCCsqrt_table[*(odd1+i)] * DCCsqrt_table[*(odd2+i)];

		//ROSPrintf("i=%d,data1=%d ,data2=%d \n",i,*(odd1+i),*(odd2+i));


	}
	inner_product3= (inner_product1/1000)>>10;
	inner_product4= (inner_product2/1000)>>10;


	//if(MA_print_count%40==0)
	//ROSPrintf("inner_product3=%d,inner_product4=%d \n",inner_product3,inner_product4);
	if(inner_product3 >inner_product4)
		return inner_product3;
	else
		return inner_product4;

	//return 1;

	//return (inner_product/1000)>>10;// permillage = 1000;




}


unsigned short scalerVIP_ratio_inner_product2(unsigned short *vector1, unsigned short *vector2, unsigned char length)
{
	unsigned int inner_product1=0;
	unsigned int inner_product2=0;
	unsigned char i;
	unsigned int inner_product3=0;
	unsigned int inner_product4=0;

	unsigned short even1[16];
	unsigned short even2[16];

	unsigned short odd1[17];
	unsigned short odd2[17];

	for(i=0;i<length/2;i++)
	{
		even1[i]=( *(vector1+i*2)+ *(vector1+1+i*2));

		even2[i]=( *(vector2+i*2)+ *(vector2+1+i*2));

	//ROSPrintf("even2[%d]=%d,inner_product4=%d \n",inner_product3,inner_product4);


	}


	for(i=0;i<length/2;i++)
		inner_product1 += DCCsqrt_table[*(even1+i)] * DCCsqrt_table[*(even2+i)];

	//return (inner_product/1000)>>10;// permillage = 1000;


	for(i=0;i<length/2+1;i++)
	{
		if(i==0)
		{
			odd1[i]= *(vector1);
			odd2[i]=*(vector2);

		}
		else if(i==length/2)
		{
			odd1[i]= *(vector1+i*2-1);
			odd2[i]= *(vector2+i*2-1);

		}
		else
		{
			odd1[i]=( *(vector1+i*2-1)+ *(vector1+i*2));
			odd2[i]=( *(vector2+i*2-1)+ *(vector2+i*2));
		}
	}



/*
i=0,data1=0 ,data2=d
i=1,data1=135 ,data2=d
i=2,data1=2 ,data2=d
i=3,data1=134 ,data2=d
i=4,data1=135 ,data2=d
i=5,data1=1 ,data2=d
i=6,data1=134 ,data2=d
i=7,data1=135 ,data2=d
i=8,data1=1 ,data2=d
i=9,data1=133 ,data2=d
i=10,data1=1 ,data2=d
i=11,data1=1 ,data2=d
i=12,data1=0 ,data2=d
i=13,data1=1 ,data2=d
i=14,data1=92 ,data2=d
i=15,data1=2 ,data2=

//No.192 ColorBar
unsigned short DynamicOptimizeSystem_192_y[][32]=
{ //#0 cvbs ntsc , #1 cvbs pal  ,#2 hdmi_sd , #3 hdmi_hd
	{12, 44, 84, 13, 127, 0, 0, 1, 136, 0, 119, 0, 0, 1, 103, 0, 119, 0, 0, 1, 103, 0, 82, 0, 0, 0, 0, 0, 0, 44, 0, 0, },
	{0, 77, 5, 3, 132, 1, 1, 7, 127, 2, 133, 0, 1, 128, 6, 1, 134, 0, 1, 2, 131, 1, 0, 0, 1, 0, 0, 0, 1, 92, 0, 0, },
	//{0, 79, 4, 2, 133, 1, 1, 4, 129, 2, 133, 1, 1, 5, 130, 1, 133, 1, 0, 3, 132, 0, 0, 1, 0, 0, 0, 1, 0, 94, 0, 0, }


	{0, 0, 108, 2, 125, 1, 0, 8, 119, 2, 127, 1, 0, 127, 2, 2, 125, 1, 0, 127, 1, 0, 0, 0, 1, 0, 0, 1, 108, 0, 0, 0, }
};

*/

	for(i=0;i<length/2;i++)
	{
		inner_product2 += DCCsqrt_table[*(odd1+i)] * DCCsqrt_table[*(odd2+i)];

		ROSPrintf("i=%d,data1=%d ,data2=%d \n",i,*(odd1+i),*(odd2+i));


	}
	inner_product3= (inner_product1/1000)>>10;
	inner_product4= (inner_product2/1000)>>10;


	//if(MA_print_count%40==0)
	//ROSPrintf("inner_product3=%d,inner_product4=%d \n",inner_product3,inner_product4);


	return 1;

	//return (inner_product/1000)>>10;// permillage = 1000;












}







unsigned short scalerVIP_ratio_difference(unsigned short *vector1, unsigned short *vector2, unsigned char length)
{
	unsigned int difference=0;
	unsigned char i;
	for(i=0;i<length;i++)
	{
		if(i == 0)
			difference += MIN((ABS(*(vector1+i), *(vector2+i))), (ABS(*(vector1+i), *(vector2+i+1))));
		else if(i == (length-1))
			difference += MIN((ABS(*(vector1+i), *(vector2+i))), (ABS(*(vector1+i), *(vector2+i-1))));
		else
			difference += MIN(MIN((ABS(*(vector1+i), *(vector2+i))), (ABS(*(vector1+i), *(vector2+i+1)))), (ABS(*(vector1+i), *(vector2+i-1))));
	}
	return difference;
}
#endif

#ifdef ISR_AMBILIGHT_ENABLE
void scalerVIP_Clip_Into_Range(unsigned char nBit,int * nData1 ,int * nData2,int * nData3)
{
	int nRange=1;
	int nDiff=0,nMax=0;
	nRange = nRange<<nBit ;
	nRange = nRange -1 ;

	//find Max.
	nMax=*nData1;
	if(*nData2 > nMax)
		nMax=*nData2;
	if(*nData3 > nMax)
		nMax=*nData3;

	//offset
	if(nMax>nRange)
	{
		nDiff=nMax-nRange;
		*nData1 = *nData1-nDiff;
		*nData2 = *nData2-nDiff;
		*nData3 = *nData3-nDiff;
	}
	// clip into Range
	*nData1 = (*nData1>nRange)? nRange:(*nData1<0)? 0:*nData1;
	*nData2 = (*nData2>nRange)? nRange:(*nData2<0)? 0:*nData2;
	*nData3 = (*nData3>nRange)? nRange:(*nData3<0)? 0:*nData3;

}

void scalerVIP_yuv2rgb_convert(void)
{
	unsigned short k11 = 1024, k13 = 1432, k22 = 352, k23 = 728, k32 = 1802; // mutiply by 1024
	int R,G,B;
	unsigned char i = 0;
	#if AMBI_DEBUG_TPV
	static unsigned char yuv2rgb_count = 0;
	yuv2rgb_count++;
	#endif
	unsigned short UV_Value=512;

	for(i=0;i<16;i++)
	{
		R = (INT32)(k11*Profile_Y_V[i] + k13*(Profile_V_V[i]-UV_Value));
		G = (INT32)(k11*Profile_Y_V[i] - k22*(Profile_U_V[i]-UV_Value) - k23*(Profile_V_V[i]-UV_Value));
		B = (INT32)(k11*Profile_Y_V[i] + k32*(Profile_U_V[i]-UV_Value));
		#if AMBI_DEBUG_TPV
		if((yuv2rgb_count % 60) == 0)
		{
		    ROSPrintf("\n [ambi_start] Profile_Y_V[%d]=%d, Profile_U_V[%d]=%d,Profile_V_V[%d]=%d",i,Profile_Y_V[i],i,Profile_U_V[i],i,Profile_V_V[i]);
			ROSPrintf("\n [ambi] R=%d, G=%d,B=%d",R,G,B);
		}
		#endif
		R = R>>10;
		G = G>>10;
		B = B>>10;
		#if AMBI_DEBUG_TPV
		if((yuv2rgb_count % 60) == 0)
		{
			ROSPrintf("\n [ambi] shift R=%d, G=%d,B=%d",R,G,B);
		}
		#endif

		// clip into 10 bit
		scalerVIP_Clip_Into_Range(10,&R,&G,&B);
		#if AMBI_DEBUG_TPV
		if((yuv2rgb_count % 60) == 0)
		{
			ROSPrintf("\n [ambi] 10 bit R=%d, G=%d,B=%d",R,G,B);
		}
		#endif
		Profile_R_V[i] = (unsigned short)R;
		Profile_G_V[i] = (unsigned short)G;
		Profile_B_V[i] = (unsigned short)B;
		R = (INT32)(k11*Profile_Y_H[i] + k13*(Profile_V_H[i]-UV_Value));
		G = (INT32)(k11*Profile_Y_H[i] - k22*(Profile_U_H[i]-UV_Value) - k23*(Profile_V_H[i]-UV_Value));
		B = (INT32)(k11*Profile_Y_H[i] + k32*(Profile_U_H[i]-UV_Value));
		#if AMBI_DEBUG_TPV
		if((yuv2rgb_count % 60) == 0)
		{
		    ROSPrintf("\n [ambi] Profile_Y_H[%d]=%d, Profile_U_H[%d]=%d,Profile_V_H[%d]=%d",i,Profile_Y_H[i],i,Profile_U_H[i],i,Profile_V_H[i]);
			ROSPrintf("\n [ambi] R=%d, G=%d,B=%d",R,G,B);
		}
		#endif
		R = R>>10;
		G = G>>10;
		B = B>>10;
		#if AMBI_DEBUG_TPV
		if((yuv2rgb_count % 60) == 0)
		{
			ROSPrintf("\n [ambi] shift R=%d, G=%d,B=%d",R,G,B);
		}
		#endif

		// clip into 10 bit
		scalerVIP_Clip_Into_Range(10,&R,&G,&B);
		#if AMBI_DEBUG_TPV
		if((yuv2rgb_count % 60) == 0)
		{
			ROSPrintf("\n [ambi] 10 bit R=%d, G=%d,B=%d",R,G,B);
		}
		#endif
		Profile_R_H[i] = R;
		Profile_G_H[i] = G;
	        Profile_B_H[i] = B;
	}
}
#endif

#if CB_flag
void scalerVIP_Identify_Pattern_forCB(void)
{
	unsigned short hue_ratio=0;
	unsigned short y_ratio=0;
	unsigned short hue_ratio2=0;
	unsigned short y_ratio2=0;
	//unsigned short hue_ratio3=0;
	//unsigned short y_ratio3=0;
	//unsigned short hue_ratio4=0;
	//unsigned short y_ratio4=0;
	//unsigned short hue_ratio5=0;
	//unsigned short y_ratio5=0;
	//unsigned short hue_ratio6=0;
	//unsigned short y_ratio6=0;


	unsigned char i;
	//sat_hist_ratio
//	unsigned int noise_status = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL);
	//unsigned int noise_relaible = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE);
	//unsigned int motion = rtd_inl(DI_IM_DI_SI_FILM_MOTION_reg);
	//unsigned char motionl_level = scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION);
	unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);
	static unsigned char pre_source=255;

	for(i=0;i<20;i++)//for_CB
	{
		ID_CB_NO[i]=0;
	}

	pre_source = cur_source;

	switch(cur_source)
	{
		case VIP_QUALITY_CVBS_NTSC:
		{
			//=======      TSB3_CH3   =======
			//TSB3_CH3
			y_ratio = scalerVIP_ratio_inner_product(CB_TSB3_CH3_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(CB_TSB3_CH3_hue1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("CB_TSB3_CH3_y1=%d,CB_TSB3_CH3_hue1=%d \n",y_ratio,hue_ratio);

			//TSB3_CH3 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(CB_TSB3_CH3_y1[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(CB_TSB3_CH3_hue1[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("CB_TSB3_CH3_y1 2=%d,CB_TSB3_CH3_hue1 2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=990 && hue_ratio >=990)||(y_ratio2 >=990 && hue_ratio2 >=990))
				ID_CB_NO[0]=1;
			else
				ID_CB_NO[0]=0;
//==============================================================================================//
			//TSB3_CH3
			y_ratio = scalerVIP_ratio_inner_product(CB_TSB3_CH3_y2[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(CB_TSB3_CH3_hue2[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("CB_TSB3_CH3_y2=%d,CB_TSB3_CH3_hue2=%d \n",y_ratio,hue_ratio);

			//TSB3_CH3 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(CB_TSB3_CH3_y2[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(CB_TSB3_CH3_hue2[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("CB_TSB3_CH3_y2 2=%d,CB_TSB3_CH3_hue2 2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=990 && hue_ratio >=990)||(y_ratio2 >=990 && hue_ratio2 >=990))
				ID_CB_NO[1]=1;
			else
				ID_CB_NO[1]=0;

			//TSB3_CH3
			y_ratio = scalerVIP_ratio_inner_product(CB_TSB3_CH3_y3[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(CB_TSB3_CH3_hue3[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("CB_TSB3_CH3_y3=%d,CB_TSB3_CH3_hue3=%d \n",y_ratio,hue_ratio);

			//TSB3_CH3 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(CB_TSB3_CH3_y3[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(CB_TSB3_CH3_hue3[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("CB_TSB3_CH3_y3 2=%d,CB_TSB3_CH3_hue3 2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=990 && hue_ratio >=990)||(y_ratio2 >=990 && hue_ratio2 >=990))
				ID_CB_NO[2]=1;
			else
				ID_CB_NO[2]=0;
			//========================

			//=======      SONY_CH84   =======
			//SONY_CH84
			y_ratio = scalerVIP_ratio_inner_product(CB_SONY_CH84_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(CB_SONY_CH84_hue1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("CB_SONY_CH84_y1=%d,CB_SONY_CH84_hue1=%d \n",y_ratio,hue_ratio);

			//SONY_CH84 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(CB_SONY_CH84_y1[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(CB_SONY_CH84_hue1[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("CB_SONY_CH84_y1 2=%d,CB_SONY_CH84_hue1 2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				ID_CB_NO[3]=1;
			else
				ID_CB_NO[3]=0;
//==============================================================================================//
			//SONY_CH84
			y_ratio = scalerVIP_ratio_inner_product(CB_SONY_CH84_y2[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(CB_SONY_CH84_hue2[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("CB_SONY_CH84_y2=%d,CB_SONY_CH84_hue2=%d \n",y_ratio,hue_ratio);

			//SONY_CH84 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(CB_SONY_CH84_y2[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(CB_SONY_CH84_hue2[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("CB_SONY_CH84_y2 2=%d,CB_SONY_CH84_hue2 2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				ID_CB_NO[4]=1;
			else
				ID_CB_NO[4]=0;

			//========================

			//=======     USB_Red_Flower_Bee   =======
			//USB_Red_Flower_Bee
			y_ratio = scalerVIP_ratio_inner_product(CB_USB_Red_Flower_Bee_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(CB_USB_Red_Flower_Bee_hue1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_5==TRUE))
				ROSPrintf("CB_USB_Red_Flower_Bee_y1=%d,CB_USB_Red_Flower_Bee_hue1=%d \n",y_ratio,hue_ratio);

			//USB_Red_Flower_Bee 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(CB_USB_Red_Flower_Bee_y1[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(CB_USB_Red_Flower_Bee_hue1[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_5==TRUE))
				ROSPrintf("CB_USB_Red_Flower_Bee_y1 2=%d,CB_USB_Red_Flower_Bee_hue1 2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				ID_CB_NO[5]=1;
			else
				ID_CB_NO[5]=0;
//==============================================================================================//
			//USB_Red_Flower_Bee
			y_ratio = scalerVIP_ratio_inner_product(CB_USB_Red_Flower_Bee_y2[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(CB_USB_Red_Flower_Bee_hue2[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_5==TRUE))
				ROSPrintf("CB_USB_Red_Flower_Bee_y2=%d,CB_USB_Red_Flower_Bee_hue2=%d \n",y_ratio,hue_ratio);

			//USB_Red_Flower_Bee 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(CB_USB_Red_Flower_Bee_y2[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(CB_USB_Red_Flower_Bee_hue2[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_5==TRUE))
				ROSPrintf("CB_USB_Red_Flower_Bee_y2 2=%d,CB_USB_Red_Flower_Bee_hue2 2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				ID_CB_NO[6]=1;
			else
				ID_CB_NO[6]=0;

			//========================

			break;

		}
		case VIP_QUALITY_CVBS_PAL:
		{

			break;
		}
		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_HDMI_576I:
		case VIP_QUALITY_HDMI_480P:
		case VIP_QUALITY_HDMI_576P:
		{


			break;
		}

		case VIP_QUALITY_HDMI_1080I:
		case VIP_QUALITY_HDMI_1080P:
		{


			break;
		}
		default:

			break;



	}

}

void scalerVIP_Set_Parameter_forCB(void)
{
	_RPC_system_setting_info* RPC_system_info_structure_table = NULL;
	RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if((system_info_structure_table == NULL))
	{
		if(MA_print_count%360==0)
			ROSPrintf("Share Memory PQ data ERROR, RPC_system_info = %x, \n",RPC_system_info_structure_table);
		return;
	}

	unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);
	static unsigned char pre_source =255;

    //=======================================   init rbus
	di_im_di_control_RBUS di_control_reg;
	color_sharp_dm_segpk_vpk2_RBUS dm_segpk_vpk2;

	//======================================      read register
	//di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg ); //rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
	dm_segpk_vpk2.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_VPK2_reg );

	//============================================   init old value
	static unsigned char ori_ma_controlmode=0;
	static unsigned char ori_vpk_lv=0;

	//========================================= record old value
	if(pre_source !=cur_source)
	{
		ori_ma_controlmode=di_control_reg.ma_controlmode;
		ori_vpk_lv=dm_segpk_vpk2.vpk_lv;
	}

	//==========================================
	pre_source = cur_source;

	switch(cur_source)
	{
		case VIP_QUALITY_CVBS_NTSC:
		if(!vd_pwr_ok)
			break;
       //============   TSB3_CH3  ===========
		if( (ID_CB_NO[0]==1) || (ID_CB_NO[1]==1) || (ID_CB_NO[2]==1) )
		{
			di_control_reg.ma_controlmode = 2;
			dm_segpk_vpk2.vpk_lv = 77;
		}
		//else
		else if( DynamicOptimizeSystem[139] ==0  )
		{
			di_control_reg.ma_controlmode =ori_ma_controlmode;
			dm_segpk_vpk2.vpk_lv =ori_vpk_lv;

		}
		rtd_outl(COLOR_SHARP_DM_SEGPK_VPK2_reg, dm_segpk_vpk2.regValue);
		//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19

		//==================================================

		//============   USB_Red_Flower_Bee  ===========
        if( (ID_CB_NO[5]==1) || (ID_CB_NO[6]==1) )
        scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_CB_5_6);

		//==================================

		break;
		default:

			break;
	}

}
#endif

void scalerVIP_Identify_Pattern_forLG_K2L(void)
{
	//unsigned short hue_ratio=0;
	//unsigned short y_ratio=0;

	unsigned char i;
	unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);
	static unsigned char pre_source=255;

	for(i=0;i<255;i++)//for_LG_demo
	{
		if(i!=123)
		DynamicOptimizeSystem[i]=0;
	}

	pre_source = cur_source;

	switch(cur_source)
	{
		case VIP_QUALITY_TV_NTSC:
		{
//==============================================================================================//
		/*	//RF NTSC flower identify, roger RF color bar issue
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_179_y[0], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_179_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.RF_flower==TRUE))
				ROSPrintf("RF_flower_y=%d,RF_flower_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=990 && hue_ratio >=990)
				DynamicOptimizeSystem[179]=1;
			else
				DynamicOptimizeSystem[179]=0;
		*/ //rord mark 2015/0827
//==============================================================================================//



		}

		default:

			break;
	}

}


void scalerVIP_Set_Parameter_forLG_K2L(void)
{
	_RPC_system_setting_info* RPC_system_info_structure_table = NULL;

	unsigned char cur_source=0;
	RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if((RPC_system_info_structure_table == NULL))
	{
		if(MA_print_count%360==0)
			ROSPrintf("Share Memory PQ data ERROR, system_info = %p, \n",RPC_system_info_structure_table);
		return;
	}
	cur_source=(RPC_system_info_structure_table->VIP_source);
}


/*#ifdef LG_Demo_flag*/
void scalerVIP_Identify_Pattern_forLGM2(void)
{
	unsigned short hue_ratio=0;
	unsigned short y_ratio=0;
	unsigned short hue_ratio2=0;
	unsigned short y_ratio2=0;
	unsigned short hue_ratio3=0;
	unsigned short y_ratio3=0;
	unsigned short hue_ratio4=0;
	unsigned short y_ratio4=0;
	unsigned short hue_ratio5=0;
	unsigned short y_ratio5=0;
	unsigned short hue_ratio6=0;
	unsigned short y_ratio6=0;
	//unsigned short hue_ratio7=0;
	//unsigned short y_ratio7=0;
	//unsigned short hue_ratio8=0;
	//unsigned short y_ratio8=0;
	//unsigned short hue_ratio9=0;
	//unsigned short y_ratio9=0;


	unsigned char i;
	//sat_hist_ratio
//	unsigned int noise_status = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL);
//	unsigned int noise_relaible = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE);
	unsigned int motion = rtd_inl(DI_IM_DI_SI_FILM_MOTION_reg);
	unsigned char motionl_level = scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION);
	unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);
	static unsigned char pre_source=255;
	unsigned char NTSC_IRE00_OSD_Idx=0,NTSC_IRE75_OSD_Idx=1;
	unsigned char SD_OSD_Idx=3,HD_OSD_Idx=4;

//ROSPrintf("\n motion %d ,motionl_level=%d \n",motion,motionl_level);
	for(i=0;i<255;i++)//for_LG_demo
	{
		if(i!=123)
		DynamicOptimizeSystem[i]=0;
	}

	pre_source = cur_source;
	//ROSPrintf("\n black=%d \n",system_info_structure_table->OSD_Info.OSD_Film_Mode);
	switch(cur_source)
	{
		//===============
		case VIP_QUALITY_TV_NTSC:
		{
		#if 0
//==============================================================================================//
			#if 0
			//RF NTSC flower identify, roger RF color bar issue
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_179_y[0], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_179_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.RF_flower==TRUE))
				ROSPrintf("RF_flower_y=%d,RF_flower_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=990 && hue_ratio >=990)
				DynamicOptimizeSystem[179]=1;
			else
				DynamicOptimizeSystem[179]=0;
			#endif
//==============================================================================================//
			//RF NTSC US-14
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_160_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_160_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2= scalerVIP_ratio_inner_product(DynamicOptimizeSystem_160_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_160_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			main_display_control_rsv_RBUS main_display_control_rsv_reg;
			main_display_control_rsv_reg.regValue = rtd_inl(PPOVERLAY_Main_Display_Control_RSV_reg);
			vdpq_dma_ctrl4_RBUS vdpq_dma_ctrl4_reg;
			vdpq_dma_ctrl4_reg.regValue = VDPQ_rtd_inl(VDPQ_DMA_CTRL4_reg);
			static unsigned int cnt0 = 0;

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf("motion %d ,motionl_level=%d \n",motion,motionl_level);
				ROSPrintf("RTNR_MAD_count_Y_sum_avg=%d \n",RTNR_MAD_count_Y_sum_avg);
				ROSPrintf("dma_3d_on_off=%d \n",vdpq_dma_ctrl4_reg.dma_3d_on_off);
				ROSPrintf("m_force_bg=%d \n", main_display_control_rsv_reg.m_force_bg);
				ROSPrintf("cnt0=%d \n", cnt0);
			}


			if( main_display_control_rsv_reg.m_force_bg == 0){
				cnt0++;
			}
			else
			{
				cnt0=0;
			}

			if(cnt0 <= 800) {
				if((y_ratio >=950)||(y_ratio2 >=950)||(((vdpq_dma_ctrl4_reg.dma_3d_on_off==0)||(cnt0<=10))&&((y_ratio >=920)||(y_ratio2 >=920)))) {
					DynamicOptimizeSystem[160]=1;
				} else {
					DynamicOptimizeSystem[160]=0;
				}
			} else {
				if((y_ratio >=950 && hue_ratio >=950)||(y_ratio2 >=950 && hue_ratio2 >=950))
					DynamicOptimizeSystem[160]=1;
				else
					DynamicOptimizeSystem[160]=0;
			}

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf("DynamicOptimizeSystem[160]=%d, TV NTSC US-14 %d,%d,%d,%d \n", DynamicOptimizeSystem[160],y_ratio,hue_ratio,y_ratio2,hue_ratio2);
			}


//==============================================================================================//
			//RF NTSC US-63			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_161_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_161_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_161_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_161_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
            // for All-Direction Zoom
            hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_161_hue_2[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
            hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_161_hue_2[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			if(cnt0 <= 200) {
				if((y_ratio >=950)||(y_ratio2 >=950)||(((vdpq_dma_ctrl4_reg.dma_3d_on_off==0)||(cnt0<=10))&&((y_ratio >=920)||(y_ratio2 >=920)))) {
					DynamicOptimizeSystem[161]=1;
				} else {
					DynamicOptimizeSystem[161]=0;
				}
			} else {
				if((y_ratio >=950 && ((hue_ratio >=950)||(hue_ratio3 >=950)))||(y_ratio2 >=950 && ((hue_ratio2 >=950)||(hue_ratio4 >=950))))
					DynamicOptimizeSystem[161]=1;
                else
                    DynamicOptimizeSystem[161]=0;
			}

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem[161]=%d, TV NTSC US-63 %d,%d,%d,%d,%d,%d\n", DynamicOptimizeSystem[161],y_ratio,hue_ratio,y_ratio2,hue_ratio2,hue_ratio3,hue_ratio4);

//==============================================================================================//
			//RF NTSC US-02
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_162_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_162_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_162_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_162_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
            // for All-Direction Zoom
            hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_162_hue_2[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
            hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_162_hue_2[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			//Gumi MN02
			y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_Gumi_NM02_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_Gumi_NM02_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			#if 0
				if((y_ratio >=950)||(y_ratio2 >=950)) {
					DynamicOptimizeSystem[162]=1;
				} else {
					DynamicOptimizeSystem[162]=0;
				}
			#else
			if(cnt0 <= 200) {
				if((y_ratio >=950)||(y_ratio2 >=950)||(((vdpq_dma_ctrl4_reg.dma_3d_on_off==0)||(cnt0<=10))&&((y_ratio >=920)||(y_ratio2 >=920))) || (y_ratio5 >=960 && hue_ratio5 >=960)) {
					DynamicOptimizeSystem[162]=1;
				} else {
					DynamicOptimizeSystem[162]=0;
				}
			} else {
				if((y_ratio >=950 && ((hue_ratio >=950)||(hue_ratio3 >=950)) )||(y_ratio2 >=950 && ((hue_ratio2 >=950)||(hue_ratio4 >=950)))||(y_ratio5 >=960 && hue_ratio5 >=960))
					DynamicOptimizeSystem[162]=1;
				else{

					DynamicOptimizeSystem[162]=0;
			}
			}
			#endif

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem[162]=%d, TV NTSC US-02 %d,%d,%d,%d,%d,%d\n", DynamicOptimizeSystem[162],y_ratio,hue_ratio,y_ratio2,hue_ratio2,hue_ratio3,hue_ratio4);

//==============================================================================================//
			//RF NTSC US-04
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_163_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_163_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_163_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_163_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			#if 0
				if((y_ratio >=950)||(y_ratio2 >=950)) {
					DynamicOptimizeSystem[163]=1;
				} else {
					DynamicOptimizeSystem[163]=0;
				}

			#else
			if(cnt0 <= 200) {
				if((y_ratio >=950)||(y_ratio2 >=950)||(((vdpq_dma_ctrl4_reg.dma_3d_on_off==0)||(cnt0<=10))&&((y_ratio >=920)||(y_ratio2 >=920)))) {
					DynamicOptimizeSystem[163]=1;
				} else {
					DynamicOptimizeSystem[163]=0;
				}
			} else {
				if((y_ratio >=950 && hue_ratio >=950)||(y_ratio2 >=950 && hue_ratio2 >=950))
					DynamicOptimizeSystem[163]=1;
				else
					DynamicOptimizeSystem[163]=0;
			}
			#endif

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf("DynamicOptimizeSystem[163]=%d, TV NTSC US-04 %d,%d,%d,%d\n", DynamicOptimizeSystem[163],y_ratio,hue_ratio,y_ratio2,hue_ratio2);
			}
//==============================================================================================//
			//RF NTSC US-13
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_164_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_164_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_164_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_164_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			//RF NTSC US-4CH
			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_Gumi_US_4CH_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_Gumi_US_4CH_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			//RF NTSC US-14CH
			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_Gumi_US_14CH_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_Gumi_US_14CH_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			if(cnt0 <= 200) {
				if((y_ratio >=950)||(y_ratio2 >=950)||(((vdpq_dma_ctrl4_reg.dma_3d_on_off==0)||(cnt0<=10))&&((y_ratio >=920)||(y_ratio2 >=920)))||(y_ratio3 >=960)||(y_ratio4 >=960)) {
					DynamicOptimizeSystem[164]=1;
				} else {
					DynamicOptimizeSystem[164]=0;
				}
			} else {
				if((y_ratio >=950 && hue_ratio >=950)||(y_ratio2 >=950 && hue_ratio2 >=950)||(y_ratio3 >=960 && hue_ratio3 >=960)||(y_ratio4 >=960 && hue_ratio4 >=960))
					DynamicOptimizeSystem[164]=1;
				else {
					if(DynamicOptimizeSystem[164]==1 && ((y_ratio >=950 && hue_ratio >=950)||(y_ratio2 >=950 && hue_ratio2 >=950)||(y_ratio3 >=950 && hue_ratio3 >=950)||(y_ratio4 >=950 && hue_ratio4 >=950)))
					DynamicOptimizeSystem[164]=1;
				else
					DynamicOptimizeSystem[164]=0;
			}
			}
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf("DynamicOptimizeSystem[164]=%d, TV NTSC US-13 %d,%d,%d,%d,%d,%d\n", DynamicOptimizeSystem[164],y_ratio,hue_ratio,y_ratio2,hue_ratio2,y_ratio3,hue_ratio3,y_ratio4,hue_ratio4);
			}
//==============================================================================================//
			//RF NTSC US-C
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_165_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_165_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_165_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_165_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			if(cnt0 <= 200) {
				if((y_ratio >=950)||(y_ratio2 >=950)||(((vdpq_dma_ctrl4_reg.dma_3d_on_off==0)||(cnt0<=10))&&((y_ratio >=920)||(y_ratio2 >=920)))) {
					DynamicOptimizeSystem[165]=1;
				} else {
					DynamicOptimizeSystem[165]=0;
				}
			} else {
				if((y_ratio >=950 && hue_ratio >=950)||(y_ratio2 >=950 && hue_ratio2 >=950))
					DynamicOptimizeSystem[165]=1;
				else
					DynamicOptimizeSystem[165]=0;
			}
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf("DynamicOptimizeSystem[165]=%d, TV NTSC US-C %d,%d,%d,%d\n", DynamicOptimizeSystem[165],y_ratio,hue_ratio,y_ratio2,hue_ratio2);
			}
//==============================================================================================//
	#endif
			break;
		}
		case VIP_QUALITY_CVBS_NTSC:
		{

			//RGB2YUV_BLACK_LEVEL_UNDEFINE = 0,
			//RGB2YUV_BLACK_LEVEL_LOW,
			//RGB2YUV_BLACK_LEVEL_HIGH,
			//RGB2YUV_BLACK_LEVEL_AUTO,
			if(system_info_structure_table->OSD_Info.OSD_Film_Mode==1)//
			{
				NTSC_IRE00_OSD_Idx = NTSC_IRE00_LOW; //osd black level =low
				NTSC_IRE75_OSD_Idx = NTSC_IRE75_LOW;
			}
			else
			{
				NTSC_IRE00_OSD_Idx = NTSC_IRE00_HIGH; //osd black level !=low
				NTSC_IRE75_OSD_Idx = NTSC_IRE75_HIGH;
			}
			//ROSPrintf("[NTSC]  \n IRE00 %d ,IRE75  %d \n",NTSC_IRE00_OSD_Idx,NTSC_IRE75_OSD_Idx);



			//NO.001 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_001_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_001_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_001_y=%d,DynamicOptimizeSystem_001_hue=%d \n",y_ratio,hue_ratio);

			//NO.001 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_001_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_001_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("[NTSC] lg_No_001_y2=%d,lg_No_001_hue2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[1]=1;
			else
				DynamicOptimizeSystem[1]=0;



//==============================================================================================//

			//NO.002 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_002_y=%d,DynamicOptimizeSystem_002_hue=%d \n",y_ratio,hue_ratio);

			//NO.002 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("[NTSC] lg_No_002_y2=%d,lg_No_002_hue2=%d\n",y_ratio2,hue_ratio2);

			if(((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))&&(motionl_level>1))
				DynamicOptimizeSystem[2]=1;
			else
				DynamicOptimizeSystem[2]=0;
//==============================================================================================//

			//NO.004 identify 0IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_004_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_004_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_004_y=%d,DynamicOptimizeSystem_004_hue=%d \n",y_ratio,hue_ratio);

			//NO.004 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_004_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_004_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("[NTSC] lg_No_004_y2=%d,lg_No_004_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[4]=1;
			else
				DynamicOptimizeSystem[4]=0;

//==============================================================================================//

			//NO.005 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_005_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_005_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_5==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_005_y=%d,DynamicOptimizeSystem_005_hue=%d \n",y_ratio,hue_ratio);

			//NO.005 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_005_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_005_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_5==TRUE))
				ROSPrintf("[NTSC] lg_No_005_y2=%d,lg_No_005_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[5]=1;
			else
				DynamicOptimizeSystem[5]=0;

//==============================================================================================//

			//NO.007 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_007_y=%d,DynamicOptimizeSystem_007_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_y2[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_hue2[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_007_y2=%d,DynamicOptimizeSystem_007_hue2=%d \n",y_ratio2,hue_ratio2);

			//NO.007 identify 7.5 IRE
			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("[NTSC] lg_No_007_y3=%d,lg_No_007_hue3=%d \n",y_ratio3,hue_ratio3);

			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_y2[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_hue2[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("[NTSC] lg_No_007_y4=%d,lg_No_007_hue4=%d \n",y_ratio4,hue_ratio4);

			if((((y_ratio >=970 && hue_ratio >=970)||(y_ratio2 >=970 && hue_ratio2 >=970))||
				((y_ratio3 >=980 && hue_ratio3 >=980)||(y_ratio4 >=980 && hue_ratio4 >=980)))&&
				( sat_ratio_mean_value<120) &&motionl_level>1)
			{
				DynamicOptimizeSystem[7]=1;
			}
			else
			{
				DynamicOptimizeSystem[7]=0;
			}

//==============================================================================================//

			//NO.011 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_011_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_011_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_011_y=%d,DynamicOptimizeSystem_011_hue=%d \n",y_ratio,hue_ratio);

			//NO.011 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_011_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_011_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("[NTSC] lg_No_011_y2=%d,lg_No_011_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[11]=1;
			else
				DynamicOptimizeSystem[11]=0;

//==============================================================================================//

			//NO.012 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_012_y=%d,DynamicOptimizeSystem_012_hue=%d \n",y_ratio,hue_ratio);

			//NO.012 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("[NTSC] lg_No_012_y2=%d,lg_No_012_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[12]=1;
			else
				DynamicOptimizeSystem[12]=0;

//==============================================================================================//

			//NO.023 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_023_y=%d,DynamicOptimizeSystem_023_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y2[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue2[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_023_y2=%d,DynamicOptimizeSystem_023_hue2=%d \n",y_ratio2,hue_ratio2);

			//NO.023 identify  7.5 IRE
			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("[NTSC] lg_No_023_y3=%d,lg_No_023_hue3=%d \n",y_ratio3,hue_ratio3);

			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y2[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio4= scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue2[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("[NTSC] lg_No_023_y4=%d,lg_No_023_hue4=%d \n",y_ratio4,hue_ratio4);



			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980)||
				(y_ratio3 >=980 && hue_ratio3 >=980)||(y_ratio4 >=980 && hue_ratio4 >=980))
				DynamicOptimizeSystem[23]=1;
			else
			{
				DynamicOptimizeSystem[23]=0;
			}

//==============================================================================================//

			//NO.024 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_024_y=%d,DynamicOptimizeSystem_024_hue=%d \n",y_ratio,hue_ratio);

			//NO.024 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("[NTSC] lg_No_024_y2=%d,lg_No_024_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||
				(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[24]=1;
			else
				DynamicOptimizeSystem[24]=0;

//==============================================================================================//

			//NO.028 section 2 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_028_y=%d,DynamicOptimizeSystem_028_hue=%d \n",y_ratio,hue_ratio);

			//NO.028 section 2 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_028_y=%d,DynamicOptimizeSystem_028_hue=%d \n",y_ratio2,hue_ratio2);

			//NO.028 section 1 identify 0 IRE
			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_y2[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_hue2[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_028_y2=%d,DynamicOptimizeSystem_028_hue2=%d \n",y_ratio3,hue_ratio3);

			//NO.028 section 1 identify 7.5 IRE
			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_y2[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_hue2[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_028_y2=%d,DynamicOptimizeSystem_028_hue2=%d \n",y_ratio4,hue_ratio4);


			if( (y_ratio >=980 && hue_ratio >=980) || (y_ratio2 >=980 && hue_ratio2 >=980) )
				DynamicOptimizeSystem[28]=1; // section 2 hit
			else if( (y_ratio3 >=980 && hue_ratio3 >=980) || (y_ratio4 >=980 && hue_ratio4 >=980) )
				DynamicOptimizeSystem[28]=2; // section 1 hit
			else
				DynamicOptimizeSystem[28]=0;


//==============================================================================================//
/*
			//NO.032 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_032_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_32==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_032_y=%d \n",y_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_032_y2[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_32==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_032_y2=%d \n",y_ratio2);

			//NO.032 identify 7.5 IRE
			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_032_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_32==TRUE))
				ROSPrintf("[NTSC] lg_No_032_y3=%d \n",y_ratio3);

			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_032_y2[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_32==TRUE))
				ROSPrintf("[NTSC] lg_No_032_y4=%d \n",y_ratio4);


			if((((y_ratio >=980)||(y_ratio2 >=980))||((y_ratio3 >=980)||(y_ratio4 >=980)))&&
				(sat_ratio_mean_value <=35)&&(motion>100))
				DynamicOptimizeSystem[32]=1;
			else
				DynamicOptimizeSystem[32]=0;
*/
//==============================================================================================//

			//NO.035 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_035_y=%d \n",y_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y2[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_035_y2=%d \n",y_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y3[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_035_y3=%d \n",y_ratio3);

			//NO.035 identify 7.5 IRE
			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[NTSC] lg_No_035_y4=%d \n",y_ratio4);

			y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y2[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[NTSC] lg_No_035_y5=%d \n",y_ratio5);

			y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y3[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[NTSC] lg_No_035_y6=%d \n",y_ratio6);


			if((((y_ratio >=970)||(y_ratio2 >=970)||(y_ratio3 >=970))||
				((y_ratio4 >=980)||(y_ratio5 >=980)||(y_ratio6 >=980)))&&(sat_ratio_mean_value <=35))
				DynamicOptimizeSystem[35]=1;
			else
				DynamicOptimizeSystem[35]=0;

//==============================================================================================//

  			//NO.044 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_044_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_044_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_044_y=%d,DynamicOptimizeSystem_044_hue=%d \n",y_ratio,hue_ratio);

			//NO.024 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_044_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_044_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("[NTSC] lg_No_044_y2=%d,lg_No_044_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=945 && hue_ratio >=980)||
				(y_ratio2 >=945 && hue_ratio2 >=980))
				DynamicOptimizeSystem[44]=1;
			else
				DynamicOptimizeSystem[44]=0;

//==============================================================================================//
/*
			//NO.047 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_y[0], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_47==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_047_y=%d,DynamicOptimizeSystem_047_hue=%d \n",y_ratio,hue_ratio);
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_y2[0], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_47==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_047_y2=%d \n",y_ratio2);

			//NO.047 identify 7.5 IRE
			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_y[1], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_47==TRUE))
				ROSPrintf("[NTSC] lg_No_047_y3=%d,lg_No_047_hue3=%d \n",y_ratio3,hue_ratio3);

			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_y2[1], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_47==TRUE))
				ROSPrintf("[NTSC] lg_No_047_y4=%d  \n",y_ratio4);


			//if(((y_ratio >=970 && hue_ratio >=980)||(y_ratio2 >=970 && hue_ratio >=980))||
			//	((y_ratio3 >=970 && hue_ratio2 >=980)||(y_ratio4 >=970 && hue_ratio2 >=980)))
			//	DynamicOptimizeSystem[47]=1;
			//else
			//	DynamicOptimizeSystem[47]=0;
*/

//==============================================================================================//
			//NO.63 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_063_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_063_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_063_y=%d,DynamicOptimizeSystem_063_hue=%d \n",y_ratio,hue_ratio);

			//NO.63 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_063_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_063_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[NTSC] lg_No_063_y2=%d,lg_No_063_hue2=%d \n",y_ratio2,hue_ratio2);

			if(((y_ratio >=980 && hue_ratio >=980)||
				(y_ratio2 >=980 && hue_ratio2 >=980)) &&
				motionl_level<10 && scalerVIP_DI_MiddleWare_GetStatus(STATUS_HIGHFREQUENCY_LEVEL)<10 )
			{
				DynamicOptimizeSystem[63]=1;
			}
			else
			{
				DynamicOptimizeSystem[63]=0;
			}

//==============================================================================================//
			//NO.075 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_075_y=%d,DynamicOptimizeSystem_075_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_y2[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_hue2[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_075_y=%d,DynamicOptimizeSystem_075_hue=%d \n",y_ratio2,hue_ratio2);

			//NO.075 identify 7.5 IRE
			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_075_y2=%d,DynamicOptimizeSystem_075_hue2=%d \n",y_ratio3,hue_ratio3);

			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_y2[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_hue2[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_075_y=%d,DynamicOptimizeSystem_075_hue=%d \n",y_ratio4,hue_ratio4);


			if((y_ratio  >=980 && hue_ratio  >=980)||(y_ratio2 >=980 && hue_ratio2 >=980)||
				(y_ratio3 >=980 && hue_ratio3 >=980)||(y_ratio4 >=980 && hue_ratio4 >=980))
				DynamicOptimizeSystem[75]=1;
			else
				DynamicOptimizeSystem[75]=0;
//==============================================================================================//


			//NO.107 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_107_y=%d,DynamicOptimizeSystem_107_hue=%d \n",y_ratio,hue_ratio);

			//NO.107 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[NTSC] lg_No_107_y2=%d,lg_No_107_hue2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[107]=1;
			else
				DynamicOptimizeSystem[107]=0;

//==============================================================================================//

			//NO.123 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_123_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_123_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_123==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_123_y=%d,DynamicOptimizeSystem_123_hue=%d \n",y_ratio,hue_ratio);

			//NO.123 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_123_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_123_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_123==TRUE))
				ROSPrintf("[NTSC] lg_No_123_y2=%d,lg_No_123_hue2=%d \n",y_ratio2,hue_ratio2);



			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[123]=1;
			else
			{
//				if(SmartPic_clue->SceneChange_NR)
				DynamicOptimizeSystem[123]=0;
			}

			//ROSPrintf("[NTSC] SceneChange=%d \n",SmartPic_clue->SceneChange_NR);

//==============================================================================================//
#if 0 			//NO.132 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_132==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_132_y=%d,DynamicOptimizeSystem_132_hue=%d \n",y_ratio,hue_ratio);

			//NO.132 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_132==TRUE))
				ROSPrintf("[NTSC] lg_No_132_y2=%d,lg_No_132_hue2=%d \n",y_ratio2,hue_ratio2);


			//if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
			//	DynamicOptimizeSystem[132]=1;
			//else
			//	DynamicOptimizeSystem[132]=0;
#endif
//==============================================================================================//

			//NO.133 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_133_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_133_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_133_y=%d,DynamicOptimizeSystem_133_hue=%d \n",y_ratio,hue_ratio);

			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_133_hue2[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_133_y=%d,lg_No_133_hue3=%d \n",y_ratio,hue_ratio3);

			//NO.133 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_133_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_133_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[NTSC] lg_No_133_y2=%d,DynamicOptimizeSystem_133_hue2=%d \n",y_ratio2,hue_ratio2);

			if(((y_ratio >=980 && hue_ratio >=960)||(y_ratio >=980 && hue_ratio3 >=960)||(y_ratio2 >=973 && hue_ratio2 >=973))&&(sat_ratio_mean_value<=35))
				DynamicOptimizeSystem[133]=1;
			else
				DynamicOptimizeSystem[133]=0;

//==============================================================================================//

			//NO.134 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_134_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_134_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_134_y=%d,DynamicOptimizeSystem_134_hue=%d \n",y_ratio,hue_ratio);

			//NO.134 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_134_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_134_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[NTSC] lg_No_134_y2=%d,lg_No_134_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[134]=1;
			else
				DynamicOptimizeSystem[134]=0;

//==============================================================================================//

			//NO.135 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_135_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_135_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_135_y=%d,DynamicOptimizeSystem_135_hue=%d \n",y_ratio,hue_ratio);

			//NO.135 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_135_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_135_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[NTSC] lg_No_135_y2=%d,lg_No_135_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[135]=1;
			else
				DynamicOptimizeSystem[135]=0;

//==============================================================================================//

			//NO.139 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_139_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_139==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_139_y=%d,sat_ratio_mean_value=%d \n",y_ratio,sat_ratio_mean_value);

			//NO.139 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_139_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_139==TRUE))
				ROSPrintf("[NTSC] lg_No_139_y2=%d,sat_ratio_mean_value=%d \n",y_ratio,sat_ratio_mean_value);

			//NO.139 identify//for_LG_demo
			//y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_139_y[2], &Y_hist_ratio[0], 32);
			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_139==TRUE))
			//	ROSPrintf("[NTSC] DynamicOptimizeSystem_139_y=%d,sat_ratio_mean_value=%d \n",y_ratio,sat_ratio_mean_value);

			if((y_ratio >=970 || y_ratio2 >=980)&& sat_ratio_mean_value<=40)
				DynamicOptimizeSystem[139]=1;
			else
				DynamicOptimizeSystem[139]=0;

//==============================================================================================//

			//NO.147,148,149,150 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_147_y=%d,DynamicOptimizeSystem_147_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y2[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue2[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_147_y2=%d,DynamicOptimizeSystem_147_hue2=%d \n",y_ratio2,hue_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y3[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue3[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_147_y3=%d,DynamicOptimizeSystem_147_hue3=%d \n",y_ratio3,hue_ratio3);

			//NO.147,148,149,150 identify 7.5 IRE
			y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[NTSC] lg_No_147_y4=%d,lg_No_147_hue4=%d \n",y_ratio4,hue_ratio4);

			y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y2[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[NTSC] lg_No_147_y5=%d,lg_No_147_hue5=%d \n",y_ratio5,hue_ratio5);

			y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y3[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue3[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[NTSC] lg_No_147_y6=%d,lg_No_147_hue6=%d \n",y_ratio6,hue_ratio6);

			if((y_ratio >=980&&hue_ratio >=980)||(y_ratio2 >=980&&hue_ratio2 >=980)||(y_ratio3 >=980&&hue_ratio3 >=980)||
				(y_ratio4 >=980&&hue_ratio4 >=980)||(y_ratio5 >=980&&hue_ratio5 >=980)||(y_ratio6 >=980&&hue_ratio6 >=980))
				DynamicOptimizeSystem[147]=1;
			else
				DynamicOptimizeSystem[147]=0;
//==============================================================================================//

			//NO.151  0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_151_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_191==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_151_y=%d \n",y_ratio);

			//NO.151  7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_151_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_192==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_151_y=%d \n",y_ratio2);

			if((y_ratio >=990 ||y_ratio2 >=990)&& sat_ratio_mean_value<=40&&motionl_level>18&&motionl_level<25)
				DynamicOptimizeSystem[151]=1;
			else
				DynamicOptimizeSystem[151]=0;

//==============================================================================================//

			//NO.188 identify LG leaf #44(NTSC) motion black white line 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_188_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_188_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_188_y=%d,DynamicOptimizeSystem_188_hue=%d \n",y_ratio,hue_ratio);

			//NO.188 identify LG leaf #44(NTSC) motion black white
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_188_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_188_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_188_y=%d,DynamicOptimizeSystem_188_hue=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=990 && hue_ratio >=990)||(y_ratio2 >=990 && hue_ratio2 >=990))
				DynamicOptimizeSystem[188]=1;
			else
				DynamicOptimizeSystem[188]=0;

//==============================================================================================//

			//NO.189 identify LG leaf #72 color scrolling text 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_189_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_189_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_189_y=%d,DynamicOptimizeSystem_189_hue=%d \n",y_ratio,hue_ratio);

			//NO.189 identify LG leaf #72 color scrolling text 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_189_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_189_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_189_y=%d,DynamicOptimizeSystem_189_hue=%d \n",y_ratio2,hue_ratio2);



			if((y_ratio >=990 && hue_ratio >=990)||(y_ratio2 >=990 && hue_ratio2 >=990))
				DynamicOptimizeSystem[189]=1;
			else
				DynamicOptimizeSystem[189]=0;


//==============================================================================================//

			//NO.191 identify LG COLORBAR 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_191_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_191_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_191==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_191_y=%d,DynamicOptimizeSystem_191_hue=%d \n",y_ratio,hue_ratio);

			//NO.191 identify LG COLORBAR 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_191_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_191_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_192==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_191_y=%d,DynamicOptimizeSystem_191_hue=%d \n",y_ratio2,hue_ratio2);



			if((y_ratio >=990 && hue_ratio >=990)||(y_ratio2 >=990 && hue_ratio2 >=990))
				DynamicOptimizeSystem[191]=1;
			else
				DynamicOptimizeSystem[191]=0;


//==============================================================================================//

			//NO.192 identify LG MONSCOPE 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_192_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_192==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_192_y=%d,sat_ratio_mean_value=%d\n",y_ratio,sat_ratio_mean_value);

			//NO.192 identify LG MONSCOPE 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_192_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_192==TRUE))
				ROSPrintf("[NTSC] lg_No_192_y2=%d,sat_ratio_mean_value=%d\n",y_ratio,sat_ratio_mean_value);


			if((y_ratio >=970||y_ratio2 >=980 )&& sat_ratio_mean_value<50)
				DynamicOptimizeSystem[192]=1;
			else
				DynamicOptimizeSystem[192]=0;

//==============================================================================================//

			//NO.193 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_193_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_193_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_193==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_193_y=%d,DynamicOptimizeSystem_193_hue=%d \n",y_ratio,hue_ratio);

			//NO.193 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_193_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_193_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_193==TRUE))
				ROSPrintf("[NTSC] lg_No_193_y2=%d,lg_No_193_hue2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=970 && hue_ratio >=970)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[193]=1;
			else
				DynamicOptimizeSystem[193]=0;

//==============================================================================================//

			//NO.194 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_194_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_194_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_194==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_194_y=%d,DynamicOptimizeSystem_194_hue=%d \n",y_ratio,hue_ratio);

			//NO.194 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_194_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_194_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_194==TRUE))
				ROSPrintf("[NTSC] lg_No_194_y2=%d,lg_No_194_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=970 && hue_ratio >=970)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[194]=1;
			else
				DynamicOptimizeSystem[194]=0;

//==============================================================================================//

			//NO.195 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_195_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_195_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_195==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_195_y=%d,DynamicOptimizeSystem_195_hue=%d \n",y_ratio,hue_ratio);

			//NO.195 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_195_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_195_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_195==TRUE))
				ROSPrintf("[NTSC] lg_No_195_y2=%d,lg_No_195_hue2=%d \n",y_ratio2,hue_ratio2);


			if((y_ratio >=970 && hue_ratio>=970)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[195]=1;
			else
				DynamicOptimizeSystem[195]=0;

//==============================================================================================//

			//NO.196 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_196_y[NTSC_IRE00_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_196_hue[NTSC_IRE00_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_196==TRUE))
				ROSPrintf("[NTSC] DynamicOptimizeSystem_196_y=%d,DynamicOptimizeSystem_196_hue=%d \n",y_ratio,hue_ratio);


			//NO.196 identify 7.5 IRE
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_196_y[NTSC_IRE75_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_196_hue[NTSC_IRE75_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_196==TRUE))
				ROSPrintf("[NTSC] lg_No_196_y2=%d,lg_No_196_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=970 && hue_ratio >=970)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[196]=1;
			else
				DynamicOptimizeSystem[196]=0;

			break;

		}
		case VIP_QUALITY_CVBS_PAL:
		{
			//PAL Only One black level Mode

			//NO.001 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_001_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_001_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_001_y=%d,DynamicOptimizeSystem_001_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=970 && hue_ratio >=970)
			{
				DynamicOptimizeSystem[1]=1;
			}
			else
			{
				DynamicOptimizeSystem[1]=0;
			}
			//ROSPrintf(" \n IRE00 %d ,IRE75  %d \n",NTSC_IRE00_OSD_Idx,NTSC_IRE75_OSD_Idx);

			//==============================================================================================//


			//NO.002 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_002_y=%d,DynamicOptimizeSystem_002_hue=%d \n",y_ratio,hue_ratio);

            if(y_ratio >=970 && hue_ratio >=970 && motion<1500 )
				DynamicOptimizeSystem[2]=1;
			else
				DynamicOptimizeSystem[2]=0;

//==============================================================================================//

			//NO.004 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_004_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_004_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_004_y=%d,DynamicOptimizeSystem_004_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980&&motionl_level>16)
			{
				DynamicOptimizeSystem[4]=1;
			}
			else
			{
				DynamicOptimizeSystem[4]=0;
			}

//==============================================================================================//

			//NO.005identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_005_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_005_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_5==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_005_y=%d,DynamicOptimizeSystem_005_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=970 && hue_ratio >=965)
				DynamicOptimizeSystem[5]=1;
			else
				DynamicOptimizeSystem[5]=0;

//==============================================================================================//

			//NO.007 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_007_y=%d,DynamicOptimizeSystem_007_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_y2[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_hue2[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_007_y2=%d,DynamicOptimizeSystem_007_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=970 && hue_ratio >=990)||(y_ratio2 >=970 && hue_ratio2 >=990))
			{
				DynamicOptimizeSystem[7]=1;
			}
			else
			{
				DynamicOptimizeSystem[7]=0;
			}

//==============================================================================================//

      //NO.011 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_011_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_011_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_011_y=%d,DynamicOptimizeSystem_011_hue=%d \n",y_ratio,hue_ratio);

      if(y_ratio >=990 && hue_ratio >=990)
				DynamicOptimizeSystem[11]=1;
			else
				DynamicOptimizeSystem[11]=0;

//==============================================================================================//

			//NO.012 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_012_y=%d,DynamicOptimizeSystem_012_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=990 && hue_ratio >=990&& motionl_level>=7)
			{
				DynamicOptimizeSystem[12]=1;
			}
			else
			{
				DynamicOptimizeSystem[12]=0;
			}

//==============================================================================================//

			//NO.023 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_023_y=%d,DynamicOptimizeSystem_023_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y2[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue2[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_023_y2=%d,DynamicOptimizeSystem_023_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
			{
				DynamicOptimizeSystem[23]=1;
			}
			else
			{
				DynamicOptimizeSystem[23]=0;
			}
//==============================================================================================//

			//NO.024 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_024_y=%d,DynamicOptimizeSystem_024_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=970 && hue_ratio >=980)//for_LG_demo
			{
				DynamicOptimizeSystem[24]=1;
			}
			else
			{
				DynamicOptimizeSystem[24]=0;
			}
//==============================================================================================//

			//NO.028 section2 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_028_y=%d,DynamicOptimizeSystem_028_hue=%d \n",y_ratio,hue_ratio);

			//NO.028 section1 identify
			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_y2[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_hue2[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_028_y2=%d,DynamicOptimizeSystem_028_hue2=%d \n",y_ratio,hue_ratio);


			if( (y_ratio >=980 && hue_ratio >=980) )
				DynamicOptimizeSystem[28]=1; // section 2 hit
			else if( (y_ratio2 >=980 && hue_ratio2 >=980) )
				DynamicOptimizeSystem[28]=2; // section 1 hit
			else
				DynamicOptimizeSystem[28]=0;


//==============================================================================================//

			//NO.035 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_035_y=%d \n",y_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y2[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_hue2[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_035_y2=%d \n",y_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y3[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_035_y3=%d \n",y_ratio3);

			if((y_ratio >=970)||(y_ratio2 >=970)||(y_ratio3 >=970))
			{
				DynamicOptimizeSystem[35]=1;
			}
			else
			{
				DynamicOptimizeSystem[35]=0;
			}
//==============================================================================================//
			//NO.39 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_039_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_039_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_039_y=%d,DynamicOptimizeSystem_039_hue=%d \n",y_ratio,hue_ratio);

			if( (y_ratio >=980) && (hue_ratio >=980) && (scalerVIP_DI_MiddleWare_GetStatus(STATUS_VPAN)>=2) )
				DynamicOptimizeSystem[39]=1;
			else
				DynamicOptimizeSystem[39]=0;


//==============================================================================================//
#if 0
			//NO.047 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_y[2], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_47==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_047_y=%d,DynamicOptimizeSystem_047_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_y2[2], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_47==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_047_y2=%d,DynamicOptimizeSystem_047_hue=%d \n",y_ratio2,hue_ratio);


			if((y_ratio >=970 && hue_ratio >=980)||((y_ratio2 >=970 && hue_ratio >=980)))
				DynamicOptimizeSystem[47]=1;
			else
				DynamicOptimizeSystem[47]=0;
# endif

//==============================================================================================//
			//NO.63 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_063_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_063_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_063_y=%d,DynamicOptimizeSystem_063_hue=%d \n",y_ratio,hue_ratio);

			if( (y_ratio >=980 && hue_ratio >=980) && motionl_level<10 && scalerVIP_DI_MiddleWare_GetStatus(STATUS_HIGHFREQUENCY_LEVEL)<10 )
			{
				DynamicOptimizeSystem[63]=1;
			}
			else
			{
				DynamicOptimizeSystem[63]=0;
			}


//==============================================================================================//

			//NO.075 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_075_y=%d,DynamicOptimizeSystem_075_hue=%d \n",y_ratio,hue_ratio);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[75]=1;
			else
				DynamicOptimizeSystem[75]=0;

//==============================================================================================//
			//NO.107 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_107_y=%d,DynamicOptimizeSystem_107_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980&&motionl_level>3)
			{
				DynamicOptimizeSystem[107]=1;
			}
			else
				{
				DynamicOptimizeSystem[107]=0;
			}

//==============================================================================================//

			//NO.123 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_123_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_123_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_123==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_123_y=%d,DynamicOptimizeSystem_123_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=970 && hue_ratio >=970)
				DynamicOptimizeSystem[123]=1;
			else
				DynamicOptimizeSystem[123]=0;

//==============================================================================================//
#if 0
			//NO.132 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_y[PAL_AUTO], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_132==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_132_y=%d,DynamicOptimizeSystem_132_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=970 && hue_ratio >=970)
				DynamicOptimizeSystem[132]=1;
			else
				DynamicOptimizeSystem[132]=0;
#endif
//==============================================================================================//

			//NO.133 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_133_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_133_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_133_y=%d,DynamicOptimizeSystem_133_hue=%d \n",y_ratio,hue_ratio);


			//if((y_ratio >=980 && hue_ratio >=960)&&(sat_ratio_mean_value<=35))
			if((y_ratio >=980 )&&(sat_ratio_mean_value<=35))
				DynamicOptimizeSystem[133]=1;
			else
				DynamicOptimizeSystem[133]=0;

//==============================================================================================//

			//NO.134 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_134_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_134_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_134_y=%d,DynamicOptimizeSystem_134_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[134]=1;
			else
				DynamicOptimizeSystem[134]=0;
//==============================================================================================//

			//NO.135 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_135_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_135_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_133==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_135_y=%d,DynamicOptimizeSystem_135_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[135]=1;
			else
				DynamicOptimizeSystem[135]=0;
//==============================================================================================//

			//NO.139 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_139_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_139==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_139_y=%d,lg_No_139_hue=%d \n",y_ratio,hue_ratio);


			if((y_ratio >=980)&& sat_ratio_mean_value<=40)
				DynamicOptimizeSystem[139]=1;
			else
				DynamicOptimizeSystem[139]=0;

//==============================================================================================//

			//NO.147 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_147_y=%d,DynamicOptimizeSystem_147_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y2[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue2[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_147_y2=%d,DynamicOptimizeSystem_147_hue2=%d \n",y_ratio2,hue_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y3[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue3[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_147_y3=%d,DynamicOptimizeSystem_147_hue3=%d \n",y_ratio3,hue_ratio3);

			if((y_ratio >=980&&hue_ratio >=980)||(y_ratio2 >=980&&hue_ratio2 >=980)||(y_ratio3 >=980&&hue_ratio3 >=980))
				DynamicOptimizeSystem[147]=1;
			else
				DynamicOptimizeSystem[147]=0;
//==============================================================================================//

			//NO.151
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_151_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_191==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_151_y=%d \n",y_ratio);

			if((y_ratio >=990 )&& sat_ratio_mean_value<=40&&motionl_level>18&&motionl_level<25)
				DynamicOptimizeSystem[151]=1;
			else
				DynamicOptimizeSystem[151]=0;

//==============================================================================================//

			//NO.188 identify LLG leaf #46(PAL) motion black white
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_188_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_188_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
            hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_188_hue_2[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_188_y=%d,DynamicOptimizeSystem_188_hue=%d,DynamicOptimizeSystem_188_hue_2=%d \n",y_ratio,hue_ratio,hue_ratio2);

			if(y_ratio >=990 && (hue_ratio >=980 || hue_ratio2>= 980))
				DynamicOptimizeSystem[188]=1;
			else
				DynamicOptimizeSystem[188]=0;

//==============================================================================================//

			//NO.189 identify LG leaf #74 color scrolling text
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_189_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_189_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_189_y=%d,DynamicOptimizeSystem_189_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=990 && hue_ratio >=990)
				DynamicOptimizeSystem[189]=1;
			else
				DynamicOptimizeSystem[189]=0;

//==============================================================================================//
#if 0
			//NO.191 identify LG COLORBAR

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_191_y[PAL_AUTO], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_191_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_191==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_191_y=%d,DynamicOptimizeSystem_191_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=990 && hue_ratio >=990)
			{
				DynamicOptimizeSystem[191]=1;
			}
			else

			{
				DynamicOptimizeSystem[191]=0;
			}

#endif
//==============================================================================================//

			//NO.192 identify LG MONSCOPE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_192_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_192==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_192_y=%d,sat_ratio_mean_value=%d\n",y_ratio,sat_ratio_mean_value);

			if(y_ratio >=990 && sat_ratio_mean_value<50)
			{
				DynamicOptimizeSystem[192]=1;
			}
			else

			{
				DynamicOptimizeSystem[192]=0;
			}

//==============================================================================================//

			//NO.193 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_193_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_193_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_193==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_193_y=%d,DynamicOptimizeSystem_193_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=970 && hue_ratio >=970)
				DynamicOptimizeSystem[193]=1;
			else
				DynamicOptimizeSystem[193]=0;

//==============================================================================================//

			//NO.194 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_194_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_194_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_194==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_194_y=%d,DynamicOptimizeSystem_194_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=970 && hue_ratio >=970)
				DynamicOptimizeSystem[194]=1;
			else
				DynamicOptimizeSystem[194]=0;

//==============================================================================================//

			//NO.195 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_195_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_195_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_195==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_195_y=%d,DynamicOptimizeSystem_195_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[195]=1;
			else
				DynamicOptimizeSystem[195]=0;

//==============================================================================================//

			//NO.196 identify 0 IRE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_196_y[PAL_AUTO], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_196_hue[PAL_AUTO], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_196==TRUE))
				ROSPrintf("[PALI] DynamicOptimizeSystem_196_y=%d,DynamicOptimizeSystem_196_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=970 && hue_ratio >=970)
				DynamicOptimizeSystem[196]=1;
			else
				DynamicOptimizeSystem[196]=0;

			break;
		}
		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_HDMI_576I:
		case VIP_QUALITY_HDMI_480P:
		case VIP_QUALITY_HDMI_576P:
		{

			if(system_info_structure_table->OSD_Info.OSD_Film_Mode==1)//
			{
				SD_OSD_Idx = SD_LOW; //osd black level =low
			}
			else
			{
				SD_OSD_Idx = SD_HIGH; //osd black level !=low
			}

			//ROSPrintf(" \n SD_OSD_Idx %d \n",SD_OSD_Idx);
			//NO.01 identify//for_LG_demo
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_001_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_001_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("DynamicOptimizeSystem_001_y=%d,DynamicOptimizeSystem_001_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[1]=1;
			else
				DynamicOptimizeSystem[1]=0;
//==============================================================================================//


			//NO.02 identify//for_LG_demo
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("DynamicOptimizeSystem_002_y=%d,DynamicOptimizeSystem_002_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[2]=1;
			else
				DynamicOptimizeSystem[2]=0;
//==============================================================================================//

			//NO.007 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("DynamicOptimizeSystem_007_y=%d,DynamicOptimizeSystem_007_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_y2[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_007_hue2[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_7==TRUE))
				ROSPrintf("DynamicOptimizeSystem_007_y=%d,DynamicOptimizeSystem_007_hue=%d \n",y_ratio2,hue_ratio2);


			if(((y_ratio >=970 && hue_ratio >=970)||(y_ratio2 >=970 && hue_ratio2 >=970))&&( sat_ratio_mean_value<100) )

				DynamicOptimizeSystem[7]=1;
			else
				DynamicOptimizeSystem[7]=0;

//==============================================================================================//

			//NO.012 identify//for_LG_demo
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("DynamicOptimizeSystem_012_y=%d,DynamicOptimizeSystem_012_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=990 && hue_ratio >=990&&sat_ratio_mean_value<80&&motion<1000)
				DynamicOptimizeSystem[12]=1;
			else
				DynamicOptimizeSystem[12]=0;

//==============================================================================================//

			//NO.023 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("DynamicOptimizeSystem_023_y=%d,DynamicOptimizeSystem_023_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y2[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue2[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("DynamicOptimizeSystem_023_y2=%d,DynamicOptimizeSystem_023_hue2=%d \n",y_ratio2,hue_ratio2);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[23]=1;
			else
			{
				DynamicOptimizeSystem[23]=0;
			}

//==============================================================================================//

			//NO.024 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("DynamicOptimizeSystem_024_y=%d,DynamicOptimizeSystem_024_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)//for_LG_demo
				DynamicOptimizeSystem[24]=1;
			else
				DynamicOptimizeSystem[24]=0;
//==============================================================================================//

			//NO.028 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("DynamicOptimizeSystem_028_y=%d,DynamicOptimizeSystem_028_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_y2[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_028_hue2[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("DynamicOptimizeSystem_028_y2=%d,DynamicOptimizeSystem_028_hue2=%d \n",y_ratio,hue_ratio);


			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
			{
				DynamicOptimizeSystem[28]=1;
			}
			else
			{
				DynamicOptimizeSystem[28]=0;
			}

//==============================================================================================//
#if 0
			//NO.032 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_032_y[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_32==TRUE))
				ROSPrintf("DynamicOptimizeSystem_032_y=%d,noise_relaible=%d,motion=%d \n",y_ratio,noise_relaible,motion);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_032_y2[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_32==TRUE))
				ROSPrintf("DynamicOptimizeSystem_032_y2=%d \n",y_ratio2);

			if((((y_ratio >=980)||(y_ratio2 >=980)))&&(sat_ratio_mean_value <=35)&&(motion>100))
				DynamicOptimizeSystem[32]=1;
			else
				DynamicOptimizeSystem[32]=0;
#endif
//==============================================================================================//
			//NO.035 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("DynamicOptimizeSystem_035_y=%d \n",y_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y2[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("DynamicOptimizeSystem_035_y2=%d \n",y_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y3[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("DynamicOptimizeSystem_035_y3=%d \n",y_ratio3);


			if(((y_ratio >=970)||(y_ratio2 >=970)||(y_ratio3 >=970)) && sat_ratio_mean_value<=40)
			{
				DynamicOptimizeSystem[35]=1;
			}
			else
			{
				DynamicOptimizeSystem[35]=0;
			}
//==============================================================================================//
#if 0
			//NO.047 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_y[3], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_047_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_47==TRUE))
				ROSPrintf("DynamicOptimizeSystem_047_y=%d,DynamicOptimizeSystem_047_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=970 && hue_ratio >=990)
				DynamicOptimizeSystem[47]=1;
			else
				DynamicOptimizeSystem[47]=0;
#endif
//==============================================================================================//
#if 0
			//NO.49 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_049_y[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_049_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("DynamicOptimizeSystem_049_y=%d,DynamicOptimizeSystem_049_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980&&sat_ratio_mean_value<110&&sat_ratio_mean_value>81)
			{
				DynamicOptimizeSystem[49]=1;
			}
			else
			{
				DynamicOptimizeSystem[49]=0;
			}
#endif

			//NO.50 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_050_y[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_050_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			if(y_ratio >=980 && hue_ratio >=980&&sat_ratio_mean_value<53&&sat_ratio_mean_value>47)
			{
				DynamicOptimizeSystem[50]=1;
			}
			else
			{
				DynamicOptimizeSystem[50]=0;
			}

//==============================================================================================//

			//NO.63 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_063_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_063_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("DynamicOptimizeSystem_063_y=%d,DynamicOptimizeSystem_063_hue=%d \n",y_ratio,hue_ratio);

			if((y_ratio >=980 && hue_ratio >=980)&&motionl_level<10)
			{
				DynamicOptimizeSystem[63]=1;
			}
			else
			{
				DynamicOptimizeSystem[63]=0;
			}


//==============================================================================================//
			//NO.75 identify

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_075_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("DynamicOptimizeSystem_075_y=%d,DynamicOptimizeSystem_075_hue=%d \n",y_ratio,hue_ratio);

			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[75]=1;
			else
				DynamicOptimizeSystem[75]=0;

//==============================================================================================//
			//NO.107 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE)) {
				ROSPrintf("DynamicOptimizeSystem_107_y=%d,DynamicOptimizeSystem_107_hue=%d \n",y_ratio,hue_ratio);
				ROSPrintf("STATUS_MOTION=%d \n",scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION));
			}

			if(y_ratio >=980 && hue_ratio >=980)
			{
				DynamicOptimizeSystem[107]=1;
			}
			else
			{
				DynamicOptimizeSystem[107]=0;
			}
//==============================================================================================//
#if 0
			//NO.123 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_123_y[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_123_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_123==TRUE))
				ROSPrintf("DynamicOptimizeSystem_123_y=%d,DynamicOptimizeSystem_123_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
			{
				DynamicOptimizeSystem[123]=1;
			}
			else
			{

//				if(SmartPic_clue->SceneChange_NR)
				DynamicOptimizeSystem[123]=0;
			}
#endif
//==============================================================================================//
#if 0
			//NO.132 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_y[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_132==TRUE))
				ROSPrintf("DynamicOptimizeSystem_132_y=%d,DynamicOptimizeSystem_132_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=970 && hue_ratio >=970)
				DynamicOptimizeSystem[132]=1;
			else
				DynamicOptimizeSystem[132]=0;
#endif
//==============================================================================================//

			//NO.139 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_139_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			//hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_132_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_132==TRUE))
				ROSPrintf("DynamicOptimizeSystem_139_y=%d,lg_No_139_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && sat_ratio_mean_value<=45)
				DynamicOptimizeSystem[139]=1;
			else
				DynamicOptimizeSystem[139]=0;


//==============================================================================================//

			//NO.147 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("DynamicOptimizeSystem_147_y=%d,DynamicOptimizeSystem_147_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y2[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue2[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("DynamicOptimizeSystem_147_y2=%d,DynamicOptimizeSystem_147_hue2=%d \n",y_ratio2,hue_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y3[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue3[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("DynamicOptimizeSystem_147_y3=%d,DynamicOptimizeSystem_147_hue3=%d \n",y_ratio3,hue_ratio3);

			if((y_ratio >=980&&hue_ratio >=980)||(y_ratio2 >=980&&hue_ratio2 >=980)||(y_ratio3 >=980&&hue_ratio3 >=980))
				DynamicOptimizeSystem[147]=1;
			else
				DynamicOptimizeSystem[147]=0;
//==============================================================================================//

			//NO.151
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_151_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_191==TRUE))
				ROSPrintf("DynamicOptimizeSystem_151_y=%d \n",y_ratio);

			if((y_ratio >=990 )&& sat_ratio_mean_value<=40&&motionl_level>18&&motionl_level<25)
				DynamicOptimizeSystem[151]=1;
			else
				DynamicOptimizeSystem[151]=0;

//==============================================================================================//
			//NO.152
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_152_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_191==TRUE))
				ROSPrintf("DynamicOptimizeSystem_152_y=%d \n",y_ratio);

			if((y_ratio >=990 )&& sat_ratio_mean_value<=40&&motionl_level>30&&motionl_level<60)
				DynamicOptimizeSystem[152]=1;
			else
				DynamicOptimizeSystem[152]=0;

//==============================================================================================//

#if 0
			//NO. SONY DISC TEMPLE

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_180_y1[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("lg_No_180_y=%d \n",y_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_180_y2[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_180_y2=%d \n",y_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_180_y3[SD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_180_y3=%d \n",y_ratio3);

			if((y_ratio >=970)||(y_ratio2 >=970 )||(y_ratio3 >=970 ))
				DynamicOptimizeSystem[180]=1;
			else
			{
				DynamicOptimizeSystem[180]=0;
			}

#endif
//==============================================================================================//
			//NO.174 hqv move tree

			if(RPC_system_info_structure_table->VIP_source==VIP_QUALITY_HDMI_576I)
			{
				y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_174_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
				hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_174_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

				if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
					ROSPrintf("Dyn_174_y=%d, Dyn_174_hue=%d\n",y_ratio ,hue_ratio);


				if((y_ratio >=980) &&(hue_ratio >=980)&&(sat_ratio_mean_value>125&&sat_ratio_mean_value<140))
					DynamicOptimizeSystem[174]=1;
				else
				{
					DynamicOptimizeSystem[174]=0;
					if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
						ROSPrintf("174_y=%d, 174_Hue=%d ,sat=%d \n",y_ratio,sat_ratio_mean_value,sat_ratio_mean_value );
				}
			}
//==============================================================================================//

			//NO.191 identify LG COLORBAR

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_191_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_191_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_191==TRUE))
				ROSPrintf("DynamicOptimizeSystem_191_y=%d,DynamicOptimizeSystem_191_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=990 && hue_ratio >=990)
				DynamicOptimizeSystem[191]=1;
			else
				DynamicOptimizeSystem[191]=0;

//==============================================================================================//


			//NO.192 identify LG MONSCOPE
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_192_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_192==TRUE))
				ROSPrintf("DynamicOptimizeSystem_192_y=%d,sat_ratio_mean_value=%d\n",y_ratio,sat_ratio_mean_value);

			if(y_ratio >=990 && sat_ratio_mean_value<50)
				DynamicOptimizeSystem[192]=1;
			else
				DynamicOptimizeSystem[192]=0;

//==============================================================================================//

			//NO.195 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_195_y[SD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_195_hue[SD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_195==TRUE))
				ROSPrintf("DynamicOptimizeSystem_195_y=%d,DynamicOptimizeSystem_195_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[195]=1;
			else
				DynamicOptimizeSystem[195]=0;

//==============================================================================================//
                        if(cur_source == VIP_QUALITY_HDMI_576I)
                        {
                                //NO.208 CMR teeth flicker
                                y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_211_y[1], &Y_hist_ratio[0], 32);

                                if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
                                ROSPrintf("DynamicOptimizeSystem_211_y=%d \n",y_ratio);
                                if(y_ratio >=980 && sat_ratio_mean_value<=55)
                                {
                                        DynamicOptimizeSystem[211]=1;
                                }
                                else
                                {
                                        DynamicOptimizeSystem[211]=0;
                                }
                        }

//==============================================================================================//


			break;
		}

		case VIP_QUALITY_HDMI_1080I:
		case VIP_QUALITY_HDMI_1080P:
		{
			if(system_info_structure_table->OSD_Info.OSD_Film_Mode==1)//
			{
				HD_OSD_Idx = HD_LOW; //osd black level =low
			}
			else // others mapping to HIGH
			{
				HD_OSD_Idx = HD_HIGH; //osd black level !=low
			}

#if 0
			//NO.02 identify//for_LG_demo
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_y[HD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_002_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("DynamicOptimizeSystem_002_y=%d,DynamicOptimizeSystem_002_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[2]=1;
			else
				DynamicOptimizeSystem[2]=0;
//==============================================================================================//
			//NO.003 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_003_y[HD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_003_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("DynamicOptimizeSystem_003_y=%d,DynamicOptimizeSystem_003_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[3]=1;
			else
				DynamicOptimizeSystem[3]=0;

//==============================================================================================//
			//NO.004 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_004_y[HD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_004_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_4==TRUE))
				ROSPrintf("DynamicOptimizeSystem_004_y=%d,DynamicOptimizeSystem_004_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[4]=1;
			else
				DynamicOptimizeSystem[4]=0;
//==============================================================================================//
			//NO.005identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_005_y[HD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_005_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_5==TRUE))
				ROSPrintf("DynamicOptimizeSystem_005_y=%d,DynamicOptimizeSystem_005_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=970 && hue_ratio >=970)
				DynamicOptimizeSystem[5]=1;
			else
				DynamicOptimizeSystem[5]=0;

//==============================================================================================//
			//NO.012 identify//for_LG_demo
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_y[HD_OSD_Idx], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_012_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("DynamicOptimizeSystem_012_y=%d,DynamicOptimizeSystem_012_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=990 && hue_ratio >=990)//&&sat_ratio_mean_value<80&&motion<1000)
				DynamicOptimizeSystem[12]=1;
			else
				DynamicOptimizeSystem[12]=0;

//==============================================================================================//
#endif
			//NO.014 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_014_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_014_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_12==TRUE))
				ROSPrintf("DynamicOptimizeSystem_014_y=%d,DynamicOptimizeSystem_014_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=990 && hue_ratio >=990)
			{
				DynamicOptimizeSystem[14]=1;
			}
			else
			{
				DynamicOptimizeSystem[14]=0;
			}

//==============================================================================================//
			//NO.023 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("DynamicOptimizeSystem_023_y=%d,DynamicOptimizeSystem_023_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_y2[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_023_hue2[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_23==TRUE))
				ROSPrintf("DynamicOptimizeSystem_023_y2=%d,DynamicOptimizeSystem_023_hue2=%d \n",y_ratio2,hue_ratio2);



			if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980))
				DynamicOptimizeSystem[23]=1;
			else
				DynamicOptimizeSystem[23]=0;

//==============================================================================================//

			//NO.024 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_024_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_24==TRUE))
				ROSPrintf("DynamicOptimizeSystem_024_y=%d,DynamicOptimizeSystem_024_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=1000 && hue_ratio >=980)//for_LG_demo
				DynamicOptimizeSystem[24]=1;
			else
				DynamicOptimizeSystem[24]=0;

//==============================================================================================//
#if 0
			//NO.035 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y[HD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("DynamicOptimizeSystem_035_y=%d \n",y_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y2[HD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("DynamicOptimizeSystem_035_y2=%d \n",y_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_035_y3[HD_OSD_Idx], &Y_hist_ratio[0], 32);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
				ROSPrintf("DynamicOptimizeSystem_035_y3=%d \n",y_ratio3);


			if(((y_ratio >=970)||(y_ratio2 >=970)||(y_ratio3 >=970)) && sat_ratio_mean_value<=40)
			{
				DynamicOptimizeSystem[35]=1;
			}
			else
			{
				DynamicOptimizeSystem[35]=0;
			}
#endif
//==============================================================================================//
/*
			//NO 39
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_039_y[4], &Y_hist_ratio[0], 32);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_039_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(lg_No_039_y2[4], &Y_hist_ratio[0], 32);
			hue_ratio2 = scalerVIP_ratio_inner_product(lg_No_039_hue2[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio3 = scalerVIP_ratio_inner_product(lg_No_039_y3[4], &Y_hist_ratio[0], 32);
			hue_ratio3 = scalerVIP_ratio_inner_product(lg_No_039_hue3[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio4 = scalerVIP_ratio_inner_product(lg_No_039_y4[4], &Y_hist_ratio[0], 32);
			hue_ratio4 = scalerVIP_ratio_inner_product(lg_No_039_hue4[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio5 = scalerVIP_ratio_inner_product(lg_No_039_y5[4], &Y_hist_ratio[0], 32);
			hue_ratio5 = scalerVIP_ratio_inner_product(lg_No_039_hue5[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
				ROSPrintf("DynamicOptimizeSystem_039_y=%d,DynamicOptimizeSystem_039_hue=%d \n",y_ratio,hue_ratio);

			if((y_ratio >=980 && hue_ratio >=980) || (y_ratio2 >=980 && hue_ratio2 >=980) || (y_ratio3 >=980 && hue_ratio3 >=980) || (y_ratio4 >=980 && hue_ratio4 >=980) || (y_ratio5 >=980 && hue_ratio5 >=980))
				DynamicOptimizeSystem[39]=1;
			else
				DynamicOptimizeSystem[39]=0;
*/
//==============================================================================================//

			//NO 107
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_107_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE)){
				ROSPrintf("DynamicOptimizeSystem_107_y=%d,DynamicOptimizeSystem_107_hue=%d \n",y_ratio,hue_ratio);
				ROSPrintf("PAN_Status=%d,MOTION_Status=%d \n",scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE),scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION));
			}

			//if(y_ratio >=980 && hue_ratio >=980 && scalerVIP_DI_MiddleWare_GetStatus(STATUS_HMC) == 1)
			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[107]=1;
			else
				DynamicOptimizeSystem[107]=0;

//==============================================================================================//
			//NO.147 identify
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("DynamicOptimizeSystem_147_y=%d,DynamicOptimizeSystem_147_hue=%d \n",y_ratio,hue_ratio);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y2[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue2[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("DynamicOptimizeSystem_147_y2=%d,DynamicOptimizeSystem_147_hue2=%d \n",y_ratio2,hue_ratio2);

			y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_y3[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_147_hue3[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_147==TRUE))
				ROSPrintf("DynamicOptimizeSystem_147_y3=%d,DynamicOptimizeSystem_147_hue3=%d \n",y_ratio3,hue_ratio);

			if(((y_ratio >=980)||(y_ratio2 >=980)||(y_ratio3 >=980))&&((hue_ratio >=980)||(hue_ratio2 >=980)||(hue_ratio3 >=980)))
				DynamicOptimizeSystem[147]=1;
			else
				DynamicOptimizeSystem[147]=0;

//==============================================================================================//
			//NO.173  film 24 to 30


			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_173_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);

			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_173_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
			//	ROSPrintf("DynamicOptimizeSystem_173_y=%d,DynamicOptimizeSystem_173_hue=%d \n",y_ratio,hue_ratio);



			if((y_ratio >=980) &&((sat_ratio_mean_value)<55)&&(step_count<3000)&&(hue_ratio >=980)&&scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio()>=90)
				DynamicOptimizeSystem[173]=1;
			else
			{
				DynamicOptimizeSystem[173]=0;
				if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("173_y=%d,sat=%d ,step_count=%d ,ratio=%d\n",y_ratio,sat_ratio_mean_value,step_count,scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio() );
			}






//==============================================================================================//
			//NO.175  mnusli high frequency 22 film


			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_175_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("DynamicOptimizeSystem_175_y=%d,5 \n",y_ratio );


			if((y_ratio >=980) &&((sat_ratio_mean_value)<40)&&(step_count>5500&&step_count<20000))
				DynamicOptimizeSystem[175]=1;
			else
			{
				DynamicOptimizeSystem[175]=0;
				if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("DynamicOptimizeSystem_175_y=%d,sat=%d ,step_count=%d \n",y_ratio,sat_ratio_mean_value,step_count );
			}


//==============================================================================================//
			//NO.176  hqv flower


			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_176_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_176_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);


			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("DynamicOptimizeSystem_176_y=%d,DynamicOptimizeSystem_176_hue=%d  \n",y_ratio,hue_ratio );


			if((y_ratio >=980) && hue_ratio >=980&&((sat_ratio_mean_value)>55&&sat_ratio_mean_value<73))
				DynamicOptimizeSystem[176]=1;
			else
			{
				DynamicOptimizeSystem[176]=0;
				if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
				ROSPrintf("DynamicOptimizeSystem_176_y=%d,DynamicOptimizeSystem_176_hue=%d,sat=%d  \n",y_ratio,hue_ratio,sat_ratio_mean_value );

			}



//==============================================================================================//
			//NO.177

			// qtec_hd contant_ sunrise
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_177_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_177_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_177_y2[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);


			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
			//	ROSPrintf("DynamicOptimizeSystem_177_y=%d,DynamicOptimizeSystem_177_hue=%d DynamicOptimizeSystem_177_y2=%d\n",y_ratio,hue_ratio,y_ratio2);

                       //if(rtd_inl(0xb802e4f0)==11){
                       //         printk("y1=%d,h=%d ,y2=%d, sat =%d ,step_count=%d \n",y_ratio,hue_ratio,y_ratio2,sat_ratio_mean_value,step_count);
                       //         }

			if((y_ratio >=980||y_ratio2 >=980) && hue_ratio >=970)
				DynamicOptimizeSystem[177]=1;
			else
			{
				DynamicOptimizeSystem[177]=0;


			}

                        //if(rtd_inl(0xb802e4f0)==11){
                        //          printk("y1=%d,h=%d ,y2=%d, sat =%d ,step_count=%d \n",y_ratio,hue_ratio,y_ratio2,sat_ratio_mean_value,step_count);


//==============================================================================================//
			//NO.182

			// lg_hd contant_  Analong noise : boy
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_182_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_182_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_182_y=%d,DynamicOptimizeSystem_182_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[182]=1;
			else
				DynamicOptimizeSystem[182]=0;

//==============================================================================================//
			//NO.183

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_183_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_183_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_183_y=%d,DynamicOptimizeSystem_183_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[183]=1;
			else
				DynamicOptimizeSystem[183]=0;

//==============================================================================================//
			//NO.184

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_184_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_184_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_184_y=%d,DynamicOptimizeSystem_184_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[184]=1;
			else
				DynamicOptimizeSystem[184]=0;

//==============================================================================================//
			//NO.185
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_185_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_185_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_185_y=%d,DynamicOptimizeSystem_185_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[185]=1;
			else
				DynamicOptimizeSystem[185]=0;

//==============================================================================================//
			//NO.186

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_186_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_186_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_186_y=%d,DynamicOptimizeSystem_186_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[186]=1;
			else
				DynamicOptimizeSystem[186]=0;
//==============================================================================================//
			//NO.187

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_187_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_187_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_187_y=%d,DynamicOptimizeSystem_187_hue=%d \n",y_ratio,hue_ratio);


			if((y_ratio >=980 && hue_ratio >=980)&&(motionl_level>=1&&motionl_level<25))
				DynamicOptimizeSystem[187]=1;
			else
				DynamicOptimizeSystem[187]=0;

//==============================================================================================//
			//NO.197 //qte 1002  building and street ,(streets)

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_197_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin); //street
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_197_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_197_y=%d,DynamicOptimizeSystem_197_hue=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[197]=1;
			else
				DynamicOptimizeSystem[197]=0;

//==============================================================================================//
			//NO.198 //qte 1002  building and street ,(building)

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_198_y1[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin); //building
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_198_hue1[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_198_y1=%d,DynamicOptimizeSystem_198_hue1=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980&&motionl_level>=2)
				DynamicOptimizeSystem[198]=1;
			else
				DynamicOptimizeSystem[198]=0;

//==============================================================================================//


			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_199_y1[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin); //bandbool wonman
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_199_hue1[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("DynamicOptimizeSystem_199_y1=%d,DynamicOptimizeSystem_199_hue1=%d \n",y_ratio,hue_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
				DynamicOptimizeSystem[199]=1;
			else
				DynamicOptimizeSystem[199]=0;

//==============================================================================================//
//==============================================================================================//


//==============================================================================================//

			y_ratio = scalerVIP_ratio_inner_product(SandM_Chroma_Zone_Plate_y[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin); //bandbool wonman
			hue_ratio = scalerVIP_ratio_inner_product(SandM_Chroma_Zone_Plate_hue[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("SandM_Chroma_Zone_Plate_y=%d,SandM_Chroma_Zone_Plate_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=980 && hue_ratio >=980)
				SandM_Chroma_Zone_Plate=1;
			else
				SandM_Chroma_Zone_Plate=0;

//==============================================================================================//
			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_225_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_225_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);


			if((y_ratio >=980||y_ratio2 >=980))
                        {
                                DynamicOptimizeSystem[225]=1;
                        }
			else
			{
				DynamicOptimizeSystem[225]=0;
			}
//==============================================================================================//

                        y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_226_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
                        hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_226_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);


                        if((y_ratio >=980 && hue_ratio >=980))
                        {
                                DynamicOptimizeSystem[226]=1;
                        }
                        else
                        {
                                DynamicOptimizeSystem[226]=0;
                        }





			break;
		}

                case VIP_QUALITY_VGA:
                {

//==============================================================================================//
                        //NO.177

                        // qtec_hd contant_ sunrise
                        y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_177_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
                        hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_177_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

                        y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_177_y2[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);



                     // if(rtd_inl(0xb802e4f0)==11){
                     //           printk("y1=%d,h=%d ,y2=%d, sat =%d ,step_count=%d \n",y_ratio,hue_ratio,y_ratio2,sat_ratio_mean_value,step_count);
                     //          }


                        if((y_ratio >=980||y_ratio2 >=980) && hue_ratio >=980)
                                DynamicOptimizeSystem[177]=1;
                        else
                        {
                                DynamicOptimizeSystem[177]=0;
                             //   if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
                              //          ROSPrintf("177_y=%d,177_hue=%d _177_y2=%d?sat=%d ,setp=%d \n",y_ratio,hue_ratio,y_ratio2,sat_ratio_mean_value,step_count);


                        }
//==============================================================================================//

			y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_225_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_225_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);


			if((y_ratio >=980||y_ratio2 >=980))
                        {
                                DynamicOptimizeSystem[225]=1;
                        }
			else
			{
				DynamicOptimizeSystem[225]=0;
			}

//==============================================================================================//

                        y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_226_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
                        hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_226_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);


                        if((y_ratio >=980 && hue_ratio >=980))
                        {
                                DynamicOptimizeSystem[226]=1;
                        }
                        else
                        {
                                DynamicOptimizeSystem[226]=0;
                        }

//==============================================================================================//


                        break;
                }

		case VIP_QUALITY_DTV_480I:
		case VIP_QUALITY_DTV_576I:
		case VIP_QUALITY_DTV_480P:
		case VIP_QUALITY_DTV_576P:
		case VIP_QUALITY_DTV_720P:
		{
//==============================================================================================//
			unsigned short wDI, hDI;
			scalerVIP_Get_DI_Width_Height(&wDI, &hDI);
			//if((MA_print_count%debug_print_delay_time==0))
				//ROSPrintf("cur_source = %d, w = %d, h = %d",  cur_source, wDI, hDI);
			//for CI test patch BitmapDevodeOffset [KTASKWBS-1937][KTASKWBS-1936]
			//if((system_info_structure_table->Input_src_Form == _SRC_FROM_VO) && (system_info_structure_table->Input_src_Type == _SRC_VO))
			if (wDI == 360 && hDI == 144)
			{
				y_ratio = scalerVIP_ratio_inner_product(BitmapDevodeOffset_y_1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
				hue_ratio = scalerVIP_ratio_inner_product(BitmapDevodeOffset_hue_1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
				y_ratio2 = scalerVIP_ratio_inner_product(BitmapDevodeOffset_y_2[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
				hue_ratio2 = scalerVIP_ratio_inner_product(BitmapDevodeOffset_hue_2[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
				y_ratio3 = scalerVIP_ratio_inner_product(BitmapDevodeOffset_y_3[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
				hue_ratio3 = scalerVIP_ratio_inner_product(BitmapDevodeOffset_hue_3[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
				if((MA_print_count%debug_print_delay_time==0))
					ROSPrintf("BitmapDevodeOffset_y=%d,BitmapDevodeOffset_hue=%d \n",y_ratio,hue_ratio);

				if((y_ratio >=980 && hue_ratio >=980)||(y_ratio2 >=980 && hue_ratio2 >=980)||(y_ratio3 >=980 && hue_ratio3 >=980))
					CITestPatch[0]=1;
				else
				{
					CITestPatch[0]=0;
				}
			}
			else
			{
				CITestPatch[0]=0;
			}
//==============================================================================================//
                        //NO.208 CMR teeth flicker
                                y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_211_y[0], &Y_hist_ratio[0], 32);

                                if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
                                ROSPrintf("DynamicOptimizeSystem_208_y=%d \n",y_ratio);
                                if(y_ratio >=980 && sat_ratio_mean_value<=55)
                                {
                                        DynamicOptimizeSystem[211]=1;
                                }
                                else
                                {
                                        DynamicOptimizeSystem[211]=0;
                                }

//==============================================================================================//



			break;
		}
                case VIP_QUALITY_DTV_1080I:
                {
                        if(system_info_structure_table->OSD_Info.OSD_Film_Mode==1)//
                        {
                                HD_OSD_Idx = HD_LOW; //osd black level =low
                        }
                        else // others mapping to HIGH
                        {
                                HD_OSD_Idx = HD_HIGH; //osd black level !=low
                        }


                //==============================================================================================//

                //NO.201 FOR AVS+
                        y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_201_y[0], &Y_hist_ratio[0], 32);

                        y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_201_y[1], &Y_hist_ratio[0], 32);

                        if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
                        ROSPrintf("DynamicOptimizeSystem_201_y=%d \n",y_ratio);


                        if(((y_ratio >=980)||(y_ratio2 >=980)) && sat_ratio_mean_value<=40)
                        {
                                DynamicOptimizeSystem[201]=1;
                        }
                        else
                        {
                                DynamicOptimizeSystem[201]=0;
                        }


                //==============================================================================================//

                //NO.202 DTV PASSPORT FAIL
                        y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_202_y[0], &Y_hist_ratio[0], 32);
                        hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_202_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);


                        if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
                        ROSPrintf("DynamicOptimizeSystem_202_y=%d \n",y_ratio);


			if(y_ratio >=980 && hue_ratio >=980)
                        {
                                DynamicOptimizeSystem[202]=1;
                        }
                        else
                        {
                                DynamicOptimizeSystem[202]=0;
                        }


                //==============================================================================================//


                break;
                }
		case VIP_QUALITY_DTV_1080P:
		{
			y_ratio = scalerVIP_ratio_inner_product(LGBirdDemoMovie_ChromaRTNR_y, Y_hist_ratio, TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(LGBirdDemoMovie_ChromaRTNR_hue, hue_hist_ratio, COLOR_HUE_HISTOGRAM_LEVEL);
			LGBirdCRTNRPatchTrigger = 0;
			if(y_ratio >=920 && hue_ratio >=920) {
				LGBirdCRTNRPatch = 1;
			} else
				LGBirdCRTNRPatch = 0;

			if (LGBirdCRTNRPatch != LGBirdCRTNRPatchPre)
				LGBirdCRTNRPatchTrigger = 1;
			LGBirdCRTNRPatchPre = LGBirdCRTNRPatch;
			break;
		}
		case VIP_QUALITY_TV_SECAN:
		{
			y_ratio = scalerVIP_ratio_inner_product(LGPTFatoryMultiC34_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(LGPTFatoryMultiC34_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("lg_TV_MultiC34_y=%d,lg_TV_MultiC34_hue=%d \n",y_ratio,hue_ratio);

			if(y_ratio >=920 && hue_ratio >=920) {
				LGPTFatoryMultiC34 = 1;
			} else
				LGPTFatoryMultiC34 = 0;
			break;
		}
		case VIP_QUALITY_TV_PAL:
		{
			y_ratio = scalerVIP_ratio_inner_product(LGTVPALBGE52_y, &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(LGTVPALBGE52_hue, &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
				ROSPrintf("lg_TV_DEM_PALBG_y=%d,lg_TV_DEM_PALBG_hue=%d, motion = %d \n",y_ratio,hue_ratio, motion);

			if(y_ratio >=980 && hue_ratio >=955 && motion < 10) {
				LGTVPALBGE52 = 1;
			} else {
				LGTVPALBGE52 = 0;
			}

			break;
		}
		case VIP_QUALITY_HDMI_4k2kI_30:
		case VIP_QUALITY_HDMI_4k2kP_30:
		case VIP_QUALITY_HDMI_4k2kP_60:
		{

			//==============================================================================================//

//==============================================================================================//

			break;
		}
		default:

			break;
	}

	//smoothtoggle
	switch(RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_info_reverse_2)
	{
		case 103://_MODE_1080I25:
		{
            y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_205_y1[0], &Y_hist_ratio[0], 32);
            hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeSystem_205_hue1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
            if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_35==TRUE))
            printk("DynamicOptimizeSystem_205_y=%d hue=%d\n",y_ratio,hue_ratio);
			if(y_ratio >=980 && hue_ratio >=980)
            {
                    DynamicOptimizeSystem[205]=1;
            }
            else
            {
                    DynamicOptimizeSystem[205]=0;
            }
			break;
		}
		default:
			break;


	}



}
void scalerVIP_Identify_Pattern_forMEMC(void)
{
	unsigned short hue_ratio=0;
	unsigned short y_ratio=0;
	unsigned short hue_ratio2=0;
	unsigned short y_ratio2=0;
	unsigned short hue_ratio3=0;
	unsigned short y_ratio3=0;
	unsigned short hue_ratio4=0;
	unsigned short y_ratio4=0;
	unsigned short hue_ratio5=0;
	unsigned short y_ratio5=0;
	unsigned short hue_ratio6=0;
	unsigned short y_ratio6=0;
	unsigned short hue_ratio7=0;
	unsigned short y_ratio7=0;
	unsigned short hue_ratio8=0;
	unsigned short y_ratio8=0;
	unsigned short hue_ratio9=0;
	unsigned short y_ratio9=0;

	unsigned char i,j;
	unsigned int nIdentify_Pattern=0;

	unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);


	unsigned int DCC_Histogram_Mean_value = 0;
	unsigned int test= 0;
	_system_setting_info *VIP_system_info_structure_table = (_system_setting_info*)Scaler_GetShareMemVirAddr(SCALERIOC_VIP_system_info_structure);
		test = rtd_inl(0xb809d758);
	DCC_Histogram_Mean_value = SmartPic_clue->Hist_Y_Mean_Value;

	switch(cur_source)
	{
		//===============
		case VIP_QUALITY_TV_NTSC:
		{
			break;
		}
		case VIP_QUALITY_CVBS_NTSC:
		{
			break;
		}
		case VIP_QUALITY_CVBS_PAL:
		{
			break;
		}
		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_HDMI_576I:
		case VIP_QUALITY_HDMI_480P:
		case VIP_QUALITY_HDMI_576P:
		{
			break;
		}
		case VIP_QUALITY_HDMI_1080I:
		case VIP_QUALITY_HDMI_1080P:
		{
			break;
		}
              case VIP_QUALITY_VGA:
              {
                     break;
              }
		case VIP_QUALITY_DTV_480I:
		case VIP_QUALITY_DTV_576I:
		case VIP_QUALITY_DTV_480P:
		case VIP_QUALITY_DTV_576P:
		case VIP_QUALITY_DTV_720P:
		{
			break;
		}
	       case VIP_QUALITY_DTV_1080I:
	       {
	           	break;
	       }
		case VIP_QUALITY_DTV_1080P:
		{
			break;
		}
		case VIP_QUALITY_TV_SECAN:
		{
			break;
		}
		case VIP_QUALITY_TV_PAL:
		{
			break;
		}
		case VIP_QUALITY_HDMI_4k2kI_30:
		case VIP_QUALITY_HDMI_4k2kP_30:
		case VIP_QUALITY_HDMI_4k2kP_60:
		{

			break;
		}
		default:

			break;
	}

	//smoothtoggle
	switch(RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_info_reverse_2)
	{
		case 103://_MODE_1080I25:
		{

			break;
		}
		default:
			break;
	}

	// for all source
	//==============================================================================================//
	//MSPG PATTER 7 for MEMC
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	//hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio5,hue_ratio4);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	//hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio6,hue_ratio4);

	y_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	//hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio7,hue_ratio4);

	//y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	//hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio8,hue_ratio4);

	//y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	//hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_1_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
	//	rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_1_y=%d,DynamicOptimizeMEMC_1_hue=%d \n",y_ratio9,hue_ratio4);

	if((((y_ratio >=980)&&(hue_ratio >=980))||((y_ratio2 >=980)&&(hue_ratio2 >=980))||((y_ratio3 >=980)&&(hue_ratio3 >=980))
		||(((y_ratio4 >=980)||(y_ratio5 >=980)||(y_ratio6 >=980))&&(hue_ratio4 >=980)))
		&&(VIP_system_info_structure_table->HDR_flag!=HAL_VPQ_HDR_MODE_HLG)){
		DynamicOptimizeMEMC[1]=1;
	}else{
		DynamicOptimizeMEMC[1]=0;
	}

	//DTV NTSC 31-3 for MEMC
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_2_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_2_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_2_y=%d,DynamicOptimizeMEMC_2_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_2_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_2_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_2_y=%d,DynamicOptimizeMEMC_2_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_2_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_2_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_2_y=%d,DynamicOptimizeMEMC_2_hue=%d \n",y_ratio3,hue_ratio3);


	if((y_ratio >=980&&hue_ratio >=980)||(y_ratio2 >=980&&hue_ratio2 >=980)||(y_ratio3 >=980&&hue_ratio3 >=980))
		DynamicOptimizeMEMC[2]=1;
	else
		DynamicOptimizeMEMC[2]=0;

	//casino for MEMC
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_3_y=%d,DynamicOptimizeMEMC_3_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_3_y=%d,DynamicOptimizeMEMC_3_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_3_y=%d,DynamicOptimizeMEMC_3_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_3_y=%d,DynamicOptimizeMEMC_3_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_3_y=%d,DynamicOptimizeMEMC_3_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_3_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_3_y=%d,DynamicOptimizeMEMC_3_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=980&&hue_ratio >=980)||(y_ratio2 >=980&&hue_ratio2 >=980)||(y_ratio3 >=980&&hue_ratio3 >=980)||(y_ratio4 >=980&&hue_ratio4 >=980)||(y_ratio5 >=980&&hue_ratio5 >=980)||(y_ratio6 >=980&&hue_ratio6 >=980))
		DynamicOptimizeMEMC[3]=1;
	else
		DynamicOptimizeMEMC[3]=0;

	////======   ROKU S&M source adaptive for MEMC
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_4_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_4_y=%d,DynamicOptimizeMEMC_4_hue=%d \n",y_ratio9,hue_ratio9);
	if(hue_ratio==0) 	hue_ratio=980;
	if(hue_ratio2==0) 	hue_ratio2=980;
	if(hue_ratio3==0) 	hue_ratio3=980;
	if(hue_ratio4==0) 	hue_ratio4=980;
	if(hue_ratio5==0) 	hue_ratio5=980;
	if(hue_ratio6==0) 	hue_ratio6=980;
	if(sat_hist_ratio[0]>990 &&((y_ratio >=996&&hue_ratio >=980)||(y_ratio2 >=996&&hue_ratio2 >=980)||(y_ratio3 >=996&&hue_ratio3 >=980)||(y_ratio4 >=999&&hue_ratio4 >=980)||(y_ratio5 >=999&&hue_ratio5 >=980)||(y_ratio6 >=993&&hue_ratio6 >=980)))
		DynamicOptimizeMEMC[4]=1;
	else if((y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[4]=1;
	else
		DynamicOptimizeMEMC[4]=0;

	////DK_Zoomin_24P&MI3_Stairs_24P begin for MEMC
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_5_hue=%d,DynamicOptimizeMEMC_5_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_5_y=%d,DynamicOptimizeMEMC_5_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_5_y=%d,DynamicOptimizeMEMC_5_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_5_y=%d,DynamicOptimizeMEMC_5_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_5_y=%d,DynamicOptimizeMEMC_5_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_5_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_5_y=%d,DynamicOptimizeMEMC_5_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990))
		DynamicOptimizeMEMC[5]=1;
	else
		DynamicOptimizeMEMC[5]=0;

	////Art of Flight 00:07:34

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_6_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_6_y=%d,DynamicOptimizeMEMC_6_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[6]=1;
	else
		DynamicOptimizeMEMC[6]=0;

	////Art of Flight 01:05:56

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_7_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_7_y=%d,DynamicOptimizeMEMC_7_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[7]=1;
	else
		DynamicOptimizeMEMC[7]=0;

	////Art of Flight 00:02:28

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_8_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_8_y=%d,DynamicOptimizeMEMC_8_hue=%d \n",y_ratio9,hue_ratio9);
y_ratio4=y_ratio5=y_ratio6=y_ratio7=y_ratio8=y_ratio9=0;

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[8]=1;
	else
		DynamicOptimizeMEMC[8]=0;

	//////ROKU S&M stock ticker for MEMC

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_9_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_9_y=%d,DynamicOptimizeMEMC_9_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[9]=1;
	else
		DynamicOptimizeMEMC[9]=0;

	//////ROKU S&M resolution2 for MEMC

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_10_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_10_y=%d,DynamicOptimizeMEMC_10_hue=%d \n",y_ratio9,hue_ratio9);
	if(sat_hist_ratio[0]>990)
		hue_ratio=hue_ratio3=hue_ratio6=hue_ratio8=990;

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[10]=1;
	else
		DynamicOptimizeMEMC[10]=0;

	//Art of Flight 00:03:20/14:43

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_11_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_11_y=%d,DynamicOptimizeMEMC_11_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[11]=1;
	else
		DynamicOptimizeMEMC[11]=0;

	//Art of Flight 01:06:35

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_12_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_12_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_12_y=%d,DynamicOptimizeMEMC_12_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_12_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_12_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_12_y=%d,DynamicOptimizeMEMC_12_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_12_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_12_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_12_y=%d,DynamicOptimizeMEMC_12_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_12_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_12_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_12_y=%d,DynamicOptimizeMEMC_12_hue=%d \n",y_ratio4,hue_ratio4);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990))
		DynamicOptimizeMEMC[12]=1;
	else
		DynamicOptimizeMEMC[12]=0;

	//S&M saech on a hammock

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_13_y=%d,DynamicOptimizeMEMC_13_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_13_y=%d,DynamicOptimizeMEMC_13_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_13_y=%d,DynamicOptimizeMEMC_13_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_13_y=%d,DynamicOptimizeMEMC_13_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_13_y=%d,DynamicOptimizeMEMC_13_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_13_y=%d,DynamicOptimizeMEMC_13_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_13_y=%d,DynamicOptimizeMEMC_13_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_13_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_13_y=%d,DynamicOptimizeMEMC_13_hue=%d \n",y_ratio8,hue_ratio8);
	y_ratio5=y_ratio6=y_ratio7=y_ratio8=0;
	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990))
		DynamicOptimizeMEMC[13]=1;
	else
		DynamicOptimizeMEMC[13]=0;

	//S&M saech on a hammock  osd

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_14_y=%d,DynamicOptimizeMEMC_14_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_14_y=%d,DynamicOptimizeMEMC_14_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_14_y=%d,DynamicOptimizeMEMC_14_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_14_y=%d,DynamicOptimizeMEMC_14_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_14_y=%d,DynamicOptimizeMEMC_14_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_14_y=%d,DynamicOptimizeMEMC_14_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_14_y=%d,DynamicOptimizeMEMC_14_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_14_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_14_y=%d,DynamicOptimizeMEMC_14_hue=%d \n",y_ratio8,hue_ratio8);
	y_ratio=y_ratio2=y_ratio3=y_ratio4 =0;
	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990))
		DynamicOptimizeMEMC[14]=1;
	else
		DynamicOptimizeMEMC[14]=0;

	//Downtown 30s  /Art of Flight 00:20:55 /Art of Flight 00:21:55

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_15_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_15_y=%d,DynamicOptimizeMEMC_15_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[15]=1;
	else
		DynamicOptimizeMEMC[15]=0;

	//Harbour_var_24P

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_16_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_16_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_16_y=%d,DynamicOptimizeMEMC_16_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_16_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_16_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_16_y=%d,DynamicOptimizeMEMC_16_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_16_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_16_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_16_y=%d,DynamicOptimizeMEMC_16_hue=%d \n",y_ratio3,hue_ratio3);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000))
		DynamicOptimizeMEMC[16]=1;
	else
		DynamicOptimizeMEMC[16]=0;

	//HD_H_R_24P /Art of Flight 22:17

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_17_y=%d,DynamicOptimizeMEMC_17_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_17_y=%d,DynamicOptimizeMEMC_17_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_17_y=%d,DynamicOptimizeMEMC_17_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_17_y=%d,DynamicOptimizeMEMC_17_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_17_y=%d,DynamicOptimizeMEMC_17_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_17_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_17_y=%d,DynamicOptimizeMEMC_17_hue=%d \n",y_ratio6,hue_ratio6);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000))
		DynamicOptimizeMEMC[17]=1;
	else
		DynamicOptimizeMEMC[17]=0;

	//Transformers

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_18_y=%d,DynamicOptimizeMEMC_18_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_18_y=%d,DynamicOptimizeMEMC_18_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_18_y=%d,DynamicOptimizeMEMC_18_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_18_y=%d,DynamicOptimizeMEMC_18_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_18_y=%d,DynamicOptimizeMEMC_18_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_18_y=%d,DynamicOptimizeMEMC_18_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_18_y=%d,DynamicOptimizeMEMC_18_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_18_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_18_y=%d,DynamicOptimizeMEMC_18_hue=%d \n",y_ratio8,hue_ratio8);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990))
		DynamicOptimizeMEMC[18]=1;
	else
		DynamicOptimizeMEMC[18]=0;

	//Emperor_offical_trailer  33s

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_19_y=%d,DynamicOptimizeMEMC_19_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_19_y=%d,DynamicOptimizeMEMC_19_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_19_y=%d,DynamicOptimizeMEMC_19_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_19_y=%d,DynamicOptimizeMEMC_19_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_19_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_19_y=%d,DynamicOptimizeMEMC_19_hue=%d \n",y_ratio5,hue_ratio5);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=990))
		DynamicOptimizeMEMC[19]=1;
	else
		DynamicOptimizeMEMC[19]=0;



	//samsaa_repeat_18_15/samsaa_repeat_43_45

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_20_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_20_y=%d,DynamicOptimizeMEMC_20_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[20]=1;
	else
		DynamicOptimizeMEMC[20]=0;

	//Emperor_offical_trailer  33s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_21_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_21_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		ROSPrintf("DynamicOptimizeSystem_200_y1=%d,DynamicOptimizeSystem_200_hue1=%d \n",y_ratio,hue_ratio);

	if((y_ratio >=980)&&(hue_ratio >=980))
		DynamicOptimizeMEMC[21]=1;
	else
		DynamicOptimizeMEMC[21]=0;

	//u8_casino_royale

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_22_y=%d,DynamicOptimizeMEMC_22_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_22_y=%d,DynamicOptimizeMEMC_22_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_22_y=%d,DynamicOptimizeMEMC_22_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_22_y=%d,DynamicOptimizeMEMC_22_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_22_y=%d,DynamicOptimizeMEMC_22_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_22_y=%d,DynamicOptimizeMEMC_22_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_22_y=%d,DynamicOptimizeMEMC_22_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_22_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_22_y=%d,DynamicOptimizeMEMC_22_hue=%d \n",y_ratio8,hue_ratio8);

	if((y_ratio >=980&&hue_ratio >=980)||(y_ratio2 >=980&&hue_ratio2 >=980)||(y_ratio3 >=980&&hue_ratio3 >=980)||(y_ratio4 >=980&&hue_ratio4 >=980)||
		(y_ratio5 >=980&&hue_ratio5 >=980)||(y_ratio6 >=980&&hue_ratio6 >=980)||(y_ratio7 >=980&&hue_ratio7 >=980)||(y_ratio8 >=980&&hue_ratio8 >=980))
		DynamicOptimizeMEMC[22]=1;
	else
		DynamicOptimizeMEMC[22]=0;

	//HQV Multi-Cadence

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_23_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_23_y=%d,DynamicOptimizeMEMC_23_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[23]=1;
	else
		DynamicOptimizeMEMC[23]=0;

	//Tokyo night 02:55

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_24_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_24_y=%d,DynamicOptimizeMEMC_24_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[24]=1;
	else
		DynamicOptimizeMEMC[24]=0;

	//LALA LANED 1:14:25

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_25_y=%d,DynamicOptimizeMEMC_25_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_25_y=%d,DynamicOptimizeMEMC_25_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_25_y=%d,DynamicOptimizeMEMC_25_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_25_y=%d,DynamicOptimizeMEMC_25_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_25_y=%d,DynamicOptimizeMEMC_25_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_25_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_25_y=%d,DynamicOptimizeMEMC_25_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000))
		DynamicOptimizeMEMC[25]=1;
	else
		DynamicOptimizeMEMC[25]=0;

	//Teaser16_24

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_26_y=%d,DynamicOptimizeMEMC_26_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_26_y=%d,DynamicOptimizeMEMC_26_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_26_y=%d,DynamicOptimizeMEMC_26_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_26_y=%d,DynamicOptimizeMEMC_26_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_26_y=%d,DynamicOptimizeMEMC_26_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_26_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_26_y=%d,DynamicOptimizeMEMC_26_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000))
		DynamicOptimizeMEMC[26]=1;
	else
		DynamicOptimizeMEMC[26]=0;

        //Art of Flight 00:11:36  /00:15:11 /00:46:40

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_27_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_27_y=%d,DynamicOptimizeMEMC_27_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=980&&hue_ratio5 >=980)||(y_ratio6 >=980&&hue_ratio6 >=980)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[27]=1;
	else
		DynamicOptimizeMEMC[27]=0;

	 // LGE xmen_apocalypse

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_28_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000)||(y_ratio9 >=1000&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[28]=1;
	else
		DynamicOptimizeMEMC[28]=0;


	//TG 45 monoscope, tv002
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_29_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_29_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_29_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_29_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_29_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_29_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_29_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	y_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_29_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_29_y=%d,DynamicOptimizeMEMC_29_hue=%d \n",y_ratio,hue_ratio);


	if(((y_ratio >=1000&&hue_ratio ==0)&&(DCC_Histogram_Mean_value>=66&&DCC_Histogram_Mean_value<=68))&&
		(((y_ratio2 >=1000||y_ratio3 >=1000||y_ratio4 >=1000||y_ratio5 >=1000||y_ratio6 >=1000)&&hue_ratio ==0)&&(DCC_Histogram_Mean_value>=62&&DCC_Histogram_Mean_value<=65))&&
		((y_ratio7 >=1000&&hue_ratio ==0)&&(DCC_Histogram_Mean_value>=66&&DCC_Histogram_Mean_value<=68))&&
		(sat_ratio_mean_value>=30&&sat_ratio_mean_value<=32))
		DynamicOptimizeMEMC[29]=1;
	else
		DynamicOptimizeMEMC[29]=0;


	 // Art of Flight 11:12  /22:01

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_30_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_30_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_30_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_30_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_30_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_28_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_28_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_30_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_30_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_30_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_30_y=%d,DynamicOptimizeMEMC_30_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000)||(y_ratio9 >=1000&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[30]=1;
	else
		DynamicOptimizeMEMC[30]=0;

	// Art of Flight  22:50

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_31_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_31_y=%d,DynamicOptimizeMEMC_31_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000)||(y_ratio9 >=1000&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[31]=1;
	else
		DynamicOptimizeMEMC[31]=0;

	// Art of Flight  22:20

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_32_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_32_y=%d,DynamicOptimizeMEMC_32_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[32]=1;
	else
		DynamicOptimizeMEMC[32]=0;

	// Art of Flight  26:40

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_33_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_33_y=%d,DynamicOptimizeMEMC_33_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[33]=1;
	else
		DynamicOptimizeMEMC[33]=0;

	 //SAMSARA  16:10  /14:33

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_34_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_34_y=%d,DynamicOptimizeMEMC_34_hue=%d \n",y_ratio9,hue_ratio9);



	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000)||(y_ratio9 >=1000&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[34]=1;
	else
		DynamicOptimizeMEMC[34]=0;

	//SAMSARA  51:52

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_35_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_35_y=%d,DynamicOptimizeMEMC_35_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000)||(y_ratio9 >=1000&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[35]=1;
	else
		DynamicOptimizeMEMC[35]=0;

	//SAMSARA  53:11

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_36_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_36_y=%d,DynamicOptimizeMEMC_36_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000)||(y_ratio9 >=1000&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[36]=1;
	else
		DynamicOptimizeMEMC[36]=0;

	//SAMSARA  01:01:24

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_37_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_37_y=%d,DynamicOptimizeMEMC_37_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000)||(y_ratio9 >=1000&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[37]=1;
	else
		DynamicOptimizeMEMC[37]=0;

	//Art of Flight 33:34

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_38_y=%d,DynamicOptimizeMEMC_38_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_38_y=%d,DynamicOptimizeMEMC_38_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_38_y=%d,DynamicOptimizeMEMC_38_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_38_y=%d,DynamicOptimizeMEMC_38_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_38_y=%d,DynamicOptimizeMEMC_38_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_38_y=%d,DynamicOptimizeMEMC_38_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_38_y=%d,DynamicOptimizeMEMC_38_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_38_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_38_y=%d,DynamicOptimizeMEMC_38_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000)||(y_ratio8 >=1000&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[38]=1;
	else
		DynamicOptimizeMEMC[38]=0;

	//Art of Flight 00:34 /2:23

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_39_y=%d,DynamicOptimizeMEMC_39_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_39_y=%d,DynamicOptimizeMEMC_39_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_39_y=%d,DynamicOptimizeMEMC_39_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_39_y=%d,DynamicOptimizeMEMC_39_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_39_y=%d,DynamicOptimizeMEMC_39_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_39_y=%d,DynamicOptimizeMEMC_39_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_39_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_39_y=%d,DynamicOptimizeMEMC_39_hue=%d \n",y_ratio7,hue_ratio7);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000)||(y_ratio7 >=1000&&hue_ratio7 >=1000))
		DynamicOptimizeMEMC[39]=1;
	else
		DynamicOptimizeMEMC[39]=0;

	//roku regression test film32

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_40_y=%d,DynamicOptimizeMEMC_40_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_40_y=%d,DynamicOptimizeMEMC_40_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_40_y=%d,DynamicOptimizeMEMC_40_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_40_y=%d,DynamicOptimizeMEMC_40_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_40_y=%d,DynamicOptimizeMEMC_40_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_40_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_40_y=%d,DynamicOptimizeMEMC_40_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000)||(y_ratio5 >=1000&&hue_ratio5 >=1000)||(y_ratio6 >=1000&&hue_ratio6 >=1000))
		DynamicOptimizeMEMC[40]=1;
	else
		DynamicOptimizeMEMC[40]=0;

	//Art of Flight 01:05:42 2k

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_41_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_41_y=%d,DynamicOptimizeMEMC_41_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[41]=1;
	else
		DynamicOptimizeMEMC[41]=0;

	//Art of Flight 01:05:42 4k

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_42_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_42_y=%d,DynamicOptimizeMEMC_42_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[42]=1;
	else
		DynamicOptimizeMEMC[42]=0;

	//Art of Flight 01:10:09

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_43_y=%d,DynamicOptimizeMEMC_43_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_43_y=%d,DynamicOptimizeMEMC_43_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_43_y=%d,DynamicOptimizeMEMC_43_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_43_y=%d,DynamicOptimizeMEMC_43_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_43_y=%d,DynamicOptimizeMEMC_43_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_43_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_43_y=%d,DynamicOptimizeMEMC_43_hue=%d \n",y_ratio6,hue_ratio6);

	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000))
		DynamicOptimizeMEMC[43]=1;
	else
		DynamicOptimizeMEMC[43]=0;

	//SAMSARA 33:50

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_44_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_44_y=%d,DynamicOptimizeMEMC_44_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[44]=1;
	else
		DynamicOptimizeMEMC[44]=0;

	//SAMSARA 51:50

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_45_y=%d,DynamicOptimizeMEMC_45_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_45_y=%d,DynamicOptimizeMEMC_45_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_45_y=%d,DynamicOptimizeMEMC_45_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_45_y=%d,DynamicOptimizeMEMC_45_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_45_y=%d,DynamicOptimizeMEMC_45_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_45_y=%d,DynamicOptimizeMEMC_45_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_45_y=%d,DynamicOptimizeMEMC_45_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_45_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_45_y=%d,DynamicOptimizeMEMC_45_hue=%d \n",y_ratio8,hue_ratio8);

	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[45]=1;
	else
		DynamicOptimizeMEMC[45]=0;

	//sony EX_Tomb Raider 2

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_46_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_46_y=%d,DynamicOptimizeMEMC_46_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=980&&hue_ratio >=1000)||(y_ratio2 >=980&&hue_ratio2 >=1000)||(y_ratio3 >=980&&hue_ratio3 >=1000)||(y_ratio4 >=980&&hue_ratio4 >=1000)||(y_ratio5 >=980&&hue_ratio5 >=1000)||(y_ratio6 >=980&&hue_ratio6 >=1000)||(y_ratio7 >=980&&hue_ratio7 >=1000)||(y_ratio8 >=980&&hue_ratio8 >=1000)||(y_ratio9 >=980&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[46]=1;
	else
		DynamicOptimizeMEMC[46]=0;

	//sony for_Periodical_Pattern

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_47_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_47_y=%d,DynamicOptimizeMEMC_47_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=980&&hue_ratio >=1000)||(y_ratio2 >=980&&hue_ratio2 >=1000)||(y_ratio3 >=980&&hue_ratio3 >=1000)||(y_ratio4 >=980&&hue_ratio4 >=1000)||(y_ratio5 >=980&&hue_ratio5 >=1000)||(y_ratio6 >=980&&hue_ratio6 >=1000)||(y_ratio7 >=980&&hue_ratio7 >=1000)||(y_ratio8 >=980&&hue_ratio8 >=1000)||(y_ratio9 >=980&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[47]=1;
	else
		DynamicOptimizeMEMC[47]=0;

	//sony GLEE - Ride Wit Me #1

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_48_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_48_y=%d,DynamicOptimizeMEMC_48_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[48]=1;
	else
		DynamicOptimizeMEMC[48]=0;

	//sony GLEE - Ride Wit Me #2

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_49_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_49_y=%d,DynamicOptimizeMEMC_49_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[49]=1;
	else
		DynamicOptimizeMEMC[49]=0;

         //sony 3:2 film &ScrollSmallText 60i
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_50_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_50_y=%d,DynamicOptimizeMEMC_50_hue=%d \n",y_ratio9,hue_ratio9);

	if((sat_hist_ratio[0] >=260 && sat_hist_ratio[0] <=370&&sat_hist_ratio[1] >=190 && sat_hist_ratio[1] <=280)&&(Y_hist_ratio[2] >=80 && Y_hist_ratio[2] <=94)&&((y_ratio >=960&&hue_ratio >=1000)||(y_ratio2 >=960&&hue_ratio2 >=1000)||(y_ratio3 >=960&&hue_ratio3 >=1000)||(y_ratio4 >=960&&hue_ratio4 >=1000)||(y_ratio5 >=960&&hue_ratio5 >=1000)||(y_ratio6 >=960&&hue_ratio6 >=1000)||(y_ratio7 >=960&&hue_ratio7 >=1000)))
		DynamicOptimizeMEMC[50]=1;
	else if((sat_hist_ratio[0] >=260 && sat_hist_ratio[0] <=370&&sat_hist_ratio[1] >=190 && sat_hist_ratio[1] <=280)&&(Y_hist_ratio[0] >=77 && Y_hist_ratio[0] <=90)&&((y_ratio8 >=960&&hue_ratio8 >=1000)||(y_ratio9 >=960&&hue_ratio9 >=1000)))
		DynamicOptimizeMEMC[50]=1;
	else
		DynamicOptimizeMEMC[50]=0;

	//Art of Flight 01:23/01:27/01:18

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_51_y=%d,DynamicOptimizeMEMC_51_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_51_y=%d,DynamicOptimizeMEMC_51_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_51_y=%d,DynamicOptimizeMEMC_51_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_51_y=%d,DynamicOptimizeMEMC_51_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_51_y=%d,DynamicOptimizeMEMC_51_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_51_y=%d,DynamicOptimizeMEMC_51_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_51_y=%d,DynamicOptimizeMEMC_51_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_51_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_51_y=%d,DynamicOptimizeMEMC_51_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=960&&hue_ratio >=980)||(y_ratio2 >=960&&hue_ratio2 >=980)||(y_ratio3 >=960&&hue_ratio3 >=990)||(y_ratio4 >=960&&hue_ratio4 >=980)||(y_ratio5 >=960&&hue_ratio5 >=980)||(y_ratio6 >=960&&hue_ratio6 >=980)||(y_ratio7 >=960&&hue_ratio7 >=990)||(y_ratio8 >=960&&hue_ratio8 >=980))
		DynamicOptimizeMEMC[51]=1;
	else
		DynamicOptimizeMEMC[51]=0;

	//Art of Flight 05:29

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_52_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_52_y=%d,DynamicOptimizeMEMC_52_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=980&&hue_ratio >=990)||(y_ratio2 >=980&&hue_ratio2 >=990)||(y_ratio3 >=980&&hue_ratio3 >=990)||(y_ratio4 >=980&&hue_ratio4 >=990)||(y_ratio5 >=980&&hue_ratio5 >=990)||(y_ratio6 >=980&&hue_ratio6 >=990)||(y_ratio7 >=980&&hue_ratio7 >=990)||(y_ratio8 >=980&&hue_ratio8 >=990)||(y_ratio9 >=980&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[52]=1;
	else
		DynamicOptimizeMEMC[52]=0;

	//Art of Flight 06:33

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_53_y=%d,DynamicOptimizeMEMC_53_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_53_y=%d,DynamicOptimizeMEMC_53_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_53_y=%d,DynamicOptimizeMEMC_53_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_53_y=%d,DynamicOptimizeMEMC_53_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_53_y=%d,DynamicOptimizeMEMC_53_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_53_y=%d,DynamicOptimizeMEMC_53_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_53_y=%d,DynamicOptimizeMEMC_53_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_53_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_53_y=%d,DynamicOptimizeMEMC_53_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=970&&hue_ratio >=980)||(y_ratio2 >=970&&hue_ratio2 >=980)||(y_ratio3 >=970&&hue_ratio3 >=980)||(y_ratio4 >=970&&hue_ratio4 >=980)||(y_ratio5 >=970&&hue_ratio5 >=980)||(y_ratio6 >=970&&hue_ratio6 >=980)||(y_ratio7 >=970&&hue_ratio7 >=980)||(y_ratio8 >=970&&hue_ratio8 >=980))
		DynamicOptimizeMEMC[53]=1;
	else
		DynamicOptimizeMEMC[53]=0;

	//Art of Flight 06:45

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_54_y=%d,DynamicOptimizeMEMC_54_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_54_y=%d,DynamicOptimizeMEMC_54_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_54_y=%d,DynamicOptimizeMEMC_54_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_54_y=%d,DynamicOptimizeMEMC_54_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_54_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_54_y=%d,DynamicOptimizeMEMC_54_hue=%d \n",y_ratio5,hue_ratio5);


	if((y_ratio >=960&&hue_ratio >=980)||(y_ratio2 >=960&&hue_ratio2 >=980)||(y_ratio3 >=960&&hue_ratio3 >=980)||(y_ratio4 >=980&&hue_ratio4 >=990)||(y_ratio5 >=980&&hue_ratio5 >=990))
		DynamicOptimizeMEMC[54]=1;
	else
		DynamicOptimizeMEMC[54]=0;

	//Art of Flight 08:19

	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_55_y=%d,DynamicOptimizeMEMC_55_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_55_y=%d,DynamicOptimizeMEMC_55_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_55_y=%d,DynamicOptimizeMEMC_55_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_55_y=%d,DynamicOptimizeMEMC_55_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_55_y=%d,DynamicOptimizeMEMC_55_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_55_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_55_y=%d,DynamicOptimizeMEMC_55_hue=%d \n",y_ratio6,hue_ratio6);

	if((y_ratio >=960&&hue_ratio >=980)||(y_ratio2 >=960&&hue_ratio2 >=980)||(y_ratio3 >=960&&hue_ratio3 >=980)||(y_ratio4 >=980&&hue_ratio4 >=990)||(y_ratio5 >=980&&hue_ratio5 >=990)||(y_ratio6 >=980&&hue_ratio6 >=990))
		DynamicOptimizeMEMC[55]=1;
	else
		DynamicOptimizeMEMC[55]=0;

	//Art of Flight 15:28
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_56_y=%d,DynamicOptimizeMEMC_56_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_56_y=%d,DynamicOptimizeMEMC_56_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_56_y=%d,DynamicOptimizeMEMC_56_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_56_y=%d,DynamicOptimizeMEMC_56_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_56_y=%d,DynamicOptimizeMEMC_56_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_56_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_56_y=%d,DynamicOptimizeMEMC_56_hue=%d \n",y_ratio6,hue_ratio6);

	if((y_ratio >=970&&hue_ratio >=990)||(y_ratio2 >=970&&hue_ratio2 >=990)||(y_ratio3 >=970&&hue_ratio3 >=990)||(y_ratio4 >=980&&hue_ratio4 >=990)||(y_ratio5 >=980&&hue_ratio5 >=990)||(y_ratio6 >=980&&hue_ratio6 >=990))
		DynamicOptimizeMEMC[56]=1;
	else
		DynamicOptimizeMEMC[56]=0;

	//Art of Flight 17:05
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_57_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_57_y=%d,DynamicOptimizeMEMC_57_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=960&&hue_ratio >=980)||(y_ratio2 >=960&&hue_ratio2 >=980)||(y_ratio3 >=960&&hue_ratio3 >=980)||(y_ratio4 >=960&&hue_ratio4 >=980)||(y_ratio5 >=960&&hue_ratio5 >=980)||(y_ratio6 >=980&&hue_ratio6 >=990)||(y_ratio7 >=980&&hue_ratio7 >=990)||(y_ratio8 >=980&&hue_ratio8 >=990)||(y_ratio9 >=980&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[57]=1;
	else
		DynamicOptimizeMEMC[57]=0;

	//TCL test pattern vertrez24p/Soap Opera Effect test 02:00/ 02:40 / 03:40 / 03:30
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_58_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_58_y=%d,DynamicOptimizeMEMC_58_hue=%d \n",y_ratio9,hue_ratio9);
	if(hue_ratio2 == 0)
		hue_ratio2=990;
	if(hue_ratio3 == 0)
		hue_ratio3=990;
	if(hue_ratio4 == 0)
		hue_ratio4=990;
	if(hue_ratio5 == 0)
		hue_ratio5=990;
	if(hue_ratio6 == 0)
		hue_ratio6=990;
	if(hue_ratio7 == 0)
		hue_ratio7=990;
	if(hue_ratio8 == 0)
		hue_ratio8=990;
	if(hue_ratio9 == 0)
		hue_ratio9=990;
	if((sat_hist_ratio[0]>990)&&((y_ratio >=980&&hue_ratio >=990)||(y_ratio2 >=980&&hue_ratio2 >=990)||(y_ratio3 >=980&&hue_ratio3 >=990)||(y_ratio4 >=980&&hue_ratio4 >=990)||(y_ratio5 >=980&&hue_ratio5 >=990)||(y_ratio6 >=980&&hue_ratio6 >=990)||(y_ratio7 >=970&&hue_ratio7 >=990)||(y_ratio8 >=970&&hue_ratio8 >=990)||(y_ratio9 >=1000&&hue_ratio9 >=990)))
		DynamicOptimizeMEMC[58]=1;
	else
		DynamicOptimizeMEMC[58]=0;

	//TCL test pattern Soap Opera Effect test 00:19
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_59_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_59_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_59_y=%d,DynamicOptimizeMEMC_59_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_59_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_59_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_59_y=%d,DynamicOptimizeMEMC_59_hue=%d \n",y_ratio2,hue_ratio2);

	if(hue_ratio == 0)
		hue_ratio=990;
	if(hue_ratio2 == 0)
		hue_ratio2=990;
	if((sat_hist_ratio[0]>990)&&((y_ratio >=980&&hue_ratio >=990)||(y_ratio2 >=980&&hue_ratio2 >=990)))
		DynamicOptimizeMEMC[59]=1;
	else
		DynamicOptimizeMEMC[59]=0;

	 //ROKU S&M source adaptive black chroma for MEMC
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_60_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_60_y=%d,DynamicOptimizeMEMC_60_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=980&&hue_ratio >=990)||(y_ratio2 >=980&&hue_ratio2 >=990)||(y_ratio3 >=960&&hue_ratio3 >=980)||(y_ratio4 >=960&&hue_ratio4 >=980)||(y_ratio5 >=960&&hue_ratio5 >=980)||(y_ratio6 >=980&&hue_ratio6 >=990)||(y_ratio7 >=980&&hue_ratio7 >=990)||(y_ratio8 >=980&&hue_ratio8 >=990)||(y_ratio9 >=980&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[60]=1;
	else
		DynamicOptimizeMEMC[60]=0;

	 //ROKU S&M source adaptive gray chroma for MEMC
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_61_y=%d,DynamicOptimizeMEMC_61_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_61_y=%d,DynamicOptimizeMEMC_61_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_61_y=%d,DynamicOptimizeMEMC_61_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_61_y=%d,DynamicOptimizeMEMC_61_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_61_y=%d,DynamicOptimizeMEMC_61_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_61_y=%d,DynamicOptimizeMEMC_61_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_61_y=%d,DynamicOptimizeMEMC_61_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_61_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_61_y=%d,DynamicOptimizeMEMC_61_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=980&&hue_ratio >=990)||(y_ratio2 >=980&&hue_ratio2 >=990)||(y_ratio3 >=960&&hue_ratio3 >=980)||(y_ratio4 >=960&&hue_ratio4 >=980)||(y_ratio5 >=960&&hue_ratio5 >=980)||(y_ratio6 >=980&&hue_ratio6 >=990)||(y_ratio7 >=980&&hue_ratio7 >=990)||(y_ratio8 >=980&&hue_ratio8 >=990))
		DynamicOptimizeMEMC[61]=1;
	else
		DynamicOptimizeMEMC[61]=0;

	 //Art of Flight 18:27
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_62_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_62_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_62_y=%d,DynamicOptimizeMEMC_62_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_62_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_62_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_62_y=%d,DynamicOptimizeMEMC_62_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_62_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_62_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_62_y=%d,DynamicOptimizeMEMC_62_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_62_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_62_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_62_y=%d,DynamicOptimizeMEMC_62_hue=%d \n",y_ratio4,hue_ratio4);

	if((y_ratio >=1000&&hue_ratio >=1000)||(y_ratio2 >=1000&&hue_ratio2 >=1000)||(y_ratio3 >=1000&&hue_ratio3 >=1000)||(y_ratio4 >=1000&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[62]=1;
	else
		DynamicOptimizeMEMC[62]=0;

	//SAMSARA 13:28
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_63_y=%d,DynamicOptimizeMEMC_63_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_63_y=%d,DynamicOptimizeMEMC_63_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_63_y=%d,DynamicOptimizeMEMC_63_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_63_y=%d,DynamicOptimizeMEMC_63_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_63_y=%d,DynamicOptimizeMEMC_63_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_63_y=%d,DynamicOptimizeMEMC_63_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_63_y=%d,DynamicOptimizeMEMC_63_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_63_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_63_y=%d,DynamicOptimizeMEMC_63_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=980&&hue_ratio >=990)||(y_ratio2 >=970&&hue_ratio2 >=990)||(y_ratio3 >=960&&hue_ratio3 >=990)||(y_ratio4 >=960&&hue_ratio4 >=990)||(y_ratio5 >=960&&hue_ratio5 >=990)||(y_ratio6 >=960&&hue_ratio6 >=990)||(y_ratio7 >=960&&hue_ratio7 >=990)||(y_ratio8 >=960&&hue_ratio8 >=990))
		DynamicOptimizeMEMC[63]=1;
	else
		DynamicOptimizeMEMC[63]=0;

	//SAMSARA 50:50
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_64_y=%d,DynamicOptimizeMEMC_64_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_64_y=%d,DynamicOptimizeMEMC_64_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_64_y=%d,DynamicOptimizeMEMC_64_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_64_y=%d,DynamicOptimizeMEMC_64_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_64_y=%d,DynamicOptimizeMEMC_64_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_64_y=%d,DynamicOptimizeMEMC_64_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_64_y=%d,DynamicOptimizeMEMC_64_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_64_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_64_y=%d,DynamicOptimizeMEMC_64_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990))
		DynamicOptimizeMEMC[64]=1;
	else
		DynamicOptimizeMEMC[64]=0;

	//SAMSARA 53:25
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_65_y=%d,DynamicOptimizeMEMC_65_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_65_y=%d,DynamicOptimizeMEMC_65_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_65_y=%d,DynamicOptimizeMEMC_65_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_65_y=%d,DynamicOptimizeMEMC_65_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_65_y=%d,DynamicOptimizeMEMC_65_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_65_y=%d,DynamicOptimizeMEMC_65_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_65_y=%d,DynamicOptimizeMEMC_65_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_65_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_65_y=%d,DynamicOptimizeMEMC_65_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990))
		DynamicOptimizeMEMC[65]=1;
	else
		DynamicOptimizeMEMC[65]=0;

	//SAMSARA 1:23:15
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_66_y=%d,DynamicOptimizeMEMC_66_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_66_y=%d,DynamicOptimizeMEMC_66_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_66_y=%d,DynamicOptimizeMEMC_66_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_66_y=%d,DynamicOptimizeMEMC_66_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_66_y=%d,DynamicOptimizeMEMC_66_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_66_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_66_y=%d,DynamicOptimizeMEMC_66_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=992&&hue_ratio3 >=990)||(y_ratio4 >=992&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=992&&hue_ratio6 >=995))
		DynamicOptimizeMEMC[66]=1;
	else
		DynamicOptimizeMEMC[66]=0;

	//sony GLEE - Ride Wit Me #3
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_67_y=%d,DynamicOptimizeMEMC_67_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_67_y=%d,DynamicOptimizeMEMC_67_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_67_y=%d,DynamicOptimizeMEMC_67_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_67_y=%d,DynamicOptimizeMEMC_67_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_67_y=%d,DynamicOptimizeMEMC_67_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_67_y=%d,DynamicOptimizeMEMC_67_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_67_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_67_y=%d,DynamicOptimizeMEMC_67_hue=%d \n",y_ratio7,hue_ratio7);

	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000))
		DynamicOptimizeMEMC[67]=1;
	else
		DynamicOptimizeMEMC[67]=0;

	//ULTRAVIOLET 02:18
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_68_y=%d,DynamicOptimizeMEMC_68_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_68_y=%d,DynamicOptimizeMEMC_68_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_68_y=%d,DynamicOptimizeMEMC_68_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_68_y=%d,DynamicOptimizeMEMC_68_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_68_y=%d,DynamicOptimizeMEMC_68_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_68_y=%d,DynamicOptimizeMEMC_68_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_68_y=%d,DynamicOptimizeMEMC_68_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_68_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_68_y=%d,DynamicOptimizeMEMC_68_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7 >=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990))
		DynamicOptimizeMEMC[68]=1;
	else
		DynamicOptimizeMEMC[68]=0;

	//Art of Flight 46:20
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_69_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_69_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_69_y=%d,DynamicOptimizeMEMC_69_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_69_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_69_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_69_y=%d,DynamicOptimizeMEMC_69_hue=%d \n",y_ratio2,hue_ratio2);



	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000))
		DynamicOptimizeMEMC[69]=1;
	else
		DynamicOptimizeMEMC[69]=0;

	//Art of Flight 50:49
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_70_y=%d,DynamicOptimizeMEMC_70_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_70_y=%d,DynamicOptimizeMEMC_70_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_70_y=%d,DynamicOptimizeMEMC_70_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_70_y=%d,DynamicOptimizeMEMC_70_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_70_y=%d,DynamicOptimizeMEMC_70_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_70_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_70_y=%d,DynamicOptimizeMEMC_70_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=980&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000))
		DynamicOptimizeMEMC[70]=1;
	else
		DynamicOptimizeMEMC[70]=0;

	//Art of Flight 52:27
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_71_y=%d,DynamicOptimizeMEMC_71_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_71_y=%d,DynamicOptimizeMEMC_71_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_71_y=%d,DynamicOptimizeMEMC_71_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_71_y=%d,DynamicOptimizeMEMC_71_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_71_y=%d,DynamicOptimizeMEMC_71_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_71_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_71_y=%d,DynamicOptimizeMEMC_71_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000))
		DynamicOptimizeMEMC[71]=1;
	else
		DynamicOptimizeMEMC[71]=0;

	//Art of Flight 59:20
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_72_y=%d,DynamicOptimizeMEMC_72_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_72_y=%d,DynamicOptimizeMEMC_72_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_72_y=%d,DynamicOptimizeMEMC_72_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_72_y=%d,DynamicOptimizeMEMC_72_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_72_y=%d,DynamicOptimizeMEMC_72_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_72_y=%d,DynamicOptimizeMEMC_72_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_72_y=%d,DynamicOptimizeMEMC_72_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_72_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_72_y=%d,DynamicOptimizeMEMC_72_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[72]=1;
	else
		DynamicOptimizeMEMC[72]=0;


	//Art of Flight 59:55
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_73_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_73_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_73_y=%d,DynamicOptimizeMEMC_73_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_73_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_73_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_73_y=%d,DynamicOptimizeMEMC_73_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_73_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_73_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_73_y=%d,DynamicOptimizeMEMC_73_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_73_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_73_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_73_y=%d,DynamicOptimizeMEMC_73_hue=%d \n",y_ratio4,hue_ratio4);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[73]=1;
	else
		DynamicOptimizeMEMC[73]=0;

	//Art of Flight 59:57
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_74_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_74_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_74_y=%d,DynamicOptimizeMEMC_74_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_74_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_74_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_74_y=%d,DynamicOptimizeMEMC_74_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_74_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_74_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_74_y=%d,DynamicOptimizeMEMC_74_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_74_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_74_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_74_y=%d,DynamicOptimizeMEMC_74_hue=%d \n",y_ratio4,hue_ratio4);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[74]=1;
	else
		DynamicOptimizeMEMC[74]=0;

	//Art of Flight 01:03:18
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_75_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio =scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_75_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_75_y=%d,DynamicOptimizeMEMC_75_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_75_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_75_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_75_y=%d,DynamicOptimizeMEMC_75_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_75_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_75_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_75_y=%d,DynamicOptimizeMEMC_75_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_75_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_75_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_75_y=%d,DynamicOptimizeMEMC_75_hue=%d \n",y_ratio4,hue_ratio4);



	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[75]=1;
	else
		DynamicOptimizeMEMC[75]=0;

	//Art of Flight 01:00:33
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_76_y=%d,DynamicOptimizeMEMC_76_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_76_y=%d,DynamicOptimizeMEMC_76_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_76_y=%d,DynamicOptimizeMEMC_76_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_76_y=%d,DynamicOptimizeMEMC_76_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_76_y=%d,DynamicOptimizeMEMC_76_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_76_y=%d,DynamicOptimizeMEMC_76_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_76_y=%d,DynamicOptimizeMEMC_76_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_76_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_76_y=%d,DynamicOptimizeMEMC_76_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7 >=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[76]=1;
	else
		DynamicOptimizeMEMC[76]=0;

	//Art of Flight 01:06:17
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_77_y=%d,DynamicOptimizeMEMC_77_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_77_y=%d,DynamicOptimizeMEMC_77_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_77_y=%d,DynamicOptimizeMEMC_77_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_77_y=%d,DynamicOptimizeMEMC_77_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_77_y=%d,DynamicOptimizeMEMC_77_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_77_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_77_y=%d,DynamicOptimizeMEMC_77_hue=%d \n",y_ratio6,hue_ratio6);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000))
		DynamicOptimizeMEMC[77]=1;
	else
		DynamicOptimizeMEMC[77]=0;

	//fast five_complex_1_33_42_long
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_78_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_78_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_78_y=%d,DynamicOptimizeMEMC_78_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_78_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_78_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_78_y=%d,DynamicOptimizeMEMC_78_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_78_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_78_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_78_y=%d,DynamicOptimizeMEMC_78_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_78_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_78_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_78_y=%d,DynamicOptimizeMEMC_78_hue=%d \n",y_ratio4,hue_ratio4);



	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[78]=1;
	else
		DynamicOptimizeMEMC[78]=0;

	//Dehalo_HOUSE_OF_FLYING_DAGGERS-00-25-45  2k
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_79_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_79_y=%d,DynamicOptimizeMEMC_79_hue=%d \n",y_ratio9,hue_ratio9);

	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[79]=1;
	else
		DynamicOptimizeMEMC[79]=0;

	//Dehalo_HOUSE_OF_FLYING_DAGGERS-00-25-45  4k
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_80_y=%d,DynamicOptimizeMEMC_80_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_80_y=%d,DynamicOptimizeMEMC_80_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_80_y=%d,DynamicOptimizeMEMC_80_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_80_y=%d,DynamicOptimizeMEMC_80_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_80_y=%d,DynamicOptimizeMEMC_80_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_80_y=%d,DynamicOptimizeMEMC_80_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_80_y=%d,DynamicOptimizeMEMC_80_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_80_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_80_y=%d,DynamicOptimizeMEMC_80_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[80]=1;
	else
		DynamicOptimizeMEMC[80]=0;

	//ULTRAVIOLET  00:40
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_81_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_81_y=%d,DynamicOptimizeMEMC_81_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[81]=1;
	else
		DynamicOptimizeMEMC[81]=0;

	//Art of Flight  2:23
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_82_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_82_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_82_y=%d,DynamicOptimizeMEMC_82_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_82_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_82_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_82_y=%d,DynamicOptimizeMEMC_82_hue=%d \n",y_ratio2,hue_ratio2);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000))
		DynamicOptimizeMEMC[82]=1;
	else
		DynamicOptimizeMEMC[82]=0;

	//Art of Flight  01:18
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_83_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_83_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_83_y=%d,DynamicOptimizeMEMC_83_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_83_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_83_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_83_y=%d,DynamicOptimizeMEMC_83_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_83_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_83_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_83_y=%d,DynamicOptimizeMEMC_83_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_83_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_83_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_83_y=%d,DynamicOptimizeMEMC_83_hue=%d \n",y_ratio4,hue_ratio4);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[83]=1;
	else
		DynamicOptimizeMEMC[83]=0;

	//MI3_roof 43s 2k
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_84_y=%d,DynamicOptimizeMEMC_84_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_84_y=%d,DynamicOptimizeMEMC_84_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_84_y=%d,DynamicOptimizeMEMC_84_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_84_y=%d,DynamicOptimizeMEMC_84_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_84_y=%d,DynamicOptimizeMEMC_84_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_84_y=%d,DynamicOptimizeMEMC_84_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_84_y=%d,DynamicOptimizeMEMC_84_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_84_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_84_y=%d,DynamicOptimizeMEMC_84_hue=%d \n",y_ratio8,hue_ratio8);



	if((y_ratio >=973&&hue_ratio >=985)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=980&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=980&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=980)||(y_ratio8 >=990&&hue_ratio8 >=980))
		DynamicOptimizeMEMC[84]=1;
	else
		DynamicOptimizeMEMC[84]=0;

	//MI3_roof 43s 4k
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_85_y=%d,DynamicOptimizeMEMC_85_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_85_y=%d,DynamicOptimizeMEMC_85_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_85_y=%d,DynamicOptimizeMEMC_85_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_85_y=%d,DynamicOptimizeMEMC_85_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_85_y=%d,DynamicOptimizeMEMC_85_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_85_y=%d,DynamicOptimizeMEMC_85_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_85_y=%d,DynamicOptimizeMEMC_85_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_85_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_85_y=%d,DynamicOptimizeMEMC_85_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=970&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=980&&hue_ratio5 >=1000)||(y_ratio6 >=980&&hue_ratio6 >=990)||(y_ratio7>=985&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=980))
		DynamicOptimizeMEMC[85]=1;
	else
		DynamicOptimizeMEMC[85]=0;

	 //Aeon_Flux_1080P24 26s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_86_y=%d,DynamicOptimizeMEMC_86_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_86_y=%d,DynamicOptimizeMEMC_86_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_86_y=%d,DynamicOptimizeMEMC_86_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_86_y=%d,DynamicOptimizeMEMC_86_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_86_y=%d,DynamicOptimizeMEMC_86_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_86_y=%d,DynamicOptimizeMEMC_86_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_86_y=%d,DynamicOptimizeMEMC_86_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_86_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_86_y=%d,DynamicOptimizeMEMC_86_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[86]=1;
	else
		DynamicOptimizeMEMC[86]=0;

	 //BladeRunner 38s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_87_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_87_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_87_y=%d,DynamicOptimizeMEMC_87_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_87_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_87_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_87_y=%d,DynamicOptimizeMEMC_87_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_87_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_87_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_87_y=%d,DynamicOptimizeMEMC_87_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_87_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_87_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_87_y=%d,DynamicOptimizeMEMC_87_hue=%d \n",y_ratio4,hue_ratio4);



	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[87]=1;
	else
		DynamicOptimizeMEMC[87]=0;

	 //I_Robot_01 5s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_88_y=%d,DynamicOptimizeMEMC_88_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_88_y=%d,DynamicOptimizeMEMC_88_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_88_y=%d,DynamicOptimizeMEMC_88_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_88_y=%d,DynamicOptimizeMEMC_88_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_88_y=%d,DynamicOptimizeMEMC_88_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_88_y=%d,DynamicOptimizeMEMC_88_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_88_y=%d,DynamicOptimizeMEMC_88_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_88_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_88_y=%d,DynamicOptimizeMEMC_88_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[88]=1;
	else
		DynamicOptimizeMEMC[88]=0;

	//SAMSARA 41:25s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_89_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_89_y=%d,DynamicOptimizeMEMC_89_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[89]=1;
	else
		DynamicOptimizeMEMC[89]=0;

	//SAMSARA 42:39s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_90_y=%d,DynamicOptimizeMEMC_90_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_90_y=%d,DynamicOptimizeMEMC_90_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_90_y=%d,DynamicOptimizeMEMC_90_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_90_y=%d,DynamicOptimizeMEMC_90_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_90_y=%d,DynamicOptimizeMEMC_90_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_90_y=%d,DynamicOptimizeMEMC_90_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_90_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_90_y=%d,DynamicOptimizeMEMC_90_hue=%d \n",y_ratio7,hue_ratio7);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000))
		DynamicOptimizeMEMC[90]=1;
	else
		DynamicOptimizeMEMC[90]=0;

	//SAMSARA 01:12:40s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_91_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_91_y=%d,DynamicOptimizeMEMC_91_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[91]=1;
	else
		DynamicOptimizeMEMC[91]=0;

	//Quality.tv_UHD_universaltest_v101_h264  04:48s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_92_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_92_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_92_y=%d,DynamicOptimizeMEMC_92_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_92_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_92_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_92_y=%d,DynamicOptimizeMEMC_92_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_92_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_92_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_92_y=%d,DynamicOptimizeMEMC_92_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_92_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_92_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_92_y=%d,DynamicOptimizeMEMC_92_hue=%d \n",y_ratio4,hue_ratio4);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[92]=1;
	else
		DynamicOptimizeMEMC[92]=0;


	//TimelineSequence_H265_HEVC_HQ 48s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_93_y=%d,DynamicOptimizeMEMC_93_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_93_y=%d,DynamicOptimizeMEMC_93_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_93_y=%d,DynamicOptimizeMEMC_93_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_93_y=%d,DynamicOptimizeMEMC_93_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_93_y=%d,DynamicOptimizeMEMC_93_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_93_y=%d,DynamicOptimizeMEMC_93_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_93_y=%d,DynamicOptimizeMEMC_93_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_93_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_93_y=%d,DynamicOptimizeMEMC_93_hue=%d \n",y_ratio8,hue_ratio8);



	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[93]=1;
	else
		DynamicOptimizeMEMC[93]=0;

	//Flasing_[Dr.HouseS-5-11] 18s
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_94_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_94_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_94_y=%d,DynamicOptimizeMEMC_94_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_94_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_94_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_94_y=%d,DynamicOptimizeMEMC_94_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_94_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_94_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_94_y=%d,DynamicOptimizeMEMC_94_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_94_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_94_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_94_y=%d,DynamicOptimizeMEMC_94_hue=%d \n",y_ratio4,hue_ratio4);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[94]=1;
	else
		DynamicOptimizeMEMC[94]=0;

	 //Kim yuna 4:30  2k
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_95_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_95_y=%d,DynamicOptimizeMEMC_95_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=950)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7>=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=990))
		DynamicOptimizeMEMC[95]=1;
	else
		DynamicOptimizeMEMC[95]=0;

	//Kim yuna 4:30  4k
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_96_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_96_y=%d,DynamicOptimizeMEMC_96_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7>=990&&hue_ratio7 >=990)||(y_ratio8 >=990&&hue_ratio8 >=990)||(y_ratio9 >=990&&hue_ratio9 >=960))
		DynamicOptimizeMEMC[96]=1;
	else
		DynamicOptimizeMEMC[96]=0;

	//casino_royale_Broken_41_35_knife
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_97_y=%d,DynamicOptimizeMEMC_97_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_97_y=%d,DynamicOptimizeMEMC_97_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_97_y=%d,DynamicOptimizeMEMC_97_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_97_y=%d,DynamicOptimizeMEMC_97_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_97_y=%d,DynamicOptimizeMEMC_97_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_97_y=%d,DynamicOptimizeMEMC_97_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_97_y=%d,DynamicOptimizeMEMC_97_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_97_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_97_y=%d,DynamicOptimizeMEMC_97_hue=%d \n",y_ratio8,hue_ratio8);


	if((y_ratio >=990&&hue_ratio >=990)||(y_ratio2 >=990&&hue_ratio2 >=990)||(y_ratio3 >=990&&hue_ratio3 >=990)||(y_ratio4 >=990&&hue_ratio4 >=990)||(y_ratio5 >=990&&hue_ratio5 >=990)||(y_ratio6 >=990&&hue_ratio6 >=990)||(y_ratio7>=990&&hue_ratio7 >=990)||(y_ratio8 >=1000&&hue_ratio8 >=1000))
		DynamicOptimizeMEMC[97]=1;
	else
		DynamicOptimizeMEMC[97]=0;

	//vertical limit
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_98_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_98_y=%d,DynamicOptimizeMEMC_98_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=980&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=960&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=970&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[98]=1;
	else
		DynamicOptimizeMEMC[98]=0;

	//sony GLEE - Ride Wit Me #4
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_99_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
		rtd_printk(KERN_INFO, TAG_NAME,"DynamicOptimizeMEMC_99_y=%d,DynamicOptimizeMEMC_99_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[99]=1;
	else
		DynamicOptimizeMEMC[99]=0;

	//dareDevil boy full
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_100_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_100_y=%d,DynamicOptimizeMEMC_100MEMC_100_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[100]=1;
	else
		DynamicOptimizeMEMC[100]=0;

	//dareDevil boy rim
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio4,hue_ratio4);

	y_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio5 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio5,hue_ratio5);

	y_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio6 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio6,hue_ratio6);

	y_ratio7= scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio7 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio7,hue_ratio7);

	y_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio8 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio8,hue_ratio8);

	y_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_y[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio9 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_101_hue[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_101_y=%d,DynamicOptimizeMEMC_101_hue=%d \n",y_ratio9,hue_ratio9);


	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000)||(y_ratio5 >=990&&hue_ratio5 >=1000)||(y_ratio6 >=990&&hue_ratio6 >=1000)||(y_ratio7>=990&&hue_ratio7 >=1000)||(y_ratio8 >=990&&hue_ratio8 >=1000)||(y_ratio9 >=990&&hue_ratio9 >=1000))
		DynamicOptimizeMEMC[101]=1;
	else
		DynamicOptimizeMEMC[101]=0;

//==============================================================================================//

//==============================================================================================//

	//dareDevil boy rim
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_102_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_102_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_102_y=%d,DynamicOptimizeMEMC_102_hue=%d \n",y_ratio,hue_ratio);

	if((y_ratio >=990&&hue_ratio >=1000))
		DynamicOptimizeMEMC[102]=1;
	else
		DynamicOptimizeMEMC[102]=0;

	//++ YE Test for LG 01_Black_19YO1 issue
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_103_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_103_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_103_y=%d,DynamicOptimizeMEMC_103_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_103_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_103_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_103_y=%d,DynamicOptimizeMEMC_103_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_103_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_103_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_103_y=%d,DynamicOptimizeMEMC_103_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_103_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_103_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_103_y=%d,DynamicOptimizeMEMC_103_hue=%d \n",y_ratio4,hue_ratio4);

	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[103]=1;
	else
		DynamicOptimizeMEMC[103]=0;

	//-- YE Test for LG 01_Black_19YO1 issue

	//++ Q-13722 issue
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_104_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_104_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_104_y=%d,DynamicOptimizeMEMC_104_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_104_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_104_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_104_y=%d,DynamicOptimizeMEMC_104_hue=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_104_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_104_hue[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_104_y=%d,DynamicOptimizeMEMC_104_hue=%d \n",y_ratio3,hue_ratio3);

	y_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_104_y[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio4 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_104_hue[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_104_y=%d,DynamicOptimizeMEMC_104_hue=%d \n",y_ratio4,hue_ratio4);

	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990&&hue_ratio3 >=1000)||(y_ratio4 >=990&&hue_ratio4 >=1000))
		DynamicOptimizeMEMC[104]=1;
	else
		DynamicOptimizeMEMC[104]=0;

	//-- Q-13722 issue

	//++ Q-13722 issue
	y_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_105_y[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_105_hue[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_105_y=%d,DynamicOptimizeMEMC_105_hue=%d \n",y_ratio,hue_ratio);

	y_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_105_y[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	hue_ratio2 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_105_hue[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_105_y2=%d,DynamicOptimizeMEMC_105_hue2=%d \n",y_ratio2,hue_ratio2);

	y_ratio3 = scalerVIP_ratio_inner_product(DynamicOptimizeMEMC_105_y[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
		printk("DynamicOptimizeMEMC_105_y3=%d,DynamicOptimizeMEMC_105_hue3=%d \n",y_ratio3,hue_ratio3);

	if((y_ratio >=990&&hue_ratio >=1000)||(y_ratio2 >=990&&hue_ratio2 >=1000)||(y_ratio3 >=990))
		DynamicOptimizeMEMC[105]=1;
	else
		DynamicOptimizeMEMC[105]=0;

	//-- Q-13722 issue
#if 1
	//++ LG Q-13835
	// Just add for ID 106 flow proces and show debug message
	if((Y_hist_ratio[2]>=10)&&(Y_hist_ratio[3]>=10)){
		DynamicOptimizeMEMC[106]=1;
				//printk(" AAA hist = [%d] [%d] [%d] [%d]\n", Y_hist_ratio[0], Y_hist_ratio[1], Y_hist_ratio[2], Y_hist_ratio[3]);
		}
	else{
		DynamicOptimizeMEMC[106]=0;
				//printk(" BBB hist = [%d] [%d] [%d] [%d] [%d]\n", Y_hist_ratio[0], Y_hist_ratio[1], Y_hist_ratio[2], Y_hist_ratio[3],Y_hist_ratio[4]);
	}
	//-- LG Q-13835
#endif
//==============================================================================================//

	// for debug
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_2==TRUE))
	{
		for(i=0;i<=(255/25);i++)
		{
			nIdentify_Pattern =0;
			for(j=1;j<=25;j++){
				if(DynamicOptimizeMEMC[i*25+j] == 1&& (i*25+j <=255)){
					nIdentify_Pattern |= DynamicOptimizeMEMC[i*25+j]<<(j-1);
				}
			}
			if(nIdentify_Pattern>0){
				nIdentify_Pattern |= i<<25;
				rtd_printk(KERN_INFO, TAG_NAME,"nIdentify_Pattern = %d \n",nIdentify_Pattern);
			}
		}
	}

}
void scalerVIP_Identify_Pattern_forSKY(void)
{
	unsigned short hue_ratio=0;
	unsigned short y_ratio=0;
	unsigned short hue_ratio2=0;
	unsigned short y_ratio2=0;
	unsigned short hue_ratio3=0;
	unsigned short y_ratio3=0;
	unsigned short hue_ratio4=0;
	unsigned short y_ratio4=0;
	unsigned short hue_ratio5=0;
	unsigned short y_ratio5=0;
	unsigned short hue_ratio6=0;
	unsigned short y_ratio6=0;
	unsigned short hue_ratio7=0;
	unsigned short y_ratio7=0;
	unsigned short hue_ratio8=0;
	unsigned short y_ratio8=0;
	unsigned short hue_ratio9=0;
	unsigned short y_ratio9=0;


	unsigned char i;
	//sat_hist_ratio
//	unsigned int noise_status = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL);
//	unsigned int noise_relaible = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE);
	//unsigned int motion = rtd_inl(DI_IM_DI_SI_FILM_MOTION_reg);
	//unsigned char motionl_level = scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION);
	unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);
	static unsigned char pre_source=255;
	unsigned char NTSC_IRE00_OSD_Idx=0,NTSC_IRE75_OSD_Idx=1;
	unsigned char SD_OSD_Idx=3,HD_OSD_Idx=4;
	unsigned char motion_value=0;
	unsigned int decont_count = 0;
	const unsigned int decont_count_th = (1920 * 1080 * 3) >> 2; // 75% of HD content
	ipq_decontour_de_contour_avfilter_counter_RBUS decontour_avfilter_counter_reg;
	decontour_avfilter_counter_reg.regValue = rtd_inl(IPQ_DECONTOUR_De_Contour_Avfilter_Counter_reg);
	decont_count = decontour_avfilter_counter_reg.decont_avfilter_cnt;

//ROSPrintf("\n motion %d ,motionl_level=%d \n",motion,motionl_level);
	for(i=0;i<255;i++)//for_LG_demo
	{
		if(i!=123)
		DynamicOptimizeSystem[i]=0;
	}

	pre_source = cur_source;
	//ROSPrintf("\n black=%d \n",system_info_structure_table->OSD_Info.OSD_Film_Mode);
	switch(cur_source)
	{
		case VIP_QUALITY_TV_NTSC:
		{

			break;
		}
		case VIP_QUALITY_CVBS_NTSC:
		{


			if(system_info_structure_table->OSD_Info.OSD_Film_Mode==1)//
			{
				NTSC_IRE00_OSD_Idx = NTSC_IRE00_LOW; //osd black level =low
				NTSC_IRE75_OSD_Idx = NTSC_IRE75_LOW;
			}
			else
			{
				NTSC_IRE00_OSD_Idx = NTSC_IRE00_HIGH; //osd black level !=low
				NTSC_IRE75_OSD_Idx = NTSC_IRE75_HIGH;
			}




			break;

		}
		case VIP_QUALITY_CVBS_PAL:
		{
			//PAL Only One black level Mode



			break;
		}
		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_HDMI_576I:
		case VIP_QUALITY_HDMI_480P:
		case VIP_QUALITY_HDMI_576P:
		{

			if(system_info_structure_table->OSD_Info.OSD_Film_Mode==1)//
			{
				SD_OSD_Idx = SD_LOW; //osd black level =low
			}
			else
			{
				SD_OSD_Idx = SD_HIGH; //osd black level !=low
			}


//==============================================================================================//

			break;
		}

		case VIP_QUALITY_HDMI_1080I:
		case VIP_QUALITY_HDMI_1080P:
		{
			if(system_info_structure_table->OSD_Info.OSD_Film_Mode==1)//
			{
				HD_OSD_Idx = HD_LOW; //osd black level =low
			}
			else // others mapping to HIGH
			{
				HD_OSD_Idx = HD_HIGH; //osd black level !=low
			}




//==============================================================================================//


//==============================================================================================//
			y_ratio = scalerVIP_ratio_inner_product(Skyworth_decont_pattern_y1[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin); //skyworth video_2
			hue_ratio = scalerVIP_ratio_inner_product(Skyworth_decont_pattern_hue1[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(Skyworth_decont_pattern_y2[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin); //skyworth video_3 first half
			hue_ratio2 = scalerVIP_ratio_inner_product(Skyworth_decont_pattern_hue2[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio3 = scalerVIP_ratio_inner_product(Skyworth_decont_pattern_y3[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin); //skyworth video_3 second half
			hue_ratio3 = scalerVIP_ratio_inner_product(Skyworth_decont_pattern_hue3[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio4 = scalerVIP_ratio_inner_product(Skyworth_decont_pattern_y4[HD_OSD_Idx], &Y_hist_ratio[0], TV006_VPQ_chrm_bin); //skyworth video_3 second half
			hue_ratio4 = scalerVIP_ratio_inner_product(Skyworth_decont_pattern_hue4[HD_OSD_Idx], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);



			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf_ID_Pattern("Skyworth_decont_pattern_y1=%d, Skyworth_decont_pattern_hue1=%d\n", y_ratio, hue_ratio);
				ROSPrintf_ID_Pattern("Skyworth_decont_pattern_y2=%d, Skyworth_decont_pattern_hue2=%d\n", y_ratio2, hue_ratio2);
				ROSPrintf_ID_Pattern("Skyworth_decont_pattern_y3=%d, Skyworth_decont_pattern_hue3=%d\n", y_ratio3, hue_ratio3);
				ROSPrintf_ID_Pattern("Skyworth_decont_pattern_y4=%d, Skyworth_decont_pattern_hue4=%d\n", y_ratio4, hue_ratio4);
				ROSPrintf_ID_Pattern("decont_count=%d, decont_count_th=%d\n", decont_count, decont_count_th);
			}

			if( (y_ratio >=980 && hue_ratio >=980) || (y_ratio2 >=980 && hue_ratio2 >=980)  || (y_ratio3 >=980 && hue_ratio3 >=980) || (y_ratio4 >=980 && hue_ratio4 >=980) ) // video_2 and video_3
				Skyworth_Decont_Pattern=1;
			else if( (decont_count > decont_count_th) && (sat_ratio_mean_value<75) && ( hue_hist_ratio[14]+hue_hist_ratio[15]+hue_hist_ratio[16] > 900 ) ) // video_1
				Skyworth_Decont_Pattern=1;
			else
				Skyworth_Decont_Pattern=0;

//==============================================================================================//
                        y_ratio = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio3 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio4 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio4 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			y_ratio5 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio5 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio6 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio6 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio7 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio7 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			y_ratio8 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio8 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio9 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_y1[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio9 = scalerVIP_ratio_inner_product(Skyworth_film_pattern_hue1[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);



			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf_ID_Pattern("Skyworth_film_pattern_y1=%d, Skyworth_film_pattern_hue1=%d\n", y_ratio, hue_ratio);
				ROSPrintf_ID_Pattern("Skyworth_film_pattern_y1=%d, Skyworth_film_pattern_hue1=%d\n", y_ratio2, hue_ratio2);
				ROSPrintf_ID_Pattern("Skyworth_film_pattern_y1=%d, Skyworth_film_pattern_hue1=%d\n", y_ratio3, hue_ratio3);
				ROSPrintf_ID_Pattern("Skyworth_film_pattern_y1=%d, Skyworth_film_pattern_hue1=%d\n", y_ratio4, hue_ratio4);
			}
			if( (y_ratio >=950 && hue_ratio >=980) || (y_ratio2 >=950 && hue_ratio2 >=980)  || (y_ratio3 >=950 && hue_ratio3 >=980) || (y_ratio4 >=950 && hue_ratio4 >=980) || (y_ratio5 >=950 && hue_ratio5 >=980)  || (y_ratio6 >=950 && hue_ratio6 >=980) || (y_ratio7 >=950 && hue_ratio7 >=980) || (y_ratio8 >=950 && hue_ratio8 >=980)  || (y_ratio9 >=950 && hue_ratio9 >=980) )
				Skyworth_Film_Pattern=1;
			else
				Skyworth_Film_Pattern =0;
		//============================================================================
		  y_ratio = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio3 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio4 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio4 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			y_ratio5 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio5 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio6 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio6 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio7 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio7 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			y_ratio8 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio8 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio9 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y1[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio9 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue1[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio, hue_ratio);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio2, hue_ratio2);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio3, hue_ratio3);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio4, hue_ratio4);

				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio5, hue_ratio5);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio6, hue_ratio6);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio7, hue_ratio7);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio8, hue_ratio8);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y1=%d, Skyworth_BMP_pattern_hue1=%d\n", y_ratio9, hue_ratio9);
			}


			if( (y_ratio >=950 && hue_ratio >=980) || (y_ratio2 >=940 && hue_ratio2 >=980)  || (y_ratio3 >=950 && hue_ratio3 >=980) || (y_ratio4 >=950 && hue_ratio4 >=980) || (y_ratio5 >=950 && hue_ratio5 >=980)  || (y_ratio6 >=940 && hue_ratio6 >=980) || (y_ratio7 >=950 && hue_ratio7 >=980) || (y_ratio8 >=950 && hue_ratio8 >=980)  || (y_ratio9 >=920 && hue_ratio9 >=980)   )
				Skyworth_Decont_BMPPattern=1;
			else
				Skyworth_Decont_BMPPattern =0;


			//himedia
			 y_ratio = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio3 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio3 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[2], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio4 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio4 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[3], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			y_ratio5 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[4], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio5 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[4], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio6 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[5], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio6 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[5], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio7 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[6], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio7 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[6], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			y_ratio8 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[7], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio8 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[7], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio9 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_y2[8], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio9 = scalerVIP_ratio_inner_product(Skyworth_decont_BMPpattern_hue2[8], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);

			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio, hue_ratio);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio2, hue_ratio2);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio3, hue_ratio3);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio4, hue_ratio4);

				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio5, hue_ratio5);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio6, hue_ratio6);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio7, hue_ratio7);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio8, hue_ratio8);
				ROSPrintf_ID_Pattern("Skyworth_BMP_pattern_y2=%d, Skyworth_BMP_pattern_hue2=%d\n", y_ratio9, hue_ratio9);
			}

			if(Skyworth_Decont_BMPPattern == 0){
			if( (y_ratio >=950 && hue_ratio >=980) || (y_ratio2 >=940 && hue_ratio2 >=980)  || (y_ratio3 >=950 && hue_ratio3 >=980) || (y_ratio4 >=950 && hue_ratio4 >=980) || (y_ratio5 >=950 && hue_ratio5 >=980)  || (y_ratio6 >=940 && hue_ratio6 >=980) || (y_ratio7 >=950 && hue_ratio7 >=980) || (y_ratio8 >=950 && hue_ratio8 >=980)  || (y_ratio9 >=920 && hue_ratio9 >=980)   )
				Skyworth_Decont_BMPPattern=1;
			else
				Skyworth_Decont_BMPPattern =0;
			}

			//====================================================
			//for de-contour 64/128 gray

			y_ratio = scalerVIP_ratio_inner_product(Skyworth_decont_GRAYpattern_y3[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			y_ratio2 = scalerVIP_ratio_inner_product(Skyworth_decont_GRAYpattern_y3[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			y_ratio3 = scalerVIP_ratio_inner_product(Skyworth_decont_GRAYpattern_y3[2], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			y_ratio4 = scalerVIP_ratio_inner_product(Skyworth_decont_GRAYpattern_y3[3], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);

			if( y_ratio >=950 || y_ratio2 >=950|| y_ratio3 >=950 || y_ratio4 >=950)
				Skyworth_decont_GRAYpattern=1;
			else
				Skyworth_decont_GRAYpattern =0;

			//============================================================================
			//for speach man

			y_ratio = scalerVIP_ratio_inner_product(Skyworth_speach_man_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(Skyworth_speach_man_hue1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			y_ratio2 = scalerVIP_ratio_inner_product(Skyworth_speach_man_y2[1], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio2 = scalerVIP_ratio_inner_product(Skyworth_speach_man_hue2[1], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			motion_value = scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio();
			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf_ID_Pattern("Skyworth_speach_man_y1=%d, Skyworth_speach_man_hue1=%d\n", y_ratio, hue_ratio);
				ROSPrintf_ID_Pattern("Skyworth_speach_man_y2=%d, Skyworth_speach_man_hue2=%d\n", y_ratio2, hue_ratio2);
			}



			//if(Skyworth_Speach_Man_Pattern == 0 ){

				if( ((y_ratio >=980 && hue_ratio >=980)&&(motion_value>45&&motion_value<67)) ||
					((y_ratio2 >=980 && hue_ratio2 >=980)&&(motion_value>25&&motion_value<50)) )
					Skyworth_Speach_Man_Pattern=1;
				else
					Skyworth_Speach_Man_Pattern=0;
			//}


			//============================================================================
			//for barrels

			y_ratio = scalerVIP_ratio_inner_product(Skyworth_Barrel_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf_ID_Pattern("Skyworth_Barrel_y1=%d, sat_ratio_mean_value=%d\n", y_ratio, SmartPic_clue->sat_ratio_mean_value);
			}


			if( (y_ratio >=980 && SmartPic_clue->sat_ratio_mean_value <=45))
				Skyworth_Barrels_Pattern=1;
			else
				Skyworth_Barrels_Pattern=0;

			//============================================================================
			//for sony test pattern move text

			y_ratio = scalerVIP_ratio_inner_product(Sony_test_pattern_001_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			hue_ratio = scalerVIP_ratio_inner_product(Sony_test_pattern_001_hue1[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
			motion_value = scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio();
			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf_ID_Pattern("Sony_test_pattern_001_y1 =%d, Sony_test_pattern_001_hue1=%d\n", y_ratio, hue_ratio);
			}


			if( (y_ratio >=980 && hue_ratio >=980))
				Sony_test_pattern[0]=1;
			else
				Sony_test_pattern[0]=0;

			//============================================================================
			//for sony calculator

			y_ratio = scalerVIP_ratio_inner_product(Sony_test_pattern_002_y1[0], &Y_hist_ratio[0], TV006_VPQ_chrm_bin);
			motion_value = scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio();
			//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
			{
				ROSPrintf_ID_Pattern("Sony_test_pattern_002_y1 =%d, sat=%d\n", y_ratio, SmartPic_clue->sat_ratio_mean_value);

			}

			if (y_ratio >=980 && SmartPic_clue->sat_ratio_mean_value <=45)
				Sony_test_pattern[1]=1;
			else
				Sony_test_pattern[1]=0;

			break;
		}
		case VIP_QUALITY_DTV_480I:
		case VIP_QUALITY_DTV_576I:
		case VIP_QUALITY_DTV_480P:
		case VIP_QUALITY_DTV_576P:
		case VIP_QUALITY_DTV_720P:
		{
//==============================================================================================//

//==============================================================================================//
			break;
		}

		case VIP_QUALITY_DTV_1080P:
		{

			break;
		}
		case VIP_QUALITY_TV_SECAN:
		{

			break;
		}
		case VIP_QUALITY_TV_PAL:
		{

			break;
		}
		default:

			break;
	}
}
void scalerVIP_Set_Parameter_forLGM2(unsigned char apply)
{
	// merlin4 henry 180326
	extern unsigned char g_panConti_str;
	extern unsigned char g_panDeb_str;
	// end merlin4

	di_di_smd_waterflag_ctr3_RBUS di_di_smd_waterflag_ctr3;
	di_di_smd_resurrect_ctrl_RBUS di_di_smd_resurrect_ctrl;

	static di_di_smd_waterflag_ctr3_RBUS ori_di_di_smd_waterflag_ctr3;
	static di_di_smd_resurrect_ctrl_RBUS ori_di_di_smd_resurrect_ctrl;
	di_di_smd_choosecandidate_RBUS 	smd_choosecandidate_reg;
	di_di_smd_refinemv3_RBUS smd_refinemv3_reg;
	di_di_smd_compensate_RBUS smd_compensate_reg;
	di_di_smd_candidatelimitsad_RBUS init_di_smd_candidatelimitsad_reg;
	di_di_smd_additionalcoeff2_RBUS init_di_smd_additionalcoeff2_reg;
	//di_di_smd_dummy_RBUS di_smd_dummy_reg;
	di_di_smd_refinemv2_RBUS di_smd_refinemv2_reg;

	di_di_smd_pan1_RBUS init_di_smd_pan1_reg;
	di_di_smd_hardwarepan_modify1_RBUS di_di_smd_hardwarepan_modify1;
	//di_di_smd_sampling_gmvc_RBUS di_di_smd_sampling_gmvc;
	di_di_gst_compensate_RBUS di_di_gst_compensate;

	di_di_smd_additionalcoeff1_RBUS init_di_smd_additionalcoeff1_reg;
	di_di_smd_slow_motion_handle1_RBUS di_di_smd_slow_motion_handle1;
	di_di_smd_slow_motion_handle2_RBUS di_di_smd_slow_motion_handle2;

	di_im_di_weave_window_control_RBUS im_di_weave_window_control_reg;
	di_im_di_weave_window_1_start_RBUS im_di_weave_window_1_start_reg;
	di_im_di_weave_window_1_end_RBUS im_di_weave_window_1_end_reg;

	static 	di_im_di_weave_window_control_RBUS ORI_im_di_weave_window_control_reg;
	static	di_im_di_weave_window_1_start_RBUS ORI_im_di_weave_window_1_start_reg;
	static	di_im_di_weave_window_1_end_RBUS ORI_im_di_weave_window_1_end_reg;

	di_im_di_nintra_lowpass_source_RBUS di_im_di_nintra_lowpass_source;
	di_im_di_nintra_search_dir_limit_RBUS di_im_di_nintra_search_dir_limit;
	di_di_gst_ctrl_RBUS init_di_gst_ctrl_reg;

	memc_mux_memc_mux_di_ctrl_RBUS color_temp_ctrl_reg;

	nr_dch1_cp_ctrl_RBUS dch1_cp_ctrl_reg;
	nr_mosquito_ctrl_RBUS nr_mosquito_ctrl_RBUS_reg;
	nr_curve_mapping_w1_1_RBUS curve_mapping_w1_1_reg;
	nr_curve_mapping_w1_2_RBUS curve_mapping_w1_2_reg;
	nr_curve_mapping_w1_3_RBUS curve_mapping_w1_3_reg;


	nr_curve_mapping_w2_1_RBUS curve_mapping_w2_1_reg;
	nr_curve_mapping_step_2_RBUS curve_mapping_step2_reg;
	nr_curve_mapping_step_3_RBUS curve_mapping_step3_reg;
	nr_mosquito_nr_level_ctrl_RBUS nr_mosquito_nr_level_ctrl_RBUS_reg;
	nr_mosquito_nr_level_ctrl_1_RBUS nr_mosquito_nr_level_ctrl_1_RBUS_reg;
	scaleup_dm_uzu_ctrl_RBUS dm_uzu_Ctrl_reg;
	di_im_di_control_RBUS di_control_reg;
	di_im_di_control_RBUS di_control_reg_Prtoect_3AEnable;


	color_sharp_dm_segpk_edgpk3_RBUS color_sharp_dm_segpk_edgpk3;
	color_sharp_dm_peaking_bound_1_RBUS color_sharp_dm_peaking_bound_1_reg;
//	color_sharp_dm_peaking_bound_0_RBUS color_sharp_dm_peaking_bound_0;
//	color_sharp_dm_segpk_edgpk2_RBUS color_sharp_dm_segpk_edgpk2;

	color_sharp_dm_cds_cm0_u_bound_0_RBUS color_sharp_dm_cds_cm0_u_bound_0_reg;
	nr_dch1_spatial_weight_RBUS dch1_Spatial_Weight_Reg;
	//vdpq_yc_sep_control_RBUS YC_SEP_CONTROL_reg;
 	//vdpq_yc_bw_ctrl_RBUS YC_BW_CTRL_reg;
	di_rtnr_ma_snr_strength_control_RBUS	di_rtnr_ma_snr_strength_control;
	color_sharp_dm_peaking_gain_RBUS color_sharp_dm_peaking_gain_reg;

	di_im_di_hmc_adjustable_RBUS di_hmc_adjustable_reg;
	static di_im_di_hmc_adjustable_RBUS ORI_di_hmc_adjustable_reg;

	di_im_di_hmc_adjustable2_RBUS di_hmc_adjustable2_reg;
	static di_im_di_hmc_adjustable2_RBUS ORI_di_hmc_adjustable2_reg;

	di_im_di_hmc_adjustable3_RBUS di_hmc_adjustable3_reg;
	static di_im_di_hmc_adjustable3_RBUS ORI_di_hmc_adjustable3_reg;

	di_im_di_hmc_adjustable4_RBUS di_hmc_adjustable4_reg;
	static di_im_di_hmc_adjustable4_RBUS ORI_di_hmc_adjustable4_reg;

	di_im_di_hmc_pan_control_par_2_RBUS di_hmc_pan_control_par_2_reg;
	di_im_di_hmc_pan_control_par_1_RBUS di_hmc_pan_control_par_1_reg;
	di_im_di_hmc_statistic1_RBUS di_hmc_statistic1_reg;

	di_im_di_framesobel_statistic_RBUS FrameSobel_statistic_Reg;
	static di_im_di_framesobel_statistic_RBUS ORI_FrameSobel_statistic_Reg;


	nr_curve_mapping_w2_2_RBUS curve_mapping_w2_2_reg;

	di_im_di_intra_th_RBUS intra_th_Reg;

	scaleup_dm_mem_crc_ctrl_RBUS dm_mem_crc_ctrl_RBUS_reg;
	//di_im_di_ma_frame_motion_th_a_RBUS frame_motion_a_reg;// frame motion a
	color_sharp_dm_segpk_vpk2_RBUS dm_segpk_vpk2;

	di_im_di_rtnr_new_control_RBUS rtnr_new_Ctrl;

	idcti_i_dcti_ctrl_2_RBUS ich1_newdcti_reg_2;
	idcti_i_dcti_ctrl_1_RBUS ich1_newdcti_reg_1;
	color_sharp_shp_dcti_ctrl_1_RBUS dm_dcti_REG_1;
	color_sharp_shp_dcti_ctrl_2_RBUS dm_dcti_REG_2;

	//vdpq_adap_bpf_y_th3_RBUS vdpq_adap_bpf_y_th3_reg;

	scaleup_dm_uzu_ctrl_RBUS dm_uzu_Ctrl;
	di_im_new_mcnr_control_RBUS di_im_new_mcnr_control;

	mpegnr_ich1_mpegnr2_RBUS ich1_MPEGNR2_reg;
	di_im_new_mcnr_control4_RBUS di_im_new_mcnr_control4;
	di_im_new_mcnr_pan_condition_RBUS di_im_new_mcnr_pan_condition;

	di_im_di_ma_frame_motion_th_a_RBUS di_ma_frame_motion_th_a_reg;
	di_im_di_ma_frame_motion_th_b_RBUS di_ma_frame_motion_th_b_reg;
	di_im_di_ma_frame_motion_th_c_RBUS di_ma_frame_motion_th_c_reg;
	di_im_di_nintra_control_RBUS di_im_di_nintra_control;
	di_di_smd_control_candidatelist_RBUS di_smd_control_candiate_reg;

	di_im_di_film_mask_detection_RBUS film_mask_detection_reg;
#if 0
	di_im_di_hmc_pan_dummy_2_RBUS di_pan_dummy2_reg;
	di_im_di_hmc_pan_dummy_3_RBUS di_pan_dummy3_reg;
//#else // henry Merlin3 temp
	di_im_di_rtnr_refined_ctrl2_RBUS di_im_di_rtnr_refined_ctrl2_reg;
	di_di_smd_dummy_RBUS di_di_smd_dummy_reg;
#endif

	di_im_di_btr_control_RBUS di_im_di_btr_control_reg;
	static di_im_di_rtnr_c_th0_th3_RBUS di_im_di_rtnr_c_th0_th3_RBUS_reg_save;
	di_im_di_rtnr_c_th0_th3_RBUS di_im_di_rtnr_c_th0_th3_RBUS_reg;
	static di_im_di_rtnr_c_th4_th6_RBUS di_im_di_rtnr_c_th4_th6_RBUS_reg_save;
	di_im_di_rtnr_c_th4_th6_RBUS di_im_di_rtnr_c_th4_th6_RBUS_reg;


  	vdpq_postp_secam_fix_ctrl_RBUS postp_secam_fix_ctrl_reg;
	vdpq_postp_secam_fix_y_detect0_RBUS postp_secam_fix_y_detect0_reg;
	vdpq_postp_secam_fix_y_detect1_RBUS postp_secam_fix_y_detect1_reg;

	scaleup_dm_dir_uzu_conf_RBUS dm_dir_uzu_conf_Reg;

	di_im_di_hmc_me_refine_ctrl_2_RBUS di_hmc_me_refine_ctrl2_reg;
	static di_im_di_hmc_me_refine_ctrl_2_RBUS ORI_di_hmc_me_refine_ctrl2_reg;

	/*LG internal TV signal "E-52"*/
	di_tnrxc_mkii_ctrl_RBUS tnrxc_mkii_ctrl_reg;

	static di_im_di_ma_frame_motion_th_a_RBUS ORI_di_ma_frame_motion_th_a_reg;
	static di_im_di_ma_frame_motion_th_b_RBUS ORI_di_ma_frame_motion_th_b_reg;
	static di_im_di_ma_frame_motion_th_c_RBUS ORI_di_ma_frame_motion_th_c_reg;
	static di_di_smd_control_candidatelist_RBUS ORI_di_smd_control_candiate_reg;
	static di_im_di_nintra_control_RBUS ori_di_im_di_nintra_control;
#if 0
	static di_im_di_hmc_pan_dummy_2_RBUS ORI_di_pan_dummy2_reg;
	static di_im_di_hmc_pan_dummy_3_RBUS ORI_di_pan_dummy3_reg;
//#else // henry Merlin3 temp
	static di_im_di_rtnr_refined_ctrl2_RBUS ORI_di_im_di_rtnr_refined_ctrl2_reg;
	static di_di_smd_dummy_RBUS ORI_di_di_smd_dummy_reg;
#endif

	static di_im_di_btr_control_RBUS ORI_di_im_di_btr_control_reg;

  	static vdpq_postp_secam_fix_ctrl_RBUS ORI_postp_secam_fix_ctrl_reg;
	static vdpq_postp_secam_fix_y_detect0_RBUS ORI_postp_secam_fix_y_detect0_reg;
	static vdpq_postp_secam_fix_y_detect1_RBUS ORI_postp_secam_fix_y_detect1_reg;

	static di_im_di_hmc_pan_control_par_1_RBUS ORI_di_hmc_pan_control_par_1_reg;
	static di_im_di_hmc_statistic1_RBUS ORI_di_hmc_statistic1_reg;

	static di_di_gst_ctrl_RBUS ORI_init_di_gst_ctrl_reg;

	static memc_mux_memc_mux_di_ctrl_RBUS ORI_color_temp_ctrl_reg;


	/*LG internal TV signal "E-52"*/
	static di_tnrxc_mkii_ctrl_RBUS ORI_tnrxc_mkii_ctrl_reg;
	ipq_decontour_de_contour_ctrl_RBUS decontour_de_contour_ctrl_reg;
	static ipq_decontour_de_contour_ctrl_RBUS ORI_decontour_de_contour_ctrl_reg;

	// merlin4 henry
	static unsigned char ori_panConti_str=0;
	static unsigned char ori_panDeb_str=0;
	// end merlin4
	static unsigned int ori_ULTRI_value=0;
	static unsigned short ori_smd_upperbound_sad_forjudgemv=0;
	static unsigned short ori_smd_rang_sad=0;
	static unsigned char  ori_smd_firmware_pan_sad_th=0;
	static unsigned char ori_smd_firmware_pan=0;
	static unsigned char ori_smd_hardware_pan_en=0;
	static unsigned char ori_smd_apply_result_mode=0;
	static unsigned char ori_smd_firmwarepan_sadmax=0;
//	static unsigned char ori_smd_close2gmv_mvselect=0;
//	static unsigned char ori_smd_close2gmv_fw_en=0;
	static unsigned char ori_gst_subpixel_compensate_en=0;
//	static unsigned char ori_gst_subpixel_hardwarepan_en=0;
	static unsigned char ori_smd_en=0;
	static unsigned char ori_smd_result_en=0;
	static unsigned char ori_smd_acc_smd_en =0;
	static unsigned char ori_smd_spatialfreqnomatch_off =0;
	static unsigned char ori_smd_outofrange_content_new = 0 ;

	static unsigned short ori_cp_sresultweight=0;
	static unsigned short ori_mosquito_en=0;
	static unsigned short ori_curve_mapping_w1_3=0,ori_curve_mapping_w1_4=0,ori_curve_mapping_w1_5=0;//,ori_curve_mapping_w2_2_2=0;
	static unsigned short ori_curve_mapping_w1_2=0,ori_curve_mapping_step6=0,ori_curve_mapping_step7=0,ori_curve_mapping_step8=0;
	static unsigned short ori_curve_mapping_w1_6=0,ori_curve_mapping_w1_7=0;
	static unsigned short ori_curve_mapping_w1_8=0;

 	static unsigned short ori_mosquito_nr_positive_shift=0;
	//static unsigned short ori_mosquito_nr_bi_nlevel_max=0;
	static unsigned short ori_mosquito_far_var_gain=0;
//	static unsigned char gReg123=0;
//	static unsigned char gRegW_MonScope=FALSE;
	static unsigned char ori_Intr_di_range=0;
	static unsigned char ori_gain_pos=0;
	static unsigned char ori_gain_neg=0;
	static unsigned char ori_gain_LV_Gain=0;
	static unsigned char ori_cp_fixedweight1y=0;
	static unsigned char ori_cp_fixedweight2y=0;
	//VD register setting moved to scalerVideo.c, willy 20150713
	//static unsigned char ori_chroma_bw_lo=0;
	static unsigned char ori_ma_snr_edge_curve_slope=0;
	static unsigned char ori_ma_snr_output_clamp=0;

	static unsigned char ori_text_gain_pos=0;
	static unsigned char ori_text_gain_neg=0;

	static unsigned char ori_hmc_sub_pixel_diff_thd=0;
	static unsigned char ori_curve_mapping_w2_2=0;
	static unsigned char ori_curve_mapping_w2_3=0;
	static unsigned char ori_curve_mapping_w2_4=0;
	static unsigned char ori_curve_mapping_w2_5=0;

	static unsigned char ori_vcti_select=0;
	static unsigned char ori_vcti_en=0;
	static scaleup_dm_mem_crc_ctrl_RBUS ori_dm_mem_crc_ctrl_RBUS_reg;
	static unsigned char ori_spatialenablec = 0;
	static unsigned char ori_cds_enable=0;

	static unsigned char ori_vpk_gain_neg=0;
	static unsigned char ori_vpk_gain_pos=0;

	static unsigned char ori_I_uvsync_en=0;
	static unsigned char ori_I_uvgain=0;
	static unsigned char ori_I_lp_mode=0;
	static unsigned char ori_I_vlp_mode=0;
	static unsigned char ori_I_blending_mode=0;
	static unsigned char ori_I_cur_sel=0;
	static unsigned char ori_I_data_sel=0;
	static unsigned char ori_I_maxlen =0;

	static unsigned char ori_D_uvgain =0;
	static unsigned char ori_D_vlp_mode =0;
	static unsigned char ori_D_data_sel =0;
	static unsigned char ori_D_engdiv =0;
	static unsigned char ori_D_offdiv =0;
	static unsigned char ori_D_maxlen =0;
	static unsigned char ori_vc_snr_lpf_sel=0;
	static unsigned char ori_sresultweight_adjust_shift=0;
	static unsigned char ori_gst_gst_static_disable=0;
	static unsigned char ori_gst_min_sad_compare_diable=0;
	static unsigned char ori_gst_min_sad_nolimit_en=0;
	static unsigned char ori_smd_weave_dynamic=0;

	static unsigned char ori_gst_mv_limit=0;

    	static unsigned char ori_film_enable=0;

	unsigned char Motion_Th_c[7]={12,26,37,47,56,63,70};
	unsigned char Motion_Th_c_can[7] = {6,10,14,18,22,26,30};
	unsigned char Motion_Th[15]={8,10,13,16,17,28,36,45,53,57,64,67,68,69,72};

	static unsigned char ori_nintra_lp_src_yclamp_th=0;
	static di_im_di_nintra_search_dir_limit_RBUS ori_di_im_di_nintra_search_dir_limit;
	static di_di_smd_compensate_RBUS ori_smd_compensate_reg;
	static di_di_smd_refinemv2_RBUS ori_di_smd_refinemv2_reg;

	static unsigned char ori_dm_uzu_hor_mode_sel = 0;
	static unsigned char ori_dm_uzu_y_consttab_sel =0;

// chen 170522
//	static unsigned char ori_n_mcnr_offset = 0;
// end chen 170522
	static unsigned char ori_conf_lowbnd=0;
	static unsigned int kernel_init_count=0;

	static unsigned int start_count = 0;
	static unsigned char set_p2i_value = 0;

	di_im_di_hmc_pan_control_RBUS di_im_di_hmc_pan_control_reg;

	di_im_di_film_sawtooth_filmframe_th_RBUS im_di_film_sawtooth_filmframe_th_reg;
	static di_im_di_film_sawtooth_filmframe_th_RBUS ORI_im_di_film_sawtooth_filmframe_th_reg;
	di_im_di_film_static_sum_th_RBUS film_static_sum_th_reg;
	static di_im_di_film_static_sum_th_RBUS ORI_film_static_sum_th_reg;
	di_im_di_film_motion_sum_th_RBUS film_motion_sum_th_reg;
	static di_im_di_film_motion_sum_th_RBUS ORI_film_motion_sum_th_reg;

	_system_setting_info* system_info_structure_table = NULL;
	_clues* SmartPic_clue=NULL;
	_RPC_clues* RPC_SmartPic_clue=NULL;
	static unsigned char pre_source =255;
	unsigned char i=0;
	//unsigned char panDeb_str;
	//unsigned char panConti_str;


	unsigned char cur_source;
	system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();
	SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();
	RPC_SmartPic_clue = scaler_GetShare_Memory_RPC_SmartPic_Clue_Struct();
	if((system_info_structure_table == NULL) || (SmartPic_clue == NULL)|| (RPC_SmartPic_clue == NULL))
	{
		if(MA_print_count%360==0)
			ROSPrintf("Share Memory PQ data ERROR, system_info = %p, SmartPic_clue=%p, RPC_SmartPic_clue=%p \n",system_info_structure_table, SmartPic_clue, RPC_SmartPic_clue );
		return;
	}



	//ROSPrintf("\n rord vip current %d \n ",cur_source);

	if((apply==0)) // reset init value;
	{
		for(i=0;i<255;i++)
		{
			DynamicOptimizeSystem[i]=0;
		}
		if(Stop_Polling.Stop_Reset_Pattern==1)
			return;
		//ROSPrintf("\n cur_source %d , pre_source %d \n",cur_source,pre_source);
	}

	cur_source=(RPC_system_info_structure_table->VIP_source);

	init_di_smd_additionalcoeff1_reg.regValue=rtd_inl(DI_DI_SMD_AdditionalCoeff1_reg);

	smd_choosecandidate_reg.regValue = rtd_inl(DI_DI_SMD_ChooseCandidate_reg);

	smd_refinemv3_reg.regValue =  rtd_inl(DI_DI_SMD_RefineMV3_reg);
	smd_compensate_reg.regValue =  rtd_inl(DI_DI_SMD_Compensate_reg);

	init_di_smd_candidatelimitsad_reg.regValue =  rtd_inl(DI_DI_SMD_CandidateLimitSAD_reg);
	init_di_smd_additionalcoeff2_reg.regValue =  rtd_inl(DI_DI_SMD_AdditionalCoeff2_reg);
	//di_smd_dummy_reg.regValue =  rtd_inl(DI_DI_SMD_dummy_reg);

	di_smd_refinemv2_reg.regValue = rtd_inl(DI_DI_SMD_RefineMV2_reg);

	init_di_smd_pan1_reg.regValue =rtd_inl(DI_DI_SMD_Pan1_reg);
	di_di_smd_hardwarepan_modify1.regValue=rtd_inl(DI_DI_SMD_HardwarePan_Modify1_reg);
	//di_di_smd_sampling_gmvc.regValue = rtd_inl(DI_DI_SMD_Sampling_GMVc_reg);
	di_di_gst_compensate.regValue = rtd_inl(DI_DI_GST_Compensate_reg);

	di_di_smd_slow_motion_handle1.regValue= rtd_inl(DI_DI_SMD_Slow_Motion_handle1_reg);
	di_di_smd_slow_motion_handle2.regValue= rtd_inl(DI_DI_SMD_Slow_Motion_handle2_reg);

	di_im_di_nintra_lowpass_source.regValue	= rtd_inl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg);

	di_im_di_nintra_search_dir_limit.regValue= rtd_inl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg);

	init_di_gst_ctrl_reg.regValue = rtd_inl(DI_DI_GST_Ctrl_reg);

	color_temp_ctrl_reg.regValue = rtd_inl(MEMC_MUX_MEMC_MUX_DI_CTRL_reg);

	dch1_cp_ctrl_reg.regValue = rtd_inl(NR_DCH1_CP_Ctrl_reg);
	nr_mosquito_ctrl_RBUS_reg.regValue = rtd_inl(NR_MOSQUITO_CTRL_reg);
	curve_mapping_w1_1_reg.regValue = rtd_inl(NR_CURVE_MAPPING_W1_1_reg);
	curve_mapping_w1_2_reg.regValue = rtd_inl(NR_CURVE_MAPPING_W1_2_reg);
	curve_mapping_w1_3_reg.regValue = rtd_inl(NR_CURVE_MAPPING_W1_3_reg);

	curve_mapping_w2_1_reg.regValue = rtd_inl(NR_CURVE_MAPPING_W2_1_reg);
	curve_mapping_step2_reg.regValue = rtd_inl(NR_CURVE_MAPPING_STEP_2_reg);
	curve_mapping_step3_reg.regValue = rtd_inl(NR_CURVE_MAPPING_STEP_3_reg);
	di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);

	nr_mosquito_nr_level_ctrl_RBUS_reg.regValue = rtd_inl(NR_MOSQUITO_NR_LEVEL_CTRL_reg);
	nr_mosquito_nr_level_ctrl_1_RBUS_reg.regValue= rtd_inl(NR_MOSQUITO_NR_LEVEL_CTRL_1_reg);
	dm_uzu_Ctrl_reg.regValue = rtd_inl(SCALEUP_DM_UZU_Ctrl_reg);

	dch1_Spatial_Weight_Reg.regValue = rtd_inl(NR_DCH1_Spatial_Weight_reg);

	// No.191 monoscope
	color_sharp_dm_segpk_edgpk3.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_EDGPK3_reg);
	color_sharp_dm_peaking_bound_1_reg.regValue= rtd_inl(COLOR_SHARP_DM_PEAKING_BOUND_1_reg);


	di_rtnr_ma_snr_strength_control.regValue=	rtd_inl(DI_RTNR_MA_SNR_STRENGTH_CONTROL_reg);


	color_sharp_dm_peaking_gain_reg.regValue = rtd_inl(COLOR_SHARP_DM_PEAKING_GAIN_reg);

	di_hmc_adjustable_reg.regValue = rtd_inl(DI_IM_DI_HMC_ADJUSTABLE_reg);
	di_hmc_pan_control_par_2_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg);
	di_hmc_pan_control_par_1_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg);
	di_hmc_statistic1_reg.regValue = rtd_inl(DI_IM_DI_HMC_STATISTIC1_reg);

	di_hmc_adjustable3_reg.regValue = rtd_inl(DI_IM_DI_HMC_ADJUSTABLE3_reg);
	di_hmc_adjustable4_reg.regValue = rtd_inl(DI_IM_DI_HMC_ADJUSTABLE4_reg);


	dm_segpk_vpk2.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_VPK2_reg );



	im_di_weave_window_control_reg.regValue = rtd_inl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg);
	im_di_weave_window_1_start_reg.regValue = rtd_inl(DI_IM_DI_WEAVE_WINDOW_1_START_reg);
	im_di_weave_window_1_end_reg.regValue = rtd_inl(DI_IM_DI_WEAVE_WINDOW_1_END_reg);

	di_ma_frame_motion_th_a_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg);
	di_ma_frame_motion_th_b_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg);
	di_ma_frame_motion_th_c_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg);


    /*
	if(system_info_structure_table->Input_src_Form == _SRC_FROM_VDC && vd_pwr_ok) //only VDC format can read it.avoid vd ip had close
	{
		//YC_BW_CTRL_reg.regValue = rtd_inl(VDPQ_YC_BW_CTRL_reg);
		// outer if function currently useless, willy 20150605
		//vdpq_adap_bpf_y_th3_reg.regValue = rtd_inl(VDPQ_ADAP_BPF_Y_TH3_reg);
	}
	// set as the IC default value, willy 20150605
	//vdpq_adap_bpf_y_th3_reg.regValue = 0;
    */

	curve_mapping_w2_1_reg.regValue 	=	rtd_inl(NR_CURVE_MAPPING_W2_1_reg);
	curve_mapping_w2_2_reg.regValue 	=	rtd_inl(NR_CURVE_MAPPING_W2_2_reg);

	di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
	intra_th_Reg.regValue = rtd_inl(DI_IM_DI_INTRA_TH_reg);
	dm_mem_crc_ctrl_RBUS_reg.regValue= rtd_inl(SCALEUP_DM_MEM_CRC_CTRL_reg);

	//frame_motion_a_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg);
	color_sharp_dm_cds_cm0_u_bound_0_reg.regValue = rtd_inl(COLOR_SHARP_DM_CDS_CM0_U_BOUND_0_reg);

	rtnr_new_Ctrl.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_CONTROL_reg);

	ich1_newdcti_reg_2.regValue = rtd_inl(IDCTI_I_DCTI_CTRL_2_reg);
	ich1_newdcti_reg_1.regValue = rtd_inl(IDCTI_I_DCTI_CTRL_1_reg);
	dm_dcti_REG_1.regValue = rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_1_reg);
	dm_dcti_REG_2.regValue = rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_2_reg);

	dm_uzu_Ctrl.regValue = rtd_inl(SCALEUP_DM_UZU_Ctrl_reg);
	// special setting for LG139, willy 20151005
	di_ma_frame_motion_th_a_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg);
	di_ma_frame_motion_th_b_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg);
	di_ma_frame_motion_th_c_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg);
	di_smd_control_candiate_reg.regValue = rtd_inl(DI_DI_SMD_Control_CandidateList_reg);
	di_im_di_nintra_control.regValue = rtd_inl(DI_IM_DI_NINTRA_CONTROL_reg);
#if 0
	di_pan_dummy2_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_DUMMY_2_reg);
	di_pan_dummy3_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_DUMMY_3_reg);
//#else // henry Merlin3 temp
	di_im_di_rtnr_refined_ctrl2_reg.regValue = rtd_inl(DI_IM_DI_RTNR_REFINED_CTRL2_reg);
	di_di_smd_dummy_reg.regValue = rtd_inl(DI_DI_SMD_dummy_reg);
#endif

	di_im_di_btr_control_reg.regValue = rtd_inl(DI_IM_DI_BTR_CONTROL_reg);

	di_hmc_adjustable2_reg.regValue = rtd_inl(DI_IM_DI_HMC_ADJUSTABLE2_reg);

	if(cur_source == VIP_QUALITY_TV_SECAN){
	    	postp_secam_fix_ctrl_reg.regValue =VDPQ_rtd_inl(VDPQ_POSTP_SECAM_FIX_CTRL_reg);
		postp_secam_fix_y_detect0_reg.regValue = VDPQ_rtd_inl(VDPQ_POSTP_SECAM_FIX_Y_DETECT0_reg);
		postp_secam_fix_y_detect1_reg.regValue = VDPQ_rtd_inl(VDPQ_POSTP_SECAM_FIX_Y_DETECT1_reg);
	}
	di_im_new_mcnr_control.regValue = rtd_inl(DI_IM_NEW_MCNR_CONTROL_reg);

	dm_dir_uzu_conf_Reg.regValue = rtd_inl(SCALEUP_DM_DIR_UZU_Conf_reg);
	di_im_di_hmc_pan_control_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_CONTROL_reg);
	di_hmc_me_refine_ctrl2_reg.regValue = rtd_inl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg);
	FrameSobel_statistic_Reg.regValue = rtd_inl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg);



	di_di_smd_waterflag_ctr3.regValue = rtd_inl(DI_DI_SMD_WaterFlag_Ctr3_reg);
	di_di_smd_resurrect_ctrl.regValue = rtd_inl(DI_DI_SMD_Resurrect_Ctrl_reg);




	im_di_film_sawtooth_filmframe_th_reg.regValue = rtd_inl(DI_IM_DI_FILM_SAWTOOTH_FILMFRAME_TH_reg);
	film_static_sum_th_reg.regValue = rtd_inl(DI_IM_DI_FILM_STATIC_SUM_TH_reg);
	film_motion_sum_th_reg.regValue = rtd_inl(DI_IM_DI_FILM_MOTION_SUM_TH_reg);


	/*LG internal TV signal "E-52"*/
	tnrxc_mkii_ctrl_reg.regValue = rtd_inl(DI_TNRXC_MkII_CTRL_reg);

	decontour_de_contour_ctrl_reg.regValue = rtd_inl(IPQ_DECONTOUR_De_Contour_CTRL_reg);

	//when timing change ,need kernel quality handle load table finiished ,wait 120 times if still not flag form kernel , start work
	if((pre_source !=cur_source )&&(kernel_quality_init==0)&&(kernel_init_count<120))
	{
		kernel_init_count++;
		return;
	}

	if(pre_source !=cur_source||ScalerVIP_Get_pq_reset()==1)
	{
		scalerVIP_Set_pq_reset(0);
		//ROSPrintf(" \n rord ini =%d \n",kernel_quality_init);
		//ROSPrintf(" \n rord count =%d \n",kernel_init_count);

		ori_smd_upperbound_sad_forjudgemv=di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;
		ori_smd_rang_sad = smd_choosecandidate_reg.smd_reliablerange_sad_th;

		ori_smd_firmware_pan_sad_th = init_di_smd_pan1_reg.smd_firmware_pan_sad_th;

		ori_smd_firmware_pan=init_di_smd_pan1_reg.smd_firmware_pan;
		ori_smd_hardware_pan_en=init_di_smd_pan1_reg.smd_hardware_pan_en;
		ori_smd_apply_result_mode=init_di_smd_pan1_reg.smd_apply_result_mode;
		ori_smd_firmwarepan_sadmax=di_di_smd_hardwarepan_modify1.smd_firmwarepan_sadmax;
		//ori_smd_close2gmv_mvselect=di_di_smd_sampling_gmvc.smd_close2gmv_mvselect;
		//ori_smd_close2gmv_fw_en =di_di_smd_sampling_gmvc.smd_close2gmv_fw_en;
		ori_gst_subpixel_compensate_en=di_di_gst_compensate.gst_subpixel_compensate_en;
		//ori_gst_subpixel_hardwarepan_en = di_di_gst_compensate.gst_subpixel_hardwarepan_en;
		ori_smd_en = di_smd_control_candiate_reg.smd_en;
		ori_smd_result_en = init_di_smd_additionalcoeff1_reg.smd_result_en;


		ori_di_di_smd_waterflag_ctr3.regValue = di_di_smd_waterflag_ctr3.regValue;
		ori_di_di_smd_resurrect_ctrl.regValue = di_di_smd_resurrect_ctrl.regValue;



		ori_smd_acc_smd_en =di_di_smd_slow_motion_handle1.smd_acc_smd_en;
		ori_smd_spatialfreqnomatch_off =di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off;
		ori_smd_outofrange_content_new = di_di_smd_slow_motion_handle1.smd_outofrange_content_new;

		ori_gst_gst_static_disable = di_di_smd_slow_motion_handle1.gst_gst_static_disable;
		ori_gst_min_sad_compare_diable = di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable;
		ori_gst_min_sad_nolimit_en = di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en;
		ori_smd_weave_dynamic = di_di_smd_slow_motion_handle1.smd_weave_dynamic;

		ori_gst_mv_limit = di_di_smd_slow_motion_handle2.gst_mv_limit;

		ori_nintra_lp_src_yclamp_th = di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th;
		ori_di_im_di_nintra_search_dir_limit.regValue= di_im_di_nintra_search_dir_limit.regValue;


		ori_cp_sresultweight=dch1_cp_ctrl_reg.cp_sresultweight;
		ori_spatialenablec = dch1_cp_ctrl_reg.cp_spatialenablec;
		ori_vc_snr_lpf_sel = dch1_cp_ctrl_reg.vc_snr_lpf_sel;
		ori_sresultweight_adjust_shift = dch1_cp_ctrl_reg.sresultweight_adjust_shift;

		ori_mosquito_en=nr_mosquito_ctrl_RBUS_reg.mosquito_detect_en;
		ori_curve_mapping_w1_3 =curve_mapping_w1_1_reg.curvemapping_w1_3;
		ori_curve_mapping_w1_4=curve_mapping_w1_2_reg.curvemapping_w1_4;
		ori_curve_mapping_w1_5=curve_mapping_w1_2_reg.curvemapping_w1_5;
		ori_curve_mapping_w1_2=curve_mapping_w1_1_reg.curvemapping_w1_2;
		ori_curve_mapping_w1_6=curve_mapping_w1_2_reg.curvemapping_w1_6;
		ori_curve_mapping_w1_7=curve_mapping_w1_2_reg.curvemapping_w1_7;
		ori_curve_mapping_w1_8=curve_mapping_w1_3_reg.curvemapping_w1_8;

		ori_curve_mapping_step6=curve_mapping_step2_reg.curvemapping_step6;
		ori_curve_mapping_step7=curve_mapping_step3_reg.curvemapping_step7;
		ori_curve_mapping_step8=curve_mapping_step3_reg.curvemapping_step8;

		ori_ma_snr_edge_curve_slope=di_rtnr_ma_snr_strength_control.rtnr_ma_snr_edge_curve_slope;
		ori_ma_snr_output_clamp=di_rtnr_ma_snr_strength_control.rtnr_ma_snr_output_clamp;

		ori_mosquito_nr_positive_shift=nr_mosquito_nr_level_ctrl_RBUS_reg.mosquitonr_nlevel_positive_shift;
		//ori_mosquito_nr_bi_nlevel_max=nr_mosquito_nr_level_ctrl_RBUS_reg.mosquitonr_bi_nlevel_max;
		ori_mosquito_far_var_gain=nr_mosquito_nr_level_ctrl_1_RBUS_reg.far_var_gain;
		ori_ULTRI_value = dm_uzu_Ctrl_reg.regValue; // what is this????? assign a register value to a specific bit?
		ori_Intr_di_range = di_control_reg.regValue; // what is this????? assign a register value to a specific bit?

		ori_gain_pos=color_sharp_dm_segpk_edgpk3.gain_pos;
		ori_gain_neg=color_sharp_dm_segpk_edgpk3.gain_neg;
		ori_gain_LV_Gain=color_sharp_dm_peaking_bound_1_reg.lv;

		ori_cp_fixedweight1y = dch1_Spatial_Weight_Reg.cp_fixedweight1y;
		ori_cp_fixedweight2y = dch1_Spatial_Weight_Reg.cp_fixedweight2y;

		ori_text_gain_pos =color_sharp_dm_peaking_gain_reg.gain_pos;
		ori_text_gain_neg = color_sharp_dm_peaking_gain_reg.gain_neg;

		ORI_di_hmc_adjustable_reg.regValue= di_hmc_adjustable_reg.regValue;
		ori_hmc_sub_pixel_diff_thd = di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd;
		ORI_di_hmc_adjustable3_reg.regValue= di_hmc_adjustable3_reg.regValue;
		ORI_di_hmc_adjustable4_reg.regValue= di_hmc_adjustable4_reg.regValue;

		ori_curve_mapping_w2_2 = curve_mapping_w2_1_reg.curvemapping_w2_2;
		ori_curve_mapping_w2_3 = curve_mapping_w2_1_reg.curvemapping_w2_3;
		ori_curve_mapping_w2_4 = curve_mapping_w2_2_reg.curvemapping_w2_4;
		ori_curve_mapping_w2_5 = curve_mapping_w2_2_reg.curvemapping_w2_5;

		ori_vcti_select = dm_mem_crc_ctrl_RBUS_reg.vcti_select;
		ori_vcti_en = dm_mem_crc_ctrl_RBUS_reg.vcti_en;
		ori_dm_mem_crc_ctrl_RBUS_reg.regValue = dm_mem_crc_ctrl_RBUS_reg.regValue;

		//ori_frame_motion_a_reg = frame_motion_a_reg.ma_framestha;
		ori_cp_sresultweight = dch1_cp_ctrl_reg.cp_sresultweight;

		ori_cds_enable=color_sharp_dm_cds_cm0_u_bound_0_reg.cds_enable;


		ori_vpk_gain_neg=dm_segpk_vpk2.vpk_gain_neg;
		ori_vpk_gain_pos=dm_segpk_vpk2.vpk_gain_pos;


		ori_I_uvsync_en=ich1_newdcti_reg_2.uvsync_en;
		ori_I_uvgain=ich1_newdcti_reg_1.uvgain;
		ori_I_lp_mode=ich1_newdcti_reg_1.lp_mode;
		ori_I_vlp_mode=ich1_newdcti_reg_2.vlp_mode;
		ori_I_blending_mode=ich1_newdcti_reg_2.blending_mode;
		ori_I_cur_sel=ich1_newdcti_reg_1.cur_sel;
		ori_I_data_sel=ich1_newdcti_reg_1.data_sel;
		ori_I_maxlen =ich1_newdcti_reg_1.maxlen;

		ori_D_uvgain=dm_dcti_REG_1.uvgain;
		ori_D_vlp_mode=dm_dcti_REG_2.vlp_mode;
		ori_D_data_sel=dm_dcti_REG_1.data_sel;
		ori_D_engdiv=dm_dcti_REG_1.engdiv;
		ori_D_offdiv=dm_dcti_REG_1.offdiv;
		ori_D_maxlen=dm_dcti_REG_1.maxlen;

		ori_film_enable = di_control_reg.film_enable;

		ori_dm_uzu_hor_mode_sel = dm_uzu_Ctrl.hor_mode_sel;
		ori_dm_uzu_y_consttab_sel = dm_uzu_Ctrl.h_y_consttab_sel;
		ORI_di_ma_frame_motion_th_a_reg.regValue = di_ma_frame_motion_th_a_reg.regValue;
		ORI_di_ma_frame_motion_th_b_reg.regValue = di_ma_frame_motion_th_b_reg.regValue;
		ORI_di_ma_frame_motion_th_c_reg.regValue = di_ma_frame_motion_th_c_reg.regValue;
		ORI_di_smd_control_candiate_reg.regValue = di_smd_control_candiate_reg.regValue;
		ori_di_im_di_nintra_control.regValue = di_im_di_nintra_control.regValue;
#if 0
		ORI_di_pan_dummy2_reg.regValue = di_pan_dummy2_reg.regValue;
		ORI_di_pan_dummy3_reg.regValue = di_pan_dummy3_reg.regValue;
//#else // henry Merlin3 temp
		ORI_di_im_di_rtnr_refined_ctrl2_reg.regValue = di_im_di_rtnr_refined_ctrl2_reg.regValue;
		ORI_di_di_smd_dummy_reg.regValue = di_di_smd_dummy_reg.regValue;
		panDeb_str = ORI_di_di_smd_dummy_reg.dummy18024540_31_2 & 0xFF; // 8 bits [9:2]
		panConti_str = ORI_di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 & 0xFF; // 8 buts [24:17]
#else	// merlin4 henry
		ori_panDeb_str = g_panDeb_str;
		ori_panConti_str = g_panConti_str;
#endif

		ORI_di_im_di_btr_control_reg.regValue = di_im_di_btr_control_reg.regValue;

		ORI_di_hmc_adjustable2_reg.regValue = di_hmc_adjustable2_reg.regValue;

		ORI_postp_secam_fix_ctrl_reg.regValue = postp_secam_fix_ctrl_reg.regValue;
		ORI_postp_secam_fix_y_detect0_reg.regValue = postp_secam_fix_ctrl_reg.regValue;
		ORI_postp_secam_fix_y_detect1_reg.regValue = postp_secam_fix_ctrl_reg.regValue;

// chen 170522
	//	ori_n_mcnr_offset = di_im_new_mcnr_control.n_mcnr_offset;
// end chen 170522

		ORI_im_di_weave_window_control_reg.regValue = im_di_weave_window_control_reg.regValue;
		ORI_im_di_weave_window_1_start_reg.regValue = im_di_weave_window_1_start_reg.regValue;
		ORI_im_di_weave_window_1_end_reg.regValue = im_di_weave_window_1_end_reg.regValue;

		ori_conf_lowbnd =dm_dir_uzu_conf_Reg.conf_lowbnd;

		ORI_di_hmc_pan_control_par_1_reg.regValue = di_hmc_pan_control_par_1_reg.regValue;
		ORI_di_hmc_statistic1_reg.regValue = di_hmc_statistic1_reg.regValue;
		ORI_di_hmc_me_refine_ctrl2_reg.regValue = di_hmc_me_refine_ctrl2_reg.regValue;

		ORI_FrameSobel_statistic_Reg.regValue = FrameSobel_statistic_Reg.regValue;


		ori_smd_compensate_reg.regValue = smd_compensate_reg.regValue;

		ori_di_smd_refinemv2_reg.regValue= di_smd_refinemv2_reg.regValue;

		ORI_tnrxc_mkii_ctrl_reg.regValue = tnrxc_mkii_ctrl_reg.regValue;
		ORI_init_di_gst_ctrl_reg.regValue= init_di_gst_ctrl_reg.regValue;

		ORI_color_temp_ctrl_reg.regValue=color_temp_ctrl_reg.regValue;


		ORI_im_di_film_sawtooth_filmframe_th_reg.regValue = im_di_film_sawtooth_filmframe_th_reg.regValue;
		ORI_film_static_sum_th_reg.regValue = film_static_sum_th_reg.regValue;
		ORI_film_motion_sum_th_reg.regValue = film_motion_sum_th_reg.regValue;


		ORI_decontour_de_contour_ctrl_reg.regValue = decontour_de_contour_ctrl_reg.regValue;
		set_p2i_value = 0;

	}

	kernel_quality_init = 0 ;
	kernel_init_count =0;
	pre_source = cur_source;


	if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
	{
		di_double_buff_apply =1;
 	}
	init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;
	rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg,init_di_smd_additionalcoeff1_reg.regValue);

	switch(cur_source)
	{
		case VIP_QUALITY_CVBS_NTSC:
		{
			if(!vd_pwr_ok)
				break;

			//************** INI VALE START    ***************************************************


			//#1
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#2
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;

			//#7
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else		// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif
			//#12
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#23 #24
			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}

			init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;

			//#28
			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.regValue=ori_di_im_di_nintra_search_dir_limit.regValue;

			//#63
			di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			// di_im_new_mcnr_control.n_mcnr_offset ; don't set value in here, it control by mcnr

			//#75
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else		// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif
			di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th = ORI_di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th;

			//#107
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			smd_refinemv3_reg.smd_sfreq_diff_gain =4;
			smd_refinemv3_reg.smd_sfreq_diff_th =25;
			smd_refinemv3_reg.smd_sfreq_drop_th =80;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xd2;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;

			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=gSmd_gain;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=gSmd_offset;
			//di_smd_dummy_reg.smd_partialweave =0;

			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			di_di_smd_slow_motion_handle1.smd_outofrange_content_new = ori_smd_outofrange_content_new;
			di_di_smd_slow_motion_handle2.gst_mv_limit = ori_gst_mv_limit;
			//di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;

			im_di_weave_window_control_reg.fixedwindow1 = ORI_im_di_weave_window_control_reg.fixedwindow1;
			im_di_weave_window_1_start_reg.regValue = ORI_im_di_weave_window_1_start_reg.regValue;
			im_di_weave_window_1_end_reg.regValue = ORI_im_di_weave_window_1_end_reg.regValue;

			di_hmc_statistic1_reg.regValue = ORI_di_hmc_statistic1_reg.regValue;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;
			FrameSobel_statistic_Reg.regValue = ORI_FrameSobel_statistic_Reg.regValue;
			di_hmc_adjustable_reg.regValue = ORI_di_hmc_adjustable_reg.regValue;
			di_hmc_adjustable2_reg.regValue= ORI_di_hmc_adjustable2_reg.regValue;
			di_hmc_adjustable3_reg.regValue= ORI_di_hmc_adjustable3_reg.regValue;
			di_hmc_adjustable4_reg.regValue= ORI_di_hmc_adjustable4_reg.regValue;


			//#139
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			//di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_c_reg.ma_framesthc = ORI_di_ma_frame_motion_th_c_reg.ma_framesthc;
			di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			dch1_cp_ctrl_reg.sresultweight_adjust_shift = ori_sresultweight_adjust_shift;
			dch1_cp_ctrl_reg.vc_snr_lpf_sel = ori_vc_snr_lpf_sel;
			curve_mapping_w1_2_reg.curvemapping_w1_6 = ori_curve_mapping_w1_6;
			curve_mapping_w1_2_reg.curvemapping_w1_7 = ori_curve_mapping_w1_7;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#151

			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb = ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;

			dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;
			di_im_di_nintra_control.nintra_intersection_check_en =ori_di_im_di_nintra_control.nintra_intersection_check_en;
			di_im_di_nintra_control.nintra_preline_dir_check2_en = ori_di_im_di_nintra_control.nintra_preline_dir_check2_en;

			//#188
			di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = ORI_di_im_di_btr_control_reg.btr_blendtemporalrecoveryen;

			//#189
			di_hmc_statistic1_reg.ma_hmc_lineratio = ORI_di_hmc_statistic1_reg.ma_hmc_lineratio;
			di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = ORI_di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass;
			di_hmc_adjustable_reg.hmc_mv_refine_en = ORI_di_hmc_adjustable_reg.hmc_mv_refine_en;
			di_hmc_adjustable2_reg.hme_x_continued_counter = ORI_di_hmc_adjustable2_reg.hme_x_continued_counter;
			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}

			init_di_smd_additionalcoeff1_reg.smd_result_en = ori_smd_result_en;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;

			//#192
			dch1_cp_ctrl_reg.cp_sresultweight =ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_3 =ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4 =ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5 =ori_curve_mapping_w1_5;

			//VPAN case
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[1] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;
			}
			else if(DynamicOptimizeSystem[2] ==1)
			{
				drvif_color_rtnr_c_th_isr(_CHANNEL1,&Motion_Th_c[0]);
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
			}
			else if(DynamicOptimizeSystem[7] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else		// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif

			}
			else if(DynamicOptimizeSystem[12] ==1)
			{
				//drvif_color_newrtnr_sad_th(1,&Motion_Th[0]);//for sad edge th setting
				//drvif_color_newrtnr_sad_th(0,&Motion_Th[0]);//for sad nonedge th setting
				drvif_color_rtnr_y_th_isr(_CHANNEL1,&Motion_Th[0]);

				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if((DynamicOptimizeSystem[23]==1)||(DynamicOptimizeSystem[24]==1))
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=0)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=0;
			}
			else if(DynamicOptimizeSystem[28] ==1)
			{
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 255;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=40;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=40;
			}
			else if(DynamicOptimizeSystem[28] ==2)
			{
				dm_dir_uzu_conf_Reg.conf_lowbnd = 30;
			}
			else if(DynamicOptimizeSystem[63] ==1)
			{
				di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;
// chen 170522
	//			di_im_new_mcnr_control.n_mcnr_offset =0;
// end chen 170522


			}
			else if(DynamicOptimizeSystem[75] ==1)
			{
				drvif_color_rtnr_c_th_isr(_CHANNEL1,&Motion_Th_c_can[0]);
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else		// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif
				di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th = 13; // special HMC setting for LG#75 and LG#107, jimmy 20151203
			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 170;//125; willy, 20151224
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				smd_refinemv3_reg.smd_sfreq_diff_gain =0;
				smd_refinemv3_reg.smd_sfreq_diff_th =0;
				smd_refinemv3_reg.smd_sfreq_drop_th =0;
				smd_compensate_reg.smd_compensate_teeth_th =5;

				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xff;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain = 6;//2; willy, 20151224
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;
				//di_smd_dummy_reg.smd_partialweave =3;

				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 160;

				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;
				di_di_smd_slow_motion_handle1.smd_outofrange_content_new = 0;
				di_di_smd_slow_motion_handle2.gst_mv_limit = 1;
				//di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;


				di_hmc_statistic1_reg.ma_hmc_lineratio = 24;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 18;

				FrameSobel_statistic_Reg.regValue = 0xc51f4200;
				di_hmc_adjustable_reg.regValue= 0x8FFD0004;
				di_hmc_adjustable2_reg.regValue= 0x0732c014; // special HMC setting for LG#75 and LG#107, jimmy 20151203
				di_hmc_adjustable3_reg.regValue= 0x6819141e;
				di_hmc_adjustable4_reg.regValue= 0x850a0c0c;



				if(RTNR_MAD_count_Y2_avg==0)
					start_count = 30;
				//select windown fix weave
				if(start_count==0) {
					im_di_weave_window_control_reg.fixedwindow1 = 1;
					im_di_weave_window_1_start_reg.regValue = 0x00460030;
					im_di_weave_window_1_end_reg.regValue = 0x008e00ec;
				} else {
					start_count--;
				}

			}
			else if(DynamicOptimizeSystem[139] ==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 25;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 25;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 9;

				di_ma_frame_motion_th_b_reg.ma_framesthb = 25;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 25;

				di_ma_frame_motion_th_c_reg.ma_framesthc = 20;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 20;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;

				dch1_cp_ctrl_reg.sresultweight_adjust_shift = 0;
				dch1_cp_ctrl_reg.vc_snr_lpf_sel = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_6 = 3;
				curve_mapping_w1_2_reg.curvemapping_w1_7 = 3;
				curve_mapping_step3_reg.curvemapping_step8=42;

			}
			else if(DynamicOptimizeSystem[147])
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
			}
			else if(DynamicOptimizeSystem[151])
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 50;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 70;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 70;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 70;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framemthb = 70;



				dm_dir_uzu_conf_Reg.conf_lowbnd = 63;
				di_im_di_nintra_control.nintra_intersection_check_en =0;
				di_im_di_nintra_control.nintra_preline_dir_check2_en = 0;

			}
			else if(DynamicOptimizeSystem[188])
			{
				di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = 0;
				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=0)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en = 0;

			}
			else if(DynamicOptimizeSystem[189])
			{
				di_hmc_statistic1_reg.ma_hmc_lineratio += 24;
				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = 0;
				di_hmc_adjustable_reg.hmc_mv_refine_en = 0;
				di_hmc_adjustable2_reg.hme_x_continued_counter = 5;

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en = 0;

				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 12;

				rtd_outl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg, di_hmc_me_refine_ctrl2_reg.regValue);

			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_3 =8;
				curve_mapping_w1_2_reg.curvemapping_w1_4 =0;
				curve_mapping_w1_2_reg.curvemapping_w1_5 =0;
			}
			else if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_VPAN) >= 2)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;
			}


			//#1
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			//#2
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);

			//#7

			//#23 #24
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

			//#28
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);

			//#63

			// protect di 3Abit,reduce r/w time .
			di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
			di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
			di_control_reg.write_enable_1=1;

			//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
			rtd_outl(DI_IM_DI_INTRA_TH_reg, intra_th_Reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_IM_NEW_MCNR_CONTROL_reg,di_im_new_mcnr_control.regValue);

			//#75
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#107

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_RefineMV3_reg, smd_refinemv3_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);
			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);
			//rtd_outl(DI_DI_SMD_dummy_reg, di_smd_dummy_reg.regValue);

			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle2_reg, di_di_smd_slow_motion_handle2.regValue);

			rtd_outl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, im_di_weave_window_control_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_START_reg, im_di_weave_window_1_start_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_END_reg, im_di_weave_window_1_end_reg.regValue);


			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
			rtd_outl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg,FrameSobel_statistic_Reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE3_reg, di_hmc_adjustable3_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE4_reg, di_hmc_adjustable4_reg.regValue);


			//#139
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);			//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);		//LGE control

			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#151

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			rtd_outl(SCALEUP_DM_DIR_UZU_Conf_reg, dm_dir_uzu_conf_Reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);

			//#188
			rtd_outl(DI_IM_DI_BTR_CONTROL_reg, di_im_di_btr_control_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

			//#189
			rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);

			//#192
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);

			// VPAN
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

			// VD Setting related register control, created by willy, 20151114
			if( DynamicOptimizeSystem[1] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_1);

			if( DynamicOptimizeSystem[2] == 1 )
			{
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_2);
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_DOS_2_TNR_XC);
			}

			if( DynamicOptimizeSystem[7] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_7);

			if( DynamicOptimizeSystem[11] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_11);

			if( DynamicOptimizeSystem[12] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_12);

			if( DynamicOptimizeSystem[28] != 0 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_28);

			if( DynamicOptimizeSystem[63] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_63);

			if( DynamicOptimizeSystem[107] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_107);

			if( DynamicOptimizeSystem[123] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_123);

			if( DynamicOptimizeSystem[134] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_134);

			if( DynamicOptimizeSystem[139] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_139);

			if( DynamicOptimizeSystem[189] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_NTSC_VIP_DOS_LEAF_72);

		}
		break;

		case VIP_QUALITY_CVBS_PAL:
		{
			if(!vd_pwr_ok)
				break;
			//************** INI VALE START    ***************************************************
			//#1
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#2
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
	            //di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha; // 20160202, willy, smooth the noisy line, removed by MissKim
	            //di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
	            //di_ma_frame_motion_th_c_reg.ma_framerlvthc = ORI_di_ma_frame_motion_th_c_reg.ma_framerlvthc;
	            //dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;

			//#7
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else		// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif

			//#12
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#23 #24

			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}
			init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;

			//#28
			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.regValue=ori_di_im_di_nintra_search_dir_limit.regValue;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;

			//#39
			di_control_reg.film_enable = ori_film_enable;
			di_control_reg.write_enable_5 =1;

			//#63
			di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			// di_im_new_mcnr_control.n_mcnr_offset ; don't set value in here, it control by mcnr

			//#75
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else		// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif
			di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th = ORI_di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th;

			//#107
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			smd_refinemv3_reg.smd_sfreq_diff_gain =4;
			smd_refinemv3_reg.smd_sfreq_diff_th =25;
			smd_refinemv3_reg.smd_sfreq_drop_th =80;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;
			smd_compensate_reg.smd_compensate_avg = ori_smd_compensate_reg.smd_compensate_avg;

			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xd2;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;

			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=gSmd_gain;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=gSmd_offset;
			//di_smd_dummy_reg.smd_partialweave =0;

			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			di_di_smd_slow_motion_handle1.smd_outofrange_content_new = ori_smd_outofrange_content_new;
			di_di_smd_slow_motion_handle2.gst_mv_limit = ori_gst_mv_limit;
			//di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;

			im_di_weave_window_control_reg.fixedwindow1 = ORI_im_di_weave_window_control_reg.fixedwindow1;
			im_di_weave_window_control_reg.fixedwindowmode = ORI_im_di_weave_window_control_reg.fixedwindowmode;
			im_di_weave_window_1_start_reg.regValue = ORI_im_di_weave_window_1_start_reg.regValue;
			im_di_weave_window_1_end_reg.regValue = ORI_im_di_weave_window_1_end_reg.regValue;

			di_hmc_statistic1_reg.regValue = ORI_di_hmc_statistic1_reg.regValue;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;
			FrameSobel_statistic_Reg.regValue = ORI_FrameSobel_statistic_Reg.regValue;
			di_hmc_adjustable_reg.regValue= ORI_di_hmc_adjustable_reg.regValue;
			di_hmc_adjustable2_reg.regValue= ORI_di_hmc_adjustable2_reg.regValue;
			di_hmc_adjustable3_reg.regValue= ORI_di_hmc_adjustable3_reg.regValue;
			di_hmc_adjustable4_reg.regValue= ORI_di_hmc_adjustable4_reg.regValue;




			//#139
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_c_reg.ma_framesthc = ORI_di_ma_frame_motion_th_c_reg.ma_framesthc;
			di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			dch1_cp_ctrl_reg.sresultweight_adjust_shift = ori_sresultweight_adjust_shift;
			dch1_cp_ctrl_reg.vc_snr_lpf_sel = ori_vc_snr_lpf_sel;
			curve_mapping_w1_2_reg.curvemapping_w1_6 = ori_curve_mapping_w1_6;
			curve_mapping_w1_2_reg.curvemapping_w1_7 = ori_curve_mapping_w1_7;
			curve_mapping_w1_3_reg.curvemapping_w1_8 = ori_curve_mapping_w1_8;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#151

			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb = ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;


			dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;
			di_im_di_nintra_control.nintra_intersection_check_en =ori_di_im_di_nintra_control.nintra_intersection_check_en;
			di_im_di_nintra_control.nintra_preline_dir_check2_en = ori_di_im_di_nintra_control.nintra_preline_dir_check2_en;

			//#188
			di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = ORI_di_im_di_btr_control_reg.btr_blendtemporalrecoveryen;

			//#189
			di_hmc_statistic1_reg.ma_hmc_lineratio = ORI_di_hmc_statistic1_reg.ma_hmc_lineratio;
			di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = ORI_di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass;
			di_hmc_adjustable_reg.hmc_mv_refine_en = ORI_di_hmc_adjustable_reg.hmc_mv_refine_en;
			di_hmc_adjustable2_reg.hme_x_continued_counter = ORI_di_hmc_adjustable2_reg.hme_x_continued_counter;
			init_di_smd_additionalcoeff1_reg.smd_result_en = ori_smd_result_en;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;

			//#192

			dch1_cp_ctrl_reg.cp_sresultweight =ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_3 =ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4 =ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5 =ori_curve_mapping_w1_5;

			//VPAN case
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[1] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if(DynamicOptimizeSystem[2] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
		                //di_ma_frame_motion_th_a_reg.ma_framerlvtha = 1; // 20160202, willy, smooth the noisy line, removed by MissKim
		                //di_ma_frame_motion_th_b_reg.ma_framerlvthb = 1;
		                //di_ma_frame_motion_th_c_reg.ma_framerlvthc = 1;
		                //dm_dir_uzu_conf_Reg.conf_lowbnd = 50;
			}
			else if(DynamicOptimizeSystem[7] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else		// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif

			}
			else if(DynamicOptimizeSystem[12] ==1)
			{
				//drvif_color_newrtnr_sad_th(1,&Motion_Th[0]);//for sad edge th setting
				//drvif_color_newrtnr_sad_th(0,&Motion_Th[0]);//for sad nonedge th setting
				drvif_color_rtnr_y_th_isr(_CHANNEL1,&Motion_Th[0]);

				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if((DynamicOptimizeSystem[23]==1)||(DynamicOptimizeSystem[24]==1))
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=0;
			}
			else if(DynamicOptimizeSystem[28] ==1)
			{
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 30;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=16;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=16;
			}
			else if(DynamicOptimizeSystem[28] == 2)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 255;
                		dm_dir_uzu_conf_Reg.conf_lowbnd = 30;
			}
			else if(DynamicOptimizeSystem[39] == 1)
			{
				di_control_reg.film_enable = 17;
				di_control_reg.write_enable_5=1;
			}
			else if(DynamicOptimizeSystem[63] ==1)
			{
				di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;

// chen 170522
	//			di_im_new_mcnr_control.n_mcnr_offset =0;
// end chen 170522

				// 20160106 jimmy, turn up RTNR C for cloth cross color
				drvif_color_rtnr_c_th_isr(_CHANNEL1,&Motion_Th_c[0]);

			}
			else if(DynamicOptimizeSystem[75] ==1)
			{
				drvif_color_rtnr_c_th_isr(_CHANNEL1,&Motion_Th_c_can[0]);
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else		// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif
				di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th = 13; // special HMC setting for LG#75, jimmy 20151203
			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 170;//125; willy, 20151224
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 10;//0; willy, 20151224
				smd_refinemv3_reg.smd_sfreq_diff_gain =0;
				smd_refinemv3_reg.smd_sfreq_diff_th =0;
				smd_refinemv3_reg.smd_sfreq_drop_th =0;
				smd_compensate_reg.smd_compensate_teeth_th =5;
                		smd_compensate_reg.smd_compensate_avg = 148; // willy, 20151224

				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xff;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain = 6;//2; willy, 20151224
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;
				//di_smd_dummy_reg.smd_partialweave =3;

				di_hmc_adjustable_reg.hmc_mv_refine_mor_en = 1;
				di_hmc_adjustable_reg.hmc_mv_refine_y_th = 160;
				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 160;


				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 0;//3; willy, 20151224
				di_di_smd_slow_motion_handle1.smd_outofrange_content_new = 0;
				di_di_smd_slow_motion_handle2.gst_mv_limit = 1;
				//di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;



				di_hmc_statistic1_reg.ma_hmc_lineratio = 24;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 18;

				FrameSobel_statistic_Reg.regValue = 0xc51f4200;
				di_hmc_adjustable_reg.regValue= 0x8FFD0004;
				di_hmc_adjustable2_reg.regValue= 0x0732c014; // special HMC setting for LG#75 and LG#107, jimmy 20151203
				di_hmc_adjustable3_reg.regValue= 0x6819141e;
				di_hmc_adjustable4_reg.regValue= 0x850a0c0c;



		                // weave window to do intra
		                im_di_weave_window_control_reg.fixedwindow1 = 1;
		                im_di_weave_window_control_reg.fixedwindowmode = 0;
		                im_di_weave_window_1_start_reg.regValue = 0x00500033;
		                im_di_weave_window_1_end_reg.regValue = 0x00a700d3;

			}
			else if(DynamicOptimizeSystem[139] ==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 20;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 20;
				di_ma_frame_motion_th_c_reg.ma_framesthc = 20;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 20;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;

				dch1_cp_ctrl_reg.sresultweight_adjust_shift = 0;
				dch1_cp_ctrl_reg.vc_snr_lpf_sel = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_6 = 3;
				curve_mapping_w1_2_reg.curvemapping_w1_7 = 3;
				curve_mapping_w1_3_reg.curvemapping_w1_8 = 6;
				curve_mapping_step3_reg.curvemapping_step8=42;

			}
			else if(DynamicOptimizeSystem[147])
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
			}
			else if(DynamicOptimizeSystem[151])
			{

				di_ma_frame_motion_th_a_reg.ma_framestha = 50;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framemthb = 50;

				dm_dir_uzu_conf_Reg.conf_lowbnd = 63;
				di_im_di_nintra_control.nintra_intersection_check_en =0;
				di_im_di_nintra_control.nintra_preline_dir_check2_en = 0;
			}
			else if(DynamicOptimizeSystem[188])
			{
				di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = 0;
			}
			else if(DynamicOptimizeSystem[189])
			{
				di_hmc_statistic1_reg.ma_hmc_lineratio += 24;
				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = 0;
				di_hmc_adjustable_reg.hmc_mv_refine_en = 0;
				di_hmc_adjustable2_reg.hme_x_continued_counter = 0;

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en = 0;
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 12;

				rtd_outl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg, di_hmc_me_refine_ctrl2_reg.regValue);

			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_3 =8;
				curve_mapping_w1_2_reg.curvemapping_w1_4 =0;
				curve_mapping_w1_2_reg.curvemapping_w1_5 =0;
			}
			else if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_VPAN) >= 2)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;
			}


			//#1
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			//#2
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
            //rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue); // 20160202, willy, smooth the noisy line, removed by MissKim
			//rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			//rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);

			//#7

			//#23 #24
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

			//#28
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

            //#39
            //rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19

			//#63

			// protect di 3Abit,reduce r/w time .
			di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
			di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
			di_control_reg.write_enable_1=1;

			//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
			rtd_outl(DI_IM_DI_INTRA_TH_reg, intra_th_Reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_IM_NEW_MCNR_CONTROL_reg,di_im_new_mcnr_control.regValue);

			//#75
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);

			//#107

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_RefineMV3_reg, smd_refinemv3_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);
			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);
			//rtd_outl(DI_DI_SMD_dummy_reg, di_smd_dummy_reg.regValue);

			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle2_reg, di_di_smd_slow_motion_handle2.regValue);


			rtd_outl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, im_di_weave_window_control_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_START_reg, im_di_weave_window_1_start_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_END_reg, im_di_weave_window_1_end_reg.regValue);


			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
			rtd_outl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg,FrameSobel_statistic_Reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE3_reg, di_hmc_adjustable3_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE4_reg, di_hmc_adjustable4_reg.regValue);


			//#139
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_3_reg, curve_mapping_w1_3_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control

			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#151

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			rtd_outl(SCALEUP_DM_DIR_UZU_Conf_reg, dm_dir_uzu_conf_Reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);

			//#188
			rtd_outl(DI_IM_DI_BTR_CONTROL_reg, di_im_di_btr_control_reg.regValue);

			//#189
			rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);

			//#192
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);

			// VPAN
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

			// VD Setting related register control, created by willy, 20151114
			if( DynamicOptimizeSystem[2] == 1 )
			{
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_2);
				scalerVideo_ApplyVDSetting(VDPQ_PAL_DOS_2_TNR_XC);
			}

			if( DynamicOptimizeSystem[7] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_7);

			if( DynamicOptimizeSystem[11] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_11);

			if( DynamicOptimizeSystem[12] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_12);

			if( DynamicOptimizeSystem[28] != 0 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_28);

			if( DynamicOptimizeSystem[63] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_63);

			if( DynamicOptimizeSystem[107] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_107);

			if( DynamicOptimizeSystem[123] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_123);

			if( DynamicOptimizeSystem[134] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_134);

			if( DynamicOptimizeSystem[139] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_139);

			if( DynamicOptimizeSystem[189] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_LEAF_74);

		}
		break;

		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_YPbPr_480I:
		{

			//************** INI VALE START    ***************************************************
			//#1
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#2
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable = ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable =ori_gst_min_sad_compare_diable;

			//#7
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else		// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif

			//#12
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#23 #24

			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}
			init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;

			//#28
			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.regValue=ori_di_im_di_nintra_search_dir_limit.regValue;

			//#50
			decontour_de_contour_ctrl_reg.decont_snr_blend_mode=ORI_decontour_de_contour_ctrl_reg.decont_snr_blend_mode;

			//#63
			di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;

			//#75
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else		// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif
			//#107
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			smd_refinemv3_reg.smd_sfreq_diff_gain =4;
			smd_refinemv3_reg.smd_sfreq_diff_th =25;
			smd_refinemv3_reg.smd_sfreq_drop_th =80;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;
			smd_compensate_reg.smd_compensate_avg = ori_smd_compensate_reg.smd_compensate_avg;

			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xd2;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=gSmd_gain;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=gSmd_offset;
			//di_smd_dummy_reg.smd_partialweave =0;

			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			di_di_smd_slow_motion_handle1.smd_outofrange_content_new = ori_smd_outofrange_content_new;
			di_di_smd_slow_motion_handle2.gst_mv_limit = ori_gst_mv_limit;
			//di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;

			di_hmc_statistic1_reg.regValue = ORI_di_hmc_statistic1_reg.regValue;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;
			FrameSobel_statistic_Reg.regValue = ORI_FrameSobel_statistic_Reg.regValue;
			di_hmc_adjustable_reg.regValue = ORI_di_hmc_adjustable_reg.regValue;
			di_hmc_adjustable2_reg.regValue= ORI_di_hmc_adjustable2_reg.regValue;
			di_hmc_adjustable3_reg.regValue= ORI_di_hmc_adjustable3_reg.regValue;
			di_hmc_adjustable4_reg.regValue= ORI_di_hmc_adjustable4_reg.regValue;




			//#139
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_c_reg.ma_framesthc = ORI_di_ma_frame_motion_th_c_reg.ma_framesthc;
			di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			dch1_cp_ctrl_reg.sresultweight_adjust_shift = ori_sresultweight_adjust_shift;
			dch1_cp_ctrl_reg.vc_snr_lpf_sel = ori_vc_snr_lpf_sel;
			curve_mapping_w1_2_reg.curvemapping_w1_6 = ori_curve_mapping_w1_6;
			curve_mapping_w1_2_reg.curvemapping_w1_7 = ori_curve_mapping_w1_7;
			//curve_mapping_w1_3_reg.curvemapping_w1_8 = ori_curve_mapping_w1_8;

			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#151

			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb = ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;

			dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;
			di_im_di_nintra_control.nintra_intersection_check_en =ori_di_im_di_nintra_control.nintra_intersection_check_en;
			di_im_di_nintra_control.nintra_preline_dir_check2_en = ori_di_im_di_nintra_control.nintra_preline_dir_check2_en;

			//#152
			di_hmc_adjustable_reg.hmc_mv_refine_en =ORI_di_hmc_adjustable_reg.hmc_mv_refine_en;
			di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en = ORI_di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en;

			//#192
			dch1_cp_ctrl_reg.cp_sresultweight = ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_2=ori_curve_mapping_w1_2;
			curve_mapping_w1_1_reg.curvemapping_w1_3=ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4=ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5=ori_curve_mapping_w1_5;
			curve_mapping_step2_reg.curvemapping_step6=ori_curve_mapping_step6;
			curve_mapping_step3_reg.curvemapping_step7=ori_curve_mapping_step7;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[1] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;
			}
			else if(DynamicOptimizeSystem[2] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable = 1;
				di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable =1;

			}
			else if(DynamicOptimizeSystem[7] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else		// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif

			}
			else if(DynamicOptimizeSystem[12] ==1)
			{
				//drvif_color_newrtnr_sad_th(1,&Motion_Th[0]);//for sad edge th setting
				//drvif_color_newrtnr_sad_th(0,&Motion_Th[0]);//for sad nonedge th setting
				drvif_color_rtnr_y_th_isr(_CHANNEL1,&Motion_Th[0]);



				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if((DynamicOptimizeSystem[23]==1)||(DynamicOptimizeSystem[24]==1))
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=0;

			}
			else if(DynamicOptimizeSystem[28] ==1)
			{
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 255;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=40;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=40;
			}
			else if(DynamicOptimizeSystem[63] ==1)
			{
				di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;
        			di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;

			}
			else if(DynamicOptimizeSystem[75] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else		// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif

			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=225;
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				smd_refinemv3_reg.smd_sfreq_diff_gain =0;
				smd_refinemv3_reg.smd_sfreq_diff_th =0;
				smd_refinemv3_reg.smd_sfreq_drop_th =0;
				smd_compensate_reg.smd_compensate_teeth_th =5;
				smd_compensate_reg.smd_compensate_avg = 152;

				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xff;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=6;
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;
				//di_smd_dummy_reg.smd_partialweave =3;

				di_hmc_adjustable_reg.hmc_mv_refine_mor_en = 1;
				di_hmc_adjustable_reg.hmc_mv_refine_y_th = 120;
				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 180;


				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;
				di_di_smd_slow_motion_handle1.smd_outofrange_content_new = 0;
				di_di_smd_slow_motion_handle2.gst_mv_limit = 1;
				//di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;

				di_hmc_statistic1_reg.ma_hmc_lineratio = 24;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 18;

				FrameSobel_statistic_Reg.regValue = 0xc51f4200;
				di_hmc_adjustable_reg.regValue= 0x8FFD0004;
				di_hmc_adjustable2_reg.regValue= 0x0732c014; // special HMC setting for LG#75 and LG#107, jimmy 20151203
				di_hmc_adjustable3_reg.regValue= 0x6819141e;
				di_hmc_adjustable4_reg.regValue= 0x850a0c0c;

				 //weave window --> fix intra on LG logo!
				if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION)<=4)
				{
					im_di_weave_window_control_reg.fixedwindow1 = 0;
					im_di_weave_window_control_reg.fixedwindowmode = 0;
				}
				else
				{
					im_di_weave_window_control_reg.fixedwindow1 = 1;
					im_di_weave_window_control_reg.fixedwindowmode = 3;
				}
				im_di_weave_window_1_start_reg.xstart_25_13 =74 ;
				im_di_weave_window_1_start_reg.ystart_25_13=194 ;
				im_di_weave_window_1_end_reg.xend_25_13 = 81;
				im_di_weave_window_1_end_reg.yend_25_13 =201 ;


			}
			else if(DynamicOptimizeSystem[139] ==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 7;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 20;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 20;
				di_ma_frame_motion_th_c_reg.ma_framesthc = 20;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 20;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;

				dch1_cp_ctrl_reg.sresultweight_adjust_shift = 0;
				dch1_cp_ctrl_reg.vc_snr_lpf_sel = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_6 = 3;
				curve_mapping_w1_2_reg.curvemapping_w1_7 = 3;
				//curve_mapping_w1_3_reg.curvemapping_w1_8 = 12;
				curve_mapping_step3_reg.curvemapping_step8=42;

			}
			else if(DynamicOptimizeSystem[147])
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
			}
			else if(DynamicOptimizeSystem[151])
			{

				di_ma_frame_motion_th_a_reg.ma_framestha = 50;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 70;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 70;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 70;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framemthb = 70;

				dm_dir_uzu_conf_Reg.conf_lowbnd = 63;
				di_im_di_nintra_control.nintra_intersection_check_en =0;
				di_im_di_nintra_control.nintra_preline_dir_check2_en = 0;
			}
			else if(DynamicOptimizeSystem[152]) //don't need reset value
			{
				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = 0;
				di_im_di_hmc_pan_control_reg.pan_me_fw_control_motion_vector_det = 0;
				di_hmc_statistic1_reg.ma_hmc_lineratio =128;

				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio =12;

				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass =0;

				di_hmc_adjustable_reg.hmc_mv_refine_en =0;
				di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en = 0;

				// protect di 3Abit,reduce r/w time .
				di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
				di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
				di_control_reg.write_enable_1=1;
				//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
				rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_reg, di_im_di_hmc_pan_control_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);

				rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg,di_hmc_me_refine_ctrl2_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg,di_hmc_adjustable_reg.regValue);

			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_2=8;
				curve_mapping_w1_1_reg.curvemapping_w1_3=0;
				curve_mapping_w1_2_reg.curvemapping_w1_4=0;
				curve_mapping_w1_2_reg.curvemapping_w1_5=0;
				curve_mapping_step2_reg.curvemapping_step6=14;
				curve_mapping_step3_reg.curvemapping_step7=30;
				curve_mapping_step3_reg.curvemapping_step8=62;
			} else if (DynamicOptimizeSystem[50]) {
				decontour_de_contour_ctrl_reg.decont_snr_blend_mode = 0;
				IoReg_ClearBits(MPEGNR_ICH1_MPEGNR2_reg, MPEGNR_ICH1_MPEGNR2_cp_mpegenable_x_mask);
				IoReg_SetBits(MPEGNR_ICH1_MPEGNR_DB_CTRL_reg, MPEGNR_ICH1_MPEGNR_DB_CTRL_mpegnr_db_apply_mask); /* DB apply */
			}

			//#1

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			//#2
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg,di_di_smd_slow_motion_handle1.regValue);

			//#7
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#23 #24

			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);


			//#28
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);

			//#50
			rtd_outl(IPQ_DECONTOUR_De_Contour_CTRL_reg, decontour_de_contour_ctrl_reg.regValue);
			IoReg_SetBits(IPQ_DECONTOUR_De_Contour_db_reg_ctl_reg, IPQ_DECONTOUR_De_Contour_db_reg_ctl_db_apply_mask);

			//#63
			// protect di 3Abit,reduce r/w time .
			di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
			di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
			di_control_reg.write_enable_1=1;
			//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
			rtd_outl(DI_IM_DI_INTRA_TH_reg, intra_th_Reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);

			//#75
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#107

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_RefineMV3_reg, smd_refinemv3_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);
			//rtd_outl(DI_DI_SMD_dummy_reg, di_smd_dummy_reg.regValue);

			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle2_reg, di_di_smd_slow_motion_handle2.regValue);

			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
			rtd_outl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg,FrameSobel_statistic_Reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE3_reg, di_hmc_adjustable3_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE4_reg, di_hmc_adjustable4_reg.regValue);

			rtd_outl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, im_di_weave_window_control_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_START_reg, im_di_weave_window_1_start_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_END_reg, im_di_weave_window_1_end_reg.regValue);

			//#139
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_3_reg, curve_mapping_w1_3_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control


			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#151
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			rtd_outl(SCALEUP_DM_DIR_UZU_Conf_reg, dm_dir_uzu_conf_Reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);

			//#152
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);

			//#192
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_2_reg, curve_mapping_step2_reg.regValue);	//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);

		}
		break;
		case VIP_QUALITY_HDMI_576I:
		case VIP_QUALITY_YPbPr_576I:
		{
			//************** INI VALE START    ***************************************************

			//#1
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#2
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable = ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable =ori_gst_min_sad_compare_diable;

			//#7
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else		// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif

			//#12
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#23 #24

			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}
			init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;

			//#28
			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.regValue=ori_di_im_di_nintra_search_dir_limit.regValue;

			//#50
			decontour_de_contour_ctrl_reg.decont_snr_blend_mode=ORI_decontour_de_contour_ctrl_reg.decont_snr_blend_mode;

			//#63
			di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;

			//#75
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else		// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif

			//#107
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			smd_refinemv3_reg.smd_sfreq_diff_gain =4;
			smd_refinemv3_reg.smd_sfreq_diff_th =25;
			smd_refinemv3_reg.smd_sfreq_drop_th =80;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;
			smd_compensate_reg.smd_compensate_avg = ori_smd_compensate_reg.smd_compensate_avg;

			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xd2;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;

			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=gSmd_gain;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=gSmd_offset;
			//di_smd_dummy_reg.smd_partialweave =0;

			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			di_di_smd_slow_motion_handle1.smd_outofrange_content_new = ori_smd_outofrange_content_new;
			di_di_smd_slow_motion_handle2.gst_mv_limit = ori_gst_mv_limit;
			//di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;

			di_hmc_statistic1_reg.regValue = ORI_di_hmc_statistic1_reg.regValue;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;
			FrameSobel_statistic_Reg.regValue = ORI_FrameSobel_statistic_Reg.regValue;
			di_hmc_adjustable_reg.regValue = ORI_di_hmc_adjustable_reg.regValue;
			di_hmc_adjustable2_reg.regValue= ORI_di_hmc_adjustable2_reg.regValue;
			di_hmc_adjustable3_reg.regValue= ORI_di_hmc_adjustable3_reg.regValue;
			di_hmc_adjustable4_reg.regValue= ORI_di_hmc_adjustable4_reg.regValue;



			//#139
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_c_reg.ma_framesthc = ORI_di_ma_frame_motion_th_c_reg.ma_framesthc;
			di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			dch1_cp_ctrl_reg.sresultweight_adjust_shift = ori_sresultweight_adjust_shift;
			dch1_cp_ctrl_reg.vc_snr_lpf_sel = ori_vc_snr_lpf_sel;
			curve_mapping_w1_2_reg.curvemapping_w1_6 = ori_curve_mapping_w1_6;
			curve_mapping_w1_2_reg.curvemapping_w1_7 = ori_curve_mapping_w1_7;
			curve_mapping_w1_3_reg.curvemapping_w1_8 = ori_curve_mapping_w1_8;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;


			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#151
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb = ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;

			dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;
			di_im_di_nintra_control.nintra_intersection_check_en =ori_di_im_di_nintra_control.nintra_intersection_check_en;
			di_im_di_nintra_control.nintra_preline_dir_check2_en = ori_di_im_di_nintra_control.nintra_preline_dir_check2_en;

			//#152
			di_hmc_adjustable_reg.hmc_mv_refine_en =ORI_di_hmc_adjustable_reg.hmc_mv_refine_en;
			di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en = ORI_di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en;

			//#192
			dch1_cp_ctrl_reg.cp_sresultweight = ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_2=ori_curve_mapping_w1_2;
			curve_mapping_w1_1_reg.curvemapping_w1_3=ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4=ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5=ori_curve_mapping_w1_5;
			curve_mapping_step2_reg.curvemapping_step6=ori_curve_mapping_step6;
			curve_mapping_step3_reg.curvemapping_step7=ori_curve_mapping_step7;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[1] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;
			}
			else if(DynamicOptimizeSystem[2] ==1)
			{
				di_di_smd_slow_motion_handle1.gst_gst_static_disable = 1;
				di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable =1;
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 30;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=16;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=16;


			}
			else if(DynamicOptimizeSystem[7] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else		// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif
			}
			else if(DynamicOptimizeSystem[12] ==1)
			{
				//drvif_color_newrtnr_sad_th(1,&Motion_Th[0]);//for sad edge th setting
				//drvif_color_newrtnr_sad_th(0,&Motion_Th[0]);//for sad nonedge th setting
				drvif_color_rtnr_y_th_isr(_CHANNEL1,&Motion_Th[0]);

				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if((DynamicOptimizeSystem[23]==1)||(DynamicOptimizeSystem[24]==1))
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=0;

			}
			else if(DynamicOptimizeSystem[28] ==1)
			{
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 30;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=16;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=16;
			}
			else if(DynamicOptimizeSystem[63] ==1)
			{
				di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;
        			di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;

			}
			else if(DynamicOptimizeSystem[75] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else		// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif
			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=125;
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				smd_refinemv3_reg.smd_sfreq_diff_gain =0;
				smd_refinemv3_reg.smd_sfreq_diff_th =0;
				smd_refinemv3_reg.smd_sfreq_drop_th =0;
				smd_compensate_reg.smd_compensate_teeth_th =5;
				smd_compensate_reg.smd_compensate_avg = 152;

				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xff;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=2;
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;
				//di_smd_dummy_reg.smd_partialweave =3;

				di_hmc_adjustable_reg.hmc_mv_refine_mor_en = 1;
				di_hmc_adjustable_reg.hmc_mv_refine_y_th = 120;
				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 180;


				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 0;
				di_di_smd_slow_motion_handle1.smd_outofrange_content_new=0;
				di_di_smd_slow_motion_handle2.gst_mv_limit = 1;
				//di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;

				di_hmc_statistic1_reg.ma_hmc_lineratio = 24;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 18;

				FrameSobel_statistic_Reg.regValue = 0xc51f4200;
				di_hmc_adjustable_reg.regValue= 0x8FFD0004;
				di_hmc_adjustable2_reg.regValue= 0x0732c014; // special HMC setting for LG#75 and LG#107, jimmy 20151203
				di_hmc_adjustable3_reg.regValue= 0x6819141e;
				di_hmc_adjustable4_reg.regValue= 0x850a0c0c;

			}
			else if(DynamicOptimizeSystem[139] ==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 20;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 20;
				di_ma_frame_motion_th_c_reg.ma_framesthc = 20;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 20;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;

				dch1_cp_ctrl_reg.sresultweight_adjust_shift = 0;
				dch1_cp_ctrl_reg.vc_snr_lpf_sel = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_6 = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_7 = 0;
				curve_mapping_w1_3_reg.curvemapping_w1_8 = 7;
				curve_mapping_step3_reg.curvemapping_step8=42;

			}
			else if(DynamicOptimizeSystem[147])
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
			}
			else if(DynamicOptimizeSystem[151])
			{

				di_ma_frame_motion_th_a_reg.ma_framestha = 50;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framemthb = 50;

				dm_dir_uzu_conf_Reg.conf_lowbnd = 63;
				di_im_di_nintra_control.nintra_intersection_check_en =0;
				di_im_di_nintra_control.nintra_preline_dir_check2_en = 0;
			}
			else if(DynamicOptimizeSystem[152]) //don't need reset value
			{
				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass =1;
				di_im_di_hmc_pan_control_reg.pan_me_fw_control_motion_vector_det = 0;
				di_hmc_statistic1_reg.ma_hmc_lineratio =128;

				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio =12;

				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass =0;

				di_hmc_adjustable_reg.hmc_mv_refine_en =0;
				di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en = 0;


				// protect di 3Abit,reduce r/w time .
				di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
				di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
				di_control_reg.write_enable_1=1;
				//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
				rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_reg, di_im_di_hmc_pan_control_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);

				rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg,di_hmc_me_refine_ctrl2_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg,di_hmc_adjustable_reg.regValue);

			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_2=8;
				curve_mapping_w1_1_reg.curvemapping_w1_3=0;
				curve_mapping_w1_2_reg.curvemapping_w1_4=0;
				curve_mapping_w1_2_reg.curvemapping_w1_5=0;
				curve_mapping_step2_reg.curvemapping_step6=14;
				curve_mapping_step3_reg.curvemapping_step7=30;
				curve_mapping_step3_reg.curvemapping_step8=62;
			} else if (DynamicOptimizeSystem[50]) {
				decontour_de_contour_ctrl_reg.decont_snr_blend_mode = 0;
				IoReg_ClearBits(MPEGNR_ICH1_MPEGNR2_reg, MPEGNR_ICH1_MPEGNR2_cp_mpegenable_x_mask);
				IoReg_SetBits(MPEGNR_ICH1_MPEGNR_DB_CTRL_reg, MPEGNR_ICH1_MPEGNR_DB_CTRL_mpegnr_db_apply_mask); /* DB apply */
			}

			//#1

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			//#2
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg,di_di_smd_slow_motion_handle1.regValue);

			//#7
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#12
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);


			//#23 #24

			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);


			//#28
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);

			//#50
			rtd_outl(IPQ_DECONTOUR_De_Contour_CTRL_reg, decontour_de_contour_ctrl_reg.regValue);
			IoReg_SetBits(IPQ_DECONTOUR_De_Contour_db_reg_ctl_reg, IPQ_DECONTOUR_De_Contour_db_reg_ctl_db_apply_mask);

			//#63
			// protect di 3Abit,reduce r/w time .
			di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
			di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
			di_control_reg.write_enable_1=1;
			//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
			rtd_outl(DI_IM_DI_INTRA_TH_reg, intra_th_Reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);

			//#75
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#107

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_RefineMV3_reg, smd_refinemv3_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);
			//rtd_outl(DI_DI_SMD_dummy_reg, di_smd_dummy_reg.regValue);

			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle2_reg, di_di_smd_slow_motion_handle2.regValue);

			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
			rtd_outl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg,FrameSobel_statistic_Reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE3_reg, di_hmc_adjustable3_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE4_reg, di_hmc_adjustable4_reg.regValue);

			//#139
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_3_reg, curve_mapping_w1_3_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control

			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#151

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			rtd_outl(SCALEUP_DM_DIR_UZU_Conf_reg, dm_dir_uzu_conf_Reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);
			//#152
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);

			//#192
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_3_reg, curve_mapping_w1_3_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_2_reg, curve_mapping_step2_reg.regValue);	//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control

		}
		break;
		case VIP_QUALITY_HDMI_1080I:
		case VIP_QUALITY_YPbPr_1080I:
		{
			//************** INI VALE START    ***************************************************

			//#14
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;

			//#23,#24,#39
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;;

			//#107

			di_hmc_adjustable_reg.hmc_mv_refine_y_th = ORI_di_hmc_adjustable_reg.hmc_mv_refine_y_th;
			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = ORI_di_im_di_btr_control_reg.btr_blendtemporalrecoveryen;

			init_di_gst_ctrl_reg.regValue = ORI_init_di_gst_ctrl_reg.regValue;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=125;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = 50;
			di_smd_refinemv2_reg.regValue = ori_di_smd_refinemv2_reg.regValue;

			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=2;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}

			init_di_smd_additionalcoeff1_reg.smd_result_en = ori_smd_result_en;

			im_di_weave_window_control_reg.fixedwindow1 = ORI_im_di_weave_window_control_reg.fixedwindow1;
			im_di_weave_window_1_start_reg.xstart_25_13 =ORI_im_di_weave_window_1_start_reg.xstart_25_13;
			im_di_weave_window_1_start_reg.ystart_25_13=ORI_im_di_weave_window_1_start_reg.ystart_25_13;
			im_di_weave_window_1_end_reg.xend_25_13 = ORI_im_di_weave_window_1_end_reg.xend_25_13;
			im_di_weave_window_1_end_reg.yend_25_13 =ORI_im_di_weave_window_1_end_reg.yend_25_13;

			im_di_weave_window_control_reg.fixedwindow1 = 0;
			im_di_weave_window_1_start_reg.xstart_25_13 =0;
			im_di_weave_window_1_start_reg.ystart_25_13=0;
			im_di_weave_window_1_end_reg.xend_25_13 = 0;
			im_di_weave_window_1_end_reg.yend_25_13 =0;

			di_ma_frame_motion_th_a_reg.regValue = ORI_di_ma_frame_motion_th_a_reg.regValue;
			di_ma_frame_motion_th_b_reg.regValue = ORI_di_ma_frame_motion_th_b_reg.regValue;
			di_ma_frame_motion_th_c_reg.regValue = ORI_di_ma_frame_motion_th_c_reg.regValue;


			//#176

			im_di_film_sawtooth_filmframe_th_reg.regValue =ORI_im_di_film_sawtooth_filmframe_th_reg.regValue;
			film_static_sum_th_reg.regValue= ORI_film_static_sum_th_reg.regValue;
			film_motion_sum_th_reg.regValue= ORI_film_motion_sum_th_reg.regValue;



			//#178

			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th=gSmd_weak_move;
			di_di_smd_resurrect_ctrl.smd_mv_not_gmv_resurrect_en=ori_di_di_smd_resurrect_ctrl.smd_mv_not_gmv_resurrect_en;
			di_di_smd_resurrect_ctrl.smd_resurrect_noacc_en=ori_di_di_smd_resurrect_ctrl.smd_resurrect_noacc_en;
			//di_di_smd_sampling_gmvc.smd_close2gmv_fw_en=ori_smd_close2gmv_fw_en;
			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}
			init_di_smd_additionalcoeff1_reg.smd_result_en = ori_smd_result_en;


			//#182

			//#187
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha =ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;

			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb= ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;

			//#197
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;

			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;

			//#198

			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;

			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;

			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=ori_di_im_di_nintra_search_dir_limit.nintra_hdiff_th1;
			di_im_di_nintra_control.regValue=ori_di_im_di_nintra_control.regValue;

			//#Spears & Munsil ADVANCED VUDEO - EVALUATION - Chroma Zone Plate
			color_temp_ctrl_reg.regValue = ORI_color_temp_ctrl_reg.regValue;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[14]==1)
			{
				di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:1;
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 200;
			}
			else if(DynamicOptimizeSystem[23]==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha =0x02;
				di_smd_control_candiate_reg.smd_en=0;

			}
			else if(DynamicOptimizeSystem[24]==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha =0x02;
				di_smd_control_candiate_reg.smd_en=0;


			}
			else if(DynamicOptimizeSystem[39]==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha =0x02;
				di_smd_control_candiate_reg.smd_en=0;


			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				init_di_gst_ctrl_reg.gst_fmv2weave_p =15;
				init_di_gst_ctrl_reg.gst_fmv2weave_n =15;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=40;
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 120;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=7;
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;

				di_smd_refinemv2_reg.smd_mvs_hchanged_en =1;
				di_smd_refinemv2_reg.smd_mvs_vchanged_en =1;

				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;
				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=1)
				{
					di_double_buff_apply =1;
				}

				init_di_smd_additionalcoeff1_reg.smd_result_en =1;

				di_hmc_adjustable_reg.hmc_mv_refine_y_th = 150;
				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 150;
				di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = 0;
				di_hmc_statistic1_reg.ma_hmc_lineratio =di_hmc_statistic1_reg.ma_hmc_lineratio+12;
				if(di_hmc_statistic1_reg.ma_hmc_lineratio>12)
					di_hmc_statistic1_reg.ma_hmc_lineratio=12;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);

			 //weave window --> fix intra on LG logo!
				if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION)<=3)
				{
					im_di_weave_window_control_reg.fixedwindow1 = 0;
					im_di_weave_window_control_reg.fixedwindowmode = 0;
				}
				else
				{
				im_di_weave_window_control_reg.fixedwindow1 = 1;
					im_di_weave_window_control_reg.fixedwindowmode = 3;
				}
				im_di_weave_window_1_start_reg.xstart_25_13 =140 ;
				im_di_weave_window_1_start_reg.ystart_25_13=431 ;
				im_di_weave_window_1_end_reg.xend_25_13 = 250;
				im_di_weave_window_1_end_reg.yend_25_13 =493 ;

			}
			else if(DynamicOptimizeSystem[176] ==1) // hqv flower 22 film
			{
				im_di_film_sawtooth_filmframe_th_reg.film22_sawtooththl=10;
				im_di_film_sawtooth_filmframe_th_reg.film_sawtooththl =10;
				im_di_film_sawtooth_filmframe_th_reg.film_frmotionthl =10;
				film_static_sum_th_reg.film22_fistaticsthl =10;
				film_motion_sum_th_reg.film22_fieldmotionsumthl =10;
				film_motion_sum_th_reg.film22_debounce_fieldnum =1;

			}
			else if( (DynamicOptimizeSystem[182]==1) || (DynamicOptimizeSystem[183]==1) || (DynamicOptimizeSystem[184]==1) || (DynamicOptimizeSystem[185]==1) || (DynamicOptimizeSystem[186]==1) )
			{
	 			ich1_MPEGNR2_reg.regValue = rtd_inl(MPEGNR_ICH1_MPEGNR2_reg);
				ich1_MPEGNR2_reg.cp_mpegenable_x=0;
				scaler_rtd_outl(MPEGNR_ICH1_MPEGNR2_reg, ich1_MPEGNR2_reg.regValue);
 			}
			else if(DynamicOptimizeSystem[187] ==1) // qtec Makilo file #59
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 30;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 30;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha =30;
				di_ma_frame_motion_th_a_reg.ma_framemtha=30;

				di_ma_frame_motion_th_b_reg.ma_framesthb = 30;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 30;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb =30;
				di_ma_frame_motion_th_b_reg.ma_framemthb=30;

 			}
#if 0		// Qtec build vertical line dot noise issue. (pattern in/out dot noise)
			else if(DynamicOptimizeSystem[197] ==1) //qtec build (streets)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 20;

				di_ma_frame_motion_th_a_reg.ma_framehtha = 30;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 30;
 			}
#endif
			else if(DynamicOptimizeSystem[198] ==1) //qtec building
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 1;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha =1;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 1;

				di_ma_frame_motion_th_b_reg.ma_framesthb = 1;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 1;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb =1;

				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 0;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=3;
				di_im_di_nintra_control.nintra_min_second_dir_check2_en=0;
				di_im_di_nintra_control.nintra_min_second_dir_check_en =0;

 			}
			else if(SandM_Chroma_Zone_Plate == 1)
			{
				color_temp_ctrl_reg.temporal_enable = 0;
			}


			di_im_new_mcnr_pan_condition.regValue = rtd_inl(DI_IM_NEW_MCNR_PAN_CONDITION_reg);
			di_im_new_mcnr_control4.regValue = rtd_inl(DI_IM_NEW_MCNR_CONTROL4_reg);

			/* smd parameter should be refine */
			/*if(scalerVIP_DI_MiddleWare_MCNR_Get_V_Pan_Flag()==1&&sat_ratio_mean_value<50) //tokoy night street
			{
				printk("[rock]	%d,	%d\n",scalerVIP_DI_MiddleWare_MCNR_Get_V_Pan_Flag(),sat_ratio_mean_value);
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=170;
				smd_choosecandidate_reg.smd_reliablerange_sad_th=0;
				di_di_smd_resurrect_ctrl.smd_mv_not_gmv_resurrect_en=1;
				di_di_smd_resurrect_ctrl.smd_resurrect_noacc_en=1;
				//di_di_smd_sampling_gmvc.smd_close2gmv_fw_en=1;
				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=1)
				{
					di_double_buff_apply =1;
				}

				init_di_smd_additionalcoeff1_reg.smd_result_en=1;
				di_di_smd_waterflag_ctr3.smd_fw_gmvy= 5;//-(di_im_new_mcnr_control4.n_mcnr_v_pan_mv-6)+3;
				di_di_smd_hardwarepan_modify1.smd_fw_gmvx=-(di_im_new_mcnr_pan_condition.h_pan_mv_value-15)+3;
			}
			else
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;
			}*/
			//ROSPrintf("\n sssss %d \n ",scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE));
			//#14
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);

			//#23
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);


			//#24
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);

			//ROSPrintf("\n ddd %d \n",im_di_weave_window_control_reg.regValue);
			//#107
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, im_di_weave_window_control_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_START_reg, im_di_weave_window_1_start_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_END_reg, im_di_weave_window_1_end_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);

			rtd_outl(DI_DI_GST_Ctrl_reg,init_di_gst_ctrl_reg.regValue);
			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);

			rtd_outl(MEMC_MUX_MEMC_MUX_DI_CTRL_reg, color_temp_ctrl_reg.regValue);

			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);

			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);
			//rtd_outl(DI_DI_SMD_SLOW_MOTION_HANDLE2_reg, di_di_smd_slow_motion_handle2.regValue);

			rtd_outl(DI_DI_SMD_RefineMV2_reg, di_smd_refinemv2_reg.regValue);




			rtd_outl(DI_IM_DI_BTR_CONTROL_reg, di_im_di_btr_control_reg.regValue);

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);


			//#173
			film_mask_detection_reg.regValue = rtd_inl(DI_IM_DI_FILM_MASK_DETECTION_reg);

			if(DynamicOptimizeSystem[173]==1)
			{
				film_mask_detection_reg.film_mask_en = 0;
			}
			else
			{
				film_mask_detection_reg.film_mask_en = 1;
			}

			rtd_outl(DI_IM_DI_FILM_MASK_DETECTION_reg, film_mask_detection_reg.regValue);





			//#176


			rtd_outl(DI_IM_DI_FILM_SAWTOOTH_FILMFRAME_TH_reg, im_di_film_sawtooth_filmframe_th_reg.regValue);
			rtd_outl(DI_IM_DI_FILM_STATIC_SUM_TH_reg, film_static_sum_th_reg.regValue);
			rtd_outl(DI_IM_DI_FILM_MOTION_SUM_TH_reg, film_motion_sum_th_reg.regValue);

			//#178





			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Resurrect_Ctrl_reg, di_di_smd_resurrect_ctrl.regValue);
			//rtd_outl(DI_DI_SMD_Sampling_GMVc_reg, di_di_smd_sampling_gmvc.regValue);

			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

			rtd_outl(DI_DI_SMD_WaterFlag_Ctr3_reg, di_di_smd_waterflag_ctr3.regValue);

			rtd_outl(DI_DI_SMD_HardwarePan_Modify1_reg, di_di_smd_hardwarepan_modify1.regValue);


			//#187
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			//#197
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			//#198
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);

			di_im_new_mcnr_pan_condition.regValue = rtd_inl(DI_IM_NEW_MCNR_PAN_CONDITION_reg);

			//Pan Case
			if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE)< 15)
			{
				if(DynamicOptimizeSystem[107]==1)
				{
					di_ma_frame_motion_th_a_reg.regValue = 0x12270033;//0x2c272e3a;
					di_ma_frame_motion_th_b_reg.regValue = 0x60560a4b;//0x54565060;
					di_ma_frame_motion_th_c_reg.regValue = 0x76781462;//0x7678787d;

				}
				else if(DI_Video_Broken==1)
				{
					di_ma_frame_motion_th_a_reg.regValue = 0x05040a05;//0x2c272e3a;
					di_ma_frame_motion_th_b_reg.regValue = 0x180a0c14;//0x54565060;
					di_ma_frame_motion_th_c_reg.regValue = 0x32141018;//0x7678787d;
				}
				else if(DI_Res_Pat_pan_65ppf == 1)
				{
					di_ma_frame_motion_th_a_reg.ma_framerlvtha =0x0;
				}
                                else if(DynamicOptimizeSystem[226]==1)
                                {
					di_ma_frame_motion_th_a_reg.regValue = 0x050a010a;//0x2c272e3a;
					di_ma_frame_motion_th_b_reg.regValue = 0x140a0614;//0x54565060;
					di_ma_frame_motion_th_c_reg.regValue = 0x32141018;//0x7678787d;

				}
				else
				{
					/*rock_rau 20150922 Q-tek monoscope pan flicker issue(original setting)*/
					di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
					di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
					di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;

				}
			}
			else if((scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE) < 30)&&
				(di_im_new_mcnr_pan_condition.h_pan_mv_value==0))
			{
				di_ma_frame_motion_th_a_reg.ma_framehtha = 0x0a;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 0x12;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 0x16;
			}
			else if ((scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE) > 30)&&
				(di_im_new_mcnr_pan_condition.h_pan_mv_value==0))
			{
				di_ma_frame_motion_th_a_reg.ma_framehtha = 0x14;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 0x16;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 0x18;
			}

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);

		}
		break;
		case VIP_QUALITY_HDMI_1080P:
		case VIP_QUALITY_YPbPr_1080P:
		{
			//#Spears & Munsil ADVANCED VUDEO - EVALUATION - Chroma Zone Plate
			color_temp_ctrl_reg.regValue = ORI_color_temp_ctrl_reg.regValue;


			if(SandM_Chroma_Zone_Plate == 1)
			{
				color_temp_ctrl_reg.temporal_enable = 0;
			}

			rtd_outl(MEMC_MUX_MEMC_MUX_DI_CTRL_reg, color_temp_ctrl_reg.regValue);
		}
		break;

                case VIP_QUALITY_HDMI_4k2kI_30:
                case VIP_QUALITY_HDMI_4k2kP_30:
                case VIP_QUALITY_HDMI_4k2kP_60:
                {
                       /* UINT8 ori_table=0;
                        static UINT8 g_writed=0;
                        SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
                        if((DynamicOptimizeSystem[224]==1)&&(scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1))
                        {

                                if(g_writed==0)
                                {
                                        fwif_color_set_iESM(0,9);
                                        di_rtnr_ma_snr_strength_control.regValue= rtd_inl(DI_RTNR_MA_SNR_STRENGTH_CONTROL_reg);
                                        g_writed=1;
                                }
                                //di_rtnr_ma_snr_strength_control.rtnr_ma_snr_output_clamp=70;
                                //rtd_outl(DI_RTNR_MA_SNR_STRENGTH_CONTROL_reg,di_rtnr_ma_snr_strength_control.regValue );

                        }
                        else
                        {
                                g_writed=0;
                                ori_table= gVip_Table->VIP_QUALITY_Extend2_Coef[cur_source][VIP_QUALITY_FUNCTION_iESM_table];
                                fwif_color_set_iESM(0,ori_table);


                        }
                        */

                }

                break;




		case VIP_QUALITY_TV_SECAN:
		{

			if(LGPTFatoryMultiC34 == 1)
			{
				postp_secam_fix_ctrl_reg.regValue = 0x4000ff0c;
				postp_secam_fix_y_detect0_reg.regValue = 0xbf01a4a4;
				postp_secam_fix_y_detect1_reg.regValue = 0x3f3f0800;

				/*For color bar H-line flick*/
				tnrxc_mkii_ctrl_reg.regValue = 0x14b40401;
			}
			else
			{
				postp_secam_fix_ctrl_reg.regValue = ORI_postp_secam_fix_ctrl_reg.regValue;
				postp_secam_fix_y_detect0_reg.regValue = ORI_postp_secam_fix_y_detect0_reg.regValue;
				postp_secam_fix_y_detect1_reg.regValue = ORI_postp_secam_fix_y_detect1_reg.regValue;

				/*For color bar H-line flick*/
				tnrxc_mkii_ctrl_reg.regValue = ORI_tnrxc_mkii_ctrl_reg.regValue;
			}
			rtd_outl(DI_TNRXC_MkII_CTRL_reg, tnrxc_mkii_ctrl_reg.regValue);
#if 0
			VDPQ_rtd_outl(VDPQ_POSTP_SECAM_FIX_CTRL_reg, postp_secam_fix_ctrl_reg.regValue);
			VDPQ_rtd_outl(VDPQ_POSTP_SECAM_FIX_Y_DETECT0_reg, postp_secam_fix_y_detect0_reg.regValue);
			VDPQ_rtd_outl(VDPQ_POSTP_SECAM_FIX_Y_DETECT1_reg, postp_secam_fix_y_detect1_reg.regValue);
#endif
		}
		break;
		case VIP_QUALITY_TV_PAL:
		{
			LGTVPALBGE52 = 1;//[KTASKWBS-3528] fix LGE channel E-52 Shake issue.
			// fix enable tnr XC (original only LGTVPALBGE52 pattern enable)

			if( LGTVPALBGE52 == 1 )
			{
				tnrxc_mkii_ctrl_reg.regValue = 0x14b40401;
			}
			else
			{
				tnrxc_mkii_ctrl_reg.regValue = ORI_tnrxc_mkii_ctrl_reg.regValue;
			}
			rtd_outl(DI_TNRXC_MkII_CTRL_reg, tnrxc_mkii_ctrl_reg.regValue);
		}
		break;
		case VIP_QUALITY_HDMI_480P:
		case VIP_QUALITY_HDMI_576P:
		{

			//************** INI VALE START    ***************************************************

			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#192
			dch1_cp_ctrl_reg.cp_sresultweight = ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_2=ori_curve_mapping_w1_2;
			curve_mapping_w1_1_reg.curvemapping_w1_3=ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4=ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5=ori_curve_mapping_w1_5;
			curve_mapping_step2_reg.curvemapping_step6=ori_curve_mapping_step6;
			curve_mapping_step3_reg.curvemapping_step7=ori_curve_mapping_step7;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[147] ==1)
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
 			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_2=8;
				curve_mapping_w1_1_reg.curvemapping_w1_3=0;
				curve_mapping_w1_2_reg.curvemapping_w1_4=0;
				curve_mapping_w1_2_reg.curvemapping_w1_5=0;
				curve_mapping_step2_reg.curvemapping_step6=14;
				curve_mapping_step3_reg.curvemapping_step7=30;
				curve_mapping_step3_reg.curvemapping_step8=62;
			}

			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#192
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_2_reg, curve_mapping_step2_reg.regValue);	//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control

		}
		break;
		case VIP_QUALITY_DTV_480I:
		case VIP_QUALITY_DTV_576I:
		case VIP_QUALITY_DTV_480P:
		case VIP_QUALITY_DTV_576P:
		case VIP_QUALITY_DTV_720P:
		{
			di_smd_control_candiate_reg.regValue = rtd_inl(DI_DI_SMD_Control_CandidateList_reg);
			if(CITestPatch[0] == 1)
			{
				di_ma_frame_motion_th_a_reg.regValue = 0;
				di_ma_frame_motion_th_b_reg.regValue = 0;
				di_ma_frame_motion_th_c_reg.regValue = 0;
				di_smd_control_candiate_reg.smd_en=0;
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
				rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

			}
			else
			{
				di_ma_frame_motion_th_a_reg.regValue = ORI_di_ma_frame_motion_th_a_reg.regValue;
				di_ma_frame_motion_th_b_reg.regValue = ORI_di_ma_frame_motion_th_b_reg.regValue;
				di_ma_frame_motion_th_c_reg.regValue = ORI_di_ma_frame_motion_th_c_reg.regValue;
				di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
				rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

			}

                       // if((cur_source == VIP_QUALITY_DTV_480I)||(cur_source == VIP_QUALITY_DTV_576I)) //for AVS+
                        if((cur_source == VIP_QUALITY_DTV_576I))
                        {
                                smd_choosecandidate_reg.regValue = rtd_inl(DI_DI_SMD_ChooseCandidate_reg);

                                if((scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio()>=93)&&
                                        (scalerVIP_DI_MiddleWare_MCNR_Get_GMV_x()<=5)&&
                                        (scalerVIP_DI_MiddleWare_MCNR_Get_GMV_y()<=5)&&sat_ratio_mean_value<45)
                                {
                                        smd_choosecandidate_reg.smd_reliablerange_sad_th =0;
                                }
                                else
                                {
                                        smd_choosecandidate_reg.smd_reliablerange_sad_th =ori_smd_rang_sad;
                                }

                                //printk("rord gmv ratio =%d  gmv_x=%d , gmv_y=%d \n",scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),scalerVIP_DI_MiddleWare_MCNR_Get_GMV_x(),
                                //        scalerVIP_DI_MiddleWare_MCNR_Get_GMV_y());

                                rtd_outl(DI_DI_SMD_ChooseCandidate_reg,smd_choosecandidate_reg.regValue);

                        }

			//static unsigned char ori_film_status = 0;
			//static unsigned char ori_film_sawtooth_choose = 0;
			//ROSPrintf("\n DTV_SD_p2i =%d \n ",DTV_SD_p2i);
			#if 0 //fixed me

				unsigned char DTV_SD_p2i = RPC_SmartPic_clue->VCPU_setting_info.VCPU_DTV_SD_p2i;

			di_im_di_film_sawtooth_filmframe_th_RBUS film_sawtooth_filmframe_th_reg;
			if(((rtd_inl(0xb809d620)>>13)&0x7f)!=0) //this is for dtv patch
			{
				di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
				film_sawtooth_filmframe_th_reg.regValue = rtd_inl(DI_IM_DI_FILM_SAWTOOTH_FILMFRAME_TH_reg);

				if((DTV_SD_p2i ==1)&&((set_p2i_value==0)||di_control_reg.film_enable!=28))
				{
					//ROSPrintf("\n DTV_SD_p2i 1 =%d \n ",DTV_SD_p2i);


					set_p2i_value =1;
					//ori_film_status = di_control_reg.film_enable;
					//ori_film_sawtooth_choose = di_control_reg.film_sawtooth_choose;

					di_control_reg.film_enable = 28;
					di_control_reg.film_sawtooth_choose = 3;
					film_sawtooth_filmframe_th_reg.film_frmotionthl = 2;
					di_control_reg.write_enable_5=1;

					rtd_outl(DI_IM_DI_CONTROL_reg,di_control_reg.regValue);
					rtd_outl(DI_IM_DI_FILM_SAWTOOTH_FILMFRAME_TH_reg,film_sawtooth_filmframe_th_reg.regValue);
				}
				else if ((DTV_SD_p2i ==0)&&(set_p2i_value==1))
				{

					//ROSPrintf("\n DTV_SD_p2i 2 =%d \n ",DTV_SD_p2i);
					//set_value =0;

					//di_control_reg.film_enable = ori_film_status ;
					//di_control_reg.film_sawtooth_choose= ori_film_sawtooth_choose;

					//rtd_outl(DI_IM_DI_CONTROL_reg,di_control_reg.regValue);

				}


				/*else if ((DTV_SD_p2i ==0)&&(set_value==1))
				{
					set_value =0;
					di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
					di_control_reg.film_enable = ori_film_status ;
					di_control_reg.film_sawtooth_choose= ori_film_sawtooth_choose;
					rtd_outl(DI_IM_DI_CONTROL_reg,di_control_reg.regValue);

				}*/

			}
			#endif



		}
		break;
		case VIP_QUALITY_DTV_1080I:
		{
                        color_sharp_dm_segpk_vpk4_RBUS color_sharp_dm_segpk_vpk4;
                        color_sharp_dm_segpk_vpk4.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_VPK4_reg);

			if(DI_Video_Broken==1)
			{
				di_ma_frame_motion_th_a_reg.regValue = 0x05040a05;//0x2c272e3a;
				di_ma_frame_motion_th_b_reg.regValue = 0x180a0c14;//0x54565060;
				di_ma_frame_motion_th_c_reg.regValue = 0x32141018;//0x7678787d;

			}
			else
			{

				//di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
				//di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
				//di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
				di_ma_frame_motion_th_a_reg.regValue = ORI_di_ma_frame_motion_th_a_reg.regValue;
				di_ma_frame_motion_th_b_reg.regValue = ORI_di_ma_frame_motion_th_b_reg.regValue;
				di_ma_frame_motion_th_c_reg.regValue = ORI_di_ma_frame_motion_th_c_reg.regValue;


			}


                        //printk("Gmv =%d ,201 =%d \n",scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),DynamicOptimizeSystem[201]);


                        if((scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio()>=90)&&(DynamicOptimizeSystem[201]==1))
                                //for DTMB AVS+
                        {

                                di_ma_frame_motion_th_a_reg.regValue = 0x0a0a0a0a;//0x2c272e3a;
                                di_ma_frame_motion_th_b_reg.regValue = 0x140a100c;//0x54565060;
                                di_ma_frame_motion_th_c_reg.regValue = 0x3c141418;//0x7678787d;

                        }

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);



                        if(DynamicOptimizeSystem[202]==1)
                        {
                                color_sharp_dm_segpk_vpk4.vemf_en=1;
                                scalerVIP_color_DRV_SNR_Veritcal_NR(&vlpf_table[4]); //for hmc teeth.

                        }
                        else
                        {
                                color_sharp_dm_segpk_vpk4.vemf_en=0;

                        }

                        rtd_outl(COLOR_SHARP_DM_SEGPK_VPK4_reg, color_sharp_dm_segpk_vpk4.regValue);












		}


		break;
		case VIP_QUALITY_DTV_1080P:
		{
			di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue = rtd_inl(DI_IM_DI_RTNR_C_TH0_TH3_reg);

			di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue = rtd_inl(DI_IM_DI_RTNR_C_TH4_TH6_reg);

			if (LGBirdCRTNRPatchTrigger) {
				if (LGBirdCRTNRPatch) {
					di_im_di_rtnr_c_th0_th3_RBUS_reg_save.regValue = di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue;
					di_im_di_rtnr_c_th4_th6_RBUS_reg_save.regValue = di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue;
					di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue = 0;
					di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue = 0;
				} else {
					di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue = di_im_di_rtnr_c_th0_th3_RBUS_reg_save.regValue;
					di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue = di_im_di_rtnr_c_th4_th6_RBUS_reg_save.regValue;
				}
				rtd_outl(DI_IM_DI_RTNR_C_TH0_TH3_reg, di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue);
				rtd_outl(DI_IM_DI_RTNR_C_TH4_TH6_reg, di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue);
			} else if (!LGBirdCRTNRPatch) {
				di_im_di_rtnr_c_th0_th3_RBUS_reg_save.regValue = di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue;
				di_im_di_rtnr_c_th4_th6_RBUS_reg_save.regValue = di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue;
			}

		}
		break;


	}

	switch(RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_info_reverse_2)
	{

		case 103://_MODE_1080I25:
		{
			if(DynamicOptimizeSystem[205] ==1)
			{
                                di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
                                di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
                                di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
                                di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 20;
                                rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			}
			break;
		}
		default:
			break;

	}



	if(di_double_buff_apply ==1)
	{
		di_db_reg_ctl_RBUS  db_reg_ctl_reg;

		db_reg_ctl_reg.regValue = IoReg_Read32(DI_db_reg_ctl_reg);
		db_reg_ctl_reg.db_apply=1;
		rtd_outl(DI_db_reg_ctl_reg,db_reg_ctl_reg.regValue);
		di_double_buff_apply =0;
	}
// new structure end
}
void scalerVIP_Set_Parameter_forSKY(unsigned char apply)
{
	// merlin4 henry 180326
	extern unsigned char g_panConti_str;
	extern unsigned char g_panDeb_str;
	// end merlin4

	di_di_smd_waterflag_ctr3_RBUS di_di_smd_waterflag_ctr3;
	di_di_smd_resurrect_ctrl_RBUS di_di_smd_resurrect_ctrl;

	static di_di_smd_waterflag_ctr3_RBUS ori_di_di_smd_waterflag_ctr3;
	static di_di_smd_resurrect_ctrl_RBUS ori_di_di_smd_resurrect_ctrl;
	di_di_smd_choosecandidate_RBUS 	smd_choosecandidate_reg;
	di_di_smd_refinemv3_RBUS smd_refinemv3_reg;
	di_di_smd_compensate_RBUS smd_compensate_reg;
	di_di_smd_candidatelimitsad_RBUS init_di_smd_candidatelimitsad_reg;
	di_di_smd_additionalcoeff2_RBUS init_di_smd_additionalcoeff2_reg;
	//di_di_smd_dummy_RBUS di_smd_dummy_reg;
	di_di_smd_refinemv2_RBUS di_smd_refinemv2_reg;

	di_di_smd_pan1_RBUS init_di_smd_pan1_reg;
	di_di_smd_hardwarepan_modify1_RBUS di_di_smd_hardwarepan_modify1;
	//di_di_smd_sampling_gmvc_RBUS di_di_smd_sampling_gmvc;
	di_di_gst_compensate_RBUS di_di_gst_compensate;

	di_di_smd_additionalcoeff1_RBUS init_di_smd_additionalcoeff1_reg;
	di_di_smd_slow_motion_handle1_RBUS di_di_smd_slow_motion_handle1;
	di_di_smd_slow_motion_handle2_RBUS di_di_smd_slow_motion_handle2;

	di_im_di_weave_window_control_RBUS im_di_weave_window_control_reg;
	di_im_di_weave_window_1_start_RBUS im_di_weave_window_1_start_reg;
	di_im_di_weave_window_1_end_RBUS im_di_weave_window_1_end_reg;

	static 	di_im_di_weave_window_control_RBUS ORI_im_di_weave_window_control_reg;
	static	di_im_di_weave_window_1_start_RBUS ORI_im_di_weave_window_1_start_reg;
	static	di_im_di_weave_window_1_end_RBUS ORI_im_di_weave_window_1_end_reg;

	di_im_di_nintra_lowpass_source_RBUS di_im_di_nintra_lowpass_source;
	di_im_di_nintra_search_dir_limit_RBUS di_im_di_nintra_search_dir_limit;
	di_di_gst_ctrl_RBUS init_di_gst_ctrl_reg;

	memc_mux_memc_mux_di_ctrl_RBUS color_temp_ctrl_reg;

	nr_dch1_cp_ctrl_RBUS dch1_cp_ctrl_reg;
	nr_mosquito_ctrl_RBUS nr_mosquito_ctrl_RBUS_reg;
	nr_curve_mapping_w1_1_RBUS curve_mapping_w1_1_reg;
	nr_curve_mapping_w1_2_RBUS curve_mapping_w1_2_reg;
	nr_curve_mapping_w1_3_RBUS curve_mapping_w1_3_reg;


	nr_curve_mapping_w2_1_RBUS curve_mapping_w2_1_reg;
	nr_curve_mapping_step_2_RBUS curve_mapping_step2_reg;
	nr_curve_mapping_step_3_RBUS curve_mapping_step3_reg;
	nr_mosquito_nr_level_ctrl_RBUS nr_mosquito_nr_level_ctrl_RBUS_reg;
	nr_mosquito_nr_level_ctrl_1_RBUS nr_mosquito_nr_level_ctrl_1_RBUS_reg;
	scaleup_dm_uzu_ctrl_RBUS dm_uzu_Ctrl_reg;
	di_im_di_control_RBUS di_control_reg;
	di_im_di_control_RBUS di_control_reg_Prtoect_3AEnable;


	color_sharp_dm_segpk_edgpk3_RBUS color_sharp_dm_segpk_edgpk3;
	color_sharp_dm_peaking_bound_1_RBUS color_sharp_dm_peaking_bound_1_reg;
//	color_sharp_dm_peaking_bound_0_RBUS color_sharp_dm_peaking_bound_0;
//	color_sharp_dm_segpk_edgpk2_RBUS color_sharp_dm_segpk_edgpk2;

	color_sharp_dm_cds_cm0_u_bound_0_RBUS color_sharp_dm_cds_cm0_u_bound_0_reg;
	nr_dch1_spatial_weight_RBUS dch1_Spatial_Weight_Reg;
	//vdpq_yc_sep_control_RBUS YC_SEP_CONTROL_reg;
 	//vdpq_yc_bw_ctrl_RBUS YC_BW_CTRL_reg;
	di_rtnr_ma_snr_strength_control_RBUS	di_rtnr_ma_snr_strength_control;
	color_sharp_dm_peaking_gain_RBUS color_sharp_dm_peaking_gain_reg;

	di_im_di_hmc_adjustable_RBUS di_hmc_adjustable_reg;
	static di_im_di_hmc_adjustable_RBUS ORI_di_hmc_adjustable_reg;

	di_im_di_hmc_adjustable2_RBUS di_hmc_adjustable2_reg;
	static di_im_di_hmc_adjustable2_RBUS ORI_di_hmc_adjustable2_reg;

	di_im_di_hmc_adjustable3_RBUS di_hmc_adjustable3_reg;
	static di_im_di_hmc_adjustable3_RBUS ORI_di_hmc_adjustable3_reg;

	di_im_di_hmc_adjustable4_RBUS di_hmc_adjustable4_reg;
	static di_im_di_hmc_adjustable4_RBUS ORI_di_hmc_adjustable4_reg;

	di_im_di_hmc_pan_control_par_2_RBUS di_hmc_pan_control_par_2_reg;
	di_im_di_hmc_pan_control_par_1_RBUS di_hmc_pan_control_par_1_reg;
	di_im_di_hmc_statistic1_RBUS di_hmc_statistic1_reg;

	di_im_di_framesobel_statistic_RBUS FrameSobel_statistic_Reg;
	static di_im_di_framesobel_statistic_RBUS ORI_FrameSobel_statistic_Reg;


	nr_curve_mapping_w2_2_RBUS curve_mapping_w2_2_reg;

	di_im_di_intra_th_RBUS intra_th_Reg;

	scaleup_dm_mem_crc_ctrl_RBUS dm_mem_crc_ctrl_RBUS_reg;
	//di_im_di_ma_frame_motion_th_a_RBUS frame_motion_a_reg;// frame motion a
	color_sharp_dm_segpk_vpk2_RBUS dm_segpk_vpk2;

	di_im_di_rtnr_new_control_RBUS rtnr_new_Ctrl;

	idcti_i_dcti_ctrl_2_RBUS ich1_newdcti_reg_2;
	idcti_i_dcti_ctrl_1_RBUS ich1_newdcti_reg_1;
	color_sharp_shp_dcti_ctrl_1_RBUS dm_dcti_REG_1;
	color_sharp_shp_dcti_ctrl_2_RBUS dm_dcti_REG_2;

	//vdpq_adap_bpf_y_th3_RBUS vdpq_adap_bpf_y_th3_reg;

	scaleup_dm_uzu_ctrl_RBUS dm_uzu_Ctrl;

	scaleup_dm_uzumain_v_partial_drop_RBUS dm_uzu_main_v_partial_drop_RBUS_reg;
	di_im_new_mcnr_control_RBUS di_im_new_mcnr_control;

	mpegnr_ich1_mpegnr2_RBUS ich1_MPEGNR2_reg;
	di_im_new_mcnr_control4_RBUS di_im_new_mcnr_control4;
	di_im_new_mcnr_pan_condition_RBUS di_im_new_mcnr_pan_condition;

	di_im_di_ma_frame_motion_th_a_RBUS di_ma_frame_motion_th_a_reg;
	di_im_di_ma_frame_motion_th_b_RBUS di_ma_frame_motion_th_b_reg;
	di_im_di_ma_frame_motion_th_c_RBUS di_ma_frame_motion_th_c_reg;
	di_im_di_nintra_control_RBUS di_im_di_nintra_control;
	di_di_smd_control_candidatelist_RBUS di_smd_control_candiate_reg;
    di_im_new_mcnr_clamping_value_RBUS di_im_new_mcnr_clamping_value;
	di_im_di_film_mask_detection_RBUS film_mask_detection_reg;
#if 0
	di_im_di_hmc_pan_dummy_2_RBUS di_pan_dummy2_reg;
	di_im_di_hmc_pan_dummy_3_RBUS di_pan_dummy3_reg;
//#else // henry Merlin3 temp
	di_im_di_rtnr_refined_ctrl2_RBUS di_im_di_rtnr_refined_ctrl2_reg;
	di_di_smd_dummy_RBUS di_di_smd_dummy_reg;
#endif

	di_im_di_btr_control_RBUS di_im_di_btr_control_reg;
	static di_im_di_rtnr_c_th0_th3_RBUS di_im_di_rtnr_c_th0_th3_RBUS_reg_save;
	di_im_di_rtnr_c_th0_th3_RBUS di_im_di_rtnr_c_th0_th3_RBUS_reg;
	static di_im_di_rtnr_c_th4_th6_RBUS di_im_di_rtnr_c_th4_th6_RBUS_reg_save;
	di_im_di_rtnr_c_th4_th6_RBUS di_im_di_rtnr_c_th4_th6_RBUS_reg;


  	vdpq_postp_secam_fix_ctrl_RBUS postp_secam_fix_ctrl_reg;
	vdpq_postp_secam_fix_y_detect0_RBUS postp_secam_fix_y_detect0_reg;
	vdpq_postp_secam_fix_y_detect1_RBUS postp_secam_fix_y_detect1_reg;

	scaleup_dm_dir_uzu_conf_RBUS dm_dir_uzu_conf_Reg;

	di_im_di_hmc_me_refine_ctrl_2_RBUS di_hmc_me_refine_ctrl2_reg;
	static di_im_di_hmc_me_refine_ctrl_2_RBUS ORI_di_hmc_me_refine_ctrl2_reg;

	/*LG internal TV signal "E-52"*/
	di_tnrxc_mkii_ctrl_RBUS tnrxc_mkii_ctrl_reg;

	// merlin4 henry
	static unsigned char ori_panConti_str=0;
	static unsigned char ori_panDeb_str=0;
	// end merlin4

	static di_im_di_ma_frame_motion_th_a_RBUS ORI_di_ma_frame_motion_th_a_reg;
	static di_im_di_ma_frame_motion_th_b_RBUS ORI_di_ma_frame_motion_th_b_reg;
	static di_im_di_ma_frame_motion_th_c_RBUS ORI_di_ma_frame_motion_th_c_reg;
	static di_di_smd_control_candidatelist_RBUS ORI_di_smd_control_candiate_reg;
	static di_im_di_nintra_control_RBUS ori_di_im_di_nintra_control;
#if 0
	static di_im_di_hmc_pan_dummy_2_RBUS ORI_di_pan_dummy2_reg;
	static di_im_di_hmc_pan_dummy_3_RBUS ORI_di_pan_dummy3_reg;
//#else // henry Merlin3 temp
	static di_im_di_rtnr_refined_ctrl2_RBUS ORI_di_im_di_rtnr_refined_ctrl2_reg;
	static di_di_smd_dummy_RBUS ORI_di_di_smd_dummy_reg;
#endif

	static di_im_di_btr_control_RBUS ORI_di_im_di_btr_control_reg;

  	static vdpq_postp_secam_fix_ctrl_RBUS ORI_postp_secam_fix_ctrl_reg;
	static vdpq_postp_secam_fix_y_detect0_RBUS ORI_postp_secam_fix_y_detect0_reg;
	static vdpq_postp_secam_fix_y_detect1_RBUS ORI_postp_secam_fix_y_detect1_reg;

	static di_im_di_hmc_pan_control_par_1_RBUS ORI_di_hmc_pan_control_par_1_reg;
	static di_im_di_hmc_statistic1_RBUS ORI_di_hmc_statistic1_reg;

	static di_di_gst_ctrl_RBUS ORI_init_di_gst_ctrl_reg;

	static memc_mux_memc_mux_di_ctrl_RBUS ORI_color_temp_ctrl_reg;


	/*LG internal TV signal "E-52"*/
	static di_tnrxc_mkii_ctrl_RBUS ORI_tnrxc_mkii_ctrl_reg;
	static di_im_di_si_film_final_result_RBUS im_di_si_film_final_result_reg;

	static unsigned char m_LockValue=0;
	static unsigned int ori_ULTRI_value=0;
	static unsigned short ori_smd_upperbound_sad_forjudgemv=0;
	static unsigned short ori_smd_rang_sad=0;
	static unsigned char  ori_smd_firmware_pan_sad_th=0;
	static unsigned char ori_smd_firmware_pan=0;
	static unsigned char ori_smd_hardware_pan_en=0;
	static unsigned char ori_smd_apply_result_mode=0;
	static unsigned char ori_smd_firmwarepan_sadmax=0;
//	static unsigned char ori_smd_close2gmv_mvselect=0;
//	static unsigned char ori_smd_close2gmv_fw_en=0;
	static unsigned char ori_gst_subpixel_compensate_en=0;
//	static unsigned char ori_gst_subpixel_hardwarepan_en=0;
	static unsigned char ori_smd_en=0;
	static unsigned char ori_smd_result_en=0;
	static unsigned char ori_smd_acc_smd_en =0;
	static unsigned char ori_smd_spatialfreqnomatch_off =0;
	static unsigned char ori_smd_outofrange_content_new = 0 ;

	static unsigned short ori_cp_sresultweight=0;
	static unsigned short ori_mosquito_en=0;
	static unsigned short ori_curve_mapping_w1_3=0,ori_curve_mapping_w1_4=0,ori_curve_mapping_w1_5=0;//,ori_curve_mapping_w2_2_2=0;
	static unsigned short ori_curve_mapping_w1_2=0,ori_curve_mapping_step6=0,ori_curve_mapping_step7=0,ori_curve_mapping_step8=0;
	static unsigned short ori_curve_mapping_w1_6=0,ori_curve_mapping_w1_7=0;
	static unsigned short ori_curve_mapping_w1_8=0;

	static unsigned short ori_mosquito_nr_positive_shift=0;
	//static unsigned short ori_mosquito_nr_bi_nlevel_max=0;
	static unsigned short ori_mosquito_far_var_gain=0;
//	static unsigned char gReg123=0;
//	static unsigned char gRegW_MonScope=FALSE;
	static unsigned char ori_Intr_di_range=0;
	static unsigned char ori_gain_pos=0;
	static unsigned char ori_gain_neg=0;
	static unsigned char ori_gain_LV_Gain=0;
	static unsigned char ori_cp_fixedweight1y=0;
	static unsigned char ori_cp_fixedweight2y=0;
	//VD register setting moved to scalerVideo.c, willy 20150713
	//static unsigned char ori_chroma_bw_lo=0;
	static unsigned char ori_ma_snr_edge_curve_slope=0;
	static unsigned char ori_ma_snr_output_clamp=0;

	static unsigned char ori_text_gain_pos=0;
	static unsigned char ori_text_gain_neg=0;

	static unsigned char ori_hmc_sub_pixel_diff_thd=0;
	static unsigned char ori_curve_mapping_w2_2=0;
	static unsigned char ori_curve_mapping_w2_3=0;
	static unsigned char ori_curve_mapping_w2_4=0;
	static unsigned char ori_curve_mapping_w2_5=0;

	static unsigned char ori_vcti_select=0;
	static unsigned char ori_vcti_en=0;
	static scaleup_dm_mem_crc_ctrl_RBUS ori_dm_mem_crc_ctrl_RBUS_reg;
	static unsigned char ori_spatialenablec = 0;
	static unsigned char ori_cds_enable=0;

	static unsigned char ori_vpk_gain_neg=0;
	static unsigned char ori_vpk_gain_pos=0;

	static unsigned char ori_I_uvsync_en=0;
	static unsigned char ori_I_uvgain=0;
	static unsigned char ori_I_lp_mode=0;
	static unsigned char ori_I_vlp_mode=0;
	static unsigned char ori_I_blending_mode=0;
	static unsigned char ori_I_cur_sel=0;
	static unsigned char ori_I_data_sel=0;
	static unsigned char ori_I_maxlen =0;

	static unsigned char ori_D_uvgain =0;
	static unsigned char ori_D_vlp_mode =0;
	static unsigned char ori_D_data_sel =0;
	static unsigned char ori_D_engdiv =0;
	static unsigned char ori_D_offdiv =0;
	static unsigned char ori_D_maxlen =0;
	static unsigned char ori_vc_snr_lpf_sel=0;
	static unsigned char ori_sresultweight_adjust_shift=0;
	static unsigned char ori_gst_gst_static_disable=0;
	static unsigned char ori_gst_min_sad_compare_diable=0;
	static unsigned char ori_gst_min_sad_nolimit_en=0;
	static unsigned char ori_smd_weave_dynamic=0;

	static unsigned char ori_gst_mv_limit=0;

    	static unsigned char ori_film_enable=0;

	unsigned char Motion_Th_c[7]={12,26,37,47,56,63,70};
	unsigned char Motion_Th_c_can[7] = {6,10,14,18,22,26,30};
	unsigned char Motion_Th[15]={8,10,13,16,17,28,36,45,53,57,64,67,68,69,72};
	unsigned char Motion_Th_speach_man[15]={10,12,16,18,24,30,36,45,53,57,64,67,68,69,72};

	static unsigned char ori_nintra_lp_src_yclamp_th=0;
	static di_im_di_nintra_search_dir_limit_RBUS ori_di_im_di_nintra_search_dir_limit;
	static di_di_smd_compensate_RBUS ori_smd_compensate_reg;
	static di_di_smd_refinemv2_RBUS ori_di_smd_refinemv2_reg;

	static unsigned char ori_dm_uzu_hor_mode_sel = 0;
	static unsigned char ori_dm_uzu_y_consttab_sel =0;

// chen 170522
//	static unsigned char ori_n_mcnr_offset = 0;
// end chen 170522
	static unsigned char ori_conf_lowbnd=0;
	static unsigned int kernel_init_count=0;

	//static unsigned int start_count = 0;
	static unsigned char set_p2i_value = 0;

	di_im_di_hmc_pan_control_RBUS di_im_di_hmc_pan_control_reg;

	di_im_di_film_sawtooth_filmframe_th_RBUS im_di_film_sawtooth_filmframe_th_reg;
	static di_im_di_film_sawtooth_filmframe_th_RBUS ORI_im_di_film_sawtooth_filmframe_th_reg;
	di_im_di_film_static_sum_th_RBUS film_static_sum_th_reg;
	static di_im_di_film_static_sum_th_RBUS ORI_film_static_sum_th_reg;
	di_im_di_film_motion_sum_th_RBUS film_motion_sum_th_reg;
	static di_im_di_film_motion_sum_th_RBUS ORI_film_motion_sum_th_reg;

	// decontour settings for skyworth demo, 20170821 jimmy
	ipq_decontour_de_contour_ctrl_RBUS decontour_ctrl_reg;
	ipq_decontour_de_contour_contrast_RBUS ipq_decontour_de_contour_contrast_reg;
	ipq_decontour_de_contour_neighbor_diff_RBUS decontour_neighbor_diff_reg;
	ipq_decontour_de_contour_threshold_RBUS decontour_threshold_reg;
	ipq_decontour_de_contour_diff_th_RBUS decontour_diff_th_reg;

	static ipq_decontour_de_contour_ctrl_RBUS ORI_decontour_ctrl_reg;
	static ipq_decontour_de_contour_contrast_RBUS ORI_ipq_decontour_de_contour_contrast_reg;
	static ipq_decontour_de_contour_neighbor_diff_RBUS ORI_decontour_neighbor_diff_reg;
	static ipq_decontour_de_contour_threshold_RBUS ORI_decontour_threshold_reg;
	static ipq_decontour_de_contour_diff_th_RBUS ORI_decontour_diff_th_reg;


	_system_setting_info* system_info_structure_table = NULL;
	_clues* SmartPic_clue=NULL;
	_RPC_clues* RPC_SmartPic_clue=NULL;
	static unsigned char pre_source =255;
	unsigned char i=0;
	//unsigned char panDeb_str;
	//unsigned char panConti_str;


	unsigned char cur_source;

	system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();
	SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();
	RPC_SmartPic_clue = scaler_GetShare_Memory_RPC_SmartPic_Clue_Struct();
	if((system_info_structure_table == NULL) || (SmartPic_clue == NULL)|| (RPC_SmartPic_clue == NULL))
	{
		if(MA_print_count%360==0)
			ROSPrintf("Share Memory PQ data ERROR, system_info = %p, SmartPic_clue=%p, RPC_SmartPic_clue=%p \n",system_info_structure_table, SmartPic_clue, RPC_SmartPic_clue );
		return;
	}





	//ROSPrintf("\n rord vip current %d \n ",cur_source);

	if((apply==0)) // reset init value;
	{
		for(i=0;i<255;i++)
		{
			DynamicOptimizeSystem[i]=0;
		}
		if(Stop_Polling.Stop_Reset_Pattern==1)
			return;
		//ROSPrintf("\n cur_source %d , pre_source %d \n",cur_source,pre_source);
	}

	cur_source=(RPC_system_info_structure_table->VIP_source);

	init_di_smd_additionalcoeff1_reg.regValue=rtd_inl(DI_DI_SMD_AdditionalCoeff1_reg);

	smd_choosecandidate_reg.regValue = rtd_inl(DI_DI_SMD_ChooseCandidate_reg);

	smd_refinemv3_reg.regValue =  rtd_inl(DI_DI_SMD_RefineMV3_reg);
	smd_compensate_reg.regValue =  rtd_inl(DI_DI_SMD_Compensate_reg);

	init_di_smd_candidatelimitsad_reg.regValue =  rtd_inl(DI_DI_SMD_CandidateLimitSAD_reg);
	init_di_smd_additionalcoeff2_reg.regValue =  rtd_inl(DI_DI_SMD_AdditionalCoeff2_reg);
	//di_smd_dummy_reg.regValue =  rtd_inl(DI_DI_SMD_dummy_reg);

	di_smd_refinemv2_reg.regValue = rtd_inl(DI_DI_SMD_RefineMV2_reg);

	init_di_smd_pan1_reg.regValue =rtd_inl(DI_DI_SMD_Pan1_reg);
	di_di_smd_hardwarepan_modify1.regValue=rtd_inl(DI_DI_SMD_HardwarePan_Modify1_reg);
	//di_di_smd_sampling_gmvc.regValue = rtd_inl(DI_DI_SMD_Sampling_GMVc_reg);
	di_di_gst_compensate.regValue = rtd_inl(DI_DI_GST_Compensate_reg);

	di_di_smd_slow_motion_handle1.regValue= rtd_inl(DI_DI_SMD_Slow_Motion_handle1_reg);
	di_di_smd_slow_motion_handle2.regValue= rtd_inl(DI_DI_SMD_Slow_Motion_handle2_reg);

	di_im_di_nintra_lowpass_source.regValue	= rtd_inl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg);

	di_im_di_nintra_search_dir_limit.regValue= rtd_inl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg);

	init_di_gst_ctrl_reg.regValue = rtd_inl(DI_DI_GST_Ctrl_reg);

	color_temp_ctrl_reg.regValue = rtd_inl(MEMC_MUX_MEMC_MUX_DI_CTRL_reg);

	dch1_cp_ctrl_reg.regValue = rtd_inl(NR_DCH1_CP_Ctrl_reg);
	dm_uzu_main_v_partial_drop_RBUS_reg.regValue = rtd_inl(SCALEUP_DM_UZUMAIN_V_PARTIAL_DROP_reg);
	nr_mosquito_ctrl_RBUS_reg.regValue = rtd_inl(NR_MOSQUITO_CTRL_reg);
	curve_mapping_w1_1_reg.regValue = rtd_inl(NR_CURVE_MAPPING_W1_1_reg);
	curve_mapping_w1_2_reg.regValue = rtd_inl(NR_CURVE_MAPPING_W1_2_reg);
	curve_mapping_w1_3_reg.regValue = rtd_inl(NR_CURVE_MAPPING_W1_3_reg);

	curve_mapping_w2_1_reg.regValue = rtd_inl(NR_CURVE_MAPPING_W2_1_reg);
	curve_mapping_step2_reg.regValue = rtd_inl(NR_CURVE_MAPPING_STEP_2_reg);
	curve_mapping_step3_reg.regValue = rtd_inl(NR_CURVE_MAPPING_STEP_3_reg);
	di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);

	nr_mosquito_nr_level_ctrl_RBUS_reg.regValue = rtd_inl(NR_MOSQUITO_NR_LEVEL_CTRL_reg);
	nr_mosquito_nr_level_ctrl_1_RBUS_reg.regValue= rtd_inl(NR_MOSQUITO_NR_LEVEL_CTRL_1_reg);
	dm_uzu_Ctrl_reg.regValue = rtd_inl(SCALEUP_DM_UZU_Ctrl_reg);

	dch1_Spatial_Weight_Reg.regValue = rtd_inl(NR_DCH1_Spatial_Weight_reg);

	// No.191 monoscope
	color_sharp_dm_segpk_edgpk3.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_EDGPK3_reg);
	color_sharp_dm_peaking_bound_1_reg.regValue= rtd_inl(COLOR_SHARP_DM_PEAKING_BOUND_1_reg);


	di_rtnr_ma_snr_strength_control.regValue=	rtd_inl(DI_RTNR_MA_SNR_STRENGTH_CONTROL_reg);


	color_sharp_dm_peaking_gain_reg.regValue = rtd_inl(COLOR_SHARP_DM_PEAKING_GAIN_reg);

	di_hmc_adjustable_reg.regValue = rtd_inl(DI_IM_DI_HMC_ADJUSTABLE_reg);
	di_hmc_pan_control_par_2_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg);
	di_hmc_pan_control_par_1_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg);
	di_hmc_statistic1_reg.regValue = rtd_inl(DI_IM_DI_HMC_STATISTIC1_reg);

	di_hmc_adjustable3_reg.regValue = rtd_inl(DI_IM_DI_HMC_ADJUSTABLE3_reg);
	di_hmc_adjustable4_reg.regValue = rtd_inl(DI_IM_DI_HMC_ADJUSTABLE4_reg);


	dm_segpk_vpk2.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_VPK2_reg );



	im_di_weave_window_control_reg.regValue = rtd_inl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg);
	im_di_weave_window_1_start_reg.regValue = rtd_inl(DI_IM_DI_WEAVE_WINDOW_1_START_reg);
	im_di_weave_window_1_end_reg.regValue = rtd_inl(DI_IM_DI_WEAVE_WINDOW_1_END_reg);

	di_ma_frame_motion_th_a_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg);
	di_ma_frame_motion_th_b_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg);
	di_ma_frame_motion_th_c_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg);


    /*
	if(system_info_structure_table->Input_src_Form == _SRC_FROM_VDC && vd_pwr_ok) //only VDC format can read it.avoid vd ip had close
	{
		//YC_BW_CTRL_reg.regValue = rtd_inl(VDPQ_YC_BW_CTRL_reg);
		// outer if function currently useless, willy 20150605
		//vdpq_adap_bpf_y_th3_reg.regValue = rtd_inl(VDPQ_ADAP_BPF_Y_TH3_reg);
	}
	// set as the IC default value, willy 20150605
	//vdpq_adap_bpf_y_th3_reg.regValue = 0;
    */

	curve_mapping_w2_1_reg.regValue 	=	rtd_inl(NR_CURVE_MAPPING_W2_1_reg);
	curve_mapping_w2_2_reg.regValue 	=	rtd_inl(NR_CURVE_MAPPING_W2_2_reg);

	di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
	intra_th_Reg.regValue = rtd_inl(DI_IM_DI_INTRA_TH_reg);
	dm_mem_crc_ctrl_RBUS_reg.regValue= rtd_inl(SCALEUP_DM_MEM_CRC_CTRL_reg);

	//frame_motion_a_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg);
	color_sharp_dm_cds_cm0_u_bound_0_reg.regValue = rtd_inl(COLOR_SHARP_DM_CDS_CM0_U_BOUND_0_reg);

	rtnr_new_Ctrl.regValue = rtd_inl(DI_IM_DI_RTNR_NEW_CONTROL_reg);

	ich1_newdcti_reg_2.regValue = rtd_inl(IDCTI_I_DCTI_CTRL_2_reg);
	ich1_newdcti_reg_1.regValue = rtd_inl(IDCTI_I_DCTI_CTRL_1_reg);
	dm_dcti_REG_1.regValue = rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_1_reg);
	dm_dcti_REG_2.regValue = rtd_inl(COLOR_SHARP_SHP_DCTI_CTRL_2_reg);

	dm_uzu_Ctrl.regValue = rtd_inl(SCALEUP_DM_UZU_Ctrl_reg);
	// special setting for LG139, willy 20151005
	di_ma_frame_motion_th_a_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg);
	di_ma_frame_motion_th_b_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg);
	di_ma_frame_motion_th_c_reg.regValue = rtd_inl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg);
	di_smd_control_candiate_reg.regValue = rtd_inl(DI_DI_SMD_Control_CandidateList_reg);
	di_im_di_nintra_control.regValue = rtd_inl(DI_IM_DI_NINTRA_CONTROL_reg);
#if 0
	di_pan_dummy2_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_DUMMY_2_reg);
	di_pan_dummy3_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_DUMMY_3_reg);
//#else // henry Merlin3 temp
	di_im_di_rtnr_refined_ctrl2_reg.regValue = rtd_inl(DI_IM_DI_RTNR_REFINED_CTRL2_reg);
	di_di_smd_dummy_reg.regValue = rtd_inl(DI_DI_SMD_dummy_reg);
#endif

	di_im_di_btr_control_reg.regValue = rtd_inl(DI_IM_DI_BTR_CONTROL_reg);

	di_hmc_adjustable2_reg.regValue = rtd_inl(DI_IM_DI_HMC_ADJUSTABLE2_reg);

	if(cur_source == VIP_QUALITY_TV_SECAN){
	    	postp_secam_fix_ctrl_reg.regValue =VDPQ_rtd_inl(VDPQ_POSTP_SECAM_FIX_CTRL_reg);
		postp_secam_fix_y_detect0_reg.regValue = VDPQ_rtd_inl(VDPQ_POSTP_SECAM_FIX_Y_DETECT0_reg);
		postp_secam_fix_y_detect1_reg.regValue = VDPQ_rtd_inl(VDPQ_POSTP_SECAM_FIX_Y_DETECT1_reg);
	}
	di_im_new_mcnr_control.regValue = rtd_inl(DI_IM_NEW_MCNR_CONTROL_reg);

	dm_dir_uzu_conf_Reg.regValue = rtd_inl(SCALEUP_DM_DIR_UZU_Conf_reg);
	di_im_di_hmc_pan_control_reg.regValue = rtd_inl(DI_IM_DI_HMC_PAN_CONTROL_reg);
	di_hmc_me_refine_ctrl2_reg.regValue = rtd_inl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg);
	FrameSobel_statistic_Reg.regValue = rtd_inl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg);



	di_di_smd_waterflag_ctr3.regValue = rtd_inl(DI_DI_SMD_WaterFlag_Ctr3_reg);
	di_di_smd_resurrect_ctrl.regValue = rtd_inl(DI_DI_SMD_Resurrect_Ctrl_reg);




	im_di_film_sawtooth_filmframe_th_reg.regValue = rtd_inl(DI_IM_DI_FILM_SAWTOOTH_FILMFRAME_TH_reg);
	film_static_sum_th_reg.regValue = rtd_inl(DI_IM_DI_FILM_STATIC_SUM_TH_reg);
	film_motion_sum_th_reg.regValue = rtd_inl(DI_IM_DI_FILM_MOTION_SUM_TH_reg);

	// decontour settings for skyworth demo, 20170821 jimmy
	decontour_ctrl_reg.regValue = rtd_inl(IPQ_DECONTOUR_De_Contour_CTRL_reg);
	ipq_decontour_de_contour_contrast_reg.regValue = rtd_inl(IPQ_DECONTOUR_De_Contour_Contrast_reg);
	decontour_neighbor_diff_reg.regValue = rtd_inl(IPQ_DECONTOUR_De_Contour_Neighbor_Diff_reg);
	decontour_threshold_reg.regValue = rtd_inl(IPQ_DECONTOUR_De_Contour_Threshold_reg);
	decontour_diff_th_reg.regValue = rtd_inl(IPQ_DECONTOUR_De_Contour_Diff_th_reg);


	/*LG internal TV signal "E-52"*/
	tnrxc_mkii_ctrl_reg.regValue = rtd_inl(DI_TNRXC_MkII_CTRL_reg);

	im_di_si_film_final_result_reg.regValue = rtd_inl(DI_IM_DI_SI_FILM_FINAL_RESULT_reg);

	//when timing change ,need kernel quality handle load table finiished ,wait 120 times if still not flag form kernel , start work
	if((pre_source !=cur_source )&&(kernel_quality_init==0)&&(kernel_init_count<120))
	{
		kernel_init_count++;
		return;
	}

	if(pre_source !=cur_source||ScalerVIP_Get_pq_reset()==1)
	{
		scalerVIP_Set_pq_reset(0);

		//ROSPrintf(" \n rord ini =%d \n",kernel_quality_init);
		//ROSPrintf(" \n rord count =%d \n",kernel_init_count);

		ori_smd_upperbound_sad_forjudgemv=di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;
		ori_smd_rang_sad = smd_choosecandidate_reg.smd_reliablerange_sad_th;

		ori_smd_firmware_pan_sad_th = init_di_smd_pan1_reg.smd_firmware_pan_sad_th;

		ori_smd_firmware_pan=init_di_smd_pan1_reg.smd_firmware_pan;
		ori_smd_hardware_pan_en=init_di_smd_pan1_reg.smd_hardware_pan_en;
		ori_smd_apply_result_mode=init_di_smd_pan1_reg.smd_apply_result_mode;
		ori_smd_firmwarepan_sadmax=di_di_smd_hardwarepan_modify1.smd_firmwarepan_sadmax;
		//ori_smd_close2gmv_mvselect=di_di_smd_sampling_gmvc.smd_close2gmv_mvselect;
		//ori_smd_close2gmv_fw_en =di_di_smd_sampling_gmvc.smd_close2gmv_fw_en;
		ori_gst_subpixel_compensate_en=di_di_gst_compensate.gst_subpixel_compensate_en;
		//ori_gst_subpixel_hardwarepan_en = di_di_gst_compensate.gst_subpixel_hardwarepan_en;
		ori_smd_en = di_smd_control_candiate_reg.smd_en;
		ori_smd_result_en = init_di_smd_additionalcoeff1_reg.smd_result_en;


		ori_di_di_smd_waterflag_ctr3.regValue = di_di_smd_waterflag_ctr3.regValue;
		ori_di_di_smd_resurrect_ctrl.regValue = di_di_smd_resurrect_ctrl.regValue;



		ori_smd_acc_smd_en =di_di_smd_slow_motion_handle1.smd_acc_smd_en;
		ori_smd_spatialfreqnomatch_off =di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off;
		ori_smd_outofrange_content_new = di_di_smd_slow_motion_handle1.smd_outofrange_content_new;

		ori_gst_gst_static_disable = di_di_smd_slow_motion_handle1.gst_gst_static_disable;
		ori_gst_min_sad_compare_diable = di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable;
		ori_gst_min_sad_nolimit_en = di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en;
		ori_smd_weave_dynamic = di_di_smd_slow_motion_handle1.smd_weave_dynamic;

		ori_gst_mv_limit = di_di_smd_slow_motion_handle2.gst_mv_limit;

		ori_nintra_lp_src_yclamp_th = di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th;
		ori_di_im_di_nintra_search_dir_limit.regValue= di_im_di_nintra_search_dir_limit.regValue;


		ori_cp_sresultweight=dch1_cp_ctrl_reg.cp_sresultweight;
		ori_spatialenablec = dch1_cp_ctrl_reg.cp_spatialenablec;
		ori_vc_snr_lpf_sel = dch1_cp_ctrl_reg.vc_snr_lpf_sel;
		ori_sresultweight_adjust_shift = dch1_cp_ctrl_reg.sresultweight_adjust_shift;

		ori_mosquito_en=nr_mosquito_ctrl_RBUS_reg.mosquito_detect_en;
		ori_curve_mapping_w1_3 =curve_mapping_w1_1_reg.curvemapping_w1_3;
		ori_curve_mapping_w1_4=curve_mapping_w1_2_reg.curvemapping_w1_4;
		ori_curve_mapping_w1_5=curve_mapping_w1_2_reg.curvemapping_w1_5;
		ori_curve_mapping_w1_2=curve_mapping_w1_1_reg.curvemapping_w1_2;
		ori_curve_mapping_w1_6=curve_mapping_w1_2_reg.curvemapping_w1_6;
		ori_curve_mapping_w1_7=curve_mapping_w1_2_reg.curvemapping_w1_7;
		ori_curve_mapping_w1_8=curve_mapping_w1_3_reg.curvemapping_w1_8;

		ori_curve_mapping_step6=curve_mapping_step2_reg.curvemapping_step6;
		ori_curve_mapping_step7=curve_mapping_step3_reg.curvemapping_step7;
		ori_curve_mapping_step8=curve_mapping_step3_reg.curvemapping_step8;

		ori_ma_snr_edge_curve_slope=di_rtnr_ma_snr_strength_control.rtnr_ma_snr_edge_curve_slope;
		ori_ma_snr_output_clamp=di_rtnr_ma_snr_strength_control.rtnr_ma_snr_output_clamp;

		ori_mosquito_nr_positive_shift=nr_mosquito_nr_level_ctrl_RBUS_reg.mosquitonr_nlevel_positive_shift;
		//ori_mosquito_nr_bi_nlevel_max=nr_mosquito_nr_level_ctrl_RBUS_reg.mosquitonr_bi_nlevel_max;
		ori_mosquito_far_var_gain=nr_mosquito_nr_level_ctrl_1_RBUS_reg.far_var_gain;
		ori_ULTRI_value = dm_uzu_Ctrl_reg.regValue; // what is this????? assign a register value to a specific bit?
		ori_Intr_di_range = di_control_reg.regValue; // what is this????? assign a register value to a specific bit?
		ori_gain_pos=color_sharp_dm_segpk_edgpk3.gain_pos;
		ori_gain_neg=color_sharp_dm_segpk_edgpk3.gain_neg;
		ori_gain_LV_Gain=color_sharp_dm_peaking_bound_1_reg.lv;

		ori_cp_fixedweight1y = dch1_Spatial_Weight_Reg.cp_fixedweight1y;
		ori_cp_fixedweight2y = dch1_Spatial_Weight_Reg.cp_fixedweight2y;

		ori_text_gain_pos =color_sharp_dm_peaking_gain_reg.gain_pos;
		ori_text_gain_neg = color_sharp_dm_peaking_gain_reg.gain_neg;

		ORI_di_hmc_adjustable_reg.regValue= di_hmc_adjustable_reg.regValue;
		ori_hmc_sub_pixel_diff_thd = di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd;
		ORI_di_hmc_adjustable3_reg.regValue= di_hmc_adjustable3_reg.regValue;
		ORI_di_hmc_adjustable4_reg.regValue= di_hmc_adjustable4_reg.regValue;

		ori_curve_mapping_w2_2 = curve_mapping_w2_1_reg.curvemapping_w2_2;
		ori_curve_mapping_w2_3 = curve_mapping_w2_1_reg.curvemapping_w2_3;
		ori_curve_mapping_w2_4 = curve_mapping_w2_2_reg.curvemapping_w2_4;
		ori_curve_mapping_w2_5 = curve_mapping_w2_2_reg.curvemapping_w2_5;

		ori_vcti_select = dm_mem_crc_ctrl_RBUS_reg.vcti_select;
		ori_vcti_en = dm_mem_crc_ctrl_RBUS_reg.vcti_en;
		ori_dm_mem_crc_ctrl_RBUS_reg.regValue = dm_mem_crc_ctrl_RBUS_reg.regValue;
		//ori_frame_motion_a_reg = frame_motion_a_reg.ma_framestha;
		ori_cp_sresultweight = dch1_cp_ctrl_reg.cp_sresultweight;

		ori_cds_enable=color_sharp_dm_cds_cm0_u_bound_0_reg.cds_enable;


		ori_vpk_gain_neg=dm_segpk_vpk2.vpk_gain_neg;
		ori_vpk_gain_pos=dm_segpk_vpk2.vpk_gain_pos;


		ori_I_uvsync_en=ich1_newdcti_reg_2.uvsync_en;
		ori_I_uvgain=ich1_newdcti_reg_1.uvgain;
		ori_I_lp_mode=ich1_newdcti_reg_1.lp_mode;
		ori_I_vlp_mode=ich1_newdcti_reg_2.vlp_mode;
		ori_I_blending_mode=ich1_newdcti_reg_2.blending_mode;
		ori_I_cur_sel=ich1_newdcti_reg_1.cur_sel;
		ori_I_data_sel=ich1_newdcti_reg_1.data_sel;
		ori_I_maxlen =ich1_newdcti_reg_1.maxlen;

		ori_D_uvgain=dm_dcti_REG_1.uvgain;
		ori_D_vlp_mode=dm_dcti_REG_2.vlp_mode;
		ori_D_data_sel=dm_dcti_REG_1.data_sel;
		ori_D_engdiv=dm_dcti_REG_1.engdiv;
		ori_D_offdiv=dm_dcti_REG_1.offdiv;
		ori_D_maxlen=dm_dcti_REG_1.maxlen;

		ori_film_enable = di_control_reg.film_enable;

		ori_dm_uzu_hor_mode_sel = dm_uzu_Ctrl.hor_mode_sel;
		ori_dm_uzu_y_consttab_sel = dm_uzu_Ctrl.h_y_consttab_sel;
		ORI_di_ma_frame_motion_th_a_reg.regValue = di_ma_frame_motion_th_a_reg.regValue;
		ORI_di_ma_frame_motion_th_b_reg.regValue = di_ma_frame_motion_th_b_reg.regValue;
		ORI_di_ma_frame_motion_th_c_reg.regValue = di_ma_frame_motion_th_c_reg.regValue;
		ORI_di_smd_control_candiate_reg.regValue = di_smd_control_candiate_reg.regValue;
		ori_di_im_di_nintra_control.regValue = di_im_di_nintra_control.regValue;
#if 0
		ORI_di_pan_dummy2_reg.regValue = di_pan_dummy2_reg.regValue;
		ORI_di_pan_dummy3_reg.regValue = di_pan_dummy3_reg.regValue;
//#else // henry Merlin3 temp
		ORI_di_im_di_rtnr_refined_ctrl2_reg.regValue = di_im_di_rtnr_refined_ctrl2_reg.regValue;
		ORI_di_di_smd_dummy_reg.regValue = di_di_smd_dummy_reg.regValue;
		panDeb_str = ORI_di_di_smd_dummy_reg.dummy18024540_31_2 & 0xFF; // 8 bits [9:2]
		panConti_str = ORI_di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 & 0xFF; // 8 buts [24:17]
#else	// merlin4 henry
		ori_panDeb_str = g_panDeb_str;
		ori_panConti_str = g_panConti_str;
#endif

		ORI_di_im_di_btr_control_reg.regValue = di_im_di_btr_control_reg.regValue;

		ORI_di_hmc_adjustable2_reg.regValue = di_hmc_adjustable2_reg.regValue;

		ORI_postp_secam_fix_ctrl_reg.regValue = postp_secam_fix_ctrl_reg.regValue;
		ORI_postp_secam_fix_y_detect0_reg.regValue = postp_secam_fix_ctrl_reg.regValue;
		ORI_postp_secam_fix_y_detect1_reg.regValue = postp_secam_fix_ctrl_reg.regValue;

// chen 170522
	//	ori_n_mcnr_offset = di_im_new_mcnr_control.n_mcnr_offset;
// end chen 170522

		ORI_im_di_weave_window_control_reg.regValue = im_di_weave_window_control_reg.regValue;
		ORI_im_di_weave_window_1_start_reg.regValue = im_di_weave_window_1_start_reg.regValue;
		ORI_im_di_weave_window_1_end_reg.regValue = im_di_weave_window_1_end_reg.regValue;

		ori_conf_lowbnd =dm_dir_uzu_conf_Reg.conf_lowbnd;

		ORI_di_hmc_pan_control_par_1_reg.regValue = di_hmc_pan_control_par_1_reg.regValue;
		ORI_di_hmc_statistic1_reg.regValue = di_hmc_statistic1_reg.regValue;
		ORI_di_hmc_me_refine_ctrl2_reg.regValue = di_hmc_me_refine_ctrl2_reg.regValue;

		ORI_FrameSobel_statistic_Reg.regValue = FrameSobel_statistic_Reg.regValue;


		ori_smd_compensate_reg.regValue = smd_compensate_reg.regValue;

		ori_di_smd_refinemv2_reg.regValue= di_smd_refinemv2_reg.regValue;

		ORI_tnrxc_mkii_ctrl_reg.regValue = tnrxc_mkii_ctrl_reg.regValue;
		ORI_init_di_gst_ctrl_reg.regValue= init_di_gst_ctrl_reg.regValue;

		ORI_color_temp_ctrl_reg.regValue=color_temp_ctrl_reg.regValue;


		ORI_im_di_film_sawtooth_filmframe_th_reg.regValue = im_di_film_sawtooth_filmframe_th_reg.regValue;
		ORI_film_static_sum_th_reg.regValue = film_static_sum_th_reg.regValue;
		ORI_film_motion_sum_th_reg.regValue = film_motion_sum_th_reg.regValue;

		// decontour settings for skyworth demo, 20170821 jimmy
		ORI_decontour_ctrl_reg.regValue = decontour_ctrl_reg.regValue;
		ORI_ipq_decontour_de_contour_contrast_reg.regValue = ipq_decontour_de_contour_contrast_reg.regValue;
		ORI_decontour_neighbor_diff_reg.regValue = decontour_neighbor_diff_reg.regValue;
		ORI_decontour_threshold_reg.regValue = decontour_threshold_reg.regValue;
		ORI_decontour_diff_th_reg.regValue = decontour_diff_th_reg.regValue;


		set_p2i_value = 0;

	}

	kernel_quality_init = 0 ;
	kernel_init_count =0;
	pre_source = cur_source;


	if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
	{
		di_double_buff_apply =1;
 	}
	init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;
	rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg,init_di_smd_additionalcoeff1_reg.regValue);

	switch(cur_source)
	{
		case VIP_QUALITY_CVBS_NTSC:
		{
			if(!vd_pwr_ok)
				break;

			//************** INI VALE START    ***************************************************


			//#1
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#2
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;

			//#7
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else	// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif
			//#12
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#23 #24
			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}

			init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;

			//#28
			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.regValue=ori_di_im_di_nintra_search_dir_limit.regValue;

			//#63
			di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			// di_im_new_mcnr_control.n_mcnr_offset ; don't set value in here, it control by mcnr

			//#75
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else	// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif
			di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th = ORI_di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th;

			//#107
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			smd_refinemv3_reg.smd_sfreq_diff_gain =4;
			smd_refinemv3_reg.smd_sfreq_diff_th =25;
			smd_refinemv3_reg.smd_sfreq_drop_th =80;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xd2;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;

			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=gSmd_gain;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=gSmd_offset;
			//di_smd_dummy_reg.smd_partialweave =0;

			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			di_di_smd_slow_motion_handle1.smd_outofrange_content_new = ori_smd_outofrange_content_new;
			di_di_smd_slow_motion_handle2.gst_mv_limit = ori_gst_mv_limit;
			//di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;

			im_di_weave_window_control_reg.fixedwindow1 = ORI_im_di_weave_window_control_reg.fixedwindow1;
			im_di_weave_window_1_start_reg.regValue = ORI_im_di_weave_window_1_start_reg.regValue;
			im_di_weave_window_1_end_reg.regValue = ORI_im_di_weave_window_1_end_reg.regValue;

			di_hmc_statistic1_reg.regValue = ORI_di_hmc_statistic1_reg.regValue;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;
			FrameSobel_statistic_Reg.regValue = ORI_FrameSobel_statistic_Reg.regValue;
			di_hmc_adjustable_reg.regValue = ORI_di_hmc_adjustable_reg.regValue;
			di_hmc_adjustable2_reg.regValue= ORI_di_hmc_adjustable2_reg.regValue;
			di_hmc_adjustable3_reg.regValue= ORI_di_hmc_adjustable3_reg.regValue;
			di_hmc_adjustable4_reg.regValue= ORI_di_hmc_adjustable4_reg.regValue;


			//#139
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			//di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_c_reg.ma_framesthc = ORI_di_ma_frame_motion_th_c_reg.ma_framesthc;
			di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			dch1_cp_ctrl_reg.sresultweight_adjust_shift = ori_sresultweight_adjust_shift;
			dch1_cp_ctrl_reg.vc_snr_lpf_sel = ori_vc_snr_lpf_sel;
			curve_mapping_w1_2_reg.curvemapping_w1_6 = ori_curve_mapping_w1_6;
			curve_mapping_w1_2_reg.curvemapping_w1_7 = ori_curve_mapping_w1_7;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#151

			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb = ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;

			dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;
			di_im_di_nintra_control.nintra_intersection_check_en =ori_di_im_di_nintra_control.nintra_intersection_check_en;
			di_im_di_nintra_control.nintra_preline_dir_check2_en = ori_di_im_di_nintra_control.nintra_preline_dir_check2_en;

			//#188
			di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = ORI_di_im_di_btr_control_reg.btr_blendtemporalrecoveryen;

			//#189
			di_hmc_statistic1_reg.ma_hmc_lineratio = ORI_di_hmc_statistic1_reg.ma_hmc_lineratio;
			di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = ORI_di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass;
			di_hmc_adjustable_reg.hmc_mv_refine_en = ORI_di_hmc_adjustable_reg.hmc_mv_refine_en;
			di_hmc_adjustable2_reg.hme_x_continued_counter = ORI_di_hmc_adjustable2_reg.hme_x_continued_counter;
			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}

			init_di_smd_additionalcoeff1_reg.smd_result_en = ori_smd_result_en;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;

			//#192
			dch1_cp_ctrl_reg.cp_sresultweight =ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_3 =ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4 =ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5 =ori_curve_mapping_w1_5;

			//VPAN case
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;



		}
		break;

		case VIP_QUALITY_CVBS_PAL:
		{
			if(!vd_pwr_ok)
				break;
			//************** INI VALE START    ***************************************************
			//#1
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#2
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
	            //di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha; // 20160202, willy, smooth the noisy line, removed by MissKim
	            //di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
	            //di_ma_frame_motion_th_c_reg.ma_framerlvthc = ORI_di_ma_frame_motion_th_c_reg.ma_framerlvthc;
	            //dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;

			//#7
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else	// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif

			//#12
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#23 #24

			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}
			init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;

			//#28
			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.regValue=ori_di_im_di_nintra_search_dir_limit.regValue;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;

			//#39
			di_control_reg.film_enable = ori_film_enable;
			di_control_reg.write_enable_5 =1;

			//#63
			di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			// di_im_new_mcnr_control.n_mcnr_offset ; don't set value in here, it control by mcnr

			//#75
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else	// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif
			di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th = ORI_di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th;

			//#107
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			smd_refinemv3_reg.smd_sfreq_diff_gain =4;
			smd_refinemv3_reg.smd_sfreq_diff_th =25;
			smd_refinemv3_reg.smd_sfreq_drop_th =80;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;
			smd_compensate_reg.smd_compensate_avg = ori_smd_compensate_reg.smd_compensate_avg;

			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xd2;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;

			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=gSmd_gain;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=gSmd_offset;
			//di_smd_dummy_reg.smd_partialweave =0;

			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			di_di_smd_slow_motion_handle1.smd_outofrange_content_new = ori_smd_outofrange_content_new;
			di_di_smd_slow_motion_handle2.gst_mv_limit = ori_gst_mv_limit;
			//di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;

			im_di_weave_window_control_reg.fixedwindow1 = ORI_im_di_weave_window_control_reg.fixedwindow1;
			im_di_weave_window_control_reg.fixedwindowmode = ORI_im_di_weave_window_control_reg.fixedwindowmode;
			im_di_weave_window_1_start_reg.regValue = ORI_im_di_weave_window_1_start_reg.regValue;
			im_di_weave_window_1_end_reg.regValue = ORI_im_di_weave_window_1_end_reg.regValue;

			di_hmc_statistic1_reg.regValue = ORI_di_hmc_statistic1_reg.regValue;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;
			FrameSobel_statistic_Reg.regValue = ORI_FrameSobel_statistic_Reg.regValue;
			di_hmc_adjustable_reg.regValue= ORI_di_hmc_adjustable_reg.regValue;
			di_hmc_adjustable2_reg.regValue= ORI_di_hmc_adjustable2_reg.regValue;
			di_hmc_adjustable3_reg.regValue= ORI_di_hmc_adjustable3_reg.regValue;
			di_hmc_adjustable4_reg.regValue= ORI_di_hmc_adjustable4_reg.regValue;




			//#139
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_c_reg.ma_framesthc = ORI_di_ma_frame_motion_th_c_reg.ma_framesthc;
			di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			dch1_cp_ctrl_reg.sresultweight_adjust_shift = ori_sresultweight_adjust_shift;
			dch1_cp_ctrl_reg.vc_snr_lpf_sel = ori_vc_snr_lpf_sel;
			curve_mapping_w1_2_reg.curvemapping_w1_6 = ori_curve_mapping_w1_6;
			curve_mapping_w1_2_reg.curvemapping_w1_7 = ori_curve_mapping_w1_7;
			curve_mapping_w1_3_reg.curvemapping_w1_8 = ori_curve_mapping_w1_8;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#151

			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb = ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;


			dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;
			di_im_di_nintra_control.nintra_intersection_check_en =ori_di_im_di_nintra_control.nintra_intersection_check_en;
			di_im_di_nintra_control.nintra_preline_dir_check2_en = ori_di_im_di_nintra_control.nintra_preline_dir_check2_en;

			//#188
			di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = ORI_di_im_di_btr_control_reg.btr_blendtemporalrecoveryen;

			//#189
			di_hmc_statistic1_reg.ma_hmc_lineratio = ORI_di_hmc_statistic1_reg.ma_hmc_lineratio;
			di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = ORI_di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass;
			di_hmc_adjustable_reg.hmc_mv_refine_en = ORI_di_hmc_adjustable_reg.hmc_mv_refine_en;
			di_hmc_adjustable2_reg.hme_x_continued_counter = ORI_di_hmc_adjustable2_reg.hme_x_continued_counter;
			init_di_smd_additionalcoeff1_reg.smd_result_en = ori_smd_result_en;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;

			//#192

			dch1_cp_ctrl_reg.cp_sresultweight =ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_3 =ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4 =ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5 =ori_curve_mapping_w1_5;

			//VPAN case
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[1] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if(DynamicOptimizeSystem[2] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
		                //di_ma_frame_motion_th_a_reg.ma_framerlvtha = 1; // 20160202, willy, smooth the noisy line, removed by MissKim
		                //di_ma_frame_motion_th_b_reg.ma_framerlvthb = 1;
		                //di_ma_frame_motion_th_c_reg.ma_framerlvthc = 1;
		                //dm_dir_uzu_conf_Reg.conf_lowbnd = 50;
			}
			else if(DynamicOptimizeSystem[7] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else	// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif

			}
			else if(DynamicOptimizeSystem[12] ==1)
			{
				//drvif_color_newrtnr_sad_th(1,&Motion_Th[0]);//for sad edge th setting
				//drvif_color_newrtnr_sad_th(0,&Motion_Th[0]);//for sad nonedge th setting
				drvif_color_rtnr_y_th_isr(_CHANNEL1,&Motion_Th[0]);

				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if((DynamicOptimizeSystem[23]==1)||(DynamicOptimizeSystem[24]==1))
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=0;
			}
			else if(DynamicOptimizeSystem[28] ==1)
			{
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 30;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=16;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=16;
			}
			else if(DynamicOptimizeSystem[28] == 2)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 255;
                		dm_dir_uzu_conf_Reg.conf_lowbnd = 30;
			}
			else if(DynamicOptimizeSystem[39] == 1)
			{
				di_control_reg.film_enable = 17;
				di_control_reg.write_enable_5=1;
			}
			else if(DynamicOptimizeSystem[63] ==1)
			{
				di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;

// chen 170522
	//			di_im_new_mcnr_control.n_mcnr_offset =0;
// end chen 170522

				// 20160106 jimmy, turn up RTNR C for cloth cross color
				drvif_color_rtnr_c_th_isr(_CHANNEL1,&Motion_Th_c[0]);

			}
			else if(DynamicOptimizeSystem[75] ==1)
			{
				drvif_color_rtnr_c_th_isr(_CHANNEL1,&Motion_Th_c_can[0]);
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else	// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif
				di_hmc_adjustable2_reg.hmc_mv_refine_mor_noise_th = 13; // special HMC setting for LG#75, jimmy 20151203
			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 170;//125; willy, 20151224
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 10;//0; willy, 20151224
				smd_refinemv3_reg.smd_sfreq_diff_gain =0;
				smd_refinemv3_reg.smd_sfreq_diff_th =0;
				smd_refinemv3_reg.smd_sfreq_drop_th =0;
				smd_compensate_reg.smd_compensate_teeth_th =5;
                		smd_compensate_reg.smd_compensate_avg = 148; // willy, 20151224

				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xff;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain = 6;//2; willy, 20151224
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;
				//di_smd_dummy_reg.smd_partialweave =3;

				di_hmc_adjustable_reg.hmc_mv_refine_mor_en = 1;
				di_hmc_adjustable_reg.hmc_mv_refine_y_th = 160;
				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 160;


				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 0;//3; willy, 20151224
				di_di_smd_slow_motion_handle1.smd_outofrange_content_new = 0;
				di_di_smd_slow_motion_handle2.gst_mv_limit = 1;
				//di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;



				di_hmc_statistic1_reg.ma_hmc_lineratio = 24;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 18;

				FrameSobel_statistic_Reg.regValue = 0xc51f4200;
				di_hmc_adjustable_reg.regValue= 0x8FFD0004;
				di_hmc_adjustable2_reg.regValue= 0x0732c014; // special HMC setting for LG#75 and LG#107, jimmy 20151203
				di_hmc_adjustable3_reg.regValue= 0x6819141e;
				di_hmc_adjustable4_reg.regValue= 0x850a0c0c;



		                // weave window to do intra
		                im_di_weave_window_control_reg.fixedwindow1 = 1;
		                im_di_weave_window_control_reg.fixedwindowmode = 0;
		                im_di_weave_window_1_start_reg.regValue = 0x00500033;
		                im_di_weave_window_1_end_reg.regValue = 0x00a700d3;

			}
			else if(DynamicOptimizeSystem[139] ==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 20;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 20;
				di_ma_frame_motion_th_c_reg.ma_framesthc = 20;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 20;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;

				dch1_cp_ctrl_reg.sresultweight_adjust_shift = 0;
				dch1_cp_ctrl_reg.vc_snr_lpf_sel = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_6 = 3;
				curve_mapping_w1_2_reg.curvemapping_w1_7 = 3;
				curve_mapping_w1_3_reg.curvemapping_w1_8 = 6;
				curve_mapping_step3_reg.curvemapping_step8=42;

			}
			else if(DynamicOptimizeSystem[147])
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
			}
			else if(DynamicOptimizeSystem[151])
			{

				di_ma_frame_motion_th_a_reg.ma_framestha = 50;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framemthb = 50;

				dm_dir_uzu_conf_Reg.conf_lowbnd = 63;
				di_im_di_nintra_control.nintra_intersection_check_en =0;
				di_im_di_nintra_control.nintra_preline_dir_check2_en = 0;
			}
			else if(DynamicOptimizeSystem[188])
			{
				di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = 0;
			}
			else if(DynamicOptimizeSystem[189])
			{
				di_hmc_statistic1_reg.ma_hmc_lineratio += 24;
				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = 0;
				di_hmc_adjustable_reg.hmc_mv_refine_en = 0;
				di_hmc_adjustable2_reg.hme_x_continued_counter = 0;

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en = 0;
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 12;

				rtd_outl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg, di_hmc_me_refine_ctrl2_reg.regValue);

			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_3 =8;
				curve_mapping_w1_2_reg.curvemapping_w1_4 =0;
				curve_mapping_w1_2_reg.curvemapping_w1_5 =0;
			}
			else if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_VPAN) >= 2)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;
			}


			//#1
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			//#2
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
            //rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue); // 20160202, willy, smooth the noisy line, removed by MissKim
			//rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			//rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);

			//#7

			//#23 #24
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

			//#28
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

            //#39
            //rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19

			//#63

			// protect di 3Abit,reduce r/w time .
			di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
			di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
			di_control_reg.write_enable_1=1;

			//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
			rtd_outl(DI_IM_DI_INTRA_TH_reg, intra_th_Reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_IM_NEW_MCNR_CONTROL_reg,di_im_new_mcnr_control.regValue);

			//#75
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);

			//#107

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_RefineMV3_reg, smd_refinemv3_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);
			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);
			//rtd_outl(DI_DI_SMD_dummy_reg, di_smd_dummy_reg.regValue);

			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle2_reg, di_di_smd_slow_motion_handle2.regValue);


			rtd_outl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, im_di_weave_window_control_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_START_reg, im_di_weave_window_1_start_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_END_reg, im_di_weave_window_1_end_reg.regValue);


			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
			rtd_outl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg,FrameSobel_statistic_Reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE3_reg, di_hmc_adjustable3_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE4_reg, di_hmc_adjustable4_reg.regValue);


			//#139
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_3_reg, curve_mapping_w1_3_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control

			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#151

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			rtd_outl(SCALEUP_DM_DIR_UZU_Conf_reg, dm_dir_uzu_conf_Reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);

			//#188
			rtd_outl(DI_IM_DI_BTR_CONTROL_reg, di_im_di_btr_control_reg.regValue);

			//#189
			rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);

			//#192
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);

			// VPAN
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

			// VD Setting related register control, created by willy, 20151114
			if( DynamicOptimizeSystem[2] == 1 )
			{
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_2);
				scalerVideo_ApplyVDSetting(VDPQ_PAL_DOS_2_TNR_XC);
			}

			if( DynamicOptimizeSystem[7] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_7);

			if( DynamicOptimizeSystem[11] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_11);

			if( DynamicOptimizeSystem[12] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_12);

			if( DynamicOptimizeSystem[28] != 0 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_28);

			if( DynamicOptimizeSystem[63] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_63);

			if( DynamicOptimizeSystem[107] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_107);

			if( DynamicOptimizeSystem[123] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_123);

			if( DynamicOptimizeSystem[134] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_134);

			if( DynamicOptimizeSystem[139] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_139);

			if( DynamicOptimizeSystem[189] == 1 )
				scalerVideo_ApplyVDSetting(VDPQ_PAL_VIP_DOS_LEAF_74);

		}
		break;

		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_YPbPr_480I:
		{

			//************** INI VALE START    ***************************************************
			//#1
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#2
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable = ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable =ori_gst_min_sad_compare_diable;

			//#7
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else	// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif

			//#12
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#23 #24

			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}
			init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;

			//#28
			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.regValue=ori_di_im_di_nintra_search_dir_limit.regValue;

			//#63
			di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;

			//#75
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else	// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif
			//#107
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			smd_refinemv3_reg.smd_sfreq_diff_gain =4;
			smd_refinemv3_reg.smd_sfreq_diff_th =25;
			smd_refinemv3_reg.smd_sfreq_drop_th =80;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;
			smd_compensate_reg.smd_compensate_avg = ori_smd_compensate_reg.smd_compensate_avg;

			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xd2;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=gSmd_gain;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=gSmd_offset;
			//di_smd_dummy_reg.smd_partialweave =0;

			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			di_di_smd_slow_motion_handle1.smd_outofrange_content_new = ori_smd_outofrange_content_new;
			di_di_smd_slow_motion_handle2.gst_mv_limit = ori_gst_mv_limit;
			//di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;

			di_hmc_statistic1_reg.regValue = ORI_di_hmc_statistic1_reg.regValue;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;
			FrameSobel_statistic_Reg.regValue = ORI_FrameSobel_statistic_Reg.regValue;
			di_hmc_adjustable_reg.regValue = ORI_di_hmc_adjustable_reg.regValue;
			di_hmc_adjustable2_reg.regValue= ORI_di_hmc_adjustable2_reg.regValue;
			di_hmc_adjustable3_reg.regValue= ORI_di_hmc_adjustable3_reg.regValue;
			di_hmc_adjustable4_reg.regValue= ORI_di_hmc_adjustable4_reg.regValue;




			//#139
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_c_reg.ma_framesthc = ORI_di_ma_frame_motion_th_c_reg.ma_framesthc;
			di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			dch1_cp_ctrl_reg.sresultweight_adjust_shift = ori_sresultweight_adjust_shift;
			dch1_cp_ctrl_reg.vc_snr_lpf_sel = ori_vc_snr_lpf_sel;
			curve_mapping_w1_2_reg.curvemapping_w1_6 = ori_curve_mapping_w1_6;
			curve_mapping_w1_2_reg.curvemapping_w1_7 = ori_curve_mapping_w1_7;
			//curve_mapping_w1_3_reg.curvemapping_w1_8 = ori_curve_mapping_w1_8;

			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#151

			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb = ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;

			dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;
			di_im_di_nintra_control.nintra_intersection_check_en =ori_di_im_di_nintra_control.nintra_intersection_check_en;
			di_im_di_nintra_control.nintra_preline_dir_check2_en = ori_di_im_di_nintra_control.nintra_preline_dir_check2_en;

			//#152
			di_hmc_adjustable_reg.hmc_mv_refine_en =ORI_di_hmc_adjustable_reg.hmc_mv_refine_en;
			di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en = ORI_di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en;

			//#192
			dch1_cp_ctrl_reg.cp_sresultweight = ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_2=ori_curve_mapping_w1_2;
			curve_mapping_w1_1_reg.curvemapping_w1_3=ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4=ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5=ori_curve_mapping_w1_5;
			curve_mapping_step2_reg.curvemapping_step6=ori_curve_mapping_step6;
			curve_mapping_step3_reg.curvemapping_step7=ori_curve_mapping_step7;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[1] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;
			}
			else if(DynamicOptimizeSystem[2] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable = 1;
				di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable =1;

			}
			else if(DynamicOptimizeSystem[7] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else	// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif

			}
			else if(DynamicOptimizeSystem[12] ==1)
			{
				//drvif_color_newrtnr_sad_th(1,&Motion_Th[0]);//for sad edge th setting
				//drvif_color_newrtnr_sad_th(0,&Motion_Th[0]);//for sad nonedge th setting
				drvif_color_rtnr_y_th_isr(_CHANNEL1,&Motion_Th[0]);



				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if((DynamicOptimizeSystem[23]==1)||(DynamicOptimizeSystem[24]==1))
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=0;

			}
			else if(DynamicOptimizeSystem[28] ==1)
			{
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 255;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=40;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=40;
			}
			else if(DynamicOptimizeSystem[63] ==1)
			{
				di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;
        			di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;

			}
			else if(DynamicOptimizeSystem[75] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else	// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif

			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=225;
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				smd_refinemv3_reg.smd_sfreq_diff_gain =0;
				smd_refinemv3_reg.smd_sfreq_diff_th =0;
				smd_refinemv3_reg.smd_sfreq_drop_th =0;
				smd_compensate_reg.smd_compensate_teeth_th =5;
				smd_compensate_reg.smd_compensate_avg = 152;

				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xff;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=6;
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;
				//di_smd_dummy_reg.smd_partialweave =3;

				di_hmc_adjustable_reg.hmc_mv_refine_mor_en = 1;
				di_hmc_adjustable_reg.hmc_mv_refine_y_th = 120;
				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 180;


				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;
				di_di_smd_slow_motion_handle1.smd_outofrange_content_new = 0;
				di_di_smd_slow_motion_handle2.gst_mv_limit = 1;
				//di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;

				di_hmc_statistic1_reg.ma_hmc_lineratio = 24;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 18;

				FrameSobel_statistic_Reg.regValue = 0xc51f4200;
				di_hmc_adjustable_reg.regValue= 0x8FFD0004;
				di_hmc_adjustable2_reg.regValue= 0x0732c014; // special HMC setting for LG#75 and LG#107, jimmy 20151203
				di_hmc_adjustable3_reg.regValue= 0x6819141e;
				di_hmc_adjustable4_reg.regValue= 0x850a0c0c;

				 //weave window --> fix intra on LG logo!
				if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION)<=4)
				{
					im_di_weave_window_control_reg.fixedwindow1 = 0;
					im_di_weave_window_control_reg.fixedwindowmode = 0;
				}
				else
				{
					im_di_weave_window_control_reg.fixedwindow1 = 1;
					im_di_weave_window_control_reg.fixedwindowmode = 3;
				}
				im_di_weave_window_1_start_reg.xstart_25_13 =74 ;
				im_di_weave_window_1_start_reg.ystart_25_13=194 ;
				im_di_weave_window_1_end_reg.xend_25_13 = 81;
				im_di_weave_window_1_end_reg.yend_25_13 =201 ;


			}
			else if(DynamicOptimizeSystem[139] ==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 7;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 20;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 20;
				di_ma_frame_motion_th_c_reg.ma_framesthc = 20;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 20;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;

				dch1_cp_ctrl_reg.sresultweight_adjust_shift = 0;
				dch1_cp_ctrl_reg.vc_snr_lpf_sel = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_6 = 3;
				curve_mapping_w1_2_reg.curvemapping_w1_7 = 3;
				//curve_mapping_w1_3_reg.curvemapping_w1_8 = 12;
				curve_mapping_step3_reg.curvemapping_step8=42;

			}
			else if(DynamicOptimizeSystem[147])
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
			}
			else if(DynamicOptimizeSystem[151])
			{

				di_ma_frame_motion_th_a_reg.ma_framestha = 50;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 70;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 70;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 70;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framemthb = 70;

				dm_dir_uzu_conf_Reg.conf_lowbnd = 63;
				di_im_di_nintra_control.nintra_intersection_check_en =0;
				di_im_di_nintra_control.nintra_preline_dir_check2_en = 0;
			}
			else if(DynamicOptimizeSystem[152]) //don't need reset value
			{
				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass = 0;
				di_im_di_hmc_pan_control_reg.pan_me_fw_control_motion_vector_det = 0;
				di_hmc_statistic1_reg.ma_hmc_lineratio =128;

				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio =12;

				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass =0;

				di_hmc_adjustable_reg.hmc_mv_refine_en =0;
				di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en = 0;

				// protect di 3Abit,reduce r/w time .
				di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
				di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
				di_control_reg.write_enable_1=1;
				//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
				rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_reg, di_im_di_hmc_pan_control_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);

				rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg,di_hmc_me_refine_ctrl2_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg,di_hmc_adjustable_reg.regValue);

			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_2=8;
				curve_mapping_w1_1_reg.curvemapping_w1_3=0;
				curve_mapping_w1_2_reg.curvemapping_w1_4=0;
				curve_mapping_w1_2_reg.curvemapping_w1_5=0;
				curve_mapping_step2_reg.curvemapping_step6=14;
				curve_mapping_step3_reg.curvemapping_step7=30;
				curve_mapping_step3_reg.curvemapping_step8=62;
			}


			//#1

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			//#2
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg,di_di_smd_slow_motion_handle1.regValue);

			//#7
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#23 #24

			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);


			//#28
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);

			//#63
			// protect di 3Abit,reduce r/w time .
			di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
			di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
			di_control_reg.write_enable_1=1;
			//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
			rtd_outl(DI_IM_DI_INTRA_TH_reg, intra_th_Reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);

			//#75
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#107

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_RefineMV3_reg, smd_refinemv3_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);
			//rtd_outl(DI_DI_SMD_dummy_reg, di_smd_dummy_reg.regValue);

			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle2_reg, di_di_smd_slow_motion_handle2.regValue);

			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
			rtd_outl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg,FrameSobel_statistic_Reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE3_reg, di_hmc_adjustable3_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE4_reg, di_hmc_adjustable4_reg.regValue);

			rtd_outl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, im_di_weave_window_control_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_START_reg, im_di_weave_window_1_start_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_END_reg, im_di_weave_window_1_end_reg.regValue);

			//#139
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_3_reg, curve_mapping_w1_3_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control


			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#151
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			rtd_outl(SCALEUP_DM_DIR_UZU_Conf_reg, dm_dir_uzu_conf_Reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);

			//#152
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);

			//#192
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_2_reg, curve_mapping_step2_reg.regValue);	//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);

		}
		break;
		case VIP_QUALITY_HDMI_576I:
		case VIP_QUALITY_YPbPr_576I:
		{
			//************** INI VALE START    ***************************************************

			//#1
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#2
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable = ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable =ori_gst_min_sad_compare_diable;

			//#7
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else	// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;

#endif

			//#12
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;

			//#23 #24

			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}
			init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;

			//#28
			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.regValue=ori_di_im_di_nintra_search_dir_limit.regValue;

			//#63
			di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;

			//#75
#if 0
			di_pan_dummy2_reg.panConti_str = ORI_di_pan_dummy2_reg.panConti_str;
			di_pan_dummy3_reg.panDeb_str = ORI_di_pan_dummy3_reg.panDeb_str;
//#else // henry Merlin3 temp
			di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | panConti_str;
			di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | panDeb_str;
#else	// merlin4 henry
			g_panConti_str = ori_panConti_str;
			g_panDeb_str = ori_panDeb_str;
#endif

			//#107
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ori_smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;
			smd_refinemv3_reg.smd_sfreq_diff_gain =4;
			smd_refinemv3_reg.smd_sfreq_diff_th =25;
			smd_refinemv3_reg.smd_sfreq_drop_th =80;
			smd_compensate_reg.smd_compensate_teeth_th =ori_smd_compensate_reg.smd_compensate_teeth_th;
			smd_compensate_reg.smd_compensate_avg = ori_smd_compensate_reg.smd_compensate_avg;

			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xd2;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;

			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=gSmd_gain;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=gSmd_offset;
			//di_smd_dummy_reg.smd_partialweave =0;

			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			di_di_smd_slow_motion_handle1.smd_outofrange_content_new = ori_smd_outofrange_content_new;
			di_di_smd_slow_motion_handle2.gst_mv_limit = ori_gst_mv_limit;
			//di_di_smd_slow_motion_handle1.smd_acc_smd_en =ori_smd_acc_smd_en;
			//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=ori_smd_spatialfreqnomatch_off;

			di_hmc_statistic1_reg.regValue = ORI_di_hmc_statistic1_reg.regValue;
			di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = ORI_di_hmc_pan_control_par_1_reg.hme_sum_max_ratio;
			FrameSobel_statistic_Reg.regValue = ORI_FrameSobel_statistic_Reg.regValue;
			di_hmc_adjustable_reg.regValue = ORI_di_hmc_adjustable_reg.regValue;
			di_hmc_adjustable2_reg.regValue= ORI_di_hmc_adjustable2_reg.regValue;
			di_hmc_adjustable3_reg.regValue= ORI_di_hmc_adjustable3_reg.regValue;
			di_hmc_adjustable4_reg.regValue= ORI_di_hmc_adjustable4_reg.regValue;



			//#139
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_c_reg.ma_framesthc = ORI_di_ma_frame_motion_th_c_reg.ma_framesthc;
			di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;

			dch1_cp_ctrl_reg.sresultweight_adjust_shift = ori_sresultweight_adjust_shift;
			dch1_cp_ctrl_reg.vc_snr_lpf_sel = ori_vc_snr_lpf_sel;
			curve_mapping_w1_2_reg.curvemapping_w1_6 = ori_curve_mapping_w1_6;
			curve_mapping_w1_2_reg.curvemapping_w1_7 = ori_curve_mapping_w1_7;
			curve_mapping_w1_3_reg.curvemapping_w1_8 = ori_curve_mapping_w1_8;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;


			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#151
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb = ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;

			dm_dir_uzu_conf_Reg.conf_lowbnd = ori_conf_lowbnd;
			di_im_di_nintra_control.nintra_intersection_check_en =ori_di_im_di_nintra_control.nintra_intersection_check_en;
			di_im_di_nintra_control.nintra_preline_dir_check2_en = ori_di_im_di_nintra_control.nintra_preline_dir_check2_en;

			//#152
			di_hmc_adjustable_reg.hmc_mv_refine_en =ORI_di_hmc_adjustable_reg.hmc_mv_refine_en;
			di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en = ORI_di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en;

			//#192
			dch1_cp_ctrl_reg.cp_sresultweight = ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_2=ori_curve_mapping_w1_2;
			curve_mapping_w1_1_reg.curvemapping_w1_3=ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4=ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5=ori_curve_mapping_w1_5;
			curve_mapping_step2_reg.curvemapping_step6=ori_curve_mapping_step6;
			curve_mapping_step3_reg.curvemapping_step7=ori_curve_mapping_step7;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[1] ==1)
			{
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;
			}
			else if(DynamicOptimizeSystem[2] ==1)
			{
				di_di_smd_slow_motion_handle1.gst_gst_static_disable = 1;
				di_di_smd_slow_motion_handle1.gst_min_sad_compare_diable =1;
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 30;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=16;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=16;


			}
			else if(DynamicOptimizeSystem[7] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else	// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif
			}
			else if(DynamicOptimizeSystem[12] ==1)
			{
				//drvif_color_newrtnr_sad_th(1,&Motion_Th[0]);//for sad edge th setting
				//drvif_color_newrtnr_sad_th(0,&Motion_Th[0]);//for sad nonedge th setting
				drvif_color_rtnr_y_th_isr(_CHANNEL1,&Motion_Th[0]);

				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 200;
				smd_compensate_reg.smd_compensate_teeth_th =200;

			}
			else if((DynamicOptimizeSystem[23]==1)||(DynamicOptimizeSystem[24]==1))
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=0;

			}
			else if(DynamicOptimizeSystem[28] ==1)
			{
				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 30;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=16;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th2=16;
			}
			else if(DynamicOptimizeSystem[63] ==1)
			{
				di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;
        			di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;

			}
			else if(DynamicOptimizeSystem[75] ==1)
			{
#if 0
				di_pan_dummy2_reg.panConti_str = 12;
				di_pan_dummy3_reg.panDeb_str = 80;
//#else // henry Merlin3 temp
				di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 = di_im_di_rtnr_refined_ctrl2_reg.dummy180242ac_31_17 | 12;
				di_di_smd_dummy_reg.dummy18024540_31_2 = di_di_smd_dummy_reg.dummy18024540_31_2 | 80;
#else	// merlin4 henry
				g_panConti_str = 12;
				g_panDeb_str = 80;
#endif
			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=125;
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 0;
				smd_refinemv3_reg.smd_sfreq_diff_gain =0;
				smd_refinemv3_reg.smd_sfreq_diff_th =0;
				smd_refinemv3_reg.smd_sfreq_drop_th =0;
				smd_compensate_reg.smd_compensate_teeth_th =5;
				smd_compensate_reg.smd_compensate_avg = 152;

				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_max=0xff;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=2;
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;
				//di_smd_dummy_reg.smd_partialweave =3;

				di_hmc_adjustable_reg.hmc_mv_refine_mor_en = 1;
				di_hmc_adjustable_reg.hmc_mv_refine_y_th = 120;
				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 180;


				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 0;
				di_di_smd_slow_motion_handle1.smd_outofrange_content_new=0;
				di_di_smd_slow_motion_handle2.gst_mv_limit = 1;
				//di_di_smd_slow_motion_handle1.smd_acc_smd_en =1;
				//di_di_smd_slow_motion_handle1.smd_spatialfreqnomatch_off=1;

				di_hmc_statistic1_reg.ma_hmc_lineratio = 24;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);
				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio = 18;

				FrameSobel_statistic_Reg.regValue = 0xc51f4200;
				di_hmc_adjustable_reg.regValue= 0x8FFD0004;
				di_hmc_adjustable2_reg.regValue= 0x0732c014; // special HMC setting for LG#75 and LG#107, jimmy 20151203
				di_hmc_adjustable3_reg.regValue= 0x6819141e;
				di_hmc_adjustable4_reg.regValue= 0x850a0c0c;

			}
			else if(DynamicOptimizeSystem[139] ==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 20;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 20;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 20;
				di_ma_frame_motion_th_c_reg.ma_framesthc = 20;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 20;
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv = 0;

				dch1_cp_ctrl_reg.sresultweight_adjust_shift = 0;
				dch1_cp_ctrl_reg.vc_snr_lpf_sel = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_6 = 0;
				curve_mapping_w1_2_reg.curvemapping_w1_7 = 0;
				curve_mapping_w1_3_reg.curvemapping_w1_8 = 7;
				curve_mapping_step3_reg.curvemapping_step8=42;

			}
			else if(DynamicOptimizeSystem[147])
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
			}
			else if(DynamicOptimizeSystem[151])
			{

				di_ma_frame_motion_th_a_reg.ma_framestha = 50;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha = 50;
				di_ma_frame_motion_th_a_reg.ma_framemtha = 50;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb = 50;
				di_ma_frame_motion_th_b_reg.ma_framemthb = 50;

				dm_dir_uzu_conf_Reg.conf_lowbnd = 63;
				di_im_di_nintra_control.nintra_intersection_check_en =0;
				di_im_di_nintra_control.nintra_preline_dir_check2_en = 0;
			}
			else if(DynamicOptimizeSystem[152]) //don't need reset value
			{
				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass =1;
				di_im_di_hmc_pan_control_reg.pan_me_fw_control_motion_vector_det = 0;
				di_hmc_statistic1_reg.ma_hmc_lineratio =128;

				di_hmc_pan_control_par_1_reg.hme_sum_max_ratio =12;

				di_hmc_me_refine_ctrl2_reg.hmc_fw_ctrl_bypass =0;

				di_hmc_adjustable_reg.hmc_mv_refine_en =0;
				di_hmc_adjustable_reg.mc_dynamic_threshold_clip_en = 0;


				// protect di 3Abit,reduce r/w time .
				di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
				di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
				di_control_reg.write_enable_1=1;
				//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
				rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_reg, di_im_di_hmc_pan_control_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);

				rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_ME_REFINE_CTRL_2_reg,di_hmc_me_refine_ctrl2_reg.regValue);
				rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg,di_hmc_adjustable_reg.regValue);

			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_2=8;
				curve_mapping_w1_1_reg.curvemapping_w1_3=0;
				curve_mapping_w1_2_reg.curvemapping_w1_4=0;
				curve_mapping_w1_2_reg.curvemapping_w1_5=0;
				curve_mapping_step2_reg.curvemapping_step6=14;
				curve_mapping_step3_reg.curvemapping_step7=30;
				curve_mapping_step3_reg.curvemapping_step8=62;
			}


			//#1

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			//#2
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg,di_di_smd_slow_motion_handle1.regValue);

			//#7
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#12
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);


			//#23 #24

			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);


			//#28
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);

			//#63
			// protect di 3Abit,reduce r/w time .
			di_control_reg_Prtoect_3AEnable.regValue= rtd_inl(DI_IM_DI_CONTROL_reg);
			di_control_reg.ma_3aenable = di_control_reg_Prtoect_3AEnable.ma_3aenable;
			di_control_reg.write_enable_1=1;
			//rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);//rord.tsao mark don't change di seeting avoid 3a/5a setting error 2016/02/19
			rtd_outl(DI_IM_DI_INTRA_TH_reg, intra_th_Reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);

			//#75
#if 0
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_2_reg, di_pan_dummy2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_DUMMY_3_reg, di_pan_dummy3_reg.regValue);
//#else // henry Merlin3 temp
			rtd_outl(DI_IM_DI_RTNR_REFINED_CTRL2_reg, di_im_di_rtnr_refined_ctrl2_reg.regValue);
			rtd_outl(DI_DI_SMD_dummy_reg, di_di_smd_dummy_reg.regValue);
#endif
			//#107

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_RefineMV3_reg, smd_refinemv3_reg.regValue);
			rtd_outl(DI_DI_SMD_Compensate_reg, smd_compensate_reg.regValue);

			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);
			//rtd_outl(DI_DI_SMD_dummy_reg, di_smd_dummy_reg.regValue);

			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_Slow_Motion_handle2_reg, di_di_smd_slow_motion_handle2.regValue);

			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_1_reg,di_hmc_pan_control_par_1_reg.regValue);
			rtd_outl(DI_IM_DI_FRAMESOBEL_STATISTIC_reg,FrameSobel_statistic_Reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE2_reg, di_hmc_adjustable2_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE3_reg, di_hmc_adjustable3_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE4_reg, di_hmc_adjustable4_reg.regValue);

			//#139
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_3_reg, curve_mapping_w1_3_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control

			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#151

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			rtd_outl(SCALEUP_DM_DIR_UZU_Conf_reg, dm_dir_uzu_conf_Reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);
			//#152
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);

			//#192
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_3_reg, curve_mapping_w1_3_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_2_reg, curve_mapping_step2_reg.regValue);	//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control

		}
		break;
		case VIP_QUALITY_HDMI_1080I:
		case VIP_QUALITY_YPbPr_1080I:
		{
			//************** INI VALE START    ***************************************************

			//#14
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = gSmd_weak_move;

			//#23,#24,#39
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;;

			//#107

			di_hmc_adjustable_reg.hmc_mv_refine_y_th = ORI_di_hmc_adjustable_reg.hmc_mv_refine_y_th;
			di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = ori_hmc_sub_pixel_diff_thd;

			di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = ORI_di_im_di_btr_control_reg.btr_blendtemporalrecoveryen;

			init_di_gst_ctrl_reg.regValue = ORI_init_di_gst_ctrl_reg.regValue;
			init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x40;
			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=125;
			smd_choosecandidate_reg.smd_reliablerange_sad_th = 50;
			di_smd_refinemv2_reg.regValue = ori_di_smd_refinemv2_reg.regValue;

			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=2;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;

			di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =ori_gst_min_sad_nolimit_en;
			di_di_smd_slow_motion_handle1.gst_gst_static_disable =ori_gst_gst_static_disable;
			di_di_smd_slow_motion_handle1.smd_weave_dynamic = ori_smd_weave_dynamic;
			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}

			init_di_smd_additionalcoeff1_reg.smd_result_en = ori_smd_result_en;

			im_di_weave_window_control_reg.fixedwindow1 = ORI_im_di_weave_window_control_reg.fixedwindow1;
			im_di_weave_window_1_start_reg.xstart_25_13 =ORI_im_di_weave_window_1_start_reg.xstart_25_13;
			im_di_weave_window_1_start_reg.ystart_25_13=ORI_im_di_weave_window_1_start_reg.ystart_25_13;
			im_di_weave_window_1_end_reg.xend_25_13 = ORI_im_di_weave_window_1_end_reg.xend_25_13;
			im_di_weave_window_1_end_reg.yend_25_13 =ORI_im_di_weave_window_1_end_reg.yend_25_13;

			im_di_weave_window_control_reg.fixedwindow1 = 0;
			im_di_weave_window_1_start_reg.xstart_25_13 =0;
			im_di_weave_window_1_start_reg.ystart_25_13=0;
			im_di_weave_window_1_end_reg.xend_25_13 = 0;
			im_di_weave_window_1_end_reg.yend_25_13 =0;

			di_ma_frame_motion_th_a_reg.regValue = ORI_di_ma_frame_motion_th_a_reg.regValue;
			di_ma_frame_motion_th_b_reg.regValue = ORI_di_ma_frame_motion_th_b_reg.regValue;
			di_ma_frame_motion_th_c_reg.regValue = ORI_di_ma_frame_motion_th_c_reg.regValue;


			//#176

			im_di_film_sawtooth_filmframe_th_reg.regValue =ORI_im_di_film_sawtooth_filmframe_th_reg.regValue;
			film_static_sum_th_reg.regValue= ORI_film_static_sum_th_reg.regValue;
			film_motion_sum_th_reg.regValue= ORI_film_motion_sum_th_reg.regValue;



			//#178

			di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=ORI_di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv;
			smd_choosecandidate_reg.smd_reliablerange_sad_th=gSmd_weak_move;
			di_di_smd_resurrect_ctrl.smd_mv_not_gmv_resurrect_en=ori_di_di_smd_resurrect_ctrl.smd_mv_not_gmv_resurrect_en;
			di_di_smd_resurrect_ctrl.smd_resurrect_noacc_en=ori_di_di_smd_resurrect_ctrl.smd_resurrect_noacc_en;
			//di_di_smd_sampling_gmvc.smd_close2gmv_fw_en=ori_smd_close2gmv_fw_en;
			if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
			{
				di_double_buff_apply =1;
			}
			init_di_smd_additionalcoeff1_reg.smd_result_en = ori_smd_result_en;


			//#182

			//#187
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha =ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framemtha = ORI_di_ma_frame_motion_th_a_reg.ma_framemtha;

			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;
			di_ma_frame_motion_th_b_reg.ma_framemthb= ORI_di_ma_frame_motion_th_b_reg.ma_framemthb;

			//#197
			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;

			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;

			//#198

			di_ma_frame_motion_th_a_reg.ma_framestha = ORI_di_ma_frame_motion_th_a_reg.ma_framestha;
			di_ma_frame_motion_th_a_reg.ma_framerlvtha = ORI_di_ma_frame_motion_th_a_reg.ma_framerlvtha;
			di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;

			di_ma_frame_motion_th_b_reg.ma_framesthb = ORI_di_ma_frame_motion_th_b_reg.ma_framesthb;
			di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
			di_ma_frame_motion_th_b_reg.ma_framerlvthb = ORI_di_ma_frame_motion_th_b_reg.ma_framerlvthb;

			di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = ori_nintra_lp_src_yclamp_th;
			di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=ori_di_im_di_nintra_search_dir_limit.nintra_hdiff_th1;
			di_im_di_nintra_control.regValue=ori_di_im_di_nintra_control.regValue;

			// Skyworth decontour patterns
			decontour_ctrl_reg.decont_filter_mode = ORI_decontour_ctrl_reg.decont_filter_mode;
			decontour_ctrl_reg.decont_blend_lowbd = ORI_decontour_ctrl_reg.decont_blend_lowbd;
			decontour_ctrl_reg.decont_blend_step = ORI_decontour_ctrl_reg.decont_blend_step;
			decontour_ctrl_reg.decont_neighbor_far = ORI_decontour_ctrl_reg.decont_neighbor_far;
			ipq_decontour_de_contour_contrast_reg.decont_contrast_th_y=ORI_ipq_decontour_de_contour_contrast_reg.decont_contrast_th_y;
			decontour_neighbor_diff_reg.decont_neighbor_diff_th_y = ORI_decontour_neighbor_diff_reg.decont_neighbor_diff_th_y;
			decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = ORI_decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y;
			decontour_threshold_reg.decont_dark_th = ORI_decontour_threshold_reg.decont_dark_th;
#ifdef VPQ_COMPILER_ERROR_ENABLE
                        decontour_threshold_reg.decont_gradation_th_y = ORI_decontour_threshold_reg.decont_gradation_th_y;
			decontour_diff_th_reg.decont_blend_lv1_gain = ORI_decontour_diff_th_reg.decont_blend_lv1_gain;
#endif
			decontour_diff_th_reg.decont_maxmindiff_th_y = ORI_decontour_diff_th_reg.decont_maxmindiff_th_y;
			decontour_diff_th_reg.decont_maxmindiff_th_c = ORI_decontour_diff_th_reg.decont_maxmindiff_th_c;


			//#Spears & Munsil ADVANCED VUDEO - EVALUATION - Chroma Zone Plate
			color_temp_ctrl_reg.regValue = ORI_color_temp_ctrl_reg.regValue;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[14]==1)
			{
				di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:1;
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 200;
			}
			else if(DynamicOptimizeSystem[23]==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha =0x02;
				di_smd_control_candiate_reg.smd_en=0;

			}
			else if(DynamicOptimizeSystem[24]==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha =0x02;
				di_smd_control_candiate_reg.smd_en=0;


			}
			else if(DynamicOptimizeSystem[39]==1)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha =0x02;
				di_smd_control_candiate_reg.smd_en=0;


			}
			else if(DynamicOptimizeSystem[107]==1)
			{
				init_di_gst_ctrl_reg.gst_fmv2weave_p =15;
				init_di_gst_ctrl_reg.gst_fmv2weave_n =15;
				init_di_smd_candidatelimitsad_reg.smd_gmv_sad_th=0x7f;

				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=40;
				smd_choosecandidate_reg.smd_reliablerange_sad_th = 120;

				init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=7;
				init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;

				di_smd_refinemv2_reg.smd_mvs_hchanged_en =1;
				di_smd_refinemv2_reg.smd_mvs_vchanged_en =1;

				di_di_smd_slow_motion_handle1.gst_min_sad_nolimit_en =1;
				di_di_smd_slow_motion_handle1.gst_gst_static_disable =1;
				di_di_smd_slow_motion_handle1.smd_weave_dynamic = 3;
				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=1)
				{
					di_double_buff_apply =1;
				}

				init_di_smd_additionalcoeff1_reg.smd_result_en =1;

				di_hmc_adjustable_reg.hmc_mv_refine_y_th = 150;
				di_hmc_pan_control_par_2_reg.hmc_sub_pixel_diff_thd = 150;
				di_im_di_btr_control_reg.btr_blendtemporalrecoveryen = 0;
				di_hmc_statistic1_reg.ma_hmc_lineratio =di_hmc_statistic1_reg.ma_hmc_lineratio+12;
				if(di_hmc_statistic1_reg.ma_hmc_lineratio>12)
					di_hmc_statistic1_reg.ma_hmc_lineratio=12;
				rtd_outl(DI_IM_DI_HMC_STATISTIC1_reg, di_hmc_statistic1_reg.regValue);

			 //weave window --> fix intra on LG logo!
				if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION)<=3)
				{
					im_di_weave_window_control_reg.fixedwindow1 = 0;
					im_di_weave_window_control_reg.fixedwindowmode = 0;
				}
				else
				{
				im_di_weave_window_control_reg.fixedwindow1 = 1;
					im_di_weave_window_control_reg.fixedwindowmode = 3;
				}
				im_di_weave_window_1_start_reg.xstart_25_13 =140 ;
				im_di_weave_window_1_start_reg.ystart_25_13=431 ;
				im_di_weave_window_1_end_reg.xend_25_13 = 250;
				im_di_weave_window_1_end_reg.yend_25_13 =493 ;

			}
			else if(DynamicOptimizeSystem[176] ==1) // hqv flower 22 film
			{
				im_di_film_sawtooth_filmframe_th_reg.film22_sawtooththl=10;
				im_di_film_sawtooth_filmframe_th_reg.film_sawtooththl =10;
				im_di_film_sawtooth_filmframe_th_reg.film_frmotionthl =10;
				film_static_sum_th_reg.film22_fistaticsthl =10;
				film_motion_sum_th_reg.film22_fieldmotionsumthl =10;
				film_motion_sum_th_reg.film22_debounce_fieldnum =1;

			}
			else if( (DynamicOptimizeSystem[182]==1) || (DynamicOptimizeSystem[183]==1) || (DynamicOptimizeSystem[184]==1) || (DynamicOptimizeSystem[185]==1) || (DynamicOptimizeSystem[186]==1) )
			{
	 			ich1_MPEGNR2_reg.regValue = rtd_inl(MPEGNR_ICH1_MPEGNR2_reg);
				ich1_MPEGNR2_reg.cp_mpegenable_x=0;
				scaler_rtd_outl(MPEGNR_ICH1_MPEGNR2_reg, ich1_MPEGNR2_reg.regValue);
 			}
			else if(DynamicOptimizeSystem[187] ==1) // qtec Makilo file #59
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 30;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 30;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha =30;
				di_ma_frame_motion_th_a_reg.ma_framemtha=30;

				di_ma_frame_motion_th_b_reg.ma_framesthb = 30;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 30;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb =30;
				di_ma_frame_motion_th_b_reg.ma_framemthb=30;

 			}
#if 0		// Qtec build vertical line dot noise issue. (pattern in/out dot noise)
			else if(DynamicOptimizeSystem[197] ==1) //qtec build (streets)
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 20;
				di_ma_frame_motion_th_b_reg.ma_framesthb = 20;

				di_ma_frame_motion_th_a_reg.ma_framehtha = 30;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 30;
 			}
#endif
			else if(DynamicOptimizeSystem[198] ==1) //qtec building
			{
				di_ma_frame_motion_th_a_reg.ma_framestha = 1;
				di_ma_frame_motion_th_a_reg.ma_framerlvtha =1;
				di_ma_frame_motion_th_a_reg.ma_framehtha = 1;

				di_ma_frame_motion_th_b_reg.ma_framesthb = 1;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 1;
				di_ma_frame_motion_th_b_reg.ma_framerlvthb =1;

				di_im_di_nintra_lowpass_source.nintra_lp_src_yclamp_th = 0;
				di_im_di_nintra_search_dir_limit.nintra_hdiff_th1=3;
				di_im_di_nintra_control.nintra_min_second_dir_check2_en=0;
				di_im_di_nintra_control.nintra_min_second_dir_check_en =0;

 			}
			else if(SandM_Chroma_Zone_Plate == 1)
			{
				color_temp_ctrl_reg.temporal_enable = 0;
			}


			di_im_new_mcnr_pan_condition.regValue = rtd_inl(DI_IM_NEW_MCNR_PAN_CONDITION_reg);
			di_im_new_mcnr_control4.regValue = rtd_inl(DI_IM_NEW_MCNR_CONTROL4_reg);

			/*if(scalerVIP_DI_MiddleWare_MCNR_Get_V_Pan_Flag()==1&&sat_ratio_mean_value<50) //tokoy night street
			{
				di_smd_control_candiate_reg.smd_upperbound_sad_forjudgemv=170;
				smd_choosecandidate_reg.smd_reliablerange_sad_th=0;
				di_di_smd_resurrect_ctrl.smd_mv_not_gmv_resurrect_en=1;
				di_di_smd_resurrect_ctrl.smd_resurrect_noacc_en=1;
				di_di_smd_sampling_gmvc.smd_close2gmv_fw_en=1;
				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=1)
				{
					di_double_buff_apply =1;
				}

				init_di_smd_additionalcoeff1_reg.smd_result_en=1;
				di_di_smd_waterflag_ctr3.smd_fw_gmvy= 5;//-(di_im_new_mcnr_control4.n_mcnr_v_pan_mv-6)+3;
				di_di_smd_hardwarepan_modify1.smd_fw_gmvx=-(di_im_new_mcnr_pan_condition.h_pan_mv_value-15)+3;
			}
			else
			{

				if(init_di_smd_additionalcoeff1_reg.smd_result_en!=ori_smd_result_en)
				{
					di_double_buff_apply =1;
				}
				init_di_smd_additionalcoeff1_reg.smd_result_en=ori_smd_result_en;
			}*/
			if( Skyworth_Decont_Pattern==1 ) //Skyworth decontour patterns
			{
				decontour_ctrl_reg.decont_filter_mode = 1;
				//decontour_ctrl_reg.decont_neighbor_far = 1;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th_y = 1;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = 4;
				decontour_threshold_reg.decont_dark_th = 0;
				decontour_threshold_reg.decont_gradation_th_y = 10;
				decontour_diff_th_reg.decont_maxmindiff_th_y = 25;

				decontour_double_buff_apply = 1;
			}
			else
			{
					decontour_double_buff_apply = 1;
			}
			if( Skyworth_Decont_BMPPattern==1 ) //Skyworth decontour patterns
			{
				decontour_ctrl_reg.decont_blend_lowbd= 30;
				decontour_ctrl_reg.decont_blend_step = 1 ;
				ipq_decontour_de_contour_contrast_reg.decont_contrast_th_y = 200;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th_y = 2;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = 5;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th2_c = 5;
				decontour_threshold_reg.decont_gradation_th_y = 10;
				decontour_threshold_reg.decont_gradation_th_c = 12;
#ifdef VPQ_COMPILER_ERROR_ENABLE

				decontour_diff_th_reg.decont_blend_lv1_gain= 5;
#endif
				decontour_diff_th_reg.decont_maxmindiff_th_y= 25;
				decontour_diff_th_reg.decont_maxmindiff_th_c= 25;

				decontour_double_buff_apply = 1;
			}
			else
			{
				decontour_neighbor_diff_reg.decont_neighbor_diff_th2_c = 4;
				decontour_threshold_reg.decont_gradation_th_c = 10;
				decontour_double_buff_apply = 1;
			}
			if( Skyworth_decont_GRAYpattern==1 ) //Skyworth decontour gray patterns
			{
				decontour_threshold_reg.decont_gradation_th_y = 4;
				decontour_diff_th_reg.decont_maxmindiff_th_y= 7;
				decontour_double_buff_apply = 1;
			}
			else
			{
				decontour_threshold_reg.decont_gradation_th_y = 8;
				decontour_diff_th_reg.decont_maxmindiff_th_y= 14;
					decontour_double_buff_apply = 1;
			}
			if(Skyworth_Film_Pattern)
			{
				im_di_si_film_final_result_reg.regValue |= 1 << 13 ;
				m_LockValue =1;
				rtd_outl(DI_IM_DI_SI_FILM_FINAL_RESULT_reg, im_di_si_film_final_result_reg.regValue);
			}
			else if(m_LockValue)
			{
				m_LockValue=0;
				im_di_si_film_final_result_reg.regValue&= ~(1 << 13) ;
				rtd_outl(DI_IM_DI_SI_FILM_FINAL_RESULT_reg, im_di_si_film_final_result_reg.regValue);
			}
			if(Skyworth_Speach_Man_Pattern==1)
			{
				drvif_color_rtnr_y_th_isr(_CHANNEL1,&Motion_Th_speach_man[0]);

			}

			di_im_new_mcnr_clamping_value.regValue = rtd_inl(DI_IM_NEW_MCNR_CLAMPING_VALUE_reg);
			if(Skyworth_Barrels_Pattern==1)
			{
				di_im_new_mcnr_clamping_value.mcnr_weight_clamp_upth = 10;

			}
			else
			{
				di_im_new_mcnr_clamping_value.mcnr_weight_clamp_upth = 16;

			}

			/* for  other test pattern */
			if(Sony_test_pattern[0]==1)
			{
				di_hmc_adjustable_reg.hmc_mv_refine_en = 0;

			}
			else
			{
				di_hmc_adjustable_reg.hmc_mv_refine_en =1;

			}

			rtd_outl(DI_IM_NEW_MCNR_CLAMPING_VALUE_reg,di_im_new_mcnr_clamping_value.regValue);

			//ROSPrintf("\n sssss %d \n ",scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE));
			//#14
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);

			//#23
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);


			//#24
			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);

			//ROSPrintf("\n ddd %d \n",im_di_weave_window_control_reg.regValue);
			//#107
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg, im_di_weave_window_control_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_START_reg, im_di_weave_window_1_start_reg.regValue);
			rtd_outl(DI_IM_DI_WEAVE_WINDOW_1_END_reg, im_di_weave_window_1_end_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);
			rtd_outl(DI_IM_DI_HMC_PAN_CONTROL_PAR_2_reg, di_hmc_pan_control_par_2_reg.regValue);

			rtd_outl(DI_DI_GST_Ctrl_reg,init_di_gst_ctrl_reg.regValue);
			rtd_outl(DI_DI_SMD_CandidateLimitSAD_reg, init_di_smd_candidatelimitsad_reg.regValue);

			rtd_outl(MEMC_MUX_MEMC_MUX_DI_CTRL_reg, color_temp_ctrl_reg.regValue);

			rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg, init_di_smd_additionalcoeff2_reg.regValue);

			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);

			rtd_outl(DI_DI_SMD_Slow_Motion_handle1_reg, di_di_smd_slow_motion_handle1.regValue);
			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);
			//rtd_outl(DI_DI_SMD_SLOW_MOTION_HANDLE2_reg, di_di_smd_slow_motion_handle2.regValue);

			rtd_outl(DI_DI_SMD_RefineMV2_reg, di_smd_refinemv2_reg.regValue);




			rtd_outl(DI_IM_DI_BTR_CONTROL_reg, di_im_di_btr_control_reg.regValue);

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);


			//#173
			film_mask_detection_reg.regValue = rtd_inl(DI_IM_DI_FILM_MASK_DETECTION_reg);

			if(DynamicOptimizeSystem[173]==1)
			{
				film_mask_detection_reg.film_mask_en = 0;
			}
			else
			{
				film_mask_detection_reg.film_mask_en = 1;
			}

			rtd_outl(DI_IM_DI_FILM_MASK_DETECTION_reg, film_mask_detection_reg.regValue);





			//#176


			rtd_outl(DI_IM_DI_FILM_SAWTOOTH_FILMFRAME_TH_reg, im_di_film_sawtooth_filmframe_th_reg.regValue);
			rtd_outl(DI_IM_DI_FILM_STATIC_SUM_TH_reg, film_static_sum_th_reg.regValue);
			rtd_outl(DI_IM_DI_FILM_MOTION_SUM_TH_reg, film_motion_sum_th_reg.regValue);

			//#178





			rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);
			rtd_outl(DI_DI_SMD_ChooseCandidate_reg, smd_choosecandidate_reg.regValue);
			rtd_outl(DI_DI_SMD_Resurrect_Ctrl_reg, di_di_smd_resurrect_ctrl.regValue);
			//rtd_outl(DI_DI_SMD_Sampling_GMVc_reg, di_di_smd_sampling_gmvc.regValue);

			rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

			rtd_outl(DI_DI_SMD_WaterFlag_Ctr3_reg, di_di_smd_waterflag_ctr3.regValue);

			rtd_outl(DI_DI_SMD_HardwarePan_Modify1_reg, di_di_smd_hardwarepan_modify1.regValue);


			//#187
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			//#197
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);

			//#198
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_NINTRA_LOWPASS_SOURCE_reg,di_im_di_nintra_lowpass_source.regValue);
			rtd_outl(DI_IM_DI_NINTRA_SEARCH_DIR_LIMIT_reg,di_im_di_nintra_search_dir_limit.regValue);
			rtd_outl(DI_IM_DI_NINTRA_CONTROL_reg,di_im_di_nintra_control.regValue);

			di_im_new_mcnr_pan_condition.regValue = rtd_inl(DI_IM_NEW_MCNR_PAN_CONDITION_reg);

			//Pan Case
			if(scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE)< 15)
			{
				if(DynamicOptimizeSystem[107]==1)
				{
					di_ma_frame_motion_th_a_reg.regValue = 0x12270033;//0x2c272e3a;
					di_ma_frame_motion_th_b_reg.regValue = 0x60560a4b;//0x54565060;
					di_ma_frame_motion_th_c_reg.regValue = 0x76781462;//0x7678787d;

				}
				else if(DI_Video_Broken==1)
				{
					di_ma_frame_motion_th_a_reg.regValue = 0x05040a05;//0x2c272e3a;
					di_ma_frame_motion_th_b_reg.regValue = 0x180a0c14;//0x54565060;
					di_ma_frame_motion_th_c_reg.regValue = 0x32141018;//0x7678787d;
				}
				else if(DI_Res_Pat_pan_65ppf == 1)
				{
					di_ma_frame_motion_th_a_reg.ma_framerlvtha =0x0;
				}
				else
				{
					/*rock_rau 20150922 Q-tek monoscope pan flicker issue(original setting)*/
					di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
					di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
					di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;

				}
			}
			else if((scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE) < 30)&&
				(di_im_new_mcnr_pan_condition.h_pan_mv_value==0))
			{
				di_ma_frame_motion_th_a_reg.ma_framehtha = 0x0a;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 0x12;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 0x16;
			}
			else if ((scalerVIP_DI_MiddleWare_GetStatus(STATUS_PAN_SPECIAL_CASE) > 30)&&
				(di_im_new_mcnr_pan_condition.h_pan_mv_value==0))
			{
				di_ma_frame_motion_th_a_reg.ma_framehtha = 0x14;
				di_ma_frame_motion_th_b_reg.ma_framehthb = 0x16;
				di_ma_frame_motion_th_c_reg.ma_framehthc = 0x18;
			}

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);

			// Skyworth decont patterns
			rtd_outl(IPQ_DECONTOUR_De_Contour_CTRL_reg, decontour_ctrl_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_Contrast_reg, ipq_decontour_de_contour_contrast_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_Neighbor_Diff_reg, decontour_neighbor_diff_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_Threshold_reg, decontour_threshold_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_Diff_th_reg, decontour_diff_th_reg.regValue);


			/*###################for other case ############################*/
			 //001
			rtd_outl(DI_IM_DI_HMC_ADJUSTABLE_reg, di_hmc_adjustable_reg.regValue);




		}
		break;
		case VIP_QUALITY_HDMI_1080P:
		case VIP_QUALITY_YPbPr_1080P:
		{
			//#Spears & Munsil ADVANCED VUDEO - EVALUATION - Chroma Zone Plate
			color_temp_ctrl_reg.regValue = ORI_color_temp_ctrl_reg.regValue;


			if(SandM_Chroma_Zone_Plate == 1)
			{
				color_temp_ctrl_reg.temporal_enable = 0;
			}
			// Skyworth decontour patterns
			decontour_ctrl_reg.decont_filter_mode = ORI_decontour_ctrl_reg.decont_filter_mode;
			decontour_ctrl_reg.decont_blend_lowbd = ORI_decontour_ctrl_reg.decont_blend_lowbd;
			decontour_ctrl_reg.decont_blend_step = ORI_decontour_ctrl_reg.decont_blend_step;
			decontour_ctrl_reg.decont_neighbor_far = ORI_decontour_ctrl_reg.decont_neighbor_far;
			ipq_decontour_de_contour_contrast_reg.decont_contrast_th_y=ORI_ipq_decontour_de_contour_contrast_reg.decont_contrast_th_y;
			decontour_neighbor_diff_reg.decont_neighbor_diff_th_y = ORI_decontour_neighbor_diff_reg.decont_neighbor_diff_th_y;
			decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = ORI_decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y;
			decontour_threshold_reg.decont_dark_th = ORI_decontour_threshold_reg.decont_dark_th;
			decontour_threshold_reg.decont_gradation_th_y = ORI_decontour_threshold_reg.decont_gradation_th_y;
#ifdef VPQ_COMPILER_ERROR_ENABLE

                        decontour_diff_th_reg.decont_blend_lv1_gain = ORI_decontour_diff_th_reg.decont_blend_lv1_gain;
#endif
                        decontour_diff_th_reg.decont_maxmindiff_th_y = ORI_decontour_diff_th_reg.decont_maxmindiff_th_y;
			decontour_diff_th_reg.decont_maxmindiff_th_c = ORI_decontour_diff_th_reg.decont_maxmindiff_th_c;

			if( Skyworth_Decont_Pattern==1 )
			{
				decontour_ctrl_reg.decont_filter_mode = 1;
				//decontour_ctrl_reg.decont_neighbor_far = 1;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th_y = 1;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = 4;
				decontour_threshold_reg.decont_dark_th = 0;
				decontour_threshold_reg.decont_gradation_th_y = 10;
				decontour_diff_th_reg.decont_maxmindiff_th_y = 25;

				decontour_double_buff_apply = 1;
			}
			else
			{
				decontour_double_buff_apply = 1;
			}
			if( Skyworth_Decont_BMPPattern==1 ) //Skyworth decontour patterns
			{
				decontour_ctrl_reg.decont_blend_lowbd= 30;
				decontour_ctrl_reg.decont_blend_step = 1 ;
				ipq_decontour_de_contour_contrast_reg.decont_contrast_th_y = 180;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th_y = 2;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = 5;
				decontour_neighbor_diff_reg.decont_neighbor_diff_th2_c = 5;
				decontour_threshold_reg.decont_gradation_th_y = 10;
				decontour_threshold_reg.decont_gradation_th_c = 12;
#ifdef VPQ_COMPILER_ERROR_ENABLE

				decontour_diff_th_reg.decont_blend_lv1_gain= 5;
#endif
				decontour_diff_th_reg.decont_maxmindiff_th_y= 25;
				decontour_diff_th_reg.decont_maxmindiff_th_c= 25;

				decontour_double_buff_apply = 1;
			}
			else
			{
				decontour_neighbor_diff_reg.decont_neighbor_diff_th2_c = 4;
				decontour_threshold_reg.decont_gradation_th_c = 10;
					decontour_double_buff_apply = 1;
			}

			rtd_outl(MEMC_MUX_MEMC_MUX_DI_CTRL_reg, color_temp_ctrl_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_CTRL_reg, decontour_ctrl_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_Contrast_reg, ipq_decontour_de_contour_contrast_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_Neighbor_Diff_reg, decontour_neighbor_diff_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_Threshold_reg, decontour_threshold_reg.regValue);
			rtd_outl(IPQ_DECONTOUR_De_Contour_Diff_th_reg, decontour_diff_th_reg.regValue);
		}
		break;
		case VIP_QUALITY_TV_SECAN:
		{

			if(LGPTFatoryMultiC34 == 1)
			{
				postp_secam_fix_ctrl_reg.regValue = 0x4000ff0c;
				postp_secam_fix_y_detect0_reg.regValue = 0xbf01a4a4;
				postp_secam_fix_y_detect1_reg.regValue = 0x3f3f0800;

				/*For color bar H-line flick*/
				tnrxc_mkii_ctrl_reg.regValue = 0x14b40401;
			}
			else
			{
				postp_secam_fix_ctrl_reg.regValue = ORI_postp_secam_fix_ctrl_reg.regValue;
				postp_secam_fix_y_detect0_reg.regValue = ORI_postp_secam_fix_y_detect0_reg.regValue;
				postp_secam_fix_y_detect1_reg.regValue = ORI_postp_secam_fix_y_detect1_reg.regValue;

				/*For color bar H-line flick*/
				tnrxc_mkii_ctrl_reg.regValue = ORI_tnrxc_mkii_ctrl_reg.regValue;
			}
			rtd_outl(DI_TNRXC_MkII_CTRL_reg, tnrxc_mkii_ctrl_reg.regValue);
#if 0
			VDPQ_rtd_outl(VDPQ_POSTP_SECAM_FIX_CTRL_reg, postp_secam_fix_ctrl_reg.regValue);
			VDPQ_rtd_outl(VDPQ_POSTP_SECAM_FIX_Y_DETECT0_reg, postp_secam_fix_y_detect0_reg.regValue);
			VDPQ_rtd_outl(VDPQ_POSTP_SECAM_FIX_Y_DETECT1_reg, postp_secam_fix_y_detect1_reg.regValue);
#endif
		}
		break;
		case VIP_QUALITY_TV_PAL:
		{
			LGTVPALBGE52 = 1;//[KTASKWBS-3528] fix LGE channel E-52 Shake issue.
			// fix enable tnr XC (original only LGTVPALBGE52 pattern enable)

			if( LGTVPALBGE52 == 1 )
			{
				tnrxc_mkii_ctrl_reg.regValue = 0x14b40401;
			}
			else
			{
				tnrxc_mkii_ctrl_reg.regValue = ORI_tnrxc_mkii_ctrl_reg.regValue;
			}
			rtd_outl(DI_TNRXC_MkII_CTRL_reg, tnrxc_mkii_ctrl_reg.regValue);
		}
		break;
		case VIP_QUALITY_HDMI_480P:
		case VIP_QUALITY_HDMI_576P:
		{

			//************** INI VALE START    ***************************************************

			//#147,148,149,150
			dch1_Spatial_Weight_Reg.cp_fixedweight1y = ori_cp_fixedweight1y;
			dch1_Spatial_Weight_Reg.cp_fixedweight2y = ori_cp_fixedweight2y;

			//#192
			dch1_cp_ctrl_reg.cp_sresultweight = ori_cp_sresultweight;
			curve_mapping_w1_1_reg.curvemapping_w1_2=ori_curve_mapping_w1_2;
			curve_mapping_w1_1_reg.curvemapping_w1_3=ori_curve_mapping_w1_3;
			curve_mapping_w1_2_reg.curvemapping_w1_4=ori_curve_mapping_w1_4;
			curve_mapping_w1_2_reg.curvemapping_w1_5=ori_curve_mapping_w1_5;
			curve_mapping_step2_reg.curvemapping_step6=ori_curve_mapping_step6;
			curve_mapping_step3_reg.curvemapping_step7=ori_curve_mapping_step7;
			curve_mapping_step3_reg.curvemapping_step8=ori_curve_mapping_step8;

			//************** INI VALE END    ***************************************************

			if(DynamicOptimizeSystem[147] ==1)
			{
				dch1_Spatial_Weight_Reg.cp_fixedweight1y = 1;
				dch1_Spatial_Weight_Reg.cp_fixedweight2y = 1;
 			}
			else if(DynamicOptimizeSystem[192])
			{
				dch1_cp_ctrl_reg.cp_sresultweight =15;
				curve_mapping_w1_1_reg.curvemapping_w1_2=8;
				curve_mapping_w1_1_reg.curvemapping_w1_3=0;
				curve_mapping_w1_2_reg.curvemapping_w1_4=0;
				curve_mapping_w1_2_reg.curvemapping_w1_5=0;
				curve_mapping_step2_reg.curvemapping_step6=14;
				curve_mapping_step3_reg.curvemapping_step7=30;
				curve_mapping_step3_reg.curvemapping_step8=62;
			}

			//#147,148,149,150
			rtd_outl(NR_DCH1_Spatial_Weight_reg, dch1_Spatial_Weight_Reg.regValue);

			//#192
			rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_cp_ctrl_reg.regValue);
			//rtd_outl(NR_CURVE_MAPPING_W1_1_reg, curve_mapping_w1_1_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_W1_2_reg, curve_mapping_w1_2_reg.regValue);		//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_2_reg, curve_mapping_step2_reg.regValue);	//LGE control
			//rtd_outl(NR_CURVE_MAPPING_STEP_3_reg, curve_mapping_step3_reg.regValue);	//LGE control

		}
		break;
		case VIP_QUALITY_DTV_480I:
		case VIP_QUALITY_DTV_576I:
		case VIP_QUALITY_DTV_480P:
		case VIP_QUALITY_DTV_576P:
		case VIP_QUALITY_DTV_720P:
		{
			di_smd_control_candiate_reg.regValue = rtd_inl(DI_DI_SMD_Control_CandidateList_reg);
			if(CITestPatch[0] == 1)
			{
				di_ma_frame_motion_th_a_reg.regValue = 0;
				di_ma_frame_motion_th_b_reg.regValue = 0;
				di_ma_frame_motion_th_c_reg.regValue = 0;
				di_smd_control_candiate_reg.smd_en=0;
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
				rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

			}
			else
			{
				di_ma_frame_motion_th_a_reg.regValue = ORI_di_ma_frame_motion_th_a_reg.regValue;
				di_ma_frame_motion_th_b_reg.regValue = ORI_di_ma_frame_motion_th_b_reg.regValue;
				di_ma_frame_motion_th_c_reg.regValue = ORI_di_ma_frame_motion_th_c_reg.regValue;
				di_smd_control_candiate_reg.smd_en=RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.DI_info.DI_VCPU_stop_SMD_flag?0:ori_smd_en;
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
				rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);
				rtd_outl(DI_DI_SMD_Control_CandidateList_reg, di_smd_control_candiate_reg.regValue);

			}


			//static unsigned char ori_film_status = 0;
			//static unsigned char ori_film_sawtooth_choose = 0;
			//ROSPrintf("\n DTV_SD_p2i =%d \n ",DTV_SD_p2i);
			#if 0 //fixed me

				unsigned char DTV_SD_p2i = RPC_SmartPic_clue->VCPU_setting_info.VCPU_DTV_SD_p2i;

			di_im_di_film_sawtooth_filmframe_th_RBUS film_sawtooth_filmframe_th_reg;
			if(((rtd_inl(0xb809d620)>>13)&0x7f)!=0) //this is for dtv patch
			{
				di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
				film_sawtooth_filmframe_th_reg.regValue = rtd_inl(DI_IM_DI_FILM_SAWTOOTH_FILMFRAME_TH_reg);

				if((DTV_SD_p2i ==1)&&((set_p2i_value==0)||di_control_reg.film_enable!=28))
				{
					//ROSPrintf("\n DTV_SD_p2i 1 =%d \n ",DTV_SD_p2i);


					set_p2i_value =1;
					//ori_film_status = di_control_reg.film_enable;
					//ori_film_sawtooth_choose = di_control_reg.film_sawtooth_choose;

					di_control_reg.film_enable = 28;
					di_control_reg.film_sawtooth_choose = 3;
					film_sawtooth_filmframe_th_reg.film_frmotionthl = 2;
					di_control_reg.write_enable_5=1;

					rtd_outl(DI_IM_DI_CONTROL_reg,di_control_reg.regValue);
					rtd_outl(DI_IM_DI_FILM_SAWTOOTH_FILMFRAME_TH_reg,film_sawtooth_filmframe_th_reg.regValue);
				}
				else if ((DTV_SD_p2i ==0)&&(set_p2i_value==1))
				{

					//ROSPrintf("\n DTV_SD_p2i 2 =%d \n ",DTV_SD_p2i);
					//set_value =0;

					//di_control_reg.film_enable = ori_film_status ;
					//di_control_reg.film_sawtooth_choose= ori_film_sawtooth_choose;

					//rtd_outl(DI_IM_DI_CONTROL_reg,di_control_reg.regValue);

				}


				/*else if ((DTV_SD_p2i ==0)&&(set_value==1))
				{
					set_value =0;
					di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
					di_control_reg.film_enable = ori_film_status ;
					di_control_reg.film_sawtooth_choose= ori_film_sawtooth_choose;
					rtd_outl(DI_IM_DI_CONTROL_reg,di_control_reg.regValue);

				}*/

			}
			#endif



		}
		break;
		case VIP_QUALITY_DTV_1080I:
		{




			if(DI_Video_Broken==1)
			{
				di_ma_frame_motion_th_a_reg.regValue = 0x05040a05;//0x2c272e3a;
				di_ma_frame_motion_th_b_reg.regValue = 0x180a0c14;//0x54565060;
				di_ma_frame_motion_th_c_reg.regValue = 0x32141018;//0x7678787d;

			}
			else
			{

				di_ma_frame_motion_th_a_reg.ma_framehtha = ORI_di_ma_frame_motion_th_a_reg.ma_framehtha;
				di_ma_frame_motion_th_b_reg.ma_framehthb = ORI_di_ma_frame_motion_th_b_reg.ma_framehthb;
				di_ma_frame_motion_th_c_reg.ma_framehthc = ORI_di_ma_frame_motion_th_c_reg.ma_framehthc;


			}

			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_A_reg, di_ma_frame_motion_th_a_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_B_reg, di_ma_frame_motion_th_b_reg.regValue);
			rtd_outl(DI_IM_DI_MA_FRAME_MOTION_TH_C_reg, di_ma_frame_motion_th_c_reg.regValue);


		}


		break;
		case VIP_QUALITY_DTV_1080P:
		{
			di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue = rtd_inl(DI_IM_DI_RTNR_C_TH0_TH3_reg);

			di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue = rtd_inl(DI_IM_DI_RTNR_C_TH4_TH6_reg);

			if (LGBirdCRTNRPatchTrigger) {
				if (LGBirdCRTNRPatch) {
					di_im_di_rtnr_c_th0_th3_RBUS_reg_save.regValue = di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue;
					di_im_di_rtnr_c_th4_th6_RBUS_reg_save.regValue = di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue;
					di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue = 0;
					di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue = 0;
				} else {
					di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue = di_im_di_rtnr_c_th0_th3_RBUS_reg_save.regValue;
					di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue = di_im_di_rtnr_c_th4_th6_RBUS_reg_save.regValue;
				}
				rtd_outl(DI_IM_DI_RTNR_C_TH0_TH3_reg, di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue);
				rtd_outl(DI_IM_DI_RTNR_C_TH4_TH6_reg, di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue);
			} else if (!LGBirdCRTNRPatch) {
				di_im_di_rtnr_c_th0_th3_RBUS_reg_save.regValue = di_im_di_rtnr_c_th0_th3_RBUS_reg.regValue;
				di_im_di_rtnr_c_th4_th6_RBUS_reg_save.regValue = di_im_di_rtnr_c_th4_th6_RBUS_reg.regValue;
			}

		}
		break;


	}
	if(di_double_buff_apply ==1)
	{
		di_db_reg_ctl_RBUS  db_reg_ctl_reg;

		db_reg_ctl_reg.regValue = IoReg_Read32(DI_db_reg_ctl_reg);
		db_reg_ctl_reg.db_apply=1;
		rtd_outl(DI_db_reg_ctl_reg,db_reg_ctl_reg.regValue);
		di_double_buff_apply =0;
	}
	if(decontour_double_buff_apply == 1)
	{
		ipq_decontour_de_contour_db_reg_ctl_RBUS decontour_db_reg_ctl_reg;

		decontour_db_reg_ctl_reg.regValue = IoReg_Read32(IPQ_DECONTOUR_De_Contour_db_reg_ctl_reg);
		decontour_db_reg_ctl_reg.db_apply=1;
		rtd_outl(IPQ_DECONTOUR_De_Contour_db_reg_ctl_reg,decontour_db_reg_ctl_reg.regValue);
		decontour_double_buff_apply = 0;
	}

// new structure end
}

void scalerVIP_INT32_Copy(int * pwTemp ,int nSize,int * pwCopyTemp)
{
	int i;
	if (pwTemp) {
		for (i = 0; i < (nSize); i++)
			pwCopyTemp[i] = pwTemp[i];
	}
}


int scalerVIP_2_Complement(unsigned int nVal,unsigned char nBitValid)
{
	return ((nVal >> nBitValid) ? (nVal | (short)(~((1 << (nBitValid+1)) - 1))) : (nVal));
}


void scalerVIP_Set_Stop_Polling(void)
{
//#ifdef VIP_CONFIG_DUAL_CHANNEL
	color_dcc_d_dcc_fwused_1_RBUS d_dcc_fwused_1_reg;
	d_dcc_fwused_1_reg.regValue = rtd_inl(COLOR_DCC_D_DCC_FWUSED_1_reg);
	Stop_Polling.Stop_All= d_dcc_fwused_1_reg.regValue &0x01;
	Stop_Polling.Stop_Di_Hmc=(d_dcc_fwused_1_reg.regValue>>1) &0x01;
	Stop_Polling.Stop_Dcc= (d_dcc_fwused_1_reg.regValue>>2) &0x01;
	Stop_Polling.Stop_Auto_Nr=(d_dcc_fwused_1_reg.regValue>>3) &0x01;
	Stop_Polling.Stop_Dcti_for_colorbar=(d_dcc_fwused_1_reg.regValue>>4) &0x01;
	Stop_Polling.Stop_Noise_Mpeg=(d_dcc_fwused_1_reg.regValue>>5) &0x01;
	Stop_Polling.Stop_Dcr=(d_dcc_fwused_1_reg.regValue>>6) &0x01;
	Stop_Polling.Stop_Film_Mode_Detector=(d_dcc_fwused_1_reg.regValue>>7) &0x01;
	Stop_Polling.Stop_VD_Noise=(d_dcc_fwused_1_reg.regValue>>8) &0x01;
	Stop_Polling.Stop_Di_Smd=(d_dcc_fwused_1_reg.regValue>>9) &0x01;

	Stop_Polling.Stop_pattern_Monscope=(d_dcc_fwused_1_reg.regValue>>10) &0x01;
	Stop_Polling.Stop_pattern_ColorBar=(d_dcc_fwused_1_reg.regValue>>11) &0x01;
	Stop_Polling.Stop_pattern_No2=(d_dcc_fwused_1_reg.regValue>>12) &0x01;
	Stop_Polling.Stop_pattern_No4=(d_dcc_fwused_1_reg.regValue>>13) &0x01;
	Stop_Polling.Stop_pattern_No23=(d_dcc_fwused_1_reg.regValue>>14) &0x01;
	Stop_Polling.Stop_pattern_No24=(d_dcc_fwused_1_reg.regValue>>15) &0x01;
	Stop_Polling.Stop_pattern_No47=(d_dcc_fwused_1_reg.regValue>>16) &0x01;
	Stop_Polling.Stop_pattern_No107=(d_dcc_fwused_1_reg.regValue>>17) &0x01;
	Stop_Polling.Stop_pattern_No154=(d_dcc_fwused_1_reg.regValue>>18) &0x01;
	Stop_Polling.Stop_Reset_Pattern=(d_dcc_fwused_1_reg.regValue>>19) &0x01;

//#endif

}

void scalerVIP_Set_Start_Print_Info()
{
//#ifdef VIP_CONFIG_DUAL_CHANNEL
	fw_color_dcc_d_dcc_fwused_2  d_dcc_fwused_2_reg;
	fw_color_dcc_d_dcc_fwused_3  d_dcc_fwused_3_reg;
	static unsigned char init=0;
	unsigned char i=0;
	unsigned int DCC_Histogram_Mean_value = 0;
	DCC_Histogram_Mean_value = SmartPic_clue->Hist_Y_Mean_Value;


	d_dcc_fwused_2_reg.regValue = rtd_inl(COLOR_DCC_D_DCC_FWUSED_2_reg);
	d_dcc_fwused_3_reg.regValue = rtd_inl(COLOR_DCC_D_DCC_FWUSED_3_reg);

	if (init == TRUE && ((d_dcc_fwused_2_reg.regValue&0xff) == 0))
	{
		init = FALSE;
	}

	if(init==FALSE)
	{
		init =TRUE;
		d_dcc_fwused_2_reg.delay_time= 150; //default dealy time=150
		d_dcc_fwused_2_reg.fw_2 =0;
		rtd_outl(COLOR_DCC_D_DCC_FWUSED_2_reg, d_dcc_fwused_2_reg.regValue);
	}
	//else
	{
		Start_Print.Delay_Time= d_dcc_fwused_2_reg.regValue &0xff;
		Start_Print.Y_Hist=( d_dcc_fwused_2_reg.regValue>>8) &0x01;
		Start_Print.Hue_Hist= (d_dcc_fwused_2_reg.regValue>>9) &0x01;
		Start_Print.Sat_Mean=(d_dcc_fwused_2_reg.regValue>>10) &0x01;
		Start_Print.Dcc_1=(d_dcc_fwused_2_reg.regValue>>11) &0x01;
		Start_Print.Dcc_2=(d_dcc_fwused_2_reg.regValue>>12) &0x01;
		Start_Print.DCC_3=(d_dcc_fwused_2_reg.regValue>>13) &0x01;
		Start_Print.Rtnr_1=(d_dcc_fwused_2_reg.regValue>>14) &0x01;
		Start_Print.Rtnr_2=(d_dcc_fwused_2_reg.regValue>>15) &0x01;
		Start_Print.Mpeg_Nr=(d_dcc_fwused_2_reg.regValue>>16) &0x01;
		Start_Print.Snr=(d_dcc_fwused_2_reg.regValue>>17) &0x01;
		Start_Print.Sharpness_1=(d_dcc_fwused_2_reg.regValue>>18) &0x01;
		Start_Print.Sharpness_2=(d_dcc_fwused_2_reg.regValue>>19) &0x01;
		Start_Print.DI_1=(d_dcc_fwused_2_reg.regValue>>20) &0x01;
		Start_Print.DI_2=(d_dcc_fwused_2_reg.regValue>>21) &0x01;
		Start_Print.Film_Mode=(d_dcc_fwused_2_reg.regValue>>22) &0x01;
		Start_Print.HIST=(d_dcc_fwused_2_reg.regValue>>23) &0x01;
		Start_Print.Reverse_2=(d_dcc_fwused_2_reg.regValue>>24) &0x01;
		Start_Print.Reverse_3=(d_dcc_fwused_2_reg.regValue>>25) &0x01;
		Start_Print.FormattedLog=(d_dcc_fwused_2_reg.regValue>>26) &0x01;

		Start_Print.ID_Pattern_ALL=(d_dcc_fwused_3_reg.regValue>>0) &0x01;
		Start_Print.ID_Pattern_2=(d_dcc_fwused_3_reg.regValue>>1) &0x01;
		Start_Print.ID_Pattern_4=(d_dcc_fwused_3_reg.regValue>>2) &0x01;
		Start_Print.ID_Pattern_5=(d_dcc_fwused_3_reg.regValue>>3) &0x01;
		Start_Print.ID_Pattern_7=(d_dcc_fwused_3_reg.regValue>>4) &0x01;
		Start_Print.ID_Pattern_12=(d_dcc_fwused_3_reg.regValue>>5) &0x01;
		Start_Print.ID_Pattern_23=(d_dcc_fwused_3_reg.regValue>>6) &0x01;
		Start_Print.ID_Pattern_24=(d_dcc_fwused_3_reg.regValue>>7) &0x01;
		Start_Print.ID_Pattern_35=(d_dcc_fwused_3_reg.regValue>>8) &0x01;
		Start_Print.ID_Pattern_47=(d_dcc_fwused_3_reg.regValue>>9) &0x01;
		Start_Print.ID_Pattern_107=(d_dcc_fwused_3_reg.regValue>>10) &0x01;
		Start_Print.ID_Pattern_123=(d_dcc_fwused_3_reg.regValue>>11) &0x01;
		Start_Print.ID_Pattern_132=(d_dcc_fwused_3_reg.regValue>>12) &0x01;
		Start_Print.ID_Pattern_133=(d_dcc_fwused_3_reg.regValue>>13) &0x01;
		Start_Print.ID_Pattern_154=(d_dcc_fwused_3_reg.regValue>>14) &0x01;
		Start_Print.ID_Pattern_191=(d_dcc_fwused_3_reg.regValue>>15) &0x01;
		Start_Print.ID_Pattern_192=(d_dcc_fwused_3_reg.regValue>>16) &0x01;
		Start_Print.ID_Pattern_193=(d_dcc_fwused_3_reg.regValue>>17) &0x01;
		Start_Print.ID_Pattern_194=(d_dcc_fwused_3_reg.regValue>>18) &0x01;
		Start_Print.ID_Pattern_195=(d_dcc_fwused_3_reg.regValue>>19) &0x01;
		Start_Print.ID_Pattern_139=(d_dcc_fwused_3_reg.regValue>>20) &0x01;
		Start_Print.ID_Pattern_196=(d_dcc_fwused_3_reg.regValue>>21) &0x01;
		Start_Print.ID_Pattern_14=(d_dcc_fwused_3_reg.regValue>>22) &0x01;
		Start_Print.someothers=(d_dcc_fwused_3_reg.regValue>>23) &0x01;
		Start_Print.ID_Pattern_32=(d_dcc_fwused_3_reg.regValue>>24) &0x01;
		Start_Print.ID_Pattern_147=(d_dcc_fwused_3_reg.regValue>>25) &0x01;
		Start_Print.Reverse_10=(d_dcc_fwused_3_reg.regValue>>26) &0x01;
		Start_Print.Reverse_11=(d_dcc_fwused_3_reg.regValue>>27) &0x01;
		Start_Print.VD_LOG_ENABLE=(d_dcc_fwused_3_reg.regValue>>28) &0x01;
		Start_Print.ColorBar=(d_dcc_fwused_3_reg.regValue>>29) &0x01;
		Start_Print.Slow_Motion1=(d_dcc_fwused_3_reg.regValue>>30) &0x01;
		Start_Print.Slow_Motion2=(d_dcc_fwused_3_reg.regValue>>31) &0x01;

	}
	if(Start_Print.Delay_Time ==0)
	{
		Start_Print.Delay_Time =1;
	}

	// print   Y_hist_ratio
	if((Start_Print.FormattedLog==1)&&(MA_print_count%debug_print_delay_time==0)&&(Start_Print.Y_Hist==TRUE))
	{
		printk("{");
		for(i=0;i<TV006_VPQ_chrm_bin;i++)
			printk("%d, ",Y_hist_ratio[i]);
		printk("}\n");
	}
	else
	{
		ROSPrintf_ID_YHist("{");
		for(i=0;i<TV006_VPQ_chrm_bin;i++)
			ROSPrintf_ID_YHist("%d, ",Y_hist_ratio[i]);
		ROSPrintf_ID_YHist("}\n");
	}

	// print   hue_hist_ratio
	if((Start_Print.FormattedLog==1)&&(MA_print_count%debug_print_delay_time==0)&&(Start_Print.Hue_Hist==TRUE))
	{

		printk("{");
		for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++)
			printk("%d, ",hue_hist_ratio[i]);
		printk("}\n");
	}
	else
	{
		ROSPrintf_ID_Hue("{");
		for(i=0;i<COLOR_HUE_HISTOGRAM_LEVEL;i++)
			ROSPrintf_ID_Hue("%d, ",hue_hist_ratio[i]);
		ROSPrintf_ID_Hue("}\n");
	}

	// print   sat_mean_value
	//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Sat_Mean==TRUE))
	{
		ROSPrintf_ID_Sat("sat_mean_value=%d \n", sat_ratio_mean_value);
	}

	// print   DCC_Histogram_Mean_value
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Dcc_1==TRUE))
	{
		printk(" DCC_Histogram_Mean_value=%d\n", DCC_Histogram_Mean_value);
	}

	// print   RTNR_MAD_count_Y_sum_avg
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Rtnr_2==TRUE))
	{
		printk(" RTNR_MAD_count_Y_sum_avg=%d\n", RTNR_MAD_count_Y_sum_avg);
	}

	// print   Identiy ID Pattern
	//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_ALL==TRUE))
	{
		for(i=0;i<255;i++)
		{
			if(DynamicOptimizeSystem[i]!=0)
			{
				ROSPrintf_ID_Identiy("source=%d,No[%d]=%d \n",(RPC_system_info_structure_table->VIP_source),i,DynamicOptimizeSystem[i]);
			}
		}
	}
}
#undef VIP_FORMATTED_LOG
void scalerVIP_Sat_Hist_Calculate(void)
{
	//change according to sirius by leonard_wu@20140224

	unsigned char i, j, hidx;
	unsigned int sum = 0;
	unsigned short mean_tmp = 0;
	//unsigned short tmptmp = 0;
	//unsigned short Y_mean = 0;

	unsigned char total_sat_hist = 1;
	int timeout = 10;

	color_icm_d_auto_sat_hist_read_ctrl_RBUS		d_auto_sat_hist_read_ctrl_reg;
	color_icm_d_auto_sat_hist_read_flag_RBUS		d_auto_sat_hist_read_flag_reg;
	color_icm_d_auto_sat_hist_cnt_00_or_16_RBUS	d_auto_sat_hist_cnt_00_or_16_reg;

	//unsigned int printf_Flag = system_info_structure_table->ISR_Printf_Flag.Y_Hue_Sat_Hist_Flag0;
	//unsigned int print_delay = (system_info_structure_table->ISR_Printf_Flag.Delay_Time == 0)?(1):(system_info_structure_table->ISR_Printf_Flag.Delay_Time);

	//write clear first
	d_auto_sat_hist_read_flag_reg.regValue = rtd_inl(COLOR_ICM_D_AUTO_SAT_HIST_READ_FLAG_reg);
	d_auto_sat_hist_read_flag_reg.sat_hist_sram_read_consistent_flag = 0;
	rtd_outl(COLOR_ICM_D_AUTO_SAT_HIST_READ_FLAG_reg, d_auto_sat_hist_read_flag_reg.regValue);
	d_auto_sat_hist_read_flag_reg.sat_hist_sram_read_consistent_flag = 1;
	rtd_outl(COLOR_ICM_D_AUTO_SAT_HIST_READ_FLAG_reg, d_auto_sat_hist_read_flag_reg.regValue);

	//read sat hist 0; if you want to read all 4 hists, set total_sat_hist = 4 and sat_hist should be change too.
	total_sat_hist = 1;
	for(hidx = 0; hidx < total_sat_hist; hidx++)
	{
		sum = 0;
		mean_tmp = 0;
		for(i = 0; i < 2; i++)
		{
			d_auto_sat_hist_read_ctrl_reg.regValue = rtd_inl(COLOR_ICM_D_AUTO_SAT_HIST_READ_CTRL_reg);
			d_auto_sat_hist_read_ctrl_reg.sram_read = 1;
			d_auto_sat_hist_read_ctrl_reg.hist_ctrl = hidx;
			d_auto_sat_hist_read_ctrl_reg.cnt_block = i;
			rtd_outl(COLOR_ICM_D_AUTO_SAT_HIST_READ_CTRL_reg, d_auto_sat_hist_read_ctrl_reg.regValue);

			//histogram has been update from SRAM to registers?
			timeout = 10;
			do{
				d_auto_sat_hist_read_ctrl_reg.regValue = rtd_inl(COLOR_ICM_D_AUTO_SAT_HIST_READ_CTRL_reg);
			}while(d_auto_sat_hist_read_ctrl_reg.sram_read && (timeout-- > 0));

			if(timeout < 0)
				goto FINISH; //read back data error

			//read histogram from registers
			for(j = 0; j < 16; j++)
			{
				d_auto_sat_hist_cnt_00_or_16_reg.regValue = rtd_inl(COLOR_ICM_D_AUTO_SAT_HIST_CNT_00_OR_16_reg + (j * 4));
				sat_hist[i * 16 + j] = d_auto_sat_hist_cnt_00_or_16_reg.sat_hist_cnt_00_or_16;
        sum = sum + (sat_hist[i * 16 + j] >> 1); // shift 1 bit to avoid overflow when calculating ratio
			}
			//Y_mean = tmptmp>>5;

			//check consistent
			d_auto_sat_hist_read_flag_reg.regValue = rtd_inl(COLOR_ICM_D_AUTO_SAT_HIST_READ_FLAG_reg);

			if(d_auto_sat_hist_read_flag_reg.sat_hist_sram_read_consistent_flag)
				goto FINISH; //read back data error

		}
		//
		if(sum != 0)
		{
			for(i = 0; i < 32; i++)
			{
        sat_hist_ratio[i] = (sat_hist[i]>>1) * 1000 / sum; // shift 1 bit to match the sum
				mean_tmp += sat_hist_ratio[i] * (i + 1);//sat_hist_ratio[i]*(i+1)/COLOR_AutoSat_HISTOGRAM_LEVEL;
				//tmptmp += Y_hist_ratio[i]*(i+1);

				(SmartPic_clue->Sat_Main_His)[i] = sat_hist[i];
				(SmartPic_clue->Sat_Main_His_Ratio)[i]= sat_hist_ratio[i];

			}


		}
		if((SmartPic_clue->SCALER_DISP_INFO.DispLen*SmartPic_clue->SCALER_DISP_INFO.DispWid)!=0)
		{
      SmartPic_clue->sat_sumcnt_ratio = sum*1000/((SmartPic_clue->SCALER_DISP_INFO.DispLen*SmartPic_clue->SCALER_DISP_INFO.DispWid)>>1); // shift 1 bit to match the sum
		}
		sat_ratio_mean_value = mean_tmp >> 5;	//COLOR_AutoSat_HISTOGRAM_LEVEL = 32 ;

		SmartPic_clue->sat_ratio_mean_value = sat_ratio_mean_value;

    }



FINISH:
#if 1
	//if(MA_print_count%100 == 0 && meanSat_meanValue_printf_log_flag)
	ROSPrintf_YHueSat_Hist("sat_mean_value=%d, Histogram_Mean_value=%d\n", sat_ratio_mean_value,(SmartPic_clue->Hist_Y_Mean_Value));
#endif
#if 0
	if(MA_print_count%300==0)
	{
		//ROSPrintf("sat_mean_value=%d,mean_tmp=%d,Histogram_Mean_value=%d,tmptmp=%d,Y_mean=%d\n",
			//sat_mean_value,mean_tmp,(SmartPic_clue->Hist_Y_Mean_Value),tmptmp,Y_mean);
		for(i=0;i<32;i++)
			ROSPrintf("%d,",sat_hist_ratio[i]);
		ROSPrintf("\n");
		for(i=0;i<TV006_VPQ_chrm_bin;i++)
			ROSPrintf("%d,",Y_hist_ratio[i]);
		ROSPrintf("\n");
	}
#endif

#if 0
	//for debug.
	if(((printf_Flag&_BIT4)!=0))
	{
		if(MA_print_count%print_delay==0)
		{
			printk("Y_Hue_Sat cal, Sat={");
			for(i=0;i<COLOR_AutoSat_HISTOGRAM_LEVEL;i++)
				printk("%d,", SmartPic_clue->Sat_Main_His[i]);
			printk("}\n");
		}
	}
	if(((printf_Flag&_BIT5)!=0))
	{
		if(MA_print_count%print_delay==0)
		{
			printk("Y_Hue_Sat cal, sat_ratio={");
			for(i=0;i<COLOR_AutoSat_HISTOGRAM_LEVEL;i++)
				printk("%d,", SmartPic_clue->Sat_Main_His_Ratio[i]);
			printk("}\n");
		}
	}
#else

	ROSPrintf_YHueSat_Hist("S={%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d}\n",
		SmartPic_clue->Sat_Main_His_Ratio[0], SmartPic_clue->Sat_Main_His_Ratio[1], SmartPic_clue->Sat_Main_His_Ratio[2],
		SmartPic_clue->Sat_Main_His_Ratio[3], SmartPic_clue->Sat_Main_His_Ratio[4], SmartPic_clue->Sat_Main_His_Ratio[5],
		SmartPic_clue->Sat_Main_His_Ratio[6], SmartPic_clue->Sat_Main_His_Ratio[7], SmartPic_clue->Sat_Main_His_Ratio[8],
		SmartPic_clue->Sat_Main_His_Ratio[9], SmartPic_clue->Sat_Main_His_Ratio[10], SmartPic_clue->Sat_Main_His_Ratio[11],
		SmartPic_clue->Sat_Main_His_Ratio[12], SmartPic_clue->Sat_Main_His_Ratio[13], SmartPic_clue->Sat_Main_His_Ratio[14],
		SmartPic_clue->Sat_Main_His_Ratio[15], SmartPic_clue->Sat_Main_His_Ratio[16], SmartPic_clue->Sat_Main_His_Ratio[17],
		SmartPic_clue->Sat_Main_His_Ratio[18], SmartPic_clue->Sat_Main_His_Ratio[19], SmartPic_clue->Sat_Main_His_Ratio[20],
		SmartPic_clue->Sat_Main_His_Ratio[21], SmartPic_clue->Sat_Main_His_Ratio[22], SmartPic_clue->Sat_Main_His_Ratio[23],
		SmartPic_clue->Sat_Main_His_Ratio[24], SmartPic_clue->Sat_Main_His_Ratio[25], SmartPic_clue->Sat_Main_His_Ratio[26],
		SmartPic_clue->Sat_Main_His_Ratio[27], SmartPic_clue->Sat_Main_His_Ratio[28], SmartPic_clue->Sat_Main_His_Ratio[29],
		SmartPic_clue->Sat_Main_His_Ratio[30], SmartPic_clue->Sat_Main_His_Ratio[31]);

#endif


}

void scalerVIP_FMV_HMCbin_hist_ratio_Cal(SLR_VIP_TABLE* Share_Memory_VIP_TABLE_Struct, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table)
{
	unsigned int *FMV_hist, *HMC_bin_hist;
	unsigned int *FMV_hist_ratio, *HMC_bin_hist_ratio;
	unsigned char i;//, GMV, MV_Sel;
	unsigned int sum = 0;
	//unsigned int printf_Flag = system_info_structure_table->ISR_Printf_Flag.FMC_HMC_Flag0;
	//unsigned int print_delay = (system_info_structure_table->ISR_Printf_Flag.Delay_Time == 0)?(1):(system_info_structure_table->ISR_Printf_Flag.Delay_Time);

	di_im_di_pan_detection_statistic_1_RBUS im_di_pan_detection_statistic_1_reg;
	di_im_di_pan_detection_statistic_2_RBUS im_di_pan_detection_statistic_2_reg;
	di_im_di_pan_detection_statistic_3_RBUS im_di_pan_detection_statistic_3_reg;
	di_im_di_pan_detection_statistic_4_RBUS im_di_pan_detection_statistic_4_reg;
	di_im_di_pan_detection_statistic_5_RBUS im_di_pan_detection_statistic_5_reg;
	di_im_di_pan_detection_statistic_6_RBUS im_di_pan_detection_statistic_6_reg;
	di_im_di_pan_detection_statistic_7_RBUS im_di_pan_detection_statistic_7_reg;
	di_im_di_pan_detection_statistic_8_RBUS im_di_pan_detection_statistic_8_reg;
	di_im_di_pan_detection_statistic_9_RBUS im_di_pan_detection_statistic_9_reg;
	di_im_di_pan_detection_statistic_10_RBUS im_di_pan_detection_statistic_10_reg;
	di_im_di_pan_detection_statistic_11_RBUS im_di_pan_detection_statistic_11_reg;
	di_im_di_pan_detection_statistic_12_RBUS im_di_pan_detection_statistic_12_reg;
	di_im_di_pan_detection_statistic_13_RBUS im_di_pan_detection_statistic_13_reg;
	di_im_di_pan_detection_statistic_14_RBUS im_di_pan_detection_statistic_14_reg;
	di_im_di_pan_detection_statistic_15_RBUS im_di_pan_detection_statistic_15_reg;
	di_im_di_pan_detection_statistic_16_RBUS im_di_pan_detection_statistic_16_reg;
	di_im_di_pan_detection_statistic_17_RBUS im_di_pan_detection_statistic_17_reg;

	#if 0 //k5l hw remove
	di_di_gst_fmvhisa_RBUS di_gst_fmvhisa_reg;
	di_di_gst_fmvhisb_RBUS di_gst_fmvhisb_reg;
	di_di_gst_fmvhisc_RBUS di_gst_fmvhisc_reg;
	di_di_gst_fmvhisd_RBUS di_gst_fmvhisd_reg;
	di_di_gst_fmvhise_RBUS di_gst_fmvhise_reg;
	di_di_gst_fmvhisf_RBUS di_gst_fmvhisf_reg;
	di_di_gst_fmvhisg_RBUS di_gst_fmvhisg_reg;
	di_di_gst_fmvhish_RBUS di_gst_fmvhish_reg;
	di_di_gst_fmvhisi_RBUS di_gst_fmvhisi_reg;
	di_di_gst_fmvhisj_RBUS di_gst_fmvhisj_reg;
	di_di_gst_fmvhisk_RBUS di_gst_fmvhisk_reg;
	di_di_smd_sampling_gmvb_RBUS di_di_smd_sampling_gmvb_reg;
	di_di_smd_sampling_gmvc_RBUS di_di_smd_sampling_gmvc_reg;
	#endif
	//di_di_smd_gmvcoeff3_RBUS di_di_smd_gmvcoeff3_reg;

	im_di_pan_detection_statistic_1_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_1_reg);
	im_di_pan_detection_statistic_2_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_2_reg);
	im_di_pan_detection_statistic_3_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_3_reg);
	im_di_pan_detection_statistic_4_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_4_reg);
	im_di_pan_detection_statistic_5_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_5_reg);
	im_di_pan_detection_statistic_6_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_6_reg);
	im_di_pan_detection_statistic_7_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_7_reg);
	im_di_pan_detection_statistic_8_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_8_reg);
	im_di_pan_detection_statistic_9_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_9_reg);
	im_di_pan_detection_statistic_10_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_10_reg);
	im_di_pan_detection_statistic_11_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_11_reg);
	im_di_pan_detection_statistic_12_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_12_reg);
	im_di_pan_detection_statistic_13_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_13_reg);
	im_di_pan_detection_statistic_14_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_14_reg);
	im_di_pan_detection_statistic_15_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_15_reg);
	im_di_pan_detection_statistic_16_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_16_reg);
	im_di_pan_detection_statistic_17_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_STATISTIC_17_reg);

	#if 0 //k5l hw remove
	di_gst_fmvhisa_reg.regValue = rtd_inl(DI_DI_GST_FMVHisA_reg);
	di_gst_fmvhisb_reg.regValue = rtd_inl(DI_DI_GST_FMVHisB_reg);
	di_gst_fmvhisc_reg.regValue = rtd_inl(DI_DI_GST_FMVHisC_reg);
	di_gst_fmvhisd_reg.regValue = rtd_inl(DI_DI_GST_FMVHisD_reg);
	di_gst_fmvhise_reg.regValue = rtd_inl(DI_DI_GST_FMVHisE_reg);
	di_gst_fmvhisf_reg.regValue = rtd_inl(DI_DI_GST_FMVHisF_reg);
	di_gst_fmvhisg_reg.regValue = rtd_inl(DI_DI_GST_FMVHisG_reg);
	di_gst_fmvhish_reg.regValue = rtd_inl(DI_DI_GST_FMVHisH_reg);
	di_gst_fmvhisi_reg.regValue = rtd_inl(DI_DI_GST_FMVHisI_reg);
	di_gst_fmvhisj_reg.regValue = rtd_inl(DI_DI_GST_FMVHisJ_reg);
	di_gst_fmvhisk_reg.regValue = rtd_inl(DI_DI_GST_FMVHisK_reg);
	#endif
	FMV_hist = SmartPic_clue->FMV_hist;
	FMV_hist_ratio = SmartPic_clue->FMV_hist_Ratio;
	HMC_bin_hist = SmartPic_clue->HMC_bin_hist;
	HMC_bin_hist_ratio = SmartPic_clue->HMC_bin_hist_Ratio;

	#if 0  //k5l hw remove	,please fixed me

	// get Global FMV
	di_di_smd_sampling_gmvb_reg.regValue = rtd_inl(DI_DI_SMD_Sampling_GMVb_reg);
	di_di_smd_sampling_gmvc_reg.regValue = rtd_inl(DI_DI_SMD_Sampling_GMVc_reg);
	di_di_smd_gmvcoeff3_reg.regValue = rtd_inl(DI_DI_SMD_GMVCoeff3_reg);
	MV_Sel = di_di_smd_sampling_gmvc_reg.smd_close2gmv_mvselect;
	if(MV_Sel==0)
		GMV = di_di_smd_sampling_gmvb_reg.smd_gmvb_y;
	else if(MV_Sel==1)
		GMV = di_di_smd_sampling_gmvc_reg.smd_gmvc_y;
	else
		GMV = di_di_smd_gmvcoeff3_reg.smd_gmv1_y;

	SmartPic_clue->GMV = GMV;
	#else

	SmartPic_clue->GMV = 0;

	#endif
	HMC_bin_hist[0] = im_di_pan_detection_statistic_9_reg.hmc_r16_pixelsum;
	HMC_bin_hist[1] = im_di_pan_detection_statistic_9_reg.hmc_r15_pixelsum;
	HMC_bin_hist[2] = im_di_pan_detection_statistic_10_reg.hmc_r14_pixelsum;
	HMC_bin_hist[3] = im_di_pan_detection_statistic_10_reg.hmc_r13_pixelsum;
	HMC_bin_hist[4] = im_di_pan_detection_statistic_11_reg.hmc_r12_pixelsum;
	HMC_bin_hist[5] = im_di_pan_detection_statistic_11_reg.hmc_r11_pixelsum;
	HMC_bin_hist[6] = im_di_pan_detection_statistic_12_reg.hmc_r10_pixelsum;
	HMC_bin_hist[7] = im_di_pan_detection_statistic_12_reg.hmc_r9_pixelsum;
	HMC_bin_hist[8] = im_di_pan_detection_statistic_13_reg.hmc_r8_pixelsum;
	HMC_bin_hist[9] = im_di_pan_detection_statistic_1_reg.hmc_r7_pixelsum;
	HMC_bin_hist[10] = im_di_pan_detection_statistic_1_reg.hmc_r6_pixelsum;
	HMC_bin_hist[11] = im_di_pan_detection_statistic_2_reg.hmc_r5_pixelsum;
	HMC_bin_hist[12] = im_di_pan_detection_statistic_2_reg.hmc_r4_pixelsum;
	HMC_bin_hist[13] = im_di_pan_detection_statistic_3_reg.hmc_r3_pixelsum;
	HMC_bin_hist[14] = im_di_pan_detection_statistic_3_reg.hmc_r2_pixelsum;
	HMC_bin_hist[15] = im_di_pan_detection_statistic_4_reg.hmc_r1_pixelsum;
	HMC_bin_hist[16] = im_di_pan_detection_statistic_4_reg.hmc_c0_pixelsum;
	HMC_bin_hist[17] = im_di_pan_detection_statistic_5_reg.hmc_l1_pixelsum;
	HMC_bin_hist[18] = im_di_pan_detection_statistic_5_reg.hmc_l2_pixelsum;
	HMC_bin_hist[19] = im_di_pan_detection_statistic_6_reg.hmc_l3_pixelsum;
	HMC_bin_hist[20] = im_di_pan_detection_statistic_6_reg.hmc_l4_pixelsum;
	HMC_bin_hist[21] = im_di_pan_detection_statistic_7_reg.hmc_l5_pixelsum;
	HMC_bin_hist[22] = im_di_pan_detection_statistic_7_reg.hmc_l6_pixelsum;
	HMC_bin_hist[23] = im_di_pan_detection_statistic_8_reg.hmc_l7_pixelsum;
	HMC_bin_hist[24] = im_di_pan_detection_statistic_13_reg.hmc_l8_pixelsum;
	HMC_bin_hist[25] = im_di_pan_detection_statistic_14_reg.hmc_l9_pixelsum;
	HMC_bin_hist[26] = im_di_pan_detection_statistic_14_reg.hmc_l10_pixelsum;
	HMC_bin_hist[27] = im_di_pan_detection_statistic_15_reg.hmc_l11_pixelsum;
	HMC_bin_hist[28] = im_di_pan_detection_statistic_15_reg.hmc_l12_pixelsum;
	HMC_bin_hist[29] = im_di_pan_detection_statistic_16_reg.hmc_l13_pixelsum;
	HMC_bin_hist[30] = im_di_pan_detection_statistic_16_reg.hmc_l14_pixelsum;
	HMC_bin_hist[31] = im_di_pan_detection_statistic_17_reg.hmc_l15_pixelsum;
	HMC_bin_hist[32] = im_di_pan_detection_statistic_17_reg.hmc_l16_pixelsum;

	#if 0  //k5l hw remove
	FMV_hist[0] =  di_gst_fmvhisa_reg.gst_fmv_his00;
	FMV_hist[1] =  di_gst_fmvhisa_reg.gst_fmv_his01;
	FMV_hist[2] =  di_gst_fmvhisb_reg.gst_fmv_his02;
	FMV_hist[3] =  di_gst_fmvhisb_reg.gst_fmv_his03;
	FMV_hist[4] =  di_gst_fmvhisc_reg.gst_fmv_his04;
	FMV_hist[5] =  di_gst_fmvhisc_reg.gst_fmv_his05;
	FMV_hist[6] =  di_gst_fmvhisd_reg.gst_fmv_his06;
	FMV_hist[7] =  di_gst_fmvhisd_reg.gst_fmv_his07;
	FMV_hist[8] =  di_gst_fmvhise_reg.gst_fmv_his08;
	FMV_hist[9] =  di_gst_fmvhise_reg.gst_fmv_his09;
	FMV_hist[10] = di_gst_fmvhisf_reg.gst_fmv_his10;
	FMV_hist[11] = di_gst_fmvhisg_reg.gst_fmv_his11;
	FMV_hist[12] = di_gst_fmvhisg_reg.gst_fmv_his12;
	FMV_hist[13] = di_gst_fmvhish_reg.gst_fmv_his13;
	FMV_hist[14] = di_gst_fmvhish_reg.gst_fmv_his14;
	FMV_hist[15] = di_gst_fmvhisi_reg.gst_fmv_his15;
	FMV_hist[16] = di_gst_fmvhisi_reg.gst_fmv_his16;
	FMV_hist[17] = di_gst_fmvhisj_reg.gst_fmv_his17;
	FMV_hist[18] = di_gst_fmvhisj_reg.gst_fmv_his18;
	FMV_hist[19] = di_gst_fmvhisk_reg.gst_fmv_his19;
	FMV_hist[20] = di_gst_fmvhisk_reg.gst_fmv_his20;

	sum = 1;
	for(i=0;i<FMV_Hist_Bin_Num;i++)
		sum = sum + FMV_hist[i];
	for(i=0;i<FMV_Hist_Bin_Num;i++)
		FMV_hist_ratio[i] = FMV_hist[i]*1000/sum;
	sum = 1;
	#else //k5l hw remove
 	for(i=0;i<FMV_Hist_Bin_Num;i++){
		FMV_hist[i]=0;
		HMC_bin_hist_ratio[i]=0;

	}
	#endif
	for(i=0;i<HMC_Hist_Bin_Num;i++)
		sum = sum + HMC_bin_hist[i];
	for(i=0;i<HMC_Hist_Bin_Num;i++)
		HMC_bin_hist_ratio[i] = HMC_bin_hist[i]*1000/sum;

#if 0
	//for debug.
	//if(((printf_Flag&_BIT0)!=0))
	{
		//if(MA_print_count%print_delay==0)
		{
			ROSPrintf_MadHist("FMV={%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d}\n",
				SmartPic_clue->FMV_hist_Ratio[0], SmartPic_clue->FMV_hist_Ratio[1], SmartPic_clue->FMV_hist_Ratio[2],
				SmartPic_clue->FMV_hist_Ratio[3], SmartPic_clue->FMV_hist_Ratio[4], SmartPic_clue->FMV_hist_Ratio[5],
				SmartPic_clue->FMV_hist_Ratio[6], SmartPic_clue->FMV_hist_Ratio[7], SmartPic_clue->FMV_hist_Ratio[8],
				SmartPic_clue->FMV_hist_Ratio[9], SmartPic_clue->FMV_hist_Ratio[10], SmartPic_clue->FMV_hist_Ratio[11],
				SmartPic_clue->FMV_hist_Ratio[12], SmartPic_clue->FMV_hist_Ratio[13], SmartPic_clue->FMV_hist_Ratio[14],
				SmartPic_clue->FMV_hist_Ratio[15], SmartPic_clue->FMV_hist_Ratio[16], SmartPic_clue->FMV_hist_Ratio[17],
				SmartPic_clue->FMV_hist_Ratio[18], SmartPic_clue->FMV_hist_Ratio[19], SmartPic_clue->FMV_hist_Ratio[20]);

			//for(i=0;i<FMV_Hist_Bin_Num;i++)
				//printk("%d,", SmartPic_clue->FMV_hist_Ratio[i]);
			//printk("}\n");
		}
	}
	//if(((printf_Flag&_BIT1)!=0))
	{
		//if(MA_print_count%print_delay==0)
		{
			printk("FMV HMC cal, HMC={");
			for(i=0;i<FMV_Hist_Bin_Num;i++)
				printk("%d,", SmartPic_clue->HMC_bin_hist_Ratio[i]);
			printk("}\n");
		}
	}
#else
	ROSPrintf_FMC_HMC("FMV={%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d}\n",
		SmartPic_clue->FMV_hist_Ratio[0], SmartPic_clue->FMV_hist_Ratio[1], SmartPic_clue->FMV_hist_Ratio[2],
		SmartPic_clue->FMV_hist_Ratio[3], SmartPic_clue->FMV_hist_Ratio[4], SmartPic_clue->FMV_hist_Ratio[5],
		SmartPic_clue->FMV_hist_Ratio[6], SmartPic_clue->FMV_hist_Ratio[7], SmartPic_clue->FMV_hist_Ratio[8],
		SmartPic_clue->FMV_hist_Ratio[9], SmartPic_clue->FMV_hist_Ratio[10], SmartPic_clue->FMV_hist_Ratio[11],
		SmartPic_clue->FMV_hist_Ratio[12], SmartPic_clue->FMV_hist_Ratio[13], SmartPic_clue->FMV_hist_Ratio[14],
		SmartPic_clue->FMV_hist_Ratio[15], SmartPic_clue->FMV_hist_Ratio[16], SmartPic_clue->FMV_hist_Ratio[17],
		SmartPic_clue->FMV_hist_Ratio[18], SmartPic_clue->FMV_hist_Ratio[19], SmartPic_clue->FMV_hist_Ratio[20]);

	ROSPrintf_FMC_HMC("HMC={%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d}\n",
		SmartPic_clue->HMC_bin_hist_Ratio[0], SmartPic_clue->HMC_bin_hist_Ratio[1], SmartPic_clue->HMC_bin_hist_Ratio[2],
		SmartPic_clue->HMC_bin_hist_Ratio[3], SmartPic_clue->HMC_bin_hist_Ratio[4], SmartPic_clue->HMC_bin_hist_Ratio[5],
		SmartPic_clue->HMC_bin_hist_Ratio[6], SmartPic_clue->HMC_bin_hist_Ratio[7], SmartPic_clue->HMC_bin_hist_Ratio[8],
		SmartPic_clue->HMC_bin_hist_Ratio[9], SmartPic_clue->HMC_bin_hist_Ratio[10], SmartPic_clue->HMC_bin_hist_Ratio[11],
		SmartPic_clue->HMC_bin_hist_Ratio[12], SmartPic_clue->HMC_bin_hist_Ratio[13], SmartPic_clue->HMC_bin_hist_Ratio[14],
		SmartPic_clue->HMC_bin_hist_Ratio[15], SmartPic_clue->HMC_bin_hist_Ratio[16], SmartPic_clue->HMC_bin_hist_Ratio[17],
		SmartPic_clue->HMC_bin_hist_Ratio[18], SmartPic_clue->HMC_bin_hist_Ratio[19], SmartPic_clue->HMC_bin_hist_Ratio[20],
		SmartPic_clue->HMC_bin_hist_Ratio[21], SmartPic_clue->HMC_bin_hist_Ratio[22], SmartPic_clue->HMC_bin_hist_Ratio[23],
		SmartPic_clue->HMC_bin_hist_Ratio[24], SmartPic_clue->HMC_bin_hist_Ratio[25], SmartPic_clue->HMC_bin_hist_Ratio[26],
		SmartPic_clue->HMC_bin_hist_Ratio[27], SmartPic_clue->HMC_bin_hist_Ratio[28], SmartPic_clue->HMC_bin_hist_Ratio[29],
		SmartPic_clue->HMC_bin_hist_Ratio[30], SmartPic_clue->HMC_bin_hist_Ratio[31], SmartPic_clue->HMC_bin_hist_Ratio[32]);

#endif
}

#ifdef ISR_NR_IMPULSE_FUNCTIOM_ENABLE
//RenChen sync from L3300
void drvif_color_noisereduction_impulse(unsigned char channel, unsigned char level, unsigned char bNoiseReductionMode)
{
	unsigned char impulse_check[1];
	unsigned char i, impulse_check_count=0,check_loop_count=0;

	nr_dch1_cp_ctrl_RBUS dch1_CP_Ctrl_reg;
	dch1_CP_Ctrl_reg.regValue = scaler_rtd_inl(NR_DCH1_CP_Ctrl_reg);
	 if(level==0)
	 {
	 	dch1_CP_Ctrl_reg.cp_impulseenable = 0x0;
	 }
    	else
    	{
		dch1_CP_Ctrl_reg.cp_impulseenable = 0x1;//enable impulse NR
    	}
	scaler_rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_CP_Ctrl_reg.regValue);


	impulse_check[0] = dch1_CP_Ctrl_reg.cp_impulseenable;
	//=========for check double buffer write error=================================
	do{
		BusyCheckRegBit(VGIP_VGIP_CHN1_STATUS_reg, _BIT26,0x0001FFFF);//frank@0430 change wait vsync start
		//WaitFor_IEN_STOP1();

		dch1_CP_Ctrl_reg.regValue = scaler_rtd_inl(NR_DCH1_CP_Ctrl_reg);
		impulse_check_count = 0;
		check_loop_count++;

		for(i=0;i<1;i++)
		{
			switch(i)
			{
				case 0:
					if(impulse_check[0] == dch1_CP_Ctrl_reg.cp_impulseenable)
						impulse_check_count++;
					else
					{
						dch1_CP_Ctrl_reg.cp_impulseenable=impulse_check[0];
					}
					break;
				default:
					break;
			}

		}

		if(impulse_check_count<1)
		{

			scaler_rtd_outl(NR_DCH1_CP_Ctrl_reg, dch1_CP_Ctrl_reg.regValue);
		}
		else
			printf("cp_impulseenable reg write setting [OK]\n");

	}while(impulse_check_count<1 && check_loop_count<6 );
	//=================================================================
}
#endif

//Main function END

#if 0
// Hawaii add for Edge Peaking 20131022
unsigned int drvif_color_2parts_linear_interpolation(unsigned int min, unsigned int max, unsigned int middle ,unsigned int OSD_sharp_level)  //OSD_sharp_level=0~100
{
	unsigned int data;

	if(OSD_sharp_level<=50)
	{
		data = (unsigned int)(min+(middle-min)*OSD_sharp_level/50);
	}
	else
	{
		data = (unsigned int)(middle+(max-middle)*(OSD_sharp_level-50)/50);

	}
	return data;

}
// Hawaii add for Edge Peaking 20131022
int check_range(int data, int min, int max)
{
	if (data < min) data = min;
	if (data > max) data = max;
	return data;
}

void scalerVIP_RTNR_K_force(void)
{
	if(RTNR_K_force_level != 0)
	{
		di_im_di_rtnr_k_force_modify_RBUS im_di_rtnr_k_force_modify_reg;
		im_di_rtnr_k_force_modify_reg.regValue = rtd_inl(DI_IM_DI_RTNR_K_FORCE_MODIFY_reg);
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_00 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_01 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_02 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_03 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_04 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_10 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_11 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_12 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_13 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_14 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_20 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_21 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_22 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_23 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_0_24 = 1;
		im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_offset = RTNR_K_force_offset;
		if(MA_print_count%RTNR_K_force_level == 0)
		{
			im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_en_y = 1;
		}
		else
		{
			im_di_rtnr_k_force_modify_reg.cp_rtnr_k_force_modify_en_y = 0;
		}
		rtd_outl(DI_IM_DI_RTNR_K_FORCE_MODIFY_reg, im_di_rtnr_k_force_modify_reg.regValue);
	}
}
#endif


//Elsie 20131025: move from AP
INT32* sRGB_Hue_Sat_Table;
void scalerVIP_sRGB_Hue_Sat_Table(unsigned long arg)
{
	sRGB_Hue_Sat_Table = (INT32*)arg;
}

unsigned int* pGamma_Table=NULL;
#ifdef CONFIG_ARM64 //ARM32 compatible
void scalerVIP_Set_Gamma_Table(unsigned long arg)
#else
void scalerVIP_Set_Gamma_Table(unsigned int arg)
#endif
{
	pGamma_Table = (unsigned int*)arg;
}

#if 0
void scalerVIP_sRGB_HueSat_Write(void)
{
	srgb_srgb_ctrl_RBUS  SRGB_ctrl_reg;
	srgb_srgb_access_ctrl_RBUS  SRGB_access_ctrl_reg;
	srgb_srgb_access_port_RBUS	 SRGB_access_port_reg;
	signed short ii, jj, kk, mm;
	signed short index_gain[2];

	if(sRGB_Hue_Sat_Table)
	{
		for(mm = 0; mm < 3; mm++)
		{
			// channel switch  SRGB_ACCESS_CTRL_reg
			SRGB_access_ctrl_reg.regValue=rtd_inl(SRGB_SRGB_ACCESS_CTRL_reg);
			switch(mm)
			{
				case 0:  // start with RR, GR, BR channels
					SRGB_access_ctrl_reg.srgb_rgb_sel=1;
					break;
				case 1:  // start with RG, GG, BG channels
					SRGB_access_ctrl_reg.srgb_rgb_sel=2;
					break;
				case 2:  // start with RB, GB, BB channels
					SRGB_access_ctrl_reg.srgb_rgb_sel=3;
					break;
			}
			rtd_outl(SRGB_SRGB_ACCESS_CTRL_reg, SRGB_access_ctrl_reg.regValue);

			for (ii =0; ii < 32; ii++)
			{
				wait_for_sRGB_fifo_empty_isr();
				for(jj = mm*3; jj < (mm*3 + 3); jj++)
				{
					index_gain[0] = *(sRGB_Hue_Sat_Table+jj*33+ii);// & 0xfff00 ; // RR GR BR RG GG BG RB GB BB
					kk = *(sRGB_Hue_Sat_Table+jj*33+ii+1) - *(sRGB_Hue_Sat_Table+jj*33+ii); // grid distance  = 256 (8-bit), gain = >> 8  << 5
					index_gain[1] = kk >>2; // 3 -> 2 fix bit error by March 20090629;
					index_gain[1]&=0x3ff;

					// write fifo  SRGB_ACCESS_PORT_reg
					SRGB_access_port_reg.srgb_index=index_gain[0];
					SRGB_access_port_reg.srgb_gain=index_gain[1];
					//RTD_Log(LOGGER_INFO,"sRGB =============%x\n",SRGB_access_port_reg.regValue);
					rtd_outl(SRGB_SRGB_ACCESS_PORT_reg, SRGB_access_port_reg.regValue);
				}
			}
		}

		// close table access
		SRGB_access_ctrl_reg.regValue=rtd_inl(SRGB_SRGB_ACCESS_CTRL_reg);
		SRGB_access_ctrl_reg.srgb_rgb_sel=0;
		rtd_outl(SRGB_SRGB_ACCESS_CTRL_reg, SRGB_access_ctrl_reg.regValue);

	 	 // enable sRGB  SRGB_CTRL_reg
		SRGB_ctrl_reg.regValue=rtd_inl(SRGB_SRGB_CTRL_reg);
		 // main always tab-1
		SRGB_ctrl_reg.srgb_m_tab_sel=1;
		rtd_outl(SRGB_SRGB_CTRL_reg, SRGB_ctrl_reg.regValue);

		sRGB_Hue_Sat_Table = NULL;
	}
}
#else
void scalerVIP_sRGB_HueSat_Write(void)
{
#if 0 //k5l hw remove
	srgb_srgb_ctrl_RBUS  SRGB_ctrl_reg;
	srgb_srgb_access_ctrl_RBUS  SRGB_access_ctrl_reg;
	srgb_srgb_access_port_RBUS	 SRGB_access_port_reg;
	signed short ii, jj, kk, mm;
	signed short index_gain[2];

	if(sRGB_Hue_Sat_Table && pGamma_Table == NULL)
	{
		 // disable sRGB  and tab_size = 64
		  SRGB_ctrl_reg.regValue=rtd_inl(SRGB_sRGB_CTRL_reg);
		 //Elsie 20140724: table size has been fixed to 128
		  SRGB_ctrl_reg.srgb_tab_size_sel=0; // [0] tab_size=128; [1] tab_size=64;
		  SRGB_ctrl_reg.srgb_m_tab_sel=0; // disable sRGB
		  SRGB_ctrl_reg.srgb_s_tab_sel=0; //20150917 roger, set the same setting to sub, for LGE zoom function
		  rtd_outl(SRGB_sRGB_CTRL_reg, SRGB_ctrl_reg.regValue);

		for(mm = 0; mm < 3; mm++)
		{
			// channel switch  SRGB_ACCESS_CTRL_reg
			SRGB_access_ctrl_reg.regValue=rtd_inl(SRGB_sRGB_Access_CTRL_reg);
			switch(mm)
			{
				case 0:  // start with RR, GR, BR channels
					SRGB_access_ctrl_reg.srgb_rgb_sel=1;
					break;
				case 1:  // start with RG, GG, BG channels
					SRGB_access_ctrl_reg.srgb_rgb_sel=2;
					break;
				case 2:  // start with RB, GB, BB channels
					SRGB_access_ctrl_reg.srgb_rgb_sel=3;
					break;
			}
			SRGB_access_ctrl_reg.srgb_tab_sel=0; // write in table1
			rtd_outl(SRGB_sRGB_Access_CTRL_reg, SRGB_access_ctrl_reg.regValue);

			for (ii =0; ii < 128; ii++)
			{
				if(ii == 64)
				{
					SRGB_access_ctrl_reg.regValue = rtd_inl(SRGB_sRGB_Access_CTRL_reg);
					SRGB_access_ctrl_reg.srgb_tab_sel=1; // write in table2
					rtd_outl(SRGB_sRGB_Access_CTRL_reg, SRGB_access_ctrl_reg.regValue);
				}
				wait_for_sRGB_fifo_empty_isr();
				for(jj = mm*3; jj < (mm*3 + 3); jj++)
				{
					index_gain[0] = *(sRGB_Hue_Sat_Table+jj*129+ii);// & 0xfff00 ; // RR GR BR RG GG BG RB GB BB
					kk = *(sRGB_Hue_Sat_Table+jj*129+ii+1) - *(sRGB_Hue_Sat_Table+jj*129+ii); // grid distance  = 256 (8-bit), gain = >> 8  << 5
					index_gain[1] = kk >>2; // 3 -> 2 fix bit error by March 20090629;
					index_gain[1]&=0x3ff;

					// write fifo  SRGB_ACCESS_PORT_reg
					SRGB_access_port_reg.srgb_index=index_gain[0];
					SRGB_access_port_reg.srgb_gain=index_gain[1];
					//RTD_Log(LOGGER_INFO,"sRGB =============%x\n",SRGB_access_port_reg.regValue);
					rtd_outl(SRGB_sRGB_ACCESS_PORT_reg, SRGB_access_port_reg.regValue);
				}
			}
			wait_for_sRGB_fifo_empty_isr();
		}

		// close table access
		SRGB_access_ctrl_reg.regValue=rtd_inl(SRGB_sRGB_Access_CTRL_reg);
		SRGB_access_ctrl_reg.srgb_rgb_sel=0;
		rtd_outl(SRGB_sRGB_Access_CTRL_reg, SRGB_access_ctrl_reg.regValue);

	 	 // enable sRGB  SRGB_CTRL_reg
		SRGB_ctrl_reg.regValue=rtd_inl(SRGB_sRGB_CTRL_reg);
		SRGB_ctrl_reg.srgb_tab_size_sel=0; // [0] tab_size=128; [1] tab_size=64;
		SRGB_ctrl_reg.srgb_m_tab_sel=1; // main always tab-1
		SRGB_ctrl_reg.srgb_s_tab_sel=1; //20150917 roger, set the same setting to sub, for LGE zoom function
		rtd_outl(SRGB_sRGB_CTRL_reg, SRGB_ctrl_reg.regValue);

		sRGB_Hue_Sat_Table = NULL;
		/*
		if(MA_print_count%360==0)
 		{
			ROSPrintf("scalerVIP_sRGB_HueSat_Write End\n");
		}
		*/
	}

#endif
}

#endif
#if 0
void drvif_color_colorwritegamma_isr(unsigned int *pArray)
{
#ifdef TEST_SKIP_WRITE_GAMMA
	return;
#endif
	/*VIPprintf("gamma start ===================\n");*/
	unsigned short ii, cnt = 10000;
	gamma_gamma_port_RBUS gamma_port_REG;
	gamma_gamma_ctrl_1_RBUS gamma_ctrl_1_REG;
	unsigned char status = 1;

	/*Thur modified for compile 20090113*/
	/*BusyCheckRegBit(DDOMAIN_MAIN_DISPLAY_CONTROL_RSV_reg,_BIT10, 0x0001FFFF);*/
	/*frank@0902 mark to speed code */ /*BusyCheckRegBit(PPOVERLAY_Main_Display_Control_RSV_reg,_BIT10, 0x0001FFFF);*/
	/*ROS_ENTER_CRITICAL();*/

	/*rtdf_clearBits(GAMMA_GAMMA_CTRL_1_reg, _BIT6);*/
	gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
	/*gamma_ctrl_1_REG.gamma_ax_tab_sel = 0;*/ /* write table1 [jyyang@ Mac3] only main channel and one 512 table*/
	rtd_outl(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);

	for (ii = 0; ii < 512; ii++) { /* Num of index: Mac2 = 128, Sirius = 512 (jyyang_2013/12/25)*/

		#if 0
		if (ii == 256) {
			gamma_ctrl_1_REG.regValue = IoReg_Read32(GAMMA_GAMMA_CTRL_1_reg);
			gamma_ctrl_1_REG.gamma_ax_tab_sel = 1;/* write table2*/
			IoReg_Write32(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
		} /*[jyyang@ Mac3] only main channel and one 512 table*/
		#endif
		status = 1;
		cnt = 10000;
		/*
		gamma_port_REG.index 	= (pArray[ii*3] << 2) + ((pArray[ii*3 + 1] >> 6)&0x03);
		gamma_port_REG.d0 		= pArray[ii*3 + 1]&0x1f;
		gamma_port_REG.d1 		= pArray[ii*3 + 2]&0x1f;
		*/
		gamma_port_REG.regValue = pArray[ii];
		/*if (ii % 31 == 0)*/
			/*VIPprintf("GAMMA[%d] = 0x%x\n", ii, pArray[ii]);*/
		rtd_outl(GAMMA_GAMMA_PORT_reg, gamma_port_REG.regValue);

		while ((cnt--) && (status) && ((ii % 16) == 15)) { /*20071217 jason(jeffery) modified*/

			gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
			status =  (gamma_ctrl_1_REG.gamma_fifo_empty == 1) ? 0 : 1;
		}
	}
	/*VIPprintf("gamma end ===================\n");*/
	/*ROS_EXIT_CRITICAL();*/

}
#else
void drvif_color_colorwritegamma_isr(unsigned int *pArray , VIP_GAMMA_CHANNEL_RGB_ISR Channel)
{

#if 0 //off line write
	/*VIPprintf("gamma start ===================\n");*/
	unsigned short ii, cnt = 10000;
	gamma_gamma_port_RBUS gamma_port_REG;
	gamma_gamma_ctrl_1_RBUS gamma_ctrl_1_REG;
	gamma_gamma_ctrl_2_RBUS gamma_ctrl_2_REG;

	unsigned char status = 1;

	unsigned int p0, p1, p;
	unsigned int index0, index1;
	unsigned int delta0, delta1;

	gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
	gamma_ctrl_2_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_2_reg);

	gamma_ctrl_1_REG.gamma_ax_rw_sel = 1; //1= writing 0:read
	gamma_ctrl_1_REG.gamma_ax_tab_sel = 0; // 0 = select table1

	gamma_ctrl_2_REG.gamma_m_tab_sel = 0;  // 0:disable gamma 1:table1 2: table2
	gamma_ctrl_2_REG.gamma_tab_size_sel = 1;  // 0:table size 512 1:table:size 256

	gamma_ctrl_1_REG.gamma_ax_ch_sel = Channel;



	rtd_outl(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
	rtd_outl(GAMMA_GAMMA_CTRL_2_reg, gamma_ctrl_2_REG.regValue);


	for (ii = 0; ii < 512; ii+=2) { /* Num of index: Mac2 = 128, Sirius = 512 (jyyang_2013/12/25)*/

		#if 0
		if (ii == 256) {
			gamma_ctrl_1_REG.regValue = IoReg_Read32(GAMMA_GAMMA_CTRL_1_reg);
			gamma_ctrl_1_REG.gamma_ax_tab_sel = 1;/* write table2*/
			IoReg_Write32(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
		} /*[jyyang@ Mac3] only main channel and one 512 table*/
		#endif
		status = 1;
		cnt = 10000;
		/*
		gamma_port_REG.index 	= (pArray[ii*3] << 2) + ((pArray[ii*3 + 1] >> 6)&0x03);
		gamma_port_REG.d0 		= pArray[ii*3 + 1]&0x1f;
		gamma_port_REG.d1 		= pArray[ii*3 + 2]&0x1f;
		*/
		p0 = pArray[ii];
		p1 = pArray[ii+1];
		index0 = p0>>16;
		delta0 = ((p0>>8)+p0)&0xff;
		index1 = p1>>16;
		delta1 = ((p1>>8)+p1)&0xff;
		p = ((index0)<<16) + ((delta0&0xff)<<8 )+ (delta1&0xff);
		gamma_port_REG.regValue = p;
		/*if (ii % 31 == 0)*/
			/*VIPprintf("GAMMA[%d] = 0x%x\n", ii, pArray[ii]);*/
		rtd_outl(GAMMA_GAMMA_PORT_reg, gamma_port_REG.regValue);

		while ((cnt--) && (status) && ((ii % 16) == 15)) { /*20071217 jason(jeffery) modified*/

			gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
			status =  (gamma_ctrl_1_REG.gamma_fifo_empty == 1) ? 0 : 1;
		}
	}

	gamma_ctrl_1_REG.gamma_ax_rw_sel = 0; /* writing table*/
	gamma_ctrl_2_REG.gamma_m_tab_sel = 1; /* use tab-1*/


	rtd_outl(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
	rtd_outl(GAMMA_GAMMA_CTRL_2_reg, gamma_ctrl_2_REG.regValue);


	/*VIPprintf("gamma end ===================\n");*/
	/*ROS_EXIT_CRITICAL();*/
#elif 0 // on line write /half

/*VIPprintf("gamma start ===================\n");*/
unsigned short ii, cnt = 10000;
gamma_gamma_port_RBUS gamma_port_REG;
gamma_gamma_ctrl_1_RBUS gamma_ctrl_1_REG;
gamma_gamma_ctrl_2_RBUS gamma_ctrl_2_REG;

unsigned char status = 1;
unsigned char status2 = 1; // fifo_full

unsigned int p0, p1, p;
unsigned int index0, index1;
unsigned int delta0, delta1;


while ((cnt--) && (status)&& (status2)) { /*20071217 jason(jeffery) modified*/

	gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
	status =  (gamma_ctrl_1_REG.gamma_fifo_empty == 1) ? 0 : 1;
	status2 =  (gamma_ctrl_1_REG.gamma_fifo_full == 0) ? 0 : 1;
}


gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
gamma_ctrl_2_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_2_reg);

gamma_ctrl_1_REG.gamma_ax_rw_sel = 1; //1= writing 0:read
gamma_ctrl_1_REG.gamma_ax_tab_sel = 0; // 0 = select table1

gamma_ctrl_2_REG.gamma_m_tab_sel = 1;  // 0:disable gamma 1:table1 2: table2
gamma_ctrl_2_REG.gamma_tab_size_sel = 1;  // 0:table size 512 1:table:size 256

gamma_ctrl_1_REG.gamma_ax_ch_sel = Channel;



rtd_outl(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
rtd_outl(GAMMA_GAMMA_CTRL_2_reg, gamma_ctrl_2_REG.regValue);


for (ii = 0; ii < 512; ii+=2) { /* Num of index: Mac2 = 128, Sirius = 512 (jyyang_2013/12/25)*/

	#if 0
	if (ii == 256) {
		gamma_ctrl_1_REG.regValue = IoReg_Read32(GAMMA_GAMMA_CTRL_1_reg);
		gamma_ctrl_1_REG.gamma_ax_tab_sel = 1;/* write table2*/
		IoReg_Write32(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
	} /*[jyyang@ Mac3] only main channel and one 512 table*/
	#endif
	status = 1;
	cnt = 10000;
	/*
	gamma_port_REG.index	= (pArray[ii*3] << 2) + ((pArray[ii*3 + 1] >> 6)&0x03);
	gamma_port_REG.d0		= pArray[ii*3 + 1]&0x1f;
	gamma_port_REG.d1		= pArray[ii*3 + 2]&0x1f;
	*/
	p0 = pArray[ii];
	p1 = pArray[ii+1];
	index0 = p0>>16;
	delta0 = ((p0>>8)+p0)&0xff;
	index1 = p1>>16;
	delta1 = ((p1>>8)+p1)&0xff;
	p = ((index0)<<16) + ((delta0&0xff)<<8 )+ (delta1&0xff);
	gamma_port_REG.regValue = p;
	/*if (ii % 31 == 0)*/
		/*VIPprintf("GAMMA[%d] = 0x%x\n", ii, pArray[ii]);*/
	rtd_outl(GAMMA_GAMMA_PORT_reg, gamma_port_REG.regValue);
	status =1;
	status2 =1;

	while ((cnt--) && (status)&& (status2) && ((ii % 32) == 30)) { /*20071217 jason(jeffery) modified*/

		gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
		status =  (gamma_ctrl_1_REG.gamma_fifo_empty == 1) ? 0 : 1;
		status2 =  (gamma_ctrl_1_REG.gamma_fifo_full == 0) ? 0 : 1;
	}
}

gamma_ctrl_1_REG.gamma_ax_rw_sel = 0; /* writing table*/
gamma_ctrl_2_REG.gamma_m_tab_sel = 1; /* use tab-1*/


rtd_outl(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
rtd_outl(GAMMA_GAMMA_CTRL_2_reg, gamma_ctrl_2_REG.regValue);


/*VIPprintf("gamma end ===================\n");*/
/*ROS_EXIT_CRITICAL();*/

#else
/*VIPprintf("gamma start ===================\n");*/
unsigned short ii, cnt = 10000;
gamma_gamma_port_RBUS gamma_port_REG;
gamma_gamma_ctrl_1_RBUS gamma_ctrl_1_REG;
gamma_gamma_ctrl_2_RBUS gamma_ctrl_2_REG;

unsigned char status = 1;
//unsigned char status2 = 1; // fifo_full

//unsigned int p0, p1, p;
//unsigned int index0, index1;
//unsigned int delta0, delta1;

#if 0
while ((cnt--) && (status)&& (status2)) { /*20071217 jason(jeffery) modified*/

	gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
	status =  (gamma_ctrl_1_REG.gamma_fifo_empty == 1) ? 0 : 1;
	status2 =  (gamma_ctrl_1_REG.gamma_fifo_full == 0) ? 0 : 1;
}
#endif

gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
gamma_ctrl_2_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_2_reg);

gamma_ctrl_1_REG.gamma_ax_rw_sel = 1; //1= writing 0:read
gamma_ctrl_1_REG.gamma_ax_tab_sel = 0; // 0 = select table1

gamma_ctrl_2_REG.gamma_m_tab_sel = 1;  // 0:disable gamma 1:table1 2: table2
gamma_ctrl_2_REG.gamma_tab_size_sel = 0;  // 0:table size 512 1:table:size 256

gamma_ctrl_1_REG.gamma_ax_ch_sel = Channel;



rtd_outl(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
rtd_outl(GAMMA_GAMMA_CTRL_2_reg, gamma_ctrl_2_REG.regValue);


for (ii = 0; ii < 512; ii++) { /* Num of index: Mac2 = 128, Sirius = 512 (jyyang_2013/12/25)*/

	#if 0
	if (ii == 256) {
		gamma_ctrl_1_REG.regValue = IoReg_Read32(GAMMA_GAMMA_CTRL_1_reg);
		gamma_ctrl_1_REG.gamma_ax_tab_sel = 1;/* write table2*/
		IoReg_Write32(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
	} /*[jyyang@ Mac3] only main channel and one 512 table*/
	#endif
	status = 1;
	cnt = 10000;
	/*
	gamma_port_REG.index 	= (pArray[ii*3] << 2) + ((pArray[ii*3 + 1] >> 6)&0x03);
	gamma_port_REG.d0 		= pArray[ii*3 + 1]&0x1f;
	gamma_port_REG.d1 		= pArray[ii*3 + 2]&0x1f;
	*/
	gamma_port_REG.regValue = pArray[ii];
	/*if (ii % 31 == 0)*/
		/*VIPprintf("GAMMA[%d] = 0x%x\n", ii, pArray[ii]);*/
	rtd_outl(GAMMA_GAMMA_PORT_reg, gamma_port_REG.regValue);

	while ((cnt--) && (status) && ((ii % 16) == 15)) { /*20071217 jason(jeffery) modified*/

		gamma_ctrl_1_REG.regValue = rtd_inl(GAMMA_GAMMA_CTRL_1_reg);
		status =  (gamma_ctrl_1_REG.gamma_fifo_empty == 1) ? 0 : 1;
	}
}

gamma_ctrl_1_REG.gamma_ax_rw_sel = 0; /* writing table*/
gamma_ctrl_2_REG.gamma_m_tab_sel = 1; /* use tab-1*/


rtd_outl(GAMMA_GAMMA_CTRL_1_reg, gamma_ctrl_1_REG.regValue);
rtd_outl(GAMMA_GAMMA_CTRL_2_reg, gamma_ctrl_2_REG.regValue);


/*VIPprintf("gamma end ===================\n");*/
/*ROS_EXIT_CRITICAL();*/






#endif
}
#endif



void fwif_color_set_gamma_encode_isr(unsigned int *final_GAMMA_R, unsigned int *final_GAMMA_G, unsigned int *final_GAMMA_B)
{
	drvif_color_colorwritegamma_isr(final_GAMMA_G, GAMMA_CHANNEL_G_ISR);	/*G*/
	drvif_color_colorwritegamma_isr(final_GAMMA_R, GAMMA_CHANNEL_R_ISR);	/*R*/
	drvif_color_colorwritegamma_isr(final_GAMMA_B, GAMMA_CHANNEL_B_ISR);	/*B*/
}


void scalerVIP_Gamma_Table_Write(void)
{

//unsigned int xx=0;

//scaleup_d_uzu_globle_ctrl_RBUS d_uzu_Globle_Ctrl_reg;

//system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();

//unsigned int printf_Flag=0,print_delay=0;
//printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
//print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;


//color_dcc_d_dcc_fwused_2_RBUS  d_dcc_fwused_2_reg;
//color_dcc_d_dcc_fwused_3_RBUS  d_dcc_fwused_3_reg;

//d_dcc_fwused_2_reg.regValue = rtd_inl(COLOR_DCC_D_DCC_FWUSED_2_reg);
//d_dcc_fwused_3_reg.regValue = rtd_inl(COLOR_DCC_D_DCC_FWUSED_3_reg);


//if(d_dcc_fwused_2_reg.regValue==0x81)

//{
//	d_uzu_Globle_Ctrl_reg.regValue = rtd_inl(SCALEUP_D_UZU_GLOBLE_CTRL_reg);
//	d_uzu_Globle_Ctrl_reg.patgen_sel =0;

//	rtd_outl(SCALEUP_D_UZU_GLOBLE_CTRL_reg, d_uzu_Globle_Ctrl_reg.regValue);

//}

//if(d_dcc_fwused_2_reg.regValue==0x83)
//{
//	d_uzu_Globle_Ctrl_reg.regValue = rtd_inl(SCALEUP_D_UZU_GLOBLE_CTRL_reg);
//	d_uzu_Globle_Ctrl_reg.patgen_sel =3;

//	rtd_outl(SCALEUP_D_UZU_GLOBLE_CTRL_reg, d_uzu_Globle_Ctrl_reg.regValue);

//}



//new_meas1_linecnt_real_Reg.regValue=IoReg_Read32(PPOVERLAY_new_meas1_linecnt_real_reg);
//precnt=new_meas1_linecnt_real_Reg.memcdtg_line_cnt_rt;



//new_meas1_linecnt_real_Reg.regValue=IoReg_Read32(PPOVERLAY_new_meas1_linecnt_real_reg);
//postcnt=new_meas1_linecnt_real_Reg.memcdtg_line_cnt_rt;

//postcnt = IoReg_Read32(0xb801b6a8);






#if 1
	if(pGamma_Table)
	{
		unsigned int* pGamma_Table_tmp = pGamma_Table;
		pGamma_Table = NULL;
		//static unsigned char ss=0;
		//ss++;
		//xx = rtd_inl(0xb802ac00);
		//rtd_outl(0xb802ac00,xx&0xFFFE);
		//inv_gamma_inv_gamma_ctrl_2_RBUS inv_gamma_ctrl_2_REG;

		//inv_gamma_ctrl_2_REG.regValue = rtd_inl(INV_GAMMA_INV_GAMMA_CTRL_2_reg);

		//if(ss%2==0)
		//inv_gamma_ctrl_2_REG.inv_gamma_m_tab_sel = 0; /* use tab-1*/
		//else
		///inv_gamma_ctrl_2_REG.inv_gamma_m_tab_sel = 1; /* use tab-1*/

		//rtd_outl(INV_GAMMA_INV_GAMMA_CTRL_2_reg, inv_gamma_ctrl_2_REG.regValue);

		fwif_color_set_gamma_encode_isr(pGamma_Table_tmp, pGamma_Table_tmp+512, pGamma_Table_tmp+1024);
		//rtd_outl(0xb802ac00,xx|0x1);




	}
#else

if(pGamma_Table)
{
	unsigned int* pGamma_Table_tmp = pGamma_Table;

	drvif_color_gamma_control_front(SLR_MAIN_DISPLAY);
	//fwif_color_set_gamma_encode_isr(pGamma_Table_tmp, pGamma_Table_tmp+512, pGamma_Table_tmp+1024);
	static unsigned char temp=0;
	if(temp==0)
	{
		fwif_color_Gamma_Curve_Write(pGamma_Table_tmp, GAMMA_CHANNEL_R);	/*R*/
	 	temp=1;

	}
	else if (temp==1)
	{
		fwif_color_Gamma_Curve_Write(pGamma_Table_tmp+512, GAMMA_CHANNEL_G);	/*G*/
		temp=2;

	}
	else if(temp==2)
	{
		fwif_color_Gamma_Curve_Write(pGamma_Table_tmp+1024, GAMMA_CHANNEL_B);	/*B*/

		temp=0;
		pGamma_Table = NULL;

	}



	drvif_color_gamma_control_back(SLR_MAIN_DISPLAY,1);

}


#endif

}

void wait_for_sRGB_fifo_empty_isr(void)
{
#if 0 //k5l hw remove

	srgb_srgb_access_ctrl_RBUS  SRGB_access_ctrl_reg;
	signed short fifo_count = 5000;
	unsigned char status = 1;

	do
	{
		SRGB_access_ctrl_reg.regValue=rtd_inl(SRGB_sRGB_Access_CTRL_reg);
		if(SRGB_access_ctrl_reg.srgb_fifo_empty== 1)
			status = 0;
		else
			fifo_count --;
	}

	while((fifo_count > 0)&&(status));
	if(status)
		ROSPrintf("sRGB Control write fifo error\n");
#endif
}
#if 0 //VIP_100_4 project
void scalerVIP_100_4_Bright_Plus(void)
{
	//if(Scaler_GetAutoMA(BP_EN) == 0)
		//return;

	if(COEFF_BY_Y_REG==NULL)
		return;

	unsigned int debug_tmp = rtd_inl(COLOR_DCC_DS_INTERP_DATA_70_reg);

	if((((debug_tmp&_BIT0)>>0)==1) && (((debug_tmp&_BIT1)>>1)==1))
		return;

	unsigned char i = 0, j = 0, k = 0;
	unsigned char APL = 0;
//	unsigned char cur_Gain_Value = 100;
	unsigned char G1 = 108;
	unsigned char G2 = 100;
	unsigned char P1 = 40;
	unsigned char P2 = 150;
	unsigned char Max_Bright_bin= 32;
//	unsigned char pre_Gain_Value = Scaler_GetAutoMA(pre_BP_Gain_Value);

	unsigned int coef_tmp[YUV2RGB_COEF_BY_Y_Seg_Num][3][3];
	unsigned char com_flag[YUV2RGB_COEF_BY_Y_Seg_Num][3][3];

	if((((debug_tmp&_BIT0)>>0)==1))
	{
		G1 = (debug_tmp&0xff00)>>8;
	}


	unsigned int Gain_Value = 100;
	unsigned int DC_average = 0;
	unsigned int Total_HistCnt = 0;

	d_yuv2rgb_control_1_RBUS d_yuv2rgb_control_1_reg;
	d_yuv2rgb_control_1_reg.regValue = rtd_inl(YUV2RGB_D_YUV2RGB_CONTROL_1_reg);
	d_yuv2rgb_control_1_reg.yuv2rgb_double_buffer_en=1;
	rtd_outl(YUV2RGB_D_YUV2RGB_CONTROL_1_reg, d_yuv2rgb_control_1_reg.regValue);

#if 1	//lsie 20131126: FIXME
	d_yuv2rgb_tab1_data_0_RBUS d_yuv2rgb_tab1_data_0_REG;
	d_yuv2rgb_tab1_data_1_RBUS d_yuv2rgb_tab1_data_1_REG;
	d_yuv2rgb_tab1_data_2_RBUS d_yuv2rgb_tab1_data_2_REG;
	d_yuv2rgb_tab1_data_3_RBUS d_yuv2rgb_tab1_data_3_REG;

	//////////////////////// Coef by Y registers ////////////////////////
	d_yuv2rgbbyy_tab_data_1_0_RBUS d_yuv2rgbbyy_tab_data_1_0_REG;
	d_yuv2rgbbyy_tab_data_1_1_RBUS d_yuv2rgbbyy_tab_data_1_1_REG;
	d_yuv2rgbbyy_tab_data_1_2_RBUS d_yuv2rgbbyy_tab_data_1_2_REG;
	d_yuv2rgbbyy_tab_data_1_3_RBUS d_yuv2rgbbyy_tab_data_1_3_REG;
	d_yuv2rgbbyy_tab_data_2_0_RBUS d_yuv2rgbbyy_tab_data_2_0_REG;
	d_yuv2rgbbyy_tab_data_2_1_RBUS d_yuv2rgbbyy_tab_data_2_1_REG;
	d_yuv2rgbbyy_tab_data_2_2_RBUS d_yuv2rgbbyy_tab_data_2_2_REG;
	d_yuv2rgbbyy_tab_data_2_3_RBUS d_yuv2rgbbyy_tab_data_2_3_REG;
	d_yuv2rgbbyy_tab_data_3_0_RBUS d_yuv2rgbbyy_tab_data_3_0_REG;
	d_yuv2rgbbyy_tab_data_3_1_RBUS d_yuv2rgbbyy_tab_data_3_1_REG;
	d_yuv2rgbbyy_tab_data_3_2_RBUS d_yuv2rgbbyy_tab_data_3_2_REG;
	d_yuv2rgbbyy_tab_data_3_3_RBUS d_yuv2rgbbyy_tab_data_3_3_REG;
	d_yuv2rgbbyy_tab_data_4_0_RBUS d_yuv2rgbbyy_tab_data_4_0_REG;
	d_yuv2rgbbyy_tab_data_4_1_RBUS d_yuv2rgbbyy_tab_data_4_1_REG;
	d_yuv2rgbbyy_tab_data_4_2_RBUS d_yuv2rgbbyy_tab_data_4_2_REG;
	d_yuv2rgbbyy_tab_data_4_3_RBUS d_yuv2rgbbyy_tab_data_4_3_REG;
	d_yuv2rgbbyy_tab_data_5_0_RBUS d_yuv2rgbbyy_tab_data_5_0_REG;
	d_yuv2rgbbyy_tab_data_5_1_RBUS d_yuv2rgbbyy_tab_data_5_1_REG;
	d_yuv2rgbbyy_tab_data_5_2_RBUS d_yuv2rgbbyy_tab_data_5_2_REG;
	d_yuv2rgbbyy_tab_data_5_3_RBUS d_yuv2rgbbyy_tab_data_5_3_REG;
	d_yuv2rgbbyy_tab_data_6_0_RBUS d_yuv2rgbbyy_tab_data_6_0_REG;
	d_yuv2rgbbyy_tab_data_6_1_RBUS d_yuv2rgbbyy_tab_data_6_1_REG;
	d_yuv2rgbbyy_tab_data_6_2_RBUS d_yuv2rgbbyy_tab_data_6_2_REG;
	d_yuv2rgbbyy_tab_data_6_3_RBUS d_yuv2rgbbyy_tab_data_6_3_REG;
	d_yuv2rgbbyy_tab_data_7_0_RBUS d_yuv2rgbbyy_tab_data_7_0_REG;
	d_yuv2rgbbyy_tab_data_7_1_RBUS d_yuv2rgbbyy_tab_data_7_1_REG;
	d_yuv2rgbbyy_tab_data_7_2_RBUS d_yuv2rgbbyy_tab_data_7_2_REG;
	d_yuv2rgbbyy_tab_data_7_3_RBUS d_yuv2rgbbyy_tab_data_7_3_REG;
	d_yuv2rgbbyy_tab_data_8_0_RBUS d_yuv2rgbbyy_tab_data_8_0_REG;
	d_yuv2rgbbyy_tab_data_8_1_RBUS d_yuv2rgbbyy_tab_data_8_1_REG;
	d_yuv2rgbbyy_tab_data_8_2_RBUS d_yuv2rgbbyy_tab_data_8_2_REG;
	d_yuv2rgbbyy_tab_data_8_3_RBUS d_yuv2rgbbyy_tab_data_8_3_REG;
	d_yuv2rgbbyy_tab_data_9_0_RBUS d_yuv2rgbbyy_tab_data_9_0_REG;
	d_yuv2rgbbyy_tab_data_9_1_RBUS d_yuv2rgbbyy_tab_data_9_1_REG;
	d_yuv2rgbbyy_tab_data_9_2_RBUS d_yuv2rgbbyy_tab_data_9_2_REG;
	d_yuv2rgbbyy_tab_data_9_3_RBUS d_yuv2rgbbyy_tab_data_9_3_REG;
	d_yuv2rgbbyy_tab_data_10_0_RBUS d_yuv2rgbbyy_tab_data_10_0_REG;
	d_yuv2rgbbyy_tab_data_10_1_RBUS d_yuv2rgbbyy_tab_data_10_1_REG;
	d_yuv2rgbbyy_tab_data_10_2_RBUS d_yuv2rgbbyy_tab_data_10_2_REG;
	d_yuv2rgbbyy_tab_data_10_3_RBUS d_yuv2rgbbyy_tab_data_10_3_REG;
	d_yuv2rgbbyy_tab_data_11_0_RBUS d_yuv2rgbbyy_tab_data_11_0_REG;
	d_yuv2rgbbyy_tab_data_11_1_RBUS d_yuv2rgbbyy_tab_data_11_1_REG;
	d_yuv2rgbbyy_tab_data_11_2_RBUS d_yuv2rgbbyy_tab_data_11_2_REG;
	d_yuv2rgbbyy_tab_data_11_3_RBUS d_yuv2rgbbyy_tab_data_11_3_REG;
	d_yuv2rgbbyy_tab_data_12_0_RBUS d_yuv2rgbbyy_tab_data_12_0_REG;
	d_yuv2rgbbyy_tab_data_12_1_RBUS d_yuv2rgbbyy_tab_data_12_1_REG;
	d_yuv2rgbbyy_tab_data_12_2_RBUS d_yuv2rgbbyy_tab_data_12_2_REG;
	d_yuv2rgbbyy_tab_data_12_3_RBUS d_yuv2rgbbyy_tab_data_12_3_REG;
	d_yuv2rgbbyy_tab_data_13_0_RBUS d_yuv2rgbbyy_tab_data_13_0_REG;
	d_yuv2rgbbyy_tab_data_13_1_RBUS d_yuv2rgbbyy_tab_data_13_1_REG;
	d_yuv2rgbbyy_tab_data_13_2_RBUS d_yuv2rgbbyy_tab_data_13_2_REG;
	d_yuv2rgbbyy_tab_data_13_3_RBUS d_yuv2rgbbyy_tab_data_13_3_REG;
	d_yuv2rgbbyy_tab_data_14_0_RBUS d_yuv2rgbbyy_tab_data_14_0_REG;
	d_yuv2rgbbyy_tab_data_14_1_RBUS d_yuv2rgbbyy_tab_data_14_1_REG;
	d_yuv2rgbbyy_tab_data_14_2_RBUS d_yuv2rgbbyy_tab_data_14_2_REG;
	d_yuv2rgbbyy_tab_data_14_3_RBUS d_yuv2rgbbyy_tab_data_14_3_REG;
	d_yuv2rgbbyy_tab_data_15_0_RBUS d_yuv2rgbbyy_tab_data_15_0_REG;
	d_yuv2rgbbyy_tab_data_15_1_RBUS d_yuv2rgbbyy_tab_data_15_1_REG;
	d_yuv2rgbbyy_tab_data_15_2_RBUS d_yuv2rgbbyy_tab_data_15_2_REG;
	d_yuv2rgbbyy_tab_data_15_3_RBUS d_yuv2rgbbyy_tab_data_15_3_REG;
	d_yuv2rgbbyy_tab_data_16_0_RBUS d_yuv2rgbbyy_tab_data_16_0_REG;
	d_yuv2rgbbyy_tab_data_16_1_RBUS d_yuv2rgbbyy_tab_data_16_1_REG;
	d_yuv2rgbbyy_tab_data_16_2_RBUS d_yuv2rgbbyy_tab_data_16_2_REG;
	d_yuv2rgbbyy_tab_data_16_3_RBUS d_yuv2rgbbyy_tab_data_16_3_REG;
#endif
	//////////////////////// Coef by Y registers end////////////////////////
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);

	for(i=0;i<(Max_Bright_bin);i++)
	{
		DC_average+= reg_HistCnt[i]*( i*8);
		Total_HistCnt+= reg_HistCnt[i];
	}

	if((SmartPic_clue->Hist_Y_Total_sum) == 0 || Max_Bright_bin == 0)
		return;

	APL = ((DC_average/(SmartPic_clue->Hist_Y_Total_sum))<<5)/(Max_Bright_bin);

//	ROSPrintf("scalerVIP_100_4_Bright_Plus	APL = %d\n", APL);
	if(Scaler_GetAutoMA(BP_Debug_EN) == 1)
		APL = Scaler_GetAutoMA(BP_Debug_APL);

	if(APL >= P2)
		Gain_Value = G2;
	else if(APL >= P1)
		Gain_Value = (G1 - G2) * (P2 - APL) / (P2 - P1) + G2;
	else
		Gain_Value = G1;

	//Gain_Value = ((cur_Gain_Value<< 10)  / pre_Gain_Value);
//	if(MA_print_count%300==0)
//		ROSPrintf("cur_Gain_Value=%d, pre_Gain_Value = %d, Gain_Value = %d\n",cur_Gain_Value,pre_Gain_Value,Gain_Value);
#if 1	//Elsie 20131126: FIXME
	d_yuv2rgb_tab1_data_0_REG.regValue      = COEFF_BY_Y_REG[0];
	d_yuv2rgb_tab1_data_1_REG.regValue      = COEFF_BY_Y_REG[1];
	d_yuv2rgb_tab1_data_2_REG.regValue      = COEFF_BY_Y_REG[2];
	d_yuv2rgb_tab1_data_3_REG.regValue      = COEFF_BY_Y_REG[3];
	d_yuv2rgbbyy_tab_data_1_0_REG.regValue  = COEFF_BY_Y_REG[4];
	d_yuv2rgbbyy_tab_data_1_1_REG.regValue  = COEFF_BY_Y_REG[5];
	d_yuv2rgbbyy_tab_data_1_2_REG.regValue  = COEFF_BY_Y_REG[6];
	d_yuv2rgbbyy_tab_data_1_3_REG.regValue  = COEFF_BY_Y_REG[7];
	d_yuv2rgbbyy_tab_data_2_0_REG.regValue  = COEFF_BY_Y_REG[8];
	d_yuv2rgbbyy_tab_data_2_1_REG.regValue  = COEFF_BY_Y_REG[9];
	d_yuv2rgbbyy_tab_data_2_2_REG.regValue  = COEFF_BY_Y_REG[10];
	d_yuv2rgbbyy_tab_data_2_3_REG.regValue  = COEFF_BY_Y_REG[11];
	d_yuv2rgbbyy_tab_data_3_0_REG.regValue  = COEFF_BY_Y_REG[12];
	d_yuv2rgbbyy_tab_data_3_1_REG.regValue  = COEFF_BY_Y_REG[13];
	d_yuv2rgbbyy_tab_data_3_2_REG.regValue  = COEFF_BY_Y_REG[14];
	d_yuv2rgbbyy_tab_data_3_3_REG.regValue  = COEFF_BY_Y_REG[15];
	d_yuv2rgbbyy_tab_data_4_0_REG.regValue  = COEFF_BY_Y_REG[16];
	d_yuv2rgbbyy_tab_data_4_1_REG.regValue  = COEFF_BY_Y_REG[17];
	d_yuv2rgbbyy_tab_data_4_2_REG.regValue  = COEFF_BY_Y_REG[18];
	d_yuv2rgbbyy_tab_data_4_3_REG.regValue  = COEFF_BY_Y_REG[19];
	d_yuv2rgbbyy_tab_data_5_0_REG.regValue  = COEFF_BY_Y_REG[20];
	d_yuv2rgbbyy_tab_data_5_1_REG.regValue  = COEFF_BY_Y_REG[21];
	d_yuv2rgbbyy_tab_data_5_2_REG.regValue  = COEFF_BY_Y_REG[22];
	d_yuv2rgbbyy_tab_data_5_3_REG.regValue  = COEFF_BY_Y_REG[23];
	d_yuv2rgbbyy_tab_data_6_0_REG.regValue  = COEFF_BY_Y_REG[24];
	d_yuv2rgbbyy_tab_data_6_1_REG.regValue  = COEFF_BY_Y_REG[25];
	d_yuv2rgbbyy_tab_data_6_2_REG.regValue  = COEFF_BY_Y_REG[26];
	d_yuv2rgbbyy_tab_data_6_3_REG.regValue  = COEFF_BY_Y_REG[27];
	d_yuv2rgbbyy_tab_data_7_0_REG.regValue  = COEFF_BY_Y_REG[28];
	d_yuv2rgbbyy_tab_data_7_1_REG.regValue  = COEFF_BY_Y_REG[29];
	d_yuv2rgbbyy_tab_data_7_2_REG.regValue  = COEFF_BY_Y_REG[30];
	d_yuv2rgbbyy_tab_data_7_3_REG.regValue  = COEFF_BY_Y_REG[31];
	d_yuv2rgbbyy_tab_data_8_0_REG.regValue  = COEFF_BY_Y_REG[32];
	d_yuv2rgbbyy_tab_data_8_1_REG.regValue  = COEFF_BY_Y_REG[33];
	d_yuv2rgbbyy_tab_data_8_2_REG.regValue  = COEFF_BY_Y_REG[34];
	d_yuv2rgbbyy_tab_data_8_3_REG.regValue  = COEFF_BY_Y_REG[35];
	d_yuv2rgbbyy_tab_data_9_0_REG.regValue  = COEFF_BY_Y_REG[36];
	d_yuv2rgbbyy_tab_data_9_1_REG.regValue  = COEFF_BY_Y_REG[37];
	d_yuv2rgbbyy_tab_data_9_2_REG.regValue  = COEFF_BY_Y_REG[38];
	d_yuv2rgbbyy_tab_data_9_3_REG.regValue  = COEFF_BY_Y_REG[39];
	d_yuv2rgbbyy_tab_data_10_0_REG.regValue = COEFF_BY_Y_REG[40];
	d_yuv2rgbbyy_tab_data_10_1_REG.regValue = COEFF_BY_Y_REG[41];
	d_yuv2rgbbyy_tab_data_10_2_REG.regValue = COEFF_BY_Y_REG[42];
	d_yuv2rgbbyy_tab_data_10_3_REG.regValue = COEFF_BY_Y_REG[43];
	d_yuv2rgbbyy_tab_data_11_0_REG.regValue = COEFF_BY_Y_REG[44];
	d_yuv2rgbbyy_tab_data_11_1_REG.regValue = COEFF_BY_Y_REG[45];
	d_yuv2rgbbyy_tab_data_11_2_REG.regValue = COEFF_BY_Y_REG[46];
	d_yuv2rgbbyy_tab_data_11_3_REG.regValue = COEFF_BY_Y_REG[47];
	d_yuv2rgbbyy_tab_data_12_0_REG.regValue = COEFF_BY_Y_REG[48];
	d_yuv2rgbbyy_tab_data_12_1_REG.regValue = COEFF_BY_Y_REG[49];
	d_yuv2rgbbyy_tab_data_12_2_REG.regValue = COEFF_BY_Y_REG[50];
	d_yuv2rgbbyy_tab_data_12_3_REG.regValue = COEFF_BY_Y_REG[51];
	d_yuv2rgbbyy_tab_data_13_0_REG.regValue = COEFF_BY_Y_REG[52];
	d_yuv2rgbbyy_tab_data_13_1_REG.regValue = COEFF_BY_Y_REG[53];
	d_yuv2rgbbyy_tab_data_13_2_REG.regValue = COEFF_BY_Y_REG[54];
	d_yuv2rgbbyy_tab_data_13_3_REG.regValue = COEFF_BY_Y_REG[55];
	d_yuv2rgbbyy_tab_data_14_0_REG.regValue = COEFF_BY_Y_REG[56];
	d_yuv2rgbbyy_tab_data_14_1_REG.regValue = COEFF_BY_Y_REG[57];
	d_yuv2rgbbyy_tab_data_14_2_REG.regValue = COEFF_BY_Y_REG[58];
	d_yuv2rgbbyy_tab_data_14_3_REG.regValue = COEFF_BY_Y_REG[59];
	d_yuv2rgbbyy_tab_data_15_0_REG.regValue = COEFF_BY_Y_REG[60];
	d_yuv2rgbbyy_tab_data_15_1_REG.regValue = COEFF_BY_Y_REG[61];
	d_yuv2rgbbyy_tab_data_15_2_REG.regValue = COEFF_BY_Y_REG[62];
	d_yuv2rgbbyy_tab_data_15_3_REG.regValue = COEFF_BY_Y_REG[63];
	d_yuv2rgbbyy_tab_data_16_0_REG.regValue = COEFF_BY_Y_REG[64];
	d_yuv2rgbbyy_tab_data_16_1_REG.regValue = COEFF_BY_Y_REG[65];
	d_yuv2rgbbyy_tab_data_16_2_REG.regValue = COEFF_BY_Y_REG[66];
	d_yuv2rgbbyy_tab_data_16_3_REG.regValue = COEFF_BY_Y_REG[67];

	coef_tmp[0][0][0]	 =	d_yuv2rgb_tab1_data_0_REG.k11	  ;
	coef_tmp[0][0][1]	 =	d_yuv2rgb_tab1_data_0_REG.k12	  ;
	coef_tmp[0][0][2]	 =	d_yuv2rgb_tab1_data_1_REG.k13	  ;
	coef_tmp[0][1][1]	 =	d_yuv2rgb_tab1_data_2_REG.k22	  ;
	coef_tmp[0][1][2]	 =	d_yuv2rgb_tab1_data_2_REG.k23	  ;
	coef_tmp[0][2][1]	 =	d_yuv2rgb_tab1_data_3_REG.k32	  ;
	coef_tmp[0][2][2]	 =	d_yuv2rgb_tab1_data_3_REG.k33	  ;

	coef_tmp[1][0][0]	 =	d_yuv2rgbbyy_tab_data_1_0_REG.k11 ;
	coef_tmp[1][0][1]	 =	d_yuv2rgbbyy_tab_data_1_0_REG.k12 ;
	coef_tmp[1][0][2]	 =	d_yuv2rgbbyy_tab_data_1_1_REG.k13 ;
	coef_tmp[1][1][1]	 =	d_yuv2rgbbyy_tab_data_1_2_REG.k22 ;
	coef_tmp[1][1][2]	 =	d_yuv2rgbbyy_tab_data_1_2_REG.k23 ;
	coef_tmp[1][2][1]	 =	d_yuv2rgbbyy_tab_data_1_3_REG.k32 ;
	coef_tmp[1][2][2]	 =	d_yuv2rgbbyy_tab_data_1_3_REG.k33 ;

	coef_tmp[2][0][0]	 =	d_yuv2rgbbyy_tab_data_2_0_REG.k11 ;
	coef_tmp[2][0][1]	 =	d_yuv2rgbbyy_tab_data_2_0_REG.k12 ;
	coef_tmp[2][0][2]	 =	d_yuv2rgbbyy_tab_data_2_1_REG.k13 ;
	coef_tmp[2][1][1]	 =	d_yuv2rgbbyy_tab_data_2_2_REG.k22 ;
	coef_tmp[2][1][2]	 =	d_yuv2rgbbyy_tab_data_2_2_REG.k23 ;
	coef_tmp[2][2][1]	 =	d_yuv2rgbbyy_tab_data_2_3_REG.k32 ;
	coef_tmp[2][2][2]	 =	d_yuv2rgbbyy_tab_data_2_3_REG.k33 ;

	coef_tmp[3][0][0]	 =	d_yuv2rgbbyy_tab_data_3_0_REG.k11 ;
	coef_tmp[3][0][1]	 =	d_yuv2rgbbyy_tab_data_3_0_REG.k12 ;
	coef_tmp[3][0][2]	 =	d_yuv2rgbbyy_tab_data_3_1_REG.k13 ;
	coef_tmp[3][1][1]	 =	d_yuv2rgbbyy_tab_data_3_2_REG.k22 ;
	coef_tmp[3][1][2]	 =	d_yuv2rgbbyy_tab_data_3_2_REG.k23 ;
	coef_tmp[3][2][1]	 =	d_yuv2rgbbyy_tab_data_3_3_REG.k32 ;
	coef_tmp[3][2][2]	 =	d_yuv2rgbbyy_tab_data_3_3_REG.k33 ;

	coef_tmp[4][0][0]	 =	d_yuv2rgbbyy_tab_data_4_0_REG.k11 ;
	coef_tmp[4][0][1]	 =	d_yuv2rgbbyy_tab_data_4_0_REG.k12 ;
	coef_tmp[4][0][2]	 =	d_yuv2rgbbyy_tab_data_4_1_REG.k13 ;
	coef_tmp[4][1][1]	 =	d_yuv2rgbbyy_tab_data_4_2_REG.k22 ;
	coef_tmp[4][1][2]	 =	d_yuv2rgbbyy_tab_data_4_2_REG.k23 ;
	coef_tmp[4][2][1]	 =	d_yuv2rgbbyy_tab_data_4_3_REG.k32 ;
	coef_tmp[4][2][2]	 =	d_yuv2rgbbyy_tab_data_4_3_REG.k33 ;

	coef_tmp[5][0][0]	 =	d_yuv2rgbbyy_tab_data_5_0_REG.k11 ;
	coef_tmp[5][0][1]	 =	d_yuv2rgbbyy_tab_data_5_0_REG.k12 ;
	coef_tmp[5][0][2]	 =	d_yuv2rgbbyy_tab_data_5_1_REG.k13 ;
	coef_tmp[5][1][1]	 =	d_yuv2rgbbyy_tab_data_5_2_REG.k22 ;
	coef_tmp[5][1][2]	 =	d_yuv2rgbbyy_tab_data_5_2_REG.k23 ;
	coef_tmp[5][2][1]	 =	d_yuv2rgbbyy_tab_data_5_3_REG.k32 ;
	coef_tmp[5][2][2]	 =	d_yuv2rgbbyy_tab_data_5_3_REG.k33 ;

	coef_tmp[6][0][0]	 =	d_yuv2rgbbyy_tab_data_6_0_REG.k11 ;
	coef_tmp[6][0][1]	 =	d_yuv2rgbbyy_tab_data_6_0_REG.k12 ;
	coef_tmp[6][0][2]	 =	d_yuv2rgbbyy_tab_data_6_1_REG.k13 ;
	coef_tmp[6][1][1]	 =	d_yuv2rgbbyy_tab_data_6_2_REG.k22 ;
	coef_tmp[6][1][2]	 =	d_yuv2rgbbyy_tab_data_6_2_REG.k23 ;
	coef_tmp[6][2][1]	 =	d_yuv2rgbbyy_tab_data_6_3_REG.k32 ;
	coef_tmp[6][2][2]	 =	d_yuv2rgbbyy_tab_data_6_3_REG.k33 ;

	coef_tmp[7][0][0]	 =	d_yuv2rgbbyy_tab_data_7_0_REG.k11 ;
	coef_tmp[7][0][1]	 =	d_yuv2rgbbyy_tab_data_7_0_REG.k12 ;
	coef_tmp[7][0][2]	 =	d_yuv2rgbbyy_tab_data_7_1_REG.k13 ;
	coef_tmp[7][1][1]	 =	d_yuv2rgbbyy_tab_data_7_2_REG.k22 ;
	coef_tmp[7][1][2]	 =	d_yuv2rgbbyy_tab_data_7_2_REG.k23 ;
	coef_tmp[7][2][1]	 =	d_yuv2rgbbyy_tab_data_7_3_REG.k32 ;
	coef_tmp[7][2][2]	 =	d_yuv2rgbbyy_tab_data_7_3_REG.k33 ;

	coef_tmp[8][0][0]	 =	d_yuv2rgbbyy_tab_data_8_0_REG.k11 ;
	coef_tmp[8][0][1]	 =	d_yuv2rgbbyy_tab_data_8_0_REG.k12 ;
	coef_tmp[8][0][2]	 =	d_yuv2rgbbyy_tab_data_8_1_REG.k13 ;
	coef_tmp[8][1][1]	 =	d_yuv2rgbbyy_tab_data_8_2_REG.k22 ;
	coef_tmp[8][1][2]	 =	d_yuv2rgbbyy_tab_data_8_2_REG.k23 ;
	coef_tmp[8][2][1]	 =	d_yuv2rgbbyy_tab_data_8_3_REG.k32 ;
	coef_tmp[8][2][2]	 =	d_yuv2rgbbyy_tab_data_8_3_REG.k33 ;

	coef_tmp[9][0][0]	 =	d_yuv2rgbbyy_tab_data_9_0_REG.k11 ;
	coef_tmp[9][0][1]	 =	d_yuv2rgbbyy_tab_data_9_0_REG.k12 ;
	coef_tmp[9][0][2]	 =	d_yuv2rgbbyy_tab_data_9_1_REG.k13 ;
	coef_tmp[9][1][1]	 =	d_yuv2rgbbyy_tab_data_9_2_REG.k22 ;
	coef_tmp[9][1][2]	 =	d_yuv2rgbbyy_tab_data_9_2_REG.k23 ;
	coef_tmp[9][2][1]	 =	d_yuv2rgbbyy_tab_data_9_3_REG.k32 ;
	coef_tmp[9][2][2]	 =	d_yuv2rgbbyy_tab_data_9_3_REG.k33 ;

	coef_tmp[10][0][0]	 =	d_yuv2rgbbyy_tab_data_10_0_REG.k11;
	coef_tmp[10][0][1]	 =	d_yuv2rgbbyy_tab_data_10_0_REG.k12;
	coef_tmp[10][0][2]	 =	d_yuv2rgbbyy_tab_data_10_1_REG.k13;
	coef_tmp[10][1][1]	 =	d_yuv2rgbbyy_tab_data_10_2_REG.k22;
	coef_tmp[10][1][2]	 =	d_yuv2rgbbyy_tab_data_10_2_REG.k23;
	coef_tmp[10][2][1]	 =	d_yuv2rgbbyy_tab_data_10_3_REG.k32;
	coef_tmp[10][2][2]	 =	d_yuv2rgbbyy_tab_data_10_3_REG.k33;

	coef_tmp[11][0][0]	 =	d_yuv2rgbbyy_tab_data_11_0_REG.k11;
	coef_tmp[11][0][1]	 =	d_yuv2rgbbyy_tab_data_11_0_REG.k12;
	coef_tmp[11][0][2]	 =	d_yuv2rgbbyy_tab_data_11_1_REG.k13;
	coef_tmp[11][1][1]	 =	d_yuv2rgbbyy_tab_data_11_2_REG.k22;
	coef_tmp[11][1][2]	 =	d_yuv2rgbbyy_tab_data_11_2_REG.k23;
	coef_tmp[11][2][1]	 =	d_yuv2rgbbyy_tab_data_11_3_REG.k32;
	coef_tmp[11][2][2]	 =	d_yuv2rgbbyy_tab_data_11_3_REG.k33;

	coef_tmp[12][0][0]	 =	d_yuv2rgbbyy_tab_data_12_0_REG.k11;
	coef_tmp[12][0][1]	 =	d_yuv2rgbbyy_tab_data_12_0_REG.k12;
	coef_tmp[12][0][2]	 =	d_yuv2rgbbyy_tab_data_12_1_REG.k13;
	coef_tmp[12][1][1]	 =	d_yuv2rgbbyy_tab_data_12_2_REG.k22;
	coef_tmp[12][1][2]	 =	d_yuv2rgbbyy_tab_data_12_2_REG.k23;
	coef_tmp[12][2][1]	 =	d_yuv2rgbbyy_tab_data_12_3_REG.k32;
	coef_tmp[12][2][2]	 =	d_yuv2rgbbyy_tab_data_12_3_REG.k33;

	coef_tmp[13][0][0]	 =	d_yuv2rgbbyy_tab_data_13_0_REG.k11;
	coef_tmp[13][0][1]	 =	d_yuv2rgbbyy_tab_data_13_0_REG.k12;
	coef_tmp[13][0][2]	 =	d_yuv2rgbbyy_tab_data_13_1_REG.k13;
	coef_tmp[13][1][1]	 =	d_yuv2rgbbyy_tab_data_13_2_REG.k22;
	coef_tmp[13][1][2]	 =	d_yuv2rgbbyy_tab_data_13_2_REG.k23;
	coef_tmp[13][2][1]	 =	d_yuv2rgbbyy_tab_data_13_3_REG.k32;
	coef_tmp[13][2][2]	 =	d_yuv2rgbbyy_tab_data_13_3_REG.k33;

	coef_tmp[14][0][0]	 =	d_yuv2rgbbyy_tab_data_14_0_REG.k11;
	coef_tmp[14][0][1]	 =	d_yuv2rgbbyy_tab_data_14_0_REG.k12;
	coef_tmp[14][0][2]	 =	d_yuv2rgbbyy_tab_data_14_1_REG.k13;
	coef_tmp[14][1][1]	 =	d_yuv2rgbbyy_tab_data_14_2_REG.k22;
	coef_tmp[14][1][2]	 =	d_yuv2rgbbyy_tab_data_14_2_REG.k23;
	coef_tmp[14][2][1]	 =	d_yuv2rgbbyy_tab_data_14_3_REG.k32;
	coef_tmp[14][2][2]	 =	d_yuv2rgbbyy_tab_data_14_3_REG.k33;

	coef_tmp[15][0][0]	 =	d_yuv2rgbbyy_tab_data_15_0_REG.k11;
	coef_tmp[15][0][1]	 =	d_yuv2rgbbyy_tab_data_15_0_REG.k12;
	coef_tmp[15][0][2]	 =	d_yuv2rgbbyy_tab_data_15_1_REG.k13;
	coef_tmp[15][1][1]	 =	d_yuv2rgbbyy_tab_data_15_2_REG.k22;
	coef_tmp[15][1][2]	 =	d_yuv2rgbbyy_tab_data_15_2_REG.k23;
	coef_tmp[15][2][1]	 =	d_yuv2rgbbyy_tab_data_15_3_REG.k32;
	coef_tmp[15][2][2]	 =	d_yuv2rgbbyy_tab_data_15_3_REG.k33;

	coef_tmp[16][0][0]	 =	d_yuv2rgbbyy_tab_data_16_0_REG.k11;
	coef_tmp[16][0][1]	 =	d_yuv2rgbbyy_tab_data_16_0_REG.k12;
	coef_tmp[16][0][2]	 =	d_yuv2rgbbyy_tab_data_16_1_REG.k13;
	coef_tmp[16][1][1]	 =	d_yuv2rgbbyy_tab_data_16_2_REG.k22;
	coef_tmp[16][1][2]	 =	d_yuv2rgbbyy_tab_data_16_2_REG.k23;
	coef_tmp[16][2][1]	 =	d_yuv2rgbbyy_tab_data_16_3_REG.k32;
	coef_tmp[16][2][2]	 =	d_yuv2rgbbyy_tab_data_16_3_REG.k33;

	if(MA_print_count%150==0)
		ROSPrintf("1.k22=%d,k23=%d,%d\n",coef_tmp[0][1][1], coef_tmp[0][1][2], (((~coef_tmp[0][1][1]) & 0x7FF) + 1));

	for(i=0;i<YUV2RGB_COEF_BY_Y_Seg_Num;i++)
	{
		for(j=0;j<3;j++)
		{
			for(k=0;k<3;k++)
			{
				// if coef_tmp > 0x400(1024, 11bit), negtive coef, need to do 2's complement
				com_flag[i][j][k]=0;
				if(coef_tmp[i][j][k]>=0x400)
				{
					coef_tmp[i][j][k] = ((~coef_tmp[i][j][k]) & 0x7FF) + 1;
					com_flag[i][j][k] = 1;
				}
			}
		}
	}

	if(MA_print_count%150==0)
		ROSPrintf("2.k22=%d,k23=%d,flag=%d\n",coef_tmp[0][1][1], coef_tmp[0][1][2],com_flag[0][1][1]);


	for(i=0;i<YUV2RGB_COEF_BY_Y_Seg_Num;i++)
	{
		coef_tmp[i][0][0] = coef_tmp[i][0][0]* Gain_Value / 100;
		coef_tmp[i][0][1] = coef_tmp[i][0][1]* Gain_Value / 100;
		coef_tmp[i][0][2] = coef_tmp[i][0][2]* Gain_Value / 100;
		coef_tmp[i][1][1] = coef_tmp[i][1][1]* Gain_Value / 100;
		coef_tmp[i][1][2] = coef_tmp[i][1][2]* Gain_Value / 100;
		coef_tmp[i][2][1] = coef_tmp[i][2][1]* Gain_Value / 100;
		coef_tmp[i][2][2] = coef_tmp[i][2][2]* Gain_Value / 100;
	}

	if(MA_print_count%150==0)
		ROSPrintf("3.k22=%d,k23=%d,gain=%d\n",coef_tmp[0][1][1], coef_tmp[0][1][2],Gain_Value);


	//return to coef table form
	for(i=0;i<YUV2RGB_COEF_BY_Y_Seg_Num;i++)
	{
		for(j=0;j<3;j++)
		{
			for(k=0;k<3;k++)
			{
				if(com_flag[i][j][k]==1)
				{
					coef_tmp[i][j][k] = ~(coef_tmp[i][j][k] - 1);
				}
			}
		}
	}

	if(MA_print_count%150==0)
		ROSPrintf("4.k22=%d,k23=%d\n",coef_tmp[0][1][1], coef_tmp[0][1][2]);


	d_yuv2rgb_tab1_data_0_REG.k11 =		coef_tmp[0][0][0];
	d_yuv2rgb_tab1_data_0_REG.k12 =		coef_tmp[0][0][1];
	d_yuv2rgb_tab1_data_1_REG.k13 =		coef_tmp[0][0][2];
	d_yuv2rgb_tab1_data_2_REG.k22 =		coef_tmp[0][1][1];
	d_yuv2rgb_tab1_data_2_REG.k23 =		coef_tmp[0][1][2];
	d_yuv2rgb_tab1_data_3_REG.k32 =		coef_tmp[0][2][1];
	d_yuv2rgb_tab1_data_3_REG.k33 =		coef_tmp[0][2][2];

	d_yuv2rgbbyy_tab_data_1_0_REG.k11 =  coef_tmp[1][0][0];
	d_yuv2rgbbyy_tab_data_1_0_REG.k12 =  coef_tmp[1][0][1];
	d_yuv2rgbbyy_tab_data_1_1_REG.k13 =  coef_tmp[1][0][2];
	d_yuv2rgbbyy_tab_data_1_2_REG.k22 =  coef_tmp[1][1][1];
	d_yuv2rgbbyy_tab_data_1_2_REG.k23 =  coef_tmp[1][1][2];
	d_yuv2rgbbyy_tab_data_1_3_REG.k32 =  coef_tmp[1][2][1];
	d_yuv2rgbbyy_tab_data_1_3_REG.k33 =  coef_tmp[1][2][2];

	d_yuv2rgbbyy_tab_data_2_0_REG.k11 =  coef_tmp[2][0][0];
	d_yuv2rgbbyy_tab_data_2_0_REG.k12 =  coef_tmp[2][0][1];
	d_yuv2rgbbyy_tab_data_2_1_REG.k13 =  coef_tmp[2][0][2];
	d_yuv2rgbbyy_tab_data_2_2_REG.k22 =  coef_tmp[2][1][1];
	d_yuv2rgbbyy_tab_data_2_2_REG.k23 =  coef_tmp[2][1][2];
	d_yuv2rgbbyy_tab_data_2_3_REG.k32 =  coef_tmp[2][2][1];
	d_yuv2rgbbyy_tab_data_2_3_REG.k33 =  coef_tmp[2][2][2];

	d_yuv2rgbbyy_tab_data_3_0_REG.k11 =  coef_tmp[3][0][0];
	d_yuv2rgbbyy_tab_data_3_0_REG.k12 =  coef_tmp[3][0][1];
	d_yuv2rgbbyy_tab_data_3_1_REG.k13 =  coef_tmp[3][0][2];
	d_yuv2rgbbyy_tab_data_3_2_REG.k22 =  coef_tmp[3][1][1];
	d_yuv2rgbbyy_tab_data_3_2_REG.k23 =  coef_tmp[3][1][2];
	d_yuv2rgbbyy_tab_data_3_3_REG.k32 =  coef_tmp[3][2][1];
	d_yuv2rgbbyy_tab_data_3_3_REG.k33 =  coef_tmp[3][2][2];

	d_yuv2rgbbyy_tab_data_4_0_REG.k11 =  coef_tmp[4][0][0];
	d_yuv2rgbbyy_tab_data_4_0_REG.k12 =  coef_tmp[4][0][1];
	d_yuv2rgbbyy_tab_data_4_1_REG.k13 =  coef_tmp[4][0][2];
	d_yuv2rgbbyy_tab_data_4_2_REG.k22 =  coef_tmp[4][1][1];
	d_yuv2rgbbyy_tab_data_4_2_REG.k23 =  coef_tmp[4][1][2];
	d_yuv2rgbbyy_tab_data_4_3_REG.k32 =  coef_tmp[4][2][1];
	d_yuv2rgbbyy_tab_data_4_3_REG.k33 =  coef_tmp[4][2][2];

	d_yuv2rgbbyy_tab_data_5_0_REG.k11 =  coef_tmp[5][0][0];
	d_yuv2rgbbyy_tab_data_5_0_REG.k12 =  coef_tmp[5][0][1];
	d_yuv2rgbbyy_tab_data_5_1_REG.k13 =  coef_tmp[5][0][2];
	d_yuv2rgbbyy_tab_data_5_2_REG.k22 =  coef_tmp[5][1][1];
	d_yuv2rgbbyy_tab_data_5_2_REG.k23 =  coef_tmp[5][1][2];
	d_yuv2rgbbyy_tab_data_5_3_REG.k32 =  coef_tmp[5][2][1];
	d_yuv2rgbbyy_tab_data_5_3_REG.k33 =  coef_tmp[5][2][2];

	d_yuv2rgbbyy_tab_data_6_0_REG.k11 =  coef_tmp[6][0][0];
	d_yuv2rgbbyy_tab_data_6_0_REG.k12 =  coef_tmp[6][0][1];
	d_yuv2rgbbyy_tab_data_6_1_REG.k13 =  coef_tmp[6][0][2];
	d_yuv2rgbbyy_tab_data_6_2_REG.k22 =  coef_tmp[6][1][1];
	d_yuv2rgbbyy_tab_data_6_2_REG.k23 =  coef_tmp[6][1][2];
	d_yuv2rgbbyy_tab_data_6_3_REG.k32 =  coef_tmp[6][2][1];
	d_yuv2rgbbyy_tab_data_6_3_REG.k33 =  coef_tmp[6][2][2];

	d_yuv2rgbbyy_tab_data_7_0_REG.k11 =  coef_tmp[7][0][0];
	d_yuv2rgbbyy_tab_data_7_0_REG.k12 =  coef_tmp[7][0][1];
	d_yuv2rgbbyy_tab_data_7_1_REG.k13 =  coef_tmp[7][0][2];
	d_yuv2rgbbyy_tab_data_7_2_REG.k22 =  coef_tmp[7][1][1];
	d_yuv2rgbbyy_tab_data_7_2_REG.k23 =  coef_tmp[7][1][2];
	d_yuv2rgbbyy_tab_data_7_3_REG.k32 =  coef_tmp[7][2][1];
	d_yuv2rgbbyy_tab_data_7_3_REG.k33 =  coef_tmp[7][2][2];

	d_yuv2rgbbyy_tab_data_8_0_REG.k11 =  coef_tmp[8][0][0];
	d_yuv2rgbbyy_tab_data_8_0_REG.k12 =  coef_tmp[8][0][1];
	d_yuv2rgbbyy_tab_data_8_1_REG.k13 =  coef_tmp[8][0][2];
	d_yuv2rgbbyy_tab_data_8_2_REG.k22 =  coef_tmp[8][1][1];
	d_yuv2rgbbyy_tab_data_8_2_REG.k23 =  coef_tmp[8][1][2];
	d_yuv2rgbbyy_tab_data_8_3_REG.k32 =  coef_tmp[8][2][1];
	d_yuv2rgbbyy_tab_data_8_3_REG.k33 =  coef_tmp[8][2][2];

	d_yuv2rgbbyy_tab_data_9_0_REG.k11 =  coef_tmp[9][0][0];
	d_yuv2rgbbyy_tab_data_9_0_REG.k12 =  coef_tmp[9][0][1];
	d_yuv2rgbbyy_tab_data_9_1_REG.k13 =  coef_tmp[9][0][2];
	d_yuv2rgbbyy_tab_data_9_2_REG.k22 =  coef_tmp[9][1][1];
	d_yuv2rgbbyy_tab_data_9_2_REG.k23 =  coef_tmp[9][1][2];
	d_yuv2rgbbyy_tab_data_9_3_REG.k32 =  coef_tmp[9][2][1];
	d_yuv2rgbbyy_tab_data_9_3_REG.k33 =  coef_tmp[9][2][2];

	d_yuv2rgbbyy_tab_data_10_0_REG.k11 = coef_tmp[10][0][0];
	d_yuv2rgbbyy_tab_data_10_0_REG.k12 = coef_tmp[10][0][1];
	d_yuv2rgbbyy_tab_data_10_1_REG.k13 = coef_tmp[10][0][2];
	d_yuv2rgbbyy_tab_data_10_2_REG.k22 = coef_tmp[10][1][1];
	d_yuv2rgbbyy_tab_data_10_2_REG.k23 = coef_tmp[10][1][2];
	d_yuv2rgbbyy_tab_data_10_3_REG.k32 = coef_tmp[10][2][1];
	d_yuv2rgbbyy_tab_data_10_3_REG.k33 = coef_tmp[10][2][2];

	d_yuv2rgbbyy_tab_data_11_0_REG.k11 = coef_tmp[11][0][0];
	d_yuv2rgbbyy_tab_data_11_0_REG.k12 = coef_tmp[11][0][1];
	d_yuv2rgbbyy_tab_data_11_1_REG.k13 = coef_tmp[11][0][2];
	d_yuv2rgbbyy_tab_data_11_2_REG.k22 = coef_tmp[11][1][1];
	d_yuv2rgbbyy_tab_data_11_2_REG.k23 = coef_tmp[11][1][2];
	d_yuv2rgbbyy_tab_data_11_3_REG.k32 = coef_tmp[11][2][1];
	d_yuv2rgbbyy_tab_data_11_3_REG.k33 = coef_tmp[11][2][2];

	d_yuv2rgbbyy_tab_data_12_0_REG.k11 = coef_tmp[12][0][0];
	d_yuv2rgbbyy_tab_data_12_0_REG.k12 = coef_tmp[12][0][1];
	d_yuv2rgbbyy_tab_data_12_1_REG.k13 = coef_tmp[12][0][2];
	d_yuv2rgbbyy_tab_data_12_2_REG.k22 = coef_tmp[12][1][1];
	d_yuv2rgbbyy_tab_data_12_2_REG.k23 = coef_tmp[12][1][2];
	d_yuv2rgbbyy_tab_data_12_3_REG.k32 = coef_tmp[12][2][1];
	d_yuv2rgbbyy_tab_data_12_3_REG.k33 = coef_tmp[12][2][2];

	d_yuv2rgbbyy_tab_data_13_0_REG.k11 = coef_tmp[13][0][0];
	d_yuv2rgbbyy_tab_data_13_0_REG.k12 = coef_tmp[13][0][1];
	d_yuv2rgbbyy_tab_data_13_1_REG.k13 = coef_tmp[13][0][2];
	d_yuv2rgbbyy_tab_data_13_2_REG.k22 = coef_tmp[13][1][1];
	d_yuv2rgbbyy_tab_data_13_2_REG.k23 = coef_tmp[13][1][2];
	d_yuv2rgbbyy_tab_data_13_3_REG.k32 = coef_tmp[13][2][1];
	d_yuv2rgbbyy_tab_data_13_3_REG.k33 = coef_tmp[13][2][2];

	d_yuv2rgbbyy_tab_data_14_0_REG.k11 = coef_tmp[14][0][0];
	d_yuv2rgbbyy_tab_data_14_0_REG.k12 = coef_tmp[14][0][1];
	d_yuv2rgbbyy_tab_data_14_1_REG.k13 = coef_tmp[14][0][2];
	d_yuv2rgbbyy_tab_data_14_2_REG.k22 = coef_tmp[14][1][1];
	d_yuv2rgbbyy_tab_data_14_2_REG.k23 = coef_tmp[14][1][2];
	d_yuv2rgbbyy_tab_data_14_3_REG.k32 = coef_tmp[14][2][1];
	d_yuv2rgbbyy_tab_data_14_3_REG.k33 = coef_tmp[14][2][2];

	d_yuv2rgbbyy_tab_data_15_0_REG.k11 = coef_tmp[15][0][0];
	d_yuv2rgbbyy_tab_data_15_0_REG.k12 = coef_tmp[15][0][1];
	d_yuv2rgbbyy_tab_data_15_1_REG.k13 = coef_tmp[15][0][2];
	d_yuv2rgbbyy_tab_data_15_2_REG.k22 = coef_tmp[15][1][1];
	d_yuv2rgbbyy_tab_data_15_2_REG.k23 = coef_tmp[15][1][2];
	d_yuv2rgbbyy_tab_data_15_3_REG.k32 = coef_tmp[15][2][1];
	d_yuv2rgbbyy_tab_data_15_3_REG.k33 = coef_tmp[15][2][2];

	d_yuv2rgbbyy_tab_data_16_0_REG.k11 = coef_tmp[16][0][0];
	d_yuv2rgbbyy_tab_data_16_0_REG.k12 = coef_tmp[16][0][1];
	d_yuv2rgbbyy_tab_data_16_1_REG.k13 = coef_tmp[16][0][2];
	d_yuv2rgbbyy_tab_data_16_2_REG.k22 = coef_tmp[16][1][1];
	d_yuv2rgbbyy_tab_data_16_2_REG.k23 = coef_tmp[16][1][2];
	d_yuv2rgbbyy_tab_data_16_3_REG.k32 = coef_tmp[16][2][1];
	d_yuv2rgbbyy_tab_data_16_3_REG.k33 = coef_tmp[16][2][2];

	rtd_outl(YUV2RGB_D_YUV2RGB_TAB1_DATA_0_reg, d_yuv2rgb_tab1_data_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGB_TAB1_DATA_1_reg, d_yuv2rgb_tab1_data_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGB_TAB1_DATA_2_reg, d_yuv2rgb_tab1_data_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGB_TAB1_DATA_3_reg, d_yuv2rgb_tab1_data_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_1_0_reg, d_yuv2rgbbyy_tab_data_1_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_1_1_reg, d_yuv2rgbbyy_tab_data_1_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_1_2_reg, d_yuv2rgbbyy_tab_data_1_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_1_3_reg, d_yuv2rgbbyy_tab_data_1_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_2_0_reg, d_yuv2rgbbyy_tab_data_2_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_2_1_reg, d_yuv2rgbbyy_tab_data_2_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_2_2_reg, d_yuv2rgbbyy_tab_data_2_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_2_3_reg, d_yuv2rgbbyy_tab_data_2_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_3_0_reg, d_yuv2rgbbyy_tab_data_3_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_3_1_reg, d_yuv2rgbbyy_tab_data_3_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_3_2_reg, d_yuv2rgbbyy_tab_data_3_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_3_3_reg, d_yuv2rgbbyy_tab_data_3_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_4_0_reg, d_yuv2rgbbyy_tab_data_4_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_4_1_reg, d_yuv2rgbbyy_tab_data_4_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_4_2_reg, d_yuv2rgbbyy_tab_data_4_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_4_3_reg, d_yuv2rgbbyy_tab_data_4_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_5_0_reg, d_yuv2rgbbyy_tab_data_5_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_5_1_reg, d_yuv2rgbbyy_tab_data_5_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_5_2_reg, d_yuv2rgbbyy_tab_data_5_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_5_3_reg, d_yuv2rgbbyy_tab_data_5_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_6_0_reg, d_yuv2rgbbyy_tab_data_6_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_6_1_reg, d_yuv2rgbbyy_tab_data_6_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_6_2_reg, d_yuv2rgbbyy_tab_data_6_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_6_3_reg, d_yuv2rgbbyy_tab_data_6_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_7_0_reg, d_yuv2rgbbyy_tab_data_7_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_7_1_reg, d_yuv2rgbbyy_tab_data_7_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_7_2_reg, d_yuv2rgbbyy_tab_data_7_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_7_3_reg, d_yuv2rgbbyy_tab_data_7_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_8_0_reg, d_yuv2rgbbyy_tab_data_8_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_8_1_reg, d_yuv2rgbbyy_tab_data_8_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_8_2_reg, d_yuv2rgbbyy_tab_data_8_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_8_3_reg, d_yuv2rgbbyy_tab_data_8_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_9_0_reg, d_yuv2rgbbyy_tab_data_9_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_9_1_reg, d_yuv2rgbbyy_tab_data_9_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_9_2_reg, d_yuv2rgbbyy_tab_data_9_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_9_3_reg, d_yuv2rgbbyy_tab_data_9_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_10_0_reg, d_yuv2rgbbyy_tab_data_10_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_10_1_reg, d_yuv2rgbbyy_tab_data_10_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_10_2_reg, d_yuv2rgbbyy_tab_data_10_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_10_3_reg, d_yuv2rgbbyy_tab_data_10_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_11_0_reg, d_yuv2rgbbyy_tab_data_11_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_11_1_reg, d_yuv2rgbbyy_tab_data_11_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_11_2_reg, d_yuv2rgbbyy_tab_data_11_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_11_3_reg, d_yuv2rgbbyy_tab_data_11_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_12_0_reg, d_yuv2rgbbyy_tab_data_12_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_12_1_reg, d_yuv2rgbbyy_tab_data_12_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_12_2_reg, d_yuv2rgbbyy_tab_data_12_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_12_3_reg, d_yuv2rgbbyy_tab_data_12_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_13_0_reg, d_yuv2rgbbyy_tab_data_13_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_13_1_reg, d_yuv2rgbbyy_tab_data_13_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_13_2_reg, d_yuv2rgbbyy_tab_data_13_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_13_3_reg, d_yuv2rgbbyy_tab_data_13_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_14_0_reg, d_yuv2rgbbyy_tab_data_14_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_14_1_reg, d_yuv2rgbbyy_tab_data_14_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_14_2_reg, d_yuv2rgbbyy_tab_data_14_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_14_3_reg, d_yuv2rgbbyy_tab_data_14_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_15_0_reg, d_yuv2rgbbyy_tab_data_15_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_15_1_reg, d_yuv2rgbbyy_tab_data_15_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_15_2_reg, d_yuv2rgbbyy_tab_data_15_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_15_3_reg, d_yuv2rgbbyy_tab_data_15_3_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_16_0_reg, d_yuv2rgbbyy_tab_data_16_0_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_16_1_reg, d_yuv2rgbbyy_tab_data_16_1_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_16_2_reg, d_yuv2rgbbyy_tab_data_16_2_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGBBYY_TAB_DATA_16_3_reg, d_yuv2rgbbyy_tab_data_16_3_REG.regValue);

#endif
	d_yuv2rgb_control_1_reg.yuv2rgb_double_buffer_status = 1;  // 20100811, double buffer en , csfanchiang
	rtd_outl(YUV2RGB_D_YUV2RGB_CONTROL_1_reg, d_yuv2rgb_control_1_reg.regValue);

	//pre_Gain_Value = cur_Gain_Value;
}
#endif


#if 0
unsigned int Noise_Statistics( unsigned int width, unsigned int height)
{
#if 0
        static unsigned char fcounter = 0;
        unsigned int MAD_Y_th1, MAD_Y_th2;
        unsigned int MAD_C_th1, MAD_C_th2;
        unsigned int MAD_Y_Count, MAD_U_Count, MAD_V_Count;
        static unsigned int MAD_Y_tmp_sum = 0;
        static unsigned int MAD_U_tmp_sum = 0;
        static unsigned int MAD_V_tmp_sum= 0;
        static unsigned int MAD_Y_min = 0xFFFFFFFF;
        static unsigned int MAD_Y_max = 0;
        static unsigned int MAD_Y_2ndmax = 0;
        static unsigned int MAD_U_min = 0xFFFFFFFF;
        static unsigned int MAD_U_max = 0;
        static unsigned int MAD_U_2ndmax = 0;
        static unsigned int MAD_V_min = 0xFFFFFFFF;
        static unsigned int MAD_V_max = 0;
        static unsigned int MAD_V_2ndmax = 0;
        unsigned int et_y_count;
        //unsigned int et_y_sum, et_u_sum, et_v_sum;
        static unsigned int et_y_count_tmp_sum = 0;
        unsigned int MAD_Y_avg, MAD_U_avg, MAD_V_avg, et_y_count_avg;
		static unsigned int ret_value = 0;
//     static int RTNR_offset;

        di_im_di_rtnr_mad_y_th_RBUS im_di_rtnr_mad_y_th_reg;
        di_im_di_rtnr_mad_c_th_RBUS im_di_rtnr_mad_c_th_reg;
        di_im_di_rtnr_mad_y_counter_RBUS im_di_rtnr_mad_y_counter_reg;
        di_im_di_rtnr_mad_u_counter_RBUS im_di_rtnr_mad_u_counter_reg;
        di_im_di_rtnr_mad_v_counter_RBUS im_di_rtnr_mad_v_counter_reg;
        di_im_di_rtnr_et_count_y_RBUS im_di_et_count_y_reg;
        //di_im_di_rtnr_et_sum_y_RBUS im_di_et_sum_y_reg;
        //di_im_di_rtnr_et_sum_u_RBUS im_di_et_sum_u_reg;
        //di_im_di_rtnr_et_sum_v_RBUS im_di_et_sum_v_reg;

        MAD_Y_th1 = 0x020;
        MAD_Y_th2 = 0x7FF;
        //MAD_Y_th1 = 0x0;
        //MAD_Y_th2 = 0xA;
        MAD_C_th1 = 0x010;
        MAD_C_th2 = 0x7FF;
        /*if( fcounter < 8 ) {
                MAD_Y_th1 = 0x100 * fcounter;
                MAD_Y_th2 = 0x100 * (fcounter+1) -1;
        }*/

        im_di_rtnr_mad_y_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_TH_reg);
        im_di_rtnr_mad_c_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_C_TH_reg);
        //MAD_Y_th1 = im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1;
        //MAD_Y_th2 = im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2;
        //MAD_C_th1 = im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1;
        //MAD_C_th2 = im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2;
        im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = MAD_Y_th1;
        im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = MAD_Y_th2;
        im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1 = MAD_C_th1;
        im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2 = MAD_C_th2;
        rtd_outl(DI_IM_DI_RTNR_MAD_Y_TH_reg, im_di_rtnr_mad_y_th_reg.regValue);
        rtd_outl(DI_IM_DI_RTNR_MAD_C_TH_reg, im_di_rtnr_mad_c_th_reg.regValue);

        im_di_rtnr_mad_y_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_reg);
        im_di_rtnr_mad_u_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_U_COUNTER_reg);
        im_di_rtnr_mad_v_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_V_COUNTER_reg);
        MAD_Y_Count = im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery;
        MAD_U_Count = im_di_rtnr_mad_u_counter_reg.cp_temporal_mad_counteru;
        MAD_V_Count = im_di_rtnr_mad_v_counter_reg.cp_temporal_mad_counterv;

        im_di_et_count_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_COUNT_Y_reg);
        //im_di_et_sum_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_Y_reg);
        //im_di_et_sum_u_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_U_reg);
        //im_di_et_sum_v_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_V_reg);
        et_y_count = im_di_et_count_y_reg.cp_temporal_same_et_cnt_y;
        //et_y_sum = im_di_et_sum_y_reg.cp_temporal_same_et_sad_sum_y;
        //et_u_sum = im_di_et_sum_u_reg.cp_temporal_same_et_sad_sum_u;
        //et_v_sum = im_di_et_sum_v_reg.cp_temporal_same_et_sad_sum_v;

        MAD_Y_tmp_sum += MAD_Y_Count;
        MAD_U_tmp_sum += MAD_U_Count;
        MAD_V_tmp_sum += MAD_V_Count;
        et_y_count_tmp_sum += et_y_count;
        if(et_y_count == 0 ) et_y_count += 1;

        if( MAD_Y_Count < MAD_Y_min ) MAD_Y_min = MAD_Y_Count;
        if( MAD_Y_Count > MAD_Y_2ndmax ) {
                if( MAD_Y_Count > MAD_Y_max ) {
                        MAD_Y_2ndmax = MAD_Y_max; // drop max to avoid scene change
                        MAD_Y_max= MAD_Y_Count;
                }
                else MAD_Y_2ndmax = MAD_Y_Count;
        }
        if( MAD_U_Count < MAD_U_min ) MAD_U_min = MAD_U_Count;
        if( MAD_U_Count > MAD_U_2ndmax ) {
                if( MAD_U_Count > MAD_U_max ) {
                        MAD_U_2ndmax = MAD_U_max; // drop max to avoid scene change
                        MAD_U_max= MAD_U_Count;
                }
                else MAD_U_2ndmax = MAD_U_Count;
        }
        if( MAD_V_Count < MAD_V_min ) MAD_V_min = MAD_V_Count;
        if( MAD_V_Count > MAD_V_2ndmax ) {
                if( MAD_V_Count > MAD_V_max ) {
                        MAD_V_2ndmax = MAD_V_max; // drop max to avoid scene change
                        MAD_V_max= MAD_V_Count;
                }
                else MAD_V_2ndmax = MAD_V_Count;
        }

        /*if( fcounter <= 8 ) {
                ROSPrintf("ooo--- Noise Statistics: ---ooo\n");
                ROSPrintf("ooo--- Count of Y MAD between %d and %d is : %d ---ooo\n", MAD_Y_th1, MAD_Y_th2, MAD_Y_Count);
                ROSPrintf("ooo--- Avg count of U&V MAD between %d and %d is : %d&%d ---ooo\n", MAD_C_th1, MAD_C_th2, MAD_U_Count, MAD_V_Count);
                ROSPrintf("ooo--- Avg count of same edge type: %d ---ooo\n", et_y_count);
                ROSPrintf("ooo--- Avg same edge type sum/count for Y = %d, U = %d, V = %d ---ooo\n", et_y_sum/et_y_count, et_u_sum/et_y_count, et_v_sum/et_y_count);
        }*/
    fcounter++;
    if(fcounter == 5) {
            MAD_Y_avg = MAD_Y_tmp_sum/5;
            MAD_U_avg = MAD_U_tmp_sum/5;
            MAD_V_avg = MAD_V_tmp_sum/5;
            et_y_count_avg = et_y_count_tmp_sum/5;
            /*
            RTNR_offset = 0;
            if( MAD_Y_avg < 1000 )
                    RTNR_offset -= 2;
            else if( MAD_Y_avg < 5000 )
                    RTNR_offset -= 1;
            if( MAD_Y_avg > 500000 )
                    RTNR_offset += 3;
            else if( MAD_Y_avg > 100000 )
                    RTNR_offset += 2;
            else if( MAD_Y_avg > 30000 )
                    RTNR_offset += 1;

            //if( MAD_U_avg > 300000 ) // judged as motion
            //     RTNR_offset -= 2;
            //else if( MAD_U_avg > 150000 )
            //     RTNR_offset -= 1;
            //else if( MAD_U_avg > 10000 && MAD_U_avg < 80000 ) // judged as noise
            if( MAD_U_avg > 10000 ) // judged as noise
                    RTNR_offset += 1;

            //if( MAD_V_avg > 300000 ) // judged as motion
            //     RTNR_offset -= 2;
            //else if( MAD_V_avg > 150000 )
            //     RTNR_offset -= 1;
            //else if( MAD_V_avg > 10000 && MAD_V_avg < 80000 ) // judged as noise
            if( MAD_V_avg > 10000 ) // judged as noise
                    RTNR_offset += 1;

            if( et_y_count_avg < 2000 )
                    RTNR_offset += 4;
            else if( et_y_count_avg < 3000 )
                    RTNR_offset += 3;
            else if( et_y_count_avg < 5000 )
                    RTNR_offset += 2;
            else if( et_y_count_avg < 10000 )
                    RTNR_offset += 1;
            if( et_y_count_avg > 800000 )
                    RTNR_offset -= 3;
            else if( et_y_count_avg > 500000 )
                    RTNR_offset -= 2;
            else if( et_y_count_avg > 300000 )
                    RTNR_offset -= 1;

            RTNR_offset /= 2;
            */
            ///*
            //ROSPrintf("ooo--- Noise Statistics: ---ooo\n");
            //ROSPrintf("ooo--- Range of Y MAD between %d and %d is : %d~%d, avg = %d ---ooo\n", MAD_Y_th1, MAD_Y_th2, MAD_Y_min, MAD_Y_2ndmax, MAD_Y_avg);
            //ROSPrintf("ooo--- Range of U&V MAD between %d and %d is : %d~%d & %d~%d ---ooo\n", MAD_C_th1, MAD_C_th2, MAD_U_min, MAD_U_2ndmax, MAD_V_min, MAD_V_2ndmax);
            //ROSPrintf("ooo--- Avg count of same edge type: %d ---ooo\n", et_y_count_avg);
            //ROSPrintf("ooo--- Avg same edge type sum/count for Y = %d, U = %d, V = %d ---ooo\n", et_y_ratio_tmp_sum/50, et_u_ratio_tmp_sum/50, et_v_ratio_tmp_sum/50);
            //ROSPrintf("ooo--- RTNR offset = %d, RTNR level = %d, SPNR level = %d ---ooo\n", RTNR_offset, RTNR_LEVEL_SDHD, SPNR_LEVEL_SDHD);
            //ROSPrintf("ooo--- RTNR offset = %d ---ooo\n", RTNR_offset);
            //*/
        #if 0
           	static unsigned int counter=0;
			if(counter%5==0)
				ROSPrintf("=%d,\n", MAD_Y_avg);
		#endif
            fcounter = 0;
            MAD_Y_tmp_sum = MAD_U_tmp_sum = MAD_V_tmp_sum = 0;
            et_y_count_tmp_sum =0;
            MAD_Y_min = MAD_U_min = MAD_V_min = 0xFFFFFFFF;
            MAD_Y_max = MAD_U_max = MAD_V_max = 0;
            MAD_Y_2ndmax = MAD_U_2ndmax = MAD_V_2ndmax = 0;
			ret_value = MAD_Y_avg;
    }
	return ret_value;
#else
	static unsigned int ret_value = 0;
	static unsigned char fcounter = 0;

	// MAD counter threshold setting
	unsigned int MAD_Y_Count;
	static unsigned int MAD_Y_tmp_sum = 0;
	unsigned int MAD_Y_avg;
	di_im_di_rtnr_mad_y_th_RBUS im_di_rtnr_mad_y_th_reg;
	di_im_di_rtnr_mad_y_counter_RBUS im_di_rtnr_mad_y_counter_reg;
	im_di_rtnr_mad_y_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_TH_reg);
	im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = 0x020;
	im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = 0x7FF;
#ifndef LG_Demo_flag
	rtd_outl(DI_IM_DI_RTNR_MAD_Y_TH_reg, im_di_rtnr_mad_y_th_reg.regValue);
#endif

	//same edge conter setting
	unsigned int et_y_count;
	unsigned int et_y_sum, et_y_ave;
	di_im_di_rtnr_et_count_y_RBUS im_di_et_count_y_reg;
	di_im_di_rtnr_et_sum_y_RBUS im_di_et_sum_y_reg;
	di_im_di_rtnr_hmcnr_RBUS di_im_di_rtnr_hmcnr_RBUS_reg;
	di_im_di_rtnr_hmcnr_RBUS_reg.regValue = rtd_inl(DI_IM_DI_RTNR_HMCNR_reg);
	di_im_di_rtnr_hmcnr_RBUS_reg.cp_temporal_hmcnr_mad_window = 2;
	di_im_di_rtnr_hmcnr_RBUS_reg.cp_temporal_hmcnr_search_range = 0;
	rtd_outl(DI_IM_DI_RTNR_HMCNR_reg, di_im_di_rtnr_hmcnr_RBUS_reg.regValue);

	//MAD counter calculate
	im_di_rtnr_mad_y_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_reg);
	MAD_Y_Count = im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery;
	MAD_Y_tmp_sum += MAD_Y_Count;
	fcounter++;
	if(fcounter == 5)
	{
		MAD_Y_avg = MAD_Y_tmp_sum/5;
		fcounter = 0;
		MAD_Y_tmp_sum = 0;
		ret_value = MAD_Y_avg;
	}

	//same edge calculate
	im_di_et_count_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_COUNT_Y_reg);
	im_di_et_sum_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_Y_reg);
	et_y_count = im_di_et_count_y_reg.cp_temporal_same_et_cnt_y;
	et_y_sum = im_di_et_sum_y_reg.cp_temporal_same_et_sad_sum_y;
	if(et_y_count==0)
		et_y_count=1;
	et_y_ave = (et_y_sum/et_y_count);

#if 0
	if(MA_print_count%50==0)
		ROSPrintf("n=%d,e=%d,\n",ret_value, et_y_ave);
#endif
	//reuturn
	return ret_value;

#endif
}
#endif

//Elsie 20131212, original by jimmy.lin
unsigned char scalerVIP_Fade_Detection (void)
{
	//static unsigned int ProfSum_pre_field = 0;
	static unsigned int ProfSum_pre_frame = 0;
	static unsigned char isEvenField=0;
	static char fadeDirection = 0;
	static short fadeCount = 0;
	static short stillCount = 0;

	unsigned char isProgressive = 0;
	unsigned int ProfSum_curr_frame = 0;
	int frameDiff = 0;
	unsigned char isValidFrame=0;
	unsigned short diff_still_th = 0;
	unsigned short diff_Th1 = 0, diff_Th2 = 0;
	unsigned short still_Th = 10;

	unsigned short IWid;
	unsigned short ILen;
	unsigned char profsum_shift = 0;

	vgip_vgip_chn1_act_hsta_width_RBUS vgip_chn1_act_hsta_width_reg;
	vgip_vgip_chn1_act_vsta_length_RBUS vgip_chn1_act_vsta_length_reg;
	profile_ich1_hist_profile_ctrl_RBUS ich1_hist_profile_ctrl_reg;

	vgip_chn1_act_hsta_width_reg.regValue  = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	vgip_chn1_act_vsta_length_reg.regValue = scaler_rtd_inl(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg);

	isProgressive = ( SmartPic_clue->SCALER_DISP_INFO.disp_status & _BIT8 ) == 0;
/*
        if( MA_print_count% 180==0 )
	{
		ROSPrintf("[ScalerVIP] isProgressive = %d\n", isProgressive);
	}
*/
	//IWid = scaler_disp_info[_CHANNEL1].DispWid;
	//ILen = scaler_disp_info[_CHANNEL1].DispLen;
	IWid = vgip_chn1_act_hsta_width_reg.ch1_ih_act_wid;
	ILen = vgip_chn1_act_vsta_length_reg.ch1_iv_act_len;

	ich1_hist_profile_ctrl_reg.regValue = rtd_inl(PROFILE_ICH1_Hist_Profile_CTRL_reg);

	switch( ich1_hist_profile_ctrl_reg.ch1_pf_hnsr )
	{
		case 1:
			profsum_shift = 8;
			break;
		case 2:
			profsum_shift = 9;
			break;
		case 3:
			profsum_shift = 10;
			break;
		default: // shouldn't come here normally
			profsum_shift = 0;
			break;
	}

	// Progressive: current frame vs. previous frame
	if( isProgressive )
	{
		ProfSum_curr_frame = ProfSum;
		frameDiff = ProfSum_curr_frame - ProfSum_pre_frame;
		isValidFrame = 1;
	}

	// Interlaced: current even field vs. previous even field
	else if(isEvenField == 1 )
	{
		ProfSum_curr_frame = ProfSum;
		frameDiff = ProfSum_curr_frame - ProfSum_pre_frame;
		isValidFrame = 1;
		ILen *= 2;
	}
	else
	{
		isValidFrame = 0;
	}

	diff_still_th =  ( ( IWid * ILen ) >> profsum_shift ) >> 4; // avg. Y change 1/16
	diff_Th1 = ( ( IWid * ILen ) >> profsum_shift ) >> 2; // avg. Y change 1/4
	//diff_Th1 = 0;
	diff_Th2 = ( ( IWid * ILen ) >> profsum_shift ) << 3; // avg. Y change 8

	if( isValidFrame ) {
		if( abs_value(frameDiff) > diff_still_th ) {
			if( frameDiff * fadeDirection < 0 ) { // direction changed
				fadeCount = 0;
				fadeDirection = (frameDiff > 0) ? 1 : -1;
			}
			else if ( abs_value(frameDiff) >= diff_Th1 && abs_value(frameDiff) <= diff_Th2 ) {
				fadeCount++;
				fadeDirection = (frameDiff > 0) ? 1 : -1;
			}
			stillCount = 0;
		}
		else { // change 0~very small, judged as still
			stillCount++;
			if( stillCount >= still_Th ) { // still for more than set number of frames
				fadeCount = 0;
				fadeDirection = 0;
				stillCount = 0;
			}
		}

		ProfSum_pre_frame = ProfSum_curr_frame;
	}

	isEvenField = (isEvenField==0) ? 1 : 0;
#if 0
	if( MA_print_count% 180==0 )
	{
		ROSPrintf("[ScalerVIP] ProfSum = %d, ProfSum_pre = %d\n", ProfSum, ProfSum_pre_frame);
		ROSPrintf("[ScalerVIP] Frame diff: %d, Fade direction: %d, stillCount: %d\n", frameDiff, fadeDirection, stillCount);
	}
#endif
	if( fadeCount >= 4 ) return true;
	else return false;

}

// 20130823 jimmy.lin for noise statistics
MOTION_NOISE_TYPE scalerVIP_noise_estimation_MAD_et( unsigned int width, unsigned int height )
{
	static unsigned char fcounter = 0;
	unsigned int MAD_Y_th1, MAD_Y_th2;
	unsigned int MAD_C_th1, MAD_C_th2;
	unsigned int MAD_Y_Count, MAD_U_Count, MAD_V_Count;
	static unsigned int MAD_Y_tmp_sum = 0;
	static unsigned int MAD_U_tmp_sum = 0;
	static unsigned int MAD_V_tmp_sum= 0;
	static unsigned int MAD_Y_min = 0xFFFFFFFF;
	static unsigned int MAD_Y_max = 0;
	static unsigned int MAD_Y_2ndmax = 0;
	static unsigned int MAD_U_min = 0xFFFFFFFF;
	static unsigned int MAD_U_max = 0;
	static unsigned int MAD_U_2ndmax = 0;
	static unsigned int MAD_V_min = 0xFFFFFFFF;
	static unsigned int MAD_V_max = 0;
	static unsigned int MAD_V_2ndmax = 0;
	unsigned int et_y_count;
	//unsigned int et_y_sum, et_u_sum, et_v_sum;
	static unsigned int et_y_count_tmp_sum = 0;
	unsigned int MAD_Y_avg, MAD_U_avg, MAD_V_avg, et_y_count_avg;
	static MOTION_NOISE_TYPE isMotion = 0; // 0: still, 1: motion, 2: noise

	di_im_di_rtnr_mad_y_th_RBUS im_di_rtnr_mad_y_th_reg;
	di_im_di_rtnr_mad_c_th_RBUS im_di_rtnr_mad_c_th_reg;
	di_im_di_rtnr_mad_y_counter_RBUS im_di_rtnr_mad_y_counter_reg;
	di_im_di_rtnr_mad_u_counter_RBUS im_di_rtnr_mad_u_counter_reg;
	di_im_di_rtnr_mad_v_counter_RBUS im_di_rtnr_mad_v_counter_reg;
	di_im_di_rtnr_et_count_y_RBUS im_di_et_count_y_reg;
	di_im_di_rtnr_level_bound_RBUS im_di_rtnr_level_bound_reg;
	//di_im_di_rtnr_et_sum_y_RBUS im_di_et_sum_y_reg;
	//di_im_di_rtnr_et_sum_u_RBUS im_di_et_sum_u_reg;
	//di_im_di_rtnr_et_sum_v_RBUS im_di_et_sum_v_reg;

	MAD_Y_th1 = 0x017; //23
	MAD_Y_th2 = 0x7FF;
	//MAD_Y_th1 = 0x0;
	//MAD_Y_th2 = 0xA;
	MAD_C_th1 = 0x010;
	MAD_C_th2 = 0x7FF;
	/*if( fcounter < 8 ) {
		MAD_Y_th1 = 0x100 * fcounter;
		MAD_Y_th2 = 0x100 * (fcounter+1) -1;
	}*/

	im_di_rtnr_mad_y_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_TH_reg);
	im_di_rtnr_mad_c_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_C_TH_reg);
	im_di_rtnr_level_bound_reg.regValue = rtd_inl(DI_IM_DI_RTNR_LEVEL_BOUND_reg);
	//MAD_Y_th1 = im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1;
	//MAD_Y_th2 = im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2;
	//MAD_C_th1 = im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1;
	//MAD_C_th2 = im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2;
	im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = MAD_Y_th1;
	im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = MAD_Y_th2;
	im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th1 = MAD_C_th1;
	im_di_rtnr_mad_c_th_reg.cp_temporal_mad_c_th2 = MAD_C_th2;
	im_di_rtnr_level_bound_reg.cp_temporal_nl_low_bnd_y = 0;
	im_di_rtnr_level_bound_reg.cp_temporal_nl_up_bnd_y = 0xFF;
	rtd_outl(DI_IM_DI_RTNR_MAD_Y_TH_reg, im_di_rtnr_mad_y_th_reg.regValue);
	rtd_outl(DI_IM_DI_RTNR_MAD_C_TH_reg, im_di_rtnr_mad_c_th_reg.regValue);
	rtd_outl(DI_IM_DI_RTNR_LEVEL_BOUND_reg, im_di_rtnr_level_bound_reg.regValue);

	im_di_rtnr_mad_y_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_reg);
	im_di_rtnr_mad_u_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_U_COUNTER_reg);
	im_di_rtnr_mad_v_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_V_COUNTER_reg);
	MAD_Y_Count = im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery;
	MAD_U_Count = im_di_rtnr_mad_u_counter_reg.cp_temporal_mad_counteru;
	MAD_V_Count = im_di_rtnr_mad_v_counter_reg.cp_temporal_mad_counterv;

	im_di_et_count_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_COUNT_Y_reg);
	//im_di_et_sum_y_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_Y_reg);
	//im_di_et_sum_u_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_U_reg);
	//im_di_et_sum_v_reg.regValue = rtd_inl(DI_IM_DI_RTNR_ET_SUM_V_reg);
	et_y_count = im_di_et_count_y_reg.cp_temporal_same_et_cnt_y;
	//et_y_sum = im_di_et_sum_y_reg.cp_temporal_same_et_sad_sum_y;
	//et_u_sum = im_di_et_sum_u_reg.cp_temporal_same_et_sad_sum_u;
	//et_v_sum = im_di_et_sum_v_reg.cp_temporal_same_et_sad_sum_v;

	MAD_Y_tmp_sum += MAD_Y_Count;
	MAD_U_tmp_sum += MAD_U_Count;
	MAD_V_tmp_sum += MAD_V_Count;
	et_y_count_tmp_sum += et_y_count;
	if(et_y_count == 0 ) et_y_count += 1;

	if( MAD_Y_Count < MAD_Y_min ) MAD_Y_min = MAD_Y_Count;
	if( MAD_Y_Count > MAD_Y_2ndmax ) {
		if( MAD_Y_Count > MAD_Y_max ) {
			MAD_Y_2ndmax = MAD_Y_max; // drop max to avoid scene change
			MAD_Y_max= MAD_Y_Count;
		}
		else MAD_Y_2ndmax = MAD_Y_Count;
	}
	if( MAD_U_Count < MAD_U_min ) MAD_U_min = MAD_U_Count;
	if( MAD_U_Count > MAD_U_2ndmax ) {
		if( MAD_U_Count > MAD_U_max ) {
			MAD_U_2ndmax = MAD_U_max; // drop max to avoid scene change
			MAD_U_max= MAD_U_Count;
		}
		else MAD_U_2ndmax = MAD_U_Count;
	}
	if( MAD_V_Count < MAD_V_min ) MAD_V_min = MAD_V_Count;
	if( MAD_V_Count > MAD_V_2ndmax ) {
		if( MAD_V_Count > MAD_V_max ) {
			MAD_V_2ndmax = MAD_V_max; // drop max to avoid scene change
			MAD_V_max= MAD_V_Count;
		}
		else MAD_V_2ndmax = MAD_V_Count;
	}

	fcounter++;
	if(fcounter % 5 == 0) {
		MAD_Y_avg = MAD_Y_tmp_sum/5;
		MAD_U_avg = MAD_U_tmp_sum/5;
		MAD_V_avg = MAD_V_tmp_sum/5;
		et_y_count_avg = et_y_count_tmp_sum/5;

		isMotion = MOTION_NOISE_TYPE_STILL;
		if( MAD_Y_avg > ((width*height) >> 6) ) // total area/64
		{
			isMotion = MOTION_NOISE_TYPE_MOTION; // judge as motion
			if( MAD_Y_avg > ((width*height) >> 4) ) // total area / 16
				isMotion = MOTION_NOISE_TYPE_LARGE_MOTION;
			else if( et_y_count_avg < ((width*height) >> 4) ) // total area/16
				isMotion = MOTION_NOISE_TYPE_NOISE; // judge as noise
		}
#if 1
		if( (fcounter%debug_print_delay_time == 0) &&(Start_Print.Rtnr_1==TRUE) )
		{

			ROSPrintf("ooo--- Noise Statistics: ---ooo\n");
			ROSPrintf("ooo--- Range of Y MAD between %d and %d is : %d~%d, avg = %d ---ooo \n", MAD_Y_th1, MAD_Y_th2, MAD_Y_min, MAD_Y_2ndmax, MAD_Y_avg);
			ROSPrintf("ooo--- Range of U&V MAD between %d and %d is : %d~%d & %d~%d ---ooo \n", MAD_C_th1, MAD_C_th2, MAD_U_min, MAD_U_2ndmax, MAD_V_min, MAD_V_2ndmax);
			ROSPrintf("ooo--- Avg count of same edge type: %d ---ooo\n", et_y_count_avg);

			switch( isMotion )
			{
				case MOTION_NOISE_TYPE_STILL:
					ROSPrintf("ooo--- MOTION_NOISE_TYPE_STILL ---ooo\n");
					break;
				case MOTION_NOISE_TYPE_MOTION:
					ROSPrintf("ooo--- MOTION_NOISE_TYPE_MOTION ---ooo\n");
					break;
				case MOTION_NOISE_TYPE_LARGE_MOTION:
					ROSPrintf("ooo--- MOTION_NOISE_TYPE_LARGE_MOTION ---ooo\n");
					break;
				case MOTION_NOISE_TYPE_NOISE:
					ROSPrintf("ooo--- MOTION_NOISE_TYPE_NOISE ---ooo\n");
					break;
			}
			fcounter = 0;
		}
#endif
		MAD_Y_tmp_sum = MAD_U_tmp_sum = MAD_V_tmp_sum = 0;
		et_y_count_tmp_sum =0;
		MAD_Y_min = MAD_U_min = MAD_V_min = 0xFFFFFFFF;
		MAD_Y_max = MAD_U_max = MAD_V_max = 0;
		MAD_Y_2ndmax = MAD_U_2ndmax = MAD_V_2ndmax = 0;
	}

	return isMotion;

}

#if 0
void scalerVIP_RTNR_correctionbit_period(void)
{
	static unsigned short framecnt = 0;
	static unsigned short pseudo_ran = 0;
	unsigned int pseudo_ran_var = 566927;
	unsigned char nRan_Range=5;
	unsigned char correctionbit_period = 0;

	if((SmartPic_clue->MAD_motion_status) == MOTION_NOISE_TYPE_MOTION) // motion
		correctionbit_period = 1;
	else if((SmartPic_clue->MAD_motion_status) == MOTION_NOISE_TYPE_NOISE) // noise or very large motion
		correctionbit_period = 1;
	else	// still
	{
		//correctionbit_period = pseudo_ran;
		correctionbit_period = 1;
	}
	if (Start_Print.Reverse_11==TRUE)
	{
		correctionbit_period = Start_Print.Delay_Time;
	}

	if( (correctionbit_period != 0) && (framecnt % correctionbit_period == 0) ) {
		IoReg_SetBits(DI_IM_DI_RTNR_CONTROL_reg, _BIT3);
		if( pseudo_ran_var != 0 )
			pseudo_ran = (pseudo_ran*3612+5701) % pseudo_ran_var;
		else
			pseudo_ran = 0;

		pseudo_ran = pseudo_ran % nRan_Range;
		framecnt = 0;
	}
	else
		IoReg_ClearBits(DI_IM_DI_RTNR_CONTROL_reg, _BIT3);


	/*
	if( MA_print_count% 180==0 ) {
		ROSPrintf("[AutoRTNR] MAD_motion_status = %d, di_motion_status = %d, correctionbit_period = %d\n", (SmartPic_clue->MAD_motion_status), (SmartPic_clue->di_motion_status), correctionbit_period );
	}
	*/
	framecnt++;
}
#endif

// 20131209 jimmy.lin
MOTION_NOISE_TYPE scalerVIP_Profile_Block_Motion(_clues* SmartPic_clue)
{
	unsigned char ii,jj;
	unsigned char Profile_Block_Num = 16;//set profile h&V block number
	unsigned short *H_Block = &(SmartPic_clue->Profile_Cal_INFO.H_Block_Y[0]);
	unsigned short *V_Block = &(SmartPic_clue->Profile_Cal_INFO.V_Block_Y[0]);

	static unsigned char isEvenField = 0;

	static unsigned short pre_H_Block[16] = {0};
	static unsigned short pre_V_Block[16] = {0};
	static int diff_H[10][16] = {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}};
	static int diff_V[10][16] = {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}};

	unsigned int sum_of_difference[10];
	//unsigned short motion_trend = 0;
	unsigned short motion_th = 1;
	unsigned char maxDirCnt = 0;
	unsigned char sameDirCnt = 0;
	unsigned char diffDirCnt = 0;
	char currDir;
	char sign; // 1: +, -1: -, 0: zero or under threshold
	unsigned short maxDiff, totalDiff;

	MOTION_NOISE_TYPE H_Block_Motion[16];
	MOTION_NOISE_TYPE V_Block_Motion[16];

	static MOTION_NOISE_TYPE isMotion = 0;

	for( jj=0; jj<10; jj++ ) {
		sum_of_difference[jj] = 0;
	}

	for( ii=0; ii<Profile_Block_Num; ii++ )
	{
		H_Block_Motion[ii] = MOTION_NOISE_TYPE_STILL;
		V_Block_Motion[ii] = MOTION_NOISE_TYPE_STILL;
	}

	if( isEvenField != 0 ) {

		block_motion_count_H = 0;
		block_motion_count_V = 0;
		block_noise_count_H = 0;
		block_noise_count_V = 0;

		//motion detection
		for (ii=0;ii<Profile_Block_Num;ii++)
		{
			for(jj=9; jj>0; jj--) {
				diff_H[jj][ii] = diff_H[jj-1][ii];
				diff_V[jj][ii] = diff_V[jj-1][ii];
				sum_of_difference[jj] += abs_value(diff_H[jj][ii]) + abs_value(diff_V[jj][ii]);
			}
			diff_H[0][ii] = H_Block[ii] - pre_H_Block[ii];
			diff_V[0][ii] = V_Block[ii] - pre_V_Block[ii];
			sum_of_difference[0] += abs_value(diff_H[0][ii]) + abs_value(diff_V[0][ii]);

		}

		//save profile to buffer:pre_H_Block, pre_V_Block
		for (ii=0;ii<Profile_Block_Num;ii++)
		{
			pre_H_Block[ii] = H_Block[ii];
			pre_V_Block[ii] = V_Block[ii];
		}

		for( ii=0; ii<Profile_Block_Num; ii++ ) {

			// H_Block motion determination
			maxDirCnt = 0;
			sameDirCnt = 0;
			diffDirCnt = 0;
			maxDiff = 0;
			totalDiff = 0;
			if( abs_value(diff_H[0][ii]) < motion_th )
				currDir = 0;
			else
				currDir = (diff_H[0][ii]>=0 ? 1 : -1);

			for( jj=1; jj<5; jj++ ) {
				if( abs_value(diff_H[jj][ii]) < motion_th )
					sign = 0;
				else
					sign = (diff_H[jj][ii]>=0 ? 1 : -1);

				if( sign == currDir && currDir!= 0 ) {
					sameDirCnt++;
					if( sameDirCnt > maxDirCnt )
						maxDirCnt = sameDirCnt;
					totalDiff += abs_value(diff_H[jj][ii]);
					if( totalDiff > maxDiff )
						maxDiff = totalDiff;
				}
				else if( sign != 0 && currDir != 0 ) { // different direction
					sameDirCnt = 0;
					diffDirCnt++;
					currDir = sign;
					totalDiff = 0;
				}
				else {
					totalDiff = abs_value(totalDiff + diff_H[jj][ii]);
					if( totalDiff > maxDiff )
						maxDiff = totalDiff;
				}
			}
			if( diffDirCnt >= 2  ) {
				H_Block_Motion[ii] = MOTION_NOISE_TYPE_NOISE;
				block_noise_count_H++;
			}
			else if( maxDirCnt >= 3 || (maxDirCnt>1 && maxDiff >= motion_th*maxDirCnt ) ) {
				H_Block_Motion[ii] = MOTION_NOISE_TYPE_MOTION;
				block_motion_count_H++;
			}
			else {
				H_Block_Motion[ii] = MOTION_NOISE_TYPE_STILL;
			}

			// V_Block motion determination
			maxDirCnt = 0;
			sameDirCnt = 0;
			diffDirCnt = 0;
			maxDiff = 0;
			totalDiff = 0;
			if( abs_value(diff_V[0][ii]) < motion_th )
				currDir = 0;
			else
				currDir = (diff_V[0][ii]>=0 ? 1 : -1);

			for( jj=1; jj<5; jj++ ) {
				if( abs_value(diff_V[jj][ii]) < motion_th )
					sign = 0;
				else
					sign = (diff_V[jj][ii]>=0 ? 1 : -1);

				if( sign == currDir && currDir!= 0 ) {
					sameDirCnt++;
					if( sameDirCnt > maxDirCnt )
						maxDirCnt = sameDirCnt;
					totalDiff += abs_value(diff_V[jj][ii]);
					if( totalDiff > maxDiff )
						maxDiff = totalDiff;
				}
				else if( sign != 0 && currDir != 0 ) { // different direction
					sameDirCnt = 0;
					diffDirCnt++;
					currDir = sign;
					totalDiff = 0;
				}
				else {
					totalDiff = abs_value(totalDiff + diff_V[jj][ii]);
					if( totalDiff > maxDiff )
						maxDiff = totalDiff;
				}
			}
			if( diffDirCnt > 2  ) {
				V_Block_Motion[ii] = MOTION_NOISE_TYPE_NOISE;
				block_noise_count_V++;
			}
			else if( maxDirCnt >= 3 || (maxDirCnt>1 && maxDiff >= motion_th*maxDirCnt ) ) {
				V_Block_Motion[ii] = MOTION_NOISE_TYPE_MOTION;
				block_motion_count_V++;
			}
			else {
				V_Block_Motion[ii] = MOTION_NOISE_TYPE_STILL;
			}

		}

	}

	isEvenField = (isEvenField+1) % 2;
	//flag_motion_type_pre = flag_motion_type;
	if( (block_motion_count_H >= 8) || (block_motion_count_V >= 8) )
		isMotion = MOTION_NOISE_TYPE_MOTION;
	else {
		isMotion = MOTION_NOISE_TYPE_STILL;
	}
#if 0
	if( MA_print_count% 180==0 ) {
		///*
		for( ii=0; ii<Profile_Block_Num; ii++ ) {
			ROSPrintf("diff_H of block %d: ", ii );
			for( jj=0; jj<5; jj++ ) {
				ROSPrintf("%d ", diff_H[jj][ii] );
			}
			ROSPrintf("\n");
		}


		for( ii=0; ii<Profile_Block_Num; ii++ ) {
			ROSPrintf("diff_V of block %d: ", ii );
			for( jj=0; jj<5; jj++ ) {
				ROSPrintf("%d ", diff_V[jj][ii] );
			}
			ROSPrintf("\n");
		}

		ROSPrintf("H motion level: ");
		for( ii=0; ii<Profile_Block_Num; ii++ ) {
			ROSPrintf("%d ", H_Block_Motion[ii]);
		}
		ROSPrintf("\n");
		ROSPrintf("V motion level: ");
		for( ii=0; ii<Profile_Block_Num; ii++ ) {
			ROSPrintf("%d ", V_Block_Motion[ii]);
		}
		ROSPrintf("\n");
		//*/
		//ROSPrintf("block_motion_count_H = %d, block_motion_count_V = %d\n", block_motion_count_H, block_motion_count_V );
	}
#endif
	return isMotion;
}
#if 0
unsigned char scalerVIP_RTNR_level_compute(MOTION_NOISE_TYPE MADMotion, MOTION_NOISE_TYPE blockMotion, unsigned short *PQA_Input_Level, unsigned short *PQA_Input_rate)
{
	static char RTNR_level_SdHd = 1;
	static char SPNR_level_SdHd;
	static unsigned char counter_file = 0;
	unsigned char motion_blk_cnt;
	char target_level=0,target_level_T=0,target_level_S=0;
	static unsigned short motion_total = 0; // for avg..
	static unsigned char motion_cnt= 0;
	char content_spatial_noise_offset = 0;

	// content spatial noise meter offset
	if( scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE) )
	{
		unsigned char spatial_noise_level = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL);

		if( (spatial_noise_level >= 1) && (spatial_noise_level <= 2) )
		{
			content_spatial_noise_offset = 1;
		}
		else if( (spatial_noise_level >= 3) && (spatial_noise_level <= 4))
		{
			content_spatial_noise_offset = 2;
		}
		else
		{
			content_spatial_noise_offset = 0;
		}
	}


	// motion_level: 0 <- still      motion -> 9
	// target_level = 9-motion_level
	if( MADMotion == MOTION_NOISE_TYPE_LARGE_MOTION )
	{
		motion_total += 9;
		motion_cnt++;
	}
	else
	{
		motion_blk_cnt = (block_motion_count_H>=block_motion_count_V) ? block_motion_count_H : block_motion_count_V;
		if( motion_blk_cnt >= 12 )
		{
			motion_total += 9;
			motion_cnt++;
		}
		else if( scalerVIP_DI_MiddleWare_GetStatus(STATUS_VPAN) > 0 )  // V-PAN condition
		{
			motion_total += 9;
			motion_cnt++;
		}
		else if( motion_blk_cnt >= 7 ) // half motion <- 5~9 -> total motion
		{
			//motion_total += (12 - motion_blk_cnt);
			motion_total += motion_blk_cnt - 2;
			motion_cnt++;
		}
		else if( MADMotion == MOTION_NOISE_TYPE_MOTION )
		{
			motion_total += 7;
			motion_cnt++;
		}
	}

	counter_file++;

	if( counter_file % 21 == 0 )
	{
		if( motion_cnt > 10 )
		{
			//target_level = motion_total / motion_cnt - 1;
			target_level = 9 - (motion_total / motion_cnt);
		}
		else
		{
			//target_level = 9;
			target_level = 9 - (motion_total / 21);
		}

		// content special noise offset
		//target_level += content_spatial_noise_offset;
		//if( target_level > 9 )
			//target_level = 9;

		target_level_T=target_level;
		target_level_S=target_level;

		// special pattern identify
		if( (DynamicOptimizeSystem[35] == 1) || (DynamicOptimizeSystem[47] == 1) ||  (DynamicOptimizeSystem[133] == 1) || (DynamicOptimizeSystem[134] == 1) || (DynamicOptimizeSystem[135] == 1) )
		{
			target_level_T = 0;
		}


		if( RTNR_level_SdHd > target_level_T )
		{
			RTNR_level_SdHd--;
			// switch on correction1
			IoReg_SetBits(DI_IM_DI_RTNR_CONTROL_reg, _BIT3);
		}
		else if( RTNR_level_SdHd < target_level_T )
		{
			RTNR_level_SdHd++;
			// switch on correction1
			IoReg_SetBits(DI_IM_DI_RTNR_CONTROL_reg, _BIT3);
		}

		counter_file = 0;
		motion_total = 0;
		motion_cnt = 0;

		//ROSPrintf( "Current RTNR level = %d, target level = %d\n", RTNR_level_SdHd, target_level );
		//ROSPrintf( "Block motion H = %d, block motion V = %d\n", block_motion_count_H, block_motion_count_V );
		    SPNR_level_SdHd = RTNR_level_SdHd;

			// content special noise offset
		    if(target_level>5) // enhance TNR
		        target_level_T+=content_spatial_noise_offset;
		    else // enhance SNR
		      	target_level_S -= content_spatial_noise_offset;


		    if( RTNR_level_SdHd > target_level_T )
		        RTNR_level_SdHd--;
		    else if( RTNR_level_SdHd < target_level_T )
		        RTNR_level_SdHd++;

		    if( SPNR_level_SdHd > target_level_S )
		        SPNR_level_SdHd--;
		    else if( SPNR_level_SdHd < target_level_S )
		        SPNR_level_SdHd++;

		    if (RTNR_level_SdHd>9)
		        RTNR_level_SdHd=9;
		    if(RTNR_level_SdHd<0)
		        RTNR_level_SdHd=0;

		    if (SPNR_level_SdHd>9)
		        SPNR_level_SdHd=9;
		    if(SPNR_level_SdHd<0)
		        SPNR_level_SdHd=0;

	}



	//if( SmartPic_clue->SceneChange_NR )
	{
		//if(Start_Print.Rtnr_1==TRUE)
		{
			ROSPrintf_INFO_PQA1("*************** [RTNR] Scene Change!!!!! ***************\n" );
		}
		RTNR_level_SdHd = 0;
	}

	//if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Snr==TRUE))
	{
		ROSPrintf_INFO_PQA1( "** target level = %d, target level T = %d, target level S = %d\n", target_level, target_level_T, target_level_S );
		ROSPrintf_INFO_PQA1( "** RTNR level = %d, SPNR level = %d\n",  RTNR_level_SdHd, SPNR_level_SdHd );
		ROSPrintf_INFO_PQA1( "** content_spatial_noise_offset = %d\n", content_spatial_noise_offset );
	}

	PQA_Input_Level[I_MOTION_RTNR] = RTNR_level_SdHd;
	PQA_Input_rate[I_MOTION_RTNR] =0;
	PQA_Input_Level[I_MOTION_SPNR] = SPNR_level_SdHd;
	PQA_Input_rate[I_MOTION_SPNR] =0;
	return RTNR_level_SdHd;
}
#endif

#if 1
//#ifdef ISR_READ_SRC_DET_FUNCTIOM_ENABLE
char scalerVIP_ReadSrcDet(unsigned char step_thl, unsigned char isd_tsh_part1_hist_mode)
{
	unsigned int average;
	unsigned char i=0;
       static unsigned int fail_cnt=0;

	unsigned short iDomain_width = 0,  iDomain_height = 0;
	profile_srcdet_tsh_boundary_start_end_RBUS  profile_srcdet_tsh_boundary_start_end;
	profile_srcdet_tsh_boundary1_RBUS profile_srcdet_tsh_boundary1;
	profile_srcdet_tsh_boundary2_RBUS profile_srcdet_tsh_boundary2;

	vgip_vgip_chn1_act_hsta_width_RBUS	 vgip_chn1_act_hsta_width;
	vgip_vgip_chn1_act_vsta_length_RBUS vgip_chn1_act_vsta_length;

	profile_srcdet_tsh_mode_RBUS profile_srcdet_tsh_mode;
	di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;

//part1
  	profile_srcdet_tsh_part1_hist01_RBUS tsh_part1_hist01;
  	profile_srcdet_tsh_part1_hist02_RBUS tsh_part1_hist02;
  	profile_srcdet_tsh_part1_hist03_RBUS tsh_part1_hist03;
  	profile_srcdet_tsh_part1_hist04_RBUS tsh_part1_hist04;
  	profile_srcdet_tsh_part1_hist05_RBUS tsh_part1_hist05;
  	profile_srcdet_tsh_part1_hist06_RBUS tsh_part1_hist06;
  	profile_srcdet_tsh_part1_hist07_RBUS tsh_part1_hist07;
  	profile_srcdet_tsh_part1_hist08_RBUS tsh_part1_hist08;
  	profile_srcdet_tsh_part1_hist09_RBUS tsh_part1_hist09;
  	profile_srcdet_tsh_part1_hist10_RBUS tsh_part1_hist10;
  	profile_srcdet_tsh_part1_hist11_RBUS tsh_part1_hist11;
  	profile_srcdet_tsh_part1_hist12_RBUS tsh_part1_hist12;
  	profile_srcdet_tsh_part1_hist13_RBUS tsh_part1_hist13;
  	profile_srcdet_tsh_part1_hist14_RBUS tsh_part1_hist14;
  	profile_srcdet_tsh_part1_hist15_RBUS tsh_part1_hist15;
  	profile_srcdet_tsh_part1_hist16_RBUS tsh_part1_hist16;
  	profile_srcdet_tsh_part1_hist17_RBUS tsh_part1_hist17;
  	profile_srcdet_tsh_part1_hist18_RBUS tsh_part1_hist18;
  	profile_srcdet_tsh_part1_hist19_RBUS tsh_part1_hist19;
  	profile_srcdet_tsh_part1_hist20_RBUS tsh_part1_hist20;

//part2
  	profile_srcdet_tsh_part2_hist01_RBUS tsh_part2_hist01;
  	profile_srcdet_tsh_part2_hist02_RBUS tsh_part2_hist02;
  	profile_srcdet_tsh_part2_hist03_RBUS tsh_part2_hist03;
  	profile_srcdet_tsh_part2_hist04_RBUS tsh_part2_hist04;
  	profile_srcdet_tsh_part2_hist05_RBUS tsh_part2_hist05;
  	profile_srcdet_tsh_part2_hist06_RBUS tsh_part2_hist06;
  	profile_srcdet_tsh_part2_hist07_RBUS tsh_part2_hist07;
  	profile_srcdet_tsh_part2_hist08_RBUS tsh_part2_hist08;
  	profile_srcdet_tsh_part2_hist09_RBUS tsh_part2_hist09;
  	profile_srcdet_tsh_part2_hist10_RBUS tsh_part2_hist10;
  	profile_srcdet_tsh_part2_hist11_RBUS tsh_part2_hist11;
  	profile_srcdet_tsh_part2_hist12_RBUS tsh_part2_hist12;
  	profile_srcdet_tsh_part2_hist13_RBUS tsh_part2_hist13;
  	profile_srcdet_tsh_part2_hist14_RBUS tsh_part2_hist14;
  	profile_srcdet_tsh_part2_hist15_RBUS tsh_part2_hist15;
  	profile_srcdet_tsh_part2_hist16_RBUS tsh_part2_hist16;
  	profile_srcdet_tsh_part2_hist17_RBUS tsh_part2_hist17;
  	profile_srcdet_tsh_part2_hist18_RBUS tsh_part2_hist18;
  	profile_srcdet_tsh_part2_hist19_RBUS tsh_part2_hist19;
  	profile_srcdet_tsh_part2_hist20_RBUS tsh_part2_hist20;

//part3
  	profile_srcdet_tsh_part3_hist01_RBUS tsh_part3_hist01;
  	profile_srcdet_tsh_part3_hist02_RBUS tsh_part3_hist02;
  	profile_srcdet_tsh_part3_hist03_RBUS tsh_part3_hist03;
  	profile_srcdet_tsh_part3_hist04_RBUS tsh_part3_hist04;
  	profile_srcdet_tsh_part3_hist05_RBUS tsh_part3_hist05;
  	profile_srcdet_tsh_part3_hist06_RBUS tsh_part3_hist06;
  	profile_srcdet_tsh_part3_hist07_RBUS tsh_part3_hist07;
  	profile_srcdet_tsh_part3_hist08_RBUS tsh_part3_hist08;
  	profile_srcdet_tsh_part3_hist09_RBUS tsh_part3_hist09;
  	profile_srcdet_tsh_part3_hist10_RBUS tsh_part3_hist10;
  	profile_srcdet_tsh_part3_hist11_RBUS tsh_part3_hist11;
  	profile_srcdet_tsh_part3_hist12_RBUS tsh_part3_hist12;
  	profile_srcdet_tsh_part3_hist13_RBUS tsh_part3_hist13;
  	profile_srcdet_tsh_part3_hist14_RBUS tsh_part3_hist14;
  	profile_srcdet_tsh_part3_hist15_RBUS tsh_part3_hist15;
  	profile_srcdet_tsh_part3_hist16_RBUS tsh_part3_hist16;
  	profile_srcdet_tsh_part3_hist17_RBUS tsh_part3_hist17;
  	profile_srcdet_tsh_part3_hist18_RBUS tsh_part3_hist18;
  	profile_srcdet_tsh_part3_hist19_RBUS tsh_part3_hist19;
  	profile_srcdet_tsh_part3_hist20_RBUS tsh_part3_hist20;

//part4
  	profile_srcdet_tsh_part4_hist01_RBUS tsh_part4_hist01;
  	profile_srcdet_tsh_part4_hist02_RBUS tsh_part4_hist02;
  	profile_srcdet_tsh_part4_hist03_RBUS tsh_part4_hist03;
  	profile_srcdet_tsh_part4_hist04_RBUS tsh_part4_hist04;
  	profile_srcdet_tsh_part4_hist05_RBUS tsh_part4_hist05;
  	profile_srcdet_tsh_part4_hist06_RBUS tsh_part4_hist06;
  	profile_srcdet_tsh_part4_hist07_RBUS tsh_part4_hist07;
  	profile_srcdet_tsh_part4_hist08_RBUS tsh_part4_hist08;
  	profile_srcdet_tsh_part4_hist09_RBUS tsh_part4_hist09;
  	profile_srcdet_tsh_part4_hist10_RBUS tsh_part4_hist10;
  	profile_srcdet_tsh_part4_hist11_RBUS tsh_part4_hist11;
  	profile_srcdet_tsh_part4_hist12_RBUS tsh_part4_hist12;
  	profile_srcdet_tsh_part4_hist13_RBUS tsh_part4_hist13;
  	profile_srcdet_tsh_part4_hist14_RBUS tsh_part4_hist14;
  	profile_srcdet_tsh_part4_hist15_RBUS tsh_part4_hist15;
  	profile_srcdet_tsh_part4_hist16_RBUS tsh_part4_hist16;
  	profile_srcdet_tsh_part4_hist17_RBUS tsh_part4_hist17;
  	profile_srcdet_tsh_part4_hist18_RBUS tsh_part4_hist18;
  	profile_srcdet_tsh_part4_hist19_RBUS tsh_part4_hist19;
  	profile_srcdet_tsh_part4_hist20_RBUS tsh_part4_hist20;

//part5
  	profile_srcdet_tsh_part5_hist01_RBUS tsh_part5_hist01;
  	profile_srcdet_tsh_part5_hist02_RBUS tsh_part5_hist02;
  	profile_srcdet_tsh_part5_hist03_RBUS tsh_part5_hist03;
  	profile_srcdet_tsh_part5_hist04_RBUS tsh_part5_hist04;
  	profile_srcdet_tsh_part5_hist05_RBUS tsh_part5_hist05;
  	profile_srcdet_tsh_part5_hist06_RBUS tsh_part5_hist06;
  	profile_srcdet_tsh_part5_hist07_RBUS tsh_part5_hist07;
  	profile_srcdet_tsh_part5_hist08_RBUS tsh_part5_hist08;
  	profile_srcdet_tsh_part5_hist09_RBUS tsh_part5_hist09;
  	profile_srcdet_tsh_part5_hist10_RBUS tsh_part5_hist10;
  	profile_srcdet_tsh_part5_hist11_RBUS tsh_part5_hist11;
  	profile_srcdet_tsh_part5_hist12_RBUS tsh_part5_hist12;
  	profile_srcdet_tsh_part5_hist13_RBUS tsh_part5_hist13;
  	profile_srcdet_tsh_part5_hist14_RBUS tsh_part5_hist14;
  	profile_srcdet_tsh_part5_hist15_RBUS tsh_part5_hist15;
  	profile_srcdet_tsh_part5_hist16_RBUS tsh_part5_hist16;
  	profile_srcdet_tsh_part5_hist17_RBUS tsh_part5_hist17;
  	profile_srcdet_tsh_part5_hist18_RBUS tsh_part5_hist18;
  	profile_srcdet_tsh_part5_hist19_RBUS tsh_part5_hist19;
  	profile_srcdet_tsh_part5_hist20_RBUS tsh_part5_hist20;


/*merlin5, add, start*/
	vgip_chn1_act_hsta_width.regValue =  rtd_inl(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	iDomain_width = vgip_chn1_act_hsta_width.ch1_ih_act_wid;

	vgip_chn1_act_vsta_length.regValue =  rtd_inl(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg);
	iDomain_height = vgip_chn1_act_vsta_length.ch1_iv_act_len;

	profile_srcdet_tsh_boundary_start_end.regValue = rtd_inl(PROFILE_SRCDET_TSH_BOUNDARY_START_END_reg);
	profile_srcdet_tsh_boundary_start_end.srcdet_tsh_count_boundary_end   = iDomain_width;
	profile_srcdet_tsh_boundary_start_end.srcdet_tsh_count_boundary_start = 0;
	rtd_outl(PROFILE_SRCDET_TSH_BOUNDARY_START_END_reg, profile_srcdet_tsh_boundary_start_end.regValue);

	profile_srcdet_tsh_boundary1.regValue = rtd_inl(PROFILE_SRCDET_TSH_BOUNDARY1_reg);
	profile_srcdet_tsh_boundary1.srcdet_tsh_bin_boundary1=(iDomain_width/5)*1 ;
	profile_srcdet_tsh_boundary1.srcdet_tsh_bin_boundary2=(iDomain_width/5)*2 ;
	rtd_outl(PROFILE_SRCDET_TSH_BOUNDARY1_reg, profile_srcdet_tsh_boundary1.regValue);


	profile_srcdet_tsh_boundary2.regValue = rtd_inl(PROFILE_SRCDET_TSH_BOUNDARY2_reg);
	profile_srcdet_tsh_boundary2.srcdet_tsh_bin_boundary3=(iDomain_width/5)*3 ;
	profile_srcdet_tsh_boundary2.srcdet_tsh_bin_boundary4=(iDomain_width/5)*4 ;
	rtd_outl(PROFILE_SRCDET_TSH_BOUNDARY2_reg, profile_srcdet_tsh_boundary2.regValue);
/*merlin5, add, end*/

//#ifdef VPQ_COMPILER_ERROR_ENABLE
#if 1
	//profile_srcdet_tsh_mode_RBUS profile_srcdet_tsh_mode;
	//profile_srcdet_tsh_step_thl_RBUS srcdet_tsh_step_thl_reg;
	///*merlin5 delete*/profile_srcdet_tsh_step_max_RBUS srcdet_tsh_step_max_reg;
	///*merlin5 delete*/profile_srcdet_tsh_step_min_RBUS srcdet_tsh_step_min_reg;
	//di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;



        profile_srcdet_tsh_mode.regValue = rtd_inl(PROFILE_SRCDET_TSH_MODE_reg);
	//srcdet_tsh_step_thl_reg.regValue = rtd_inl(PROFILE_SRCDET_TSH_STEP_THL_reg);
	///*merlin5 delete*/srcdet_tsh_step_max_reg.regValue = rtd_inl(PROFILE_SRCDET_TSH_STEP_MAX_reg);
	///*merlin5 delete*/srcdet_tsh_step_min_reg.regValue = rtd_inl(PROFILE_SRCDET_TSH_STEP_MIN_reg);
	im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);

	profile_srcdet_tsh_mode.srcdet_tsh_step_thl = step_thl;
	profile_srcdet_tsh_mode.srcdet_tsh_mode= isd_tsh_part1_hist_mode;

	///*merlin5 delete*/srcdet_tsh_step_max_reg.srcdet_tsh_step_max = step_max;
	///*merlin5 delete*/srcdet_tsh_step_min_reg.srcdet_tsh_step_min = step_min;

	rtd_outl(PROFILE_SRCDET_TSH_MODE_reg, profile_srcdet_tsh_mode.regValue);
	if(ini_ReadSrcDet==0)
	{
	#ifdef RES_DET_DEMO
                profile_srcdet_tsh_mode.srcdet_tsh_step_thl = 0x0f;
        #else
		profile_srcdet_tsh_mode.srcdet_tsh_step_thl = 31;
        #endif
               ///*merlin5 delete*/srcdet_tsh_step_max_reg.srcdet_tsh_step_max = step_max;
		///*merlin5 delete*/srcdet_tsh_step_min_reg.srcdet_tsh_step_min = step_min;
        	//rtd_outl(PROFILE_SRCDET_TSH_STEP_THL_reg, srcdet_tsh_step_thl_reg.regValue);
        	///*merlin5 delete*/rtd_outl(PROFILE_SRCDET_TSH_STEP_MAX_reg, srcdet_tsh_step_max_reg.regValue);
        	///*merlin5 delete*/rtd_outl(PROFILE_SRCDET_TSH_STEP_MIN_reg, srcdet_tsh_step_min_reg.regValue);
                ini_ReadSrcDet=1;
	}
	if ( profile_srcdet_tsh_mode.srcdet_start == 0 ) //wait for finish flag
	{

		/*merlin5, delete
		profile_srcdet_pmh_hist0_RBUS pmh_hist0;
		profile_srcdet_pmh_hist1_RBUS pmh_hist1;
		profile_srcdet_pmh_hist2_RBUS pmh_hist2;
		profile_srcdet_pmh_hist3_RBUS pmh_hist3;
		profile_srcdet_pmh_hist4_RBUS pmh_hist4;
		profile_srcdet_pmh_hist5_RBUS pmh_hist5;
		*/

		switch( profile_srcdet_tsh_mode.srcdet_tsh_mode )
		{

			case 0 : //frame mode
			tsh_part1_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST01_reg);
			tsh_part1_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST02_reg);
			tsh_part1_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST03_reg);
			tsh_part1_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST04_reg);
			tsh_part1_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST05_reg);
			tsh_part1_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST06_reg);
			tsh_part1_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST07_reg);
			tsh_part1_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST08_reg);
			tsh_part1_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST09_reg);
			tsh_part1_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST10_reg);
			tsh_part1_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST11_reg);
			tsh_part1_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST12_reg);
			tsh_part1_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST13_reg);
			tsh_part1_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST14_reg);
			tsh_part1_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST15_reg);
			tsh_part1_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST16_reg);
			tsh_part1_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST17_reg);
			tsh_part1_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST18_reg);
			tsh_part1_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST19_reg);
			tsh_part1_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST20_reg);
			break;
			case 1 : //cut 5 vertical part
                           // PART1
			tsh_part1_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST01_reg);
			tsh_part1_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST02_reg);
			tsh_part1_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST03_reg);
			tsh_part1_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST04_reg);
			tsh_part1_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST05_reg);
			tsh_part1_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST06_reg);
			tsh_part1_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST07_reg);
			tsh_part1_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST08_reg);
			tsh_part1_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST09_reg);
			tsh_part1_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST10_reg);
			tsh_part1_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST11_reg);
			tsh_part1_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST12_reg);
			tsh_part1_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST13_reg);
			tsh_part1_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST14_reg);
			tsh_part1_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST15_reg);
			tsh_part1_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST16_reg);
			tsh_part1_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST17_reg);
			tsh_part1_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST18_reg);
			tsh_part1_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST19_reg);
			tsh_part1_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST20_reg);

                           // PART2
			tsh_part2_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST01_reg);
			tsh_part2_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST02_reg);
			tsh_part2_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST03_reg);
			tsh_part2_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST04_reg);
			tsh_part2_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST05_reg);
			tsh_part2_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST06_reg);
			tsh_part2_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST07_reg);
			tsh_part2_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST08_reg);
			tsh_part2_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST09_reg);
			tsh_part2_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST10_reg);
			tsh_part2_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST11_reg);
			tsh_part2_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST12_reg);
			tsh_part2_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST13_reg);
			tsh_part2_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST14_reg);
			tsh_part2_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST15_reg);
			tsh_part2_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST16_reg);
			tsh_part2_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST17_reg);
			tsh_part2_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST18_reg);
			tsh_part2_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST19_reg);
			tsh_part2_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST20_reg);

                           // PART3
			tsh_part3_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST01_reg);
			tsh_part3_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST02_reg);
			tsh_part3_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST03_reg);
			tsh_part3_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST04_reg);
			tsh_part3_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST05_reg);
			tsh_part3_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST06_reg);
			tsh_part3_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST07_reg);
			tsh_part3_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST08_reg);
			tsh_part3_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST09_reg);
			tsh_part3_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST10_reg);
			tsh_part3_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST11_reg);
			tsh_part3_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST12_reg);
			tsh_part3_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST13_reg);
			tsh_part3_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST14_reg);
			tsh_part3_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST15_reg);
			tsh_part3_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST16_reg);
			tsh_part3_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST17_reg);
			tsh_part3_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST18_reg);
			tsh_part3_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST19_reg);
			tsh_part3_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST20_reg);

                           // PART4
			tsh_part4_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST01_reg);
			tsh_part4_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST02_reg);
			tsh_part4_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST03_reg);
			tsh_part4_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST04_reg);
			tsh_part4_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST05_reg);
			tsh_part4_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST06_reg);
			tsh_part4_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST07_reg);
			tsh_part4_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST08_reg);
			tsh_part4_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST09_reg);
			tsh_part4_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST10_reg);
			tsh_part4_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST11_reg);
			tsh_part4_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST12_reg);
			tsh_part4_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST13_reg);
			tsh_part4_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST14_reg);
			tsh_part4_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST15_reg);
			tsh_part4_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST16_reg);
			tsh_part4_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST17_reg);
			tsh_part4_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST18_reg);
			tsh_part4_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST19_reg);
			tsh_part4_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST20_reg);

                           // PART5
			tsh_part5_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST01_reg);
			tsh_part5_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST02_reg);
			tsh_part5_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST03_reg);
			tsh_part5_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST04_reg);
			tsh_part5_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST05_reg);
			tsh_part5_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST06_reg);
			tsh_part5_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST07_reg);
			tsh_part5_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST08_reg);
			tsh_part5_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST09_reg);
			tsh_part5_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST10_reg);
			tsh_part5_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST11_reg);
			tsh_part5_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST12_reg);
			tsh_part5_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST13_reg);
			tsh_part5_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST14_reg);
			tsh_part5_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST15_reg);
			tsh_part5_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST16_reg);
			tsh_part5_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST17_reg);
			tsh_part5_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST18_reg);
			tsh_part5_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST19_reg);
			tsh_part5_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST20_reg);
			break;
			case 2 : //cut 5  horizontal part
                                             // PART1
			tsh_part1_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST01_reg);
			tsh_part1_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST02_reg);
			tsh_part1_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST03_reg);
			tsh_part1_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST04_reg);
			tsh_part1_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST05_reg);
			tsh_part1_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST06_reg);
			tsh_part1_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST07_reg);
			tsh_part1_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST08_reg);
			tsh_part1_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST09_reg);
			tsh_part1_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST10_reg);
			tsh_part1_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST11_reg);
			tsh_part1_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST12_reg);
			tsh_part1_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST13_reg);
			tsh_part1_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST14_reg);
			tsh_part1_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST15_reg);
			tsh_part1_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST16_reg);
			tsh_part1_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST17_reg);
			tsh_part1_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST18_reg);
			tsh_part1_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST19_reg);
			tsh_part1_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST20_reg);

                           // PART2
			tsh_part2_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST01_reg);
			tsh_part2_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST02_reg);
			tsh_part2_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST03_reg);
			tsh_part2_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST04_reg);
			tsh_part2_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST05_reg);
			tsh_part2_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST06_reg);
			tsh_part2_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST07_reg);
			tsh_part2_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST08_reg);
			tsh_part2_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST09_reg);
			tsh_part2_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST10_reg);
			tsh_part2_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST11_reg);
			tsh_part2_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST12_reg);
			tsh_part2_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST13_reg);
			tsh_part2_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST14_reg);
			tsh_part2_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST15_reg);
			tsh_part2_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST16_reg);
			tsh_part2_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST17_reg);
			tsh_part2_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST18_reg);
			tsh_part2_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST19_reg);
			tsh_part2_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART2_HIST20_reg);

                           // PART3
			tsh_part3_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST01_reg);
			tsh_part3_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST02_reg);
			tsh_part3_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST03_reg);
			tsh_part3_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST04_reg);
			tsh_part3_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST05_reg);
			tsh_part3_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST06_reg);
			tsh_part3_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST07_reg);
			tsh_part3_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST08_reg);
			tsh_part3_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST09_reg);
			tsh_part3_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST10_reg);
			tsh_part3_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST11_reg);
			tsh_part3_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST12_reg);
			tsh_part3_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST13_reg);
			tsh_part3_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST14_reg);
			tsh_part3_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST15_reg);
			tsh_part3_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST16_reg);
			tsh_part3_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST17_reg);
			tsh_part3_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST18_reg);
			tsh_part3_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST19_reg);
			tsh_part3_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART3_HIST20_reg);

                           // PART4
			tsh_part4_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST01_reg);
			tsh_part4_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST02_reg);
			tsh_part4_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST03_reg);
			tsh_part4_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST04_reg);
			tsh_part4_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST05_reg);
			tsh_part4_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST06_reg);
			tsh_part4_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST07_reg);
			tsh_part4_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST08_reg);
			tsh_part4_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST09_reg);
			tsh_part4_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST10_reg);
			tsh_part4_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST11_reg);
			tsh_part4_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST12_reg);
			tsh_part4_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST13_reg);
			tsh_part4_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST14_reg);
			tsh_part4_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST15_reg);
			tsh_part4_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST16_reg);
			tsh_part4_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST17_reg);
			tsh_part4_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST18_reg);
			tsh_part4_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST19_reg);
			tsh_part4_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART4_HIST20_reg);

                           // PART5
			tsh_part5_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST01_reg);
			tsh_part5_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST02_reg);
			tsh_part5_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST03_reg);
			tsh_part5_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST04_reg);
			tsh_part5_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST05_reg);
			tsh_part5_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST06_reg);
			tsh_part5_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST07_reg);
			tsh_part5_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST08_reg);
			tsh_part5_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST09_reg);
			tsh_part5_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST10_reg);
			tsh_part5_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST11_reg);
			tsh_part5_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST12_reg);
			tsh_part5_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST13_reg);
			tsh_part5_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST14_reg);
			tsh_part5_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST15_reg);
			tsh_part5_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST16_reg);
			tsh_part5_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST17_reg);
			tsh_part5_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST18_reg);
			tsh_part5_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST19_reg);
			tsh_part5_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART5_HIST20_reg);

			break;
			default : //cut 5  horizontal part
			tsh_part1_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST01_reg);
			tsh_part1_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST02_reg);
			tsh_part1_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST03_reg);
			tsh_part1_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST04_reg);
			tsh_part1_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST05_reg);
			tsh_part1_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST06_reg);
			tsh_part1_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST07_reg);
			tsh_part1_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST08_reg);
			tsh_part1_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST09_reg);
			tsh_part1_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST10_reg);
			tsh_part1_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST11_reg);
			tsh_part1_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST12_reg);
			tsh_part1_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST13_reg);
			tsh_part1_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST14_reg);
			tsh_part1_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST15_reg);
			tsh_part1_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST16_reg);
			tsh_part1_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST17_reg);
			tsh_part1_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST18_reg);
			tsh_part1_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST19_reg);
			tsh_part1_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST20_reg);
			break;



		}

		/*merlin5, delete
		pmh_hist0.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST0_reg);
		pmh_hist1.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST1_reg);
		pmh_hist2.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST2_reg);
		pmh_hist3.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST3_reg);
		pmh_hist4.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST4_reg);
		pmh_hist5.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST5_reg);
		*/
                if(im_di_rtnr_control_reg.cp_rtnr_progressive ==1)
                {
                        Step_Hist[0] = tsh_part1_hist01.srcdet_tsh_part1_hist01;
                        Step_Hist[1] = tsh_part1_hist02.srcdet_tsh_part1_hist02;
                        Step_Hist[2] = tsh_part1_hist03.srcdet_tsh_part1_hist03;
                        Step_Hist[3] = tsh_part1_hist04.srcdet_tsh_part1_hist04;
                        Step_Hist[4] = tsh_part1_hist05.srcdet_tsh_part1_hist05;
                        Step_Hist[5] = tsh_part1_hist06.srcdet_tsh_part1_hist06;
                        Step_Hist[6] = tsh_part1_hist07.srcdet_tsh_part1_hist07;
                        Step_Hist[7] = tsh_part1_hist08.srcdet_tsh_part1_hist08;
                        Step_Hist[8] = tsh_part1_hist09.srcdet_tsh_part1_hist09;
                        Step_Hist[9] = tsh_part1_hist10.srcdet_tsh_part1_hist10;
                        Step_Hist[10] = tsh_part1_hist11.srcdet_tsh_part1_hist11;
                        Step_Hist[11] = tsh_part1_hist12.srcdet_tsh_part1_hist12;
                        Step_Hist[12] = tsh_part1_hist13.srcdet_tsh_part1_hist13;
                        Step_Hist[13] = tsh_part1_hist14.srcdet_tsh_part1_hist14;
                        Step_Hist[14] = tsh_part1_hist15.srcdet_tsh_part1_hist15;
                        Step_Hist[15] = tsh_part1_hist16.srcdet_tsh_part1_hist16;
                        Step_Hist[16] = tsh_part1_hist17.srcdet_tsh_part1_hist17;
                        Step_Hist[17] = tsh_part1_hist18.srcdet_tsh_part1_hist18;
                        Step_Hist[18] = tsh_part1_hist19.srcdet_tsh_part1_hist19;
                        Step_Hist[19] = tsh_part1_hist20.srcdet_tsh_part1_hist20;
			/*merlin5 delete
                        PMH_Hist[0] = pmh_hist0.srcdet_pmh_hist0;
                        PMH_Hist[1] = pmh_hist1.srcdet_pmh_hist1;
                        PMH_Hist[2] = pmh_hist2.srcdet_pmh_hist2;
                        PMH_Hist[3] = pmh_hist3.srcdet_pmh_hist3;
                        PMH_Hist[4] = pmh_hist4.srcdet_pmh_hist4;
                        PMH_Hist[5] = pmh_hist5.srcdet_pmh_hist5;
			   */
                }
                else
                {
                        Step_Hist[0] = tsh_part1_hist01.srcdet_tsh_part1_hist01*2;
                        Step_Hist[1] = tsh_part1_hist02.srcdet_tsh_part1_hist02*2;
                        Step_Hist[2] = tsh_part1_hist03.srcdet_tsh_part1_hist03*2;
                        Step_Hist[3] = tsh_part1_hist04.srcdet_tsh_part1_hist04*2;
                        Step_Hist[4] = tsh_part1_hist05.srcdet_tsh_part1_hist05*2;
                        Step_Hist[5] = tsh_part1_hist06.srcdet_tsh_part1_hist06*2;
                        Step_Hist[6] = tsh_part1_hist07.srcdet_tsh_part1_hist07*2;
                        Step_Hist[7] = tsh_part1_hist08.srcdet_tsh_part1_hist08*2;
                        Step_Hist[8] = tsh_part1_hist09.srcdet_tsh_part1_hist09*2;
                        Step_Hist[9] = tsh_part1_hist10.srcdet_tsh_part1_hist10*2;
                        Step_Hist[10] = tsh_part1_hist11.srcdet_tsh_part1_hist11*2;
                        Step_Hist[11] = tsh_part1_hist12.srcdet_tsh_part1_hist12*2;
                        Step_Hist[12] = tsh_part1_hist13.srcdet_tsh_part1_hist13*2;
                        Step_Hist[13] = tsh_part1_hist14.srcdet_tsh_part1_hist14*2;
                        Step_Hist[14] = tsh_part1_hist15.srcdet_tsh_part1_hist15*2;
                        Step_Hist[15] = tsh_part1_hist16.srcdet_tsh_part1_hist16*2;
                        Step_Hist[16] = tsh_part1_hist17.srcdet_tsh_part1_hist17*2;
                        Step_Hist[17] = tsh_part1_hist18.srcdet_tsh_part1_hist18*2;
                        Step_Hist[18] = tsh_part1_hist19.srcdet_tsh_part1_hist19*2;
                        Step_Hist[19] = tsh_part1_hist20.srcdet_tsh_part1_hist20*2;
			/*merlin5 delete
                        PMH_Hist[0] = pmh_hist0.srcdet_pmh_hist0*2;
                        PMH_Hist[1] = pmh_hist1.srcdet_pmh_hist1*2;
                        PMH_Hist[2] = pmh_hist2.srcdet_pmh_hist2*2;
                        PMH_Hist[3] = pmh_hist3.srcdet_pmh_hist3*2;
                        PMH_Hist[4] = pmh_hist4.srcdet_pmh_hist4*2;
                        PMH_Hist[5] = pmh_hist5.srcdet_pmh_hist5*2;
			   */
                }
		//enable profile
		//srcdet_tsh_part1_mode.srcdet_pmh_depend_tsh = 0; // always do PMH/*merlin5, delete*/
		profile_srcdet_tsh_mode.srcdet_start = 1;
		rtd_outl(PROFILE_SRCDET_TSH_MODE_reg, profile_srcdet_tsh_mode.regValue);

		step_count = Step_Hist[0]+Step_Hist[1]+Step_Hist[2];
                Step_sum=1;

                if(Step_Hist[0]>Step_Hist[1]*3)
                        Step_Hist[0] =Step_Hist[1]*3;

		for( i=0; i<20; i++ )
		{
			Step_sum += Step_Hist[i];
		}
		if( Step_sum>0 )
		{
			average = step_count*1000/Step_sum;

        		for( i=0; i<20; i++ )
		        {
        			Step_Hist_ratio[i]=Step_Hist[i]*1000/Step_sum;
        		}

		}
		else
		{
			average = 0;
		}

                fail_cnt =0;

		return SUCCESS;
	}
	else
	{
	        fail_cnt ++;
	        if(fail_cnt>60)
                {
                        profile_srcdet_tsh_mode.srcdet_start = 0;
                        rtd_outl(PROFILE_SRCDET_TSH_MODE_reg, profile_srcdet_tsh_mode.regValue);
                        fail_cnt=0;

                }
		//scalerDrvPrint( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

#endif
return 0;// remove this line after remove #ifdef VPQ_COMPILER_ERROR_ENABLE

}


#else
//#ifdef ISR_READ_SRC_DET_FUNCTIOM_ENABLE
char scalerVIP_ReadSrcDet(unsigned char step_thl, unsigned char isd_tsh_hist_mode)
{
//#ifdef VPQ_COMPILER_ERROR_ENABLE
#if 1
	profile_srcdet_tsh_mode_RBUS srcdet_tsh_mode;
	//profile_srcdet_tsh_step_thl_RBUS srcdet_tsh_step_thl_reg;
	///*merlin5 delete*/profile_srcdet_tsh_step_max_RBUS srcdet_tsh_step_max_reg;
	///*merlin5 delete*/profile_srcdet_tsh_step_min_RBUS srcdet_tsh_step_min_reg;
	di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;


	unsigned int average;
	unsigned char i=0;
        static unsigned int fail_cnt=0;


        srcdet_tsh_mode.regValue = rtd_inl(PROFILE_SRCDET_TSH_MODE_reg);
	//srcdet_tsh_step_thl_reg.regValue = rtd_inl(PROFILE_SRCDET_TSH_STEP_THL_reg);
	///*merlin5 delete*/srcdet_tsh_step_max_reg.regValue = rtd_inl(PROFILE_SRCDET_TSH_STEP_MAX_reg);
	///*merlin5 delete*/srcdet_tsh_step_min_reg.regValue = rtd_inl(PROFILE_SRCDET_TSH_STEP_MIN_reg);
	im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);

	srcdet_tsh_mode.srcdet_tsh_step_thl = step_thl;
	srcdet_tsh_mode.srcdet_tsh_mode= isd_tsh_hist_mode;

	///*merlin5 delete*/srcdet_tsh_step_max_reg.srcdet_tsh_step_max = step_max;
	///*merlin5 delete*/srcdet_tsh_step_min_reg.srcdet_tsh_step_min = step_min;

	rtd_outl(PROFILE_SRCDET_TSH_MODE_reg, srcdet_tsh_mode.regValue);
	if(ini_ReadSrcDet==0)
	{
	#ifdef RES_DET_DEMO
                srcdet_tsh_mode.srcdet_tsh_step_thl = 0x0f;
        #else
		srcdet_tsh_mode.srcdet_tsh_step_thl = 31;
        #endif
               ///*merlin5 delete*/srcdet_tsh_step_max_reg.srcdet_tsh_step_max = step_max;
		///*merlin5 delete*/srcdet_tsh_step_min_reg.srcdet_tsh_step_min = step_min;
        	//rtd_outl(PROFILE_SRCDET_TSH_STEP_THL_reg, srcdet_tsh_step_thl_reg.regValue);
        	///*merlin5 delete*/rtd_outl(PROFILE_SRCDET_TSH_STEP_MAX_reg, srcdet_tsh_step_max_reg.regValue);
        	///*merlin5 delete*/rtd_outl(PROFILE_SRCDET_TSH_STEP_MIN_reg, srcdet_tsh_step_min_reg.regValue);
                ini_ReadSrcDet=1;
	}
	if ( srcdet_tsh_mode.srcdet_start == 0 ) //wait for finish flag
	{
		profile_srcdet_tsh_part1_hist01_RBUS tsh_hist01;
		profile_srcdet_tsh_part1_hist02_RBUS tsh_hist02;
		profile_srcdet_tsh_part1_hist03_RBUS tsh_hist03;
		profile_srcdet_tsh_part1_hist04_RBUS tsh_hist04;
		profile_srcdet_tsh_part1_hist05_RBUS tsh_hist05;
		profile_srcdet_tsh_part1_hist06_RBUS tsh_hist06;
		profile_srcdet_tsh_part1_hist07_RBUS tsh_hist07;
		profile_srcdet_tsh_part1_hist08_RBUS tsh_hist08;
		profile_srcdet_tsh_part1_hist09_RBUS tsh_hist09;
		profile_srcdet_tsh_part1_hist10_RBUS tsh_hist10;
		profile_srcdet_tsh_part1_hist11_RBUS tsh_hist11;
		profile_srcdet_tsh_part1_hist12_RBUS tsh_hist12;
		profile_srcdet_tsh_part1_hist13_RBUS tsh_hist13;
		profile_srcdet_tsh_part1_hist14_RBUS tsh_hist14;
		profile_srcdet_tsh_part1_hist15_RBUS tsh_hist15;
		profile_srcdet_tsh_part1_hist16_RBUS tsh_hist16;
		profile_srcdet_tsh_part1_hist17_RBUS tsh_hist17;
		profile_srcdet_tsh_part1_hist18_RBUS tsh_hist18;
		profile_srcdet_tsh_part1_hist19_RBUS tsh_hist19;
		profile_srcdet_tsh_part1_hist20_RBUS tsh_hist20;

		/*merlin5 delete
		profile_srcdet_pmh_hist0_RBUS pmh_hist0;
		profile_srcdet_pmh_hist1_RBUS pmh_hist1;
		profile_srcdet_pmh_hist2_RBUS pmh_hist2;
		profile_srcdet_pmh_hist3_RBUS pmh_hist3;
		profile_srcdet_pmh_hist4_RBUS pmh_hist4;
		profile_srcdet_pmh_hist5_RBUS pmh_hist5;
		*/


		tsh_hist01.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST01_reg);
		tsh_hist02.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST02_reg);
		tsh_hist03.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST03_reg);
		tsh_hist04.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST04_reg);
		tsh_hist05.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST05_reg);
		tsh_hist06.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST06_reg);
		tsh_hist07.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST07_reg);
		tsh_hist08.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST08_reg);
		tsh_hist09.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST09_reg);
		tsh_hist10.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST10_reg);
		tsh_hist11.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST11_reg);
		tsh_hist12.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST12_reg);
		tsh_hist13.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST13_reg);
		tsh_hist14.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST14_reg);
		tsh_hist15.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST15_reg);
		tsh_hist16.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST16_reg);
		tsh_hist17.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST17_reg);
		tsh_hist18.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST18_reg);
		tsh_hist19.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST19_reg);
		tsh_hist20.regValue = rtd_inl(PROFILE_SRCDET_TSH_PART1_HIST20_reg);
		/*merlin5 delete
		pmh_hist0.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST0_reg);
		pmh_hist1.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST1_reg);
		pmh_hist2.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST2_reg);
		pmh_hist3.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST3_reg);
		pmh_hist4.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST4_reg);
		pmh_hist5.regValue = rtd_inl(PROFILE_SRCDET_PMH_HIST5_reg);
		*/
                if(im_di_rtnr_control_reg.cp_rtnr_progressive ==1)
                {
                        Step_Hist[0] = tsh_hist01.srcdet_tsh_part1_hist01;
                        Step_Hist[1] = tsh_hist02.srcdet_tsh_part1_hist02;
                        Step_Hist[2] = tsh_hist03.srcdet_tsh_part1_hist03;
                        Step_Hist[3] = tsh_hist04.srcdet_tsh_part1_hist04;
                        Step_Hist[4] = tsh_hist05.srcdet_tsh_part1_hist05;
                        Step_Hist[5] = tsh_hist06.srcdet_tsh_part1_hist06;
                        Step_Hist[6] = tsh_hist07.srcdet_tsh_part1_hist07;
                        Step_Hist[7] = tsh_hist08.srcdet_tsh_part1_hist08;
                        Step_Hist[8] = tsh_hist09.srcdet_tsh_part1_hist09;
                        Step_Hist[9] = tsh_hist10.srcdet_tsh_part1_hist10;
                        Step_Hist[10] = tsh_hist11.srcdet_tsh_part1_hist11;
                        Step_Hist[11] = tsh_hist12.srcdet_tsh_part1_hist12;
                        Step_Hist[12] = tsh_hist13.srcdet_tsh_part1_hist13;
                        Step_Hist[13] = tsh_hist14.srcdet_tsh_part1_hist14;
                        Step_Hist[14] = tsh_hist15.srcdet_tsh_part1_hist15;
                        Step_Hist[15] = tsh_hist16.srcdet_tsh_part1_hist16;
                        Step_Hist[16] = tsh_hist17.srcdet_tsh_part1_hist17;
                        Step_Hist[17] = tsh_hist18.srcdet_tsh_part1_hist18;
                        Step_Hist[18] = tsh_hist19.srcdet_tsh_part1_hist19;
                        Step_Hist[19] = tsh_hist20.srcdet_tsh_part1_hist20;
			/*merlin5 delete
                        PMH_Hist[0] = pmh_hist0.srcdet_pmh_hist0;
                        PMH_Hist[1] = pmh_hist1.srcdet_pmh_hist1;
                        PMH_Hist[2] = pmh_hist2.srcdet_pmh_hist2;
                        PMH_Hist[3] = pmh_hist3.srcdet_pmh_hist3;
                        PMH_Hist[4] = pmh_hist4.srcdet_pmh_hist4;
                        PMH_Hist[5] = pmh_hist5.srcdet_pmh_hist5;
			   */
                }
                else
                {
                        Step_Hist[0] = tsh_hist01.srcdet_tsh_part1_hist01*2;
                        Step_Hist[1] = tsh_hist02.srcdet_tsh_part1_hist02*2;
                        Step_Hist[2] = tsh_hist03.srcdet_tsh_part1_hist03*2;
                        Step_Hist[3] = tsh_hist04.srcdet_tsh_part1_hist04*2;
                        Step_Hist[4] = tsh_hist05.srcdet_tsh_part1_hist05*2;
                        Step_Hist[5] = tsh_hist06.srcdet_tsh_part1_hist06*2;
                        Step_Hist[6] = tsh_hist07.srcdet_tsh_part1_hist07*2;
                        Step_Hist[7] = tsh_hist08.srcdet_tsh_part1_hist08*2;
                        Step_Hist[8] = tsh_hist09.srcdet_tsh_part1_hist09*2;
                        Step_Hist[9] = tsh_hist10.srcdet_tsh_part1_hist10*2;
                        Step_Hist[10] = tsh_hist11.srcdet_tsh_part1_hist11*2;
                        Step_Hist[11] = tsh_hist12.srcdet_tsh_part1_hist12*2;
                        Step_Hist[12] = tsh_hist13.srcdet_tsh_part1_hist13*2;
                        Step_Hist[13] = tsh_hist14.srcdet_tsh_part1_hist14*2;
                        Step_Hist[14] = tsh_hist15.srcdet_tsh_part1_hist15*2;
                        Step_Hist[15] = tsh_hist16.srcdet_tsh_part1_hist16*2;
                        Step_Hist[16] = tsh_hist17.srcdet_tsh_part1_hist17*2;
                        Step_Hist[17] = tsh_hist18.srcdet_tsh_part1_hist18*2;
                        Step_Hist[18] = tsh_hist19.srcdet_tsh_part1_hist19*2;
                        Step_Hist[19] = tsh_hist20.srcdet_tsh_part1_hist20*2;
			/*merlin5 delete
                        PMH_Hist[0] = pmh_hist0.srcdet_pmh_hist0*2;
                        PMH_Hist[1] = pmh_hist1.srcdet_pmh_hist1*2;
                        PMH_Hist[2] = pmh_hist2.srcdet_pmh_hist2*2;
                        PMH_Hist[3] = pmh_hist3.srcdet_pmh_hist3*2;
                        PMH_Hist[4] = pmh_hist4.srcdet_pmh_hist4*2;
                        PMH_Hist[5] = pmh_hist5.srcdet_pmh_hist5*2;
			   */
                }
		//enable profile
		//srcdet_tsh_part1_mode.srcdet_pmh_depend_tsh = 0; // always do PMH/*merlin5, delete*/
		srcdet_tsh_mode.srcdet_start = 1;
		rtd_outl(PROFILE_SRCDET_TSH_MODE_reg, srcdet_tsh_mode.regValue);

		step_count = Step_Hist[0]+Step_Hist[1]+Step_Hist[2];
                Step_sum=1;

                if(Step_Hist[0]>Step_Hist[1]*3)
                        Step_Hist[0] =Step_Hist[1]*3;

		for( i=0; i<20; i++ )
		{
			Step_sum += Step_Hist[i];
		}
		if( Step_sum>0 )
		{
			average = step_count*1000/Step_sum;

        		for( i=0; i<20; i++ )
		        {
        			Step_Hist_ratio[i]=Step_Hist[i]*1000/Step_sum;
        		}

		}
		else
		{
			average = 0;
		}

                fail_cnt =0;

		return SUCCESS;
	}
	else
	{
	        fail_cnt ++;
	        if(fail_cnt>60)
                {
                        srcdet_tsh_mode.srcdet_start = 0;
                        rtd_outl(PROFILE_SRCDET_TSH_MODE_reg, srcdet_tsh_mode.regValue);
                        fail_cnt=0;

                }
		//scalerDrvPrint( "[ScalerVIP] ==========Profile NOT ready==========\n" );
		return FAILED;
	}

#endif
return 0;// remove this line after remove #ifdef VPQ_COMPILER_ERROR_ENABLE

}
#endif
unsigned char scalerVIP_Input_Source_Detection(unsigned int HD_SD_Thl)
{
	unsigned char i;
	unsigned char isScaled = FALSE;
	unsigned int sum=0;
	unsigned int weight_sum=0; // scale to 100x for average precision
	unsigned int squaresum = 0; // scale to 10000x for variance precision
	unsigned int max=0; // TSH max value
	unsigned char maxIdx=0; // TSH peak index
	unsigned int average;
	unsigned int variance;

	for( i=0; i<20; i++ )
	{
		if( Step_Hist[i]>max )
		{
			max = Step_Hist[i];
			maxIdx = i;
		}
		sum += Step_Hist[i];
		weight_sum += Step_Hist[i]*(i+1);
		squaresum += Step_Hist[i]*(i+1)*(i+1);
	}

	if( sum>0 )
	{
		average = weight_sum*100/sum;
		variance = squaresum*100/sum - average*average/100;
	}
	else
	{
		average = 0;
		variance = 0;
	}

	//if( MA_print_count % 180 == 0 )
	//	ROSPrintf( "[InputSourceDetection] TSH Average 100x = %d, variance 100x = %d\n", average, variance );

	if( average >= HD_SD_Thl )
		isScaled = TRUE;
	else
		isScaled = FALSE;

	return isScaled;
}
//#endif


unsigned char scalerVIP_DCC_Black_White_Detect(void)
{
	unsigned char i;
	unsigned int hist_max=0, hist_max2=0;
	unsigned char hist_max_idx=0, hist_max2_idx=0;
	unsigned int peak1_sum, peak2_sum;
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);

	for(i=0; i<32; i++ )
	{
		if( reg_HistCnt[i] > hist_max )
		{
			hist_max2 = hist_max;
			hist_max2_idx = hist_max_idx;
			hist_max = reg_HistCnt[i];
			hist_max_idx = i;
		}
		else if( reg_HistCnt[i] > hist_max2 )
		{
			hist_max2 = reg_HistCnt[i];
			hist_max2_idx = i;
		}
	}

	hist_max_idx = (hist_max_idx == 0) ? 1 : ((hist_max_idx==31) ? 30 : hist_max_idx);
	hist_max2_idx = (hist_max2_idx == 0) ? 1 : ((hist_max2_idx==31) ? 30 : hist_max2_idx);

	if( (hist_max_idx <= 2 )|| (hist_max_idx >= 28) )
	{
		peak1_sum = reg_HistCnt[ hist_max_idx-1 ] + reg_HistCnt[ hist_max_idx ]+ reg_HistCnt[ hist_max_idx+1 ];
		peak2_sum = reg_HistCnt[ hist_max2_idx-1 ] + reg_HistCnt[ hist_max2_idx ]+ reg_HistCnt[ hist_max2_idx+1 ];
		if( peak1_sum > (SmartPic_clue->Hist_Y_Total_sum)*3/4)
			return TRUE; // peak white or black

		else if( (abs_value(hist_max_idx-hist_max2_idx) >= 26) && (peak1_sum+peak2_sum > (SmartPic_clue->Hist_Y_Total_sum)*3/4) && ((SmartPic_clue->saturationflag)==0))
			return TRUE; // 2 peaks one white and black

		else
			return FALSE;
	}
	else
		return FALSE;
}
void scalerVIP_Set_NR_Info(LEVEL_INFO value )
{
	nr_value.Mad_lv=value.Mad_lv;
	nr_value.Motion_lv=value.Motion_lv;
	nr_value.Film_lv=value.Film_lv;
}
unsigned char scalerVIP_Get_NR_Info(LEVEL_INFO *pValue )
{
	if(pValue==NULL)
		return FALSE;
	pValue->Mad_lv= nr_value.Mad_lv;
	pValue->Motion_lv = nr_value.Motion_lv;
	pValue->Film_lv = nr_value.Film_lv;

		return TRUE;
}

//=====================================================================================================================
//vvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvv
unsigned int scalerVIP_Cal_Idx_Ave_I_006_res_ratio(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize_I_006_res 64
	#define windowSizeBit_I_006_res 6

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006_res]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006_res;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006_res;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006_res;

		idx++;
		if(idx==windowSize_I_006_res)
			idx=0;
	}
	return ret;
}
unsigned int scalerVIP_Cal_Idx_Ave_I_006_res_value0(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize_I_006_res 64
	#define windowSizeBit_I_006_res 6

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006_res]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006_res;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006_res;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006_res;

		idx++;
		if(idx==windowSize_I_006_res)
			idx=0;
	}
	return ret;
}
unsigned int scalerVIP_Cal_Idx_Ave_I_006_res_value1(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize_I_006_res 64
	#define windowSizeBit_I_006_res 6

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006_res]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006_res;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006_res;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006_res;

		idx++;
		if(idx==windowSize_I_006_res)
			idx=0;
	}
	return ret;
}
unsigned int scalerVIP_Cal_Idx_Ave_I_006_res_value2(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize_I_006_res 64
	#define windowSizeBit_I_006_res 6

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006_res]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006_res;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006_res;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006_res;

		idx++;
		if(idx==windowSize_I_006_res)
			idx=0;
	}
	return ret;
}
unsigned int scalerVIP_Cal_Idx_Ave_I_006_res_value3(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize_I_006_res 64
	#define windowSizeBit_I_006_res 6

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006_res]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006_res;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006_res;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006_res;

		idx++;
		if(idx==windowSize_I_006_res)
			idx=0;
	}
	return ret;
}

unsigned int scalerVIP_Cal_Idx_Ave_I_006(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize_I_006 32
	#define windowSizeBit_I_006 5

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006;

		idx++;
		if(idx==windowSize_I_006)
			idx=0;
	}
	return ret;
}

unsigned int scalerVIP_Cal_Idx_Ave_I_006_mv(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize_I_006 32
	#define windowSizeBit_I_006 5

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006;

		idx++;
		if(idx==windowSize_I_006)
			idx=0;
	}
	return ret;
}

unsigned int scalerVIP_Cal_Idx_Ave_I_006_noise(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize_I_006 32
	#define windowSizeBit_I_006 5

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006;

		idx++;
		if(idx==windowSize_I_006)
			idx=0;
	}
	return ret;
}
unsigned int scalerVIP_Cal_Idx_Ave_I_006_mcnr(unsigned int lv_index, unsigned char isAll_Flag)
{
#define windowSize_I_006 32
#define windowSizeBit_I_006 5

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006;

		idx++;
		if(idx==windowSize_I_006)
			idx=0;
	}
	return ret;
}


#define windowSize_I_mcnr 8
#define windowSizeBit_I_mcnr 3
unsigned int scalerVIP_compute_I_hmcnrlevel_Index_Ave(unsigned int lv_index, unsigned char isAll_Flag)
{
	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_mcnr]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_mcnr;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_mcnr;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_mcnr;

		idx++;
		if(idx==windowSize_I_mcnr)
			idx=0;
	}
	return ret;
}
#define windowSize_I_mcnr2 64
#define windowSizeBit_I_mcnr2 6

unsigned int scalerVIP_compute_I_hmcnrlevel_Index_Ave2(unsigned int lv_index, unsigned char isAll_Flag)
{
	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_mcnr2]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_mcnr2;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_mcnr2;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_mcnr2;

		idx++;
		if(idx==windowSize_I_mcnr2)
			idx=0;
	}
	return ret;
}

unsigned int scalerVIP_Cal_Idx_Ave_I_006_chroma(unsigned int lv_index, unsigned char isAll_Flag)
{
#define windowSize_I_006 32
#define windowSizeBit_I_006 5

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006;

		idx++;
		if(idx==windowSize_I_006)
			idx=0;
	}
	return ret;
}

#define windowSize_I_mcnr 8
#define windowSizeBit_I_mcnr 3
unsigned int scalerVIP_compute_I_chromanrlevel_Index_Ave(unsigned int lv_index, unsigned char isAll_Flag)
{
	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_mcnr]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_mcnr;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_mcnr;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_mcnr;

		idx++;
		if(idx==windowSize_I_mcnr)
			idx=0;
	}
	return ret;
}
#define windowSize_I_teeth 8
#define windowSizeBit_I_teeth 3
unsigned int scalerVIP_compute_I_teeth_Index_Ave(unsigned int lv_index, unsigned char isAll_Flag)
{
	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_teeth]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_teeth;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_teeth;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_teeth;

		idx++;
		if(idx==windowSize_I_teeth)
			idx=0;
	}
	return ret;
}

#define windowSize_I_Gmv 16
#define windowSizeBit_I_Gmv 4
unsigned int scalerVIP_compute_I_Gmv_Index_Ave(unsigned int lv_index, unsigned char isAll_Flag)
{
	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_Gmv]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_Gmv;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_Gmv;i++)
		{
			sum = sum + levelIdx_arr[i];
		}
		ret = sum>>windowSizeBit_I_Gmv;

		idx++;
		if(idx==windowSize_I_Gmv)
			idx=0;
	}
	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
	{
		ROSPrintf("\n sum  %d , lv_index %d\n", sum, lv_index);
	}
	return ret;
}


int scalerVIP_compute_Still_Idx_FMV_HMC_I_006(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table)
{
	//new still meter
	unsigned int printf_Flag=0, print_delay=200;
	unsigned char i;
	unsigned int *FMV_hist_ratio, *HMC_bin_hist_ratio;
	//unsigned char FMV_weight[FMV_Hist_Bin_Num] = {};
	//unsigned char HMC_bin_hist_ratio[HMC_Hist_Bin_Num] = {};
	unsigned int still_idx, still_idx_FMV, still_idx_HMC_Bin, FMV_w_total, HMC_w_total;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_FMV_w_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_FMV_Hist_Weighting][0]);	// for FMV weighting
	unsigned int *pPQA_HMC_MV_w_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_HMC_MV_Hist_Weighting][0]);
	unsigned char GMV;
	int ret_still_idx;

	FMV_hist_ratio = SmartPic_clue->FMV_hist_Ratio;
	HMC_bin_hist_ratio = SmartPic_clue->HMC_bin_hist_Ratio;
	GMV = SmartPic_clue->GMV;

	still_idx_FMV = 0;
	FMV_w_total =0;
	for(i=0;i<PQA_I_LEVEL_MAX;i++)
	{
		// 10 is center
		still_idx_FMV = still_idx_FMV + (FMV_hist_ratio[10+i]*pPQA_FMV_w_TBL[i]);
		if(i!=0)
			still_idx_FMV = still_idx_FMV + (FMV_hist_ratio[10-i]*pPQA_FMV_w_TBL[i]);
		FMV_w_total = FMV_w_total + pPQA_FMV_w_TBL[i];
		//ROSPrintf("%d,%d,%d,%d,%d\n",still_idx_FMV,FMV_hist_ratio[10+i],FMV_hist_ratio[10-i],pPQA_VD_status_TBL[i],FMV_w_total);
	}
	//if(FMV_w_total != 0)
		//still_idx_FMV = still_idx_FMV / FMV_w_total;

	still_idx_HMC_Bin = 0;
	HMC_w_total = 0;
	for(i=0;i<PQA_I_LEVEL_MAX;i++)
	{
		// 16 is center
		still_idx_HMC_Bin = still_idx_HMC_Bin + (HMC_bin_hist_ratio[16+i]*pPQA_HMC_MV_w_TBL[i]);
		if(i!=0)
			still_idx_HMC_Bin = still_idx_HMC_Bin + (HMC_bin_hist_ratio[16-i]*pPQA_HMC_MV_w_TBL[i]);
		HMC_w_total = HMC_w_total + pPQA_HMC_MV_w_TBL[i];
	}
	//if(HMC_w_total != 0)
		//still_idx_HMC_Bin = still_idx_HMC_Bin / HMC_w_total;

	still_idx = (still_idx_FMV+still_idx_HMC_Bin)>>1;

	//for debug.
	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	if((printf_Flag==4) && (MA_print_count%print_delay==0))
		ROSPrintf("FMV=%d,HMC=%d,still=%d,GMV=%d\n", still_idx_FMV, still_idx_HMC_Bin, still_idx,GMV);
	if((printf_Flag==8) && (MA_print_count%print_delay==0))
	{
		ROSPrintf("FMV_hist=");
		for(i=0;i<FMV_Hist_Bin_Num;i++)
			ROSPrintf("%d,",FMV_hist_ratio[i]);
		ROSPrintf("\n");

		ROSPrintf("HMC_hist=");
		for(i=0;i<HMC_Hist_Bin_Num;i++)
			ROSPrintf("%d,",HMC_bin_hist_ratio[i]);
		ROSPrintf("\n");

	}

	if(GMV==2 || GMV==4)
		ret_still_idx=-1;
	else if(GMV==1 || GMV==5)
		ret_still_idx=-2;
	else if(GMV==0 || GMV==6)
		ret_still_idx=-3;
	else
		ret_still_idx = still_idx_FMV;

	return ret_still_idx;
}

unsigned int scalerVIP_Cal_Idx_Ave_I_006_highfreq(unsigned int lv_index, unsigned char isAll_Flag)
{
#define windowSize_I_006 32
#define windowSizeBit_I_006 5

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006;

		idx++;
		if(idx==windowSize_I_006)
			idx=0;
	}
	return ret;
}
unsigned int scalerVIP_Cal_Idx_Ave_I_006_highfreq_motion(unsigned int lv_index, unsigned char isAll_Flag)
{
#define windowSize_I_006 32
#define windowSizeBit_I_006 5

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006;

		idx++;
		if(idx==windowSize_I_006)
			idx=0;
	}
	return ret;
}
unsigned int scalerVIP_Cal_Idx_Ave_I_001_detail(unsigned int lv_index, unsigned char isAll_Flag)
{
#define windowSize_I_006 32
#define windowSizeBit_I_006 5

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize_I_006]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize_I_006;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize_I_006;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit_I_006;

		idx++;
		if(idx==windowSize_I_006)
			idx=0;
	}
	return ret;
}



//=====================================================================================================================
//TV_005_style
//vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv

void scalerVIP_compute_level_I_005_RFCVBS_DNR(unsigned char DNR_TABLE_SECET, unsigned int* g_PQA_Input_Table, unsigned short *PQA_Input_Level, unsigned short *PQA_Input_rate)
{
#if 0
	unsigned int current_Signal_Status = 0;
//==================================================================
//==================compute VD_noise_level of ==============================
//=======================TV_CVBS ====================================
//==================================================================
	if(DEBUG_AUTO_NR == 0)
		//current_Signal_Status = drvif_module_vdc_NoiseStatus_isr();
		current_Signal_Status = (SmartPic_clue->VD_Signal_Status_value_avg);  //yuan1024 for rtnr n files avg

	else	//	debug enable;
		current_Signal_Status = DEBUG_VD_NOISE;

	unsigned char PQA_table_select = scaler_GetShare_Memory_system_setting_info_Struct()->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_table_select;
	unsigned int *pPQA_VD_noise_status = &(scaler_GetShare_Memory_VIP_TABLE_Struct()->PQA_Input_Table[PQA_table_select][I_VD_noise_status][0]);
//	unsigned int *pPQA_VD_noise_status_offset = &(scaler_GetShare_Memory_VIP_TABLE_Struct()->PQA_Input_Table[PQA_table_select][I_VD_noise_status_offset][0]);

	if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L00])
		PQA_Input_Level[I_005_RFCVBS] = 0;
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L01])
		PQA_Input_Level[I_005_RFCVBS] = 1;
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L02])
		PQA_Input_Level[I_005_RFCVBS] = 2;
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L03])
		PQA_Input_Level[I_005_RFCVBS] = 3;
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L04])
		PQA_Input_Level[I_005_RFCVBS] = 4;
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L05])
		PQA_Input_Level[I_005_RFCVBS] = 5;
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L06])
		PQA_Input_Level[I_005_RFCVBS] = 6;
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L07])
		PQA_Input_Level[I_005_RFCVBS] = 7;
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L08])
		PQA_Input_Level[I_005_RFCVBS] = 8;
	else
		PQA_Input_Level[I_005_RFCVBS] = 9;

	if(PQA_Input_Level[I_005_RFCVBS] >= 1) {
		if(pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]] > pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]-1])
			PQA_Input_rate[I_005_RFCVBS] = 255*(current_Signal_Status-pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]-1])/(pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]] - pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]-1]);
		else
			PQA_Input_rate[I_005_RFCVBS] = 0;
	}
	else
		PQA_Input_rate[I_005_RFCVBS] = 0;
#else

	unsigned int current_Signal_Status = 0;
//==================================================================
//==================compute VD_noise_level of ==============================
//=======================TV_CVBS ====================================
//==================================================================




	unsigned int *pPQA_HMC_MV_w_TBL = NULL;

	int level_Idx=0, printf_Flag=0, print_delay=200,mv_index=0;
	unsigned char Lv=0,mv_lv=0,ori_lv=0;

		unsigned char PQA_table_select = scaler_GetShare_Memory_system_setting_info_Struct()->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_table_select;
		unsigned int *pPQA_VD_noise_status = &(scaler_GetShare_Memory_VIP_TABLE_Struct()->PQA_Input_Table[PQA_table_select][I_VD_noise_status][0]);
	//	unsigned int *pPQA_VD_noise_status_offset = &(scaler_GetShare_Memory_VIP_TABLE_Struct()->PQA_Input_Table[PQA_table_select][I_VD_noise_status_offset][0]);

	pPQA_HMC_MV_w_TBL = &(scaler_GetShare_Memory_VIP_TABLE_Struct()->PQA_Input_Table[PQA_table_select][I_HMC_MV_Hist_Weighting][0]);

	mv_index =scalerVIP_compute_I_hmcnrlevel_Index_Ave(SmartPic_clue->HMC_bin_hist_Ratio[16], 0);

	if(DEBUG_AUTO_NR == 0)
		//current_Signal_Status = drvif_module_vdc_NoiseStatus_isr();
		current_Signal_Status = (SmartPic_clue->VD_Signal_Status_value_avg);  //yuan1024 for rtnr n files avg

	else	//	debug enable;
		current_Signal_Status = DEBUG_VD_NOISE;

	if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L00])
	{
		Lv = 0;
	}
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L01])
	{
		Lv = 1;
	}
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L02])
	{
		Lv = 2;
	}
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L03])
	{
		Lv = 3;

	}
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L04])
	{
		Lv = 4;
	}
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L05])
	{
		Lv = 5;
	}
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L06])
	{
		Lv = 6;
	}
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L07])
	{
		Lv = 7;
	}
	else if(current_Signal_Status < pPQA_VD_noise_status[PQA_I_L08])
	{
		Lv = 8;
	}
	else
	{
		Lv = 9;
	}

	ori_lv = Lv;

	if(mv_index <pPQA_HMC_MV_w_TBL[0])
	{
		Lv = (Lv>9)?(Lv-9):0;
		mv_lv=9;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[1])
	{
		Lv = (Lv>8)?(Lv-8):0;
		mv_lv=8;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[2])
	{
		Lv = (Lv>7)?(Lv-7):0;
		mv_lv=7;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[3])
	{
		Lv = (Lv>6)?(Lv-6):0;
		mv_lv=6;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[4])
	{
		Lv = (Lv>5)?(Lv-5):0;
		mv_lv=5;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[5])
	{
		Lv = (Lv>4)?(Lv-4):0;
		mv_lv=4;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[6])
	{
		Lv = (Lv>3)?(Lv-3):0;
		mv_lv=3;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[7])
	{
		Lv = (Lv>2)?(Lv-2):0;
		mv_lv=2;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[8])
	{
		Lv = (Lv>1)?(Lv-1):0;
		mv_lv=1;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[9])
	{
		mv_lv=0;

	}
	else
	{
		mv_lv=0;
	}


	if(ori_lv<=3)
		Lv=ori_lv;


	if(Lv<=0)
	{
		Lv=0;

	}
	/*	 for OSD setting ,shift level Start	*/
	if(system_info_structure_table->OSD_Info.OSD_NR_Mode==1) //osd level =low
	{
		Lv = (Lv>1)?(Lv-1):0;
	}
	else if (system_info_structure_table->OSD_Info.OSD_NR_Mode==3) // osd level =high
	{
		Lv = (Lv>=9)?9:(Lv+1);
	}
	/*	 for OSD setting ,shift level END	*/


	PQA_Input_Level[I_005_RFCVBS] =Lv;

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;

	//if((printf_Flag&_BIT10)!=0 && print_delay && (MA_print_count%print_delay==0))
	{
		//ROSPrintf("Y1=%d ,Y2=%d ,Y3=%d , mv_index=%d ,Lv= %d ,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_Y2_avg,RTNR_MAD_count_Y3_avg,mv_index,Lv,center,mv_lv);
		ROSPrintf_INFO_PQA1("Y2=%d , mv_index=%d ,level_Idx= %d ,Lv=%d,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y2_avg,mv_index,level_Idx,Lv,center,mv_lv);

	}

#if 0
	if(PQA_Input_Level[I_005_RFCVBS] >= 1) {
		if(pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]] > pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]-1])
			PQA_Input_rate[I_005_RFCVBS] = 255*(current_Signal_Status-pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]-1])/(pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]] - pPQA_VD_noise_status[PQA_Input_Level[I_005_RFCVBS]-1]);
		else
			PQA_Input_rate[I_005_RFCVBS] = 0;
	}
	else
#endif
		PQA_Input_rate[I_005_RFCVBS] = 0;




#endif
}

void scalerVIP_compute_level_I_005_SDHD_DNR(unsigned char DNR_TABLE_SECET, unsigned int* g_PQA_Input_Table, unsigned short *PQA_Input_Level, unsigned short *PQA_Input_rate)
{
	//=====================================================
	//static unsigned int counter_file = 0;
	static unsigned int RTNR_MAD_count_Y_avg_sum = 0;

	unsigned char PQA_Input_RTNR_MAD;
	unsigned char PQA_Input_DCC_Histogram_mean;

	unsigned int DCC_Histogram_Mean_value = 0;
	DCC_Histogram_Mean_value = SmartPic_clue->Hist_Y_Mean_Value;

	PQA_Input_RTNR_MAD = DNR_TABLE_SECET*PQA_I_ITEM_MAX*PQA_I_LEVEL_MAX + I_RTNR_MAD * PQA_I_LEVEL_MAX;
	PQA_Input_DCC_Histogram_mean = DNR_TABLE_SECET*PQA_I_ITEM_MAX*PQA_I_LEVEL_MAX + I_DCC_Histogram_mean * PQA_I_LEVEL_MAX;

	RTNR_MAD_count_Y_avg_sum += RTNR_MAD_count_Y2_avg;
	if(((MA_print_count % DNR_Auto_Count_Num) == 0)&&(MA_print_count != 0 ))
	{

		RTNR_MAD_count_Y_sum_avg = RTNR_MAD_count_Y_avg_sum/DNR_Auto_Count_Num;
		RTNR_MAD_count_Y_avg_sum = 0;

		if(DEBUG_AUTO_NR == 1)
		{	//	debug enable;
			RTNR_MAD_count_Y_sum_avg = DEBUG_RTNR_MAD;
			DCC_Histogram_Mean_value = DEBUG_HISTOGRAM_MEAN;
		}

		if((RTNR_MAD_count_Y_sum_avg >= *(g_PQA_Input_Table + PQA_Input_RTNR_MAD + 0)) && (RTNR_MAD_count_Y_sum_avg <= *(g_PQA_Input_Table + PQA_Input_RTNR_MAD + 1)))
		{
			if(DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 0))
				PQA_Input_Level[I_005_SDHD] = 1;
			else if((DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 0)) && (DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 1)))
				PQA_Input_Level[I_005_SDHD] = 2;
			else if((DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 1)) && (DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 2)))
				PQA_Input_Level[I_005_SDHD] = 3;
			else if(DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 2))
				PQA_Input_Level[I_005_SDHD] = 4;
		}
		else if((RTNR_MAD_count_Y_sum_avg > *(g_PQA_Input_Table + PQA_Input_RTNR_MAD + 1)) && (RTNR_MAD_count_Y_sum_avg <= *(g_PQA_Input_Table + PQA_Input_RTNR_MAD + 2)))
		{
			if(DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 0))
				PQA_Input_Level[I_005_SDHD] = 2;
			else if((DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 0)) && (DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 1)))
				PQA_Input_Level[I_005_SDHD] = 3;
			else if((DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 1)) && (DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 2)))
				PQA_Input_Level[I_005_SDHD] = 4;
			else if(DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 2))
				PQA_Input_Level[I_005_SDHD] = 5;
		}
		else if(RTNR_MAD_count_Y_sum_avg > *(g_PQA_Input_Table + PQA_Input_RTNR_MAD + 2))
		{
			if(DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 0))
				PQA_Input_Level[I_005_SDHD] = 4;
			else if((DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 0)) && (DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 1)))
				PQA_Input_Level[I_005_SDHD] = 5;
			else if((DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 1)) && (DCC_Histogram_Mean_value <= *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 2)))
				PQA_Input_Level[I_005_SDHD] = 6;
			else if(DCC_Histogram_Mean_value > *(g_PQA_Input_Table + PQA_Input_DCC_Histogram_mean + 2))
				PQA_Input_Level[I_005_SDHD] = 7;
		}
		else
		{
			PQA_Input_Level[I_005_SDHD] = 7;
		}

	}
	PQA_Input_rate[I_005_SDHD] = 0;
/*
	if( MA_print_count % 60 == 0 )
	{
		ROSPrintf( "count_Y_avg_ratio = %d\n", SmartPic_clue->RTNR_MAD_count_Y_avg_ratio );
		ROSPrintf( "count_Y_avg_sum = %d, DNR_Auto_Count_Num = %d\n", RTNR_MAD_count_Y_avg_sum, DNR_Auto_Count_Num );
		ROSPrintf( "count_Y_sum_avg = %d, PQA_Input_Level = %d\n", RTNR_MAD_count_Y_sum_avg, PQA_Input_Level[I_005_SDHD] );
	}
*/
	//=====================================================

}
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//TV_005_style
//=====================================================================================================================


void scalerVIP_compute_level_I_006_RTNR_Mode0(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode1 for RF CVBS RTNR
{
	unsigned int level_Idx=0, printf_Flag=0, print_delay=200;
	unsigned char Lv=0;

	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputMAD_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_RTNR_MAD][0]);
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];

	// get spatial content noise meter status
	unsigned int noise_status = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL);
	unsigned int noise_relaible = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE);
	//get mean histgram Y
	unsigned char meanHistY = SmartPic_clue->Hist_Y_Mean_Value;

	unsigned int motion_h_t = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_T_reg);
	unsigned int motion_h_m = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_M_reg);
	unsigned int motion_h_b = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_B_reg);
	unsigned int motion_v_l = rtd_inl(DI_IM_DI_SI_FILM_MOTION_V_L_reg);
	unsigned int motion_v_m = rtd_inl(DI_IM_DI_SI_FILM_MOTION_V_M_reg);
	unsigned int motion_v_r = rtd_inl(DI_IM_DI_SI_FILM_MOTION_V_R_reg);
	unsigned int motion = rtd_inl(DI_IM_DI_SI_FILM_MOTION_reg);
	motion += pPQA_InputMAD_TBL[0]+1;

	// for id pattern
	if(DynamicOptimizeSystem[35]==1)	// lg radio,
		motion = pPQA_InputMAD_TBL[8];

	if(motion>pPQA_InputMAD_TBL[9])
		motion = pPQA_InputMAD_TBL[9];
	level_Idx = scalerVIP_Cal_Idx_Ave_I_006(motion, 0);

	if(level_Idx <= pPQA_InputMAD_TBL[0])
		Lv = 9;
	else if(level_Idx <= pPQA_InputMAD_TBL[1])
		Lv = 8;
	else if(level_Idx <= pPQA_InputMAD_TBL[2])
		Lv = 7;
	else if(level_Idx <= pPQA_InputMAD_TBL[3])
		Lv = 6;
	else if(level_Idx <= pPQA_InputMAD_TBL[4])
		Lv = 5;
	else if(level_Idx <= pPQA_InputMAD_TBL[5])
		Lv = 4;
	else if(level_Idx <= pPQA_InputMAD_TBL[6])
		Lv = 3;
	else if(level_Idx <= pPQA_InputMAD_TBL[7])
		Lv = 2;
	else if(level_Idx <= pPQA_InputMAD_TBL[8])
		Lv = 1;
	else
		Lv=0;
	/*	 for OSD setting ,shift level Start Rord 2015/11/07	*/
	if(system_info_structure_table->OSD_Info.OSD_NR_Mode==1) //osd level =low
	{
		Lv = (Lv>1)?(Lv-1):0;
	}
	else if (system_info_structure_table->OSD_Info.OSD_NR_Mode==3) // osd level =high
	{
		Lv = (Lv>=9)?9:(Lv+1);
	}
	/*	 for OSD setting ,shift level END	*/

	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0] = level_Idx;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_1] = motion;

	PQA_Input_Level[I_006_RTNR_Mode0] = Lv;
	PQA_Input_rate[I_006_RTNR_Mode0] = 0;
	scalerVIP_Set_Noise_Level(Lv);

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.
	//if(((printf_Flag&_BIT0)!=0) && (MA_print_count%print_delay==0))
		ROSPrintf_INFO_PQA1("rm0~%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,\n",
		SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0], SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_1],
		SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_2], SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[I_006_RTNR_Mode2],
		noise_status, noise_relaible, meanHistY,motion_h_t,motion_h_m,motion_h_b,motion_v_l,motion_v_m,motion_v_r,motion);

}


void scalerVIP_compute_level_I_006_RTNR_Mode1(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode2 for SD RTNR
{
// it is for chroma NR information //2015/11/10 rord

	int level_Idx=0, printf_Flag=0, print_delay=200,mv_index=0;
	char Lv=0,mv_lv=0,ori_lv=0;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputMAD_Chroma_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_FMV_Hist_Weighting][0]); //for mad chroma
	unsigned char meanHistY = SmartPic_clue->Hist_Y_Mean_Value;
	unsigned short Lv_intp=0;//, sr_d;
	unsigned int tmp,tmp2;
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned int *pPQA_HMC_MV_C_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_FMV_Hist_stillIdx_th][0]);//for hmv
	static unsigned char mcnr_pan_nr_level = 255;
	unsigned int uv_max_value1=0,uv_max_value2=0,uv_max_value3=0;
	unsigned char cur_source=0,sd_input=0;

	uv_max_value1 = max(RTNR_MAD_count_U_avg,RTNR_MAD_count_V_avg);
	uv_max_value2 = max(RTNR_MAD_count_U2_avg,RTNR_MAD_count_V2_avg);
	uv_max_value3 = max(RTNR_MAD_count_U3_avg,RTNR_MAD_count_V3_avg);



	level_Idx = scalerVIP_Cal_Idx_Ave_I_006_chroma(uv_max_value2, 0);
	//mv_index =scalerVIP_compute_I_chromanrlevel_Index_Ave(SmartPic_clue->HMC_bin_hist_Ratio[16], 0);
	mv_index =scalerVIP_compute_I_chromanrlevel_Index_Ave(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(), 0);

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.someothers==TRUE))
	{
		ROSPrintf("mv_index=%d \n ",mv_index);
	}
	//mv_index =scalerVIP_Cal_Idx_Ave_I_006_mv(center, 0);


	cur_source=(RPC_system_info_structure_table->VIP_source);

	if((cur_source >= VIP_QUALITY_CVBS_NTSC && cur_source <=VIP_QUALITY_YPbPr_576P)||
		(cur_source >= VIP_QUALITY_HDMI_480I && cur_source <=VIP_QUALITY_HDMI_576P)||
		(cur_source >= VIP_QUALITY_DTV_480I && cur_source <=VIP_QUALITY_DTV_576P)||
		(cur_source >= VIP_QUALITY_PVR_480I && cur_source <=VIP_QUALITY_PVR_576P)||
		(cur_source >= VIP_QUALITY_CVBS_SECAN && cur_source <=VIP_QUALITY_TV_NTSC443))
	{
		sd_input = 1;
	}
	else
	{
		sd_input = 0;
	}



	if(level_Idx < pPQA_InputMAD_Chroma_TBL[0])
		Lv = 0;
	else if(level_Idx < pPQA_InputMAD_Chroma_TBL[1])
		Lv = 1;
	else if(level_Idx < pPQA_InputMAD_Chroma_TBL[2])
		Lv = 2;
	else if(level_Idx < pPQA_InputMAD_Chroma_TBL[3])
		Lv = 3;
	else if(level_Idx < pPQA_InputMAD_Chroma_TBL[4])
		Lv = 4;
	else if(level_Idx < pPQA_InputMAD_Chroma_TBL[5])
		Lv = 5;
	else if(level_Idx < pPQA_InputMAD_Chroma_TBL[6])
		Lv = 6;
	else if(level_Idx < pPQA_InputMAD_Chroma_TBL[7])
		Lv = 7;
	else if(level_Idx < pPQA_InputMAD_Chroma_TBL[8])
		Lv = 8;
	else
		Lv = 9;

	ori_lv = Lv;


	if(mv_index <pPQA_HMC_MV_C_TBL[0])
	{
		Lv = (Lv>9)?(Lv-9):0;
		mv_lv=9;
	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[1])
	{
		Lv = (Lv>8)?(Lv-8):0;
		mv_lv=8;

	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[2])
	{
		Lv = (Lv>7)?(Lv-7):0;
		mv_lv=7;

	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[3])
	{
		Lv = (Lv>6)?(Lv-6):0;
		mv_lv=6;

	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[4])
	{
		Lv = (Lv>5)?(Lv-5):0;
		mv_lv=5;

	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[5])
	{
		Lv = (Lv>4)?(Lv-4):0;
		mv_lv=4;

	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[6])
	{
		Lv = (Lv>3)?(Lv-3):0;
		mv_lv=3;

	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[7])
	{
		Lv = (Lv>2)?(Lv-2):0;
		mv_lv=2;

	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[8])
	{
		Lv = (Lv>1)?(Lv-1):0;
		mv_lv=1;

	}
	else if(mv_index <pPQA_HMC_MV_C_TBL[9])
	{
		mv_lv=0;

	}
	else
	{
		mv_lv=0;
	}


	if(ori_lv<=3)
		Lv=ori_lv;


	if(Lv<=0)
	{
		Lv=0;

	}


/////////////////// mcnr pan , use the same nr level start////////////////////////////////////////

	if(sd_input ==1)
	{
		if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1)&&mcnr_pan_nr_level==255)
		{
			mcnr_pan_nr_level = 4;
		}
		else if(scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==0)
		{
			mcnr_pan_nr_level = 255;
		}

		if(mcnr_pan_nr_level !=255)
		{
			Lv = mcnr_pan_nr_level;
		}
	}
	else
	{
		if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1)&&mcnr_pan_nr_level==255)
		{
			mcnr_pan_nr_level = 6;
		}
		else if(scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==0)
		{
			mcnr_pan_nr_level = 255;
		}

		if(mcnr_pan_nr_level !=255)
		{
			Lv = mcnr_pan_nr_level;
		}

	}


/////////////////// mcnr pan , use the same nr level  end ////////////////////////////////////////
	/*	 for OSD setting ,shift level Start	*/
	if(system_info_structure_table->OSD_Info.OSD_NR_Mode==1) //osd level =low
	{
		Lv--;
		if(Lv<=0)
			Lv=0;
	}
	else if (system_info_structure_table->OSD_Info.OSD_NR_Mode==3) // osd level =high
	{
		Lv++;
		if(Lv>9)
			Lv=9;
	}
	/*	 for OSD setting ,shift level END	*/


	//if(DynamicOptimizeSystem[35]==1)	// lg radio,
	//	Lv = 2;

	if(DynamicOptimizeSystem[7]==1)	// lg radio,
		Lv = 4;

	if(Lv==9)
		Lv_intp =0;
	else
	{
		if(level_Idx>pPQA_InputMAD_Chroma_TBL[PQA_I_L09])
			level_Idx = pPQA_InputMAD_Chroma_TBL[PQA_I_L09];
		tmp = ((pPQA_InputMAD_Chroma_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_Chroma_TBL[PQA_I_L09-Lv-1])==0)?1:(pPQA_InputMAD_Chroma_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_Chroma_TBL[PQA_I_L09-Lv-1]);
		Lv_intp = ((pPQA_InputMAD_Chroma_TBL[PQA_I_L09-Lv]-level_Idx)<<8) / tmp;
	}

	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0] = level_Idx;
	//SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_1] = motion;

	//ROSPrintf("\n U1=%d ,U2=%d ,LV =%d ,mv %d , level_Idx =%d\n ",uv_max_value1,uv_max_value2,Lv,mv_lv,level_Idx);
	//ROSPrintf("\n mv_idx=%d ,U2=%d ,LV =%d ,mv %d , level_Idx =%d\n ",mv_index,uv_max_value2,Lv,mv_lv,level_Idx);
//	ROSPrintf("\n mv_idx=%d ,U2=%d ,LV =%d ,mv %d , level_Idx =%d\n ",mv_index,uv_max_value2,Lv,mv_lv,level_Idx);

	PQA_Input_Level[I_006_RTNR_Mode1] = Lv;
	PQA_Input_rate[I_006_RTNR_Mode1] = 0;

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.

	//if((printf_Flag&_BIT9)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA1("LV=%d ,motion=%d ,y=%d, Lv_intp=%d \n ",Lv,level_Idx,meanHistY,Lv_intp);

	}

	tmp2=1000-RTNR_MAD_count_Y_avg-RTNR_MAD_count_Y2_avg-RTNR_MAD_count_Y3_avg;

	//ROSPrintf(" mv=%d ,Idx= %d ,Lv=%d\n",mv_index,level_Idx,Lv);

	//if((printf_Flag&_BIT10)!=0 && (MA_print_count%print_delay==0))
	{
		//ROSPrintf("Y1=%d ,Y2=%d ,Y3=%d , mv_index=%d ,Lv= %d ,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_Y2_avg,RTNR_MAD_count_Y3_avg,mv_index,Lv,center,mv_lv);
		ROSPrintf_INFO_PQA2("Y2=%d , mv_index=%d ,level_Idx= %d ,Lv=%d,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y2_avg,mv_index,level_Idx,Lv,center,mv_lv);

	}

	//if((printf_Flag&_BIT11)!=0 && (MA_print_count%print_delay==0))
	{
		//ROSPrintf("\n R5=%d ,R4=%d, R3=%d, R2=%d, R1=%d C=%d,L1=%d ,L2=%d ,L3=%d ,L4=%d ,L5=%d \n",hmcnr_sttistic[0],hmcnr_sttistic[1],hmcnr_sttistic[2],
		//hmcnr_sttistic[3],hmcnr_sttistic[4],hmcnr_sttistic[5],hmcnr_sttistic[6],hmcnr_sttistic[7],hmcnr_sttistic[8],hmcnr_sttistic[9],hmcnr_sttistic[10]);


		ROSPrintf_INFO_PQA3("hmc_C=%d ,r1=%d,L2 =%d \n",SmartPic_clue->HMC_bin_hist_Ratio[16],SmartPic_clue->HMC_bin_hist_Ratio[15],SmartPic_clue->HMC_bin_hist_Ratio[17]);

	}

	//if((printf_Flag&_BIT12)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA4("C=%d , L1=%d ,R1= %d ,others =%d \n",center,L1,R1,others);

	}


}



void scalerVIP_compute_level_I_006_RTNR_Mode2(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode3 for HD RTNR
{
#if 0
	unsigned int level_Idx=0, printf_Flag=0, print_delay=200;
	unsigned char Lv=0;
	static unsigned char Pre_Lv=0, Pre_rate=0;
	unsigned char i;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputMAD_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_RTNR_MAD][0]);
	unsigned int *pPQA_Input_HistMeanY_Dark_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_DCC_Histogram_mean_dark][0]);
	unsigned int *pPQA_Input_HistMeanY_Dark_Gain_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_DCC_Histogram_mean_dark_gain][0]);
	unsigned int tmp;

	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned int motioni[10]={0};

	unsigned short Lv_intp=0;//, sr_d;
	Lv_intp=0;
	int still_idx;
	still_idx=0;

	// get spatial content noise meter status
	unsigned int noise_status = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL);
	unsigned int noise_relaible = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE);
	//get mean histgram Y
	unsigned char meanHistY = SmartPic_clue->Hist_Y_Mean_Value;

	//unsigned int motion_h_t = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_T_reg);
	//unsigned int motion_h_m = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_M_reg);
	//unsigned int motion_h_b = rtd_inl(DI_IM_DI_SI_FILM_MOTION_H_B_reg);
	//unsigned int motion_v_l = rtd_inl(DI_IM_DI_SI_FILM_MOTION_V_L_reg);
	//unsigned int motion_v_m = rtd_inl(DI_IM_DI_SI_FILM_MOTION_V_M_reg);
	//unsigned int motion_v_r = rtd_inl(DI_IM_DI_SI_FILM_MOTION_V_R_reg);
	unsigned int motion = rtd_inl(DI_IM_DI_SI_FILM_MOTION_reg);

	still_idx = scalerVIP_compute_Still_Idx_FMV_HMC_I_006(vipTable_shareMem, SmartPic_clue, system_info_structure_table);

	motioni[0] = motion;

	// reduce rtnr for dark sence,
	if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L00])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L00];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L00];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L01])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L01];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L01];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L02])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L02];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L02];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L03])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L03];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L03];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L04])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L04];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L04];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L05])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L05];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L05];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L06])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L06];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L06];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L07])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L07];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L07];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L08])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L08];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L08];
	else if(meanHistY<pPQA_Input_HistMeanY_Dark_TBL[PQA_I_L09])
		motion += pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L09];
		//dark_meanY_Gain = pPQA_Input_HistMeanY_Dark_Gain_TBL[PQA_I_L09];
	else
		motion += 0;
	//dark_meanY_Gain = 1024;
	//motion = (motion*dark_meanY_Gain)>>10;
	motioni[1] = motion;

	//	for change smoothly
	if(motion>pPQA_InputMAD_TBL[PQA_I_L09])
		motion = pPQA_InputMAD_TBL[PQA_I_L09];

	// for moving bamboo women, and moving building
	if( (DynamicOptimizeSystem[198]==1) || (DynamicOptimizeSystem[199]==1) )
		motion = pPQA_InputMAD_TBL[PQA_I_L01];

	// for analog noise, little boy........., using old mode

	if( (DynamicOptimizeSystem[182]==1) || (DynamicOptimizeSystem[183]==1) || (DynamicOptimizeSystem[184]==1) || (DynamicOptimizeSystem[185]==1) || (DynamicOptimizeSystem[186]==1) || (scalerVIP_DI_MiddleWare_GetStatus(STATUS_HMCNR)==1) )
		rtd_clearbits(DI_IM_DI_RTNR_NEW_CONTROL_reg, _BIT0);
	else
		rtd_setbits(DI_IM_DI_RTNR_NEW_CONTROL_reg, _BIT0);

	level_Idx = scalerVIP_Cal_Idx_Ave_I_006(motion, 0);

	if(level_Idx <= pPQA_InputMAD_TBL[0])
		Lv = 9;
	else if(level_Idx <= pPQA_InputMAD_TBL[1])
		Lv = 8;
	else if(level_Idx <= pPQA_InputMAD_TBL[2])
		Lv = 7;
	else if(level_Idx <= pPQA_InputMAD_TBL[3])
		Lv = 6;
	else if(level_Idx <= pPQA_InputMAD_TBL[4])
		Lv = 5;
	else if(level_Idx <= pPQA_InputMAD_TBL[5])
		Lv = 4;
	else if(level_Idx <= pPQA_InputMAD_TBL[6])
		Lv = 3;
	else if(level_Idx <= pPQA_InputMAD_TBL[7])
		Lv = 2;
	else if(level_Idx <= pPQA_InputMAD_TBL[8])
		Lv = 1;
	else
		Lv=0;

	if(Lv==9)
		Lv_intp =0;
	else
	{
		if(level_Idx>pPQA_InputMAD_TBL[PQA_I_L09])
			level_Idx = pPQA_InputMAD_TBL[PQA_I_L09];
		tmp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1])==0)?1:(pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1]);
		Lv_intp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-level_Idx)<<8) / tmp;
	}

	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0] = level_Idx;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_1] = motion;

	if(Pre_Lv<Lv)
	{
		if(Pre_rate>=235)
		{
			Pre_rate = 0;
			Pre_Lv=Pre_Lv+1;
		}
		else
			Pre_rate=Pre_rate+20;
	}
	else if(Pre_Lv>Lv)
	{
		if(Pre_rate<=20)
		{
			Pre_rate = 255;
			Pre_Lv=Pre_Lv-1;
		}
		else
			Pre_rate=Pre_rate-20;
	}


	PQA_Input_Level[I_006_RTNR_Mode2] = Pre_Lv;
	PQA_Input_rate[I_006_RTNR_Mode2] = Pre_rate;

//	PQA_Input_Level[I_006_RTNR_Mode2] = Lv;
//	PQA_Input_rate[I_006_RTNR_Mode2] = 0;

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.
	if((printf_Flag==1) && (MA_print_count%print_delay==0))
	{
		ROSPrintf("rm2~lv=%d,st=%d,LvI=%d,mo=%d,y=%d,int=%d,nmL=%d,nmR=%d\n",
			Lv, still_idx, level_Idx, motion, meanHistY, Lv_intp,noise_status,noise_status,noise_relaible);
		ROSPrintf("mo_i=");
		for(i=0;i<10;i++)
			ROSPrintf("%d,",motioni[i]);
		ROSPrintf("\n");
		/*
		ROSPrintf("rm2~%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,\n",
		SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0], SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_1],
		SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_2], SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[I_006_RTNR_Mode2],
		noise_status, noise_relaible, meanHistY,motion_h_t,motion_h_m,motion_h_b,motion_v_l,motion_v_m,motion_v_r,motion);
		*/
		//ROSPrintf("rm0~hpt=%d,mv=%d,\n",s_hpan_pass_total, s_MV);
	}
#else

	int level_Idx=0, printf_Flag=0, print_delay=200,mv_index=0;
	unsigned char Lv=0,mv_lv=0;
	unsigned char i;
	unsigned int HMC_count=0;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputMAD_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_RTNR_MAD][0]);
	unsigned char meanHistY = SmartPic_clue->Hist_Y_Mean_Value;
	unsigned short Lv_intp=0;//, sr_d;
	unsigned int tmp,tmp2;
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned int *pPQA_HMC_MV_w_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_HMC_MV_Hist_Weighting][0]);

	level_Idx = scalerVIP_Cal_Idx_Ave_I_006_noise(RTNR_MAD_count_Y2_avg, 0);

	for(i=0;i<((HMC_Hist_Bin_Num-1)>>1);i++)
	{
		HMC_count+=(SmartPic_clue->HMC_bin_hist_Ratio[32-i]*(16-i));
		HMC_count+=(SmartPic_clue->HMC_bin_hist_Ratio[i]*(16-i));
	}
	mv_index =scalerVIP_Cal_Idx_Ave_I_006_mv(HMC_count, 0);
	//mv_index =scalerVIP_Cal_Idx_Ave_I_006_mv(SmartPic_clue->HMC_bin_hist_Ratio[16], 0);

	//ROSPrintf("first_level_Idx=%d ,F_mv_index =%d\n ",level_Idx,mv_index);

	if(level_Idx < pPQA_InputMAD_TBL[0])
		Lv = 0;
	else if(level_Idx < pPQA_InputMAD_TBL[1])
		Lv = 1;
	else if(level_Idx < pPQA_InputMAD_TBL[2])
		Lv = 2;
	else if(level_Idx < pPQA_InputMAD_TBL[3])
		Lv = 3;
	else if(level_Idx < pPQA_InputMAD_TBL[4])
		Lv = 4;
	else if(level_Idx < pPQA_InputMAD_TBL[5])
		Lv = 5;
	else if(level_Idx < pPQA_InputMAD_TBL[6])
		Lv = 6;
	else if(level_Idx < pPQA_InputMAD_TBL[7])
		Lv = 7;
	else if(level_Idx < pPQA_InputMAD_TBL[8])
		Lv = 8;
	else
		Lv = 9;

	if(mv_index >pPQA_HMC_MV_w_TBL[0])
	{
		level_Idx -=700;
		mv_lv=9;
	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[1])
	{
		level_Idx -=600;
		mv_lv=9;

	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[2])
	{
		level_Idx -=500;
		mv_lv=8;

	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[3])
	{
		level_Idx -=400;
		mv_lv=7;

	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[4])
	{
		level_Idx -=300;
		mv_lv=6;

	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[5])
	{
		level_Idx -=250;
		mv_lv=5;

	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[6])
	{
		level_Idx -=200;
		mv_lv=4;

	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[7])
	{
		level_Idx -=150;
		mv_lv=3;

	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[8])
	{
		level_Idx -=100;
		mv_lv=2;

	}
	else if(mv_index >pPQA_HMC_MV_w_TBL[9])
	{
		level_Idx -=50;
		mv_lv=1;

	}
	else
	{
		mv_lv=0;
	}

	if(level_Idx<=0)
	{
		level_Idx=0;

	}

	//ROSPrintf("mv_index=%d ,pPQA_HMC_MV_w_TBL[0]=%d ,y=%d, Lv_intp=%d \n ",mv_index,pPQA_HMC_MV_w_TBL[0],mv_lv,Lv_intp);

	if(level_Idx < pPQA_InputMAD_TBL[0])
		Lv = 0;
	else if(level_Idx < pPQA_InputMAD_TBL[1])
		Lv = 1;
	else if(level_Idx < pPQA_InputMAD_TBL[2])
		Lv = 2;
	else if(level_Idx < pPQA_InputMAD_TBL[3])
		Lv = 3;
	else if(level_Idx < pPQA_InputMAD_TBL[4])
		Lv = 4;
	else if(level_Idx < pPQA_InputMAD_TBL[5])
		Lv = 5;
	else if(level_Idx < pPQA_InputMAD_TBL[6])
		Lv = 6;
	else if(level_Idx < pPQA_InputMAD_TBL[7])
		Lv = 7;
	else if(level_Idx < pPQA_InputMAD_TBL[8])
		Lv = 8;
	else
		Lv = 9;

	/*	 for OSD setting ,shift level Start Rord 2015/11/07	*/
	if(system_info_structure_table->OSD_Info.OSD_NR_Mode==1) //osd level =low
	{
		Lv = (Lv>1)?(Lv-1):0;
	}
	else if (system_info_structure_table->OSD_Info.OSD_NR_Mode==3) // osd level =high
	{
		Lv = (Lv>=9)?9:(Lv+1);
	}
	/*	 for OSD setting ,shift level END	*/


	if(Lv==9)
		Lv_intp =0;
	else
	{
		if(level_Idx>pPQA_InputMAD_TBL[PQA_I_L09])
			level_Idx = pPQA_InputMAD_TBL[PQA_I_L09];
		tmp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1])==0)?1:(pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1]);
		Lv_intp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-level_Idx)<<8) / tmp;
	}

	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0] = level_Idx;

	PQA_Input_Level[I_006_RTNR_Mode2] = Lv;
	PQA_Input_rate[I_006_RTNR_Mode2] = 0;
	scalerVIP_Set_Noise_Level(Lv);

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.

	//if((printf_Flag&_BIT9)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA1("LV=%d ,motion=%d ,y=%d, Lv_intp=%d \n ",Lv,level_Idx,meanHistY,Lv_intp);

	}

	tmp2=1000-RTNR_MAD_count_Y_avg-RTNR_MAD_count_Y2_avg-RTNR_MAD_count_Y3_avg;
	//if((printf_Flag&_BIT10)!=0 && (MA_print_count%print_delay==0))
	{
		//ROSPrintf("Y1=%d ,Y2=%d ,Y3=%d , mv_index=%d ,Lv= %d ,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_Y2_avg,RTNR_MAD_count_Y3_avg,mv_index,Lv,center,mv_lv);
		ROSPrintf_INFO_PQA2("Y2=%d , mv_index=%d ,level_Idx= %d ,Lv=%d,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y2_avg,mv_index,level_Idx,Lv,center,mv_lv);

	}

	//if((printf_Flag&_BIT11)!=0 && (MA_print_count%print_delay==0))
	{
		//ROSPrintf("\n R5=%d ,R4=%d, R3=%d, R2=%d, R1=%d C=%d,L1=%d ,L2=%d ,L3=%d ,L4=%d ,L5=%d \n",hmcnr_sttistic[0],hmcnr_sttistic[1],hmcnr_sttistic[2],
		//hmcnr_sttistic[3],hmcnr_sttistic[4],hmcnr_sttistic[5],hmcnr_sttistic[6],hmcnr_sttistic[7],hmcnr_sttistic[8],hmcnr_sttistic[9],hmcnr_sttistic[10]);

		ROSPrintf_INFO_PQA3("Y1=%d ,Y2=%d ,Y3=%d , mv_index=%d ,Lv= %d ,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_Y2_avg,RTNR_MAD_count_Y3_avg,mv_index,Lv,center,mv_lv);

		//ROSPrintf("hmc_C=%d ,r1=%d,L2 =%d \n",SmartPic_clue->HMC_bin_hist_Ratio[16],SmartPic_clue->HMC_bin_hist_Ratio[15],SmartPic_clue->HMC_bin_hist_Ratio[17]);

	}

	//if((printf_Flag&_BIT12)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA4("C=%d , L1=%d ,R1= %d ,others =%d \n",center,L1,R1,others);

	}

#endif


}
void scalerVIP_compute_level_I_006_RTNR_Mode4(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode3 for HD RTNR
{

	int level_Idx=0, printf_Flag=0, print_delay=200,mv_index=0;
	short Lv=0,mv_lv=0;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputMAD_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_RTNR_MAD][0]);
	unsigned char meanHistY = SmartPic_clue->Hist_Y_Mean_Value;
	unsigned short Lv_intp=0;//, sr_d;
	unsigned int tmp,tmp2;
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned int *pPQA_HMC_MV_w_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_HMC_MV_Hist_Weighting][0]);

	level_Idx = scalerVIP_Cal_Idx_Ave_I_006_noise(RTNR_MAD_count_Y2_avg, 0);
	mv_index =scalerVIP_Cal_Idx_Ave_I_006_mv(center, 0);
	//mv_index =scalerVIP_compute_I_chromanrlevel_Index_Ave(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(), 0);

		//ROSPrintf("mv_index=%d ,level_Idx=%d ,y=%d, Lv_intp=%d \n ",mv_index,level_Idx,mv_lv,Lv_intp);
		//ROSPrintf("Y1=%d ,Y2=%d ,Y3=%d , mv_index=%d ,Lv= %d ,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_Y2_avg,RTNR_MAD_count_Y3_avg,mv_index,Lv,center,mv_lv);

	if(level_Idx < pPQA_InputMAD_TBL[0])
		Lv = 0;
	else if(level_Idx < pPQA_InputMAD_TBL[1])
		Lv = 1;
	else if(level_Idx < pPQA_InputMAD_TBL[2])
		Lv = 2;
	else if(level_Idx < pPQA_InputMAD_TBL[3])
		Lv = 3;
	else if(level_Idx < pPQA_InputMAD_TBL[4])
		Lv = 4;
	else if(level_Idx < pPQA_InputMAD_TBL[5])
		Lv = 5;
	else if(level_Idx < pPQA_InputMAD_TBL[6])
		Lv = 6;
	else if(level_Idx < pPQA_InputMAD_TBL[7])
		Lv = 7;
	else if(level_Idx < pPQA_InputMAD_TBL[8])
		Lv = 8;
	else
		Lv = 9;



	if(mv_index <pPQA_HMC_MV_w_TBL[0])
	{
		Lv = (Lv>=9)?(Lv-9):0;
		mv_lv=9;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[1])
	{
		Lv = (Lv>8)?(Lv-8):0;
		mv_lv=8;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[2])
	{
		Lv = (Lv>7)?(Lv-7):0;
		mv_lv=7;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[3])
	{
		Lv = (Lv>6)?(Lv-6):0;
		mv_lv=6;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[4])
	{
		Lv = (Lv>5)?(Lv-5):0;
		mv_lv=5;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[5])
	{
		Lv = (Lv>4)?(Lv-4):0;
		mv_lv=4;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[6])
	{
		Lv = (Lv>3)?(Lv-3):0;
		mv_lv=3;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[7])
	{
		Lv = (Lv>2)?(Lv-2):0;
		mv_lv=2;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[8])
	{
		Lv = (Lv>1)?(Lv-1):0;
		mv_lv=1;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[9])
	{
		mv_lv=0;
	}
	else
	{
		mv_lv=0;
	}


	if(Lv<=0)
	{
		Lv=0;
	}

	/*	 for OSD setting ,shift level Start Rord 2015/11/07	*/
	if(system_info_structure_table->OSD_Info.OSD_NR_Mode==1) //osd level =low
	{
		Lv = (Lv>1)?(Lv-1):0;
	}
	else if (system_info_structure_table->OSD_Info.OSD_NR_Mode==3) // osd level =high
	{
		Lv = (Lv>=9)?9:(Lv+1);
	}
	/*	 for OSD setting ,shift level END	*/


	if(Lv==9)
		Lv_intp =0;
	else
	{
		if(level_Idx>pPQA_InputMAD_TBL[PQA_I_L09])
			level_Idx = pPQA_InputMAD_TBL[PQA_I_L09];
		tmp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1])==0)?1:(pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1]);
		Lv_intp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-level_Idx)<<8) / tmp;
	}

	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0] = level_Idx;

	PQA_Input_Level[I_006_RTNR_Mode4] = Lv;
	PQA_Input_rate[I_006_RTNR_Mode4] = 0;
	scalerVIP_Set_Noise_Level(Lv);

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.


	//ROSPrintf("Lv=%d ,mv_lv=%d, mv_index=%d  \n ",Lv,mv_lv,mv_index);

	//if((printf_Flag&_BIT9)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA1("LV=%d ,motion=%d ,y=%d, Lv_intp=%d \n ",Lv,level_Idx,meanHistY,Lv_intp);

	}

	tmp2=1000-RTNR_MAD_count_Y_avg-RTNR_MAD_count_Y2_avg-RTNR_MAD_count_Y3_avg;
	//if((printf_Flag&_BIT10)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA2("Y1=%d ,Y2=%d ,Y3=%d , mv_index=%d ,Lv= %d ,C=%d ,mv_lv=%d \n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_Y2_avg,RTNR_MAD_count_Y3_avg,mv_index,Lv,center,mv_lv);
	}

	//if((printf_Flag&_BIT11)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA3("C=%d , L1=%d ,R1= %d ,others=%d \n",center,L1,R1,others);

	}
}
#ifndef fix_compile_error_MEMC
unsigned char g_scaler_memc_cadence_temp[_FILM_MEMC_NUM] = {0};
#endif
void scalerVIP_compute_level_I_006_RTNR_Mode2_HMCNR(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode2 for SD RTNR
{
	int level_Idx=0, printf_Flag=0, print_delay=200,mv_index=0;
	signed char Lv=0,mad_lv=0,mv_lv=0,apl_lv=0,film_lv=0;//,ori_lv=0;
	LEVEL_INFO value;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputMAD_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_RTNR_MAD][0]);
	unsigned char meanHistY = SmartPic_clue->Hist_Y_Mean_Value;
	unsigned short Lv_intp=0;//, sr_d;
	unsigned int tmp,tmp2;
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned int *pPQA_HMC_MV_w_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_HMC_MV_Hist_Weighting][0]);
	static unsigned char mcnr_pan_nr_level = 255;
        static unsigned short apl_continue_cnt_minus,apl_change_cnt_minus;
        static unsigned short apl_continue_cnt_plus,apl_change_cnt_plus;

	unsigned int *pPQA_Input_HistMeanY_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_DCC_Histogram_mean][0]);

	unsigned int *pPQA_InputFilm_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_CorrectionBit_Histogram_mean][0]);
	unsigned char cur_source=0,sd_input=0;

	unsigned char diff_Th1=1,diff_Th2=2,score_th=10;
	static char pre_meanHistY=0,prepre_meanHistY=0;
	static char diff_score=0;
	char pn_flag=0;
	static char pn_flag_pre=0;
	char Level=0;
        unsigned char debounce_th[3];
        static unsigned char debounce_cnt[3];
        unsigned char soccer_weight=0;
#ifdef fix_compile_error_MEMC
	unsigned char *FilmInfo = Scaler_MEMC_GetCadence();
#else
	unsigned char *FilmInfo = &g_scaler_memc_cadence_temp[0];
#endif
	level_Idx = scalerVIP_Cal_Idx_Ave_I_006_mcnr(RTNR_MAD_count_Y2_avg, 0);
	//mv_index =scalerVIP_compute_I_hmcnrlevel_Index_Ave(SmartPic_clue->HMC_bin_hist_Ratio[16], 0);
	mv_index = scalerVIP_compute_I_hmcnrlevel_Index_Ave(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),0);
	//rord start  2016/12/01

	if( FilmInfo == NULL )
	{
		if( MA_print_count%120 == 0)
			ROSPrintf("[%s] Film information ptr from MEMC error\n", __func__);
		return;
	}

	cur_source=(RPC_system_info_structure_table->VIP_source);

	if((cur_source >= VIP_QUALITY_CVBS_NTSC && cur_source <=VIP_QUALITY_YPbPr_576P)||
		(cur_source >= VIP_QUALITY_HDMI_480I && cur_source <=VIP_QUALITY_HDMI_576P)||
		(cur_source >= VIP_QUALITY_DTV_480I && cur_source <=VIP_QUALITY_DTV_576P)||
		(cur_source >= VIP_QUALITY_PVR_480I && cur_source <=VIP_QUALITY_PVR_576P)||
		(cur_source >= VIP_QUALITY_CVBS_SECAN && cur_source <=VIP_QUALITY_TV_NTSC443))
	{
		sd_input = 1;
	}
	else
	{
		sd_input = 0;
	}


        if(meanHistY>pre_meanHistY)
        {
                if(apl_change_cnt_plus>3)
                {
                        apl_change_cnt_minus=0;
                        apl_continue_cnt_minus=0;
                }

                if (ABS(pre_meanHistY,meanHistY)>=1)
                {
                        apl_continue_cnt_plus=0;
                        apl_change_cnt_plus++;
                        if(apl_change_cnt_plus>255)
                                apl_change_cnt_plus=255;
                }

        }
        else if(meanHistY<pre_meanHistY)
        {
                if(apl_change_cnt_minus>3)
                {
                        apl_change_cnt_plus=0;
                        apl_continue_cnt_plus=0;
                }
                if (ABS(pre_meanHistY,meanHistY)>=1)
                {
                        apl_continue_cnt_minus=0;
                        apl_change_cnt_minus++;
                        if(apl_change_cnt_minus>255)
                                apl_change_cnt_minus=255;
                }

        }
        else
        {
                apl_continue_cnt_plus++;
                if(apl_continue_cnt_plus>=15)
                {
                        apl_continue_cnt_plus=15;
                        apl_change_cnt_plus =0;

                }

                apl_continue_cnt_minus++;
                if(apl_continue_cnt_minus>=15)
                {
                        apl_continue_cnt_minus=15;
                        apl_change_cnt_minus =0;

                }

        }

	if(level_Idx < pPQA_InputMAD_TBL[0])
	{
		Lv = 0;
		mad_lv =0;
	}
	else if(level_Idx < pPQA_InputMAD_TBL[1])
	{
		Lv = 1;
		mad_lv =1;
	}
	else if(level_Idx < pPQA_InputMAD_TBL[2])
	{
		Lv = 2;
		mad_lv =2;
	}
	else if(level_Idx < pPQA_InputMAD_TBL[3])
	{
		Lv = 3;
		mad_lv =3;
	}
	else if(level_Idx < pPQA_InputMAD_TBL[4])
	{
		Lv = 4;
		mad_lv =4;
	}
	else if(level_Idx < pPQA_InputMAD_TBL[5])
	{
		Lv = 5;
		mad_lv =5;
	}
	else if(level_Idx < pPQA_InputMAD_TBL[6])
	{
		Lv = 6;
		mad_lv =6;
	}
	else if(level_Idx < pPQA_InputMAD_TBL[7])
	{
		Lv = 7;
		mad_lv =7;
	}
	else if(level_Idx < pPQA_InputMAD_TBL[8])
	{
		Lv = 8;
		mad_lv =8;
	}
	else
	{
		Lv = 9;
		mad_lv =9;

	}
	//ori_lv = Lv;


	if(mv_index <pPQA_HMC_MV_w_TBL[0])
	{
		Lv = (Lv>9)?(Lv-9):0;
		mv_lv=9;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[1])
	{
		Lv = (Lv>8)?(Lv-8):0;
		mv_lv=8;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[2])
	{
		Lv = (Lv>7)?(Lv-7):0;
		mv_lv=7;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[3])
	{
		Lv = (Lv>6)?(Lv-6):0;
		mv_lv=6;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[4])
	{
		Lv = (Lv>5)?(Lv-5):0;
		mv_lv=5;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[5])
	{
		Lv = (Lv>4)?(Lv-4):0;
		mv_lv=4;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[6])
	{
		Lv = (Lv>3)?(Lv-3):0;
		mv_lv=3;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[7])
	{
		Lv = (Lv>2)?(Lv-2):0;
		mv_lv=2;

	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[8])
	{
		Lv = (Lv>1)?(Lv-1):0;
		mv_lv=1;

	}
	else
	{
		mv_lv=0;
	}

        g_hmcnr_mode2 = Lv;



       // printk("rord hue[7]=%d , gmv=%d , mv_lv=%d \n", SmartPic_clue->Hue_Main_His_Ratio[7],mv_index,mv_lv);

        //for soccer scene , grass easy motion blur.
        //reduce noise level , when big motion and green scene .
        //SmartPic_clue->Hue_Main_His_Ratio[7]


        if(SmartPic_clue->Hue_Main_His_Ratio[7]>=700)
        {
                soccer_weight =100;
        }
        else if(SmartPic_clue->Hue_Main_His_Ratio[7]<=200)
        {
                soccer_weight =0;
        }
        else
        {
                soccer_weight = (SmartPic_clue->Hue_Main_His_Ratio[7]-200)*100/(700-500);
        }

        //printk("rord hue[7]=%d ,gmv=%d ,weight =%d ,ori lv=%d \n", SmartPic_clue->Hue_Main_His_Ratio[7],mv_index,soccer_weight,Lv);

        if(mv_index <=20)
        {
                Lv = Lv - (Lv*soccer_weight/100);  //Lv = Lv - (Lv*soccer_weight/100);
        }
        else if(mv_index <=40)
        {
                Lv = Lv - (Lv*soccer_weight*9/1000); // Lv = Lv - (Lv*soccer_weight*0.9/100);
        }
        else if(mv_index <=60)
        {
                Lv = Lv - (Lv*soccer_weight*8/1000);// Lv = Lv - (Lv*soccer_weight*0.8/100);
        }
        else
        {
                Lv =Lv;
        }
       // printk("final lv =%d \n",Lv);




	if(meanHistY<pPQA_Input_HistMeanY_TBL[0])
	{
		Lv = (Lv>9)?(Lv-9):0;
		apl_lv=9;
	}
	else if(meanHistY<pPQA_Input_HistMeanY_TBL[1])
	{
		Lv = (Lv>8)?(Lv-8):0;
		apl_lv=8;

	}
	else if(meanHistY<pPQA_Input_HistMeanY_TBL[2])
	{
		Lv = (Lv>7)?(Lv-7):0;
		apl_lv=7;
	}
	else if(meanHistY<pPQA_Input_HistMeanY_TBL[3])
	{
		Lv = (Lv>6)?(Lv-6):0;
		apl_lv=6;
	}
	else if(meanHistY<pPQA_Input_HistMeanY_TBL[4])
	{
		Lv = (Lv>5)?(Lv-5):0;
		apl_lv=5;
	}
	else if(meanHistY<pPQA_Input_HistMeanY_TBL[5])
	{
		Lv = (Lv>4)?(Lv-4):0;
		apl_lv=4;
	}
	else if(meanHistY<pPQA_Input_HistMeanY_TBL[6])
	{
		Lv = (Lv>3)?(Lv-3):0;
		apl_lv=3;
	}
	else if(meanHistY<pPQA_Input_HistMeanY_TBL[7])
	{
		Lv = (Lv>2)?(Lv-2):0;
		apl_lv=2;
	}
	else if(meanHistY<pPQA_Input_HistMeanY_TBL[8])
	{
		Lv = (Lv>1)?(Lv-1):0;
		apl_lv=1;
	}
	else
	{
		apl_lv=0;

	}


      // printk("cnt_plus=%d ,cont =%d lv=%d \n",apl_change_cnt_plus,apl_continue_cnt_plus,Lv);
      // printk("1 cnt_plus=%d ,cont =%d lv=%d , apl=%d \n",apl_change_cnt_plus,apl_continue_cnt_plus,Lv,meanHistY);


       // if(((apl_change_cnt_plus>=3)||(apl_change_cnt_minus>=15))&&(Lv>0)&& sat_ratio_mean_value<40)
       //       Lv=0;


        if(((apl_change_cnt_plus>=2)||(apl_change_cnt_minus>=15))&&(Lv>0)&&
                   sat_ratio_mean_value<40 )
                 Lv=0;

      //  printk("2 cnt_plus=%d ,cont =%d lv=%d , apl=%d \n",apl_change_cnt_plus,apl_continue_cnt_plus,Lv,meanHistY);

	//===================for film===============================

	 //0 VIDEO,1:CAD_22 ,2: _CAD_32,3:_CAD_32322,4 others ,beside 1,2,3,

	if(( FilmInfo[_FILM_MEMC_OUT_ALL] != 0)&&Lv>5) //if is film mode
	{
		if(pPQA_InputFilm_TBL[0]!=0) //all film mdoe
		{
			Lv = Lv-pPQA_InputFilm_TBL[0];
			film_lv = pPQA_InputFilm_TBL[0];

			if(Lv<5)
			{
				Lv =5;
			}

		}
		else //by different film to decide reduce level
		{

			if(FilmInfo[_FILM_MEMC_OUT_ALL]==1)      //only 22 film
			{
				Lv = Lv-pPQA_InputFilm_TBL[1];
				film_lv = pPQA_InputFilm_TBL[1];
			}
			else if(FilmInfo[_FILM_MEMC_OUT_ALL]==2) //only 32 film
			{
				Lv = Lv-pPQA_InputFilm_TBL[2];
				film_lv = pPQA_InputFilm_TBL[2];

			}
			else if(FilmInfo[_FILM_MEMC_OUT_ALL]==3) //only 32322 film
			{
				Lv = Lv-pPQA_InputFilm_TBL[3];
				film_lv = pPQA_InputFilm_TBL[3];

			}
			else
			{
				Lv = Lv-pPQA_InputFilm_TBL[4];
				film_lv = pPQA_InputFilm_TBL[4];
			}




			if(Lv<5)
			{
				Lv =5;
			}


		}
	}
	if(Lv<=0)
	{
		Lv=0;

	}


	Level = Lv;
	if(meanHistY>pre_meanHistY)
			pn_flag=1;
		else if(meanHistY<pre_meanHistY)
			pn_flag=-1;
		else
			pn_flag=0;


	if(RTNR_MAD_count_Y_avg<20)
	{
		if(pn_flag*pn_flag_pre==-1)
		{
			diff_score--;
			if(diff_score<0)
				diff_score=0;
		}
		else if (ABS(pre_meanHistY,meanHistY)>=diff_Th2 || (ABS(pre_meanHistY,meanHistY)>=diff_Th1&&diff_score >5))
		{
			diff_score += 2;
			if(diff_score > 25)
				diff_score=25;
		}
		else if (ABS(pre_meanHistY,meanHistY)>=diff_Th1 || ABS(prepre_meanHistY,meanHistY)>=diff_Th1)
		{
			diff_score ++;
			if(diff_score > 25)
				diff_score=25;
		}
		else if (ABS(prepre_meanHistY,meanHistY)==0)
		{
			diff_score --;
			if(diff_score<0)
				diff_score=0;
		}


		//printk("score1 =%d \n",diff_score);

		if(diff_score>score_th)
		{

			Level= Level-(diff_score-score_th);
			if(Level<0)
				Level=0;


			//printk("score3 =%d , lv=%d \n",diff_score,Lv);

		}
		Lv =Level;

		//if(rtd_inl(0xb802e4f4)==0x17)
			//printk("\n score3 =%d,meanHistY=%d,Lv=%d \n ",diff_score,meanHistY,Lv );
		//	printk("MAD_1=%d =%d,score=%d,Lv =%d ,meanHistY=%d\n",RTNR_MAD_count_Y_avg,RTNR_MAD_count_Y2_avg,diff_score,Lv,meanHistY);

	}
	else
	{
		diff_score--;
		if(diff_score<0)
			diff_score=0;

	}

	//rord End  2016/12/01

/////////////////// mcnr pan , use the same nr level start////////////////////////////////////////
        debounce_th[0]=15;
        debounce_th[1]=15;
        debounce_th[2]=15;

	if(sd_input ==1)
	{
		if(DynamicOptimizeSystem[7]==1||DynamicOptimizeSystem[75]==1)
		{
		if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1)&&mcnr_pan_nr_level==255)
		{
			mcnr_pan_nr_level = 4;
		}
		else if(scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==0)
		{
			mcnr_pan_nr_level = 255;
		}

		if(mcnr_pan_nr_level !=255)
		{
			Lv = mcnr_pan_nr_level;
		}
	}
	}
	else
	{
		if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1)&&mcnr_pan_nr_level==255)
		{
			//mcnr_pan_nr_level = 6;
		}
		else if(scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==0)
		{
		//	mcnr_pan_nr_level = 255;
		}

		if(mcnr_pan_nr_level !=255)
		{
		//	Lv = mcnr_pan_nr_level;
		}

		if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1)&&DynamicOptimizeSystem[177]!=1)
		{

                        debounce_cnt[0]++;

                        if(debounce_cnt[0]>=debounce_th[0])
                        {
                                debounce_cnt[0] = debounce_th[0];
                                debounce_cnt[1] = 0;
                                debounce_cnt[2] = 0;

                		if (cur_source ==VIP_QUALITY_HDMI_1080I)
                			Lv = 5;
                		else if (cur_source ==VIP_QUALITY_HDMI_1080P)
                			Lv = 5;
                        }
		}
                else if(scalerVIP_DI_MiddleWare_MCNR_Get_V_Pan_Flag()==1)
                {

                        debounce_cnt[1]++;

                        if(debounce_cnt[1]>=debounce_th[1])
                        {
                                debounce_cnt[0] = 0;
                                debounce_cnt[1] = debounce_th[1];
                                debounce_cnt[2] = 0;
                                Lv = 9;
                        }




                }

                if(DynamicOptimizeSystem[226]==1)
                {
                         Lv = 9;


                }


                if(((film_for_rtnr==1)&&Lv>5)&&(scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1))
		{

			Lv = Lv-2;
			if(Lv<5)
			{
				Lv =5;
			}


		}

		//if(Skyworth_Speach_Man_Pattern==1)
		//	Lv=9;

	}


/////////////////// mcnr pan , use the same nr level  end ////////////////////////////////////////
	/*	 for OSD setting ,shift level Start	*/
	if(system_info_structure_table->OSD_Info.OSD_NR_Mode==1) //osd level =low
	{
		Lv = (Lv>1)?(Lv-1):0;
	}
	else if (system_info_structure_table->OSD_Info.OSD_NR_Mode==3) // osd level =high
	{
		Lv = (Lv>=9)?9:(Lv+1);
	}
	/*	 for OSD setting ,shift level END	*/


	if(DynamicOptimizeSystem[35]==1)	// lg radio,
		Lv = 0;

	if(DynamicOptimizeSystem[7]==1)	// lg radio,
		Lv = 4;

	//if((DynamicOptimizeSystem[177]==1))	// sunrise,
	//	Lv = 5;

	if(Sony_test_pattern[1]==1)
		Lv=0;

	value.Mad_lv= mad_lv;
	value.Motion_lv = mv_lv;
	value.Film_lv =film_lv;
	scalerVIP_Set_NR_Info(value);

	if(Lv==9)
		Lv_intp =0;
	else
	{
		if(level_Idx>pPQA_InputMAD_TBL[PQA_I_L09])
			level_Idx = pPQA_InputMAD_TBL[PQA_I_L09];
		tmp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1])==0)?1:(pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1]);
		Lv_intp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-level_Idx)<<8) / tmp;
	}


	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0] = level_Idx;
	//SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_1] = motion;

	PQA_Input_Level[I_006_RTNR_Mode2_HMCNR] = Lv;
	PQA_Input_rate[I_006_RTNR_Mode2_HMCNR] = 0;
	scalerVIP_Set_Noise_Level(Lv);

	/*if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1)&&DynamicOptimizeSystem[177]!=1) //hpan
	{
		PQA_Input_Level[I_006_SNR_Mode0] = 0;
	}
	else if((scalerVIP_DI_MiddleWare_MCNR_Get_V_Pan_Flag()==1)) //Vpan
	{
		PQA_Input_Level[I_006_SNR_Mode0] = 9;

	}
	else
	{
		PQA_Input_Level[I_006_SNR_Mode0] = Lv;

	}

	PQA_Input_rate[I_006_SNR_Mode0] = 0;
*/

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.




	//if((printf_Flag&_BIT9)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA1("\n RTNR_Mode2_HMCNR Lv=%d , mad_lv =%d ,mv_lv=%d ,apl_lv= %d",Lv,mad_lv,mv_lv,apl_lv);

	}

        //printk("\n meanHistY =%d, pre_meanHistY=%d, change_cnt_P =%d , continue_cnt_P =%d ",meanHistY,pre_meanHistY,apl_change_cnt_plus,apl_continue_cnt_plus);
        //printk("\n meanHistY =%d, pre_meanHistY=%d, change_cnt_m =%d , continue_cnt_m =%d ",meanHistY,pre_meanHistY,apl_change_cnt_minus,apl_continue_cnt_minus);

	//if((printf_Flag&_BIT10)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA2("\n LV=%d(%d-%d-%d-%d),level_Idx =%d,mv_index=%d,meanHistY=%d , film_mode=%d ",Lv,mad_lv,mv_lv,apl_lv,film_lv,level_Idx,mv_index,meanHistY ,FilmInfo[_FILM_MEMC_OUT_ALL]);
	}

	tmp2=1000-RTNR_MAD_count_Y_avg-RTNR_MAD_count_Y2_avg-RTNR_MAD_count_Y3_avg;
	//if((printf_Flag&_BIT11)!=0 && (MA_print_count%print_delay==0))
	{
		//ROSPrintf("\n R5=%d ,R4=%d, R3=%d, R2=%d, R1=%d C=%d,L1=%d ,L2=%d ,L3=%d ,L4=%d ,L5=%d \n",hmcnr_sttistic[0],hmcnr_sttistic[1],hmcnr_sttistic[2],
		//hmcnr_sttistic[3],hmcnr_sttistic[4],hmcnr_sttistic[5],hmcnr_sttistic[6],hmcnr_sttistic[7],hmcnr_sttistic[8],hmcnr_sttistic[9],hmcnr_sttistic[10]);


		ROSPrintf_INFO_PQA3("hmc_C=%d ,r1=%d,L2 =%d \n",SmartPic_clue->HMC_bin_hist_Ratio[16],SmartPic_clue->HMC_bin_hist_Ratio[15],SmartPic_clue->HMC_bin_hist_Ratio[17]);

	}

	//if((printf_Flag&_BIT12)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA4("C=%d , L1=%d ,R1= %d ,others=%d \n",center,L1,R1,others);

	}

	prepre_meanHistY = pre_meanHistY;

	pre_meanHistY = meanHistY;
	pn_flag_pre=pn_flag;
}


void scalerVIP_compute_level_I_006_SNR_Mode0(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode1 for RF CVBS SNR
{
	int level_Idx=0;
	unsigned char Lv=0;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputMAD_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_FMV_Hist_motionIdx_offset][0]);
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
        unsigned char debounce_th[3];
        static unsigned char debounce_cnt[3];
	unsigned short IphActWid_H=0,IpvActLen_V=0;


	//NOTICE it is only for interlace mode

	//unsigned int noise_relaible = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL_RELIABLE);
	//unsigned int motion = rtd_inl(DI_IM_DI_SI_FILM_MOTION_reg);
	unsigned char motionl_level;// = scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION);

        motionl_level = scalerVIP_compute_I_hmcnrlevel_Index_Ave2(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),0);

	//ROSPrintf("\n motionl_level =%d ,relaible = %d \n",motionl_level,noise_relaible);
	level_Idx = motionl_level;

	if(level_Idx < pPQA_InputMAD_TBL[0])
		Lv = 9;
	else if(level_Idx < pPQA_InputMAD_TBL[1])
		Lv = 8;
	else if(level_Idx < pPQA_InputMAD_TBL[2])
		Lv = 7;
	else if(level_Idx < pPQA_InputMAD_TBL[3])
		Lv = 6;
	else if(level_Idx < pPQA_InputMAD_TBL[4])
		Lv = 5;
	else if(level_Idx < pPQA_InputMAD_TBL[5])
		Lv = 4;
	else if(level_Idx < pPQA_InputMAD_TBL[6])
		Lv = 3;
	else if(level_Idx < pPQA_InputMAD_TBL[7])
		Lv = 2;
	else if(level_Idx < pPQA_InputMAD_TBL[8])
		Lv = 1;
	else
		Lv = 0;


	//SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0] = level_Idx;

        debounce_th[0]=10;
        debounce_th[1]=10;
        debounce_th[2]=10;

        IpvActLen_V = system_info_structure_table->I_Height;
        IphActWid_H = system_info_structure_table->I_Width;

        //if(rtd_inl(0xb802e4f0)==4)
        //        printk("\n motionl_level =%d ,Lv =%d \n",motionl_level,Lv);

        if(IpvActLen_V<=1920)
        {

                if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1)&&DynamicOptimizeSystem[177]!=1&& DynamicOptimizeSystem[225]!=1) //hpan
                {
                        debounce_cnt[0]++;

                        if(debounce_cnt[0]>=debounce_th[0])
                        {
                               debounce_cnt[0] = debounce_th[0];
                               debounce_cnt[1] = 0;
                               debounce_cnt[2] = 0;

                               PQA_Input_Level[I_006_SNR_Mode0] = 0;
                        }

                }
                else if((scalerVIP_DI_MiddleWare_MCNR_Get_V_Pan_Flag()==1)) //Vpan
                {
                        debounce_cnt[1]++;

                        if(debounce_cnt[1]>=debounce_th[1])
                        {
                               debounce_cnt[0] = 0;
                               debounce_cnt[1] = debounce_th[1];
                               debounce_cnt[2] = 0;

                               PQA_Input_Level[I_006_SNR_Mode0] = 9;
                        }


                }
                else
                {
                        debounce_cnt[2]++;

                        if(debounce_cnt[2]>=debounce_th[2])
                        {
                               debounce_cnt[0] = 0;
                               debounce_cnt[1] = 0;
                               debounce_cnt[2] = debounce_th[2];

                               PQA_Input_Level[I_006_SNR_Mode0] = g_hmcnr_mode2;
                        }



                }

                if(DynamicOptimizeSystem[226]==1)
                    PQA_Input_Level[I_006_SNR_Mode0] = 9;


        }
        else
        {
                if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1)) //hpan
                {
                        debounce_cnt[0]++;

                        if(debounce_cnt[0]>=debounce_th[0])
                        {
                               debounce_cnt[0] = debounce_th[0];
                               debounce_cnt[1] = 0;
                               debounce_cnt[2] = 0;

                               PQA_Input_Level[I_006_SNR_Mode0] = 5;

                                scalerVIP_reduce_flicker(RPC_system_info_structure_table->VIP_source,10);

                        }

                }
                else
                {
                        debounce_cnt[2]++;

                        if(debounce_cnt[2]>=debounce_th[2])
                        {
                                debounce_cnt[0] = 0;
                                debounce_cnt[1] = 0;
                                debounce_cnt[2] = debounce_th[2];

                                if(Lv>=9) //Lv9 for special setting
                                {
                                        Lv=8;
                                }

                                PQA_Input_Level[I_006_SNR_Mode0] = Lv;

                                scalerVIP_reduce_flicker(RPC_system_info_structure_table->VIP_source,Lv);

                        }

                }



        }
        PQA_Input_rate[I_006_SNR_Mode0] = 0;

}


void scalerVIP_compute_level_I_006_SNR_Mode1(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode2 for SD SNR
{
	unsigned int apl_Idx=0;
	signed char Lv=0,Apl_Lv=0;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputAPL_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_LC_1][0]);
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	static LEVEL_INFO Level_Info;
	unsigned int printf_Flag=0, print_delay=200;

	apl_Idx = SmartPic_clue->Hist_Y_Mean_Value;

	scalerVIP_Get_NR_Info(&Level_Info);


	if(apl_Idx < pPQA_InputAPL_TBL[0])
		Apl_Lv = 9;
	else if(apl_Idx < pPQA_InputAPL_TBL[1])
		Apl_Lv = 8;
	else if(apl_Idx < pPQA_InputAPL_TBL[2])
		Apl_Lv = 7;
	else if(apl_Idx < pPQA_InputAPL_TBL[3])
		Apl_Lv = 6;
	else if(apl_Idx < pPQA_InputAPL_TBL[4])
		apl_Idx = 5;
	else if(apl_Idx < pPQA_InputAPL_TBL[5])
		Apl_Lv = 4;
	else if(apl_Idx < pPQA_InputAPL_TBL[6])
		Apl_Lv = 3;
	else if(apl_Idx < pPQA_InputAPL_TBL[7])
		Apl_Lv = 2;
	else if(apl_Idx < pPQA_InputAPL_TBL[8])
		Apl_Lv = 1;
	else
		Apl_Lv = 0;

	Lv = Level_Info.Mad_lv -Level_Info.Motion_lv+Apl_Lv;
	if(Lv<0)
		Lv =0;
	if(Lv>9)
		Lv =9;


	PQA_Input_Level[I_006_SNR_Mode1] = Lv;
	PQA_Input_rate[I_006_SNR_Mode1] = 0;


	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.

	if((printf_Flag&_BIT4)!=0 && (MA_print_count%print_delay==0))
	{
		printk("\n LV=%d(%d-%d+%d), apl_Idx=%d,",Lv,Level_Info.Mad_lv,Level_Info.Motion_lv,Apl_Lv,apl_Idx);
	}




}

void scalerVIP_compute_level_I_006_SNR_Mode2(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode3 for HD SNR
{

	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned int temp = 0;
	static unsigned int pre_temp = 0;
	static unsigned int pre_RTNR_MAD_count_Y_avg = 0;
	static unsigned int pre_RTNR_MAD_count_Y2_avg = 0;
	static unsigned int pre_RTNR_MAD_count_Y3_avg = 0;

	pre_RTNR_MAD_count_Y_avg = (RTNR_MAD_count_Y_avg+pre_RTNR_MAD_count_Y_avg*3)>>2;
	pre_RTNR_MAD_count_Y2_avg = (RTNR_MAD_count_Y2_avg+pre_RTNR_MAD_count_Y2_avg*3)>>2;
	pre_RTNR_MAD_count_Y3_avg = (RTNR_MAD_count_Y3_avg+pre_RTNR_MAD_count_Y3_avg*3)>>2;

	temp = ((pre_RTNR_MAD_count_Y_avg)-((pre_RTNR_MAD_count_Y2_avg+pre_RTNR_MAD_count_Y3_avg)>>1));
	temp = temp>255?255:temp;

        if(g_IsNot4KVO){
	PQA_Input_rate[I_006_SNR_Mode2] = temp;
	pre_temp = PQA_Input_rate[I_006_SNR_Mode2];

	PQA_Input_Level[I_006_SNR_Mode2] = 0;
        }else{
                PQA_Input_rate[I_006_SNR_Mode2] = 255;
                PQA_Input_Level[I_006_SNR_Mode2] = 0;
        }

}
void scalerVIP_compute_level_I_006_SHP_Mode0(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode1 for RF CVBS RTNR
{
	signed char Lv=0,mv_lv=0,Hf_lv=0;
	int mv_index=0,step_high_freq=0,text=0;
	unsigned int printf_Flag=0, print_delay=200;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputHIGH_FREQ_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_CorrectionBit_Flame_th][0]);
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned int *pPQA_HMC_MV_w_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_HMC_MV_Hist_motionIdx_offset][0]);

	mv_index = scalerVIP_Cal_Idx_Ave_I_006_highfreq_motion(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),0);
	step_high_freq = scalerVIP_Cal_Idx_Ave_I_006_highfreq(step_count,0);

	if(mv_index <pPQA_HMC_MV_w_TBL[0])
	{
		Lv = 9;
		mv_lv = 9;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[1])
	{
		Lv = 8;
		mv_lv = 8;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[2])
	{
		Lv = 7;
		mv_lv = 7;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[3])
	{
		Lv = 6;
		mv_lv = 6;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[4])
	{
		Lv = 5;
		mv_lv = 5;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[5])
	{
		Lv = 4;
		mv_lv = 4;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[6])
	{
		Lv = 3;
		mv_lv = 3;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[7])
	{
		Lv = 2;
		mv_lv = 2;
	}
	else if(mv_index <pPQA_HMC_MV_w_TBL[8])
	{
		Lv = 1;
		mv_lv = 1;
	}
	else
	{
		Lv = 0;
		mv_lv = 0;

	}
	if(Lv >0)
	{

		if((step_high_freq >=pPQA_InputHIGH_FREQ_TBL[5])&&(pPQA_InputHIGH_FREQ_TBL[5]!=0)) //++
		{
			if((step_high_freq >pPQA_InputHIGH_FREQ_TBL[9])&&(pPQA_InputHIGH_FREQ_TBL[9]!=0))
			{
				Lv +=5;
				Lv = (Lv>9)?(9):Lv;
				Hf_lv=5;
			}
			else if((step_high_freq >pPQA_InputHIGH_FREQ_TBL[8])&&(pPQA_InputHIGH_FREQ_TBL[8]!=0))
			{
				Lv +=4;
				Lv = (Lv>9)?(9):Lv;
				Hf_lv=4;

			}
			else if((step_high_freq >pPQA_InputHIGH_FREQ_TBL[7])&&(pPQA_InputHIGH_FREQ_TBL[7]!=0))
			{
				Lv +=3;
				Lv = (Lv>9)?(9):Lv;
				Hf_lv=3;

			}
			else if((step_high_freq >pPQA_InputHIGH_FREQ_TBL[6])&&(pPQA_InputHIGH_FREQ_TBL[6]!=0))
			{
				Lv +=2;
				Lv = (Lv>9)?(9):Lv;
				Hf_lv=2;

			}
			else if((step_high_freq >=pPQA_InputHIGH_FREQ_TBL[5])&&(pPQA_InputHIGH_FREQ_TBL[5]!=0))
			{
				Lv +=1;
				Lv = (Lv>9)?(9):Lv;
				Hf_lv=1;

			}


		}
		else // < 5 --
		{

			if((step_high_freq <pPQA_InputHIGH_FREQ_TBL[0])&&(pPQA_InputHIGH_FREQ_TBL[0]!=0))
			{
				Lv = (Lv>6)?(Lv-6):0;
				Hf_lv=-6;
			}
			else if((step_high_freq <pPQA_InputHIGH_FREQ_TBL[1])&&(pPQA_InputHIGH_FREQ_TBL[1]!=0))
			{
				Lv = (Lv>5)?(Lv-5):0;
				Hf_lv=-5;
			}
			else if((step_high_freq <pPQA_InputHIGH_FREQ_TBL[2])&&(pPQA_InputHIGH_FREQ_TBL[2]!=0))
			{
				Lv = (Lv>4)?(Lv-4):0;
				Hf_lv=-4;

			}
			else if((step_high_freq <pPQA_InputHIGH_FREQ_TBL[3])&&(pPQA_InputHIGH_FREQ_TBL[3]!=0))
			{
				Lv = (Lv>3)?(Lv-3):0;
				Hf_lv=-3;

			}
			else if((step_high_freq <pPQA_InputHIGH_FREQ_TBL[4])&&(pPQA_InputHIGH_FREQ_TBL[4]!=0))
			{
				Lv = (Lv>2)?(Lv-2):0;
				Hf_lv=-2;

			}
			else if((step_high_freq <pPQA_InputHIGH_FREQ_TBL[5])&&(pPQA_InputHIGH_FREQ_TBL[5]!=0))
			{

				Lv = (Lv>1)?(Lv-1):0;
				Hf_lv=-1;


			}



		}

	}


	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_0] = Lv;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_1] = step_high_freq;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_2] = mv_index;


	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.



	/*if((printf_Flag&_BIT6)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf("\n LV=%d(%d+%d),step_high_freq =%d,mv_index=%d ",Lv,Hf_lv,mv_lv,step_high_freq,mv_index);
	}*/

	text=scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio();

	//if((printf_Flag&_BIT6)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA1("\n LV=%d(%d+%d), mv_index=%d,text=%d,step_high_freq=%d ",Lv,mv_lv,Hf_lv,mv_index,text,step_high_freq);
	}

	PQA_Input_Level[I_006_SHP_Mode0] = Lv;
	PQA_Input_rate[I_006_SHP_Mode0] = 0;

}
void scalerVIP_compute_level_I_006_SHP_Mode1(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) //
{
	signed char Lv=0,dl_lv=0;
	int detail_index=0;
	unsigned int printf_Flag=0, print_delay=200;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputDetail_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_LC_0][0]);
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];



	detail_index = scalerVIP_Cal_Idx_Ave_I_001_detail(scalerVIP_color_noise_mpeg_h_detect__y3_for_other_ip,0);

	if(detail_index <pPQA_InputDetail_TBL[0])
	{
		Lv = 9;
		dl_lv = 9;
	}
	else if(detail_index <pPQA_InputDetail_TBL[1])
	{
		Lv = 8;
		dl_lv = 8;
	}
	else if(detail_index <pPQA_InputDetail_TBL[2])
	{
		Lv = 7;
		dl_lv = 7;
	}
	else if(detail_index <pPQA_InputDetail_TBL[3])
	{
		Lv = 6;
		dl_lv = 6;
	}
	else if(detail_index <pPQA_InputDetail_TBL[4])
	{
		Lv = 5;
		dl_lv = 5;
	}
	else if(detail_index <pPQA_InputDetail_TBL[5])
	{
		Lv = 4;
		dl_lv = 4;
	}
	else if(detail_index <pPQA_InputDetail_TBL[6])
	{
		Lv = 3;
		dl_lv = 3;
	}
	else if(detail_index <pPQA_InputDetail_TBL[7])
	{
		Lv = 2;
		dl_lv = 2;
	}
	else if(detail_index <pPQA_InputDetail_TBL[8])
	{
		Lv = 1;
		dl_lv = 1;
	}
	else
	{
		Lv=0;
		dl_lv = 0;

	}


	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.



	//if((printf_Flag&_BIT5)!=0 && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA1("\n detail LV=%d , detail_index=%d ",Lv,detail_index);
	}

	PQA_Input_Level[I_006_SHP_Mode1] = Lv;
	PQA_Input_rate[I_006_SHP_Mode1] = 0;

}

unsigned int scalerVIP_Cal_Idx_Ave_I_006_Dynamic_SHP(unsigned int lv_index, unsigned char isAll_Flag)
{
	#define windowSize1 64
	#define windowSizeBit1 6

	static unsigned char idx=0;
	static unsigned int levelIdx_arr[windowSize1]={0};

	unsigned char i=0;
	unsigned int sum= 0, ret =0 ;

	if(isAll_Flag==1)
	{
		for(i=0;i<windowSize1;i++)
			levelIdx_arr[i] = lv_index;
		ret = lv_index;
	}
	else
	{
		levelIdx_arr[idx] = lv_index;

		for(i=0;i<windowSize1;i++)
			sum = sum + levelIdx_arr[i];
		ret = sum>>windowSizeBit1;

		idx++;
		if(idx==windowSize1)
			idx=0;
	}
	return ret;
}

void scalerVIP_compute_level_I_006_SHP_Mode2(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode2 for HD SNR
{
	unsigned int level_Idx=0, printf_Flag=0, print_delay=200;
	unsigned char Lv=0;
	//unsigned char i;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_InputMAD_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_SHP_MAD][0]);
	//unsigned int *pPQA_Input_HistMeanY_Dark_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_DCC_Histogram_mean_dark][0]);
	//unsigned int *pPQA_Input_HistMeanY_Dark_Gain_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_DCC_Histogram_mean_dark_gain][0]);
	unsigned int tmp;

	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned int motioni[10]={0};

	unsigned short Lv_intp=0;//, sr_d;
	unsigned int motion = rtd_inl(DI_IM_DI_SI_FILM_MOTION_reg);

	Lv_intp=0;


	motioni[0] = motion;

	// for moving bamboo women, and moving building, more coring effect.
	if( (DynamicOptimizeSystem[198]==1) || (DynamicOptimizeSystem[199]==1) )
		motion = pPQA_InputMAD_TBL[PQA_I_L09];

	//	for change smoothly
	if(motion>pPQA_InputMAD_TBL[PQA_I_L09])
		motion = pPQA_InputMAD_TBL[PQA_I_L09];
	level_Idx = scalerVIP_Cal_Idx_Ave_I_006_Dynamic_SHP(motion, 0);

	if(level_Idx <= pPQA_InputMAD_TBL[0])
		Lv = 9;
	else if(level_Idx <= pPQA_InputMAD_TBL[1])
		Lv = 8;
	else if(level_Idx <= pPQA_InputMAD_TBL[2])
		Lv = 7;
	else if(level_Idx <= pPQA_InputMAD_TBL[3])
		Lv = 6;
	else if(level_Idx <= pPQA_InputMAD_TBL[4])
		Lv = 5;
	else if(level_Idx <= pPQA_InputMAD_TBL[5])
		Lv = 4;
	else if(level_Idx <= pPQA_InputMAD_TBL[6])
		Lv = 3;
	else if(level_Idx <= pPQA_InputMAD_TBL[7])
		Lv = 2;
	else if(level_Idx <= pPQA_InputMAD_TBL[8])
		Lv = 1;
	else
		Lv=0;

	if(Lv==9)
		Lv_intp =0;
	else
	{
		if(level_Idx>pPQA_InputMAD_TBL[PQA_I_L09])
			level_Idx = pPQA_InputMAD_TBL[PQA_I_L09];
		tmp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1])==0)?1:(pPQA_InputMAD_TBL[PQA_I_L09-Lv]-pPQA_InputMAD_TBL[PQA_I_L09-Lv-1]);
		Lv_intp = ((pPQA_InputMAD_TBL[PQA_I_L09-Lv]-level_Idx)<<8) / tmp;
	}

	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_8] = level_Idx;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_Level_Idx_9] = motion;

	PQA_Input_Level[I_006_SHP_Mode2] = Lv;
	PQA_Input_rate[I_006_SHP_Mode2] = Lv_intp;

	printf_Flag = system_info_structure_table->ISR_Printf_Flag.Flag0;
	print_delay = system_info_structure_table->ISR_Printf_Flag.Delay_Time;
	//for debug.
	//if((printf_Flag==1) && (MA_print_count%print_delay==0))
	{
		ROSPrintf_INFO_PQA1("sh2~lv=%d,LvI=%d,mo=%d,int=%d\n",
			Lv, level_Idx, motion, Lv_intp);
		//ROSPrintf("mo_i=");
		//for(i=0;i<10;i++)
			//ROSPrintf("%d,",motioni[i]);
		//ROSPrintf("\n");
	}
}

//vvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvv

//vvvvvvvvvvvvvvvvvvvvvvv simple mode vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv simple mode vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv simple mode vvv
void scalerVIP_compute_level_I_SPM_LV_CTRL0(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table) // TV006 mode2 for HD SNR
{
	//unsigned int printf_Flag=0, print_delay=200;

	unsigned int current_Signal_Status, MAD_still_idx, FMV_still_idx, MAD_noise_index, wei_sum;
	unsigned char meanHistY, FMV_C, VD_Lv, MAD_Noise_Lv, MAD_Still_Lv, FMV_Still_Lv, Hist_Mean_Y_Lv, i, Lv;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_Input_SPM_VD_status_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_SPM_VD_status][0]);
	unsigned int *pPQA_Input_SPM_MAD_Noise_Index_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_SPM_MAD_Noise_Index][0]);
	unsigned int *pPQA_Input_SPM_MAD_Still_Index_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_SPM_MAD_Still_Index][0]);
	unsigned int *pPQA_Input_SPM_FMV_Still_Index_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_SPM_FMV_Still_Index][0]);
	unsigned int *pPQA_Input_Hist_Mean_Y_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_SPM_Hist_Mean_Y][0]);

	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	//unsigned char *PQA_RunFlag = &(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Run_Flag[0]);

	unsigned int  VD_status_w = pPQA_Input_SPM_VD_status_TBL[PQA_I_L09];
	unsigned int  MAD_Noise_w = pPQA_Input_SPM_MAD_Noise_Index_TBL[PQA_I_L09];
	unsigned int  MAD_Still_w = pPQA_Input_SPM_MAD_Still_Index_TBL[PQA_I_L09];
	unsigned int  FMV_Still_w = pPQA_Input_SPM_FMV_Still_Index_TBL[PQA_I_L09];
	unsigned int  Hist_Mean_Y_w = pPQA_Input_Hist_Mean_Y_TBL[PQA_I_L09];

	Lv = 0;

	/* I_SPM_VD_status */
	current_Signal_Status = SmartPic_clue->VD_Signal_Status_value_avg;
	VD_Lv = PQA_I_L09;
	if (VD_status_w != 0) {
		for (i=0;i<PQA_I_L09;i++)
			if (current_Signal_Status < pPQA_Input_SPM_VD_status_TBL[i]) {
				VD_Lv = i;
				break;
			}
	}

	/* I_SPM_MAD_Noise_Index */
	MAD_noise_index = SmartPic_clue->RTNR_MAD_count_Y2_avg_ratio;
	MAD_Noise_Lv = PQA_I_L09;
	if (MAD_Noise_w != 0) {
		for (i=0;i<PQA_I_L09;i++)
			if (MAD_noise_index < pPQA_Input_SPM_MAD_Noise_Index_TBL[i]) {
				MAD_Noise_Lv = i;
				break;
			}
	}

	/* I_SPM_MAD_Still_Index */
	MAD_still_idx = (SmartPic_clue->RTNR_MAD_count_Y4_avg_ratio>1000)?(1000):(SmartPic_clue->RTNR_MAD_count_Y4_avg_ratio);
	MAD_still_idx = 1000 - MAD_still_idx;
	MAD_Still_Lv = PQA_I_L09;
	if (MAD_Still_w != 0) {
		for (i=0;i<PQA_I_L09;i++)
			if (MAD_still_idx < pPQA_Input_SPM_MAD_Still_Index_TBL[i]) {
				MAD_Still_Lv = i;
				break;
			}
	}

	/* I_SPM_FMV_Still_Index */
	if (SmartPic_clue->GMV == 3) {
		FMV_C = FMV_Hist_Bin_Num >> 1;
		FMV_still_idx = (SmartPic_clue->FMV_hist_Ratio[FMV_C] * 10) + (SmartPic_clue->FMV_hist_Ratio[FMV_C-1] * 3) + (SmartPic_clue->FMV_hist_Ratio[FMV_C+1] * 3);
		FMV_still_idx = FMV_still_idx >>4;
	} else {
		FMV_still_idx = 0;
	}
	FMV_Still_Lv = PQA_I_L09;
	if (FMV_Still_w != 0) {
		for (i=0;i<PQA_I_L09;i++)
			if (FMV_still_idx < pPQA_Input_SPM_FMV_Still_Index_TBL[i]) {
				FMV_Still_Lv = i;
				break;
			}
	}

	/* I_SPM_Hist_Mean_Y */
	meanHistY = SmartPic_clue->Hist_Y_Mean_Value;
	Hist_Mean_Y_Lv = PQA_I_L09;
	if (Hist_Mean_Y_w != 0) {
		for (i=0;i<PQA_I_L09;i++)
			if (meanHistY < pPQA_Input_Hist_Mean_Y_TBL[i]) {
				Hist_Mean_Y_Lv = i;
				break;
			}
	}

	/* cal final lv by weighting */
	wei_sum = VD_status_w + MAD_Noise_w + MAD_Still_w + FMV_Still_w + Hist_Mean_Y_w;
	if(wei_sum!=0){
		Lv = ((VD_status_w * VD_Lv) + (MAD_Noise_w * MAD_Noise_Lv) + (MAD_Still_w * MAD_Still_Lv) + (FMV_Still_w * FMV_Still_Lv) + (Hist_Mean_Y_w * Hist_Mean_Y_Lv)) / wei_sum;
		PQA_Input_Level[I_SPM_LV_CTRL0] = Lv;
		PQA_Input_rate[I_SPM_LV_CTRL0] = 0;
	}

	/* info recording*/
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_SPM_LvIdx_VD] = current_Signal_Status;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_SPM_LvIdx_MAD_Noise] = MAD_noise_index;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_SPM_LvIdx_MAD_Still] = MAD_still_idx;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_SPM_LvIdx_FMV_Still] = FMV_still_idx;
	SmartPic_clue->PQA_ISR_Cal_Info.Level_Index[PQA_SPM_LvIdx_Y] = meanHistY;

#if 1
	//for debug.
	//if(((printf_Flag&_BIT0)!=0))
	{
		//if(MA_print_count%print_delay==0)
		{
			ROSPrintf_PQA_SPM("Cal_SPM, current_Signal_Status=%d, MAD_noise_index=%d, MAD_still_idx=%d, FMV_still_idx=%d, meanHistY=%d\n",
				current_Signal_Status, MAD_noise_index, MAD_still_idx, FMV_still_idx, meanHistY);
			ROSPrintf_PQA_SPM("Cal_SPM, VD_status_w=%d, MAD_Noise_w=%d, MAD_Still_w=%d, FMV_Still_w=%d, Hist_Mean_Y_w=%d\n",
				VD_status_w, MAD_Noise_w, MAD_Still_w, FMV_Still_w, Hist_Mean_Y_w);
			ROSPrintf_PQA_SPM("Cal_SPM, VD_Lv=%d, MAD_Noise_Lv=%d, MAD_Still_Lv=%d, FMV_Still_Lv=%d, Hist_Mean_Y_Lv=%d, Lv=%d\n",
				VD_Lv, MAD_Noise_Lv, MAD_Still_Lv, FMV_Still_Lv, Hist_Mean_Y_Lv, Lv);
		}
	}
#endif

}
//vvvvvvvvvvvvvvvvvvvvvvv simple mode vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv simple mode vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv simple mode vvv

//vvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive
void scalerVIP_compute_level_I_BITRate(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table, _RPC_clues* RPC_SmartPic_clue)
{

	int decode_bit_rate = Scaler_ChangeUINT32Endian(RPC_SmartPic_clue->VCPU_setting_info.decode_bit_rate);
	int inputplugin_bit_rate = Scaler_ChangeUINT32Endian(RPC_SmartPic_clue->VCPU_setting_info.inputplugin_bit_rate);
	//unsigned int printf_Flag=0, print_delay=200;
	int level_Idx=0;
	unsigned char Lv=0, int_rate=0;
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int *pPQA_BitRate_TBL = &(vipTable_shareMem->PQA_Input_Table[PQA_table_select][I_BitRate_th][0]);
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned char *PQA_RunFlag = &(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Run_Flag[0]);
	unsigned char *PQA_Input_Item_Check_Flag = &(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[0]);
	int bit_rate_level;
	unsigned char En_Flag;

	if(((decode_bit_rate==0) && (inputplugin_bit_rate==0)) || (PQA_Input_Item_Check_Flag[I_BitRate_Crtl] != 1) || (system_info_structure_table->Input_src_Type != _SRC_VO)) {
		Lv = 255;
		int_rate = 0;
		En_Flag = 0;
	} else {
		if (inputplugin_bit_rate == 0) {
			bit_rate_level = decode_bit_rate;
		} else {
			bit_rate_level = inputplugin_bit_rate;
		}

		level_Idx = bit_rate_level;

		if(level_Idx < pPQA_BitRate_TBL[0])
			Lv = 0;
		else if(level_Idx < pPQA_BitRate_TBL[1])
			Lv = 1;
		else if(level_Idx < pPQA_BitRate_TBL[2])
			Lv = 2;
		else if(level_Idx < pPQA_BitRate_TBL[3])
			Lv = 3;
		else if(level_Idx < pPQA_BitRate_TBL[4])
			Lv = 4;
		else if(level_Idx < pPQA_BitRate_TBL[5])
			Lv = 5;
		else if(level_Idx < pPQA_BitRate_TBL[6])
			Lv = 6;
		else if(level_Idx < pPQA_BitRate_TBL[7])
			Lv = 7;
		else if(level_Idx < pPQA_BitRate_TBL[8])
			Lv = 8;
		else
			Lv = 9;

		int_rate = 0;
		En_Flag = 1;
	}

	PQA_Input_Level[I_BitRate_Crtl] = Lv;
	PQA_Input_rate[I_BitRate_Crtl] = int_rate;
	PQA_RunFlag[I_BITRATE] = En_Flag;

	ROSPrintf_BitRate_Ctrl("[BitRate] De_BitRate=%d, input_bit_rate=%d,PQA Bit rate Lv=%d\n",
		decode_bit_rate, inputplugin_bit_rate, PQA_Input_Level[I_BitRate_Crtl]);

}
//vvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive

//=====================================================================================================================

void scalerVIP_PQA_level_Ctrl(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table)
{
	unsigned char i;

	for(i=0;i<PQA_INPUT_TYPE_MAX;i++)
	{
		if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Flow_Ctrl_Input_Type_setFlag[i]==1)
			system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Run_Flag[i] = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Flow_Ctrl_Input_Type[i];
	}

	for(i=0;i<PQA_INPUT_ITEM_MAX;i++)
	{
		if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Flow_Ctrl_Input_Item_setFlag[i]==1)
		{
			SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[i] = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Flow_Ctrl_Input_Item[i];
			SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[i] = 0;
		}
	}

#if 0
	if(MA_print_count%20==0)
	{
		for(i=0;i<PQA_INPUT_TYPE_MAX;i++)
			ROSPrintf("%d,", system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Run_Flag[i]);
		ROSPrintf("\n");
		for(i=0;i<PQA_INPUT_TYPE_MAX;i++)
			ROSPrintf("%d,", system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Flow_Ctrl_Input_Type[i]);
		ROSPrintf("\n");
	}
#endif
}

void scalerVIP_compute_PQA_level(SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table, _RPC_clues* RPC_SmartPic_clue)
{
	unsigned int *pPQA_InputTable = &(vipTable_shareMem->PQA_Input_Table[0][0][0]);
	unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
	unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];
	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;

//vvvvvvvvvvvvvvvvvvvvvvvTV_005_stylevvvvvvvvvvvvvvvvvvvvvvv
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_005_RFCVBS]==1)
	scalerVIP_compute_level_I_005_RFCVBS_DNR(PQA_table_select, pPQA_InputTable, PQA_Input_Level, PQA_Input_rate);

	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_005_SDHD]==1)
	scalerVIP_compute_level_I_005_SDHD_DNR(PQA_table_select, pPQA_InputTable, PQA_Input_Level, PQA_Input_rate);
//^^^^^^^^^^^^^^^^^^TV_005_style^^^^^^^^^^^^^^^^^^
	//if((system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_MOTION_RTNR]==1)||
	//(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_MOTION_SPNR]==1))
	//scalerVIP_RTNR_level_compute((SmartPic_clue->MAD_motion_status), (SmartPic_clue->block_motion_status), PQA_Input_Level, PQA_Input_rate);

//vvvvvvvvvvvvvvvvvvvvvvvTV_002_stylevvvvvvvvvvvvvvvvvvvvvvv
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_002_RTNR_2]==1)
	{
		//scalerVIP_compute_level_I_002_RTNR2(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV002 mode2 for HD RTNR
		//scalerVIP_compute_level_I_002_CorrectionBit(vipTable_shareMem, SmartPic_clue, system_info_structure_table);
		Scaler_scalerVIP_compute_level_I_002_RTNR2_tv002(vipTable_shareMem, SmartPic_clue, system_info_structure_table, MA_print_count);
	}
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_002_RTNR_0]==1)
		Scaler_scalerVIP_compute_level_I_002_RTNR0_tv002(vipTable_shareMem, SmartPic_clue, system_info_structure_table, MA_print_count);
//^^^^^^^^^^^^^^^^^^TV_002_style^^^^^^^^^^^^^^^^^^

//vvvvvvvvvvvvvvvvvvvvvvvTV_003_stylevvvvvvvvvvvvvvvvvvvvvvv
	if((system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_003_RTNR_TH1]==1)||
	(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_003_RTNR_TH2]==1)||
	(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_003_RTNR_TH3]==1)||
	(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_003_RTNR_TH4]==1)||
	(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_003_RTNR_TH5]==1)||
	(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_003_RTNR_TH6]==1)||
	(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_003_RTNR_TH7]==1))
	{
	scalerVIP_TV003_MAD_Y(PQA_Input_Level, PQA_Input_rate);
	}

//^^^^^^^^^^^^^^^^^^TV_003_style^^^^^^^^^^^^^^^^^^

//=====================================================================================================================
//vvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvv
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_RTNR_Mode0]==1)
		scalerVIP_compute_level_I_006_RTNR_Mode0(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode0 for RF CVBS RTNR
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_RTNR_Mode1]==1)
		scalerVIP_compute_level_I_006_RTNR_Mode1(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode1 for SD RTNR
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_RTNR_Mode2]==1)
		scalerVIP_compute_level_I_006_RTNR_Mode2(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode2 for HD RTNR
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_RTNR_Mode4]==1)
		scalerVIP_compute_level_I_006_RTNR_Mode4(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode4  for Progressive mode RTNR

	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_RTNR_Mode2_HMCNR]==1)
		scalerVIP_compute_level_I_006_RTNR_Mode2_HMCNR(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode2 for HD hmcnr



	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_SNR_Mode0]==1)
		scalerVIP_compute_level_I_006_SNR_Mode0(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode0 for RF CVBS SNR
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_SNR_Mode1]==1)
		scalerVIP_compute_level_I_006_SNR_Mode1(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode1 for SD SNR
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_SNR_Mode2]==1)
		scalerVIP_compute_level_I_006_SNR_Mode2(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode2 for HD SNR
	//dynamic shp
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_SHP_Mode0]==1)
		scalerVIP_compute_level_I_006_SHP_Mode0(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode0 for NTSC SHP
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_SHP_Mode1]==1)
		scalerVIP_compute_level_I_006_SHP_Mode1(vipTable_shareMem, SmartPic_clue, system_info_structure_table);
	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_006_SHP_Mode2]==1)
		scalerVIP_compute_level_I_006_SHP_Mode2(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode2 for HD SNR


//vvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvTV_006_stylevvv

//vvvvvvvvvvvvvvvvvvvvvvv simple mode vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv simple mode vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv simple mode vvv

	if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_Input_Item_Check_Flag[I_SPM_LV_CTRL0]==1)
		scalerVIP_compute_level_I_SPM_LV_CTRL0(vipTable_shareMem, SmartPic_clue, system_info_structure_table); // TV006 mode2 for HD SNR

//vvvvvvvvvvvvvvvvvvvvvvv simple mode vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv simple mode vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv simple mode vvv

//vvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive
	// always check bit rate
	scalerVIP_compute_level_I_BITRate(vipTable_shareMem, SmartPic_clue, system_info_structure_table, RPC_SmartPic_clue);
//vvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Bit_rate_adaptive

//=====================================================================================================================
}
#if 0
void scalerVIP_PQ_Adaptive_offset_temp(unsigned char src, unsigned char index)
{
	if(!PQA_TABLE)
	{
		ROSPrintf("PQ data ERROR, PQA_TABLE is NULL!!\n");
		return;
	}
	unsigned short PQA_ITEM_count;
	unsigned int PQA_row, NR_Table = ((src*PQA_MODE_MAX*PQA_ITEM_MAX*PQA_LEVEL_MAX) + (PQA_MODE_OFFSET*PQA_ITEM_MAX*PQA_LEVEL_MAX));

	unsigned int PQA_Reg;
	unsigned char PQA_Bitup, PQA_Bitlow, PQA_Input_type;

	for(PQA_ITEM_count = 0; PQA_ITEM_count < PQA_ITEM_MAX; PQA_ITEM_count++)
	{
		//=======================================================================
		PQA_row = NR_Table + (PQA_ITEM_count*PQA_LEVEL_MAX);


		//=======================================================================
		PQA_Reg = *(PQA_TABLE+PQA_row+PQA_reg);
		PQA_Bitup = *(PQA_TABLE+PQA_row+PQA_bitup);
		PQA_Bitlow = *(PQA_TABLE+PQA_row+PQA_bitlow);
		PQA_Input_type = *(PQA_TABLE+PQA_row+PQA_input_type);

		//=======================================================================
		if(PQA_Reg == 0xffffffff || PQA_ITEM_count >= PQA_ITEM_MAX)						//Data Finish
			break;

		if(index == PQA_Input_type)
		{
			PQA_TABLE_OFFSET_TEMP[PQA_ITEM_count] = (rtd_inl(PQA_Reg) >> PQA_Bitlow) & andMASK_Table2[(PQA_Bitup-PQA_Bitlow+1)];	//data
		}

	}
}
#endif
void scalerVIP_PQ_Adaptive_Table(unsigned char mode, SLR_VIP_TABLE* vipTable_shareMem, _clues* SmartPic_clue, _system_setting_info* system_info_structure_table)
{
	unsigned short PQA_ITEM_count, PQA_ITEM_count_offset;
	unsigned int PQA_row, PQA_row_offset;

	unsigned int PQA_Reg, PQA_Reg_offset, and_reg, offset_value;
	unsigned char PQA_Bitup, PQA_Bitup_offset, PQA_Bitlow, PQA_Bitlow_offset, PQA_Input_type, PQA_Input_type_offset, PQA_Input_item, PQA_Input_item_offset;
	unsigned int Level_low, Level_high, value = 0;

	unsigned int *g_PQA_Table = &(vipTable_shareMem->PQA_Table[0][0][0][0]);
	unsigned short *PQA_Input_Level = &(SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0]);
	unsigned short *PQA_Input_rate = &(SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0]);
	unsigned int *PQA_TABLE_OFFSET_TEMP = &(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.OFFSET_TEMP[0]);

	unsigned char PQA_table_select = system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.PQA_table_select;
	unsigned int NR_Table = ((PQA_table_select*PQA_MODE_MAX*PQA_ITEM_MAX*PQA_LEVEL_MAX) + (mode*PQA_ITEM_MAX*PQA_LEVEL_MAX));

	unsigned char i=0;
	unsigned char idx_tmp=0;

	if(g_PQA_Table == NULL ||
		PQA_TABLE_OFFSET_TEMP == NULL ||
		PQA_Input_Level == NULL ||
		PQA_Input_rate == NULL)
	{
		if(MA_print_count%360==0)
			ROSPrintf("PQ data ERROR, PQA_TABLE is NULL!!\n");
		return;
	}

	// tool ctrl for input item and input type
	scalerVIP_PQA_level_Ctrl(vipTable_shareMem,  SmartPic_clue,  system_info_structure_table);

	// sort tmp ini
	for(i=0;i<PQA_ITEM_MAX;i++)
		PQA_Sort_Tmp[0][i] = 0xffffffff;

	for(PQA_ITEM_count = 0; PQA_ITEM_count < PQA_ITEM_MAX; PQA_ITEM_count++)
	{
		//=======================================================================
		PQA_row = NR_Table + (PQA_ITEM_count*PQA_LEVEL_MAX);

		//=======================================================================
		PQA_Reg = *(g_PQA_Table+PQA_row+PQA_reg);
		PQA_Bitup = *(g_PQA_Table+PQA_row+PQA_bitup);
		PQA_Bitlow = *(g_PQA_Table+PQA_row+PQA_bitlow);
		PQA_Input_type = *(g_PQA_Table+PQA_row+PQA_input_type);
		PQA_Input_item = *(g_PQA_Table+PQA_row+PQA_input_item);

		//=======================================================================
		if(PQA_Reg == 0xffffffff || PQA_ITEM_count >= PQA_ITEM_MAX)						//Data Finish
			break;

//		if(PQA_RUN[PQA_Input_type] == 0)														//continue this data
		if(system_info_structure_table->PQ_Setting_Info.PQA_Setting_INFO.Run_Flag[PQA_Input_type] == 0 || !scalerVIP_CheckRegisterAccessProtect(PQA_Reg))														//continue this data
			continue;

		//=======================================================================

		//=======================================================================
		for(i=0;i<PQA_ITEM_MAX;i++)
		{
			if(PQA_Reg == PQA_Sort_Tmp [0][i])
			{
				idx_tmp = i;
				break;
			}
			else if(PQA_Sort_Tmp [0][i] == 0xffffffff && ( PQA_Reg >= 0xb8000000 && PQA_Reg <= 0xb8ffffff ))
			{
				PQA_Sort_Tmp[0][i]=PQA_Reg ;
                if(( PQA_Sort_Tmp[0][i] >= 0xb8019000 ) && ( PQA_Sort_Tmp[0][i] <= 0xb8019ffc) )
                {
                    PQA_Sort_Tmp[1][i]=VDPQ_rtd_inl(PQA_Reg) ;
                }
                else
                {
				PQA_Sort_Tmp[1][i]=rtd_inl(PQA_Reg) ;
                }
				idx_tmp = i;
				break;
			}
		}

		//=======================================================================

		// set rtnrC running flag for scalerVideo.c "void LG_XCRemove_by_RTNR_C(unsigned char format, unsigned char MA_motion)", elieli
		scalerVIP_PQA_TBL_ContentCheck(PQA_Reg, &(SmartPic_clue->PQA_ISR_Cal_Info.ContentCheck_Flag[0]));

		if(PQA_Input_Level[PQA_Input_item] < 9)
		{
			Level_low = *(g_PQA_Table+PQA_row+PQA_L00+PQA_Input_Level[PQA_Input_item]);
			Level_high = *(g_PQA_Table+PQA_row+PQA_L00+PQA_Input_Level[PQA_Input_item]+1);
			value = (((Level_high - Level_low)*PQA_Input_rate[PQA_Input_item])>>8) + Level_low;
		}
		else
			value = *(g_PQA_Table+PQA_row+PQA_L09);

		if(mode == PQA_MODE_WRITE)		//WRITE + OFFSET
		{
			for(PQA_ITEM_count_offset = 0; PQA_ITEM_count_offset < PQA_ITEM_MAX; PQA_ITEM_count_offset++)
			{
				//=======================================================================
				PQA_row_offset = ((PQA_table_select*PQA_MODE_MAX*PQA_ITEM_MAX*PQA_LEVEL_MAX) + (PQA_MODE_OFFSET*PQA_ITEM_MAX*PQA_LEVEL_MAX)) + (PQA_ITEM_count_offset*PQA_LEVEL_MAX);

				//=======================================================================
				PQA_Reg_offset = *(g_PQA_Table+PQA_row_offset+PQA_reg);
				PQA_Bitup_offset = *(g_PQA_Table+PQA_row_offset+PQA_bitup);
				PQA_Bitlow_offset = *(g_PQA_Table+PQA_row_offset+PQA_bitlow);
				PQA_Input_type_offset = *(g_PQA_Table+PQA_row_offset+PQA_input_type);
				PQA_Input_item_offset = *(g_PQA_Table+PQA_row_offset+PQA_input_item);
				//=======================================================================
				if(PQA_Reg_offset == 0xffffffff || PQA_ITEM_count_offset >= PQA_ITEM_MAX)						//Data Finish
					break;

				if((PQA_Reg == PQA_Reg_offset)&&(PQA_Bitup == PQA_Bitup_offset)&&(PQA_Bitlow == PQA_Bitlow_offset)&&(PQA_Input_type==PQA_Input_type_offset))
				{
					PQA_TABLE_OFFSET_TEMP[PQA_ITEM_count_offset] = value;
					break;
				}
			}
		}

		if(mode == PQA_MODE_OFFSET)															//offset function
		{
			value = (value + PQA_TABLE_OFFSET_TEMP[PQA_ITEM_count]);
			if(value >  andMASK_Table2[31])								//if sub < 0
				value = 0;
			else if(value >  andMASK_Table2[(PQA_Bitup-PQA_Bitlow+1)])		//if > bit num
				value = andMASK_Table2[(PQA_Bitup-PQA_Bitlow+1)];
		}

		if(value > (1<<(PQA_Bitup-PQA_Bitlow)))												//max value
			value = value & andMASK_Table2[(PQA_Bitup-PQA_Bitlow+1)];

		//=======================================================================
		offset_value = value<<PQA_Bitlow;													//Read Level
		and_reg = ((andMASK_Table1[(PQA_Bitup-PQA_Bitlow)]<<PQA_Bitlow)+andMASK_Table2[PQA_Bitlow]);

		//=======================================================================

		// write to tmp buffer
		PQA_Sort_Tmp[1][idx_tmp] = ((PQA_Sort_Tmp[1][idx_tmp] & (and_reg)) | (offset_value));

		//rtdf_maskl(PQA_Reg, and_reg, offset_value);								//Write Data
		//if (scalerVIP_CheckRegisterAccessProtect(PQA_Reg))
			//rtd_outl(PQA_Reg, ((rtd_inl(PQA_Reg) & (and_reg)) | (offset_value)));

	}

	for(i=0;i<PQA_ITEM_MAX;i++)
	{
		if(PQA_Sort_Tmp[0][i]==0xffffffff)
			break;
		if( ( PQA_Sort_Tmp[0][i] >= 0xb8019000 ) && ( PQA_Sort_Tmp[0][i] <= 0xb8019ffc ) ) { /*AVD flag change and protection*/
			VDPQ_rtd_outl(PQA_Sort_Tmp[0][i], PQA_Sort_Tmp[1][i]);
		} else {
			rtd_outl(PQA_Sort_Tmp[0][i], PQA_Sort_Tmp[1][i]);
		}
	}
}

void scalerVIP_Reset_PQA_TBL_ContentCheck_Flag(unsigned char* ContentCheck_Flag)
{
	unsigned char i;
	for(i=0;i<PQA_CC_MAX;i++)
		ContentCheck_Flag[i] = 0;
}

void scalerVIP_PQA_TBL_ContentCheck(unsigned int PQA_Reg, unsigned char* ContentCheck_Flag)
{
	switch (PQA_Reg)
	{
		case DI_IM_DI_RTNR_C_TH0_TH3_reg:
			ContentCheck_Flag[PQA_CC_RTNR_C_TH]=1;
			break;
		case DI_IM_DI_RTNR_C_TH4_TH6_reg:
			ContentCheck_Flag[PQA_CC_RTNR_C_TH]=1;
			break;
		case DI_IM_DI_RTNR_C_K_reg:
			ContentCheck_Flag[PQA_CC_RTNR_C_K]=1;
			break;
		default:
			break;
	}
}


#if 0
void scalerVIP_RTNR_set_sharpness(int level, int SC)
{

		static unsigned char level_out;
		_clues *SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();

		if(SmartPic_clue == NULL)
		{
			if(MA_print_count%360==0)
				ROSPrintf("==SmartPic_clue 0,scalerVIP_RTNR_set_sharpness=\n");
			return;
		}
		unsigned short *PQA_Input_Level = &SmartPic_clue->PQA_ISR_Cal_Info.Input_Level[0];
		unsigned short *PQA_Input_rate = &SmartPic_clue->PQA_ISR_Cal_Info.Input_rate[0];

		if(MA_print_count%frame_print==0&&SST_debug)
		{
		ROSPrintf("Set Mpeg sharpness input level= %d \n",level);


		}

		level=level>9?9:level;
		level=level<0?0:level;
		level*=100;

		if(SC)// scene change
		{

			level_out = level;

		}
	else
		{
			level_out = ((level_out*(16-blend_ratio) + level*blend_ratio))/(16);

		}
		level_out/=100;
		PQA_Input_Level[I_MPEG_SHARP] = level_out;
		PQA_Input_rate[I_MPEG_SHARP] =0;

			//write table to register
	if(MA_print_count%frame_print==0&&SST_debug)
		{
		ROSPrintf("Set Mpeg sharpness level= %d \n",level_out);


		}


}
#endif


#if 0
#define table_num 10
#define table_elemt 10
#define blend_ratio 4
#define frame_print 60
#define SST_debug 0
static unsigned short Set_sharp_table[table_num][table_elemt]= //this is offset table
{
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},
	{	0,	0,	0,	0,	0,	0,	0,	0,	0,	0},

};
unsigned short Set_sharp_table_pre[table_elemt]={0,0,0,0,0,0,0,0,0,0};
//unsigned short Set_sharp_table_cur[table_elemt]={0,0,0,0,0,0,0,0,0,0};
unsigned short arry_from_osd[table_elemt]={0,0,0,0,0,0,0,0,0,0};

void scalerVIP_RTNR_set_sharpness(int level, int SC)
{
	int i;


	color_sharp_dm_peaking_gain_RBUS dm_peaking_gain_reg;
	dm_peaking_bound_RBUS dm_peaking_bound_reg;
	color_sharp_dm_segpk_edgpk3_RBUS dm_segpk_edgpk3_reg;
	color_sharp_dm_segpk_edgpk4_RBUS dm_segpk_edgpk4_reg;

	PQA_Input_Level[I_MPEG_SHARP] = RTNR_level_SdHd;
	PQA_Input_rate[I_MPEG_SHARP] =0;
	// prepare delta table , blending....
	if(SC)// scene change
		{
		for(i=0;i<table_elemt;i++)
			{

			Set_sharp_table_pre[i] = Set_sharp_table[level][i];

			}

		}
	else
		{

		for(i=0;i<table_elemt;i++)
			{

			Set_sharp_table_pre[i] = ((Set_sharp_table_pre[i]*blend_ratio + Set_sharp_table[level][i]*100))/(blend_ratio+1);
			//Set_sharp_table_pre[i] = Set_sharp_table_pre[i] <0?0:Set_sharp_table_pre[i];

			}
		}


	//write table to register
	if(MA_print_count%frame_print==0&&SST_debug)
	ROSPrintf("Set sharpness ");

	for(i=0;i<table_elemt;i++)
		{
		int write = (Set_sharp_table_pre[i]+50) /100;// rounding...

		if(MA_print_count%frame_print==0&&SST_debug)
		ROSPrintf(" %d",write);
		}



	if(MA_print_count%frame_print==0&&SST_debug)
	ROSPrintf("\n ");


	//map table
	int apply;

	apply=arry_from_osd[0]-(Set_sharp_table_pre[0]+50) /100;// tex gain pos
	apply=apply<0?0:apply;
	dm_peaking_gain_reg.gain_pos=apply;

	apply=arry_from_osd[1]-(Set_sharp_table_pre[1]+50) /100;// tex gain neg
	apply=apply<0?0:apply;
	dm_peaking_gain_reg.gain_neg=apply;

	apply=arry_from_osd[2]-(Set_sharp_table_pre[2]+50) /100;// tex hv pos
	apply=apply<0?0:apply;
	dm_peaking_bound_reg.hv_pos=apply;

	apply=arry_from_osd[3]-(Set_sharp_table_pre[3]+50) /100;// tex hv neg
	apply=apply<0?0:apply;
	dm_peaking_bound_reg.hv_neg=apply;

	apply=arry_from_osd[4]+(Set_sharp_table_pre[4]+50) /100;// LV use add
	apply=apply>255?255:apply;
	dm_peaking_bound_reg.lv=apply;

	apply=arry_from_osd[5]-(Set_sharp_table_pre[5]+50) /100;// edg gain pos
	apply=apply<0?0:apply;
	dm_segpk_edgpk3_reg.gain_pos=apply;

	apply=arry_from_osd[6]-(Set_sharp_table_pre[6]+50) /100;// edg gain neg
	apply=apply<0?0:apply;
	dm_segpk_edgpk3_reg.gain_neg=apply;

	apply=arry_from_osd[7]-(Set_sharp_table_pre[7]+50) /100;// edg hv pos
	apply=apply<0?0:apply;
	dm_segpk_edgpk4_reg.hv_pos=apply;

	apply=arry_from_osd[8]-(Set_sharp_table_pre[8]+50) /100;// edg hv neg
	apply=apply<0?0:apply;
	dm_segpk_edgpk4_reg.hv_neg=apply;

	apply=arry_from_osd[9]+(Set_sharp_table_pre[9]+50) /100; // LV use add
	apply=apply>255?255:apply;
	dm_segpk_edgpk4_reg.lv=apply;

	//

	rtd_outl(COLOR_SHARP_DM_PEAKING_GAIN_reg, dm_peaking_gain_reg.regValue);
	rtd_outl(COLOR_SHARP_DM_PEAKING_BOUND_reg, dm_peaking_bound_reg.regValue);
	rtd_outl(COLOR_SHARP_DM_SEGPK_EDGPK3_reg, dm_segpk_edgpk3_reg.regValue);
	rtd_outl(COLOR_SHARP_DM_SEGPK_EDGPK4_reg, dm_segpk_edgpk4_reg.regValue);


}
#endif

// Sirius new function: Histogram section for high precision
/****** NOTE: Data is not valid until next frame sync!!! ******/
void scalerVIP_Histogram_Section( unsigned char select1, unsigned char select2 )
{
	histogram_ich1_c0_sectionhist_in_cselect_RBUS histogram_ich1_c0_sectionhist_in_cselect_RBUS_reg;

	histogram_ich1_c0_sectionhist_in_cselect_RBUS_reg.regValue = rtd_inl(HISTOGRAM_ICH1_C0_SectionHist_IN_CSELECT_reg);

	histogram_ich1_c0_sectionhist_in_cselect_RBUS_reg.ch1_c0_section0_bin_sel = select1;
	histogram_ich1_c0_sectionhist_in_cselect_RBUS_reg.ch1_c0_section1_bin_sel = select2;

	rtd_outl(HISTOGRAM_ICH1_C0_SectionHist_IN_CSELECT_reg, histogram_ich1_c0_sectionhist_in_cselect_RBUS_reg.regValue);
}

SLR_VIP_TABLE* scaler_GetShare_Memory_VIP_TABLE_Struct(void)
{
	if(g_Share_Memory_VIP_TABLE_Struct_isr==NULL)
	{
		if(MA_print_count%360==0)
		{
			ROSPrintf("g_Share_Memory_VIP_TABLE_Struct_isr NULL \n");
		}
		return NULL;
	}
	return g_Share_Memory_VIP_TABLE_Struct_isr;
}

_clues* scaler_GetShare_Memory_SmartPic_Clue_Struct(void)
{
	if(SmartPic_clue==NULL)
	{
		if(MA_print_count%360==0)
		{
			ROSPrintf("Share_Memory_SmartPic_clue_Struct NULL \n");
		}
		return NULL;
	}
	return SmartPic_clue;
}

_RPC_clues* scaler_GetShare_Memory_RPC_SmartPic_Clue_Struct(void)
{
	if(RPC_SmartPic_clue==NULL)
	{
		if(MA_print_count%360==0)
		{
			ROSPrintf("Share_Memory_SmartPic_clue_Struct NULL \n");
		}
		return NULL;
	}
	return RPC_SmartPic_clue;
}


_system_setting_info* scaler_GetShare_Memory_system_setting_info_Struct(void)
{
	if(system_info_structure_table==NULL)
	{
		if(MA_print_count%360 == 0)
		{
		//	ROSPrintf("system_info_structure_table NULL \n");
		}
		return NULL;
	}
	return system_info_structure_table;
}

_RPC_system_setting_info* scaler_GetShare_Memory_RPC_system_setting_info_Struct(void)
{
	if(RPC_system_info_structure_table==NULL)
	{
		if(MA_print_count%360 == 0)
		{
		//	ROSPrintf("system_info_structure_table NULL \n");
		}
		return NULL;
	}
	return RPC_system_info_structure_table;
}



/*******************************************************************************
* Program : RPC interface from AP
******************************************************************************/
//------------------------------------------------
// csfanchiang add for AT 20101005, get & set info from/to user space
//------------------------------------------------

void scalerVIP_Share_Memory_Access_NR_Init()
{

}
void scalerVIP_Share_Memory_Access_Sharpness_Init()
{

}

void vip_suspend(void)
{

#ifdef VCPU_INTERRUPT
	unsigned char ucAutoMA = 0;
	//ROSPrintf("[vip] suspend\n");
	scalerIRQ_setAutoMAFlag((unsigned long)&ucAutoMA);
#endif

}

int DC_off_on_flg = 0;
void vip_resume(void)
{
	ini_ReadSrcDet=0;

	DC_off_on_flg = 1;  // game mode DC off/on init
	return;
}

#ifdef VCPU_INTERRUPT
ROSPM_DEVICE vip_device =
{
    .name = "VIP",
    .instance = NULL,
    .suspend = vip_suspend,
    .resume = vip_resume,
};
#endif

//======== check sum========

void fwif_color_PrintArray_UINT32(unsigned int * pwTemp ,int nSize,int nID)
{
	int i;
	if (pwTemp) {
		for (i = 0; i < (nSize); i++)
			ROSPrintf("Share_Memory_Video_VIP_TABLE, Array ID%d [%d]=%d\n ",nID,i,pwTemp[i]);
	}
}
void fwif_color_PrintArray_INT32(int * pwTemp ,int nSize,int nID)
{
	int i;
	if (pwTemp) {
	for (i = 0; i < (nSize); i++)
		ROSPrintf("Share_Memory_Video_VIP_TABLE, Array ID%d [%d]=%d\n ",nID,i,pwTemp[i]);
	}
}
void fwif_color_PrintArray_UINT16(unsigned short * pwTemp ,int nSize,int nID)
{
	int i;
	if (pwTemp) {
	for (i = 0; i < (nSize); i++)
		ROSPrintf("Share_Memory_Video_VIP_TABLE, Array ID%d [%d]=%x\n ",nID,i,pwTemp[i]);
	}
}

void fwif_color_PrintArray_INT16(short * pwTemp ,int nSize,int nID)
{
	int i;
	if (pwTemp) {
	for (i = 0; i < (nSize); i++)
		ROSPrintf("Share_Memory_Video_VIP_TABLE, Array ID%d [%d]=%d\n ",nID,i,pwTemp[i]);
	}
}
void fwif_color_PrintArray_UINT8(unsigned char * pwTemp ,int nSize,int nID)
{
	int i;
	if (pwTemp) {
	for (i = 0; i < (nSize); i++)
		ROSPrintf("Share_Memory_Video_VIP_TABLE, Array ID%d [%d]=%d\n ",nID,i,pwTemp[i]);
	}
}

void scalerVIP_Share_Memory_Access_VIP_TABLE_Custom_Struct(unsigned long arg)
{
	g_Share_Memory_VIP_TABLE_Custom_Struct_isr= ((SLR_VIP_TABLE_CUSTOM_TV001 *)arg);
	//ROSPrintf("==  scalerVIP_Share_Memory_Access_VIP_TABLE_Custom_Struct==\n ");
}

void* scalerVIP_Get_Share_Memory_VIP_TABLE_Custom_Struct(void)
{
	if(g_Share_Memory_VIP_TABLE_Custom_Struct_isr==NULL)
	{
		if(MA_print_count%360 == 0)
		{
			ROSPrintf("VIP_TABLE_Custom_Struct NULL \n");
		}
		return NULL;
	}

	return (void*)g_Share_Memory_VIP_TABLE_Custom_Struct_isr;
}

void scalerVIP_GetNrAvgcount(unsigned long arg)
{

	//ROSPrintf("enter scalerVIP_GetNrAvgcount\n");
	*(unsigned char*)arg = VD_noise_status_Num;
}

void scalerVIP_SetNrAvgcount(unsigned long arg)
{

	//ROSPrintf("enter scalerVIP_SetNrAvgcount\n");
	VD_noise_status_Num = *(unsigned char*)arg;
}

void scalerVIP_Set_TV_05_style_ON(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_Set_TV_05_style_ON = %d\n", arg);
	TV_05_style_ON = *(unsigned char*)arg;
}

void scalerVIP_Set_AUTO_NR_style(unsigned long arg)
{
	//ROSPrintf("enter SCALERIOC_SET_NR_style = %d\n", arg);
	//AUTO_NR_style = *(unsigned char*)arg;
	AUTO_NR_style = (unsigned char)arg;
}

void scalerVIP_Get_AUTO_NR_style(unsigned long arg)
{
	*(unsigned char*)arg = AUTO_NR_style;
}

void scalerVIP_Set_DccScurveLevel(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_Set_DccScurveLevel = %d\n", arg);
	DccScurveLevel = *(unsigned char*)arg;
}

void scalerVIP_GetTVAutoNR_Mode(unsigned long arg)
{

	//ROSPrintf("enter scalerVIP_GetTVAutoNR_Mode\n");
	*(unsigned char*)arg = TVAutoNR_Mode;
}

void scalerVIP_SetTVAutoNR_Mode(unsigned long arg)
{

	//ROSPrintf("enter scalerVIP_SetTVAutoNR_Mode\n");
	TVAutoNR_Mode = *(unsigned char*)arg;
}



void scalerVIP_SET_DNR_LEVEL_TABLE(unsigned long arg)
{

	//ROSPrintf("enter scalerVIP_SET_DNR_LEVEL_TABLE\n");
	DNR_LEVEL_TABLE= (unsigned char *)arg;

}

// Hawaii add for new AutoView 20131001
void scalerVIP_SET_AutoView_flag(unsigned long arg)
{

	ROSPrintf("enter scalerVIP_SET_DCC_Hist_table\n");
	AutoView_flag= (unsigned char)arg;

	//Main_Set_SC=1;//SceneChange

	ROSPrintf("AutoView_flag =%d \n",AutoView_flag);
}

void scalerVIP_COEFF_BY_Y_REG(unsigned long arg)
{
	COEFF_BY_Y_REG = (unsigned int*)arg;
}

void scalerVIP_NR_TABLE32(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_NR_TABLE32\n");
	NR_TABLE32 = (unsigned int*)arg;
}

void scalerVIP_NR_TABLE8(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_NR_TABLE8\n");
	NR_TABLE8 = (unsigned char*)arg;
}

// move to share memory access struct, elieli
/*
void scalerVIP_PQA_TABLE_OFFSET_TEMP(unsigned long arg)
{
	//ROSPrintf("enter PQA_TABLE_OFFSET_TEMP\n");
	PQA_TABLE_OFFSET_TEMP = (unsigned int*)arg;
}
*/

// Hawaii add for Edge Peaking 20131022
void scalerVIP_Edge_Peaking_Table(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_NR_TABLE8\n");
	Edge_Peaking_Table = (unsigned short*)arg;
}



void scalerVIP_PWM_TABLE(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_NR_TABLE8\n");
	PWM_table_tv057 = (unsigned char*)arg;
}

// Hawaii add for Edge Peaking 20131022
void scalerVIP_Mem_Edge_AutoPk_data(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Mem_Edge_AutoPk_data\n");
	Edge_AutoPk_data = (unsigned short*)arg;
}

void scalerVIP_SET_INTELLIGENT_PICTURE_2D_PEAKING_TABLE(unsigned long arg)
{
	intelligent_picture_table = (unsigned short*)arg;
	Sharpness_OSD_update = _TRUE;
}

void scalerVIP_GET_VD_NOISE_LEVEL(unsigned long arg)
{
	*(unsigned char*)arg = VD_noise_level;
}

void scalerVIP_SetTable_HMCNR(unsigned char arg) //planck 20100810
{
	 TableNR_HMCNR=(unsigned char)arg;
}

void scalerVIP_SetTable_VerticalNR(unsigned char arg) //planck 20100810
{
	 TableNR_VerticalNR=(unsigned char)arg;
}

void scalerVIP_GetDNR_log(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetDNR_log\n");

	*(unsigned char*)arg = DNR_log;
}

void scalerVIP_SetDNR_log(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SETDNR_log\n");

	DNR_log = *(unsigned char*)arg;
}

void scalerVIP_GetRTNR_log(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetRTNR_log\n");

	*(unsigned char*)arg = RTNR_log;
}

void scalerVIP_SetRTNR_log(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SETRTNR_log\n");

	RTNR_log = *(unsigned char*)arg;
}

void scalerVIP_GetSNR_log(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetSNR_log\n");

	*(unsigned char*)arg = SNR_log;
}

void scalerVIP_SetSNR_log(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SETSNR_log\n");

	SNR_log = *(unsigned char*)arg;
}

void scalerVIP_GetINR_log(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetINR_log\n");

	*(unsigned char*)arg = INR_log;
}

void scalerVIP_SetINR_log(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SETINR_log\n");

	INR_log = *(unsigned char*)arg;
}

void scalerVIP_Get_DEBUG_AUTO_NR(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetINR_log\n");

	*(unsigned char*)arg = DEBUG_AUTO_NR;
}

void scalerVIP_Set_DEBUG_AUTO_NR(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SETINR_log\n");

	DEBUG_AUTO_NR = *(unsigned char*)arg;
}
void scalerVIP_Get_DEBUG_VD_NOISE(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetINR_log\n");

	*(unsigned char*)arg = DEBUG_VD_NOISE;
}

void scalerVIP_Set_DEBUG_VD_NOISE(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SETINR_log\n");

	DEBUG_VD_NOISE = *(unsigned char*)arg;
}
void scalerVIP_Get_DEBUG_RTNR_MAD(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetINR_log\n");

	*(unsigned char*)arg = DEBUG_RTNR_MAD;
}

void scalerVIP_Set_DEBUG_RTNR_MAD(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SETINR_log\n");

	DEBUG_RTNR_MAD = *(unsigned char*)arg;
}
void scalerVIP_Get_DEBUG_HISTOGRAM_MEAN(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetINR_log\n");

	*(unsigned char*)arg = DEBUG_HISTOGRAM_MEAN;
}

void scalerVIP_Set_DEBUG_HISTOGRAM_MEAN(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SETINR_log\n");

	DEBUG_HISTOGRAM_MEAN = *(unsigned char*)arg;
}

// move "DNR table select info" to system_info_struct and replace by PQA table, elieli
/*
void scalerVIP_Get_DNRTABLE(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GET_DNRTABLE\n");

	*(unsigned char*)arg = DNR_TABLE_SECET;
}
void scalerVIP_Set_DNRTABLE(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SET_DNRTABLE\n");

	DNR_TABLE_SECET = *(unsigned char*)arg;
}
*/



//Elsie 20130820: RTNR K-force, 20130930 sync from Magellan
void scalerVIP_Set_RTNR_K_force(unsigned long arg)
{
	// The least 3 significant bits are offset, the others are level.
	RTNR_K_force_level = (unsigned char)arg>>3;
	RTNR_K_force_offset = (unsigned char)arg & 0x7;
}

//20130521 added by Hawaii for Dynamic Peaking Display
void scalerVIP_Get_DCC_Histogram_Mean_value(unsigned long arg)
{	unsigned char DCC_Histogram_Mean_value_protected;
	//scalerDrvPrint("enter scalerVIP_Get_DCC_Histogram_Mean_value\n");
	// protect due to  Dynamic Peaking Display just need value 0 to 255
	if((SmartPic_clue->Hist_Y_Mean_Value)>=255)
		DCC_Histogram_Mean_value_protected = 255;
	else if((SmartPic_clue->Hist_Y_Mean_Value)<=0)
		DCC_Histogram_Mean_value_protected = 0;
	else
		DCC_Histogram_Mean_value_protected = (SmartPic_clue->Hist_Y_Mean_Value);

	*(unsigned char*)arg = DCC_Histogram_Mean_value_protected;
	//ROSPrintf("===== [ScalerVIP.c] ===== Histogram_Mean_value = %d \n",DCC_Histogram_Mean_value_protected);
}

void scalerVIP_Get_RTNR_MAD_count_Y_sum_avg(unsigned long arg)
{
	unsigned char RTNR_MAD_count_Y_sum_avg_protected;
	//scalerDrvPrint("enter scalerVIP_Get_RTNR_MAD_count_Y_sum_avg\n");
	// protect due to  Dynamic Peaking Display just need value 0 to 255
	if(RTNR_MAD_count_Y_sum_avg>=255)
		RTNR_MAD_count_Y_sum_avg_protected = 255;
	else if(RTNR_MAD_count_Y_sum_avg<=0)
		RTNR_MAD_count_Y_sum_avg_protected = 0;
	else
		RTNR_MAD_count_Y_sum_avg_protected = RTNR_MAD_count_Y_sum_avg;

	*(unsigned char*)arg = RTNR_MAD_count_Y_sum_avg_protected;

	//ROSPrintf("===== [ScalerVIP.c] ===== RTNR_MAD_count_Y_sum_avg = %d \n",RTNR_MAD_count_Y_sum_avg_protected);
}


void scalerVIP_SetMpegNR(unsigned long arg)
{
	scalerVip_mpegNR= (SCALERVIP_MPEGNR)arg;

}

void scalerVIP_GetMpegNR(unsigned long arg)
{
	*(SCALERVIP_MPEGNR*)arg = scalerVip_mpegNR;
}

void scalerVIP_SetTableSNR_Y(unsigned char arg)
{
	 TableNR_SNR_Y=(unsigned char)arg;
}

void scalerVIP_SetTableSNR_C(unsigned char arg)
{
	 TableNR_SNR_C=(unsigned char)arg;
}

void scalerVIP_SetTableNRTemporal(unsigned char arg) //planck 20100810
{
	 TableNRTemporal=(unsigned char)arg;
}

void scalerVIP_SetTableRTNR_Y(unsigned char arg) //planck 20100810
{
	 TableNR_RTNR_Y=(unsigned char)arg;
}

void scalerVIP_SetTableRTNR_C(unsigned char arg) //planck 20100810
{
	 TableNR_RTNR_C=(unsigned char)arg;
}

void scalerVIP_SetMpegNR_H(unsigned long arg)
{
	 TableNR_MPEGNR_H=(unsigned char)arg;
}

void scalerVIP_SetMpegNR_V(unsigned long arg)
{
	 TableNR_MPEGNR_V=(unsigned char)arg;
}

void scalerVIP_SetCorrectionBIT1_Duty_Debug(unsigned long arg)
{
	correctionBit1_duty_debug = arg;
}

void scalerVIP_SetTableUnShpMask(unsigned char arg) //planck 20100810
{
	 VIP_FACTORY_UnShpMask=(unsigned char)arg;

}

void scalerVIP_SetTableSCALEPK(unsigned char arg) //planck 20100810
{
	 VIP_FACTORY_SCALEPK=(unsigned char)arg;

}

void scalerVIP_SetTableSHP1D2D_EGSM(unsigned char arg) //planck 20100810
{
	 VIP_FACTORY_SHP1D2D_EGSM=(unsigned char)arg;

}


void scalerVIP_getAutoMADebugMsg(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_getAutoMADebugMsg\n");
	*(unsigned char*)arg = AutoMADebugMsg;
}


void scalerVIP_setAutoMADebugMsg(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_setAutoMADebugMsg\n");

	AutoMADebugMsg = *(unsigned char*)arg;
}


unsigned char drvif_module_vdc_NoiseStatus_isr(void)
{
	return (unsigned char)VDPQ_rtd_inl(VDTOP_NOISE_STATUS_reg);
}

void scalerVIP_SetTableDCTI(unsigned char arg) //Leo Chen 20101217
{
	 TableDCTI=(unsigned char)arg;
	  //ROSPrintf("ooo---scalerVIP_SetTableDCTI=%x ---ooo\n",TableDCTI);
}

void scalerVIP_SetICM_Global_Sat(unsigned short arg) //Leo Chen 20101217
{
	 scalerVip_ICM_Global_Sat=(unsigned short)arg;
	 ROSPrintf("ooo---scalerVIP_SetICM_Global_Sat=%x ---ooo\n",scalerVip_ICM_Global_Sat);
}

void scalerVIP_SetScaler_FIR_H(unsigned char arg) //Leo Chen 20101217
{
	 scalerVip_Scaler_FIR_H=(unsigned char)arg;
	 ROSPrintf("ooo---scalerVIP_SetScaler_FIR_H=%x ---ooo\n",scalerVip_Scaler_FIR_H);
}

void scalerVIP_SetScaler_FIR_V(unsigned char arg) //Leo Chen 20101217
{
	 scalerVip_Scaler_FIR_V=(unsigned char)arg;
	 ROSPrintf("ooo---scalerVIP_SetScaler_FIR_V=%x ---ooo\n",scalerVip_Scaler_FIR_V);
}

void scalerVIP_SetScaler_FIR_H_8tap(unsigned char arg) //20140327 roger
{
	 scalerVip_Scaler_FIR_H_8tap=(unsigned char)arg;
	 ROSPrintf("ooo---scalerVIP_SetScaler_FIR_H_8tap=%x ---ooo\n",scalerVip_Scaler_FIR_H_8tap);
}

void scalerVIP_SetScaler_FIR_V_6tap(unsigned char arg) //20140327 roger
{
	 scalerVip_Scaler_FIR_V_6tap=(unsigned char)arg;
	 ROSPrintf("ooo---scalerVIP_SetScaler_FIR_V_6tap=%x ---ooo\n",scalerVip_Scaler_FIR_V_6tap);
}


void scalerVIP_SetPeaking_POS_RANGE_MAX(unsigned int arg)
{
	 scalerVip_PEAKING_POS_RANGE_MAX=(unsigned int)arg;
	 //following print will cause videl lag in mantis#40711, mark it. If need debug, please unmark local
//	 ROSPrintf("ooo---scalerVip_PEAKING_POS_RANGE_MAX=%x ---ooo\n",scalerVip_PEAKING_POS_RANGE_MAX);
}


void scalerVIP_SetPeaking_NEG_RANGE_MAX(unsigned int arg)
{
	 scalerVip_PEAKING_NEG_RANGE_MAX=(unsigned int)arg;
	 //following print will cause videl lag in mantis#40711, mark it. If need debug, please unmark local
//	 ROSPrintf("ooo---scalerVip_PEAKING_NEG_RANGE_MAX=%x ---ooo\n",scalerVip_PEAKING_NEG_RANGE_MAX);
}


void scalerVIP_SetPeaking_Coring(unsigned char arg)
{
	 scalerVip_PEAKING_CORING=(unsigned char)arg;
	 //following print will cause videl lag in mantis#40711, mark it. If need debug, please unmark local
//	 ROSPrintf("ooo---scalerVip_PEAKING_CORING=%x ---ooo\n",scalerVip_PEAKING_CORING);
}


void scalerVIP_SetPeaking_Level(unsigned char arg)
{
	 scalerVip_PEAKING_LEVEL=(unsigned char)arg;
	 //following print will cause videl lag in mantis#40711, mark it. If need debug, please unmark local
//	 ROSPrintf("ooo---scalerVip_PEAKING_LEVEL=%x ---ooo\n",scalerVip_PEAKING_LEVEL);
}


unsigned char scalerVIP_GetBrightness(void)
{
	return scalerVipBrightness;
}

void scalerVIP_SetBrightness(unsigned char brightness)
{
	scalerVipBrightness = brightness;
}

unsigned char scalerVIP_GetContrast(void)
{
	return scalerVipContrast;
}

void scalerVIP_SetContrast(unsigned char contrast)
{
	scalerVipContrast = contrast;
}

/**
 * User space sets value of TableNRSpatial.
 *
 * @param	arg: user space address
 * @return	void
 */
void scalerVIP_setTableNRSpatial(unsigned long arg)
{
	TableNRSpatial = *(unsigned char*)arg;
}

/**
 * User space gets value of TableNRSpatial.
 *
 * @param	arg: user space address
 * @return	void
 */
void scalerVIP_getTableNRSpatial(unsigned long arg)
{
	*(unsigned char*)arg = TableNRSpatial;
}

/**
 * User space sets value of picture mode.
 *
 * @param	arg: user space address
 * @return	void
 */
void scalerVIP_setPictureMode(unsigned long arg)
{

	PictureMode = (unsigned char)arg;
}

void scalerVIP_SetMainTotalPixelInv(unsigned long arg)//Leo Chen 20100810
{
	//Main_total_pixel_inv= (unsigned int)arg;
}

void scalerVIP_GetPinBlAdj(unsigned long arg)//Leo Chen 20101001
{
	m_PIN_BL_ADJ= (unsigned int)arg;
}
void scalerVIP_GetPinBlOnOff(unsigned long arg)//Leo Chen 20101001
{
	m_PIN_BL_ON_OFF= (unsigned int)arg;
}
void scalerVIP_GetBacklightOn(unsigned long arg)//Leo Chen 20101001
{
	m_BACKLIGHT_ON= (unsigned int)arg;
}

void scalerVIP_setDcrTable()
{
#if 1 // only for TV001 DCR

	SLR_VIP_TABLE* Share_Memory_VIP_TABLE_Struct = NULL;
	Share_Memory_VIP_TABLE_Struct = scaler_GetShare_Memory_VIP_TABLE_Struct();

	if((Share_Memory_VIP_TABLE_Struct == NULL)) {
		if(MA_print_count%360==0) {
			ROSPrintf("\n====Share Memory PQ data ERROR====\n\n");
			ROSPrintf(" Mem0 = %p\n",Share_Memory_VIP_TABLE_Struct);
			ROSPrintf("\n===============================\n\n");
		}
		return;
	}

	DCR_TABLE = (unsigned char *)&Share_Memory_VIP_TABLE_Struct->DCR_TABLE[0][0];
#ifdef DCR_debug_en
	if(MA_print_count%250==0){
		printk(KERN_NOTICE "scalerVIP DCR %d	%d	%d	%d	%d\n", DCR_TABLE[0],DCR_TABLE[1],DCR_TABLE[2],DCR_TABLE[3],DCR_TABLE[4] );
		printk(KERN_NOTICE "scalerVIP DCR %d	%d	%d	%d	%d\n", DCR_TABLE[20],DCR_TABLE[21],DCR_TABLE[22],DCR_TABLE[23],DCR_TABLE[24] );
	}
#endif

#else
	m_nTPV_New_DCR=((ISR_SCALERDRV_DCRTABLE*)arg)->nTPV_New_DCR;
	if(m_nTPV_New_DCR) {
		m_bDefault_OFF=((ISR_SCALERDRV_DCRTABLE*)arg)->nDCRDefault;
		ROSPrintf("===  TPV_NEW_DCR m_nTPV_New_DCR = %d	m_bDefault_OFF = %d \n", m_nTPV_New_DCR ,m_bDefault_OFF);
		//m_bDefault_OFF=!m_bDefault_OFF;
		m_bDefault_OFF = (m_bDefault_OFF == 0) ?(1) : (0);
		ROSPrintf("===  TPV_NEW_DCR m_bDefault_OFF = %d \n" ,m_bDefault_OFF);
		DCR_TABLE = (unsigned char *)&g_Share_Memory_VIP_TABLE_Custom_Struct_isr->DCR_TABLE[0][0][0];
		//DCR_TABLE = (unsigned char *)(&((ISR_SCALERDRV_DCRTABLE*)arg)->DCR_Table[0][0][0]);
		ROSPrintf("scalerVIP TPV_NEW_DCR %d	%d	%d	%d	%d\n", DCR_TABLE[0],DCR_TABLE[1],DCR_TABLE[2],DCR_TABLE[3],DCR_TABLE[4] );
		ROSPrintf("scalerVIP TPV_NEW_DCR %d	%d	%d	%d	%d\n", DCR_TABLE[20],DCR_TABLE[21],DCR_TABLE[22],DCR_TABLE[23],DCR_TABLE[24] );
		ROSPrintf("scalerVIP TPV_NEW_DCR %d	%d	%d	%d	%d\n", DCR_TABLE[25],DCR_TABLE[26],DCR_TABLE[27],DCR_TABLE[28],DCR_TABLE[29] );
		ROSPrintf("scalerVIP TPV_NEW_DCR %d	%d	%d	%d	%d\n", DCR_TABLE[50],DCR_TABLE[51],DCR_TABLE[52],DCR_TABLE[53],DCR_TABLE[54] );
		ROSPrintf("scalerVIP TPV_NEW_DCR %d	%d	%d	%d	%d\n", DCR_TABLE[55],DCR_TABLE[56],DCR_TABLE[57],DCR_TABLE[58],DCR_TABLE[59] );

		//20130502
		#ifdef fix_DCR_Table_memory
		//20130502
		offset=2*DCR_TABLE_ROW_NUM*DCR_TABLE_COL_NUM;
		//================
		for(i=0; i<DCR_TABLE_COL_NUM*DCR_TABLE_ROW_NUM;i++)
		{
			DCR_Table_TPV_non_TV[i]=DCR_TABLE[offset+i];
		}
		#ifdef fix_DCR_Table_2694A_global
		offset=DCR_TABLE_COL_NUM*(DCR_TABLE_ROW_NUM+4);
		for(i=0; i<DCR_TABLE_COL_NUM*2;i++)
			DCR_Table_TPV_global_setting[i]=DCR_TABLE[offset+i];
		#endif
		#endif
		//================
		ROSPrintf("scalerVIP DCR %d	%d	%d	%d	%d\n", DCR_TABLE[60],DCR_TABLE[61],DCR_TABLE[62],DCR_TABLE[63],DCR_TABLE[64] );
		ROSPrintf("scalerVIP DCR %d	%d	%d	%d	%d\n", DCR_TABLE[65],DCR_TABLE[66],DCR_TABLE[67],DCR_TABLE[68],DCR_TABLE[69] );
		ROSPrintf("scalerVIP DCR %d	%d	%d	%d	%d\n", DCR_TABLE[70],DCR_TABLE[71],DCR_TABLE[72],DCR_TABLE[73],DCR_TABLE[74] );
		ROSPrintf("scalerVIP DCR %d	%d	%d	%d	%d\n", DCR_TABLE[75],DCR_TABLE[76],DCR_TABLE[77],DCR_TABLE[78],DCR_TABLE[79] );
        ROSPrintf("scalerVIP DCR %d %d	%d	%d	%d\n", DCR_TABLE[80],DCR_TABLE[81],DCR_TABLE[82],DCR_TABLE[83],DCR_TABLE[84] );
		ROSPrintf("scalerVIP DCR %d %d	%d	%d	%d\n", DCR_TABLE[85],DCR_TABLE[86],DCR_TABLE[87],DCR_TABLE[88],DCR_TABLE[89] );

	} else {

		DCR_TABLE = (unsigned char *)Share_Memory_VIP_TABLE_Struct->DCR_TABLE[0][0];
		ROSPrintf("scalerVIP DCR %d	%d	%d	%d	%d\n", DCR_TABLE[0],DCR_TABLE[1],DCR_TABLE[2],DCR_TABLE[3],DCR_TABLE[4] );
		ROSPrintf("scalerVIP DCR %d	%d	%d	%d	%d\n", DCR_TABLE[20],DCR_TABLE[21],DCR_TABLE[22],DCR_TABLE[23],DCR_TABLE[24] );

	}
#endif

}

void scalerVIP_Set_DCR_BackLightMappingRange(void)
{
	_system_setting_info* system_info_structure_table = NULL;

	system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();

	if((system_info_structure_table == NULL)) {
		if(MA_print_count%360==0) {
			ROSPrintf("\n====Share Memory PQ data ERROR====\n\n");
			ROSPrintf(" Mem2 = %p\n",system_info_structure_table);
			ROSPrintf("\n===============================\n\n");
		}
		return;
	}

	scalerVIP_SetIsIncreseMode(system_info_structure_table->OSD_Info.isIncreaseMode_Flag);
	scalerVIP_SetDcrUIMaxValue(system_info_structure_table->OSD_Info.backlightLevel_uiMax);
	scalerVIP_SetDcrUIMinValue(system_info_structure_table->OSD_Info.backlightLevel_uiMin);
	scalerVIP_SetBlLvActMax(system_info_structure_table->OSD_Info.backlightLevel_actMax);
	scalerVIP_SetBlLvActMin(system_info_structure_table->OSD_Info.backlightLevel_uiMin);
	scalerVIP_SetDcrOnOff(system_info_structure_table->OSD_Info.OSD_DCR_Mode);
	scalerVIP_GetBlLvFromUser(system_info_structure_table->OSD_Info.OSD_Backlight);

}

void scalerVIP_SetIsIncreseMode(unsigned char arg)//Leo Chen 20101001
{
	m_isIncreaseMode= (unsigned int)arg;
}
void scalerVIP_SetDcrUIMaxValue(unsigned int arg)//Leo Chen 20101001
{
	m_DCR_UI_Max_Value= (unsigned int)arg;
}

void scalerVIP_SetDcrUIMinValue(unsigned int arg)//Leo Chen 20101001
{
	m_DCR_UI_Min_Value= (unsigned int)arg;
}

void scalerVIP_SetDcrOnOff(unsigned char arg)//Leo Chen 20101111
{
	m_DCR_On_Off= (unsigned char)arg;
	m_nDCR_Mode = m_DCR_On_Off;
	m_DCR_On_Off = (m_DCR_On_Off == 0) ?(0) : (1);
	/*ROSPrintf("m_DCR_On_Off=%d\n",m_DCR_On_Off);*/
}

void scalerVIP_GetBlLvFromUser(unsigned char arg)//Leo Chen 20101111
{
	m_BL_LV_From_User= (unsigned int)arg;

	m_DCR_refresh = TRUE; //Leo Chen 20101209
	DCR_refresh_TV057=TRUE;
}

void scalerVIP_SetBlLvActMax(unsigned int arg)//Leo Chen 20101111
{
	m_BL_LV_Act_Max= (unsigned int)arg;
}

void scalerVIP_SetBlLvActMin(unsigned int arg)//Leo Chen 20101111
{
	m_BL_LV_Act_Min= (unsigned int)arg;
}

void scalerVIP_SetDefaultDCRMode(unsigned long arg)
{
	m_bDefault_OFF= (unsigned int)arg;
	m_bDefault_OFF = (m_bDefault_OFF == 0) ?(1) : (0);
//printf("m_bDefault_OFF=%d\n",m_bDefault_OFF);
}



/**
 * Get histogram value by index
 *
 * @param	idx: index of histogram
 * @return	histogram value
 */
unsigned int scalerVIP_getColorHistValue(unsigned char idx)
{
	//scalerDrvPrint( "enter scalerVIP_getColorHistValue\n" );	// too many messages, use it carefully
	unsigned int *reg_HistCnt=(SmartPic_clue->Y_Main_Hist);
	return reg_HistCnt[idx];
}

/**
 * Scaler task (user space) set RTNR_Y table into scaler driver (kernel space).
 *
 * @param	arg: pointer of RTNR_Y table
 * @return	void
 */
void scalerVIP_setRTNR_Y_Table(unsigned long arg)
{
	unsigned char length = 0;
	unsigned char *ptr = (unsigned char*)arg;

	if ( RTNR_Y_Table != NULL ) {
		// oliver-
		//kfree(RTNR_Y_Table);
	}

	length = *ptr;

	RTNR_Y_Table = ptr+1;

}

/**
 * Scaler task (user space) set RTNR_C table into scaler driver (kernel space).
 *
 * @param	arg: pointer of RTNR_C table
 * @return	void
 */
void scalerVIP_setRTNR_C_Table(unsigned long arg)
{
	unsigned char length = 0;
	unsigned char *ptr = (unsigned char*)arg;

	if ( RTNR_C_Table == NULL ) {
		ROSPrintf( "Please set RTNR table before update RTNR table.\n" );
	}
	length = *(unsigned char *)ptr;

	RTNR_C_Table = ptr+1;

}

/**
 * Scaler task (user space) update RTNR_Y table into scaler driver (kernel space).
 *
 * @param	arg: pointer of new value
 * @return	SUCCESS or FAILED
 */
unsigned char scalerVIP_updateRTNR_Y_Table(unsigned long arg)
{
	unsigned char src_idx = 0;
	unsigned char *ptr = (unsigned char*)arg;

	nonAuto_RTNR_Y_LEVEL = *(ptr+1);

	if ( RTNR_Y_Table == NULL ) {
		ROSPrintf( "Please set RTNR table before update RTNR table.\n" );
		return FAILED;
	}

	src_idx = *(unsigned char *)ptr;

	RTNR_Y_Table[src_idx] = *(ptr+1);

	return SUCCESS;
}

/**
 * Scaler task (user space) update RTNR_C table into scaler driver (kernel space).
 *
 * @param	arg: pointer of new value
 * @return	SUCCESS or FAILED
 */
unsigned char scalerVIP_updateRTNR_C_Table(unsigned long arg)
{
	unsigned char src_idx = 0;
	unsigned char *ptr = (unsigned char*)arg;
	//scalerDrvPrint( "enter scalerVIP_updateRTNR_C_Table\n" );

	nonAuto_RTNR_C_LEVEL = *(ptr+1);

	if ( RTNR_C_Table == NULL ) {
		scalerDrvPrint( "Please set RTNR table before update RTNR table.\n" );
		return FAILED;
	}

	src_idx = *(unsigned char *)ptr;

	RTNR_C_Table[src_idx] =  *(ptr+1);


	return SUCCESS;
}

/**
 * get RTNR value in kernel space.
 * Because of synchronization problem, rtnr value in kernel space is read only.
 *
 * @param	src_idx: source index
 * @return	RTNR value
 */
unsigned char scalerVIP_getRTNR_Y(unsigned char src_idx)
{
	//ROSPrintf( "enter scalerVIP_getRTNR_Y\n" );
	if ( RTNR_Y_Table == NULL )
		return 0;
	else
	{
		return RTNR_Y_Table[src_idx];
	}
}

/**
 * get RTNR value in kernel space.
 * Because of synchronization problem, rtnr value in kernel space is read only.
 *
 * @param	src_idx: source index
 * @return	RTNR value
 */
unsigned char scalerVIP_getRTNR_C(unsigned char src_idx)
{
	//ROSPrintf( "enter scalerVIP_getRTNR_C\n" );
	if ( RTNR_C_Table == NULL )
		return 0;
	else
	{
		return RTNR_C_Table[src_idx];
	}
}


void scalerVIP_GetAutoNR(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetAutoMA6FlagMsg\n");
	*(unsigned char*)arg = AutoNR_Enable;
}
void scalerVIP_SetAutoNR(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_setAutoNRMsg\n");

	AutoNR_Enable = *(unsigned char*)arg;
	pre_VD_noise_level = 255;
	pre_DNR_Auto_lvl_SdHd = 255;
}

void scalerVIP_GetAutoNR_by_Low_Mid_High(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_GetAutoNR_by_Low_Mid_High\n");
	*(unsigned char*)arg = AutoNR_Enable_by_Low_Mid_High;
}
void scalerVIP_SetAutoNR_by_Low_Mid_High(unsigned long arg)
{
	//ROSPrintf("enter scalerVIP_SetAutoNR_by_Low_Mid_High\n");
	AutoNR_Enable_by_Low_Mid_High = *(unsigned char*)arg;
}

/**
 * Scaler task (user space) set DNR table into scaler driver (kernel space).
 *
 * @param	arg: pointer of DNR table
 * @return	void
 */
void scalerVIP_setDNRTable(unsigned long arg)
{
	unsigned char length = 0;
	unsigned char *ptr = (unsigned char*)arg;

	//ROSPrintf( "enter scalerVIP_setDNRTable\n" );
	if ( DNR_Table != NULL ) {
	}

	length =  *ptr;

	DNR_Table = ptr+1;
}

/**
 * Scaler task (user space) update DNR table into scaler driver (kernel space).
 *
 * @param	arg: pointer of new value
 * @return	SUCCESS or FAILED
 */
unsigned char scalerVIP_updateDNRTable(unsigned long arg)
{
	unsigned char src_idx = 0;
	unsigned char *ptr = (unsigned char*)arg;
	//ROSPrintf( "enter scalerVIP_updateDNRTable\n" );

	if ( DNR_Table == NULL ) {
		ROSPrintf( "Please set DNR table before update DNR table.\n" );
		return FAILED;
	}

	src_idx = *ptr;

	DNR_Table[src_idx] = *(ptr+1);

	return SUCCESS;
}

/**
 * get DNR value in kernel space.
 * Because of synchronization problem, dnr value in kernel space is read only.
 *
 * Usage:
 *	scalerVIP_getDNR(scaler_disp_info[_CHANNEL1].input_src) or
 *	scalerVIP_getDNR(scaler_disp_info[_CHANNEL2].input_src)
 *
 * @param	src_idx: source index
 * @return	DNR value
 */
unsigned char scalerVIP_getDNR(unsigned char src_idx)
{
	//ROSPrintf( "enter scalerVIP_getDNR\n" );
	if ( DNR_Table == NULL )
		return 0;
	else
	{
		return DNR_Table[src_idx];
	}
}

void scaler_Set_Dcr_Panasonic_Enable(unsigned long  arg)
{

	m_nTV057_New_DCR=*(unsigned char*)arg;
	DCR_refresh_TV057 =TRUE;
}

void scaler_Set_Dcr_Powersave_Enable(unsigned long  arg)
{

	//ROSPrintf("[Young]## scaler_Set_Dcr_Powersave_Enabley arg=%d@@ \n",arg);
	VIP_DCR_powersave_enable=*(unsigned char*)arg;

	//ROSPrintf("[Young]## scaler_Set_Dcr_Powersave_Enabley VIP_DCR_powersave_enable=%d@@ \n",VIP_DCR_powersave_enable);

}

unsigned char scalerVIP_Update_TSB_Active_Backlight_Table(unsigned long arg)
{
	//unsigned char src_idx = 0;
	unsigned char *ptr = (unsigned char*)arg;
	unsigned char* Active_Backlight_info=NULL;
	//unsigned char i;

	Active_Backlight_info = ptr;

	BlackAPL_a_HSCA=Active_Backlight_info[0];
	BlackAPL_b_HSCB=Active_Backlight_info[1];
	BlackAPL_c_HSCC=Active_Backlight_info[2];
	BlackAPL_d_HSCD=Active_Backlight_info[3];
	BlackAPL_e_HSCE=Active_Backlight_info[4];
	BlackAPL_f_HSCF=Active_Backlight_info[5];
	BlackAPL_g_HSCG=Active_Backlight_info[6];
	BlackAPL_h_HSCH=Active_Backlight_info[7];

	BlackAPL_BL_Th1_SABH=Active_Backlight_info[8];
	BlackAPL_BL_Th1_SABL=Active_Backlight_info[9];
	BlackAPL_BL_Th2_EABH=Active_Backlight_info[10];
	BlackAPL_BL_Th2_EABL=Active_Backlight_info[11];
	BlackAPL_BL_Th3_MLBL=Active_Backlight_info[12];
	BlackAPL_M_ATAB=Active_Backlight_info[13];
	BlackAPL_KU_USAB=Active_Backlight_info[14];
	BlackAPL_KD_DSAB=Active_Backlight_info[15];

	APL_BL_MAX = Active_Backlight_info[16];
	APL_BL_MIN = Active_Backlight_info[17];

	//for(i=0; i<18; i++){
		//ROSPrintf("scalerVIP_Update_TSB_Active_Backlight_Table[%d]= %d\n",i, Active_Backlight_info[i]);
	//}

	return SUCCESS;
}


//RenChen sync from L3300
void scalerVIP_SetNoisereduction_Vfilter(unsigned long arg)
{

	//scalerDrvPrint("enter scalerVIP_SetNoisereduction_Vfilter\n");
	Noisereduction_Vfilter = *(unsigned char*)arg;
}

//RenChen sync from L3300
void scalerVIP_GetNoisereduction_Vfilter_ON(unsigned long arg)
{

	//scalerDrvPrint("enter scalerVIP_GetNoisereduction_Vfilter_ON\n");
	*(unsigned char*)arg = Noisereduction_Vfilter_ON;

}

//Profile RGB for ambilight sensor
#ifdef ISR_AMBILIGHT_ENABLE
void scalerVIP_Set_Profile_RGB_Data_Flag_V(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Set_Profile_RGB_Data_Flag_V\n");

	Profile_RGB_data_flag_V = (unsigned char) arg;

}
void scalerVIP_Get_Profile_RGB_Data_Flag_V(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Get_Profile_RGB_Data_Flag_V\n");

	*(unsigned char*)arg = Profile_RGB_data_flag_V;

}
void scalerVIP_Get_Profile_R_Data_V(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Get_Profile_R_Data_V\n");

	memcpy((unsigned short*)arg, &Profile_R_V[0], sizeof(unsigned short)*16);

}
void scalerVIP_Get_Profile_G_Data_V(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Get_Profile_G_Data_V\n");

	memcpy((unsigned short*)arg, &Profile_G_V[0], sizeof(unsigned short)*16);

}

void scalerVIP_Get_Profile_B_Data_V(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Get_Profile_B_Data_V\n");

	memcpy((unsigned short*)arg, &Profile_B_V[0], sizeof(unsigned short)*16);

}

void scalerVIP_Set_Profile_RGB_Data_Flag_H(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Set_Profile_RGB_Data_Flag_H\n");

	Profile_RGB_data_flag_H = (unsigned char) arg;

}
void scalerVIP_Get_Profile_RGB_Data_Flag_H(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Get_Profile_RGB_Data_Flag_H\n");

	*(unsigned char*)arg = Profile_RGB_data_flag_H;

}
void scalerVIP_Get_Profile_R_Data_H(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Get_Profile_R_Data_H\n");

	memcpy((unsigned short*)arg, &Profile_R_H[0], sizeof(unsigned short)*16);

}
void scalerVIP_Get_Profile_G_Data_H(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Get_Profile_G_Data_H\n");

	memcpy((unsigned short*)arg, &Profile_G_H[0], sizeof(unsigned short)*16);

}

void scalerVIP_Get_Profile_B_Data_H(unsigned long arg)
{
	scalerDrvPrint("enter scalerVIP_Get_Profile_B_Data_H\n");

	memcpy((unsigned short*)arg, &Profile_B_H[0], sizeof(unsigned short)*16);

}
#endif


void scalerVIP_MA_IEdgeSmooth(unsigned char concentric_flag)
{
//  remove , need improve new function
}

void scalerVIP_IEedgeSmooth_Linemode_check(void)
{
	// this function is for I edge smooth line mode check (b802_5100.10:9)
	// 0:3 line, 1:5 line, 2 :11 line
	// Mac3 : only when UZD is disable, we can 11 line mode ( for vertical mosquito NR needed )

	// Mag2 : no need to check UZD status, only input width issue
    // * When 3 line mode : input width <= 4096
    // * When 5 line mode : input width <= 2048
    // * When 11line mode : input width <= 1024

	int mnr_v_en=0;
	SLR_VIP_TABLE *vipTable_shareMem = scaler_GetShare_Memory_VIP_TABLE_Struct();
	unsigned char which_source = 0;
	unsigned char which_table_index = 0;
	DRV_IEdgeSmooth_Coef *iegsm_coef=NULL;

	//Elsie 20141001: width detection
	unsigned short IWid;
	unsigned char di_en_flag, di_go_through_flag;
	iedge_smooth_edgesmooth_ex_ctrl_RBUS edgesmooth_ex_ctrl_reg;
	iedge_smooth_edsm_db_ctrl_RBUS       edsm_db_ctrl_reg;

	nr_mosquito_ctrl_RBUS nr_mosquito_ctrl_RBUS_reg;

	di_im_di_active_window_control_RBUS di_active_window_control_reg;
	di_im_di_weave_window_control_RBUS di_weave_window_control_reg;
	di_im_di_control_RBUS di_im_di_control_reg;
	vgip_vgip_chn1_act_hsta_width_RBUS vgip_chn1_act_hsta_width_reg;
	vgip_data_path_select_RBUS vgip_data_path_select_reg1;

	if (RPC_system_info_structure_table)
		which_source=(RPC_system_info_structure_table->VIP_source);


	di_im_di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
	di_active_window_control_reg.regValue = rtd_inl(DI_IM_DI_ACTIVE_WINDOW_CONTROL_reg);
	di_weave_window_control_reg.regValue = rtd_inl(DI_IM_DI_WEAVE_WINDOW_CONTROL_reg);
	vgip_chn1_act_hsta_width_reg.regValue = rtd_inl(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	vgip_data_path_select_reg1.regValue = rtd_inl(VGIP_Data_Path_Select_reg);

	edgesmooth_ex_ctrl_reg.regValue = rtd_inl(IEDGE_SMOOTH_EdgeSmooth_EX_CTRL_reg);
	nr_mosquito_ctrl_RBUS_reg.regValue = rtd_inl(NR_MOSQUITO_CTRL_reg);
	edsm_db_ctrl_reg.regValue =         rtd_inl(IEDGE_SMOOTH_EDSM_DB_CTRL_reg);

    // get current width
	di_en_flag = di_im_di_control_reg.ip_enable;
	di_go_through_flag = vgip_data_path_select_reg1.uzd1_in_sel;

	if(di_en_flag & di_go_through_flag)
	{
		// width from DI
		IWid = ((di_weave_window_control_reg.hsize_msb<<11)+di_active_window_control_reg.hsize);
	}
	else	// Elsie 20141119: not go through DI, width from VGIP
	{
		IWid = vgip_chn1_act_hsta_width_reg.ch1_ih_act_wid;
	}


    // for vertical mosquito NR line mode select
	mnr_v_en = nr_mosquito_ctrl_RBUS_reg.mosquitonr_vertical_en;

	if( mnr_v_en==1 && IWid<=1024)
	{
		edgesmooth_ex_ctrl_reg.lbuf_linemode = 2; // 11 line
		if(edsm_db_ctrl_reg.edsm_db_en)
		{
			edsm_db_ctrl_reg.edsm_db_apply=1;
		}
	}
	else if (vipTable_shareMem)
	{
		nr_mosquito_ctrl_RBUS_reg.mosquitonr_vertical_en = 0; // disable vertical mosquito NR when width over 1024
		// use line mode set in IEGSM table
		which_table_index = vipTable_shareMem->VIP_QUALITY_Extend2_Coef[which_source][VIP_QUALITY_FUNCTION_iESM_table];
		iegsm_coef = &vipTable_shareMem->I_EDGE_Smooth_Coef[which_table_index];
	}

	rtd_outl(IEDGE_SMOOTH_EdgeSmooth_EX_CTRL_reg, edgesmooth_ex_ctrl_reg.regValue);
	rtd_outl(NR_MOSQUITO_CTRL_reg,nr_mosquito_ctrl_RBUS_reg.regValue);
	rtd_outl(IEDGE_SMOOTH_EDSM_DB_CTRL_reg,edsm_db_ctrl_reg.regValue);
}
unsigned char scalerVIP_Get_hpan_vfir()
{
	return h_pan_vfir_value;
}
void scalerVIP_Set_hpan_vfir(unsigned char value)
{
	if (value > 32)
		value = 32; //for clip
	h_pan_vfir_value = value;
}
void scalerVIP_Set_vfir_ctrl(unsigned char enable)
{
	iedge_smooth_vfilter_0_RBUS vfilter_reg;
	vfilter_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_0_reg);

	if (enable)
		vfilter_reg.avlpf_en = 1;
	else
		vfilter_reg.avlpf_en = 0;

	rtd_outl(IEDGE_SMOOTH_VFILTER_0_reg, vfilter_reg.regValue);
}



void scalerVIP_Dynamic_Vertical_NR(void)
{
	static unsigned char pre_source =255;
	iedge_smooth_vfilter_0_RBUS iedge_smooth_vfilter_reg;
	unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);
	static unsigned char ori_vnr_weight=0;
	static unsigned char ori_text_coring=0;
	color_sharp_dm_peaking_bound_1_RBUS color_sharp_dm_peaking_bound_1_reg;
	//unsigned char hpan_vfir=0,tnr_vfir=0,vfir_value;
	//unsigned char sat_th=60;
	static int vfir_weight = 0;
	vdtop_noise_status_RBUS vdtop_noise_status_reg;
	char temp=0;
	int TargetWeight=0;
	unsigned char spatial_noise_level = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_SPATIAL_NOISE_LEVEL);
	//unsigned char temporal_noise_level = scalerVIP_DI_MiddleWare_GetStatus(STATUS_CONTENT_TEMPORAL_NOISE_LEVEL);

	iedge_smooth_vfilter_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_0_reg);
	color_sharp_dm_peaking_bound_1_reg.regValue= rtd_inl(COLOR_SHARP_DM_PEAKING_BOUND_1_reg);

	if(pre_source !=cur_source)
	{
		ori_vnr_weight=iedge_smooth_vfilter_reg.vfir_weight;
		ori_text_coring = color_sharp_dm_peaking_bound_1_reg.lv;
	}
	pre_source = cur_source;

	temp=iedge_smooth_vfilter_reg.vfir_weight;


	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Reverse_3==TRUE))
	{
	//	ROSPrintf("SNR=%d,TNR=%d,tmp=%d\n", spatial_noise_level,temporal_noise_level,temp);
	}
	switch(cur_source)
	{
		case VIP_QUALITY_HDMI_480P:
		case VIP_QUALITY_HDMI_576P:
		case VIP_QUALITY_HDMI_720P:
		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_HDMI_576I:

			break;


		case VIP_QUALITY_DTV_480I:
		case VIP_QUALITY_DTV_576I:
		case VIP_QUALITY_DTV_480P:
		case VIP_QUALITY_DTV_576P:


		break;
		case VIP_QUALITY_HDMI_1080I:
		case VIP_QUALITY_HDMI_1080P:

			//rtd_outl(IEDGE_SMOOTH_VFILTER_0_reg, iedge_smooth_vfilter_reg.regValue);


		break;
		case VIP_QUALITY_CVBS_NTSC :
		{
	            static unsigned char pre_vif_weight = 0;
	            unsigned char TargetWeight = iedge_smooth_vfilter_reg.vfir_weight;

	            if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1))
	                TargetWeight = 5;

	            if( scalerVIP_DI_MiddleWare_GetStatus(STATUS_VPAN) >= 2 )
	                TargetWeight = 20;

	            if( pre_vif_weight < TargetWeight )
	                pre_vif_weight++;
	            else if( pre_vif_weight > TargetWeight )
	                pre_vif_weight--;
	            else
	                pre_vif_weight = pre_vif_weight;

	            if( pre_vif_weight > 31 )
	                pre_vif_weight = 31;

	            iedge_smooth_vfilter_reg.vfir_weight = pre_vif_weight;
	            rtd_outl(IEDGE_SMOOTH_VFILTER_0_reg, iedge_smooth_vfilter_reg.regValue);

	            if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Reverse_3==TRUE))
	                ROSPrintf("(NTSC) lpf target value = %d, write %d\n", TargetWeight, iedge_smooth_vfilter_reg.vfir_weight);

	      		  break;
	        }
		case VIP_QUALITY_CVBS_PAL:
		{
	            static unsigned char pre_vif_weight = 0;
	            unsigned char TargetWeight = iedge_smooth_vfilter_reg.vfir_weight;

	            if((scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1))
	                TargetWeight = 5;

	            if( scalerVIP_DI_MiddleWare_GetStatus(STATUS_VPAN) >= 2 )
	                TargetWeight = 20;

	            if( DynamicOptimizeSystem[189] == 1 )
	                TargetWeight = 10;

	            if( pre_vif_weight < TargetWeight )
	                pre_vif_weight++;
	            else if( pre_vif_weight > TargetWeight )
	                pre_vif_weight--;
	            else
	                pre_vif_weight = pre_vif_weight;

	            if( pre_vif_weight > 31 )
	                pre_vif_weight = 31;

	            iedge_smooth_vfilter_reg.vfir_weight = pre_vif_weight;
	            rtd_outl(IEDGE_SMOOTH_VFILTER_0_reg, iedge_smooth_vfilter_reg.regValue);

	            if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Reverse_3==TRUE))
	                ROSPrintf("(PAL) lpf target value = %d, write %d\n", TargetWeight, iedge_smooth_vfilter_reg.vfir_weight);

	            break;
	        }
	       // case VIP_QUALITY_TV_NTSC: //tv ntsc
	        case VIP_QUALITY_TV_PAL:
	        case VIP_QUALITY_TV_PAL_M:
	        case VIP_QUALITY_TV_SECAN:
	        case VIP_QUALITY_TV_NTSC443:
	        {

	            vdtop_noise_status_reg.regValue = VDPQ_rtd_inl(VDTOP_NOISE_STATUS_reg);
	            TargetWeight = 20 + vdtop_noise_status_reg.status_noise + spatial_noise_level;

	            if( TargetWeight > vfir_weight )
	                vfir_weight++;
	            else if( TargetWeight < vfir_weight )
	                vfir_weight--;
	            else
	                vfir_weight = vfir_weight;

	            if( vfir_weight > 26 )
	                vfir_weight = 26;
	            else if( vfir_weight < 0 )
	                vfir_weight = 0;

	            iedge_smooth_vfilter_reg.vfir_weight = vfir_weight;
	            rtd_outl(IEDGE_SMOOTH_VFILTER_0_reg, iedge_smooth_vfilter_reg.regValue);
	            break;
	        }
		default:
			break;
	}


}
void scalerVIP_BTR_Detecte(void)
{
	static unsigned char pre_source =255;
	static unsigned char ori_btr=0;
	unsigned char cur_source=0;
	_RPC_system_setting_info* RPC_system_info_structure_table = NULL;
	di_im_di_btr_control_RBUS BTR_Control_Reg;
	unsigned char motionl_level = scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION);
	BTR_Control_Reg.regValue=rtd_inl(DI_IM_DI_BTR_CONTROL_reg);

	RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if(RPC_system_info_structure_table == NULL || SmartPic_clue ==NULL){
		if(MA_print_count%360==0)
			ROSPrintf("scalerVIP_BTR_Detecte Share Memory PQ data ERROR, system_info = %p,SmartPic_clue=%p \n",RPC_system_info_structure_table, SmartPic_clue);
		return;
	}
	cur_source=(RPC_system_info_structure_table->VIP_source);

	if(pre_source !=cur_source)
	{
		ori_btr=BTR_Control_Reg.btr_blendtemporalrecoveryen;
	}
	pre_source = cur_source;

	//ROSPrintf("motionl_level=%d \n", motionl_level);

	switch(cur_source)
	{
		case VIP_QUALITY_CVBS_NTSC:
		case VIP_QUALITY_CVBS_PAL:
		case VIP_QUALITY_CVBS_S_NTSC:
		case VIP_QUALITY_CVBS_S_PAL:
		case VIP_QUALITY_TV_NTSC:
		case VIP_QUALITY_TV_PAL:
		case VIP_QUALITY_YPbPr_480I:
		case VIP_QUALITY_YPbPr_576I:
		case VIP_QUALITY_HDMI_480I:
		case VIP_QUALITY_HDMI_576I:
		case VIP_QUALITY_DTV_480I:
		case VIP_QUALITY_DTV_576I:
		case VIP_QUALITY_CVBS_SECAN:
		case VIP_QUALITY_CVBS_S_SECAN:
		case VIP_QUALITY_TV_SECAN:
		case VIP_QUALITY_SCART_NTSC:
		case VIP_QUALITY_SCART_PAL:
		case VIP_QUALITY_SCART_SECAN:
		case VIP_QUALITY_SCART_RGB_NTSC:
		case VIP_QUALITY_SCART_RGB_PAL:
		case VIP_QUALITY_SCART_RGB_SECAN:
		case VIP_QUALITY_CVBS_PAL_M:
		case VIP_QUALITY_CVBS_S_PAL_M:
		case VIP_QUALITY_TV_PAL_M:
		case VIP_QUALITY_TV_NTSC443:
			if(((motionl_level<4)||(SmartPic_clue->SceneChange_NR))&&ori_btr==1)
			{
				BTR_Control_Reg.btr_blendtemporalrecoveryen=0;
				rtd_outl(DI_IM_DI_BTR_CONTROL_reg, BTR_Control_Reg.regValue);
			}
			else
			{
				BTR_Control_Reg.btr_blendtemporalrecoveryen=1;
				rtd_outl(DI_IM_DI_BTR_CONTROL_reg, BTR_Control_Reg.regValue);
			}

		break;
	default:

		break;
	}

	#if 0	//20150724 roger mark, we have new method to avoid fall into film22
	if(system_info_structure_table->Project_ID == VIP_Project_ID_TV006){
		if (cur_source == VIP_QUALITY_HDMI_1080I){
		di_im_di_control_RBUS di_control_reg;
		di_control_reg.regValue = rtd_inl(DI_IM_DI_CONTROL_reg);
			if (motionl_level <= 15){ // global motion less then 15 disable 22 film mode
			di_control_reg.film_enable = di_control_reg.film_enable & 0x1B; //11011
			}else {
			di_control_reg.film_enable = 0x1C;// 11100
		}
		rtd_outl(DI_IM_DI_CONTROL_reg, di_control_reg.regValue);
	}
	}
	#endif
}

void scalerVIP_Dynamic_DeXCXL_CTRL(_RPC_system_setting_info *VIP_RPC_system_info_structure_table, SLR_VIP_TABLE* Share_VIP_TABLE_Struct, _RPC_clues* RPC_SmartPic_clue)
{
	static unsigned char pre_force_disable = 255;
	unsigned char force_disable = 0;
	unsigned char de_xc_tbl_sel = 0;
	unsigned char vip_src;
	int mSpeed;
	int frmrate;

	de_xcxl_de_xcxl_ctrl_RBUS de_xcxl_de_xcxl_ctrl_reg;
	de_xcxl_de_xcxl_db_reg_ctl_RBUS de_xcxl_de_xcxl_db_reg_ctl_reg;
	SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
	if(gVip_Table==NULL){
		return;
	}
	if((RPC_SmartPic_clue == NULL) ||(VIP_RPC_system_info_structure_table == NULL) || (Share_VIP_TABLE_Struct == NULL)) {
		ROS_XCprintf_Info("scalerVIP_Dynamic_DeXCXL_CTRL DISABLED! VIP_RPC_system_info_structure_table = %p, Share_VIP_TABLE_Struct = %p, RPC_SmartPic_clue = %p,\n",
				VIP_RPC_system_info_structure_table, Share_VIP_TABLE_Struct, RPC_SmartPic_clue);
		return;
	}

        if(fwif_color_get_force_I_De_XC_En()==1)
        {
                return;
        }

	vip_src = VIP_RPC_system_info_structure_table->VIP_source;
	mSpeed = Scaler_ChangeUINT32Endian( RPC_SmartPic_clue->MEMC_VCPU_setting_info.vo_channel_speed );
	frmrate = Scaler_VOInfoPointer(0)->v_freq;
	de_xcxl_de_xcxl_ctrl_reg.regValue = rtd_inl(DE_XCXL_De_XCXL_CTRL_reg);

	// disable DeXCXL if playback speed is not 1x, MEMC film and pan
	if((mSpeed != 256) || (sat_ratio_mean_value <=35)  || (pattern_gen_pan_flag == 1))
		force_disable = 1;
	else
		force_disable = 0;

	if (pre_force_disable != force_disable) {
		pre_force_disable = force_disable;
		de_xcxl_de_xcxl_ctrl_reg.dexc_en = 0;
		if (force_disable == 0 && drv_memory_Get_I_De_XC_Mem_Ready_Flag(0) == 1) {
			//gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
			de_xc_tbl_sel= gVip_Table->VIP_QUALITY_Extend_Coef[vip_src][VIP_QUALITY_FUNCTION_I_De_XC];
			if(de_xc_tbl_sel >= I_De_XC_TBL_Max)
				de_xc_tbl_sel =0;
			de_xcxl_de_xcxl_ctrl_reg.dexc_en = I_De_XC_TBL[de_xc_tbl_sel].dexc_en;
		}
	}

	// dexc mode auto control, only enable PAL mode @25 or 50Hz
	if((frmrate >= 248 && frmrate <= 252) ||( (frmrate >= 498) && (frmrate <= 502)))
	{
		de_xcxl_de_xcxl_ctrl_reg.dexc_detect_type = 2; // Both NTSC & PAL
	}
	else
	{
		de_xcxl_de_xcxl_ctrl_reg.dexc_detect_type = 0; // NTSC only
	}

	ROS_XCprintf_Info("[scalerVIP_Dynamic_DeXCXL_CTRL] Info: VO channel speed = %d, Frame rate = %d\n", mSpeed, frmrate );
	ROS_XCprintf_Info("[scalerVIP_Dynamic_DeXCXL_CTRL]       sat_ratio_mean_value = %d, pan_flag = %d\n", sat_ratio_mean_value, pattern_gen_pan_flag );
	ROS_XCprintf_Info("[scalerVIP_Dynamic_DeXCXL_CTRL] Apply: DeXC enable = %d, DeXC force disable = %d, Detect type = %d\n", de_xcxl_de_xcxl_ctrl_reg.dexc_en, force_disable, de_xcxl_de_xcxl_ctrl_reg.dexc_detect_type );

	rtd_outl( DE_XCXL_De_XCXL_CTRL_reg, de_xcxl_de_xcxl_ctrl_reg.regValue );
	// db apply
	de_xcxl_de_xcxl_db_reg_ctl_reg.regValue = rtd_inl(DE_XCXL_DE_XCXL_db_reg_ctl_reg);
	de_xcxl_de_xcxl_db_reg_ctl_reg.db_apply = 1;
	rtd_outl( DE_XCXL_DE_XCXL_db_reg_ctl_reg, de_xcxl_de_xcxl_db_reg_ctl_reg.regValue );

}

void scalerVIP_IP_OnOff_By_MEMC_Film(_RPC_system_setting_info* system_RPC_info_structure_table) //rord.tsao 2016/0325
{
	// when content is film need disable smd.
	// some time film detected not correct in pq block,used memc film flag to disable.

	di_di_smd_additionalcoeff1_RBUS init_di_smd_additionalcoeff1_reg;
	di_color_recovery_option_RBUS Color_Recovery_Option_Reg;
	di_im_di_pan_detection_control_1_RBUS di_pan_detection_control_1_reg;
	di_im_di_hfd_ma_error_recovery_RBUS di_im_di_hfd_ma_error_recovery_reg;

	static unsigned char isFilm = 40;
	unsigned char vip_src,smd_table_sel,ori_smd_result;
	SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
#ifdef fix_compile_error_MEMC
	unsigned char *FilmInfo = Scaler_MEMC_GetCadence();
#else
	unsigned char *FilmInfo = &g_scaler_memc_cadence_temp[0];
#endif

        if(gVip_Table==NULL){
		return;
	}
	if((RPC_SmartPic_clue == NULL) ||(system_RPC_info_structure_table == NULL) )
        {

		return;
	}

	vip_src = system_RPC_info_structure_table->VIP_source;
        smd_table_sel = gVip_Table->VIP_QUALITY_Coef[vip_src][VIP_QUALITY_FUNCTION_DI_SMD_Level];

        if (smd_table_sel < sizeof(gSMDtable)/sizeof(DRV_di_smd_table_t))
                ori_smd_result=gSMDtable[smd_table_sel].smd_additionalcoeff.result_en;
       else
                ori_smd_result=gSMDtable[0].smd_additionalcoeff.result_en;


	// -----------------------------------------------------------------------------
	// Determin is Film or not

	// Film information from MEMC

	if( FilmInfo == NULL )
	{
		if( MA_print_count%120 == 0)
			ROSPrintf("[%s] Film information ptr from MEMC error\n", __func__);
		return;
	}

        Film_status = FilmInfo[_FILM_MEMC_OUT_ALL];

	// Debounce
	if( FilmInfo[_FILM_MEMC_OUT_ALL] == 0 && isFilm > 0 )
		isFilm--;
	else if( FilmInfo[_FILM_MEMC_OUT_ALL] != 0 )
		isFilm = 40;
	// -----------------------------------------------------------------------------

	init_di_smd_additionalcoeff1_reg.regValue= rtd_inl(DI_DI_SMD_AdditionalCoeff1_reg);
	Color_Recovery_Option_Reg.regValue = rtd_inl(DI_Color_Recovery_Option_reg);
	if((DynamicOptimizeSystem[174]==1)&&(Color_Recovery_Option_Reg.game_mode_3a!=1))
	{

		if(init_di_smd_additionalcoeff1_reg.smd_result_en!=1)
		{
			di_double_buff_apply =1;
	 	}
		init_di_smd_additionalcoeff1_reg.smd_result_en =1;
		rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

	}
	else if( (isFilm!=0) || (Color_Recovery_Option_Reg.game_mode_3a==1)||
                scalerVIP_DI_MiddleWare_MCNR_Get_Pan_Flag()==1 ||(drv_memory_get_game_mode_dynamic_flag()==1))
	{
		if(init_di_smd_additionalcoeff1_reg.smd_result_en!=0)
		{
			di_double_buff_apply =1;
		}

		init_di_smd_additionalcoeff1_reg.smd_result_en =0;
		rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

		if(system_RPC_info_structure_table->VIP_source ==VIP_QUALITY_HDMI_576I||RPC_system_info_structure_table->VIP_source ==VIP_QUALITY_HDMI_480I)
		{
			di_pan_detection_control_1_reg.regValue = rtd_inl(DI_IM_DI_PAN_DETECTION_CONTROL_1_reg);
			di_pan_detection_control_1_reg.pan_en=0;
			rtd_outl(DI_IM_DI_PAN_DETECTION_CONTROL_1_reg,di_pan_detection_control_1_reg.regValue);
		}
	}
	else if((static_move==1)&&(Color_Recovery_Option_Reg.game_mode_3a!=1)&&(isFilm==0))
	{

		if(init_di_smd_additionalcoeff1_reg.smd_result_en!=1)
		{
			di_double_buff_apply =1;
	 	}
		init_di_smd_additionalcoeff1_reg.smd_result_en =1;
		rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

	}
        else
        {
		if(init_di_smd_additionalcoeff1_reg.smd_result_en != ori_smd_result)
		{
			di_double_buff_apply =1;
	 	}
		init_di_smd_additionalcoeff1_reg.smd_result_en =ori_smd_result;
		rtd_outl(DI_DI_SMD_AdditionalCoeff1_reg, init_di_smd_additionalcoeff1_reg.regValue);

        }

	/* HMC off while film*/
	di_im_di_hfd_ma_error_recovery_reg.regValue = rtd_inl(DI_IM_DI_HFD_MA_ERROR_RECOVERY_reg);
	//if (FilmInfo[_FILM_MEMC_OUT_ALL] != 0)
	if( isFilm != 0 || (drv_memory_get_game_mode_dynamic_flag()==1))
	{
		film_for_rtnr =1;

		di_im_di_hfd_ma_error_recovery_reg.hmc_window_en = 1;
		di_im_di_hfd_ma_error_recovery_reg.hmc_window_top = 0;
		di_im_di_hfd_ma_error_recovery_reg.hmc_window_bot = 1023;
	}
	else
	{
		film_for_rtnr =0;
		di_im_di_hfd_ma_error_recovery_reg.hmc_window_en = 0;
	}
	rtd_outl(DI_IM_DI_HFD_MA_ERROR_RECOVERY_reg, di_im_di_hfd_ma_error_recovery_reg.regValue);
	if(di_double_buff_apply ==1)
	{
		di_db_reg_ctl_RBUS  db_reg_ctl_reg;

		db_reg_ctl_reg.regValue = IoReg_Read32(DI_db_reg_ctl_reg);
		db_reg_ctl_reg.db_apply=1;
		rtd_outl(DI_db_reg_ctl_reg,db_reg_ctl_reg.regValue);
		di_double_buff_apply =0;
	}


}
#if 0 //
void scalerVIP_SMD_weake_move_Detecte(void)
{

	di_di_gst_fmv_pan_coeff2_RBUS di_di_gst_fmv_pan_coeff2;
	di_di_smd_sampling_gmvc_RBUS di_di_smd_sampling_gmvc;
	di_di_smd_gmvcoeff3_RBUS init_di_smd_gmvcoeff3_reg;
	di_di_smd_gmvcoeff1_RBUS smd_gmvcoeff1_reg;
	di_di_smd_gmvcoeff2_RBUS smd_gmvcoeff2_reg;
	di_di_smd_choosecandidate_RBUS smd_choosecandidate_reg;
	// chen 170522
//	di_im_di_zoommotion_detector_RBUS zoommotion_detector_reg;
	// end chen 170522
	di_di_smd_additionalcoeff2_RBUS init_di_smd_additionalcoeff2_reg;

	unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);

	unsigned char hgmv=0,vgmv=0;
	unsigned short match_percent1=0,match_percent2=0;
	char which_source=(RPC_system_info_structure_table->VIP_source);
	unsigned char motionl_level = scalerVIP_DI_MiddleWare_GetStatus(STATUS_MOTION);

	if(which_source == VIP_QUALITY_HDMI_1080I)
		return;
	di_di_gst_fmv_pan_coeff2.regValue=rtd_inl(DI_DI_GST_FMV_Pan_Coeff2_reg);
	di_di_gst_fmv_pan_coeff2.gst_fmvhist_sad_diff=1;
	rtd_outl(DI_DI_GST_FMV_Pan_Coeff2_reg, di_di_gst_fmv_pan_coeff2.regValue);

	di_di_smd_sampling_gmvc.regValue=rtd_inl(DI_DI_SMD_Sampling_GMVc_reg);
	if((DynamicOptimizeSystem[107]==1)&&cur_source==VIP_QUALITY_HDMI_1080I)
	{
	//	di_di_smd_sampling_gmvc.smd_close2gmv_mvselect =3;
	}
	else
	{
	//	di_di_smd_sampling_gmvc.smd_close2gmv_mvselect =3;
	}
	rtd_outl(DI_DI_SMD_Sampling_GMVc_reg, di_di_smd_sampling_gmvc.regValue);

	init_di_smd_gmvcoeff3_reg.regValue=rtd_inl(DI_DI_SMD_GMVCoeff3_reg);
	hgmv =init_di_smd_gmvcoeff3_reg.smd_gmv1_x;
	vgmv =init_di_smd_gmvcoeff3_reg.smd_gmv1_y;


	if(((hgmv==3)&&(vgmv==3))||DynamicOptimizeSystem[180]==1) //hGMV , VGMA=0
	{
		smd_gmvcoeff1_reg.regValue= rtd_inl(DI_DI_SMD_GMVCoeff1_reg);
		smd_gmvcoeff2_reg.regValue= rtd_inl(DI_DI_SMD_GMVCoeff2_reg);
		smd_choosecandidate_reg.regValue =  rtd_inl(DI_DI_SMD_ChooseCandidate_reg);
		// chen 170522
//		zoommotion_detector_reg.regValue= rtd_inl(DI_IM_DI_ZoomMotion_Detector_reg);
// end chen 170522
		init_di_smd_additionalcoeff2_reg.regValue =  rtd_inl(DI_DI_SMD_AdditionalCoeff2_reg);

		if(smd_gmvcoeff1_reg.smd_gmv_ctr==0)
			smd_gmvcoeff1_reg.smd_gmv_ctr=1;


		match_percent1 = smd_gmvcoeff1_reg.smd_gmv1_max_ctr*100/smd_gmvcoeff1_reg.smd_gmv_ctr;
		match_percent2=smd_gmvcoeff2_reg.smd_gmv2_max_ctr*100/smd_gmvcoeff1_reg.smd_gmv_ctr;

//		if((match_percent1>95&&match_percent2<10&&motionl_level<3)||zoommotion_detector_reg.smd_zoommotion_flag !=0||DynamicOptimizeSystem[180]==1)
// chen 170522
		if((match_percent1>95&&match_percent2<10&&motionl_level<3)||DynamicOptimizeSystem[180]==1)
// end chen 170522
		{
			smd_choosecandidate_reg.smd_reliablerange_sad_th=50;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x1f;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=0x07;

		}
		else
		{
			smd_choosecandidate_reg.smd_reliablerange_sad_th=125;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset=0x0f;
			init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain=0x02;

		}
		gSmd_weak_move =smd_choosecandidate_reg.smd_reliablerange_sad_th; // for lg pattern used
		gSmd_offset = init_di_smd_additionalcoeff2_reg.smd_search_gmv_offset;
		gSmd_gain=init_di_smd_additionalcoeff2_reg.smd_search_gmv_gain;

		//rtd_outl(DI_DI_SMD_CHOOSECANDIDATE_reg, smd_choosecandidate_reg.regValue);
		rtd_outl(DI_DI_SMD_AdditionalCoeff2_reg,init_di_smd_additionalcoeff2_reg.regValue);

		if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Slow_Motion1==TRUE))
		{
			ROSPrintf("total_gmv=%d, gmv1=%d ,gmv2=%d \n ",smd_gmvcoeff1_reg.smd_gmv_ctr,smd_gmvcoeff1_reg.smd_gmv1_max_ctr, smd_gmvcoeff2_reg.smd_gmv2_max_ctr);
			ROSPrintf("match_percent1=%d, match_percent2=%d \n ", match_percent1,match_percent2);
	// chen 170522
	//		ROSPrintf("motionl_level=%d, zoom=%d \n", motionl_level,zoommotion_detector_reg.smd_zoommotion_flag);
// end chen 170522
		}
		if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.Slow_Motion2==TRUE))
		{
			ROSPrintf("DynamicOptimizeSystem[180]=%d\n", DynamicOptimizeSystem[180]);
			ROSPrintf("choosecandidate=%d\n",smd_choosecandidate_reg.regValue);
			ROSPrintf("\n \n");

		}

	}
}
#endif
void scalerVIP_quality_init(unsigned long arg)
{
	//========== clear mpegnr data ==========
	unsigned int* init_value = (unsigned int*)arg;
	mpegnr_ich1_det_hist_hor_step_RBUS ich1_det_hist_hor_step_reg;
	//clear mpeg nr data
	NoiseSum_spatial=0;
	MpegRatioSum=0;
	MpegRatioSum_Count=0;
	ContainStill_Count=0;
	Field_Count=0;
	kernel_quality_init=1;

	//flora, add for Sirius non8x8 detector
	XSTEP_NUM= (unsigned char)(*(init_value+QUALITY_INIT_MPEGNR));
	/*
	ROSPrintf("1.[mpeg_data_reset]ucMode_Curr=%d\n",scaler_disp_info[SLR_MAIN_DISPLAY].ucMode_Curr);
	ROSPrintf("1.[mpeg_data_reset]XSTEP_NUM=%d\n",XSTEP_NUM);
	*/
	xstep_idx_detect=0;
	xstep_idx_apply=0;
	ich1_det_hist_hor_step_reg.regValue = scaler_rtd_inl(MPEGNR_ICH1_det_Hist_Hor_step_reg);
	ich1_det_hist_hor_step_reg.cp_histhor_det_xstep=array_xstep[0];
	scaler_rtd_outl(MPEGNR_ICH1_det_Hist_Hor_step_reg, ich1_det_hist_hor_step_reg.regValue);

	//========== ICM global saturation ==========
	//scalerVip_ICM_Global_Sat = *(init_value+QUALITY_INIT_ICM_GLOBAL_SAT);
	//ROSPrintf("ooo---scalerVIP_SetICM_Global_Sat=%x ---ooo\n",scalerVip_ICM_Global_Sat);

	//========== dcc table select ==========
	//scalerDrvPrint("DCLlinux");
	//DCC_TABLE_Select = (unsigned char)(*(init_value+QUALITY_INIT_DCC_TABLE));
	//Main_Set_SC=1;//SceneChange
	//ROSPrintf("Main_DCC_TABLE_Select =%d \n",DCC_TABLE_Select);

	//========== dcc style ==========
	//DCC_Style = (unsigned char)(*(init_value+QUALITY_INIT_DCC_STYLE));
	//ROSPrintf("ooo---DCC_Style=%x ---ooo\n",DCC_Style);

	//========== scaler FIR H ==========
	//scalerVip_Scaler_FIR_H = (unsigned char)(*(init_value+QUALITY_INIT_SCALER_FIR_H));
	//ROSPrintf("ooo---scalerVIP_SetScaler_FIR_H=%x ---ooo\n",scalerVip_Scaler_FIR_H);

	//========== scaler FIR V ==========
	//scalerVip_Scaler_FIR_V = (unsigned char)(*(init_value+QUALITY_INIT_SCALER_FIR_V));
	//ROSPrintf("ooo---scalerVIP_SetScaler_FIR_V=%x ---ooo\n",scalerVip_Scaler_FIR_V);

	//========== DNR table ==========
	//DNR_TABLE_SECET = (unsigned char)(*(init_value+QUALITY_INIT_DNRTABLE));
}

void scalerVIP_picmode_init(unsigned long arg)
{

	unsigned int* init_value = (unsigned int*)arg;

	PictureMode = (unsigned char)(*(init_value+PICMODE_INIT_PICTURE_MODE));

	AUTO_NR_style = (unsigned char)(*(init_value+PICMODE_INIT_NR_STYLE));

	scalerVip_mpegNR = (SCALERVIP_MPEGNR)(*(init_value+PICMODE_INIT_MPEGNR));


	scalerDrvPrint("DCLlinux");
}

#ifdef ISR_IS_3DLR_FUNCTIOM_ENABLE
void scalerVIP_is3DLR(void)
{
	if((scalerInfo_getPanelInfo_3DPanelType() == 1) && (scalerInfo_check_is_3dMode() == TRUE) &&
		(VODMA_3D_Check_Is_Idma3dMode() == FALSE))
	{
		if(scalerInfo_getDisp3dInfo_3dType() == HDMI3D_SIDE_BY_SIDE_HALF)
		{
			is3DLRmode = TRUE;
		}
		else if(scalerInfo_getDisp3dInfo_3dType() == HDMI3D_TOP_AND_BOTTOM)
		{
			is3DLRmode = TRUE;
		}
		else if(scalerInfo_getDisp3dInfo_3dType() == HDMI3D_FRAME_PACKING)
		{
			is3DLRmode = FALSE;
		}
		else if(scalerInfo_getDisp3dInfo_3dType() ==HDMI3D_2D_CVT_3D)
		{
			is3DLRmode = FALSE;
		}
		else
		{
			is3DLRmode = FALSE;
		}
	}
	else
	{
		is3DLRmode = FALSE;
	}
}
#endif

void scalerVIP_TV003_MAD_Y(unsigned short *PQA_Input_Level, unsigned short *PQA_Input_rate)
{
	unsigned char count_Y = 8;
	di_im_di_rtnr_mad_y_th_RBUS im_di_rtnr_mad_y_th_reg;
	di_im_di_rtnr_mad_y_counter_RBUS im_di_rtnr_mad_y_counter_reg;

	unsigned int mad_y_th1_1[8] = 	{0x004,	0x008,	0x00c,	0x010,	0x014,	0x018,	0x01c,	0x001};
	unsigned int mad_y_th2_1[8] = 	{0x008,	0x00c,	0x010,	0x014,	0x018,	0x01c,	0x7ff,	0x004};
	unsigned int mad_y_th1_2[8] = 	{0x004,	0x008,	0x00c,	0x010,	0x014,	0x018,	0x020,	0x001};
	unsigned int mad_y_th2_2[8] = 	{0x00c,	0x010,	0x014,	0x018,	0x01c,	0x020,	0x7ff,	0x008};

	static unsigned int mad_y_count[8] = {0};
	static unsigned int mad_y_std[8] = {0};

	static unsigned char RTNR_level[8] = {0};

	static unsigned int MAD_count = 0;

	if(RPC_SmartPic_clue->SceneChange)
		return;

//	di_im_di_rtnr_mad_c_th_RBUS im_di_rtnr_mad_c_th_reg;
	im_di_rtnr_mad_y_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_TH_reg);
//	im_di_rtnr_mad_c_th_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_C_TH_reg);

#if 1
	if(SmartPic_clue->Hist_Y_Mean_Value<15)
	{
		im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = mad_y_th1_1[MAD_count%count_Y];
		im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = mad_y_th2_1[MAD_count%count_Y];
	}
	else if(SmartPic_clue->Hist_Y_Mean_Value<25)
	{
		im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = ((mad_y_th1_2[MAD_count%count_Y]-mad_y_th1_1[MAD_count%count_Y])*(SmartPic_clue->Hist_Y_Mean_Value-15)/(20-15))+mad_y_th1_1[MAD_count%count_Y];
		im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = ((mad_y_th2_2[MAD_count%count_Y]-mad_y_th2_1[MAD_count%count_Y])*(SmartPic_clue->Hist_Y_Mean_Value-15)/(20-15))+mad_y_th2_1[MAD_count%count_Y];
	}
	else
#endif
	{
		im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th1 = mad_y_th1_2[MAD_count%count_Y];
		im_di_rtnr_mad_y_th_reg.cp_temporal_mad_y_th2 = mad_y_th2_2[MAD_count%count_Y];
	}

	rtd_outl(DI_IM_DI_RTNR_MAD_Y_TH_reg, im_di_rtnr_mad_y_th_reg.regValue);
//	rtd_outl(DI_IM_DI_RTNR_MAD_C_TH_reg, im_di_rtnr_mad_c_th_reg.regValue);

	im_di_rtnr_mad_y_counter_reg.regValue = rtd_inl(DI_IM_DI_RTNR_MAD_Y_COUNTER_reg);

//	mad_y_count[MA_print_count%10] = (unsigned int)im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery;

//	mad_y_std[MAD_count%count_Y] = (ABS(im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery, mad_y_count[MAD_count%count_Y])>>7)*(ABS(im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery, mad_y_count[MAD_count%count_Y])>>7);
	mad_y_std[MAD_count%count_Y] = (ABS(im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery, mad_y_count[MAD_count%count_Y]))<<1;
	mad_y_count[MAD_count%count_Y] = (7 * (unsigned int)im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery + 1*mad_y_count[MAD_count%count_Y])>>3;
//	mad_y_std[MA_print_count%count_Y] = (3*((ABS(im_di_rtnr_mad_y_counter_reg.cp_temporal_mad_countery, mad_y_count[MA_print_count%count_Y])>>4)) + 1*mad_y_std[MA_print_count%count_Y])>>2;


	if(MAD_count%count_Y == 0)
	{

		unsigned char Max_level = 9;

		RTNR_level[0] = ((unsigned short)((mad_y_count[0]*1)/(mad_y_count[7]+1))>Max_level)?Max_level:((unsigned short)((mad_y_count[0]*1)/(mad_y_count[7]+1)));
		RTNR_level[1] = ((unsigned short)((mad_y_count[1]*2)/(mad_y_count[7]+1))>Max_level)?Max_level:((unsigned short)((mad_y_count[1]*2)/(mad_y_count[7]+1)));
		RTNR_level[2] = ((unsigned short)((mad_y_count[2]*3)/(mad_y_count[7]+1))>Max_level)?Max_level:((unsigned short)((mad_y_count[2]*3)/(mad_y_count[7]+1)));
		RTNR_level[3] = ((unsigned short)((mad_y_count[3]*4)/(mad_y_count[7]+1))>Max_level)?Max_level:((unsigned short)((mad_y_count[3]*4)/(mad_y_count[7]+1)));
		RTNR_level[4] = ((unsigned short)((mad_y_count[4]*5)/(mad_y_count[7]+1))>Max_level)?Max_level:((unsigned short)((mad_y_count[4]*5)/(mad_y_count[7]+1)));
		RTNR_level[5] = ((unsigned short)((mad_y_count[5]*6)/(mad_y_count[7]+1))>Max_level)?Max_level:((unsigned short)((mad_y_count[5]*6)/(mad_y_count[7]+1)));
		RTNR_level[6] = ((unsigned short)((mad_y_count[6]*7)/(mad_y_count[7]+1))>Max_level)?Max_level:((unsigned short)((mad_y_count[6]*7)/(mad_y_count[7]+1)));

#if 0
#if 1
		ROSPrintf("a = 	");
		for(i = 0; i< count_Y; i++)
		{
			ROSPrintf("%d,	",mad_y_count[i]);
		}
		ROSPrintf("\n");
		ROSPrintf("b = 	");
		for(i = 0; i< count_Y; i++)
		{
			ROSPrintf("%d,	",mad_y_std[i]);
		}
		ROSPrintf("\n");
#endif
		ROSPrintf("c = 	");
		for(i = 0; i< count_Y; i++)
		{
			//ROSPrintf("%d,	",((unsigned short)(mad_y_count[i]/(mad_y_std[i]+1))));
			ROSPrintf("%d,	",RTNR_level[i]);
		}
		ROSPrintf("\n");
#endif
//		if((mad_y_count_sun!=0) && (mad_y_std_sun!=0))
//			ROSPrintf("b=	%d,		%d,		%d,		%d\n", mad_y_count_sun, mad_y_std_sun, ((mad_y_count_ave)/mad_y_count_sun), ((mad_y_std_ave)/mad_y_std_sun));
	}
	MAD_count++;
	PQA_Input_Level[I_003_RTNR_TH1] = ((unsigned char)PQA_Input_Level[I_003_RTNR_TH1]>RTNR_level[0])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH1]-1):(((unsigned char)PQA_Input_Level[I_003_RTNR_TH1]<RTNR_level[0])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH1]+1):((unsigned char)PQA_Input_Level[I_003_RTNR_TH1]));
	PQA_Input_Level[I_003_RTNR_TH2] = ((unsigned char)PQA_Input_Level[I_003_RTNR_TH2]>RTNR_level[1])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH2]-1):(((unsigned char)PQA_Input_Level[I_003_RTNR_TH2]<RTNR_level[1])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH2]+1):((unsigned char)PQA_Input_Level[I_003_RTNR_TH2]));
	PQA_Input_Level[I_003_RTNR_TH3] = ((unsigned char)PQA_Input_Level[I_003_RTNR_TH3]>RTNR_level[2])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH3]-1):(((unsigned char)PQA_Input_Level[I_003_RTNR_TH3]<RTNR_level[2])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH3]+1):((unsigned char)PQA_Input_Level[I_003_RTNR_TH3]));
	PQA_Input_Level[I_003_RTNR_TH4] = ((unsigned char)PQA_Input_Level[I_003_RTNR_TH4]>RTNR_level[3])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH4]-1):(((unsigned char)PQA_Input_Level[I_003_RTNR_TH4]<RTNR_level[3])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH4]+1):((unsigned char)PQA_Input_Level[I_003_RTNR_TH4]));
	PQA_Input_Level[I_003_RTNR_TH5] = ((unsigned char)PQA_Input_Level[I_003_RTNR_TH5]>RTNR_level[4])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH5]-1):(((unsigned char)PQA_Input_Level[I_003_RTNR_TH5]<RTNR_level[4])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH5]+1):((unsigned char)PQA_Input_Level[I_003_RTNR_TH5]));
	PQA_Input_Level[I_003_RTNR_TH6] = ((unsigned char)PQA_Input_Level[I_003_RTNR_TH6]>RTNR_level[5])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH6]-1):(((unsigned char)PQA_Input_Level[I_003_RTNR_TH6]<RTNR_level[5])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH6]+1):((unsigned char)PQA_Input_Level[I_003_RTNR_TH6]));
	PQA_Input_Level[I_003_RTNR_TH7] = ((unsigned char)PQA_Input_Level[I_003_RTNR_TH7]>RTNR_level[6])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH7]-1):(((unsigned char)PQA_Input_Level[I_003_RTNR_TH7]<RTNR_level[6])?((unsigned char)PQA_Input_Level[I_003_RTNR_TH7]+1):((unsigned char)PQA_Input_Level[I_003_RTNR_TH7]));

	PQA_Input_rate[I_003_RTNR_TH1] = 0;
	PQA_Input_rate[I_003_RTNR_TH2] = 0;
	PQA_Input_rate[I_003_RTNR_TH4] = 0;
	PQA_Input_rate[I_003_RTNR_TH5] = 0;
	PQA_Input_rate[I_003_RTNR_TH6] = 0;
	PQA_Input_rate[I_003_RTNR_TH7] = 0;
}



void scalerVIP_TV003_share_memory_table(unsigned long arg)
{
	ROSPrintf("scalerVIP_TV003_share_memory_table\n");
	TV003_share_memory_struct = (RPC_TV003_Table*)arg;
}


//#######################################################
//--------- NetFlix Smooth toggle Program -----------------------------------
void scalerVIP_NetFlix_smoothtoggle_enable(_RPC_clues* SmartPic_clue,_RPC_system_setting_info* RPC_system_info_structure_table)
{
	//_clues* SmartPic_clue=NULL;
	//_system_setting_info* system_info_structure_table = NULL;
	//SmartPic_clue = scaler_GetShare_Memory_SmartPic_Clue_Struct();
	//system_info_structure_table = scaler_GetShare_Memory_system_setting_info_Struct();

 if((RPC_system_info_structure_table->VIP_source >= VIP_QUALITY_PVR_480I) && (RPC_system_info_structure_table->VIP_source <=VIP_QUALITY_PVR_4k2kP_30))	//Netflix
 	RPC_SmartPic_clue->S_NetFlix_info.Netflix_Enable =1;
 else
 	RPC_SmartPic_clue->S_NetFlix_info.Netflix_Enable =0;
}

unsigned char scalerVIP_CheckRegisterAccessProtect(unsigned int regAddr)
{
	#define REG_BLOCK_VD 0xb8019000
	#define REG_BLOCK_MASK 0xfffff000
	//VD register
	if (((Scaler_InputSrcGetMainChFrom() != _SRC_FROM_VDC) || !vd_pwr_ok) && ((regAddr&REG_BLOCK_MASK)==REG_BLOCK_VD))
		return false;
	else
		return true;
}

#ifdef ISR_TV002_BRIGHTNESS_PLUS_FUNCTION_ENABLE
// for TV002 Brighness plus
unsigned short scalerVIP_Brightness_Plus_Cal_OverSat_Protect_Gain(unsigned short BP_Gain, unsigned char Max_Bright_bin, SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem, _clues* SmartPic_clue)
{
	unsigned int boundary = 235; // 16-235
	unsigned char weightMax=8, weightMax_bit=3;

	if(vipCustomTBL_ShareMem==NULL)
	{
		if(MA_print_count%250==0)
			ROSPrintf("Customer TBL is NULL, return\n");
		return BP_Gain;
	}

	unsigned short table_sel = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.BP_TBL_Select;
	unsigned short tol = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Gain_Limit.OverSat_Tol;
	unsigned short th = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Gain_Limit.OverSat_Th;
	unsigned short stepBit = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Gain_Limit.OverSat_StepBit;
	unsigned short BP_En = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Enable;
	unsigned short en = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Gain_Limit.Enable;
	unsigned short shiftBit = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.BP_Shift_Bit;

	unsigned int Gain_Value = BP_Gain;
	unsigned int Final_LimitGain = Gain_Value;
	unsigned int allowedY, allowedGain, tmp;
	unsigned short weight=0, i=0;
	unsigned short bin_ignore_th = th;
	unsigned short debug_Log = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log;
	unsigned short debug_Log_delay = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log_Delay;
	unsigned int *Y_hist_ratio = SmartPic_clue->Y_Main_Hist_Ratio;

	if(debug_Log_delay==0)
		debug_Log_delay=1;

	if(en==0 || Gain_Value<=di_pow(2, shiftBit) || BP_En==0)
		return BP_Gain;

	allowedY = (boundary*tol)>>shiftBit;

	for(i=0;i<(Max_Bright_bin);i++)
	{
		tmp = (Max_Bright_bin-i)*8-1;
		if(allowedY<=tmp)
			allowedGain=di_pow(2, shiftBit);
		else
			allowedGain = (allowedY<<shiftBit)/tmp;

		if(allowedGain>=Gain_Value)
			tmp = Gain_Value;
		else
		{

			if((Y_hist_ratio[Max_Bright_bin-i-1])>=bin_ignore_th)
				weight = 0;
			else if(stepBit>=10) // No Blending
				weight = weightMax;
			else
			{
				weight = (bin_ignore_th - (Y_hist_ratio[Max_Bright_bin-i-1])+((1<<stepBit)-1))>>stepBit;
				if(weight > weightMax)
					weight = weightMax;
			}
			tmp = (allowedGain*(weightMax - weight) + Gain_Value * weight)>>weightMax_bit;
		}
		//select min gain
		if(tmp<Final_LimitGain)
			Final_LimitGain = tmp;

		if((debug_Log&_BIT2)!=0)
		{
			if(MA_print_count%debug_Log_delay==0)
				ROSPrintf("=%d,%d,%d,%d,%d=\n",allowedGain, tmp, Final_LimitGain, weight, Gain_Value);
		}
	}


	if((debug_Log&_BIT1)!=0)
	{
		if(MA_print_count%debug_Log_delay==0)
			ROSPrintf("LC=%d,FC=%d\n",allowedY,Final_LimitGain);
	}

	return Final_LimitGain;
}

unsigned short scalerVIP_Brightness_Plus_Smooth_Gain_Cal(unsigned short BP_Gain, SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem)
{
	if(vipCustomTBL_ShareMem==NULL)
	{
		if(MA_print_count%250==0)
			ROSPrintf("Customer TBL is NULL, return\n");
		return BP_Gain;
	}

	unsigned short table_sel = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.BP_TBL_Select;
	unsigned short ini = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Init_Flag;
	unsigned short step = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Step;
	unsigned short delayF = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Delay_Flame;
	unsigned short Enable = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Enable;
	static unsigned short pre_Gain = 0;
	static unsigned short counter=0;
	unsigned short debug_Log = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log;
	unsigned short debug_Log_delay = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log_Delay;
	unsigned short BP_En = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Enable;

	if(debug_Log_delay==0)
		debug_Log_delay=1;

	if(step==0 || Enable==0 || BP_En==0)
		return BP_Gain;

	// bit0 for BP gain initialize, bit1 for offset initialize
	if(((ini&_BIT0)>>0)==1)
	{
		ini = ini&(~_BIT0);
		vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Init_Flag=ini;
		pre_Gain = BP_Gain;
		counter = 0;
		return BP_Gain;
	}

	if(counter > delayF)
	{
		if(BP_Gain>(pre_Gain+step))
			pre_Gain = pre_Gain + step;
		else if(BP_Gain<(pre_Gain-step))
			pre_Gain = pre_Gain - step;
		else
			pre_Gain = BP_Gain;
		counter = 0;

		//bit4 for smooth log
		if((debug_Log&_BIT4)!=0)
		{
			if(MA_print_count%debug_Log_delay==0)
				ROSPrintf("s=%d,%d\n",pre_Gain, BP_Gain);
		}
	}
	counter++;
	return pre_Gain;
}

short scalerVIP_Brightness_Plus_Smooth_Offset_Cal(short RGB_Offset, SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem)
{
	if(vipCustomTBL_ShareMem==NULL)
	{
		if(MA_print_count%250==0)
			ROSPrintf("Customer TBL is NULL, return\n");
		return RGB_Offset;
	}

	unsigned short table_sel = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.BP_TBL_Select;
	unsigned short ini = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Init_Flag;
	unsigned short step = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Step_offset;
	unsigned short delayF = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Delay_Flame_offset;
	unsigned short Enable = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Enable;
	static short pre_offset = 0;
	static unsigned short counter=0;
	//short pre_offset_tmp=0;
	unsigned short debug_Log = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log;
	unsigned short debug_Log_delay = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log_Delay;
	unsigned short BP_En = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Enable;

	if(debug_Log_delay==0)
		debug_Log_delay=1;

	if(step==0 || Enable==0 || BP_En==0)
		return RGB_Offset;

	// bit0 for BP gain initialize, bit1 for offset initialize
	if(((ini&_BIT1)>>1)==1)
	{
		ini = ini&(~_BIT1);
		vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Init_Flag=ini;
		pre_offset = RGB_Offset;
		counter = 0;
		return RGB_Offset;
	}

	if(counter > delayF)
	{
		if(RGB_Offset>(pre_offset+step))
			pre_offset = pre_offset + step;
		else if(RGB_Offset<(pre_offset-step))
			pre_offset = pre_offset - step;
		else
			pre_offset = RGB_Offset;
		counter = 0;

		//bit5 for smooth log
		if((debug_Log&_BIT5)!=0)
		{
			if(MA_print_count%debug_Log_delay==0)
				ROSPrintf("o=%d,%d\n",pre_offset, RGB_Offset);
		}
	}
	counter++;
	return pre_offset;
}


short scalerVIP_Brightness_Plus_Compensation_RGB_Offset_Cal(unsigned short BP_Gain, unsigned short APL, SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem, _system_setting_info* sysInfo_TBL)
{
	if(vipCustomTBL_ShareMem==NULL)
	{
		if(MA_print_count%250==0)
			ROSPrintf("Customer TBL is NULL, return\n");
		return 0;
	}

	unsigned short table_sel = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.BP_TBL_Select;
	unsigned short BP_En = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Enable;
	unsigned short en = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Enable;
	//unsigned char APL = Scaler_GetAutoMA(BP_APL);
	unsigned short debug_Log = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log;
	unsigned short debug_Log_delay = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log_Delay;
	unsigned short offset_Gain;
	unsigned short G1=0;
	unsigned short G2=0;
	unsigned short P1=0;
	unsigned short P2=0;
	short cmps=0;
	unsigned short shiftBit = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.BP_Shift_Bit;
	unsigned short i;

	if(debug_Log_delay==0)
		debug_Log_delay=1;

	vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Point[BP_SEG_0] = 0;  // fix as o
	vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Point[BP_SEG_MAX-1] = 255;	// fix as 255;

	// turn 0ff all sub function while BP is off
	if(BP_En==0)
		en=0;

	cmps=0;
	if(en==1)
	{
		if(APL==vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Point[BP_SEG_0])
			offset_Gain = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Gain[BP_SEG_0];
		else if(APL==vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Point[BP_SEG_MAX-1])
			offset_Gain = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Gain[BP_SEG_MAX-1];
		else
		{
			for(i=BP_SEG_1; i<BP_SEG_MAX; i++)
			{
				if(APL<=vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Point[i])
				{
					P1 = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Point[i-1];
					P2 = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Point[i];
					G1 = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Gain[i-1];
					G2 = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Cmps_Gain[i];
					break;
				}
			}
			if(P2==P1)
				offset_Gain = G1;
			else
				offset_Gain = G1 + ((G2-G1) * (APL-P1) / (P2-P1));
		}

		// negative error
		if(offset_Gain>1024)
			offset_Gain=0;

		// for precision issue and YUV2RGB out is 14 bit, using 14 bit(1024-15040) to calculate compensation instead of 8 bit(16-235)
		cmps = 1024-((1024*BP_Gain)>>shiftBit); // BP_Gain and offset_Gain is multiply by shiftBit
		cmps = (cmps*offset_Gain)>>shiftBit;
		// debug
		if((debug_Log&_BIT3)!=0)
		{
			if(MA_print_count%debug_Log_delay==0)
			{
				ROSPrintf("BP_CMPs=G1=%d,G2=%d,P1=%d,P2=%d,G=%d,", G1, G2, P1, P2, offset_Gain);
				ROSPrintf("cmps=%d,BP_Gain=%d\n", cmps, BP_Gain);
			}
		}
	}
	return cmps;
}

void scalerVIP_Brightness_Plus_Function(SLR_VIP_TABLE* vipTBL_shareMem, _clues* SmartPic_clue, _system_setting_info* sysInfo_TBL, SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem)
{
	if(vipTBL_shareMem==NULL || SmartPic_clue==NULL || sysInfo_TBL==NULL || vipCustomTBL_ShareMem==NULL)
	{
		if(MA_print_count%250==0)
		{
			ROSPrintf("Mem Null, return, VIP TBL=%x, smartPic=%x, sysInfo=%x, VIP_cus=%x\n",
				vipTBL_shareMem, SmartPic_clue, sysInfo_TBL, vipCustomTBL_ShareMem);
		}
	}

	if(vipCustomTBL_ShareMem==NULL)
	{
		if(MA_print_count%250==0)
			ROSPrintf("Customer TBL is NULL, return\n");
		return;
	}

	unsigned char i = 0;
	unsigned char APL = 0;
//	unsigned char cur_Gain_Value = 100;
	unsigned short G1 = 0; // Scaler_GetAutoMA(BP_G1);
	unsigned short G2 = 0; // Scaler_GetAutoMA(BP_G2);
	unsigned short P1 = 0; // Scaler_GetAutoMA(BP_P1);
	unsigned short P2 = 0; // Scaler_GetAutoMA(BP_P2);
	unsigned short tmp;
	unsigned char Max_Bright_bin= 32;
	unsigned int Gain_Value = 128;
	unsigned int DC_average = 0;
	unsigned int Total_HistCnt = 0;
	unsigned char debug_Log = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log;
	unsigned char debug_Log_delay = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Log_Delay;
	short RGB_offset_cmps;
	unsigned int *reg_HistCnt = SmartPic_clue->Y_Main_Hist;
	unsigned char Debug_EN = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Enable;
	unsigned char shiftBit = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.BP_Shift_Bit;
	unsigned char table_sel = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.BP_TBL_Select;
	DRV_VIP_YUV2RGB_CSMatrix drv_vipCSMatrix_t;
	unsigned char BP_En = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Enable;
	short k11,k12,k13,k22,k23,k32,k33;

	short R,G,B;

	if(debug_Log_delay==0)
		debug_Log_delay=1;

	for(i=0;i<(Max_Bright_bin);i++)
	{
		DC_average+= reg_HistCnt[i]*( i*8);
		Total_HistCnt+= reg_HistCnt[i];
	}

	if(Total_HistCnt == 0 || Max_Bright_bin == 0)
		return;

	APL = ((DC_average/Total_HistCnt)<<5)/(Max_Bright_bin);

	vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.APL = APL;
	if(Debug_EN == 1)
		APL = vipCustomTBL_ShareMem->BP_Function.BP_Ctrl.Debug_Items.Debug_APL;

	// mode 1 fix p1=0, p5=255
	vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Point[BP_SEG_0] = 0;
	vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Point[BP_SEG_MAX-1] = 255;

	if(BP_En==1)
	{
		if(APL==vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Point[BP_SEG_0])
			Gain_Value = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Gain[BP_SEG_0];
		else if(APL==vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Point[BP_SEG_MAX-1])
			Gain_Value = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Gain[BP_SEG_MAX-1];
		else
		{
			for(i=BP_SEG_1; i<BP_SEG_MAX; i++)
			{
				if(APL<=vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Point[i])
				{
					P1 = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Point[i-1];
					P2 = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Point[i];
					G1 = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Gain[i-1];
					G2 = vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].BP_Gain_Point.Gain[i];
					break;
				}
			}
			if(P2==P1)
				Gain_Value = G1;
			else
				Gain_Value = G1 + ((G2-G1) * (APL-P1) / (P2-P1));
		}
	}
	else
	{
		Gain_Value = di_pow(2, shiftBit);
		//turn off all sub function
		//vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Bri_Cmps.Enable=0;
		//vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Gain_Limit.Enable=0;
		//vipCustomTBL_ShareMem->BP_Function.BP_Table[table_sel].Smooth_Change.Enable=0;
	}

	if((debug_Log&_BIT0)!=0)
	{
		if(MA_print_count%debug_Log_delay==0)
		{
			tmp = (P1==P2)?1:(P2-P1);
			ROSPrintf("BP_mode1=G1=%d,G2=%d,P1=%d,P2=%d,G=%d, test=%d,%d, APL=%d, i=%d\n",
				G1, G2, P1, P2, Gain_Value, ((G2-G1) * (APL-P1) / tmp), ((G1-G2) * (APL-P1) / tmp), APL, i);
		}
	}
	// negative error
	if(Gain_Value>di_pow(2, (shiftBit+2)))
		Gain_Value=0;

	// avoid over saturate
	Gain_Value =  scalerVIP_Brightness_Plus_Cal_OverSat_Protect_Gain(Gain_Value, Max_Bright_bin, vipCustomTBL_ShareMem, SmartPic_clue);

	// compensation
	RGB_offset_cmps = scalerVIP_Brightness_Plus_Compensation_RGB_Offset_Cal(Gain_Value, APL, vipCustomTBL_ShareMem, sysInfo_TBL);

	// BP gain smooth
	Gain_Value = scalerVIP_Brightness_Plus_Smooth_Gain_Cal(Gain_Value, vipCustomTBL_ShareMem);

	// offset smooth
	RGB_offset_cmps = scalerVIP_Brightness_Plus_Smooth_Offset_Cal(RGB_offset_cmps, vipCustomTBL_ShareMem);

	for(i=0;i<VIP_YUV2RGB_Y_Seg_Max;i++)
	{
		k11 = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.COEF_By_Y.K11[i];
		k12 = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.COEF_By_Y.K12[i];
		k13 = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.COEF_By_Y.K13[i];
		k22 = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.COEF_By_Y.K22[i];
		k23 = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.COEF_By_Y.K23[i];
		k32 = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.COEF_By_Y.K32[i];
		k33 = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.COEF_By_Y.K33[i];

		if(k11>0x3FF)
			k11 = complement2(k11);	//neg

		if(k12>0x3FF)
			k12 = complement2(k12);	//neg

		if(k13>0x3FF)
			k13 = complement2(k13);	//neg

		if(k22>0x3FF)
			k22 = complement2(k22);	//neg

		if(k23>0x3FF)
			k23 = complement2(k23);	//neg

		if(k32>0x3FF)
			k32 = complement2(k32);	//neg

		if(k33>0x3FF)
			k33 = complement2(k33);	//neg

		drv_vipCSMatrix_t.COEF_By_Y.K11[i] = (k11*Gain_Value)>>shiftBit;
		drv_vipCSMatrix_t.COEF_By_Y.K12[i] = (k12*Gain_Value)>>shiftBit;
		drv_vipCSMatrix_t.COEF_By_Y.K13[i] = (k13*Gain_Value)>>shiftBit;
		drv_vipCSMatrix_t.COEF_By_Y.K22[i] = (k22*Gain_Value)>>shiftBit;
		drv_vipCSMatrix_t.COEF_By_Y.K23[i] = (k23*Gain_Value)>>shiftBit;
		drv_vipCSMatrix_t.COEF_By_Y.K32[i] = (k32*Gain_Value)>>shiftBit;
		drv_vipCSMatrix_t.COEF_By_Y.K33[i] = (k33*Gain_Value)>>shiftBit;
	}

	R = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.RGB_Offset.R_offset;
	G = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.RGB_Offset.G_offset;
	B = sysInfo_TBL->using_YUV2RGB_Matrix_Info.YUV2RGB_CSMatrix.RGB_Offset.B_offset;

	//negative
	if(R>0xFFFF)
		R = complement2(R);
	if(G>0xFFFF)
		G = complement2(G);
	if(B>0xFFFF)
		B = complement2(B);

	R = R + RGB_offset_cmps;
	B = B + RGB_offset_cmps;
	G = G + RGB_offset_cmps;

	drv_vipCSMatrix_t.RGB_Offset.R_offset = R;
	drv_vipCSMatrix_t.RGB_Offset.G_offset = G;
	drv_vipCSMatrix_t.RGB_Offset.B_offset = B;

	drvif_color_set_BrightnessPlus_YUV2RGB_CSMatrix(&drv_vipCSMatrix_t);

}

void drvif_color_set_BrightnessPlus_YUV2RGB_CSMatrix(DRV_VIP_YUV2RGB_CSMatrix *ptr)
{
	unsigned char i;
	unsigned short buffer_status_count, buffer_status_count_th=300;
	yuv2rgb_d_yuv2rgb_control_1_RBUS d_yuv2rgb_control_1_reg;
	yuv2rgb_d_yuv2rgb_tab1_data_0_RBUS yuv2rgb_d_yuv2rgb_tab1_data_0_REG;
	yuv2rgb_d_yuv2rgb_tab1_data_1_RBUS yuv2rgb_d_yuv2rgb_tab1_data_1_REG;
	yuv2rgb_d_yuv2rgb_tab1_data_2_RBUS yuv2rgb_d_yuv2rgb_tab1_data_2_REG;
	yuv2rgb_d_yuv2rgb_tab1_data_3_RBUS yuv2rgb_d_yuv2rgb_tab1_data_3_REG;
	yuv2rgb_d_yuv2rgb_tab1_data_4_RBUS yuv2rgb_d_yuv2rgb_tab1_data_4_REG;
	yuv2rgb_d_yuv2rgb_tab1_data_5_RBUS yuv2rgb_d_yuv2rgb_tab1_data_5_REG;
	yuv2rgb_d_yuv2rgb_tab1_data_6_RBUS yuv2rgb_d_yuv2rgb_tab1_data_6_REG;

	d_yuv2rgb_control_1_reg.regValue = rtd_inl(YUV2RGB_D_YUV2RGB_Control_1_reg);
	d_yuv2rgb_control_1_reg.yuv2rgb_db_en=1;
	d_yuv2rgb_control_1_reg.yuv2rgb_db_read_level = 1;
	rtd_outl(YUV2RGB_D_YUV2RGB_Control_1_reg, d_yuv2rgb_control_1_reg.regValue);

	buffer_status_count = buffer_status_count_th;

	for(i=0;i<VIP_YUV2RGB_Y_Seg_Max;i++)
	{
		yuv2rgb_d_yuv2rgb_tab1_data_0_REG.k11 = ptr->COEF_By_Y.K11[i];
		yuv2rgb_d_yuv2rgb_tab1_data_0_REG.k12 = ptr->COEF_By_Y.K12[i];
		yuv2rgb_d_yuv2rgb_tab1_data_1_REG.k13 = ptr->COEF_By_Y.K13[i];
		yuv2rgb_d_yuv2rgb_tab1_data_2_REG.k22 = ptr->COEF_By_Y.K22[i];
		yuv2rgb_d_yuv2rgb_tab1_data_2_REG.k23 = ptr->COEF_By_Y.K23[i];
		yuv2rgb_d_yuv2rgb_tab1_data_3_REG.k32 = ptr->COEF_By_Y.K32[i];
		yuv2rgb_d_yuv2rgb_tab1_data_3_REG.k33 = ptr->COEF_By_Y.K33[i];


		if(i==VIP_YUV2RGB_Y_Seg_0)
		{
			rtd_outl(YUV2RGB_D_YUV2RGB_Tab1_Data_0_reg, yuv2rgb_d_yuv2rgb_tab1_data_0_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGB_Tab1_Data_1_reg, yuv2rgb_d_yuv2rgb_tab1_data_1_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGB_Tab1_Data_2_reg, yuv2rgb_d_yuv2rgb_tab1_data_2_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGB_Tab1_Data_3_reg, yuv2rgb_d_yuv2rgb_tab1_data_3_REG.regValue);

		}
		else if(i<=VIP_YUV2RGB_Y_Seg_3)
		{
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_1_0_reg+((i-1)*4*4), yuv2rgb_d_yuv2rgb_tab1_data_0_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_1_1_reg+((i-1)*4*4), yuv2rgb_d_yuv2rgb_tab1_data_1_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_1_2_reg+((i-1)*4*4), yuv2rgb_d_yuv2rgb_tab1_data_2_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_1_3_reg+((i-1)*4*4), yuv2rgb_d_yuv2rgb_tab1_data_3_REG.regValue);
		}
		else if(i==VIP_YUV2RGB_Y_Seg_4)
		{
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_4_0_reg, yuv2rgb_d_yuv2rgb_tab1_data_0_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_4_1_reg, yuv2rgb_d_yuv2rgb_tab1_data_1_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_4_2_reg, yuv2rgb_d_yuv2rgb_tab1_data_2_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_4_3_reg, yuv2rgb_d_yuv2rgb_tab1_data_3_REG.regValue);
		}
		else
		{
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_5_0_reg+((i-5)*4*4), yuv2rgb_d_yuv2rgb_tab1_data_0_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_5_1_reg+((i-5)*4*4), yuv2rgb_d_yuv2rgb_tab1_data_1_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_5_2_reg+((i-5)*4*4), yuv2rgb_d_yuv2rgb_tab1_data_2_REG.regValue);
			rtd_outl(YUV2RGB_D_YUV2RGBBYY_Tab_Data_5_3_reg+((i-5)*4*4), yuv2rgb_d_yuv2rgb_tab1_data_3_REG.regValue);
		}
	}

	yuv2rgb_d_yuv2rgb_tab1_data_4_REG.roffset = ptr->RGB_Offset.R_offset;
	yuv2rgb_d_yuv2rgb_tab1_data_5_REG.goffset = ptr->RGB_Offset.G_offset;
	yuv2rgb_d_yuv2rgb_tab1_data_6_REG.boffset = ptr->RGB_Offset.B_offset;
	rtd_outl(YUV2RGB_D_YUV2RGB_Tab1_Data_4_reg, yuv2rgb_d_yuv2rgb_tab1_data_4_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGB_Tab1_Data_5_reg, yuv2rgb_d_yuv2rgb_tab1_data_5_REG.regValue);
	rtd_outl(YUV2RGB_D_YUV2RGB_Tab1_Data_6_reg, yuv2rgb_d_yuv2rgb_tab1_data_6_REG.regValue);

	buffer_status_count=0;
	// double buffer check,
	if(buffer_status_count==0)
	{
		d_yuv2rgb_control_1_reg.yuv2rgb_db_apply = 1;  // 20100811, double buffer en , csfanchiang
		rtd_outl(YUV2RGB_D_YUV2RGB_Control_1_reg, d_yuv2rgb_control_1_reg.regValue);
		do{// check double buffer status complete
			d_yuv2rgb_control_1_reg.regValue	 = rtd_inl(YUV2RGB_D_YUV2RGB_Control_1_reg);
			buffer_status_count++;
		}while(d_yuv2rgb_control_1_reg.yuv2rgb_db_apply!=0 && buffer_status_count<buffer_status_count_th);
	}

}

unsigned short scalerVIP_DBC_get_Mean_and_Peak_Value_in_SmartFit_TV002(SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem, _system_setting_info* system_info_structure_table)
{
	//=======================use smartfit to get mean value 20121228=====================
	unsigned short Hstart = 0;
	unsigned short Hend = 0;
	unsigned short Vstart = 0;
	unsigned short Vend = 0;

	vgip_vgip_chn1_act_hsta_width_RBUS vgip_chn1_act_hsta_width_reg;
	vgip_vgip_chn1_act_vsta_length_RBUS vgip_chn1_act_vsta_length_reg;

	//find the input position start &end
	vgip_chn1_act_hsta_width_reg.regValue  = rtd_inl(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg);
	vgip_chn1_act_vsta_length_reg.regValue = rtd_inl(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg);

	Hstart = vgip_chn1_act_hsta_width_reg.ch1_ih_act_sta;
	Hend = vgip_chn1_act_hsta_width_reg.ch1_ih_act_wid;
	Vstart = vgip_chn1_act_vsta_length_reg.ch1_iv_act_sta;
	Vend = vgip_chn1_act_vsta_length_reg.ch1_iv_act_len;

	//unsigned short Hstart=500,Hend=10,Vstart=10,Vend=10;
	smartfit_auto_h_boundary_RBUS auto_h_boundary_reg;
	smartfit_auto_v_boundary_RBUS auto_v_boundary_reg;
	smartfit_auto_r_g_b_margin_RBUS auto_r_g_b_margin_reg;
	smartfit_auto_adj_RBUS auto_adj_reg;
	auto_h_boundary_reg.regValue	 = rtd_inl(SMARTFIT_AUTO_H_BOUNDARY_reg);
	auto_v_boundary_reg.regValue	 = rtd_inl(SMARTFIT_AUTO_V_BOUNDARY_reg);
	auto_r_g_b_margin_reg.regValue	= rtd_inl(SMARTFIT_AUTO_R_G_B_MARGIN_reg);
	auto_adj_reg.regValue				  = rtd_inl(SMARTFIT_AUTO_ADJ_reg);

	//H & V boundary setting
	auto_h_boundary_reg.hb_sta = Hstart;
	auto_h_boundary_reg.hb_end= Hend;
	auto_v_boundary_reg.vb_sta=Vstart;
	auto_v_boundary_reg.vb_end=Vend;

	rtd_outl(SMARTFIT_AUTO_H_BOUNDARY_reg, auto_h_boundary_reg.regValue);
	rtd_outl(SMARTFIT_AUTO_V_BOUNDARY_reg, auto_v_boundary_reg.regValue);

	//Color Source Select for Detection //20070713 SmartFit YUV definition's wrong on ver.FIB !! Notice whether spec. been changed?

	auto_r_g_b_margin_reg.color_sel=0x02;//auto_r_g_b_margin_reg.color_sel=0x1;

	//MIN color measured, Accumulation Mode, Start Auto-Function Tracking Function
	auto_adj_reg.force_flip = 1;
	auto_adj_reg.sum_max	 = 1;
	auto_adj_reg.now_af  = 1;
	auto_adj_reg.diff_en =0;


	smartfit_auto_field_RBUS auto_field_reg;
	smartfit_auto_result_phase_m_RBUS auto_result_phase_m_reg;
	smartfit_auto_result_phase_l_RBUS auto_result_phase_l_reg;
	auto_field_reg.regValue = rtd_inl(SMARTFIT_AUTO_FIELD_reg);

	unsigned long long SUM;
	unsigned  int  PxlNum,Hlength,vlength,PxlNum2;
	unsigned  int  PEAK = 0;

	auto_field_reg.adj_source = 0;//main(channel 1)

	rtd_outl(SMARTFIT_AUTO_FIELD_reg,auto_field_reg.regValue);

	auto_r_g_b_margin_reg.diff_th = 0;
	rtd_outl(SMARTFIT_AUTO_R_G_B_MARGIN_reg,auto_r_g_b_margin_reg.regValue);


	auto_result_phase_m_reg.regValue =	rtd_inl(SMARTFIT_AUTO_RESULT_PHASE_M_reg);
	auto_result_phase_l_reg.regValue =	rtd_inl(SMARTFIT_AUTO_RESULT_PHASE_L_reg);

	SUM = ( ( (unsigned long long)(auto_result_phase_m_reg.acc_41_32) ) <<32) + (unsigned long long)(auto_result_phase_l_reg.acc_31_0);

	smartfit_auto_result_hsta_end_RBUS auto_result_hsta_end_reg;
	smartfit_auto_result_vsta_end_RBUS auto_result_vsta_end_reg;
	auto_result_hsta_end_reg.regValue  = rtd_inl(SMARTFIT_AUTO_RESULT_HSTA_END_reg);
	auto_result_vsta_end_reg.regValue = rtd_inl(SMARTFIT_AUTO_RESULT_VSTA_END_reg);

	Hstart = auto_result_hsta_end_reg.hx_sta;
	Hend = auto_result_hsta_end_reg.hx_end;
	Vstart = auto_result_vsta_end_reg.vx_sta;
	Vend = auto_result_vsta_end_reg.vx_end;

	Hlength=Hend-Hstart+1;
	vlength=Vend-Vstart+1;
	PxlNum2=Hlength*vlength;
	PxlNum = (Hend-Hstart)*(Vend-Vstart);
	PEAK = (SUM)/(PxlNum2); //PEAK value 64~940 TG45:

	rtd_outl(SMARTFIT_AUTO_ADJ_reg, auto_adj_reg.regValue);

	// for Debug info
	unsigned char Debug_Log = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Log0;
	unsigned char Debug_Log_Delay = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Delay_Flame;
	if(Debug_Log_Delay==0)
		Debug_Log_Delay = 100;
	if((Debug_Log&_BIT4)!=0)
	{
		if(MA_print_count%Debug_Log_Delay==0)
		{
			ROSPrintf("***,Hstart=%d,Hend=%d,Vstart=%d,Vend=%d***\n",Hstart,Hend,Vstart,Vend);
			ROSPrintf("***Hlength=%d,vlength=%d***\n",Hlength,vlength);
			ROSPrintf("***PxlNum=%d ,PxlNum2=%d ,***\n",PxlNum,PxlNum2);
			ROSPrintf("***SUM=%d ***\n",SUM);
			ROSPrintf("***PEAK=%d ,***\n",PEAK);

		}
	}
	//=======================use smartfit to get mean value 20121228=====================
	return (PEAK>>2);
}


unsigned char scalerVIP_DBC_BASIC_BLIGHT_Cal_TV002(SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem, _system_setting_info* system_info_structure_table)
{
	unsigned char BL_TOP_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.BL_TOP;
	unsigned char BL_MIDDLE_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.BL_MIDDLE;
	unsigned char BL_BOTTOM_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.BL_BOTTOM;
	unsigned char BL_SETUDEN_Reg =vipCustomTBL_ShareMem->DBC.DBC_SW_REG.BL_SETUDEN;
	unsigned char BL_PSH_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.BL_PSH;

	unsigned char USER_BLIGHT = system_info_structure_table->OSD_Info.OSD_Backlight;
	//unsigned char mode = system_info_structure_table->OSD_Info.OSD_DCR_Mode;
	VIP_DBC_POWER_SAVING_MODE mode = (VIP_DBC_POWER_SAVING_MODE)vipCustomTBL_ShareMem->DBC.DBC_STATUS.OSD_PowerSave;
	unsigned char BASIC_BLIGHT;

	if(USER_BLIGHT > 10)
		USER_BLIGHT = 10;

	switch(mode)
	{
		case D_PS_Off:
		case D_PS_Picture_Off:
		default:
			if(USER_BLIGHT >= 5)
				BASIC_BLIGHT = ((BL_TOP_Reg - BL_MIDDLE_Reg)*(USER_BLIGHT - 5) / 5) + BL_MIDDLE_Reg;
			else
				BASIC_BLIGHT = ((BL_MIDDLE_Reg - BL_BOTTOM_Reg)*USER_BLIGHT / 5) + BL_BOTTOM_Reg;
		break;
		case D_PS_Low:
			if(USER_BLIGHT >= 5)
				BASIC_BLIGHT = (((BL_TOP_Reg - BL_MIDDLE_Reg)*(USER_BLIGHT - 5) / 5) + BL_MIDDLE_Reg);
			else
				BASIC_BLIGHT = (((BL_MIDDLE_Reg - BL_BOTTOM_Reg)*USER_BLIGHT / 5) + BL_BOTTOM_Reg);
			BASIC_BLIGHT = BASIC_BLIGHT - BL_SETUDEN_Reg;
		break;
		case D_PS_High:
			BASIC_BLIGHT = BL_PSH_Reg;
		break;
	}
	vipCustomTBL_ShareMem->DBC.DBC_STATUS.Basic_Backlight = BASIC_BLIGHT;

	// for Debug info
	unsigned char Debug_Log = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Log0;
	unsigned char Debug_Log_Delay = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Delay_Flame;
	if(Debug_Log_Delay==0)
		Debug_Log_Delay = 100;
	if((Debug_Log&_BIT1)!=0)
	{
		if(MA_print_count%Debug_Log_Delay==0)
		{
			ROSPrintf("basic_BL=%d,USER_BLIGHT=%d,DCR_mode=%d\n",
				BASIC_BLIGHT, USER_BLIGHT, mode);
		}
	}

	return BASIC_BLIGHT;
}

#define APL_mapping_limit_range 1	//rock 20131219 smartFIT APL range 16~240
unsigned char scalerVIP_DBC_DBC_Cal_TV002(SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem, _system_setting_info* system_info_structure_table)
{
	unsigned short APL = 0;

	APL = scalerVIP_DBC_get_Mean_and_Peak_Value_in_SmartFit_TV002(vipCustomTBL_ShareMem, system_info_structure_table);

	if(APL>255)
		APL = 255;
#ifdef APL_mapping_limit_range
	if(APL<16)
		APL = 0;
	else if(APL>240)
		APL = 255;
	else
		APL = ((APL-16)*255 + 112)/(224);	// 240-16
#endif

	unsigned char DBC_APL_LOW_START_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_APL_LOW_START;
	unsigned char DBC_BL_B_LIMIT_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_BL_B_LIMIT;
	unsigned char DBC_APL_LOW_LIMIT_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_APL_LOW_LIMIT;
	unsigned char DBC_PS_APL_TH_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_PS_APL_TH;
	unsigned char DBC_PS_LEVEL_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_PS_LEVEL;
	unsigned char BASIC_BLIGHT = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Basic_Backlight;
	//unsigned char PictureMode = system_info_structure_table->OSD_Info.OSD_DCR_Mode;
	VIP_DBC_POWER_SAVING_MODE PictureMode = (VIP_DBC_POWER_SAVING_MODE)vipCustomTBL_ShareMem->DBC.DBC_STATUS.OSD_PowerSave;

	// for Debug info
	unsigned char Debug_Log = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Log0;
	unsigned char Debug_Log_Delay = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Delay_Flame;
	if(Debug_Log_Delay==0)
		Debug_Log_Delay = 100;
	if((Debug_Log&_BIT3)!=0)
	{
		if(MA_print_count%Debug_Log_Delay==0)
		{
			ROSPrintf("APLInSmartit=%d,\n",
				APL);
		}
	}

	if(APL >= DBC_APL_LOW_START_Reg)
		return	BASIC_BLIGHT;
	else if(APL >= DBC_APL_LOW_LIMIT_Reg)
	{
		if((DBC_APL_LOW_START_Reg - DBC_APL_LOW_LIMIT_Reg) == 0)
		{
			if(MA_print_count%250==0)
				ROSPrintf("DBC SETTING ERROR\n");
			return 0;
		}
		return BASIC_BLIGHT - ((DBC_APL_LOW_START_Reg - APL) * DBC_BL_B_LIMIT_Reg / (DBC_APL_LOW_START_Reg - DBC_APL_LOW_LIMIT_Reg));
	}
	else if(APL >= DBC_PS_APL_TH_Reg)
		return (BASIC_BLIGHT - DBC_BL_B_LIMIT_Reg);
	else
		if(PictureMode == D_PS_High)	//VIP_PICTURE_MODE_DYNAMIC
			return DBC_PS_LEVEL_Reg;
		else
			return (BASIC_BLIGHT - DBC_BL_B_LIMIT_Reg);

}

unsigned char scalerVIP_DBC_Y_Max_Cal_TV002(_clues *SmartPic_clue)
{
	unsigned char i;
	unsigned int *reg_HistCnt = &(SmartPic_clue->Y_Main_Hist[0]);
	for(i = (COLOR_HISTOGRAM_LEVEL-1); i > 0 ; i--)
	{
		if(reg_HistCnt[i] >= 10)
			return ((i<<3)-1);
	}
	return 0;
}

unsigned char scalerVIP_DBC_BackLight_Cal_TV002(SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem, _system_setting_info* system_info_structure_table, _clues *SmartPic_clue)
{
	unsigned char DBC_PS_TIME_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_PS_TIME;
	unsigned char DBC_PS_TM_EXIT_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_PS_TM_EXIT;
	unsigned char DBC_PS_ATN_UP_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_PS_ATN_UP;
	unsigned char DBC_PS_ATN_DN_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_PS_ATN_DN;
	unsigned char DBC_PS_LEVEL_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_PS_LEVEL;
	unsigned char DBC_BL_B_LIMIT_Reg = vipCustomTBL_ShareMem->DBC.DBC_SW_REG.DBC_BL_B_LIMIT;

	static unsigned char status = 1;
	static unsigned short Pre_backlight = 255;
	static unsigned int DBC4PS_count = 0;
	unsigned short DBC = scalerVIP_DBC_DBC_Cal_TV002(vipCustomTBL_ShareMem, system_info_structure_table);
	unsigned short Y_MAX = scalerVIP_DBC_Y_Max_Cal_TV002(SmartPic_clue)*9/10;
	unsigned short backlight = MAX(DBC, Y_MAX);
	unsigned char BASIC_BLIGHT = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Basic_Backlight;
	static unsigned char pre_basic_BL = 0;
	unsigned char dcc_Mode = system_info_structure_table->OSD_Info.OSD_DCC_Mode;

	if(BASIC_BLIGHT < backlight)
		backlight = BASIC_BLIGHT;

	// for Debug info
	unsigned char Debug_Log = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Log0;
	unsigned char Debug_Log_Delay = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Delay_Flame;
	if(Debug_Log_Delay==0)
		Debug_Log_Delay = 100;
	if((Debug_Log&_BIT2)!=0)
	{
		if(MA_print_count%Debug_Log_Delay==0)
		{
			ROSPrintf("dccMode=%d,pre_basic_BL=%d,BASIC_BLIGHT=%d,DBC=%d,YMax=%d\n",
				dcc_Mode, pre_basic_BL, BASIC_BLIGHT,DBC,Y_MAX);
		}
	}

	// basic backlight change from user
	if(pre_basic_BL != BASIC_BLIGHT)
	{
		Pre_backlight = backlight;
		pre_basic_BL = BASIC_BLIGHT;
		return Pre_backlight;
	}

	if(dcc_Mode == 0)
	{
		Pre_backlight = BASIC_BLIGHT;
		return BASIC_BLIGHT;
	}

	if(backlight > Pre_backlight)				//Addition PWM
	{
		if(Pre_backlight >= (BASIC_BLIGHT - DBC_BL_B_LIMIT_Reg))	//not Dark Y
		{
			Pre_backlight = Pre_backlight + 1;
			status = 1;
		}
		else														//Dark Y
		{
			if(status == 0)
			{
				DBC4PS_count++;
				if(DBC4PS_count > DBC_PS_TM_EXIT_Reg)
				{
					DBC4PS_count = 0;
					status = 1;
				}
			}
			else
			{
				if((Pre_backlight + DBC_PS_ATN_UP_Reg) > (BASIC_BLIGHT - DBC_BL_B_LIMIT_Reg))
					Pre_backlight = (BASIC_BLIGHT - DBC_BL_B_LIMIT_Reg);
				else
					Pre_backlight = (Pre_backlight + DBC_PS_ATN_UP_Reg);
			}
		}
	}
	else	 if(backlight < Pre_backlight)		//Reduction PWM
	{
		if(Pre_backlight >= (BASIC_BLIGHT - DBC_BL_B_LIMIT_Reg))	//not Dark Y
		{
			Pre_backlight = Pre_backlight - 1;
			status = 1;
		}
		else														//Dark Y
		{
			if(status == 1)
			{
				DBC4PS_count++;
				if(DBC4PS_count > (DBC_PS_TIME_Reg<<2))
				{
					DBC4PS_count = 0;
					status = 0;
				}
			}
			else
			{
				if(Pre_backlight > DBC_PS_ATN_DN_Reg)
				{
					if((Pre_backlight - DBC_PS_ATN_DN_Reg) < DBC_PS_LEVEL_Reg)
						Pre_backlight = DBC_PS_LEVEL_Reg;
					else
						Pre_backlight = (Pre_backlight - DBC_PS_ATN_DN_Reg);
				}
				else
					Pre_backlight = DBC_PS_LEVEL_Reg;
			}
		}
	}
	return Pre_backlight;
}

void scalerVIP_DBC_CTRL_TV002(SLR_VIP_TABLE_CUSTOM_TV002 *vipCustomTBL_ShareMem, _system_setting_info* system_info_structure_table, _clues *SmartPic_clue)
{
	unsigned short backlight;
	unsigned char m_isIncreaseMode = system_info_structure_table->OSD_Info.isIncreaseMode_Flag;
	unsigned int m_PIN_BL_ADJ = system_info_structure_table->OSD_Info.backlight_pin_adj;

	//if(system_info_structure_table->OSD_Info.OSD_DCR_Mode==3)	// picture off
		//return;
	if((VIP_DBC_POWER_SAVING_MODE)vipCustomTBL_ShareMem->DBC.DBC_STATUS.OSD_PowerSave==D_PS_Picture_Off)	// picture off
		return;

	scalerVIP_DBC_BASIC_BLIGHT_Cal_TV002(vipCustomTBL_ShareMem, system_info_structure_table);
	backlight = scalerVIP_DBC_BackLight_Cal_TV002(vipCustomTBL_ShareMem, system_info_structure_table, SmartPic_clue);

	if(m_isIncreaseMode == 0)
	{
		if(backlight > 0xFF)
			backlight = 0;
		else
			backlight = 0xFF - backlight;
	}
	//scalerVIP_IoGpio_SetPwmDuty(m_PIN_BL_ADJ, backlight);

	// for Debug info
	unsigned char Debug_Log = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Log0;
	unsigned char Debug_Log_Delay = vipCustomTBL_ShareMem->DBC.DBC_STATUS.Debug_Delay_Flame;
	if(Debug_Log_Delay==0)
		Debug_Log_Delay = 100;
	if((Debug_Log&_BIT0)!=0)
	{
		if(MA_print_count%Debug_Log_Delay==0)
		{
			ROSPrintf("backlight=%d,m_incre=%d,ADJ=%d\n",
				backlight, m_isIncreaseMode, m_PIN_BL_ADJ);
		}
	}
}
#endif

//***************************************************************//
//****************Arrange no use function(From Sirius CSFC) ***********//
//***************************************************************//


#if 0
void scalerVIP_OD_CheckBandwidth()
{
	/*
	ddr_dmastatus_RBUS dmastatus_reg;
	oddma_display_ctrl_RBUS oddma_display_ctrl_reg;
	oddma_cap_ctl0_RBUS oddma_cap_ctl0_reg;

	static unsigned int error_counter;
	static char pre_source;

	char which_source=drvif_color_check_source(SLR_MAIN_DISPLAY);

	oddma_display_ctrl_reg.regValue = rtd_inl(OD_DMA_ODDMA_DISPLAY_CTRL_reg);

	oddma_cap_ctl0_reg.regValue = rtd_inl(OD_DMA_ODDMA_CAP_CTL0_reg);

	if (oddma_display_ctrl_reg.disp11_3ddma_en == 1 && oddma_cap_ctl0_reg.cap_en == 1)
	{
		if (which_source != pre_source)
		{
			pre_source = which_source;
			error_counter = 0;
		}

		dmastatus_reg.regValue = rtd_inl(DI_DDR_DMASTATUS_reg);

		if (dmastatus_reg.ccdinr_ovfl > 0 || dmastatus_reg.ccdinr_unfl > 0)
		{
			error_counter++;
			//ROSPrintf("error_counter: %d\n", error_counter);
			rtd_outl(DI_DDR_DMASTATUS_reg, 0xFFFFFFFF);
			rtd_outl(DI_DDR_DMASTATUS_reg, 0x0);
		}
		if (error_counter > 5)
		{
			ROSPrintf("[BandWidth issue] OverDrive function will disable!!!\n");
			rtd_clearbits(OD_DMA_ODDMA_DISPLAY_CTRL_reg, _BIT8); // disp11 disable
			rtd_clearbits(OD_DMA_ODDMA_CAP_CTL0_reg, _BIT19); // cap disable
			rtd_clearbits(OD_OD_CTRL_reg, _BIT0);
			error_counter = 0;
		}
	}
	*/
/*
	unsigned char osd_status = ((rtd_inl(BUS_TV_SB2_DCU1_ARB_CR1_reg) & 0x00000100)>>8);
	if (osd_status == 1 && ((SmartPic_clue->Remmping_Src_Timing_index)==3 || (SmartPic_clue->Remmping_Src_Timing_index)==4))
	{
		rtd_clearbits(OD_DMA_ODDMA_DISPLAY_CTRL_reg, _BIT8);
		rtd_clearbits(OD_DMA_ODDMA_CAP_CTL0_reg, _BIT19);
		rtd_clearbits(OD_OD_CTRL_reg, _BIT0);
	}
	else
	{
		//ROSPrintf("[BandWidth issue] OSD disalbe detected!!! restart OD function\n");
		rtd_setbits(OD_DMA_ODDMA_DISPLAY_CTRL_reg, _BIT8);
		rtd_setbits(OD_DMA_ODDMA_CAP_CTL0_reg, _BIT19);
		rtd_setbits(OD_OD_CTRL_reg, _BIT0);
	}
	*/


	oddma_display11_numwtl_RBUS display11_numwtl_reg;
	display11_numwtl_reg.regValue = rtd_inl(OD_DMA_ODDMA_DISPLAY11_NUMWTL_reg);
	display11_numwtl_reg.disp11_wtlvl = 0x1c0;
	rtd_outl(OD_DMA_ODDMA_DISPLAY11_NUMWTL_reg, display11_numwtl_reg.regValue);
}
#endif






//####################################################

/*
unsigned char scalerVIP_Get_ChromaErrorEn_from_viptab(unsigned char isSmoothtoggle, unsigned char smoothtoggle_source)
{
	SLR_VIP_TABLE *vipTable_shareMem = scaler_GetShare_Memory_VIP_TABLE_Struct();
	unsigned char which_source = 0;

	if (isSmoothtoggle)
	{
		which_source = smoothtoggle_source;
	}
	else
	{
		if (RPC_system_info_structure_table)
			which_source=(RPC_system_info_structure_table->VIP_source);
		else
			return 0;
	}

	if (vipTable_shareMem)
		return vipTable_shareMem->VIP_QUALITY_Coef[which_source][VIP_QUALITY_FUNCTION_MA_Chroma_Error];
	else
		return 0;

}
*/
void scalerVIP_pattern_detected(void)
{
	static unsigned char cnt = 0;

	mpegnr_ich1_accessdata_ctrl_pk_RBUS accessdata_ctrl_pk_reg;
	mpegnr_ich1_accessdata_posctrl_pk_RBUS accessdata_posctrl_pk_reg;
	mpegnr_ich1_readdata_data_y1_pk_RBUS readdata_data_y1_pk_reg;
	mpegnr_ich1_readdata_data_c1_pk_RBUS readdata_data_c1_pk_RBUS;
	accessdata_ctrl_pk_reg.regValue = rtd_inl(MPEGNR_ICH1_AccessData_CTRL_PK_reg);
	accessdata_posctrl_pk_reg.regValue = rtd_inl(MPEGNR_ICH1_AccessData_PosCtrl_PK_reg);
	readdata_data_y1_pk_reg.regValue = rtd_inl(MPEGNR_ICH1_ReadData_DATA_Y1_PK_reg);
	readdata_data_c1_pk_RBUS.regValue = rtd_inl(MPEGNR_ICH1_ReadData_DATA_C1_PK_reg);

	accessdata_ctrl_pk_reg.write_en = 1;
	accessdata_posctrl_pk_reg.startx = 100;
	accessdata_posctrl_pk_reg.starty = 100;
	readdata_data_y1_pk_reg.y00 = 255;

	if(cnt == 0)
	{
		readdata_data_c1_pk_RBUS.u00 = 255;
		readdata_data_c1_pk_RBUS.v00 = 0;
		cnt = 1;
	}
	else
	{
		readdata_data_c1_pk_RBUS.u00 = 0;
		readdata_data_c1_pk_RBUS.v00 = 255;
		cnt = 0;
	}

	rtd_outl(MPEGNR_ICH1_AccessData_CTRL_PK_reg, accessdata_ctrl_pk_reg.regValue);
	rtd_outl(MPEGNR_ICH1_AccessData_PosCtrl_PK_reg, accessdata_posctrl_pk_reg.regValue);
	rtd_outl(MPEGNR_ICH1_ReadData_DATA_Y1_PK_reg, readdata_data_y1_pk_reg.regValue);
	rtd_outl(MPEGNR_ICH1_ReadData_DATA_C1_PK_reg, readdata_data_c1_pk_RBUS.regValue);
}

void Scaler_color_print_scalerinfo_isr(void)
{
	color_dcc_d_dcc_fwused_1_RBUS dcc_fwused_1_reg;
	dcc_fwused_1_reg.regValue = rtd_inl(COLOR_DCC_D_DCC_FWUSED_1_reg);

	if((system_info_structure_table) && (dcc_fwused_1_reg.regValue>>31== 1) && (RPC_system_info_structure_table)) {
		ROSPrintf("===== VIP_scaler_info =====\n");
		/*============================================*/
		ROSPrintf("Input_src_Type = %d\n", system_info_structure_table->Input_src_Type);
		ROSPrintf("Input_src_Form = %d\n", system_info_structure_table->Input_src_Form);
		ROSPrintf("Input_VO_Form = %d\n", system_info_structure_table->Input_VO_Form);
		ROSPrintf("input_TVD_Form = %d\n", system_info_structure_table->Input_TVD_Form);
		ROSPrintf("vdc_color_standard = %d\n", system_info_structure_table->vdc_color_standard);
		ROSPrintf("Timing = %d\n", system_info_structure_table->Timing);
		ROSPrintf("HDMI_video_format = %d\n", system_info_structure_table->HDMI_video_format);
		ROSPrintf("VIP_source = %d\n", RPC_system_info_structure_table->VIP_source);
		ROSPrintf("Display_RATIO_TYPE = %d\n", system_info_structure_table->Display_RATIO_TYPE);
		ROSPrintf("HDMI_data_range = %d\n", system_info_structure_table->HDMI_data_range);
		ROSPrintf("HDR_flag = %d\n", system_info_structure_table->HDR_flag);
		ROSPrintf("DolbyHDR_flag = %d\n", system_info_structure_table->DolbyHDR_flag);

		ROSPrintf("input_display = %d\n", system_info_structure_table->input_display);
		ROSPrintf("HDMI_color_space = %d\n", system_info_structure_table->HDMI_color_space);
		ROSPrintf("IV_Start = %d\n", system_info_structure_table->IV_Start);
		ROSPrintf("IH_Start = %d\n", system_info_structure_table->IH_Start);
		ROSPrintf("I_Height = %d\n", system_info_structure_table->I_Height);
		ROSPrintf("I_Width = %d\n", system_info_structure_table->I_Width);
		ROSPrintf("Mem_Height = %d\n", system_info_structure_table->Mem_Height);
		ROSPrintf("Mem_Width = %d\n", system_info_structure_table->Mem_Width);
		ROSPrintf("Cap_Height = %d\n", system_info_structure_table->Cap_Height);
		ROSPrintf("Cap_Width = %d\n", system_info_structure_table->Cap_Width);
		ROSPrintf("DI_Width = %d\n", system_info_structure_table->DI_Width);
		ROSPrintf("D_Height = %d\n", system_info_structure_table->D_Height);
		ROSPrintf("D_Width = %d\n", system_info_structure_table->D_Width);
		ROSPrintf("color_fac_src_idx = %d\n", system_info_structure_table->color_fac_src_idx);
		ROSPrintf("Project_ID = %d\n", RPC_system_info_structure_table->Project_ID);
		/*============================================*/
		ROSPrintf("===== VIP_scaler_info end =====\n");
	}
}

unsigned char scalerVIP_check_vdc_hw_pwr()
{
	//crt_sys_pll_27x3_RBUS sys_pll_27x3_reg;
	sys_reg_sys_clken1_RBUS sys_reg_sys_clken1;

	//sys_pll_27x3_reg.regValue = rtdf_inl(CRT_SYS_PLL_27X3_reg);
	sys_reg_sys_clken1.regValue = rtd_inl(SYS_REG_SYS_CLKEN1_reg);

	if (sys_reg_sys_clken1.clken_vdec == 1 &&
		system_info_structure_table->Input_src_Form == _SRC_FROM_VDC) /*&&
		sys_pll_27x3_reg.pll27x_pow == 1 &&
		sys_pll_27x3_reg.pll27x_rstb == 1 &&
		sys_pll_27x3_reg.pll27x_vcorstb == 1 &&
		sys_pll_27x3_reg.pll27x_ps_en == 1)
		*/
		return 1;
	else
		return 0;
}

unsigned long g_DoWriteRGB2YUV = 0;
void scalerVIP_Write_RGB2YUV(unsigned long arg)
{
	g_DoWriteRGB2YUV = arg;
	/*ROSPrintf("scalerVIP_Write_RGB2YUV %d\n");*/
}

#ifdef CONFIG_I2RND_ENABLE
unsigned long g_DoWriteRGB2YUV_s0 = 0;
unsigned long g_DoWriteRGB2YUV_s1 = 0;
void scalerVIP_Write_s0_RGB2YUV(unsigned long arg)
{
	g_DoWriteRGB2YUV_s0 = arg;
	/*ROSPrintf("scalerVIP_Write_RGB2YUV %d\n");*/
}

void scalerVIP_Write_s1_RGB2YUV(unsigned long arg)
{
	g_DoWriteRGB2YUV_s1 = arg;
	/*ROSPrintf("scalerVIP_Write_RGB2YUV %d\n");*/
}

#endif

void scalerVIP_Set_Inv_Gamma_En(unsigned char arg)
{
	g_Inv_Gamma = arg;
}
void scalerVIP_Inv_Gamma_En_Write(void)
{
	unsigned char enable =0;
	inv_gamma_inv_gamma_ctrl_2_RBUS inv_gamma_ctrl_2_REG;

	if(g_Inv_Gamma > 1 || pGamma_Table == NULL)
		return;
	enable = g_Inv_Gamma;

	g_Inv_Gamma =255;


	inv_gamma_ctrl_2_REG.regValue = rtd_inl(INV_GAMMA_INV_GAMMA_CTRL_2_reg);

	//if (display == SLR_MAIN_DISPLAY) {
			inv_gamma_ctrl_2_REG.inv_gamma_m_tab_sel = enable; /* use tab-1*/
	//}
#ifdef CONFIG_DUAL_CHANNEL  /* There are two channels*/
	//else {
	//	inv_gamma_ctrl_2_REG.inv_gamma_s_tab_sel = g_Inv_Gamma?2:0; /* use tab-2*/
	//}
#endif
	rtd_outl(INV_GAMMA_INV_GAMMA_CTRL_2_reg, inv_gamma_ctrl_2_REG.regValue);

}

void scalerVIP_Set_FW_Film_Mode_En(unsigned char enable)
{
	di_im_di_film_new_function_main_RBUS im_di_film_new_function_main_reg;
	im_di_film_new_function_main_reg.regValue = rtd_inl(DI_IM_DI_FILM_NEW_FUNCTION_MAIN_reg);
	g_fw_film_en = enable;
	im_di_film_new_function_main_reg.fw_film_en = m_film_clear_isr?0:enable;

	rtd_outl(DI_IM_DI_FILM_NEW_FUNCTION_MAIN_reg, im_di_film_new_function_main_reg.regValue);
}


void scalerVIP_color_colorspacergb2yuvtransfer(unsigned char channel, unsigned short *table_index)
{
#ifdef CONFIG_I2RND_ENABLE //[ANDROIDTV-3549] i2run SDR+HDR case need to use different matrix table. @Crixus 20171110
	if (channel == _CHANNEL1){
		if (g_DoWriteRGB2YUV_s0 == 0)
			return;
		g_DoWriteRGB2YUV_s0 = 0;
	}
	else if(channel == _CHANNEL2){
		if (g_DoWriteRGB2YUV_s1 == 0)
			return;
		g_DoWriteRGB2YUV_s1 = 0;
	}
#else
	if (g_DoWriteRGB2YUV == 0)
		return;

	g_DoWriteRGB2YUV = 0;
#endif
	if (system_info_structure_table == NULL)
		return;
#ifdef CONFIG_I2RND_ENABLE //[ANDROIDTV-3549] i2run SDR+HDR case need to use different matrix table. @Crixus 20171110
	if (channel == _CHANNEL1){
		if (table_index == NULL){
			table_index = (unsigned short *)&RGB2YUV_COEF_CSMatrix_s0;
			//printk(KERN_EMERG"[crixus]use s0 matrix in vgip isr!!!\n");
		}
	}
	else if (channel == _CHANNEL2){
		if (table_index == NULL){
			table_index = (unsigned short *)&RGB2YUV_COEF_CSMatrix_s1;
			channel = _CHANNEL1;
			//printk(KERN_EMERG"[crixus]use s1 matrix in vgip isr!!!\n");
		}
	}
#else
	if (table_index == NULL)
		table_index = (unsigned short *)&system_info_structure_table->RGB2YUV_COEF_CSMatrix;
#endif
	if (channel == _CHANNEL1)  { /*main always access tab-1*/

		rgb2yuv_ich1_rgb2yuv_ctrl_RBUS  ich1_RGB2YUV_CTRL_REG;

		rgb2yuv_tab1_m11_m12_RBUS tab1_m11_m12_reg;
		rgb2yuv_tab1_m13_m21_RBUS tab1_m13_m21_reg;
		rgb2yuv_tab1_m22_m23_RBUS tab1_m22_m23_reg;
		rgb2yuv_tab1_m31_m32_RBUS tab1_m31_m32_reg;
		rgb2yuv_tab1_m33_ygain_RBUS tab1_m33_ygain_reg;
		rgb2yuv_tab1_yo_RBUS tab1_yo_reg;

		ich1_RGB2YUV_CTRL_REG.regValue = rtd_inl(RGB2YUV_ICH1_RGB2YUV_CTRL_reg);

		ich1_RGB2YUV_CTRL_REG.sel_table = 0;
		ich1_RGB2YUV_CTRL_REG.en_rgb2yuv = 0;
		ich1_RGB2YUV_CTRL_REG.sel_y_gain = 1;

		rtd_outl(RGB2YUV_ICH1_RGB2YUV_CTRL_reg, ich1_RGB2YUV_CTRL_REG.regValue);

		/*main  all tab-1*/
		tab1_m11_m12_reg.m11 = table_index[_RGB2YUV_m11];
		tab1_m11_m12_reg.m12 = table_index[_RGB2YUV_m12];
		rtd_outl(RGB2YUV_Tab1_M11_M12_reg, tab1_m11_m12_reg.regValue);
		tab1_m13_m21_reg.m13 = table_index[_RGB2YUV_m13];
		tab1_m13_m21_reg.m21 = table_index[_RGB2YUV_m21];
		rtd_outl(RGB2YUV_Tab1_M13_M21_reg, tab1_m13_m21_reg.regValue);
		tab1_m22_m23_reg.m22 = table_index[_RGB2YUV_m22];
		tab1_m22_m23_reg.m23 = table_index[_RGB2YUV_m23];
		rtd_outl(RGB2YUV_Tab1_M22_M23_reg, tab1_m22_m23_reg.regValue);
		tab1_m31_m32_reg.m31 = table_index[_RGB2YUV_m31];
		tab1_m31_m32_reg.m32 = table_index[_RGB2YUV_m32];
		rtd_outl(RGB2YUV_Tab1_M31_M32_reg, tab1_m31_m32_reg.regValue);
		tab1_m33_ygain_reg.m33 = table_index[_RGB2YUV_m33];
		tab1_m33_ygain_reg.y_gain = table_index[_RGB2YUV_Y_gain];
		rtd_outl(RGB2YUV_Tab1_M33_YGain_reg, tab1_m33_ygain_reg.regValue);

		tab1_yo_reg.yo_even = table_index[_RGB2YUV_Yo_even];
		tab1_yo_reg.yo_odd = table_index[_RGB2YUV_Yo_odd];
		rtd_outl(RGB2YUV_Tab1_Yo_reg, tab1_yo_reg.regValue);

		ich1_RGB2YUV_CTRL_REG.sel_rgb = table_index[_RGB2YUV_sel_RGB];
		ich1_RGB2YUV_CTRL_REG.set_r_in_offset = table_index[_RGB2YUV_set_Yin_offset];
		ich1_RGB2YUV_CTRL_REG.set_uv_out_offset = table_index[_RGB2YUV_set_UV_out_offset];
		ich1_RGB2YUV_CTRL_REG.sel_uv_off = table_index[_RGB2YUV_sel_UV_off];
		ich1_RGB2YUV_CTRL_REG.matrix_bypass = table_index[_RGB2YUV_Matrix_bypass];
		ich1_RGB2YUV_CTRL_REG.sel_y_gain = table_index[_RGB2YUV_Enable_Y_gain];

		ich1_RGB2YUV_CTRL_REG.sel_table = 0;
		ich1_RGB2YUV_CTRL_REG.en_rgb2yuv = 1;

		rtd_outl(RGB2YUV_ICH1_RGB2YUV_CTRL_reg, ich1_RGB2YUV_CTRL_REG.regValue);

		IoReg_SetBits(RGB2YUV_ICH1_RGB2YUV_CTRL_reg, RGB2YUV_ICH1_RGB2YUV_CTRL_rgb2yuv_db_apply_mask);

	}
	/*
	else
	{
		rgb2yuv_ich2_rgb2yuv_ctrl_RBUS	ich2_RGB2YUV_CTRL_REG;

		rgb2yuv_tab2_m11_m12_RBUS tab2_m11_m12_reg;
		rgb2yuv_tab2_m13_m21_RBUS tab2_m13_m21_reg;
		rgb2yuv_tab2_m22_m23_RBUS tab2_m22_m23_reg;
		rgb2yuv_tab2_m31_m32_RBUS tab2_m31_m32_reg;
		rgb2yuv_tab2_m33_y_gain_RBUS tab2_m33_ygain_reg;
		rgb2yuv_tab2_yo_RBUS tab2_yo_reg;

		ich2_RGB2YUV_CTRL_REG.regValue = IoReg_Read32(RGB2YUV_ICH2_RGB2YUV_CTRL_reg);
		ich2_RGB2YUV_CTRL_REG.sel_table = 1;
		ich2_RGB2YUV_CTRL_REG.en_rgb2yuv = 0;
		rtd_outl(RGB2YUV_ICH2_RGB2YUV_CTRL_reg, ich2_RGB2YUV_CTRL_REG.regValue);

		//sub  all tab-2
		tab2_m11_m12_reg.m11 = table_index[_RGB2YUV_m11];
		tab2_m11_m12_reg.m12 = table_index[_RGB2YUV_m12];
		rtd_outl(RGB2YUV_TAB2_M11_M12_reg, tab2_m11_m12_reg.regValue);
		tab2_m13_m21_reg.m13 = table_index[_RGB2YUV_m13];
		tab2_m13_m21_reg.m21 = table_index[_RGB2YUV_m21];
		rtd_outl(RGB2YUV_TAB2_M13_M21_reg, tab2_m13_m21_reg.regValue);
		tab2_m22_m23_reg.m22 = table_index[_RGB2YUV_m22];
		tab2_m22_m23_reg.m23 = table_index[_RGB2YUV_m23];
		rtd_outl(RGB2YUV_TAB2_M22_M23_reg, tab2_m22_m23_reg.regValue);
		tab2_m31_m32_reg.m31 = table_index[_RGB2YUV_m31];
		tab2_m31_m32_reg.m32 = table_index[_RGB2YUV_m32];
		rtd_outl(RGB2YUV_TAB2_M31_M32_reg, tab2_m31_m32_reg.regValue);
		tab2_m33_ygain_reg.m33 = table_index[_RGB2YUV_m33];
		tab2_m33_ygain_reg.y_gain = table_index[_RGB2YUV_Y_gain];
		rtd_outl(RGB2YUV_TAB2_M33_Y_GAIN_reg, tab2_m33_ygain_reg.regValue);

		tab2_yo_reg.yo_even = table_index[_RGB2YUV_Yo_even];
		tab2_yo_reg.yo_odd = table_index[_RGB2YUV_Yo_odd];
		rtd_outl(RGB2YUV_TAB2_YO_reg, tab2_yo_reg.regValue);

		ich2_RGB2YUV_CTRL_REG.sel_rgb = table_index[_RGB2YUV_sel_RGB];
		ich2_RGB2YUV_CTRL_REG.set_r_in_offset = table_index[_RGB2YUV_set_Yin_offset];
		ich2_RGB2YUV_CTRL_REG.set_uv_out_offset = table_index[_RGB2YUV_set_UV_out_offset];
		ich2_RGB2YUV_CTRL_REG.sel_uv_off = table_index[_RGB2YUV_sel_UV_off];
		ich2_RGB2YUV_CTRL_REG.matrix_bypass = table_index[_RGB2YUV_Matrix_bypass];
		ich2_RGB2YUV_CTRL_REG.sel_y_gain = table_index[_RGB2YUV_Enable_Y_gain];

		ich2_RGB2YUV_CTRL_REG.sel_table = 1;
		ich2_RGB2YUV_CTRL_REG.en_rgb2yuv = 1;

		rtd_outl(RGB2YUV_ICH2_RGB2YUV_CTRL_reg, ich2_RGB2YUV_CTRL_REG.regValue);

	}
	*/
}
void scalerVIP_Set_Noise_Level(unsigned char Level)
{
	Noise_Level = Level;
}
unsigned char scalerVIP_Get_Noise_Level(void)
{
	return Noise_Level;
}
unsigned char scalerVIP_Get_PT_NO(void)
{
	unsigned char i=0;

	for(i=0;i<255;i++)
	{
		if(DynamicOptimizeSystem[i]==1)
		{
			return i;
		}
	}
	return 0;

}

//============= Set Info to MEMC  jzl 20151231====================
void scalerVIP_Set_MEMC_Info_toVCPU(void)
{
	_RPC_system_setting_info* system_RPC_info_structure_table = NULL;
#ifdef fix_compile_error_MEMC
	unsigned char *FilmInfo = Scaler_MEMC_GetCadence();
#else
	unsigned char *FilmInfo = &g_scaler_memc_cadence_temp[0];
#endif

	system_RPC_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();


	if((system_RPC_info_structure_table == NULL)) {
		if(MA_print_count%360==0) {
			ROSPrintf(" === scalerVIP_Set_MEMC_Info_toVCPU === \n\n");
			ROSPrintf(" Mem = %p\n\n",system_RPC_info_structure_table);
		}
		return;
	}

	if( FilmInfo == NULL )
	{
		if( MA_print_count%120 == 0)
			ROSPrintf("[%s] Film information ptr from MEMC error\n", __func__);
		return;
	}


	system_RPC_info_structure_table->MEMC_ISRIINFO_TO_VCPU.memc_cadence = FilmInfo[_FILM_MEMC_OUT_ALL];
#ifdef fix_compile_error_MEMC
	system_RPC_info_structure_table->MEMC_ISRIINFO_TO_VCPU.memc_avdelay = Scaler_MEMC_GetAVSyncDelay();
#endif
}

extern int PictureMode_flg;
extern unsigned int MEMC_OutputFrame_cnt;
extern unsigned int MEMC_OutputFrame_pre_cnt;
unsigned char AspectRation_Zoom_MEMCClose_Flag = FALSE;
UINT32 Forbes_flg = 0;
void scalerVIP_Set_Info_toMEMC(void)
{
	unsigned int osd_bri_sub = 0;// (system_info_structure_table->OSD_Info.Brightness_Gain_Sub);
	unsigned int osd_con_sub = 0;
	static unsigned int su_hor_factor_pre, su_ver_factor_pre, sd_hor_factor_pre, sd_ver_factor_pre;
	unsigned int su_hor_factor_cur, su_ver_factor_cur, sd_hor_factor_cur, sd_ver_factor_cur;
	scaleup_dm_uzu_scale_ver_factor_RBUS	scaleup_dm_uzu_scale_ver_factor_reg;
	scaleup_dm_uzu_scale_hor_factor_RBUS	scaleup_dm_uzu_scale_hor_factor_reg;
	scaledown_ich1_uzd_scale_hor_factor_RBUS	scaledown_ich1_uzd_scale_hor_factor_reg;
	scaledown_ich1_uzd_scale_ver_factor_RBUS	scaledown_ich1_uzd_scale_ver_factor_reg;
	static int hor_front_pre, hor_back_pre, ver_front_pre, ver_back_pre;
	int hor_front_cur, hor_back_cur, ver_front_cur, ver_back_cur;

	scaledown_ich1_sdnr_cutout_range_hor_RBUS ich1_sdnr_cutout_range_hor_reg;
	scaledown_ich1_sdnr_cutout_range_ver0_RBUS ich1_sdnr_cutout_range_ver0_reg;
	unsigned char i=0;
	UINT32 Hist_diff = 0, Hue_diff = 0,sc_flag = 0;
	static int sc_cnt = 2, zoom_cnt = 2;
	static unsigned int warning_cnt = 0;
	unsigned char MEMC_clock_state = 0, MEMC_mux_state = 0, MEMC_InINTEnable_state = 0, MEMC_OutINTEnable_state = 0, MEMC_Int_error_flag = 0;
	unsigned int time1 = 0, time2 = 0, u32_interrupt_reg = 0;

	setScalerVIPInfo.bSRC_VO = (system_info_structure_table->Input_src_Type == _SRC_VO)? 1:0;
	setScalerVIPInfo.source_type = RPC_system_info_structure_table->VIP_source;
	setScalerVIPInfo.bHDR_Chg = (RPC_system_info_structure_table->HDR_info.HDR_Setting_Status == 3)? 1:0;
	setScalerVIPInfo.PictureMode_Chg = PictureMode_flg;
	if(PictureMode_flg == 1)
		PictureMode_flg = 0;

	setScalerVIPInfo.mBrightness = ((osd_bri_sub<<8) + (system_info_structure_table->OSD_Info.Brightness_Gain)) & 0xffff;	// uint16: msb: bri_sub; lsb: bri_main
	setScalerVIPInfo.mContrast= ((osd_con_sub<<8) + (system_info_structure_table->OSD_Info.Contrast_Gain)) & 0xffff;	// uint16: msb: bri_sub; lsb: bri_main

	scaleup_dm_uzu_scale_hor_factor_reg.regValue = rtd_inl(SCALEUP_DM_UZU_Scale_Hor_Factor_reg);
	su_hor_factor_cur = scaleup_dm_uzu_scale_hor_factor_reg.hor_factor;

	scaleup_dm_uzu_scale_ver_factor_reg.regValue = rtd_inl(SCALEUP_DM_UZU_Scale_Ver_Factor_reg);
	su_ver_factor_cur = scaleup_dm_uzu_scale_ver_factor_reg.ver_factor;

	scaledown_ich1_uzd_scale_hor_factor_reg.regValue = rtd_inl(SCALEDOWN_ICH1_UZD_Scale_Hor_Factor_reg);
	sd_hor_factor_cur = scaledown_ich1_uzd_scale_hor_factor_reg.hor_fac;

	scaledown_ich1_uzd_scale_ver_factor_reg.regValue = rtd_inl(SCALEDOWN_ICH1_UZD_Scale_Ver_Factor_reg);
	sd_ver_factor_cur = scaledown_ich1_uzd_scale_ver_factor_reg.ver_fac;

	if((su_hor_factor_pre != su_hor_factor_cur) || (su_ver_factor_pre != su_ver_factor_cur)
		|| (sd_hor_factor_pre != sd_hor_factor_cur) || (sd_ver_factor_pre != sd_ver_factor_cur)||(AspectRation_Zoom_MEMCClose_Flag==1))
	{
		zoom_cnt = 2;
		AspectRation_Zoom_MEMCClose_Flag=0;
	}

	if (zoom_cnt >= 0)
	{
		zoom_cnt--;
	}

	if(zoom_cnt>=0){
		setScalerVIPInfo.bZoomAction = 1;
	}else{
		setScalerVIPInfo.bZoomAction = 0;
	}

	su_hor_factor_pre = su_hor_factor_cur;
	su_ver_factor_pre = su_ver_factor_cur;
	sd_hor_factor_pre = sd_hor_factor_cur;
	sd_ver_factor_pre = sd_ver_factor_cur;

	//xy shift
	ich1_sdnr_cutout_range_hor_reg.regValue = rtd_inl(SCALEDOWN_ich1_sdnr_cutout_range_hor_reg);
	hor_front_cur = ich1_sdnr_cutout_range_hor_reg.hor_front;
	#if 0 //k5l hw remove
	hor_back_cur = ich1_sdnr_cutout_range_hor_reg.hor_back;
	#else
	hor_back_cur = 0 ;
	#endif
	ich1_sdnr_cutout_range_ver0_reg.regValue = rtd_inl(SCALEDOWN_ich1_sdnr_cutout_range_ver0_reg);
	ver_front_cur = ich1_sdnr_cutout_range_ver0_reg.ver_front;

	#if 0 //k5l hw remove
	ver_back_cur = ich1_sdnr_cutout_range_ver0_reg.ver_back;
	#else
	ver_back_cur = 0;
	#endif
	if((hor_front_pre != hor_front_cur) || (hor_back_pre != hor_back_cur)
		|| (ver_front_pre != ver_front_cur) || (ver_back_pre != ver_back_cur))
	{
		setScalerVIPInfo.bShiftAction = 1;
	}
	else
	{
		setScalerVIPInfo.bShiftAction = 0;
	}

	hor_front_pre = hor_front_cur;
	hor_back_pre = hor_back_cur;
	ver_front_pre = ver_front_cur;
	ver_back_pre = ver_back_cur;


	for (i=0; i<COLOR_HISTOGRAM_LEVEL; i++)
	{
		if (SmartPic_clue->Y_Main_Hist[i] > 10000)
		{
			setScalerVIPInfo.mDarkLevel = (i*2);
			break;
		}
	}

	for (i=0; i<COLOR_HISTOGRAM_LEVEL; i++)
	{
		if(Y_Main_Hist_pre[i] > SmartPic_clue->Y_Main_Hist[i])
			Hist_diff = Hist_diff + (Y_Main_Hist_pre[i] - SmartPic_clue->Y_Main_Hist[i]);
		else
			Hist_diff = Hist_diff + (SmartPic_clue->Y_Main_Hist[i] - Y_Main_Hist_pre[i]);
	}

	for (i=0; i<COLOR_HUE_HISTOGRAM_LEVEL; i++)
	{
		if(Hue_Main_His_pre[i] > SmartPic_clue->Hue_Main_His[i])
			Hue_diff = Hue_diff + (Hue_Main_His_pre[i] - SmartPic_clue->Hue_Main_His[i]);
		else
			Hue_diff = Hue_diff + (SmartPic_clue->Hue_Main_His[i] - Hue_Main_His_pre[i]);
	}

	sc_flag = ((Hist_diff > 5000) ? 1 : ((Hue_diff > 500000) ? 1 : 0));

	if(sc_flag == 1){
		sc_cnt = 2;
		//printk("$$$   Hist_diff = (%x)   $$$\r\n$$$   Hue_diff = (%d)   $$$\r\n", Hist_diff, Hue_diff);
	}

	if (sc_cnt > 0)
	{
		sc_cnt--;
	}

	if(sc_cnt>=0){
		setScalerVIPInfo.Hist_SC_flg = 1;
	}else{
		setScalerVIPInfo.Hist_SC_flg = 0;
	}


	for(i =  0; i < COLOR_HISTOGRAM_LEVEL; i++){
		Y_Main_Hist_pre[i] = SmartPic_clue->Y_Main_Hist[i];
	}

	for(i =  0; i < COLOR_HUE_HISTOGRAM_LEVEL; i++){
		Hue_Main_His_pre[i] = SmartPic_clue->Hue_Main_His[i];
	}

	// soccer patch
	{
		unsigned short  h_soccer_grass[COLOR_HUE_HISTOGRAM_LEVEL]={10, 10, 4, 7, 7, 16, 117, 703, 11, 1, 0, 0, 0, 0, 1, 1, 5, 37, 24, 8, 7, 6, 6, 8};
		unsigned int  s_soccer_grass[32]={28, 98, 814, 34, 10, 3, 2, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
		unsigned short  y_soccer_grass[32]={0, 0, 0, 0, 1, 1, 2, 4, 8, 11, 15, 77, 301, 129, 284, 58, 29, 26, 13, 7, 3, 2, 2, 2, 1, 1, 1, 2, 1, 1, 0, 0};

		unsigned short h_ratio, s_ratio, y_ratio;
		unsigned short h_th = 950, s_th = 950, y_th = 920;

		h_ratio = scalerVIP_ratio_inner_product_base_16(&h_soccer_grass[0], &hue_hist_ratio[0], COLOR_HUE_HISTOGRAM_LEVEL);
		s_ratio = scalerVIP_ratio_inner_product_base(&s_soccer_grass[0], &sat_hist_ratio[0], 32);
		y_ratio = scalerVIP_ratio_inner_product_base_16(&y_soccer_grass[0], &Y_hist_ratio[0], 32);

		if((h_ratio>h_th) && (s_ratio>s_th) && (y_ratio>y_th))
		{
			setScalerVIPInfo.mSoccer_holdfrm = 8;
		}
		else if(setScalerVIPInfo.mSoccer_holdfrm>0)
		{
			setScalerVIPInfo.mSoccer_holdfrm--;
		}
		else
		{
			setScalerVIPInfo.mSoccer_holdfrm = 0;
		}
	}

	//high-freq and player OSD change
	{
		if(system_info_structure_table->Input_src_Type == _SRC_HDMI)
		{
			if(RTNR_MAD_count_Y_avg>800 && RTNR_MAD_count_Y3_avg<20)
				setScalerVIPInfo.bVIP_still = 1;
			else
				setScalerVIPInfo.bVIP_still = 0;
		}
	}

	//Forbes ball patch
	{
		static UINT8 Forbes_cnt = 0;
		UINT32 black_sum = 0;
		UINT32 white_sum = 0;
		UINT32 total_sum = 0;
		UINT8 it;

		for(it = 0; it < 20; it++){
			black_sum += SmartPic_clue->Y_Main_Hist[it];
			white_sum += SmartPic_clue->Y_Main_Hist[it+107];
		}

		for(it = 0; it < 128; it++){
			total_sum += SmartPic_clue->Y_Main_Hist[it];
		}

		if(total_sum != 0){
			if((black_sum*100)/total_sum>=95 && (white_sum*100)/total_sum<=5){
				Forbes_cnt++;
				if(Forbes_cnt >= 80)
					Forbes_cnt = 80;
			}else{
				if(Forbes_cnt -1 < 1)
					Forbes_cnt = 1;
				else
					Forbes_cnt--;
			}
		}

		if(Forbes_cnt >= 10)
			Forbes_flg = 1;
		else
			Forbes_flg = 0;

		setScalerVIPInfo.Forbes_flg = Forbes_flg;

	}

	//DTL infomation
	{
		if( Step_sum!=0 ){
			setScalerVIPInfo.DTL_Step_Hist_sum_ratio[0] = (Step_Hist[0]+Step_Hist[1]+Step_Hist[2]+Step_Hist[3])*1000/Step_sum;
        	setScalerVIPInfo.DTL_Step_Hist_sum_ratio[1] = (Step_Hist[4]+Step_Hist[5]+Step_Hist[6]+Step_Hist[7])*1000/Step_sum;
        	setScalerVIPInfo.DTL_Step_Hist_sum_ratio[2] = (Step_Hist[8]+Step_Hist[9]+Step_Hist[10]+Step_Hist[11])*1000/Step_sum;
        	setScalerVIPInfo.DTL_Step_Hist_sum_ratio[3] = (Step_Hist[12]+Step_Hist[13]+Step_Hist[14]+Step_Hist[15])*1000/Step_sum;
        	setScalerVIPInfo.DTL_Step_Hist_sum_ratio[4] = (Step_Hist[16]+Step_Hist[17]+Step_Hist[18]+Step_Hist[19])*1000/Step_sum;
		}else{
			setScalerVIPInfo.DTL_Step_Hist_sum_ratio[0] = 0;
			setScalerVIPInfo.DTL_Step_Hist_sum_ratio[1] = 0;
			setScalerVIPInfo.DTL_Step_Hist_sum_ratio[2] = 0;
			setScalerVIPInfo.DTL_Step_Hist_sum_ratio[3] = 0;
			setScalerVIPInfo.DTL_Step_Hist_sum_ratio[4] = 0;
		}
	}

	//MEMC interrupt monitor
	MEMC_clock_state = (rtd_inl(0xb800011c)>>31)&0x1; // SYS_REG_SYS_CLKEN3_reg
	if((MEMC_OutputFrame_cnt > 0) && (MEMC_OutputFrame_cnt == MEMC_OutputFrame_pre_cnt) && (MEMC_clock_state == 1))
		warning_cnt++;
	else
		warning_cnt = 0;

	if(warning_cnt >= 20){
		if((warning_cnt-20)%120 == 0)
			pr_notice("[WARNING][Error occurs in MEMC output interrupt !!][,%x,%x,%x,%x,]\n", (rtd_inl(0xb8028100)>>13)&0x1, (rtd_inl(0xb802e800))&0x1, rtd_inl(0xb8099018), rtd_inl(0xb809d008));

		if(warning_cnt >= 140)
			warning_cnt = 20;
	}

	MEMC_mux_state = (rtd_inl(PPOVERLAY_MEMC_MUX_CTRL_reg)>>13)&0x1;
	MEMC_InINTEnable_state = (rtd_inl(KMC_TOP__KMC_TOP_18_ADDR)>>25)&0x1;
	MEMC_OutINTEnable_state = (rtd_inl(KPOST_TOP__KPOST_TOP_08_ADDR)>>6)&0x1;
	if((MEMC_mux_state == 1) && (MEMC_clock_state == 1) && (MEMC_InINTEnable_state == 0 || MEMC_OutINTEnable_state == 0)){
		MEMC_Int_error_flag = 1;
		time1 = rtd_inl(0xB801B6B8);
	}
	else
		MEMC_Int_error_flag = 0;

	time2 = rtd_inl(0xB801B6B8);
	if(MEMC_Int_error_flag && (time2-time1 > 900000)){
		// enable interrupt
		//reg_kmc_int_en
		u32_interrupt_reg = rtd_inl(KMC_TOP__KMC_TOP_18_ADDR);
		u32_interrupt_reg |= 0x02000000;
		rtd_outl(KMC_TOP__KMC_TOP_18_ADDR, u32_interrupt_reg);

		//reg_post_int_en
		u32_interrupt_reg = rtd_inl(KPOST_TOP__KPOST_TOP_08_ADDR);
		u32_interrupt_reg |= 0x00000040;
		rtd_outl(KPOST_TOP__KPOST_TOP_08_ADDR, u32_interrupt_reg);
	}

	MEMC_OutputFrame_pre_cnt = MEMC_OutputFrame_cnt;
	//---
}

SET_MEMC_SCALER_VIP_INFO scalerVIP_Get_Info_fromScaler(void)
{
	return setScalerVIPInfo;
}
UINT16 scalerVIP_Get_PatternFlag_Identification(UINT16 nNumber)
{
	return DynamicOptimizeSystem[nNumber];
}
UINT8 scalerVIP_Get_MEMCPatternFlag_Identification(UINT16 nNumber)
{
	return DynamicOptimizeMEMC[nNumber];
}
//============= Set Info to MEMC  =============================

unsigned int *g_Share_Memory_DCC_Force_Write = NULL;
void scalerVIP_Set_DCC_ForceWrite_Flag(unsigned long arg)
{
	g_Share_Memory_DCC_Force_Write = ((unsigned int *)arg);
}

void scalerVIP_color_DRV_SNR_Veritcal_NR(DRV_SNR_Veritcal_NR *ptr)
{
	iedge_smooth_vfilter_0_RBUS vfilter_0_reg;
	iedge_smooth_vfilter_1_RBUS vfilter_1_reg;
	iedge_smooth_vfilter_2_RBUS vfilter_2_reg;
	iedge_smooth_vfilter_3_RBUS vfilter_3_reg;
	iedge_smooth_vfilter_4_RBUS vfilter_4_reg;
	iedge_smooth_vfilter_5_RBUS vfilter_5_reg;
	iedge_smooth_vfilter_6_RBUS vfilter_6_reg;
	iedge_smooth_vfilter_di_info_RBUS vfilter_di_info_reg;
	vfilter_0_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_0_reg);
	vfilter_1_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_1_reg);
	vfilter_2_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_2_reg);
	vfilter_3_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_3_reg);
	vfilter_4_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_4_reg);
	vfilter_5_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_5_reg);
	vfilter_6_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_6_reg);
	vfilter_di_info_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_DI_INFO_reg);

	vfilter_0_reg.avlpf_en = ptr->SNR_Veritcal_avlpf_En;
	vfilter_2_reg.avlpf_c_en = ptr->SNR_Veritcal_C_En;
	vfilter_0_reg.avlpf_correct_en = ptr->SNR_Veritcal_correct_En;
	vfilter_0_reg.avlpf_bw_pattern_en = ptr->SNR_Veritcal_BW_En;
	vfilter_0_reg.vfir_weight = ptr->SNR_Veritcal_Y_Weight;
	vfilter_2_reg.vfir_c_weight = ptr->SNR_Veritcal_C_Weight;
	vfilter_0_reg.avlpf_mindiff_th_start = ptr->SNR_Veritcal_Th_start;
	vfilter_0_reg.avlpf_mindiff_curve_rate_start = ptr->SNR_Veritcal_Rate_start;
	vfilter_0_reg.avlpf_mindiff_th_finish = ptr->SNR_Veritcal_Th_finish;
	vfilter_0_reg.avlpf_mindiff_curve_rate_finish = ptr->SNR_Veritcal_Rate_finish;
	vfilter_0_reg.avlpf_tap_sel = ptr->SNR_Veritcal_avlpf_Tap_Sel;
	vfilter_1_reg.avlpf_max_weight = ptr->SNR_Veritcal_Max_MinDiff_Weight;
	vfilter_1_reg.avlpf_min_weight = ptr->SNR_Veritcal_Min_MinDiff_Weight;
	vfilter_1_reg.avlpf_maxmindiff_th = ptr->SNR_Veritcal_MaxMinDiff_Th;
	vfilter_1_reg.avlpf_maxmindiff_curve_rate = ptr->SNR_Veritcal_MaxMinDiff_Rate;
	vfilter_2_reg.avlpf_bw_th = ptr->SNR_Veritcal_BWPattern_Th;
	vfilter_2_reg.avlpf_bw_margin = ptr->SNR_Veritcal_BWPattern_Margin;
	vfilter_2_reg.avlpf_bw_curve_rate = ptr->SNR_Veritcal_BWPattern_Rate;

	vfilter_4_reg.esmex_iedge_vfir_enable = ptr->SNR_Vertical_fir_En;
	//vfilter_4_reg.egsm_avlpf_vmode = ptr->SNR_Veritcal_Vmode; // Merlin4 remove
	vfilter_4_reg.egsm_avlpf_clamp_en = ptr->SNR_Vertical_Clamp_En;
	vfilter_4_reg.egsm_avlpf_clampth = ptr->SNR_Vertical_Clamp_Th;
	vfilter_4_reg.egsm_avlpf_mindiff_th2_start = ptr->SNR_Vertical_Th2_start;
	//vfilter_6_reg.egsm_avlpf2d_en = ptr->SNR_Veritcal_avlpf2D_En;// Merlin4 remove
	//vfilter_6_reg.egsm_avlpf2d_tolirant_en = ptr->SNR_Veritcal_avlpf2D_Tolirant_En; // Merlin4 remove
	//vfilter_5_reg.egsm_avlpf2d_tolirantmode = ptr->SNR_Veritcal_avlpf2D_Tolirant_Mode; // Merlin4 remove
	//vfilter_6_reg.egsm_avlpf2d_tolirantoffset = ptr->SNR_Veritcal_avlpf2D_Tolirant_Offset; // Merlin4 remove

	// Merlin4 add
	vfilter_6_reg.egsm_avlpf_clampth_tth = ptr->SNR_Vertical_Clamp_Th_TTH;
	vfilter_0_reg.egsm_avlpf_ignorehlh = ptr->SNR_Vertical_IgnoreHLH;
	vfilter_di_info_reg.avlpf_di_teeth_vlpf_en =  ptr->SNR_Vertical_di_teeth_En;
	vfilter_di_info_reg.avlpf_weight_teeth_th =  ptr->SNR_Vertical_di_teeth_Weight_Th;
	vfilter_di_info_reg.egsm_avlpf_clampth_tth_di =  ptr->SNR_Vertical_di_teeth_Clamp_Th;


	// :Vfir_En, :Vmode, :Clamp_En, :Clamp_th, :Th2_sta, :avlpf2D_En, :avlpf2D_Tol_En, :avlpf2D_Tol_Mode, :avlpf2D_Tol_Offset
	// 0, 1, 0, 6, 0, 0, 0, 0, 4
	rtd_outl(IEDGE_SMOOTH_VFILTER_0_reg, vfilter_0_reg.regValue);
	rtd_outl(IEDGE_SMOOTH_VFILTER_1_reg, vfilter_1_reg.regValue);
	rtd_outl(IEDGE_SMOOTH_VFILTER_2_reg, vfilter_2_reg.regValue);
	rtd_outl(IEDGE_SMOOTH_VFILTER_3_reg, vfilter_3_reg.regValue);
	rtd_outl(IEDGE_SMOOTH_VFILTER_4_reg, vfilter_4_reg.regValue);
	rtd_outl(IEDGE_SMOOTH_VFILTER_5_reg, vfilter_5_reg.regValue);
	rtd_outl(IEDGE_SMOOTH_VFILTER_6_reg, vfilter_6_reg.regValue);
	rtd_outl(IEDGE_SMOOTH_VFILTER_DI_INFO_reg, vfilter_di_info_reg.regValue);
}


void scalerVIP_Teeth_detcted(void)
{
	di_di_smd_waterflow_teeth_ctr_RBUS di_di_smd_waterflow_teeth_ctr;
	unsigned int teeth_value=0,gmv_avg=0;
	static unsigned int teeth_avg=0,bad_cnt=0 ,Step_Hist_th=0xc80;
	static unsigned char gmv_avg_th=50;

	di_im_di_ma_field_teeth_th_a_RBUS teeth_detect_th_a_reg;

	di_di_smd_waterflow_teeth_ctr.regValue= rtd_inl(DI_DI_SMD_WaterFlow_Teeth_Ctr_reg);
	di_di_smd_waterflow_teeth_ctr.smd_waterflow_protect_en =1;
	//di_di_smd_waterflow_teeth_ctr.smd_compensate_teeth_th_wf = 5;

	rtd_outl(DI_DI_SMD_WaterFlow_Teeth_Ctr_reg,di_di_smd_waterflow_teeth_ctr.regValue);

	teeth_value = rtd_inl(DI_DI_SMD_WaterFlow_Teeth_Count_reg)&0xffff;


	if((teeth_avg >=1023))
	{
		if((teeth_value<1023)&&(bad_cnt<63))
		{
			teeth_value = 1023;
			bad_cnt++;
			//printk("\n 1 teeth_value %d ,teeth_avg %d ,bad_cnt %d \n ",teeth_value,teeth_avg,bad_cnt);
		}
		else
		{
			bad_cnt=0;
		}

	}
	//if(rtd_inl(0xb802e4f4)==12)
	//printk("\n 2 teeth_value %d ,teeth_avg %d ,bad_cnt %d \n ",teeth_value,teeth_avg,bad_cnt);

	teeth_avg = scalerVIP_compute_I_teeth_Index_Ave(teeth_value,0);



	if(RPC_SmartPic_clue->SceneChange == 1){
		gmv_avg = scalerVIP_compute_I_Gmv_Index_Ave(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),1);
	} else {
		gmv_avg = scalerVIP_compute_I_Gmv_Index_Ave(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),0);
	}

	teeth_detect_th_a_reg.regValue= rtd_inl(DI_IM_DI_MA_FIELD_TEETH_TH_A_reg);

	DI_Video_Broken=0;
	DI_Res_Pat_pan_65ppf = 0;

	//if(rtd_inl(0xb802e4f4)==15)
	//	printk("\n gmv_avg %d ,Step_Hist[0] %X ,teeth_avg %d \n ",gmv_avg,Step_Hist[0] ,teeth_avg);

	if((gmv_avg>=gmv_avg_th)&&Step_Hist[0] <Step_Hist_th) // more still and high frequency less pattern
	{
		gmv_avg_th =50;
		Step_Hist_th = 0xc80;

#if 0
		if(teeth_avg>=100)
		{
			teeth_detect_th_a_reg.ma_fieldteethstha =40;
			DI_Video_Broken =1;
		}
		else if(teeth_avg<=70)
		{
			teeth_detect_th_a_reg.ma_fieldteethstha =0;
			DI_Video_Broken=0;

		}
		else
		{
			teeth_detect_th_a_reg.ma_fieldteethstha = (2*teeth_avg)/5;
			DI_Video_Broken=1;
		}
#else
		if(teeth_avg>=1023)
		{
			teeth_detect_th_a_reg.ma_fieldteethstha =40;
			DI_Video_Broken =1;
		}
		else
		{
			teeth_detect_th_a_reg.ma_fieldteethstha = 0;
			DI_Video_Broken=0;
		}


#endif

	}
	else
	{
		//printk("\n rord fail  %d , %d  \n",gmv_avg,Step_Hist[0]);
		gmv_avg_th =55;
		Step_Hist_th = 0xc80;
		teeth_detect_th_a_reg.ma_fieldteethstha = 0;
	}


	if (gmv_avg <= 38 ){
			DI_Res_Pat_pan_65ppf = 1;
	}

	rtd_outl(DI_IM_DI_MA_FIELD_TEETH_TH_A_reg,teeth_detect_th_a_reg.regValue);

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
	{
		ROSPrintf("\n gmv_avg %d , teeth_avg %d  \n ",gmv_avg,teeth_avg);
		ROSPrintf("\n DI_Video_Broken %d , Step_Hist[0] %d  \n ",DI_Video_Broken,Step_Hist[0]);

	}

}

void scalerVIP_DI_GMV_AVG_for_film()//for DTV576i
{
	#if 1
	unsigned int gmv_avg=0;
	if(RPC_SmartPic_clue->SceneChange == 1){
		gmv_avg = scalerVIP_compute_I_Gmv_Index_Ave(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),1);
	} else	{
		gmv_avg = scalerVIP_compute_I_Gmv_Index_Ave(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio(),0);
	}

	if( gmv_avg >= 90 )
		GMV_status_for_Filim = 1;
	else
		GMV_status_for_Filim = 0;

	#else
	short i = 0;
	unsigned char vpan_up_pass_total = 0, vpan_down_pass_total = 0, pass = 0;
	di_di_smd_gmvcoeff3_RBUS smd_gmvcoeff3_reg;
	static unsigned char Pass_Result_Sequence[VPAN_PASS_COUNT] = {0,0,0,0,0,0,0,0,0,0,
							      0,0,0,0,0,0,0,0,0,0,
							      0,0,0,0,0,0,0,0,0,0};

	smd_gmvcoeff3_reg.regValue = rtd_inl(DI_DI_SMD_GMVCOEFF3_reg);

	if (smd_gmvcoeff3_reg.smd_gmv2_x == 3 && (smd_gmvcoeff3_reg.smd_gmv2_y < 3 || smd_gmvcoeff3_reg.smd_gmv1_y <3))
		pass = 2; // move up
	else if (smd_gmvcoeff3_reg.smd_gmv2_x == 3 && (smd_gmvcoeff3_reg.smd_gmv2_y > 3 || smd_gmvcoeff3_reg.smd_gmv1_y > 3))
		pass = 1; // move down
	else
		pass = 0;

	// assign pass sequence
	for (i=VPAN_PASS_COUNT-2; i>=0; i--){
		Pass_Result_Sequence[i+1] = Pass_Result_Sequence[i];
	}
	Pass_Result_Sequence[0] = pass;

	for (i=0; i<VPAN_PASS_COUNT; i++)
	{
		if (Pass_Result_Sequence[i] == 2)
			vpan_up_pass_total++;
		else if (Pass_Result_Sequence[i] == 1)
			vpan_down_pass_total++;
	}

	if (vpan_up_pass_total > 12)
		VPan_status_for_Filim = 2;
	else if (vpan_down_pass_total > 12)
		VPan_status_for_Filim = 1;
	else
		VPan_status_for_Filim = 0;

	if((MA_print_count%debug_print_delay_time==0)&&(Start_Print.ID_Pattern_107==TRUE))
	{
		ROSPrintf("StatusUpdate : VPan_status_for_Filim = %d \n",VPan_status_for_Filim);
		ROSPrintf("StatusUpdate : gmv_y = %d %d \n",smd_gmvcoeff3_reg.smd_gmv1_y,smd_gmvcoeff3_reg.smd_gmv2_y);
		ROSPrintf("StatusUpdate : gmv_x = %d %d %d \n",smd_gmvcoeff3_reg.smd_gmv1_x,smd_gmvcoeff3_reg.smd_gmv2_x,smd_gmvcoeff3_reg.smd_gmv3_x);
		ROSPrintf("StatusUpdate : vpan_up_pass_total = %d \n",vpan_up_pass_total);
		ROSPrintf("StatusUpdate : vpan_down_pass_total = %d \n",vpan_down_pass_total);
	}




	#endif

}
#if 0
char ScalerVIP_Set_PQ_ByPass_Lv_ISR(unsigned char table_idx)
{
	char ret;

	_RPC_system_setting_info *RPC_VIP_system_info_structure_table = NULL;
	RPC_VIP_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if (RPC_system_info_structure_table == NULL) {
		if(MA_print_count%360==0)
			ROSPrintf("ScalerVIP_Set_PQ_ByPass_Lv_ISR, system info structure NULL !!!\n");
		return 0;
	}
	ret = fwif_color_PQ_ByPass_Handler_ISR(table_idx, 1, RPC_VIP_system_info_structure_table, 0);

	return ret;
}

char ScalerVIP_Get_PQ_ByPass_Lv_ISR(void)
{
	char ret;

	_RPC_system_setting_info *RPC_VIP_system_info_structure_table = NULL;
	RPC_VIP_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if((RPC_VIP_system_info_structure_table == NULL) ) {
		if(MA_print_count%360==0)
			ROSPrintf("Share Memory PQ data ERROR,RPC_VIP_system_info_structure_table = %p\n",RPC_VIP_system_info_structure_table);
		return 0;
	}

	ret = fwif_color_PQ_ByPass_Handler_ISR(0, 0, RPC_VIP_system_info_structure_table, 0);

	return ret;
}

char fwif_color_PQ_ByPass_Handler_ISR(unsigned char table_idx, unsigned char isSet_Flag, _RPC_system_setting_info *RPC_VIP_system_info_structure_table, unsigned char Force_byPass)
{
	unsigned char tbl_idx, i;
	VIP_PQ_ByPass_Struct *pPQ_ByPass_Struct;

	if (isSet_Flag == 1){

		if (table_idx >= VIP_PQ_ByPass_TBL_Max)
			table_idx = 0;

		RPC_VIP_system_info_structure_table->PQ_ByPass_Ctrl.table_idx = table_idx;
		tbl_idx = table_idx;

		pPQ_ByPass_Struct = &(RPC_VIP_system_info_structure_table->PQ_ByPass_Ctrl.PQ_ByPass_Struct[tbl_idx]);

		for (i=0; i<VIP_PQ_ByPass_ITEMS_Max; i++) {
			if (pPQ_ByPass_Struct->VIP_PQ_ByPass_TBL[i] == 1  || Force_byPass == 1)
				drvif_color_set_PQ_ByPass_ISR(i);
		}
	}
	return RPC_VIP_system_info_structure_table->PQ_ByPass_Ctrl.table_idx;
}

char drvif_color_set_PQ_ByPass_ISR(unsigned char bypass_item)
{
	di_im_di_control_RBUS di_im_di_control_reg;
	di_im_di_control_reg.regValue = IoReg_Read32(DI_IM_DI_CONTROL_reg);

	switch(bypass_item) {
		/*===============I Domain===========*/
		case PQ_ByPass_Iedge_Smooth:
			IoReg_ClearBits(IEDGE_SMOOTH_dejagging_ctrl0_reg, IEDGE_SMOOTH_dejagging_ctrl0_i_dejag_en_mask);//_BIT0
			IoReg_SetBits(IEDGE_SMOOTH_EDSM_DB_CTRL_reg, IEDGE_SMOOTH_EDSM_DB_CTRL_edsm_db_apply_mask); /* SNR DB apply */

		break;

		case PQ_ByPass_MPEG_NR:
			IoReg_ClearBits(MPEGNR_ICH1_MPEGNR2_reg, MPEGNR_ICH1_MPEGNR2_cp_mpegenable_x_mask);//_BIT0
			IoReg_SetBits(NR_SNR_DB_CTRL_reg, NR_SNR_DB_CTRL_snr_db_apply_mask); /* SNR DB apply */
		break;

		case PQ_ByPass_HSD_DITHER:
			IoReg_ClearBits(HSD_DITHER_SD_Dither_CTRL1_reg, HSD_DITHER_SD_Dither_CTRL1_ch1_dithering_table_select_mask); //_BIT5 | _BIT6
		break;

		case PQ_ByPass_HSD_DITHER_Temporal:
			IoReg_ClearBits(HSD_DITHER_SD_Dither_CTRL1_reg, HSD_DITHER_SD_Dither_CTRL1_ch1_temporal_enable_mask);//_BIT4
		break;

		case PQ_ByPass_RTNR_Y:
			IoReg_ClearBits(DI_IM_DI_RTNR_CONTROL_reg, DI_IM_DI_RTNR_CONTROL_cp_rtnr_y_enable_mask);//_BIT0
			IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_apply_mask);	/* HW do not clear this bit, alway turn on, setting will be apply while v_sync*/
		break;

		case PQ_ByPass_RTNR_C:
			IoReg_ClearBits(DI_IM_DI_RTNR_CONTROL_reg, DI_IM_DI_RTNR_CONTROL_cp_rtnr_c_enable_mask);//_BIT1
			IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_apply_mask);	/* HW do not clear this bit, alway turn on, setting will be apply while v_sync*/
		break;

		case PQ_ByPass_MCNR:
			IoReg_ClearBits(DI_IM_DI_RTNR_HMCNR_reg, DI_IM_DI_RTNR_HMCNR_cp_temporal_hmcnr_y_en_mask);//_BIT7
		break;

		case PQ_ByPass_I_DCTI:
			IoReg_ClearBits(IDCTI_I_DCTI_CTRL_1_reg, IDCTI_I_DCTI_CTRL_1_dcti_en_mask);//_BIT0
		break;
		case PQ_ByPass_ImpulseNR://k5l hw remove:
			//IoReg_ClearBits(NR_DCH1_CP_Ctrl_reg, NR_DCH1_CP_Ctrl_cp_impulseenable_mask);//_BIT0
			//IoReg_SetBits(NR_SNR_DB_CTRL_reg, NR_SNR_DB_CTRL_snr_db_apply_mask); /* SNR DB apply */
		break;
		case PQ_ByPass_SNR_C:
			IoReg_ClearBits(NR_DCH1_CP_Ctrl_reg, NR_DCH1_CP_Ctrl_cp_spatialenablec_mask);//_BIT1
			IoReg_SetBits(NR_SNR_DB_CTRL_reg, NR_SNR_DB_CTRL_snr_db_apply_mask); /* SNR DB apply */
		break;

		case PQ_ByPass_SNR_Y:
			IoReg_ClearBits(NR_DCH1_CP_Ctrl_reg, NR_DCH1_CP_Ctrl_cp_spatialenabley_mask);//_BIT2
			IoReg_SetBits(NR_SNR_DB_CTRL_reg, NR_SNR_DB_CTRL_snr_db_apply_mask); /* SNR DB apply */
		break;

		case PQ_ByPass_MosquiutoNR:
			IoReg_ClearBits(NR_MOSQUITO_CTRL_reg, NR_MOSQUITO_CTRL_mosquito_detect_en_mask);//_BIT0
		break;

		case PQ_ByPass_I_Peaking://k5l hw remove:
			//IoReg_ClearBits(PEAKING_ICH1_PEAKING_FILTER_reg, PEAKING_ICH1_PEAKING_FILTER_peaking_enable_mask);//_BIT26
		break;

		case PQ_ByPass_MB_Peaking:
			IoReg_ClearBits(COLOR_MB_PEAKING_MB_PEAKING_CTRL_reg, COLOR_MB_PEAKING_MB_PEAKING_CTRL_mb_peaking_en_mask);//_BIT0
		break;

		/*Sub*/
		case PQ_ByPass_HSD_DITHER_Sub:
			IoReg_ClearBits(SUB_DITHER_I_Sub_Dither_CTRL1_reg, SUB_DITHER_I_Sub_Dither_CTRL1_ch2_dithering_table_select_mask);//_BIT5|_BIT6
		break;

		case PQ_ByPass_HSD_DITHER_Temporal_Sub:
			IoReg_ClearBits(SUB_DITHER_I_Sub_Dither_CTRL1_reg, SUB_DITHER_I_Sub_Dither_CTRL1_ch2_temporal_enable_mask);//_BIT4
		break;

		case PQ_ByPass_I_Peaking_Sub://k5l hw remove:
			//IoReg_ClearBits(PEAKING_ICH2_PEAKING_FILTER_reg, PEAKING_ICH2_PEAKING_FILTER_peaking_enable_mask);//_BIT26
		break;

		/*===============D Domain===========*/
		/*Main*/
		case PQ_ByPass_USM:
			/*  the hardware has been removed */

		break;

		case PQ_ByPass_SU_Peaking:
			/*  the hardware has been removed */
		break;

		case PQ_ByPass_SHP_DLTI:
			IoReg_ClearBits(COLOR_SHARP_SHP_DLTI_CTRL_1_reg, COLOR_SHARP_SHP_DLTI_CTRL_1_dlti_en_mask);//_BIT0
		break;

		case PQ_ByPass_DCC:
			IoReg_D_domain_ClearBits(COLOR_D_VC_Global_CTRL_reg, COLOR_D_VC_Global_CTRL_dcc_en_mask);//_BIT0
		break;

		case PQ_ByPass_DCTI:
			IoReg_D_domain_ClearBits(COLOR_D_VC_Global_CTRL_reg, COLOR_D_VC_Global_CTRL_m_dcti_en_mask);//_BIT2
			IoReg_ClearBits(COLOR_D_VC_Global_CTRL_DB_reg, COLOR_D_VC_Global_CTRL_DB_db_load_shift);//_BIT0
		break;

		case PQ_ByPass_ICM:
			IoReg_D_domain_ClearBits(COLOR_D_VC_Global_CTRL_reg, COLOR_D_VC_Global_CTRL_m_icm_en_mask);//_BIT3
		break;

		case PQ_ByPass_SHP:
			IoReg_D_domain_ClearBits(COLOR_D_VC_Global_CTRL_reg, COLOR_D_VC_Global_CTRL_m_sharp_en_mask);//_BIT4
		break;

		case PQ_ByPass_Dedge_Smooth://k5l hw remove:
			//IoReg_D_domain_ClearBits(COLOR_D_VC_Global_CTRL_reg, COLOR_D_VC_Global_CTRL_m_edgesmooth_en_mask);//_BIT5
		break;

		case PQ_ByPass_CDS:
			IoReg_ClearBits(COLOR_SHARP_DM_CDS_CM0_U_BOUND_0_reg, COLOR_SHARP_DM_CDS_CM0_U_BOUND_0_cds_enable_mask);//_BIT27
		break;

		case PQ_ByPass_UV_Offset:
			IoReg_ClearBits(YUV2RGB_D_UVOFFSETBYY_CONTROL_reg, YUV2RGB_D_UVOFFSETBYY_CONTROL_uvoffsetbyy_main_en_mask);//_BIT0
		break;

		case PQ_ByPass_V_CTI:
			IoReg_ClearBits(SCALEUP_DM_MEM_CRC_CTRL_reg, SCALEUP_DM_MEM_CRC_CTRL_vcti_en_mask);//_BIT4
		break;

		case PQ_ByPass_sRGB: //k5l hw remove
			//IoReg_ClearBits(SRGB_sRGB_CTRL_reg, SRGB_sRGB_CTRL_srgb_m_tab_sel_mask);//_BIT0|_BIT1
		break;

		case PQ_ByPass_COLOR_MAP:
			IoReg_ClearBits(COLORMAP_D_CMRGB2RGB_Control, COLORMAP_D_CMRGB2RGB_Control_cmrgb2rgb_main_en_mask);//_BIT0|_BIT1
		break;

		case PQ_ByPass_Gamma:
			IoReg_ClearBits(GAMMA_GAMMA_CTRL_2_reg, GAMMA_GAMMA_CTRL_2_gamma_m_tab_sel_mask);//_BIT6|_BIT7
		break;

		case PQ_ByPass_InvGamma:
			IoReg_ClearBits(INV_GAMMA_INV_GAMMA_CTRL_2_reg, INV_GAMMA_INV_GAMMA_CTRL_2_inv_gamma_m_tab_sel_mask);//_BIT6|_BIT7
		break;

		case PQ_ByPass_ColorTemp:
			IoReg_ClearBits(COLOR_TEMP_Color_Temp_CTRL_reg, COLOR_TEMP_Color_Temp_CTRL_color_temp_en_mask);//_BIT0
		break;

		case PQ_ByPass_DITHER:
			IoReg_ClearBits(DITHER_DITHERING_CTRL_reg, DITHER_DITHERING_CTRL_function_enable_mask);//_BIT5
		break;

		case PQ_ByPass_DITHER_Temporal:
			IoReg_ClearBits(DITHER_DITHERING_CTRL_reg, DITHER_DITHERING_CTRL_temporal_enable_mask);//_BIT4
		break;

		/*Sub*/
		case PQ_ByPass_DCTI_Sub:
			/*  the hardware has been removed */
		break;

		case PQ_ByPass_ICM_Sub:
			IoReg_ClearBits(COLOR_D_VC_Global_CTRL_0_reg, COLOR_D_VC_Global_CTRL_0_s_icm_en_mask);//_BIT18
		break;

		case PQ_ByPass_SHP_Sub:
			/*  the hardware has been removed */
		break;

		case PQ_ByPass_sRGB_Sub: //k5l hw remove
			//IoReg_ClearBits(SRGB_sRGB_CTRL_reg, SRGB_sRGB_CTRL_srgb_s_tab_sel_mask);//_BIT2|_BIT3
		break;
		case PQ_ByPass_COLOR_MAP_Sub:
			IoReg_ClearBits(COLORMAP_D_CMRGB2RGB_Control, COLORMAP_D_CMRGB2RGB_Control_cmrgb2rgb_sub_en_mask);//_BIT0|_BIT1
		break;

		case PQ_ByPass_Gamma_Gamma:
			IoReg_ClearBits(GAMMA_GAMMA_CTRL_2_reg, GAMMA_GAMMA_CTRL_2_gamma_s_tab_sel_mask);//_BIT4|_BIT5
		break;

		case PQ_ByPass_InvGamma_Sub:
			IoReg_ClearBits(INV_GAMMA_INV_GAMMA_CTRL_2_reg, INV_GAMMA_INV_GAMMA_CTRL_2_inv_gamma_s_tab_sel_mask);//_BIT4|_BIT5
		break;

		/* new */
		case PQ_ByPass_I_DI_IP_Enable:
			di_im_di_control_reg.ip_enable=0;
			di_im_di_control_reg.write_enable_8=1;
			IoReg_Write32(DI_IM_DI_CONTROL_reg, di_im_di_control_reg.regValue);

			//IoReg_ClearBits(DI_IM_DI_CONTROL_reg, DI_IM_DI_CONTROL_ip_enable_mask);//_BIT28
			IoReg_ClearBits(VGIP_Data_Path_Select_reg, VGIP_Data_Path_Select_uzd1_in_sel_mask);	/*path need to change while IP disable*/
			IoReg_SetBits(DI_db_reg_ctl_reg, DI_db_reg_ctl_db_apply_mask);	/* HW do not clear this bit, alway turn on, setting will be apply while v_sync*/
#if 0 //k5l hw remove
			//IoReg_SetBits(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg, VGIP_VGIP_CHN1_ACT_HSTA_Width_ch1_db_rdy_mask);	/* path double buffer*/
#endif
		break;


	}
	return 0;
}
#endif
//extern void vsc_v4l2_active_win_event_wakeup(unsigned char display, StructRect active_size, StructRect ori_size);
char scalerVIP_SMF_BlackDetection(unsigned char enable)
{
	unsigned int IWid, ILen, ISTA_H, ISTA_V;
	static unsigned int BBD_Act_X_LastFrame, BBD_Act_Y_LastFrame, BBD_Act_W_LastFrame, BBD_Act_H_LastFrame;
	static unsigned int cnt, not_first_detect = 0;
	static StructRect active_size, ori_size;
	unsigned char SmallShift_TH = 2;

	smartfit_auto_field_RBUS smartfit_auto_field; // 2000
	smartfit_auto_h_boundary_RBUS smartfit_auto_h_boundary; //2004 hin
	smartfit_auto_v_boundary_RBUS smartfit_auto_v_boundary; //2008 vin
	smartfit_auto_r_g_b_margin_RBUS smartfit_auto_r_g_b_margin; //200c TH
	smartfit_auto_adj_RBUS smartfit_auto_adj; // 2010 start
	smartfit_auto_result_vsta_end_RBUS smartfit_auto_result_vsta_end; //2014 result v
	smartfit_auto_result_hsta_end_RBUS smartfit_auto_result_hsta_end; //2018 result h

	if (enable==0) {/*disable, reset variables*/
		cnt = 0;
		ori_size.x = 0;
		ori_size.y = 0;
		ori_size.width = 0;
		ori_size.height = 0;
		active_size.x = 0;
		active_size.y = 0;
		active_size.width = 0;
		active_size.height = 0;
		BBD_Act_X_LastFrame = 0;
		BBD_Act_Y_LastFrame = 0;
		BBD_Act_W_LastFrame = 0;
		BBD_Act_H_LastFrame = 0;
		not_first_detect = 0;


	} else {

			smartfit_auto_field.regValue = scaler_rtd_inl(SMARTFIT_AUTO_FIELD_reg);
			smartfit_auto_h_boundary.regValue = scaler_rtd_inl(SMARTFIT_AUTO_H_BOUNDARY_reg);
			smartfit_auto_v_boundary.regValue = scaler_rtd_inl(SMARTFIT_AUTO_V_BOUNDARY_reg);
			smartfit_auto_r_g_b_margin.regValue = scaler_rtd_inl(SMARTFIT_AUTO_R_G_B_MARGIN_reg);
			smartfit_auto_adj.regValue = scaler_rtd_inl(SMARTFIT_AUTO_ADJ_reg);

			/*main channel info*/
			IWid = VGIP_VGIP_CHN1_ACT_HSTA_Width_get_ch1_ih_act_wid(IoReg_Read32(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg));//Scaler_DispGetInputInfoByDisp(SLR_MAIN_DISPLAY, SLR_INPUT_IPH_ACT_WID_PRE);//scaler_disp_info[display].IphActWid_Pre; //1280
			ILen = VGIP_VGIP_CHN1_ACT_VSTA_Length_get_ch1_iv_act_len(IoReg_Read32(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg));//Scaler_DispGetInputInfoByDisp(SLR_MAIN_DISPLAY, SLR_INPUT_IPV_ACT_LEN_PRE);//scaler_disp_info[display].IpvActLen_Pre; //720
			ISTA_H = VGIP_VGIP_CHN1_ACT_HSTA_Width_get_ch1_ih_act_sta(IoReg_Read32(VGIP_VGIP_CHN1_ACT_HSTA_Width_reg));//Scaler_DispGetInputInfoByDisp(SLR_MAIN_DISPLAY, SLR_INPUT_IPH_ACT_STA_PRE);//scaler_disp_info[display].IphActSTA_Pre; //325
			ISTA_V = VGIP_VGIP_CHN1_ACT_VSTA_Length_ch1_iv_act_sta(IoReg_Read32(VGIP_VGIP_CHN1_ACT_VSTA_Length_reg));//Scaler_DispGetInputInfoByDisp(SLR_MAIN_DISPLAY, SLR_INPUT_IPV_ACT_STA_PRE);//scaler_disp_info[display].IpvActSTA_Pre; //23




#if 0 /* Debug Log*/
			if (cnt %1 ==0) {
				rtd_printk(KERN_EMERG, TAG_NAME,"main cnt=%d, IWid = %d, ILen = %d\n",cnt, IWid,ILen);
			}
#endif

		if (smartfit_auto_adj.now_af != 0) { /*HW Detecting*/
			if (cnt%300==0 || cnt%300==1)
				rtd_printk(KERN_INFO, TAG_NAME,"[SMF] Detecting, main cnt=%d\n",cnt);

		} else {/*update detection result + set detection*/

			smartfit_auto_result_vsta_end.regValue = scaler_rtd_inl(SMARTFIT_AUTO_RESULT_VSTA_END_reg);
			smartfit_auto_result_hsta_end.regValue = scaler_rtd_inl(SMARTFIT_AUTO_RESULT_HSTA_END_reg);
			if (not_first_detect !=0) { /*not first time to set detect, have result to read back*/
				/* protection*/
				if (smartfit_auto_result_vsta_end.vx_sta== 0 && smartfit_auto_result_vsta_end.vx_end ==0 && smartfit_auto_result_hsta_end.hx_sta == 0x3fff && smartfit_auto_result_hsta_end.hx_end == 0) {
					smartfit_auto_adj.now_af = 1;
					scaler_rtd_outl(SMARTFIT_AUTO_ADJ_reg, smartfit_auto_adj.regValue); // en
					rtd_printk(KERN_INFO, TAG_NAME,"[SMF] Enter BBD Protection, main cnt=%d\n",cnt);
				} else {

						/*update BBD result*/
						/*rtd_printk(KERN_EMERG, TAG_NAME,"[SMF] Enter update BBD result, main cnt=%d\n",cnt);*/
						if (abs(((int)smartfit_auto_result_hsta_end.hx_sta)-(int)BBD_Act_X_LastFrame)>SmallShift_TH ||
								abs(((int)smartfit_auto_result_vsta_end.vx_sta)-(int)BBD_Act_Y_LastFrame)>SmallShift_TH ||
								abs(((int)smartfit_auto_result_hsta_end.hx_end-(int)smartfit_auto_result_hsta_end.hx_sta+1)-(int)BBD_Act_W_LastFrame)>SmallShift_TH ||
								abs(((int)smartfit_auto_result_vsta_end.vx_end-(int)smartfit_auto_result_vsta_end.vx_sta+1)-(int)BBD_Act_H_LastFrame)>SmallShift_TH) {


							if (	ori_size.x != 0  ||
									ori_size.y != 0  ||
									ori_size.width != IWid	||
									ori_size.height != ILen  ||
									active_size.x != smartfit_auto_result_hsta_end.hx_sta  ||
									active_size.y != smartfit_auto_result_vsta_end.vx_sta-1  ||
									active_size.width != smartfit_auto_result_vsta_end.vx_end-smartfit_auto_result_vsta_end.vx_sta+1  ||
									active_size.height != smartfit_auto_result_vsta_end.vx_end-smartfit_auto_result_vsta_end.vx_sta+1  ) {

									ori_size.x = 0;
									ori_size.y = 0;
									ori_size.width = IWid;
									ori_size.height = ILen;
									active_size.x = smartfit_auto_result_hsta_end.hx_sta;
									active_size.y = smartfit_auto_result_vsta_end.vx_sta-1;
									active_size.width = smartfit_auto_result_hsta_end.hx_end-smartfit_auto_result_hsta_end.hx_sta+1;
									active_size.height = smartfit_auto_result_vsta_end.vx_end-smartfit_auto_result_vsta_end.vx_sta+1;
									rtd_printk(KERN_INFO, TAG_NAME,"1. ori=%d,%d,%d,%d ####\n",ori_size.x, ori_size.y,ori_size.width,ori_size.height);
									rtd_printk(KERN_INFO, TAG_NAME,"2. act=%d,%d,%d,%d ####\n",active_size.x, active_size.y,active_size.width,active_size.height);

									//vsc_v4l2_active_win_event_wakeup(0, active_size, ori_size);
							}

						}


						/*update detection info, for avoid small shift*/
						BBD_Act_X_LastFrame = smartfit_auto_result_hsta_end.hx_sta;
						BBD_Act_Y_LastFrame = smartfit_auto_result_vsta_end.vx_sta-1;
						BBD_Act_W_LastFrame = smartfit_auto_result_hsta_end.hx_end-smartfit_auto_result_hsta_end.hx_sta+1;
						BBD_Act_H_LastFrame = smartfit_auto_result_vsta_end.vx_end-smartfit_auto_result_vsta_end.vx_sta+1;




				}
			}
			/*set detection*/
			if (cnt%300==0 || cnt%300==1)
				rtd_printk(KERN_INFO, TAG_NAME,"[SMF] set detection, main cnt=%d\n",cnt);
			smartfit_auto_h_boundary.hb_sta = 0;
			smartfit_auto_h_boundary.hb_end = IWid;
			smartfit_auto_v_boundary.vb_sta = 0;
			smartfit_auto_v_boundary.vb_end= ILen;
			smartfit_auto_r_g_b_margin.red_nm = 63;
			smartfit_auto_r_g_b_margin.grn_nm = 5;
			smartfit_auto_r_g_b_margin.blu_nm = 63;

			smartfit_auto_field.smartfit_src_sel = 1;
			smartfit_auto_field.adj_source = 0; /*main*/
			smartfit_auto_field.no_hs_mode = 1;
			scaler_rtd_outl(SMARTFIT_AUTO_FIELD_reg, smartfit_auto_field.regValue);
			scaler_rtd_outl(SMARTFIT_AUTO_H_BOUNDARY_reg, smartfit_auto_h_boundary.regValue);
			scaler_rtd_outl(SMARTFIT_AUTO_V_BOUNDARY_reg, smartfit_auto_v_boundary.regValue);
			scaler_rtd_outl(SMARTFIT_AUTO_R_G_B_MARGIN_reg, smartfit_auto_r_g_b_margin.regValue);

			smartfit_auto_adj.m_vgen_en = 0;
			smartfit_auto_adj.now_af = 1;
			scaler_rtd_outl(SMARTFIT_AUTO_ADJ_reg, smartfit_auto_adj.regValue); // en

		}
		cnt ++;
		not_first_detect = 1;
	}

	return 0;

}



char scalerVIP_SMF_BlackDetection_SUB(unsigned char enable)
{
	unsigned int IWid, ILen, ISTA_H, ISTA_V;
	static unsigned int BBD_Act_X_LastFrame, BBD_Act_Y_LastFrame, BBD_Act_W_LastFrame, BBD_Act_H_LastFrame;
	static unsigned int cnt, not_first_detect = 0;
	static StructRect active_size, ori_size;
	unsigned char SmallShift_TH = 2;

	smartfit_auto_field_RBUS smartfit_auto_field; // 2000
	smartfit_auto_h_boundary_RBUS smartfit_auto_h_boundary; //2004 hin
	smartfit_auto_v_boundary_RBUS smartfit_auto_v_boundary; //2008 vin
	smartfit_auto_r_g_b_margin_RBUS smartfit_auto_r_g_b_margin; //200c TH
	smartfit_auto_adj_RBUS smartfit_auto_adj; // 2010 start
	smartfit_auto_result_vsta_end_RBUS smartfit_auto_result_vsta_end; //2014 result v
	smartfit_auto_result_hsta_end_RBUS smartfit_auto_result_hsta_end; //2018 result h

	if (enable==0) {/*disable, reset variables*/
		cnt = 0;
		ori_size.x = 0;
		ori_size.y = 0;
		ori_size.width = 0;
		ori_size.height = 0;
		active_size.x = 0;
		active_size.y = 0;
		active_size.width = 0;
		active_size.height = 0;
		BBD_Act_X_LastFrame = 0;
		BBD_Act_Y_LastFrame = 0;
		BBD_Act_W_LastFrame = 0;
		BBD_Act_H_LastFrame = 0;
		not_first_detect = 0;


	} else {

			smartfit_auto_field.regValue = scaler_rtd_inl(SMARTFIT_AUTO_FIELD_reg);
			smartfit_auto_h_boundary.regValue = scaler_rtd_inl(SMARTFIT_AUTO_H_BOUNDARY_reg);
			smartfit_auto_v_boundary.regValue = scaler_rtd_inl(SMARTFIT_AUTO_V_BOUNDARY_reg);
			smartfit_auto_r_g_b_margin.regValue = scaler_rtd_inl(SMARTFIT_AUTO_R_G_B_MARGIN_reg);
			smartfit_auto_adj.regValue = scaler_rtd_inl(SMARTFIT_AUTO_ADJ_reg);

			/*sub channel info*/
			IWid = SUB_VGIP_VGIP_CHN2_ACT_HSTA_Width_get_ch2_ih_act_wid(IoReg_Read32(SUB_VGIP_VGIP_CHN2_ACT_HSTA_Width_reg));//Scaler_DispGetInputInfoByDisp(SLR_SUB_DISPLAY, SLR_INPUT_IPH_ACT_WID_PRE);//scaler_disp_info[display].IphActWid_Pre; //1280
			ILen = SUB_VGIP_VGIP_CHN2_ACT_VSTA_Length_get_ch2_iv_act_len(IoReg_Read32(SUB_VGIP_VGIP_CHN2_ACT_VSTA_Length_reg));//Scaler_DispGetInputInfoByDisp(SLR_SUB_DISPLAY, SLR_INPUT_IPV_ACT_LEN_PRE);//scaler_disp_info[display].IpvActLen_Pre; //720
			ISTA_H = SUB_VGIP_VGIP_CHN2_ACT_HSTA_Width_get_ch2_ih_act_sta(IoReg_Read32(SUB_VGIP_VGIP_CHN2_ACT_HSTA_Width_reg));//Scaler_DispGetInputInfoByDisp(SLR_SUB_DISPLAY, SLR_INPUT_IPH_ACT_STA_PRE);//scaler_disp_info[display].IphActSTA_Pre; //325
			ISTA_V = SUB_VGIP_VGIP_CHN2_ACT_VSTA_Length_get_ch2_iv_act_sta(IoReg_Read32(SUB_VGIP_VGIP_CHN2_ACT_VSTA_Length_reg));//Scaler_DispGetInputInfoByDisp(SLR_SUB_DISPLAY, SLR_INPUT_IPV_ACT_STA_PRE);//scaler_disp_info[display].IpvActSTA_Pre; //23




#if 0 /* Debug Log*/
			if (cnt %1 ==0) {
				rtd_printk(KERN_EMERG, TAG_NAME,"SUB cnt=%d, IWid = %d, ILen = %d\n",cnt, IWid,ILen);
			}
#endif

		if (smartfit_auto_adj.now_af != 0) { /*HW Detecting*/
			if (cnt%300==0 || cnt%300==1)
				rtd_printk(KERN_INFO, TAG_NAME,"[SMF] Detecting, sub cnt=%d\n",cnt);

		} else {/*update detection result + set detection*/

			smartfit_auto_result_vsta_end.regValue = scaler_rtd_inl(SMARTFIT_AUTO_RESULT_VSTA_END_reg);
			smartfit_auto_result_hsta_end.regValue = scaler_rtd_inl(SMARTFIT_AUTO_RESULT_HSTA_END_reg);
			if (not_first_detect !=0) { /*not first time to set detect, have result to read back*/
				/* protection*/
				if (smartfit_auto_result_vsta_end.vx_sta== 0 && smartfit_auto_result_vsta_end.vx_end ==0 && smartfit_auto_result_hsta_end.hx_sta == 0x3fff && smartfit_auto_result_hsta_end.hx_end == 0) {
					smartfit_auto_adj.now_af = 1;
					scaler_rtd_outl(SMARTFIT_AUTO_ADJ_reg, smartfit_auto_adj.regValue); // en
					rtd_printk(KERN_INFO, TAG_NAME,"[SMF] Enter BBD Protection, SUB cnt=%d\n",cnt);
				} else {

						/*update BBD result*/
						/*rtd_printk(KERN_EMERG, TAG_NAME,"[SMF] Enter update BBD result, SUB cnt=%d\n",cnt);*/
						if (abs(((int)smartfit_auto_result_hsta_end.hx_sta)-(int)BBD_Act_X_LastFrame)>SmallShift_TH ||
					            abs(((int)smartfit_auto_result_vsta_end.vx_sta)-(int)BBD_Act_Y_LastFrame)>SmallShift_TH ||
					            abs(((int)smartfit_auto_result_hsta_end.hx_end-(int)smartfit_auto_result_hsta_end.hx_sta+1)-(int)BBD_Act_W_LastFrame)>SmallShift_TH ||
					            abs(((int)smartfit_auto_result_vsta_end.vx_end-(int)smartfit_auto_result_vsta_end.vx_sta+1)-(int)BBD_Act_H_LastFrame)>SmallShift_TH) {


							if (	ori_size.x != 0  ||
									ori_size.y != 0  ||
									ori_size.width != IWid  ||
									ori_size.height != ILen  ||
									active_size.x != smartfit_auto_result_hsta_end.hx_sta  ||
									active_size.y != smartfit_auto_result_vsta_end.vx_sta-1  ||
									active_size.width != smartfit_auto_result_vsta_end.vx_end-smartfit_auto_result_vsta_end.vx_sta+1  ||
									active_size.height != smartfit_auto_result_vsta_end.vx_end-smartfit_auto_result_vsta_end.vx_sta+1  ) {

									ori_size.x = 0;
									ori_size.y = 0;
									ori_size.width = IWid;
									ori_size.height = ILen;
									active_size.x = smartfit_auto_result_hsta_end.hx_sta;
									active_size.y = smartfit_auto_result_vsta_end.vx_sta-1;
									active_size.width = smartfit_auto_result_hsta_end.hx_end-smartfit_auto_result_hsta_end.hx_sta+1;
									active_size.height = smartfit_auto_result_vsta_end.vx_end-smartfit_auto_result_vsta_end.vx_sta+1;
									rtd_printk(KERN_INFO, TAG_NAME,"1. ori=%d,%d,%d,%d ####\n",ori_size.x, ori_size.y,ori_size.width,ori_size.height);
									rtd_printk(KERN_INFO, TAG_NAME,"2. act=%d,%d,%d,%d ####\n",active_size.x, active_size.y,active_size.width,active_size.height);

									//vsc_v4l2_active_win_event_wakeup(1, active_size, ori_size);
							}

						}


						/*update detection info, for avoid small shift*/
						BBD_Act_X_LastFrame = smartfit_auto_result_hsta_end.hx_sta;
						BBD_Act_Y_LastFrame = smartfit_auto_result_vsta_end.vx_sta-1;
						BBD_Act_W_LastFrame = smartfit_auto_result_hsta_end.hx_end-smartfit_auto_result_hsta_end.hx_sta+1;
						BBD_Act_H_LastFrame = smartfit_auto_result_vsta_end.vx_end-smartfit_auto_result_vsta_end.vx_sta+1;




				}
			}
			/*set detection*/
			if (cnt%300==0 || cnt%300==1)
				rtd_printk(KERN_INFO, TAG_NAME,"[SMF] set detection, SUB cnt=%d\n",cnt);
			smartfit_auto_h_boundary.hb_sta = 0;
			smartfit_auto_h_boundary.hb_end = IWid;
			smartfit_auto_v_boundary.vb_sta = 0;
			smartfit_auto_v_boundary.vb_end= ILen;
			smartfit_auto_r_g_b_margin.red_nm = 63;
			smartfit_auto_r_g_b_margin.grn_nm = 5;
			smartfit_auto_r_g_b_margin.blu_nm = 63;

			smartfit_auto_field.smartfit_src_sel = 1;
			smartfit_auto_field.adj_source = 1; /*sub*/
			smartfit_auto_field.no_hs_mode = 1;
			scaler_rtd_outl(SMARTFIT_AUTO_FIELD_reg, smartfit_auto_field.regValue);
			scaler_rtd_outl(SMARTFIT_AUTO_H_BOUNDARY_reg, smartfit_auto_h_boundary.regValue);
			scaler_rtd_outl(SMARTFIT_AUTO_V_BOUNDARY_reg, smartfit_auto_v_boundary.regValue);
			scaler_rtd_outl(SMARTFIT_AUTO_R_G_B_MARGIN_reg, smartfit_auto_r_g_b_margin.regValue);

			smartfit_auto_adj.m_vgen_en = 0;
			smartfit_auto_adj.now_af = 1;
			scaler_rtd_outl(SMARTFIT_AUTO_ADJ_reg, smartfit_auto_adj.regValue); // en

		}
		cnt ++;
		not_first_detect = 1;
	}

	return 0;

}
void scalerVIP_Set_BlackDetection_EN(unsigned char bEnable_main, unsigned char bEnable_sub)
{
	BlackDetection_main_en = bEnable_main;
	BlackDetection_sub_en = bEnable_sub;
	rtd_printk(KERN_INFO, TAG_NAME, "BBD_Main_En = %d,BBD_Sub_En=%d\n",BlackDetection_main_en,BlackDetection_sub_en);

}

void scalerVIP_Get_BlackDetection_EN(unsigned char* bEnable_main, unsigned char* bEnable_sub)
{
	*bEnable_main = BlackDetection_main_en;
	*bEnable_sub = BlackDetection_sub_en;

}


void scalerVIP_Set_pq_reset(unsigned char bEnable)
{
	pq_reset = bEnable;


}
unsigned char ScalerVIP_Get_pq_reset(void)
{
	return pq_reset;
}

unsigned char scalerVIP_access_tv002_style_demo_flag(unsigned char access_mode, unsigned char *pFlag)
{
	static unsigned char flag_tv002_style_demo = 0;
	if (access_mode == 0)
		return flag_tv002_style_demo;
	else if (access_mode == 1) {
		if (pFlag != NULL)
			flag_tv002_style_demo = *pFlag;
		else
			return 0;
	}
	return 1;
}

void* scalerVIP_get_tv002_style_demo_struct(void)
{
	extern  SLR_VIP_TABLE_CUSTOM_TV002 m_customVipTable_demo_tv002;

	return (void*)&m_customVipTable_demo_tv002;
}
//unsigned char Decontoure_level_by_OSD=0;
void scalerVIP_Set_Decontour(void)
{
#if 0
        _clues* SmartPic_clue=NULL;
        unsigned char meanHistY = 0;
        unsigned char meanSat = 0;
        unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);
        SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
        unsigned char decont_tbl_sel = 0;
        unsigned int level_temp = 0;
        VIP_I_De_Contour_Statistic decont_stat;
        unsigned char i;
        unsigned int contour_cnt = 0;
        unsigned int filter_cnt = 0;
        unsigned int ydiff_hist_sum = 0;
        unsigned int ydiff_hist_sum2 = 0;

        lc_lc_decontour_alpha_0_RBUS    lc_decontour_alpha_0;
        ipq_decontour_de_contour_ctrl_RBUS decontour_ctrl_reg;
        //ipq_decontour_de_contour_contrast_RBUS decontour_contrast_reg;
        //ipq_decontour_de_contour_neighbor_diff_RBUS decontour_neighbor_diff_reg;
        //ipq_decontour_de_contour_threshold_RBUS decontour_threshold_reg;
        //ipq_decontour_de_contour_diff_th_RBUS decontour_diff_th_reg;
        //ipq_decontour_de_contour_bottleneck_RBUS decontour_bottleneck_reg;

        unsigned char noise_level = scalerVIP_Get_Noise_Level();

        char bdecont_level = 0;
        const unsigned char bdecont_level_table[5][16] =
        {{56, 48, 40, 30, 20, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, // level 0: very weak
        {60, 52, 44, 36, 28, 20, 12, 6, 2, 0, 0, 0, 0, 0, 0, 0}, // level 1: weak
        {63, 56, 48, 40, 32, 24, 16, 8, 4, 0, 0, 0, 0, 0, 0, 0}, // level 2: mid
        {63, 56, 48, 40, 32, 24, 20, 16, 8, 4, 0, 0, 0, 0, 0, 0}, // level 3: strong
        {63, 60, 56, 50, 42, 34, 26, 18, 10, 6, 2, 0, 0, 0, 0, 0}}; // level 4: very strong (for special patterns)

        ipq_decontour_blk_de_contour_alpha_ydiff0_RBUS bdecont_alpha_ydiff0_reg;
        ipq_decontour_blk_de_contour_alpha_ydiff1_RBUS bdecont_alpha_ydiff1_reg;
        ipq_decontour_blk_de_contour_alpha_ydiff2_RBUS bdecont_alpha_ydiff2_reg;
        ipq_decontour_blk_de_contour_alpha_ydiff3_RBUS bdecont_alpha_ydiff3_reg;
        ipq_decontour_blk_de_contour_alpha_ydiff4_RBUS bdecont_alpha_ydiff4_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff0_RBUS bdecont_alpha_cdiff0_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff1_RBUS bdecont_alpha_cdiff1_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff2_RBUS bdecont_alpha_cdiff2_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff3_RBUS bdecont_alpha_cdiff3_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff4_RBUS bdecont_alpha_cdiff4_reg;

        //lc_lc_decontour_ctrl_RBUS lc_lc_decontour_ctrl_reg;
        SmartPic_clue = (_clues *)Scaler_GetShareMemVirAddr(SCALERIOC_VIP_SMARTPIC_CLUS);

        if (SmartPic_clue == NULL) {
            return;
        }

        if(gVip_Table==NULL){
        return;
        }

        if( drvif_color_Get_I_De_Contour_Stats( &decont_stat ) == 0 )
            return;

        decont_tbl_sel= gVip_Table->VIP_QUALITY_Extend_Coef[cur_source][VIP_QUALITY_FUNCTION_I_De_Contour];

        meanHistY = SmartPic_clue->Hist_Y_Mean_Value;
        meanSat = SmartPic_clue->sat_ratio_mean_value;

        lc_decontour_alpha_0.regValue = scaler_rtd_inl(LC_LC_Decontour_alpha_0_reg);

        decontour_ctrl_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_CTRL_reg);
        //decontour_contrast_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_Contrast_reg);
        //decontour_neighbor_diff_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_Neighbor_Diff_reg);
        //decontour_threshold_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_Threshold_reg);
        //decontour_diff_th_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_Diff_th_reg);
        //decontour_bottleneck_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_Bottleneck_reg);

        bdecont_alpha_ydiff0_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff0_reg);
        bdecont_alpha_ydiff1_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff1_reg);
        bdecont_alpha_ydiff2_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff2_reg);
        bdecont_alpha_ydiff3_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff3_reg);
        bdecont_alpha_ydiff4_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff4_reg);
        bdecont_alpha_cdiff0_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff0_reg);
        bdecont_alpha_cdiff1_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff1_reg);
        bdecont_alpha_cdiff2_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff2_reg);
        bdecont_alpha_cdiff3_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff3_reg);
        bdecont_alpha_cdiff4_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff4_reg);

        //decontour_ctrl_reg.decont_blend_step = I_De_Contour_TBL[decont_tbl_sel].decont_blend_step;
        //decontour_contrast_reg.decont_contrast_th_y = I_De_Contour_TBL[decont_tbl_sel].decont_contrast_th_y;
        //decontour_contrast_reg.decont_contrast_th_c = I_De_Contour_TBL[decont_tbl_sel].decont_contrast_th_c;
        //decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = I_De_Contour_TBL[decont_tbl_sel].decont_neighbor_diff_th2_y;
        //decontour_neighbor_diff_reg.decont_neighbor_diff_th2_c = I_De_Contour_TBL[decont_tbl_sel].decont_neighbor_diff_th2_c;
        //decontour_threshold_reg.decont_gradation_th_y = I_De_Contour_TBL[decont_tbl_sel].decont_gradation_th_y;
        //decontour_diff_th_reg.decont_blend_lv1_gain = I_De_Contour_TBL[decont_tbl_sel].decont_blend_lv1_gain;
        //decontour_diff_th_reg.decont_maxmindiff_th_y = I_De_Contour_TBL[decont_tbl_sel].decont_maxmindiff_th_y;
        //decontour_bottleneck_reg.decont_bottleneck_range0 = I_De_Contour_TBL[decont_tbl_sel].decont_bottleneck_range0;
        //decontour_bottleneck_reg.decont_bottleneck_range1 = I_De_Contour_TBL[decont_tbl_sel].decont_bottleneck_range1;
        //decontour_bottleneck_reg.decont_bottleneck_range2 = I_De_Contour_TBL[decont_tbl_sel].decont_bottleneck_range2;
        //decontour_bottleneck_reg.decont_bottleneck_range3 = I_De_Contour_TBL[decont_tbl_sel].decont_bottleneck_range3;
        decontour_ctrl_reg.decont_blend_lowbd = I_De_Contour_TBL[decont_tbl_sel].decont_blend_lowbd;

        // 20190507 jimmy, reorganize decontour level for H5X
        // decontour stat calculation
        ydiff_hist_sum = 0;
        ydiff_hist_sum2 = 0;
        for( i=0; i<8; i++ )
        {
            ydiff_hist_sum += decont_stat.decont_ydiff_hist[i];
            if( i>0 )
                ydiff_hist_sum2 += decont_stat.decont_ydiff_hist[i];
        }
        contour_cnt = decont_stat.decont_contour_cnt;
        filter_cnt = decont_stat.decont_avfilter_cnt;

        // H5X tuning concept: fix I-decontour settings (relatively low), adaptive on block decontour
        bdecont_level = 2;

        if( noise_level >= 8 ) // high noise level: weak
        {
            bdecont_level--;
        }
        if( meanHistY < 25 ) // low brightness: weak
        {
            bdecont_level--;
        }
        if( ydiff_hist_sum2 > ydiff_hist_sum/2 ) // >50% of contours have diff > 8bit 2
        {
            bdecont_level += 2;
        }
        else if( ydiff_hist_sum2 > ydiff_hist_sum/4 ) // >25% of contours have diff > 8bit 2
        {
            bdecont_level += 1;
        }

        /* all sources, weak decontour on artificial patterns */
        if( SmartPic_clue->score_NaturalImage < 1700)
        {
            decontour_ctrl_reg.decont_blend_lowbd =140;
            lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
            bdecont_level -= 4;
        }
        else if( SmartPic_clue->score_NaturalImage < 1800)
        {
            decontour_ctrl_reg.decont_blend_lowbd =130;
            lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
            bdecont_level -= 3;
        }
        else if( SmartPic_clue->score_NaturalImage < 1850)
        {
            decontour_ctrl_reg.decont_blend_lowbd =120;
            lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
            bdecont_level -= 2;
        }
        else if( SmartPic_clue->score_NaturalImage < 1900)
        {
            decontour_ctrl_reg.decont_blend_lowbd =90;
            lc_decontour_alpha_0.lc_decont_ydiff_shif=1;
            bdecont_level -= 1;
        }
        else
        {
            lc_decontour_alpha_0.lc_decont_ydiff_shif=2;
        }

        if( bdecont_level < 0 )
            bdecont_level = 0;
        if( bdecont_level > 4 )
            bdecont_level = 4;

        // set block decontour alpha table by level
        bdecont_alpha_ydiff4_reg.bdecont_alpha_by_ydiff0 = bdecont_level_table[(unsigned char)bdecont_level][0];
        bdecont_alpha_ydiff3_reg.bdecont_alpha_by_ydiff1 = bdecont_level_table[(unsigned char)bdecont_level][1];
        bdecont_alpha_ydiff3_reg.bdecont_alpha_by_ydiff2 = bdecont_level_table[(unsigned char)bdecont_level][2];
        bdecont_alpha_ydiff3_reg.bdecont_alpha_by_ydiff3 = bdecont_level_table[(unsigned char)bdecont_level][3];
        bdecont_alpha_ydiff3_reg.bdecont_alpha_by_ydiff4 = bdecont_level_table[(unsigned char)bdecont_level][4];
        bdecont_alpha_ydiff2_reg.bdecont_alpha_by_ydiff5 = bdecont_level_table[(unsigned char)bdecont_level][5];
        bdecont_alpha_ydiff2_reg.bdecont_alpha_by_ydiff6 = bdecont_level_table[(unsigned char)bdecont_level][6];
        bdecont_alpha_ydiff2_reg.bdecont_alpha_by_ydiff7 = bdecont_level_table[(unsigned char)bdecont_level][7];
        bdecont_alpha_ydiff2_reg.bdecont_alpha_by_ydiff8 = bdecont_level_table[(unsigned char)bdecont_level][8];
        bdecont_alpha_ydiff1_reg.bdecont_alpha_by_ydiff9 = bdecont_level_table[(unsigned char)bdecont_level][9];
        bdecont_alpha_ydiff1_reg.bdecont_alpha_by_ydiff10 = bdecont_level_table[(unsigned char)bdecont_level][10];
        bdecont_alpha_ydiff1_reg.bdecont_alpha_by_ydiff11 = bdecont_level_table[(unsigned char)bdecont_level][11];
        bdecont_alpha_ydiff1_reg.bdecont_alpha_by_ydiff12 = bdecont_level_table[(unsigned char)bdecont_level][12];
        bdecont_alpha_ydiff0_reg.bdecont_alpha_by_ydiff13 = bdecont_level_table[(unsigned char)bdecont_level][13];
        bdecont_alpha_ydiff0_reg.bdecont_alpha_by_ydiff14 = bdecont_level_table[(unsigned char)bdecont_level][14];
        bdecont_alpha_ydiff0_reg.bdecont_alpha_by_ydiff15 = bdecont_level_table[(unsigned char)bdecont_level][15];

        bdecont_alpha_cdiff4_reg.bdecont_alpha_by_cdiff0 = bdecont_level_table[(unsigned char)bdecont_level][0];
        bdecont_alpha_cdiff3_reg.bdecont_alpha_by_cdiff1 = bdecont_level_table[(unsigned char)bdecont_level][1];
        bdecont_alpha_cdiff3_reg.bdecont_alpha_by_cdiff2 = bdecont_level_table[(unsigned char)bdecont_level][2];
        bdecont_alpha_cdiff3_reg.bdecont_alpha_by_cdiff3 = bdecont_level_table[(unsigned char)bdecont_level][3];
        bdecont_alpha_cdiff3_reg.bdecont_alpha_by_cdiff4 = bdecont_level_table[(unsigned char)bdecont_level][4];
        bdecont_alpha_cdiff2_reg.bdecont_alpha_by_cdiff5 = bdecont_level_table[(unsigned char)bdecont_level][5];
        bdecont_alpha_cdiff2_reg.bdecont_alpha_by_cdiff6 = bdecont_level_table[(unsigned char)bdecont_level][6];
        bdecont_alpha_cdiff2_reg.bdecont_alpha_by_cdiff7 = bdecont_level_table[(unsigned char)bdecont_level][7];
        bdecont_alpha_cdiff2_reg.bdecont_alpha_by_cdiff8 = bdecont_level_table[(unsigned char)bdecont_level][8];
        bdecont_alpha_cdiff1_reg.bdecont_alpha_by_cdiff9 = bdecont_level_table[(unsigned char)bdecont_level][9];
        bdecont_alpha_cdiff1_reg.bdecont_alpha_by_cdiff10 = bdecont_level_table[(unsigned char)bdecont_level][10];
        bdecont_alpha_cdiff1_reg.bdecont_alpha_by_cdiff11 = bdecont_level_table[(unsigned char)bdecont_level][11];
        bdecont_alpha_cdiff1_reg.bdecont_alpha_by_cdiff12 = bdecont_level_table[(unsigned char)bdecont_level][12];
        bdecont_alpha_cdiff0_reg.bdecont_alpha_by_cdiff13 = bdecont_level_table[(unsigned char)bdecont_level][13];
        bdecont_alpha_cdiff0_reg.bdecont_alpha_by_cdiff14 = bdecont_level_table[(unsigned char)bdecont_level][14];
        bdecont_alpha_cdiff0_reg.bdecont_alpha_by_cdiff15 = bdecont_level_table[(unsigned char)bdecont_level][15];

        level_temp = decontour_ctrl_reg.decont_blend_lowbd;

        if(tv006_decontour_level>15)
                tv006_decontour_level=15;

        level_temp = (level_temp*(15-tv006_decontour_level))/15; //by osd level to change value.
        decontour_ctrl_reg.decont_blend_lowbd =level_temp;

#if 0
        // 20180526 jimmy, decontour level by Hist_Mean
        switch( cur_source )
        {
                // for 4K
                case VIP_QUALITY_HDMI_4k2kI_30:
                case VIP_QUALITY_HDMI_4k2kP_30:
                case VIP_QUALITY_HDMI_4k2kP_60:

                case VIP_QUALITY_DTV_4k2kI_30:
                case VIP_QUALITY_DTV_4k2kP_30:
                case VIP_QUALITY_DTV_4k2kP_60:
                        if( meanHistY < 25 ) // low brightness: weaker I-decontour
                        {
                                //fwif_color_set_LC_decontour( cur_source, 0 , 1);
                                //decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = 4;
                                decontour_ctrl_reg.decont_blend_step = 2;
                                decontour_bottleneck_reg.decont_bottleneck_range0 = 2;
                                decontour_bottleneck_reg.decont_bottleneck_range1 = 4;
                                decontour_bottleneck_reg.decont_bottleneck_range2 = 6;
                                decontour_bottleneck_reg.decont_bottleneck_range3 = 8;
                                decontour_diff_th_reg.decont_maxmindiff_th_y = 16;
                        }

			 /* avoid de-contoure side effect to reduce de-contoure strength */
                         if( SmartPic_clue->score_NaturalImage < 1700)
                         {
                                 decontour_ctrl_reg.decont_blend_lowbd =140;
                                 lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                         }
                         else if( SmartPic_clue->score_NaturalImage < 1750)
                         {
                                 decontour_ctrl_reg.decont_blend_lowbd =140;
                                 lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                         }
                         else if( SmartPic_clue->score_NaturalImage < 1800)
                         {
                                 decontour_ctrl_reg.decont_blend_lowbd =130;
                                 lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                         }
                         else if( SmartPic_clue->score_NaturalImage < 1850)
                         {
                                 decontour_ctrl_reg.decont_blend_lowbd =120;
                                 lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                         }
                         else if( SmartPic_clue->score_NaturalImage < 1900)
                         {
                                 decontour_ctrl_reg.decont_blend_lowbd =90;
                                 lc_decontour_alpha_0.lc_decont_ydiff_shif=1;
                         }
                         else
                         {
                                 lc_decontour_alpha_0.lc_decont_ydiff_shif=2;

                         }

                        break;


                // for HD

                case VIP_QUALITY_HDMI_1080I:
                case VIP_QUALITY_HDMI_1080P:
                case VIP_QUALITY_DTV_1080I:
                case VIP_QUALITY_DTV_1080P:
                        if( noise_level >= 8 ) // high noise level: weaker I-decontour
                        {
                                decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = 2;
                        }
                        else if( meanHistY < 25 ) // low brightness: weaker I-decontour
                        {
                                // if( !source_dither_flag ) // more tolerence when source has dither ,//this parameter stil have some
                                // side effect need modify , mark first jimmy.lin
                                if( meanSat < 40 )
                                {
                                    decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = 2;
                                }

                        }
                        else // high brightness && low noise level: stronger I-decontour
                        {
                                //fwif_color_set_LC_decontour( cur_source, 0 ,1);

                                decontour_neighbor_diff_reg.decont_neighbor_diff_th2_y = 2;
                                decontour_contrast_reg.decont_contrast_th_y = 200;

                            if( meanHistY >= 40 ) // for BiPP patterns
                            {
                                    decontour_threshold_reg.decont_gradation_th_y = 12;
                                    decontour_contrast_reg.decont_contrast_th_c = 200;
                            }

                        }
                        if( meanSat < 40 ) // low saturation: weaker I-decontour on C
                        {
                                decontour_neighbor_diff_reg.decont_neighbor_diff_th2_c = 2;
                        }

                        /* avoid de-contoure side effect to reduce de-contoure strength */
                        if( SmartPic_clue->score_NaturalImage < 1700)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =140;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                        }
	                else if( SmartPic_clue->score_NaturalImage < 1750)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =140;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                        }
                        else if( SmartPic_clue->score_NaturalImage < 1800)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =130;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                        }
                        else if( SmartPic_clue->score_NaturalImage < 1850)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =120;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                        }
                        else if( SmartPic_clue->score_NaturalImage < 1900)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =90;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=1;
                        }
                        else
                        {
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=2;

                        }
                        //others : origin setting
                        break;

                default:

                        /* avoid de-contoure side effect to reduce de-contoure strength */
                        if( SmartPic_clue->score_NaturalImage < 1700)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =140;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                        }
	                else if( SmartPic_clue->score_NaturalImage < 1750)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =140;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                        }
                        else if( SmartPic_clue->score_NaturalImage < 1800)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =130;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                        }
                        else if( SmartPic_clue->score_NaturalImage < 1850)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =120;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=0;
                        }
                        else if( SmartPic_clue->score_NaturalImage < 1900)
                        {
	                        decontour_ctrl_reg.decont_blend_lowbd =90;
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=1;
                        }
                        else
                        {
                                lc_decontour_alpha_0.lc_decont_ydiff_shif=2;

                        }
                break;
        }

        level_temp = decontour_ctrl_reg.decont_blend_lowbd;

        if(tv006_decontour_level>15)
                tv006_decontour_level=15;


        level_temp = (level_temp*(15-tv006_decontour_level))/15; //by osd level to change value.
        decontour_ctrl_reg.decont_blend_lowbd =level_temp;

        if((meanSat <=45)&&(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio()>=90)) ////FOR GRAY BAR
                 decontour_ctrl_reg.decont_blend_lowbd =130;

        //if(rtd_inl(0xb802e4f0)==0x13)
        //        VIPprintf( "mead =%d,gmv=%d",meanSat,scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio());

        //if(rtd_inl(0xb802e4f0)==2)
        // VIPprintf( " score_NaturalImage =%d , blend=%d \n ",SmartPic_clue->score_NaturalImage,decontour_ctrl_reg.decont_blend_lowbd);



      //  VIPprintf( " score_NaturalImage =%d , meanSat=%d \n ",SmartPic_clue->score_NaturalImage,meanSat);



        scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_Contrast_reg, decontour_contrast_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_Neighbor_Diff_reg, decontour_neighbor_diff_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_Threshold_reg, decontour_threshold_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_Diff_th_reg, decontour_diff_th_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_Bottleneck_reg, decontour_bottleneck_reg.regValue);
#endif

        scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_CTRL_reg, decontour_ctrl_reg.regValue);
        scaler_rtd_outl(LC_LC_Decontour_alpha_0_reg, lc_decontour_alpha_0.regValue);

        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff0_reg, bdecont_alpha_ydiff0_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff1_reg, bdecont_alpha_ydiff1_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff2_reg, bdecont_alpha_ydiff2_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff3_reg, bdecont_alpha_ydiff3_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff4_reg, bdecont_alpha_ydiff4_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff0_reg, bdecont_alpha_cdiff0_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff1_reg, bdecont_alpha_cdiff1_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff2_reg, bdecont_alpha_cdiff2_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff3_reg, bdecont_alpha_cdiff3_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff4_reg, bdecont_alpha_cdiff4_reg.regValue);

        IoReg_SetBits(IPQ_DECONTOUR_De_Contour_db_reg_ctl_reg, IPQ_DECONTOUR_De_Contour_db_reg_ctl_db_apply_mask); /* DB apply */
#else
        _clues* SmartPic_clue=NULL;
        unsigned char meanHistY = 0;
        unsigned char meanSat = 0;
        unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);
        SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
        unsigned char decont_tbl_sel = 0;
        unsigned int level_temp = 0;
        VIP_I_De_Contour_Statistic decont_stat;
        unsigned char i;
        unsigned int contour_cnt = 0;
        unsigned int filter_cnt = 0;
        unsigned int ydiff_hist_sum = 0;
        unsigned int ydiff_hist_sum2 = 0;
        unsigned int ydiff_hist_sum3 = 0;
        unsigned char source_HD;

        lc_lc_decontour_alpha_0_RBUS    lc_decontour_alpha_0;
        ipq_decontour_de_contour_ctrl_RBUS decontour_ctrl_reg;

        unsigned char noise_level = scalerVIP_Get_Noise_Level();

        short bdecont_level = 0;
        const unsigned char bdecont_level_table[5][16] =
        {{32, 28, 24, 16, 8, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, // level 0: very weak
        {48, 40, 32, 24, 16, 8, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0}, // level 1: weak
        {56, 48, 40, 32, 24, 16, 12, 8, 4, 0, 0, 0, 0, 0, 0, 0}, // level 2: mid
        {63, 56, 48, 40, 32, 24, 20, 16, 8, 4, 0, 0, 0, 0, 0, 0}, // level 3: strong
        //{63, 60, 56, 50, 42, 34, 26, 18, 10, 6, 2, 0, 0, 0, 0, 0}}; // level 4: very strong (for special patterns)
        {63, 63, 62, 60, 58, 56, 52, 48, 40, 32, 24, 20, 16, 12, 8, 4}}; // level 4: very strong (for special patterns)

		const unsigned char maxmindiff_th[5][4] = {
			{3, 6, 16, 16},	// level 0: very weak
			{6, 12, 24, 16},	// level 1: weak
			{8, 16, 32, 16},	// level 2: mid
			{8, 16, 32, 16},	// level 3: strong
			{8, 16, 32, 16},	// level 4: very strong (for special patterns)
		};

        ipq_decontour_blk_de_contour_alpha_ydiff0_RBUS bdecont_alpha_ydiff0_reg;
        ipq_decontour_blk_de_contour_alpha_ydiff1_RBUS bdecont_alpha_ydiff1_reg;
        ipq_decontour_blk_de_contour_alpha_ydiff2_RBUS bdecont_alpha_ydiff2_reg;
        ipq_decontour_blk_de_contour_alpha_ydiff3_RBUS bdecont_alpha_ydiff3_reg;
        ipq_decontour_blk_de_contour_alpha_ydiff4_RBUS bdecont_alpha_ydiff4_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff0_RBUS bdecont_alpha_cdiff0_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff1_RBUS bdecont_alpha_cdiff1_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff2_RBUS bdecont_alpha_cdiff2_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff3_RBUS bdecont_alpha_cdiff3_reg;
        ipq_decontour_blk_de_contour_alpha_cdiff4_RBUS bdecont_alpha_cdiff4_reg;
		ipq_decontour_de_contour_diff_th_RBUS ipq_decontour_de_contour_diff_th_reg;
		ipq_decontour_de_contour_minmax_RBUS ipq_decontour_de_contour_minmax_reg;


        //lc_lc_decontour_ctrl_RBUS lc_lc_decontour_ctrl_reg;
        SmartPic_clue = (_clues *)Scaler_GetShareMemVirAddr(SCALERIOC_VIP_SMARTPIC_CLUS);
	RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if(RPC_system_info_structure_table == NULL) {
		return;
	}

        if (SmartPic_clue == NULL) {
        return;
        }

        if(gVip_Table==NULL){
        return;
        }

        if( drvif_color_Get_I_De_Contour_Stats( &decont_stat ) == 0 )
        return;

        source_HD = (cur_source==VIP_QUALITY_HDMI_1080I) || (cur_source==VIP_QUALITY_HDMI_1080P)
                 || (cur_source==VIP_QUALITY_DTV_1080I) || (cur_source==VIP_QUALITY_DTV_1080P);

        decont_tbl_sel= gVip_Table->VIP_QUALITY_Extend_Coef[cur_source][VIP_QUALITY_FUNCTION_I_De_Contour];

        meanHistY = SmartPic_clue->Hist_Y_Mean_Value;
        meanSat = SmartPic_clue->sat_ratio_mean_value;

        lc_decontour_alpha_0.regValue = scaler_rtd_inl(LC_LC_Decontour_alpha_0_reg);

        decontour_ctrl_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_CTRL_reg);

        bdecont_alpha_ydiff0_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff0_reg);
        bdecont_alpha_ydiff1_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff1_reg);
        bdecont_alpha_ydiff2_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff2_reg);
        bdecont_alpha_ydiff3_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff3_reg);
        bdecont_alpha_ydiff4_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff4_reg);
        bdecont_alpha_cdiff0_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff0_reg);
        bdecont_alpha_cdiff1_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff1_reg);
        bdecont_alpha_cdiff2_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff2_reg);
        bdecont_alpha_cdiff3_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff3_reg);
        bdecont_alpha_cdiff4_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff4_reg);
		ipq_decontour_de_contour_diff_th_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_Diff_th_reg);
		ipq_decontour_de_contour_minmax_reg.regValue = scaler_rtd_inl(IPQ_DECONTOUR_De_Contour_Minmax_reg);

        decontour_ctrl_reg.decont_blend_lowbd = I_De_Contour_TBL[decont_tbl_sel].decont_blend_lowbd;

        // 20190507 jimmy, reorganize decontour level for H5X
        // decontour stat calculation
        ydiff_hist_sum = 0;
        for( i=0; i<8; i++ )
        {
        ydiff_hist_sum += decont_stat.decont_ydiff_hist[i];
        }
        ydiff_hist_sum2 = decont_stat.decont_ydiff_hist[1]+decont_stat.decont_ydiff_hist[2];
        //ydiff_hist_sum2 = decont_stat.decont_ydiff_hist[2]*2;
        ydiff_hist_sum3 = decont_stat.decont_ydiff_hist[3]+decont_stat.decont_ydiff_hist[4];
        contour_cnt = decont_stat.decont_contour_cnt;
        filter_cnt = decont_stat.decont_avfilter_cnt;

        // H5X tuning concept: fix I-decontour settings (relatively low), adaptive on block decontour
        bdecont_level = 2;

        if( noise_level >= 5 ) // high noise level: weak
        {
        bdecont_level--;
        }
        //if( meanHistY < 25 ) // low brightness: weak
        //{
        //bdecont_level--;
        //}
        if( source_HD && (ydiff_hist_sum3 > ydiff_hist_sum/10) && (ydiff_hist_sum3 > ydiff_hist_sum2) ) // heavy contour (8bit 4~5 patterns)
        {
        bdecont_level += 2;
        }
        else if( decont_stat.decont_ydiff_hist[0] < ydiff_hist_sum/4 ) // less than 25% of contours have diff <=1: noise patterns
        {
        bdecont_level -= 2;
        }


        if((meanHistY >= 20)&&(meanSat <=45)&&(scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio()>=90)) ////FOR GRAY BAR, add HistY >=20 condition for lotte water
        {
        decontour_ctrl_reg.decont_blend_lowbd =130;
        bdecont_level -= 2;
        }

        if( bdecont_level < 0 )
        {
        bdecont_level = 0;
        }
        if( bdecont_level > 4 )
        {
        bdecont_level = 4;
        }

        //if( MA_print_count % 120 == 0 )
        {
                ROSPrintf_Decontour_1("[scalerVIP_Set_Decontour] decont_range_hist[0~7] = %d %d %d %d %d %d %d %d\n",
                	decont_stat.decont_range_hist[0], decont_stat.decont_range_hist[1], decont_stat.decont_range_hist[2], decont_stat.decont_range_hist[3],
                	decont_stat.decont_range_hist[4], decont_stat.decont_range_hist[5], decont_stat.decont_range_hist[6], decont_stat.decont_range_hist[7]);
                ROSPrintf_Decontour_1("[scalerVIP_Set_Decontour] decont_range_hist[8~15] = %d %d %d %d %d %d %d %d\n",
                	decont_stat.decont_range_hist[8], decont_stat.decont_range_hist[9], decont_stat.decont_range_hist[10], decont_stat.decont_range_hist[11],
                	decont_stat.decont_range_hist[12], decont_stat.decont_range_hist[13], decont_stat.decont_range_hist[14], decont_stat.decont_range_hist[15]);
                ROSPrintf_Decontour_1("[scalerVIP_Set_Decontour] ydiff_hist = %d %d %d %d %d %d %d %d",
                	decont_stat.decont_ydiff_hist[0], decont_stat.decont_ydiff_hist[1], decont_stat.decont_ydiff_hist[2], decont_stat.decont_ydiff_hist[3],
                	decont_stat.decont_ydiff_hist[4], decont_stat.decont_ydiff_hist[5], decont_stat.decont_ydiff_hist[6], decont_stat.decont_ydiff_hist[7]);
                ROSPrintf_Decontour_1("[scalerVIP_Set_Decontour] ydiff_hist_sum=%d, ydiff_hist_sum2=%d, ydiff_hist_sum3=%d\n", ydiff_hist_sum, ydiff_hist_sum2, ydiff_hist_sum3);
                ROSPrintf_Decontour_1("[scalerVIP_Set_Decontour] meanHistY=%d, meanSat=%d, noise_level=%d, natural=%d\n", meanHistY, meanSat, noise_level, SmartPic_clue->score_NaturalImage);
                ROSPrintf_Decontour_1("[scalerVIP_Set_Decontour] bdecont_level=%d\n", bdecont_level );
        }
	//if(RPC_system_info_structure_table->Project_ID == VIP_Project_ID_TV030)
		//bdecont_level = Decontoure_level_by_OSD;

        // set block decontour alpha table by level
        bdecont_alpha_ydiff4_reg.bdecont_alpha_by_ydiff0 = bdecont_level_table[bdecont_level][0];
        bdecont_alpha_ydiff3_reg.bdecont_alpha_by_ydiff1 = bdecont_level_table[bdecont_level][1];
        bdecont_alpha_ydiff3_reg.bdecont_alpha_by_ydiff2 = bdecont_level_table[bdecont_level][2];
        bdecont_alpha_ydiff3_reg.bdecont_alpha_by_ydiff3 = bdecont_level_table[bdecont_level][3];
        bdecont_alpha_ydiff3_reg.bdecont_alpha_by_ydiff4 = bdecont_level_table[bdecont_level][4];
        bdecont_alpha_ydiff2_reg.bdecont_alpha_by_ydiff5 = bdecont_level_table[bdecont_level][5];
        bdecont_alpha_ydiff2_reg.bdecont_alpha_by_ydiff6 = bdecont_level_table[bdecont_level][6];
        bdecont_alpha_ydiff2_reg.bdecont_alpha_by_ydiff7 = bdecont_level_table[bdecont_level][7];
        bdecont_alpha_ydiff2_reg.bdecont_alpha_by_ydiff8 = bdecont_level_table[bdecont_level][8];
        bdecont_alpha_ydiff1_reg.bdecont_alpha_by_ydiff9 = bdecont_level_table[bdecont_level][9];
        bdecont_alpha_ydiff1_reg.bdecont_alpha_by_ydiff10 = bdecont_level_table[bdecont_level][10];
        bdecont_alpha_ydiff1_reg.bdecont_alpha_by_ydiff11 = bdecont_level_table[bdecont_level][11];
        bdecont_alpha_ydiff1_reg.bdecont_alpha_by_ydiff12 = bdecont_level_table[bdecont_level][12];
        bdecont_alpha_ydiff0_reg.bdecont_alpha_by_ydiff13 = bdecont_level_table[bdecont_level][13];
        bdecont_alpha_ydiff0_reg.bdecont_alpha_by_ydiff14 = bdecont_level_table[bdecont_level][14];
        bdecont_alpha_ydiff0_reg.bdecont_alpha_by_ydiff15 = bdecont_level_table[bdecont_level][15];

        bdecont_alpha_cdiff4_reg.bdecont_alpha_by_cdiff0 = bdecont_level_table[bdecont_level][0];
        bdecont_alpha_cdiff3_reg.bdecont_alpha_by_cdiff1 = bdecont_level_table[bdecont_level][1];
        bdecont_alpha_cdiff3_reg.bdecont_alpha_by_cdiff2 = bdecont_level_table[bdecont_level][2];
        bdecont_alpha_cdiff3_reg.bdecont_alpha_by_cdiff3 = bdecont_level_table[bdecont_level][3];
        bdecont_alpha_cdiff3_reg.bdecont_alpha_by_cdiff4 = bdecont_level_table[bdecont_level][4];
        bdecont_alpha_cdiff2_reg.bdecont_alpha_by_cdiff5 = bdecont_level_table[bdecont_level][5];
        bdecont_alpha_cdiff2_reg.bdecont_alpha_by_cdiff6 = bdecont_level_table[bdecont_level][6];
        bdecont_alpha_cdiff2_reg.bdecont_alpha_by_cdiff7 = bdecont_level_table[bdecont_level][7];
        bdecont_alpha_cdiff2_reg.bdecont_alpha_by_cdiff8 = bdecont_level_table[bdecont_level][8];
        bdecont_alpha_cdiff1_reg.bdecont_alpha_by_cdiff9 = bdecont_level_table[bdecont_level][9];
        bdecont_alpha_cdiff1_reg.bdecont_alpha_by_cdiff10 = bdecont_level_table[bdecont_level][10];
        bdecont_alpha_cdiff1_reg.bdecont_alpha_by_cdiff11 = bdecont_level_table[bdecont_level][11];
        bdecont_alpha_cdiff1_reg.bdecont_alpha_by_cdiff12 = bdecont_level_table[bdecont_level][12];
        bdecont_alpha_cdiff0_reg.bdecont_alpha_by_cdiff13 = bdecont_level_table[bdecont_level][13];
        bdecont_alpha_cdiff0_reg.bdecont_alpha_by_cdiff14 = bdecont_level_table[bdecont_level][14];
        bdecont_alpha_cdiff0_reg.bdecont_alpha_by_cdiff15 = bdecont_level_table[bdecont_level][15];

		ipq_decontour_de_contour_diff_th_reg.decont_maxmindiff_th_y		= maxmindiff_th[bdecont_level][0];
		ipq_decontour_de_contour_minmax_reg.decont_maxmindiff_th2_y		= maxmindiff_th[bdecont_level][1];
		ipq_decontour_de_contour_minmax_reg.decont_maxmindiff_th3_y		= maxmindiff_th[bdecont_level][2];
		ipq_decontour_de_contour_diff_th_reg.decont_maxmindiff_th_c		= maxmindiff_th[bdecont_level][3];

        level_temp = decontour_ctrl_reg.decont_blend_lowbd;

        if(tv006_decontour_level>15)
        tv006_decontour_level=15;

        level_temp = (level_temp*(15-tv006_decontour_level))/15; //by osd level to change value.
        decontour_ctrl_reg.decont_blend_lowbd =level_temp;


        //work around
        if(tv006_decontour_level>14) //high
        {
                bdecont_alpha_ydiff0_reg.bdecont_ydiff_shift=6;
        }
        else if(tv006_decontour_level>=10) //middle
        {
                bdecont_alpha_ydiff0_reg.bdecont_ydiff_shift=1;
        }
        else if(tv006_decontour_level>=6) //low
        {
                bdecont_alpha_ydiff0_reg.bdecont_ydiff_shift=1;

        }
        else //off
        {
                bdecont_alpha_ydiff0_reg.bdecont_ydiff_shift=0;

        }



        scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_CTRL_reg, decontour_ctrl_reg.regValue);
        scaler_rtd_outl(LC_LC_Decontour_alpha_0_reg, lc_decontour_alpha_0.regValue);

        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff0_reg, bdecont_alpha_ydiff0_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff1_reg, bdecont_alpha_ydiff1_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff2_reg, bdecont_alpha_ydiff2_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff3_reg, bdecont_alpha_ydiff3_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Ydiff4_reg, bdecont_alpha_ydiff4_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff0_reg, bdecont_alpha_cdiff0_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff1_reg, bdecont_alpha_cdiff1_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff2_reg, bdecont_alpha_cdiff2_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff3_reg, bdecont_alpha_cdiff3_reg.regValue);
        scaler_rtd_outl(IPQ_DECONTOUR_BLK_De_Contour_Alpha_Cdiff4_reg, bdecont_alpha_cdiff4_reg.regValue);
		scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_Diff_th_reg, ipq_decontour_de_contour_diff_th_reg.regValue);
		scaler_rtd_outl(IPQ_DECONTOUR_De_Contour_Minmax_reg, ipq_decontour_de_contour_minmax_reg.regValue);

        IoReg_SetBits(IPQ_DECONTOUR_De_Contour_db_reg_ctl_reg, IPQ_DECONTOUR_De_Contour_db_reg_ctl_db_apply_mask); /* DB apply */

#endif

}
void scalerVIP_Res_Det(void)
{
        UINT32 res_det;
        //UINT32 tmp,res_det_ratio,res_det_value0,res_det_value1;

        UINT8 i=0;
        UINT32 res_debounce_th[6];
        UINT32 IpvActLen_V,IphActWid_H;
	di_im_di_rtnr_control_RBUS im_di_rtnr_control_reg;
	_system_setting_info *VIP_system_info_structure_table = NULL;
#ifdef RES_DET_DEMO

        UINT32 res_det_ratio_uhd,res_det_ratio_fhd;//,res_det_ratio;
        static UINT32 res_debounce_cnt[6];
        UINT32 uhd_ratio_Max,uhd_ratio_Min,uhd_ratio_weight;
        UINT32 uhd_fhd_weight,uhd_fhd_ratio;
        UINT32 fhd_ratio_Max,fhd_ratio_Min,fhd_ratio_weight;
        UINT32 t[5];
        SINT32 x=0;
        UINT32 value_uhd,value_fhd,value_sd;
        static UINT32 AI_cnt,AI_4k;
#endif
	VIP_system_info_structure_table = (_system_setting_info *)Scaler_GetShareMemVirAddr(SCALERIOC_VIP_system_info_structure);

        i=0;
	if(VIP_system_info_structure_table == NULL){
		return;
	}
	im_di_rtnr_control_reg.regValue = rtd_inl(DI_IM_DI_RTNR_CONTROL_reg);

/////////////////////       init ///////////////
        res_debounce_th[0]=60;
        res_debounce_th[1]=60;
        res_debounce_th[2]=60;
        res_debounce_th[3]=60;
        res_debounce_th[4]=60;
        res_debounce_th[5]=60;


	IpvActLen_V = VIP_system_info_structure_table->I_Height;
	IphActWid_H = VIP_system_info_structure_table->I_Width;

///////////////////////////////////////////////////////
        //res_det=scalerVIP_ReadSrcDet(2, 20, 0);/*merlin5, delete step max, step min, add tsh_his_mode*/
	 res_det=scalerVIP_ReadSrcDet(2,0);



#ifdef RES_DET_DEMO
        rtd_setbits(0xb809d5fc, 0x10000000);

        if(rtd_inl(0xb802e4f0)==4)
        {
                printk("\n sum value=%d ",Step_sum);
                for(i=0;i<20;i++){
                        printk("%d,",Step_Hist[i]);
                };

                printk("\n percent ");
                for(i=0;i<20;i++){
                        printk("%d,",Step_Hist_ratio[i]);
                };
        }


        t[0]= (Step_Hist[0]+Step_Hist[1]+Step_Hist[2]+Step_Hist[3])*1000/Step_sum;
        t[1]= (Step_Hist[4]+Step_Hist[5]+Step_Hist[6]+Step_Hist[7])*1000/Step_sum;
        t[2]= (Step_Hist[8]+Step_Hist[9]+Step_Hist[10]+Step_Hist[11])*1000/Step_sum;
        t[3]= (Step_Hist[12]+Step_Hist[13]+Step_Hist[14]+Step_Hist[15])*1000/Step_sum;
        t[4]= (Step_Hist[16]+Step_Hist[17]+Step_Hist[18]+Step_Hist[19])*1000/Step_sum;




        if(IphActWid_H >1920) //4k
        {

        /****** judge UHD/FHD OR SD **************/
                x = (t[0]+t[1])*100/(t[2]+t[3]);//first judge UHD/FHD or SD

                uhd_ratio_Max =300;
                uhd_ratio_Min =100;   //300-100)

                if(Step_sum <=100)
                {
                        res_det_ratio_uhd = scalerVIP_Cal_Idx_Ave_I_006_res_value0(x,1) ;

                        res_debounce_th[0]=5;
                        res_debounce_th[1]=5;
                        res_debounce_th[2]=5;
                        res_debounce_th[3]=5;
                        res_debounce_th[4]=5;
                        res_debounce_th[5]=5;

                }
                else
                res_det_ratio_uhd = scalerVIP_Cal_Idx_Ave_I_006_res_value0(x,0) ;

                uhd_fhd_ratio = res_det_ratio_uhd;


                if(res_det_ratio_uhd > uhd_ratio_Max)
                {
                         uhd_ratio_weight=100;
                }
                else if(res_det_ratio_uhd < uhd_ratio_Min)
                {
                        uhd_ratio_weight=0;
                }
                else
                {
                        uhd_ratio_weight = (res_det_ratio_uhd- uhd_ratio_Min)*100/( uhd_ratio_Max- uhd_ratio_Min);

                }
                uhd_fhd_weight = uhd_ratio_weight;


                //if(rtd_inl(0xb802e4f0)==6)
                //        printk("\n first weight = %d , a+b/c+d=%d  ",uhd_ratio_weight,res_det_ratio_uhd);



                if((uhd_ratio_weight >= 50)&&(mpeg_ratio<2)) //it's UHD/FHD case
                {

                        /****** judge UHD  OR FHD  **************/

                        if(Step_sum>250000)
                        {
                                uhd_ratio_Max =250;
                                uhd_ratio_Min =60; //50% = (250-60)/2+60=105
                        }
                        else if(Step_sum>50000)
                        {
                                uhd_ratio_Max =250;
                                uhd_ratio_Min =60; //50% = (250-60)/2+60=130
                        }
                        else
                        {
                                uhd_ratio_Max =250;
                                uhd_ratio_Min =60; //50% = 75+100=175

                        }

                        x = t[0]*100/t[1]; //judge UHD or FHD


                        if(Step_sum <=100)
                                res_det_ratio_uhd = scalerVIP_Cal_Idx_Ave_I_006_res_value1(x,1) ;
                        else
                        res_det_ratio_uhd = scalerVIP_Cal_Idx_Ave_I_006_res_value1(x,0) ;


                        if(res_det_ratio_uhd > uhd_ratio_Max)
                        {
                                uhd_ratio_weight=100;
                        }
                        else if(res_det_ratio_uhd < uhd_ratio_Min)
                        {
                                uhd_ratio_weight=0;
                        }
                        else
                        {
                                uhd_ratio_weight = (res_det_ratio_uhd- uhd_ratio_Min)*100/( uhd_ratio_Max- uhd_ratio_Min);

                        }

                         if((uhd_ratio_weight >50)&&(mpeg_ratio<2))
                         {

                                 res_debounce_cnt[0]++;
                                 value_uhd=1;
                                 value_fhd=0;
                                 value_sd =0;

                                 if(res_debounce_cnt[0]>=res_debounce_th[0])
                                 {

                                        res_debounce_th[0]=60;
                                        res_debounce_th[1]=60;
                                        res_debounce_th[2]=60;
                                        res_debounce_th[3]=60;
                                        res_debounce_th[4]=60;
                                        res_debounce_th[5]=60;


                                        res_debounce_cnt[0] = res_debounce_th[0];
                                        res_debounce_cnt[1] = 0;
                                        res_debounce_cnt[2] = 0;
                                        res_debounce_cnt[3] = 0;
                                        res_debounce_cnt[4] = 0;
                                        res_debounce_cnt[5] = 0;

                                        WriteRegister(0x000040A0, 0, 7, 0x40);
                                        WriteRegister(0x000040A0, 8, 15, 0x38);



                                 }


                         }
                         else
                         {
                                 value_uhd=0;
                                 value_fhd=1;
                                 value_sd =0;

                                 res_debounce_cnt[1]++;

                                 if(res_debounce_cnt[1]>=res_debounce_th[1])
                                 {
                                        res_debounce_th[0]=60;
                                        res_debounce_th[1]=60;
                                        res_debounce_th[2]=60;
                                        res_debounce_th[3]=60;
                                        res_debounce_th[4]=60;
                                        res_debounce_th[5]=60;



                                        res_debounce_cnt[0] = 0;
                                        res_debounce_cnt[1] = res_debounce_th[1];
                                        res_debounce_cnt[2] = 0;
                                        res_debounce_cnt[3] = 0;
                                        res_debounce_cnt[4] = 0;
                                        res_debounce_cnt[5] = 0;

                                        WriteRegister(0x000040A0, 0, 7, 0x80);
                                        WriteRegister(0x000040A0, 8, 15, 0x10);



                                 }



                         }

                         WriteRegister(0x000040A0, 16, 31,   uhd_ratio_weight); //4k =0
                         WriteRegister(0x000040A4, 0, 15,   100-uhd_ratio_weight);
                         WriteRegister(0x000040A4, 16, 31,  0 );


                }
                else   // It's SD CASE
                {


                        fhd_ratio_Max =340;//210;//270;
                        fhd_ratio_Min = 100;  //50% = (300-60)/2+60


                        x = (Step_Hist[4]+Step_Hist[5]+Step_Hist[6]+Step_Hist[7])*100/(Step_Hist[8]+Step_Hist[9]+Step_Hist[10]+Step_Hist[11]); //judge FHD or SD



                        if(Step_sum <=100)
                        {
                                res_det_ratio_fhd = scalerVIP_Cal_Idx_Ave_I_006_res_value2(x,1) ;
                                res_debounce_th[0]=10;
                                res_debounce_th[1]=10;
                                res_debounce_th[2]=10;
                                res_debounce_th[3]=10;
                                res_debounce_th[4]=10;
                                res_debounce_th[5]=10;

                        }
                        else
                        res_det_ratio_fhd = scalerVIP_Cal_Idx_Ave_I_006_res_value2(x,0) ;



                        if(res_det_ratio_fhd > fhd_ratio_Max)
                        {
                                fhd_ratio_weight=100;
                        }
                        else if(res_det_ratio_fhd < fhd_ratio_Min)
                        {
                                fhd_ratio_weight=0;
                        }
                        else
                        {
                                fhd_ratio_weight = (res_det_ratio_fhd- fhd_ratio_Min)*100/( fhd_ratio_Max- fhd_ratio_Min);

                        }

                         if((fhd_ratio_weight >50)&&mpeg_ratio<3) //is FHD
                         {
                        value_uhd=0;
                                 value_fhd=1;
                                value_sd =0;

                        res_debounce_cnt[2]++;

                        if(res_debounce_cnt[2]>=res_debounce_th[2])
                        {
                                        res_debounce_th[0]=60;
                                        res_debounce_th[1]=60;
                                        res_debounce_th[2]=60;
                                        res_debounce_th[3]=60;
                                        res_debounce_th[4]=60;
                                        res_debounce_th[5]=60;

                                res_debounce_cnt[0] = 0;
                                res_debounce_cnt[1] = 0;
                                res_debounce_cnt[2] = res_debounce_th[2];
                                res_debounce_cnt[3] = 0;
                                res_debounce_cnt[4] = 0;
                                        res_debounce_cnt[5] = 0;

                                        WriteRegister(0x000040A0, 0, 7, 0x80);
                                        WriteRegister(0x000040A0, 8, 15, 0x10);

                                 }

                                 WriteRegister(0x000040A0, 16, 31,   0); //4k =0
                                 WriteRegister(0x000040A4, 0, 15,   fhd_ratio_weight);
                                 WriteRegister(0x000040A4, 16, 31,   100-fhd_ratio_weight);


                         }
                         else
                         {
                                 value_uhd=0;
                                 value_fhd=0;
                                 value_sd =0;

                                 res_debounce_cnt[5]++;

                                 if(res_debounce_cnt[5]>=res_debounce_th[5])
                                 {

                                        res_debounce_th[0]=60;
                                        res_debounce_th[1]=60;
                                        res_debounce_th[2]=60;
                                        res_debounce_th[3]=60;
                                        res_debounce_th[4]=60;
                                        res_debounce_th[5]=60;

                                        res_debounce_cnt[0] = 0;
                                        res_debounce_cnt[1] = 0;
                                        res_debounce_cnt[2] = 0;
                                        res_debounce_cnt[3] = 0;
                                        res_debounce_cnt[4] = 0;
                                        res_debounce_cnt[5] = res_debounce_th[5];

                                WriteRegister(0x000040A0, 0, 7, 0x80);
                                WriteRegister(0x000040A0, 8, 15, 0x04);


                        }


                                 WriteRegister(0x000040A0, 16, 31,   0); //4k =0
                                 WriteRegister(0x000040A4, 0, 15,   fhd_ratio_weight);
                                 WriteRegister(0x000040A4, 16, 31,   100-fhd_ratio_weight);

                         }


                }

                if(rtd_inl(0xb802e4f0)==5)
                {
                        printk("\n sum value=%d ",Step_sum);
                        for(i=0;i<20;i++)
                        {
                                printk("%d,",Step_Hist[i]);
                        };

                        printk("\n percent ");
                        for(i=0;i<20;i++)
                        {
                                printk("%d,",Step_Hist_ratio[i]);
                        };

                        printk("\n A UHD/FHD OR SD  weight = %d ,ratio =%d ,mpeg_ragio=%d ",uhd_fhd_weight,uhd_fhd_ratio,mpeg_ratio);
                        printk("\n B UHD_FHD weight = %d ,ratio =%d ",uhd_ratio_weight,res_det_ratio_uhd);
                        printk("\n C FHD /SD weight = %d ,ratio =%d ",fhd_ratio_weight,res_det_ratio_fhd);


                }



        }
        else
        {

                 uhd_ratio_Max =150;
                 uhd_ratio_Min =30;

                x = t[0]*100/t[1];


                 res_det_ratio_uhd = scalerVIP_Cal_Idx_Ave_I_006_res_value0(x,0) ;



                 if(res_det_ratio_uhd > uhd_ratio_Max)
                 {
                          uhd_ratio_weight=100;
                 }
                 else if(res_det_ratio_uhd < uhd_ratio_Min)
                 {
                          uhd_ratio_weight=0;
                 }
                 else
                 {
                         uhd_ratio_weight = (res_det_ratio_uhd- uhd_ratio_Min)*100/( uhd_ratio_Max- uhd_ratio_Min);

                 }

                 if(rtd_inl(0xb802e4f0)==6)
                         printk("\n SEC uhd_ratio_weight = %d ,ratio =%d ",uhd_ratio_weight,res_det_ratio_uhd);


                 if(uhd_ratio_weight >50)
                 {
                         value_uhd=0;
                         value_fhd=1;

                         res_debounce_cnt[3]++;

                         if(res_debounce_cnt[3]>=res_debounce_th[3])
                         {
                                 res_debounce_cnt[0] = 0;
                                 res_debounce_cnt[1] = 0;
                                 res_debounce_cnt[2] = 0;
                                 res_debounce_cnt[3] = res_debounce_th[3];
                                 res_debounce_cnt[4] = 0;
                                 res_debounce_cnt[5] = 0;

                                 WriteRegister(0x000040A0, 0, 7, 0x80);
                                 WriteRegister(0x000040A0, 8, 15, 0x10);

                         }
                 }
                 else
                 {
                        value_uhd=0;
                        value_fhd=0;

                        res_debounce_cnt[4]++;

                        if(res_debounce_cnt[4]>=res_debounce_th[4])
                        {
                                res_debounce_cnt[0] = 0;
                                res_debounce_cnt[1] = 0;
                                res_debounce_cnt[2] = 0;
                                res_debounce_cnt[3] = 0;
                                res_debounce_cnt[4] = res_debounce_th[4];
                                res_debounce_cnt[5] = 0;


                                WriteRegister(0x000040A0, 0, 7, 0x80);
                                WriteRegister(0x000040A0, 8, 15, 0x04);

                        }


                 }

                 WriteRegister(0x000040A0, 16, 31,   0); //4k =0
                 WriteRegister(0x000040A4, 0, 15,   uhd_ratio_weight);
                 WriteRegister(0x000040A4, 16, 31,  100-uhd_ratio_weight );


        }

        if(rtd_inl(0xb802e4f4)==0x0c) //start
        {
                AI_cnt++;

                if(value_uhd ==1)
                        AI_4k++;

                WriteRegister(0x000040A0, 16, 31,   uhd_ratio_weight); //4k =0
                WriteRegister(0x000040A4, 0, 15,   AI_4k);
                WriteRegister(0x000040A4, 16, 31,  AI_cnt );

        }
        else if(rtd_inl(0xb802e4f4)==0x08)//stop
        {

                WriteRegister(0x000040A0, 16, 31,   uhd_ratio_weight); //4k =0
                WriteRegister(0x000040A4, 0, 15,   AI_4k);
                WriteRegister(0x000040A4, 16, 31,  AI_cnt );



        }
        else  //reset
        {
                value_uhd=0;
                value_fhd=0;
                AI_cnt=0;
                AI_4k=0;


        }

        if(rtd_inl(0xb802e4f0)==8)
        {
                printk("\n percent ");
                for(i=0;i<20;i++){
                        printk("%d,",Step_Hist_ratio[i]);
                };


        }
#endif


}

extern DRV_MA_SNR_IESM_Coef pq_misc_MA_SNR_IESM_TBL[MA_SNR_IESM_TBL_MAX];

void scalerVIP_Bad_UpScaling(void)
{
        static UINT8 status_cnt[3]={0};
        UINT8 debounce_th=50;
        UINT8 masnr_idx;
	iedge_smooth_vfilter_0_RBUS iedge_smooth_vfilter_reg;

        color_sharp_dm_segpk_vpk4_RBUS color_sharp_dm_segpk_vpk4;
        color_sharp_dm_peaking_bound_0_RBUS     color_sharp_dm_peaking_bound_0;
        static UINT32 status_cnt_th[3]={0};

        //UINT8 vfir_weight=0;
         UINT32  ratio_Min,ratio_Max;
         UINT32 bin0;
	di_im_di_hmc_statistic1_RBUS hmc_statistic1_reg;
      	_RPC_system_setting_info* RPC_system_info_structure_table = NULL;
        _system_setting_info *system_setting_info =(_system_setting_info *) Scaler_GetShareMemVirAddr(SCALERIOC_VIP_system_info_structure);
	DRV_MA_SNR_IESM_Coef data;
       // DRV_MA_VLPF_Motion_Weight pq_ma_snr ={0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 14, 14, 15, 15, };
        SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();

        RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();


	if ((RPC_system_info_structure_table == NULL)||(system_setting_info ==NULL)||(gVip_Table==NULL)) {
		if(MA_print_count%360==0)
			ROSPrintf("ScalerVIP_Set_PQ_ByPass_Lv_ISR, system info structure NULL !!!\n");
		return;
	}

        switch(RPC_system_info_structure_table->VIP_source)
        {

        	case VIP_QUALITY_DTV_576I:
        		scalerVIP_DI_GMV_AVG_for_film();
        		//scalerVIP_color_DRV_SNR_Veritcal_NR(&vlpf_table[2]); rord.tsao mark,set by pq table
        		break;
                case VIP_QUALITY_HDMI_1080I:
                case VIP_QUALITY_DTV_1080I:
                case VIP_QUALITY_YPbPr_1080I:
                case VIP_QUALITY_PVR_1080I:
                {
                        DRV_SNR_Veritcal_NR vlpf_table_tmp = vlpf_table[0];
                        debounce_th =30;

                        /*if(rtd_inl(0xb802e4f4)==14)
                        {
                                printk("\n step_count: %d  ",step_count);
                                printk("\n h0: %d ,h1 %d ,h2 %d ",Step_Hist[0],Step_Hist[1],Step_Hist[2]);

                        }*/
                        if(step_count<BadUpScalingThreshold)
        		{

                                status_cnt[0] ++;

                                if((status_cnt[0]>=debounce_th)&&(Film_status!=2))
                                {
                                		if(Film_status==1){
	                                        vlpf_table_tmp = vlpf_table[5];
	                                        scalerVIP_color_DRV_SNR_Veritcal_NR(&vlpf_table[5]);
                                		}else{
	                                        vlpf_table_tmp = vlpf_table[1];
	                                        scalerVIP_color_DRV_SNR_Veritcal_NR(&vlpf_table[1]);

                                		}
                                        if(COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_get_mb_lv2_v(rtd_inl(COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_reg)) != 30){
                                                rtd_maskl(COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_reg, ~COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_mb_lv2_v_mask, COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_mb_lv2_v(30));
                                                rtd_setbits(COLOR_SHARP_DM_NR_SHP_CTRL_reg,COLOR_SHARP_DM_NR_SHP_CTRL_db_load_mask);
                                        }
                                        if(COLOR_SHARP_DM_SEGPK_VPK3_get_lv2(rtd_inl(COLOR_SHARP_DM_SEGPK_VPK3_reg)) != 30){
                                                rtd_maskl(COLOR_SHARP_DM_SEGPK_VPK3_reg, ~COLOR_SHARP_DM_SEGPK_VPK3_lv2_mask, COLOR_SHARP_DM_SEGPK_VPK3_lv2(30));
                                                rtd_setbits(COLOR_MB_PEAKING_MB_Double_Buffer_CTRL_reg,COLOR_MB_PEAKING_MB_Double_Buffer_CTRL_mb_db_apply_mask);
                                        }
                                        status_cnt[1]=0;
                                        status_cnt[0] = debounce_th;

                                }

        			BadUpScalingThreshold = BADUP_SCALING_LEAVE;
        		}
        		else
        		{
                                status_cnt[1]++;

                                if(status_cnt[1]>=debounce_th)
                                {
        				scalerVIP_color_DRV_SNR_Veritcal_NR(&vlpf_table[0]);
        				if(COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_get_mb_lv2_v(rtd_inl(COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_reg)) != gVip_Table->Idomain_MBPKTable[Scaler_GetMBSUPeaking()].MBPK_V_Table.MB_LV2_V){
        					rtd_maskl(COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_reg, ~COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_mb_lv2_v_mask, COLOR_MB_PEAKING_MB_PEAKING_Ver_GAIN_2_mb_lv2_v(gVip_Table->Idomain_MBPKTable[Scaler_GetMBSUPeaking()].MBPK_V_Table.MB_LV2_V));
        					rtd_setbits(COLOR_SHARP_DM_NR_SHP_CTRL_reg,COLOR_SHARP_DM_NR_SHP_CTRL_db_load_mask);
        				}
        				if(COLOR_SHARP_DM_SEGPK_VPK3_get_lv2(rtd_inl(COLOR_SHARP_DM_SEGPK_VPK3_reg)) != gVip_Table->Ddomain_SHPTable[Scaler_GetSharpnessTable()].Vertical.LV2){
        					rtd_maskl(COLOR_SHARP_DM_SEGPK_VPK3_reg, ~COLOR_SHARP_DM_SEGPK_VPK3_lv2_mask, COLOR_SHARP_DM_SEGPK_VPK3_lv2(gVip_Table->Ddomain_SHPTable[Scaler_GetSharpnessTable()].Vertical.LV2));
        					rtd_setbits(COLOR_MB_PEAKING_MB_Double_Buffer_CTRL_reg,COLOR_MB_PEAKING_MB_Double_Buffer_CTRL_mb_db_apply_mask);
        				}

        				status_cnt[0]=0;
        				status_cnt[1] = debounce_th;

                                }


        		}

        		scalerVIP_Teeth_detcted();


                        masnr_idx = system_setting_info->PQ_Setting_Info.sMA_SNR_IESM_Coef_CTRL.TBL_sel;
                        memcpy(&data, &(pq_misc_MA_SNR_IESM_TBL[masnr_idx]), sizeof(DRV_MA_SNR_IESM_Coef));


                        hmc_statistic1_reg.regValue = rtd_inl(DI_IM_DI_HMC_STATISTIC1_reg);

                        if((hmc_statistic1_reg.ma_hmc_lineratio >2) &&(hmc_statistic1_reg.ma_hmc_lineratio<72))
                        {
                                vlpf_table_tmp = vlpf_table[3];
                                scalerVIP_color_DRV_SNR_Veritcal_NR(&vlpf_table[3]); //for hmc teeth.
                                //drvif_color_DRV_MA_VLPF_Motion_Weight(&pq_ma_snr); control by pq table index

                        }
                        else
                        {

                                //drvif_color_DRV_MA_VLPF_Motion_Weight(&data.S_MA_VLPF_Motion_Weight);ontrol by pq table index

                        }

			if (RPC_system_info_structure_table->VIP_source == VIP_QUALITY_DTV_1080I) {
				vlpf_table_tmp.SNR_Veritcal_Y_Weight = 25;
				vlpf_table_tmp.SNR_Vertical_IgnoreHLH = 0;
				scalerVIP_color_DRV_SNR_Veritcal_NR(&vlpf_table_tmp);
			}

                }
                        break;
        	case VIP_QUALITY_HDMI_1080P:
        	case VIP_QUALITY_YPbPr_1080P:

        		break;
                case VIP_QUALITY_DTV_4k2kP_60:

                        iedge_smooth_vfilter_reg.regValue = rtd_inl(IEDGE_SMOOTH_VFILTER_0_reg);
                        color_sharp_dm_segpk_vpk4.regValue = rtd_inl(COLOR_SHARP_DM_SEGPK_VPK4_reg);
                        color_sharp_dm_peaking_bound_0.regValue = rtd_inl(COLOR_SHARP_DM_PEAKING_BOUND_0_reg);

                        ratio_Min =50;
                        ratio_Max =100;

                        status_cnt_th[0]=15;
                        status_cnt_th[1]=15;
                        status_cnt_th[2]=15;

                        bin0 = scalerVIP_Cal_Idx_Ave_I_006_res_value3(Step_Hist_ratio[0],0);

                 #if 0
                        if(bin0 > ratio_Max)
                        {
                                status_cnt[0]++;

                                if(status_cnt[0]>status_cnt_th[0])
                                {

                                        vfir_weight=100;
                                        status_cnt[0]=status_cnt_th[0];
                                        status_cnt[1]=0;
                                        status_cnt[2]=0;

                                }
                        }
                        else if(bin0 <= ratio_Min)
                        {

                                status_cnt[1]++;

                                if(status_cnt[1]>status_cnt_th[1])
                                {

                                        vfir_weight=0;

                                        status_cnt[0]=0;
                                        status_cnt[1]=status_cnt_th[1];
                                        status_cnt[2]=0;

                                }

                        }
                        else
                        {
                                status_cnt[2]++;

                                if(status_cnt[2]>status_cnt_th[2])
                                {

                                        vfir_weight = (bin0- ratio_Min)*100/( ratio_Max- ratio_Min);

                                        status_cnt[0]=0;
                                        status_cnt[1]=0;
                                        status_cnt[2]=status_cnt[2];

                                }

                        }

                        iedge_smooth_vfilter_reg.vfir_weight = (vfir_weight*32)/(100);
                        color_sharp_dm_segpk_vpk4.vext_reg = 22-((vfir_weight*22)/100);
                        color_sharp_dm_peaking_bound_0.lv2 = (vfir_weight*44)/100;



                        rtd_outl(IEDGE_SMOOTH_VFILTER_0_reg, iedge_smooth_vfilter_reg.regValue);
                        rtd_outl(COLOR_SHARP_DM_SEGPK_VPK4_reg,color_sharp_dm_segpk_vpk4.regValue);
                        rtd_outl(COLOR_SHARP_DM_PEAKING_BOUND_0_reg,color_sharp_dm_peaking_bound_0.regValue );
                     #endif
                        break;

        	default:

        		break;

        }


}
UINT8 se_filmCad_enterCnt[_FRC_CADENCE_NUM_][_FILM_MOT_NUM]; // = {0};
extern unsigned char VR360_en;

SE_FRC_CADENCE  se_frc_cadTable[_FRC_CADENCE_NUM_]=
{
	//0: video
	{ 0x01, 0x01,   1,  1, 0,  0x1,   1, 0, _CAD_VIDEO, 0},

	//1: 22
	{ 0xA,  0x03,   1,  2, 0,  0xf,   4, 0, _CAD_22,    0},

	//2: 32
	{ 0x12, 0x1B,   2,  5, 0,  0x1f,  5, 0, _CAD_32,    0},

	//3: 32322
	{ 0x94A, 0xFEF, 5, 12, 0, 0xfff, 12,  0, _CAD_32322, 0},

	//4: 334
	{ 0x248, 0x3FF, 3, 10, 0, 0x3ff, 10,  0, _CAD_334,   0},

	//5: 22224
	{ 0xAA8, 0xFFF, 5, 12, 0, 0xfff, 12,  0, _CAD_22224, 0},

	//6: 2224
	{ 0x2A8, 0x3FF, 4, 10, 0, 0x3ff, 10,  0, _CAD_2224,  0},

	//7: 3223
	{ 0x254, 0x3FF, 4, 10, 0, 0x3ff, 10,  0, _CAD_3223,  0},

	//8: 55
	{ 0x210,  0x1F, 1,  5, 0, 0x3ff, 10,  0, _CAD_55,    1},

	//9: 66
	{ 0x820,  0x3F, 1,  6, 0, 0xfff, 12,  0, _CAD_66,    1},

	//0xA: 44
	{ 0x88,   0x0F, 1,  4, 0,  0xff,  8,  0, _CAD_44,    1},

	//0xB: 1112
	{ 0x1E,   0x1F, 4,  5, 0,  0x1f,  5,  0, _CAD_1112,  0},

	//0xC: 11112
	{ 0x3E,   0x3F, 5,  6, 0,  0x3f,  6,  0, _CAD_11112, 0},

	//0xD: 122
	{ 0x1A,   0x1F, 3,  5, 0,  0x1f,  5,  0, _CAD_122,   0},

	//0xE: 11'23
	{ 0x1555554, 0x1FFFFFF, 12, 25, 0, 0x1ffffff,  25,  0, _CAD_11i23, 0},
};

UINT32 FlushProtectStatus = 0;
UINT32 FilmQuitProtect_cnt = 0;
void SE_FilmDetect_reset(_SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_ReadBack_Regs *pRBRegs)
{
	int u8_k, u8_i;
	unsigned char SE_reset = 0;

	SE_reset = pOutput->u8_reset_flag;

	if(SE_reset == 1){
		//replay occur
		pr_notice("[jerry_SE_FilmDetect][replay occur!!]\n");

		//pParam
		pParam->u1_filmDet_bypass = 0; // FRC_TOP__PQL_1__pql_film_det_bypass_ADDR[0]
		pParam->u32_filmDet_cadence_en = 0x3fff; // FRC_TOP__PQL_1__pql_film_det_bypass_ADDR[15:1]

		pParam->u4_Mot_rgn_diffWgt = 4; // FRC_TOP__PQL_1__pql_film_mot_rgn_diff_wgt_ADDR[3:0]
		pParam->u4_Mot_all_diffWgt = 4; // FRC_TOP__PQL_1__pql_film_mot_rgn_diff_wgt_ADDR[7:4]
		pParam->u27_Mot_all_min = 0xc8; // FRC_TOP__PQL_1__pql_film_mot_rgn_diff_wgt_ADDR[31:8]

		pParam->u4_enter_22_cntGain = 3; // FRC_TOP__PQL_1__pql_film_enter_22_cnt_gain_ADDR[3:0]
		pParam->u4_enter_32_cntGain = 3; // FRC_TOP__PQL_1__pql_film_enter_22_cnt_gain_ADDR[7:4]
		pParam->u4_enter_else_cntGain = 2; // FRC_TOP__PQL_1__pql_film_enter_22_cnt_gain_ADDR[11:8]

		pParam->u1_quit_motWgt_auto_en = 1; // FRC_TOP__PQL_1__pql_film_enter_22_cnt_gain_ADDR[23:20]
		pParam->u4_quit_bigMot_wgt = 2; // FRC_TOP__PQL_1__pql_film_enter_22_cnt_gain_ADDR[15:12]
		pParam->u4_quit_smlMot_wgt = 5; // FRC_TOP__PQL_1__pql_film_enter_22_cnt_gain_ADDR[19:16]
		pParam->u8_quit_cnt_th = 0x4; //FRC_TOP__PQL_1__pql_film_mix_mode_enter_cnt_th_ADDR[23:16]
		pParam->u8_quit_prd_th = 0x8; //FRC_TOP__PQL_1__pql_film_mix_mode_enter_cnt_th_ADDR[31:24]

		pParam->u1_mixMode_en = 1;
		pParam->u1_mixMode_det_en = 1; // FRC_TOP__PQL_1__pql_film_enter_22_cnt_gain_ADDR[26]

		for (u8_k = 0; u8_k < 18; u8_k ++){
			pParam->u1_mixMode_rgnEn[u8_k] = 1; // FRC_TOP__PQL_1__pql_film_enter_22_cnt_gain_ADDR[31:27]
		}
		pParam->u8_mixMode_enter_cntTh = 0xe; //FRC_TOP__PQL_1__pql_film_mix_mode_enter_cnt_th_ADDR[7:0]
		pParam->u8_mixMode_cnt_max = 0x14; //FRC_TOP__PQL_1__pql_film_mix_mode_enter_cnt_th_ADDR[15:8]
		pParam->u27_mixMode_rgnMove_minMot = 0x220; // FRC_TOP__PQL_1__pql_film_mix_mode_rgn_move_min_mot_ADDR[27:0]
		pParam->u4_mixMode_rgnMove_motWgt = 0xa; // FRC_TOP__PQL_1__pql_film_mix_mode_rgn_move_min_mot_ADDR[31:28]

		pParam->u1_FrcCadSupport_En = 0; // FRC_TOP__PQL_1__pql_film_det_bypass_ADDR[16]
		pParam->u3_DbgPrt_Rgn = 0;	// FRC_TOP__PQL_1__pql_film_det_bypass_ADDR[19:17]
		pParam->u1_BadEditSlowOut_En = 0; // FRC_TOP__PQL_1__pql_film_det_bypass_ADDR[28]
		pParam->u1_QuickSwitch_En = 0; // FRC_TOP__PQL_1__pql_film_det_bypass_ADDR[29]
		pParam->u1_StillDetect_En = 0; // FRC_TOP__PQL_1__pql_film_det_bypass_ADDR[30]
		pParam->u1_DbgPrt_FRChg_En = 0; // FRC_TOP__PQL_1__pql_film_det_bypass_ADDR[31]

		pParam->u5_dbg_param1 = 0;
		pParam->u32_dbg_param2 = 0;
		pParam->u32_dbg_cnt = 0;

		//pOutput
		for (u8_k = 0; u8_k < 18; u8_k ++){
			for (u8_i = 0; u8_i < 15; u8_i ++){
				se_filmCad_enterCnt[u8_i][u8_k] = 0;
			}

			for (u8_i = 0; u8_i < 8; u8_i ++){
				pOutput->u27_ipme_motionPool[u8_k][u8_i] = 0;
			}

			pOutput->u32_Mot_sequence[u8_k]  = 0;

			pOutput->u8_det_cadence_Id[u8_k] = 0; //_CAD_VIDEO;
			pOutput->u8_cur_cadence_Id[u8_k] = 0; //_CAD_VIDEO;
			pOutput->u8_pre_cadence_Id[u8_k] = 0; //_CAD_VIDEO;
			pOutput->u8_phase_Idx[u8_k]      = 0;

			pOutput->u27_quit_bigMot[u8_k] = 0x1FF;
			pOutput->u27_quit_smlMot[u8_k] = 0;
			pOutput->u27_quit_motTh[u8_k]  = 0;
			pOutput->u8_quit_cnt[u8_k]     = 0;
			pOutput->u8_quit_prd[u8_k]     = 0;

			pOutput->u8_phT_phase_Idx[u8_k] = 0;

			pOutput->u27_FrmMotion_S[u8_k] = 0;

			pOutput->u8_cur_cadence_out[u8_k] = 0; //_CAD_VIDEO;
			pOutput->u8_phT_phase_Idx_out[u8_k] = 0;

			pOutput->u27_g_FrmMot_Th[u8_k] = 0;

			pOutput->u1_cad_resync_true[u8_k] = 0;
		}

		for(u8_k = 0; u8_k < 26; u8_k ++){
			pOutput->u27_FrmMotionSort[u8_k] = 0;
			pOutput->u27_FrmMotionSortTick[u8_k] = 0;
		}

		pOutput->u5_dbg_param1_pre     = 0;
		pOutput->u32_dbg_param2_pre    = 0;
		pOutput->u32_dbg_cnt_hold      = 0;
		pOutput->u8_dbg_motion_t = 0; //_FILM_ALL;

		pOutput->u8_flbk_lvl_cad_cnt = 0;

		pOutput->u1_mixMode = 0;
		pOutput->u8_mixMode_cnt = 0;

		pOutput->u1_Mot_selBig = 0;
		pOutput->u1_cad_fastOut_true = 0;
		pOutput->u8_BadEdit_flag = 0;
		pOutput->u32_input_frame_rate = 0;
		pOutput->u8_pre_cadence_out = 0;

		for(u8_k = 0; u8_k < KEEP_FRAME_NUM; u8_k ++){
			pOutput->u8_cadence_sequence[u8_k] = 0;
		}

		//pRBRegs
		pRBRegs->u3_ipme_filmMode_rb = 0;
		pRBRegs->u27_ipme_AllMot_rb = 0;
		pRBRegs->u27_ipme_CenterMot_rb = 0;
		for(u8_k = 0; u8_k < 5; u8_k ++){
			pRBRegs->u27_ipme_5Mot_rb[u8_k] = 0;
		}
		for(u8_k = 0; u8_k < 12; u8_k ++){
			pRBRegs->u27_ipme_12Mot_rb[u8_k] = 0;
		}
		pRBRegs->u8_sys_N_rb = 1; // 30 to 60
		pRBRegs->u8_sys_M_rb = 2;
		pRBRegs->u1_SW_sc_true = 0;

		FlushProtectStatus = 0;
	}
}

void SE_FilmDtect_DataUpdate(_SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_ReadBack_Regs *pRBRegs)
{
#if 1
	UINT32 total_diff = rtd_inl(0xb800c3f0)&0x7ffff;
	UINT32 total_diff_center = rtd_inl(0xb800c400)&0x7ffff;
	UINT32 total_diff_r25[25] = {0};
	total_diff_r25[0] = rtd_inl(0xb800c4b0)&0x7ffff;
	total_diff_r25[1] = rtd_inl(0xb800c4c0)&0x7ffff;
	total_diff_r25[2] = rtd_inl(0xb800c4d0)&0x7ffff;
	total_diff_r25[3] = rtd_inl(0xb800c4e0)&0x7ffff;
	total_diff_r25[4] = rtd_inl(0xb800c4f0)&0x7ffff;
	total_diff_r25[5] = rtd_inl(0xb800c500)&0x7ffff;
	total_diff_r25[6] = rtd_inl(0xb800c510)&0x7ffff;
	total_diff_r25[7] = rtd_inl(0xb800c520)&0x7ffff;
	total_diff_r25[8] = rtd_inl(0xb800c530)&0x7ffff;
	total_diff_r25[9] = rtd_inl(0xb800c540)&0x7ffff;
	total_diff_r25[10] = rtd_inl(0xb800c550)&0x7ffff;
	total_diff_r25[11] = rtd_inl(0xb800c560)&0x7ffff;
	total_diff_r25[12] = rtd_inl(0xb800c570)&0x7ffff;
	total_diff_r25[13] = rtd_inl(0xb800c580)&0x7ffff;
	total_diff_r25[14] = rtd_inl(0xb800c590)&0x7ffff;
	total_diff_r25[15] = rtd_inl(0xb800c5a0)&0x7ffff;
	total_diff_r25[16] = rtd_inl(0xb800c5b0)&0x7ffff;
	total_diff_r25[17] = rtd_inl(0xb800c5c0)&0x7ffff;
	total_diff_r25[18] = rtd_inl(0xb800c5d0)&0x7ffff;
	total_diff_r25[19] = rtd_inl(0xb800c5e0)&0x7ffff;
	total_diff_r25[20] = rtd_inl(0xb800c5f0)&0x7ffff;
	total_diff_r25[21] = rtd_inl(0xb800c610)&0x7ffff;
	total_diff_r25[22] = rtd_inl(0xb800c620)&0x7ffff;
	total_diff_r25[23] = rtd_inl(0xb800c630)&0x7ffff;
	total_diff_r25[24] = rtd_inl(0xb800c640)&0x7ffff;

	//pRBRegs
	pRBRegs->u27_ipme_AllMot_rb = total_diff;
	pRBRegs->u27_ipme_CenterMot_rb = total_diff_center;
	pRBRegs->u27_ipme_5Mot_rb[0] = total_diff_r25[0] + total_diff_r25[1] + total_diff_r25[2] + total_diff_r25[3] + total_diff_r25[4]; // Top
	pRBRegs->u27_ipme_5Mot_rb[1] = total_diff_r25[20] + total_diff_r25[21] + total_diff_r25[22] + total_diff_r25[23] + total_diff_r25[24]; // Bottom
	pRBRegs->u27_ipme_5Mot_rb[2] = total_diff_r25[0] + total_diff_r25[5] + total_diff_r25[10] + total_diff_r25[15] + total_diff_r25[20]; // Left
	pRBRegs->u27_ipme_5Mot_rb[3] = total_diff_r25[4] + total_diff_r25[9] + total_diff_r25[14] + total_diff_r25[19] + total_diff_r25[24]; // Right
	pRBRegs->u27_ipme_5Mot_rb[4] = total_diff_r25[6] + total_diff_r25[7] + total_diff_r25[8]
								+ total_diff_r25[11] + total_diff_r25[12] + total_diff_r25[13]
								+ total_diff_r25[16] + total_diff_r25[17] + total_diff_r25[18]; // Center
	pRBRegs->u27_ipme_12Mot_rb[0] = total_diff_r25[0];
	pRBRegs->u27_ipme_12Mot_rb[1] = total_diff_r25[1];
	pRBRegs->u27_ipme_12Mot_rb[2] = total_diff_r25[2];
	pRBRegs->u27_ipme_12Mot_rb[3] = total_diff_r25[3] + total_diff_r25[4];
	pRBRegs->u27_ipme_12Mot_rb[4] = total_diff_r25[5] + total_diff_r25[10] + total_diff_r25[15];
	pRBRegs->u27_ipme_12Mot_rb[5] = total_diff_r25[6] + total_diff_r25[11] + total_diff_r25[16];
	pRBRegs->u27_ipme_12Mot_rb[6] = total_diff_r25[7] + total_diff_r25[12] + total_diff_r25[17];
	pRBRegs->u27_ipme_12Mot_rb[7] = total_diff_r25[8] + total_diff_r25[13] + total_diff_r25[18]
								+ total_diff_r25[9] + total_diff_r25[14] + total_diff_r25[19];
	pRBRegs->u27_ipme_12Mot_rb[8] = total_diff_r25[20];
	pRBRegs->u27_ipme_12Mot_rb[9] = total_diff_r25[21];
	pRBRegs->u27_ipme_12Mot_rb[10] = total_diff_r25[22];
	pRBRegs->u27_ipme_12Mot_rb[11] = total_diff_r25[23] + total_diff_r25[24];
#endif


}

UINT32 SE_FrameMotionTH8(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_FILM_MOT_TYPE motion_T, UINT32 u27_FrmMot_sum, UINT32 u27_maxMot, UINT32 u27_secMot)
{
	// clip maxMot using secMot
	//UINT32 u27_maxMot_clip = 0x80000;
	//UINT32 u27_secFMot_clip = 0;
	//UINT32 u27_maxFMot_clip = 0;

	UINT32 u27_FrmMot_sum_t = 0;
	u27_FrmMot_sum_t = u27_FrmMot_sum;
#if 0
	if(u27_secMot < 0x10){
		u27_maxMot_clip = _MIN_(u27_maxMot_clip, u27_maxMot); //max=960x540x255=0x7e11700
	}
	else{
		u27_maxMot_clip = _MAX_(_MIN_(u27_maxMot_clip, u27_maxMot), u27_secMot);
	}

	if(u27_secMot > 32*(1+pOutput->u27_g_FrmMot_Th[motion_T])){
		u27_secFMot_clip = _MIN_(0x80000, u27_secMot/32);		//max
		u27_maxFMot_clip = _MIN_(0x80000, u27_maxMot/32);	//sec
		u27_FrmMot_sum_t = u27_FrmMot_sum_t - u27_maxMot + u27_maxFMot_clip -u27_secMot + u27_secFMot_clip;
	}
	else if(u27_secMot > 12*(1+pOutput->u27_g_FrmMot_Th[motion_T])){
		u27_secFMot_clip = _MIN_(0x80000, u27_secMot/16);
		u27_maxFMot_clip = _MIN_(0x80000, u27_maxMot/16);
		u27_FrmMot_sum_t = u27_FrmMot_sum_t - u27_maxMot + u27_maxFMot_clip -u27_secMot + u27_secFMot_clip;
	}
	else{
		u27_FrmMot_sum_t = u27_FrmMot_sum_t - u27_maxMot + u27_maxMot_clip;
	}

	//for debug
	//if(u27_FrmMot_sum_t == u27_FrmMot_sum)
	//	WriteRegister(FRC_TOP__KPOST_TOP__reg_post_seg_disp_data_0_ADDR, 8, 11, 0x1);
	//else
	//	WriteRegister(FRC_TOP__KPOST_TOP__reg_post_seg_disp_data_0_ADDR, 8, 11, 0x0);

	return u27_FrmMot_sum;
#else
//	if(pOutput->u27_ipme_motionPool[motion_T][0]>=u27_maxMot){
//		u27_secMot = u27_maxMot;
//		u27_maxMot = pOutput->u27_ipme_motionPool[motion_T][0];
//	}

	//replease the very big motion as second motion by JerryWang @20181130
	if((u27_maxMot >= 5*u27_secMot) && (u27_maxMot >= 32*(1+pOutput->u27_g_FrmMot_Th[motion_T])) && (u27_secMot >= 200)){
		u27_FrmMot_sum_t = u27_FrmMot_sum - u27_maxMot + u27_secMot;
		//pr_notice("[SE_FrameMotionTH8][,%d,%d,][,%d,%d,%d,]\n\r", u27_FrmMot_sum_t, u27_FrmMot_sum, u27_maxMot, u27_secMot, pOutput->u27_g_FrmMot_Th[motion_T]);
	}

	return u27_FrmMot_sum_t;
#endif

}

void SE_Motion_Sequence_Gen(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl * pOutput, _SE_FILM_MOT_TYPE motion_T, _SE_ReadBack_Regs *pRBRegs)
{
#if 1
	UINT8  u8_i = 0, u8_j = 0;
	UINT8  u1_FrmSeq = 0, u4_Mot_diffWgt = 0, u4_FrmMot_bigCnt = 0;
	UINT32 u27_cur_FrmMot = 0, u27_FrmMot_sum = 0, u27_FrmMot_Th = 0, u27_FrmMot_min = 0, u27_FrmMot_big = 0, u27_FrmMot_Lmt = 150000;

	UINT32 u27_maxMot = 0;
	UINT32 u27_secMot = 0;
	UINT32 u27_tmpMot = 0;
	UINT32 MotionPool_tmp[8] = {0};

	// distinguish information from motionType
	if(motion_T == _FILM_ALL){
		u27_cur_FrmMot = pRBRegs->u27_ipme_AllMot_rb;
		//printf("[All] u27_cur_FrmMot = %d\n", u27_cur_FrmMot);
		u4_Mot_diffWgt = pParam->u4_Mot_all_diffWgt;
//		u27_FrmMot_min = pParam->u27_Mot_all_min;
//		u27_FrmMot_min = _MIN_(pOutput->u27_quit_motTh[_FILM_ALL], pParam->u27_Mot_all_min);
		u27_FrmMot_min = (pOutput->u27_quit_motTh[_FILM_ALL] < pParam->u27_Mot_all_min) ? pParam->u27_Mot_all_min : pOutput->u27_quit_motTh[_FILM_ALL];
	}
	#if MIX_MODE_REGION_17
	else if(motion_T >=_FILM_12RGN_01){   // 17 region
		u27_cur_FrmMot = pRBRegs->u27_ipme_12Mot_rb[motion_T - 1 - _FILM_5RGN_CEN];
		u4_Mot_diffWgt = pParam->u4_Mot_rgn_diffWgt;
		u27_FrmMot_min = 0;
	}
	else{
		u27_cur_FrmMot = pRBRegs->u27_ipme_5Mot_rb[motion_T - 1];
		u4_Mot_diffWgt = pParam->u4_Mot_rgn_diffWgt;
		u27_FrmMot_min = 0;
	}
	#else
	else{ // 5 region
		u27_cur_FrmMot = pRBRegs->u27_ipme_5Mot_rb[motion_T - 1];
		//printf("[Region - %d] u27_cur_FrmMot = %d\n", motion_T, u27_cur_FrmMot);
		u4_Mot_diffWgt = pParam->u4_Mot_rgn_diffWgt;
		u27_FrmMot_min = 0;
	}
	#endif

	for (u8_i = 0; u8_i < 8; u8_i ++){
		MotionPool_tmp[u8_i] = pOutput->u27_ipme_motionPool[motion_T][u8_i];
	}

	// update motion loop.
	for (u8_i = 0; u8_i < 8; u8_i ++){
		if (((pOutput->u32_Mot_sequence[motion_T] >> u8_i) & 0x01) == 1){
			u4_FrmMot_bigCnt ++;
			u27_FrmMot_big += pOutput->u27_ipme_motionPool[motion_T][u8_i];
		}

		//record max & sec motion
		for (u8_j = 0; u8_j < 8-u8_i-1; u8_j++){
			if(MotionPool_tmp[u8_j] > MotionPool_tmp[u8_j+1]){
				u27_tmpMot = MotionPool_tmp[u8_j];
				MotionPool_tmp[u8_j] = MotionPool_tmp[u8_j+1];
				MotionPool_tmp[u8_j+1] = u27_tmpMot;
			}
		}
	}
	u27_FrmMot_big = u4_FrmMot_bigCnt > 0? (u27_FrmMot_big * 2 / u4_FrmMot_bigCnt) : 0x20000;
	u27_maxMot = MotionPool_tmp[7];
	u27_secMot = MotionPool_tmp[6];

	for (u8_i = 7; u8_i >0; u8_i --){
		u27_FrmMot_sum += pOutput->u27_ipme_motionPool[motion_T][u8_i];
		pOutput->u27_ipme_motionPool[motion_T][u8_i] = pOutput->u27_ipme_motionPool[motion_T][u8_i-1];
	}
	u27_FrmMot_sum += pOutput->u27_ipme_motionPool[motion_T][0];
	pOutput->u27_ipme_motionPool[motion_T][0] = u27_cur_FrmMot;

	// adjust frame motion th
#if 0
	if(motion_T == _FILM_ALL){
		UINT32 u27_Frm26Mot_sum = 0;
		u27_Frm26Mot_sum = FrameMotionTH26(pParam, pOutput, motion_T);

		//UINT32 u32_RB_val = 0;
		//ReadRegister(FRC_TOP__PQL_1__pql_film_det_bypass_ADDR, 0, 31, &u32_RB_val);
		UBYTE u5_Frm26MotS_wgt = 32;// _MIN_(((u32_RB_val >> 17) & 0x3f), 32);

		u27_FrmMot_sum = ((32-u5_Frm26MotS_wgt)*u27_FrmMot_sum + u5_Frm26MotS_wgt*u27_Frm26Mot_sum)>>5;
	}
#else
	u27_FrmMot_sum = SE_FrameMotionTH8(pParam, pOutput, motion_T, u27_FrmMot_sum, u27_maxMot, u27_secMot);
#endif

	// motion limit
	pOutput->u1_Mot_selBig = 0;
	if ((motion_T == _FILM_ALL) && (u27_cur_FrmMot > u27_FrmMot_big) && (u27_cur_FrmMot > u27_FrmMot_Lmt)){
		//u27_cur_FrmMot         = u27_FrmMot_big;
		u27_cur_FrmMot = _MAX_(u27_FrmMot_big,u27_FrmMot_Lmt);
		pOutput->u27_ipme_motionPool[motion_T][0] = u27_cur_FrmMot;
		pOutput->u1_Mot_selBig = 1;
	}

	// motion sequence judge
	u27_FrmMot_Th = (u27_FrmMot_sum >> 3) * u4_Mot_diffWgt >> 3;
	u1_FrmSeq     = (u27_cur_FrmMot > u27_FrmMot_Th && u27_cur_FrmMot > u27_FrmMot_min)? 1 : 0;

	if(motion_T == _FILM_ALL){
//		pr_notice("[SEQ][,%d,%d,][,%d,%d,%d,][,%d,%d,]\n\r", pOutput->u8_cur_cadence_Id[motion_T], u1_FrmSeq, u27_cur_FrmMot, u27_FrmMot_Th, u27_FrmMot_sum, u27_maxMot, u27_secMot);
	}

	pOutput->u27_g_FrmMot_Th[motion_T] = u27_FrmMot_Th;

	//for 32 10110
	if (pOutput->u8_cur_cadence_Id[motion_T] == _CAD_32 ){
		if ((pOutput->u8_phT_phase_Idx[motion_T] == 3) && ((pOutput->u32_Mot_sequence[motion_T]&0x1) == 1)){
			u1_FrmSeq = (u1_FrmSeq == 1) ? 0 : u1_FrmSeq ;
			pOutput->u27_ipme_motionPool[motion_T][0] = pOutput->u27_quit_smlMot[motion_T];
		}
	}
	//for 32322 -> 32232
	if (pOutput->u8_cur_cadence_Id[motion_T] == _CAD_32322){
		if ((pOutput->u8_phT_phase_Idx[motion_T] == 8) && ((pOutput->u32_Mot_sequence[motion_T]&0x1) == 1)){
	        u1_FrmSeq = (u1_FrmSeq == 1) ? 0 : u1_FrmSeq ;
			pOutput->u27_ipme_motionPool[motion_T][0] = pOutput->u27_quit_smlMot[motion_T];
		}
	}

	pOutput->u32_Mot_sequence[motion_T] = (pOutput->u32_Mot_sequence[motion_T] << 1) | u1_FrmSeq;

	// record small motion^M
	if(pOutput->u32_Mot_sequence[motion_T] == 0xffffffff){
		pOutput->u27_FrmMotion_S[motion_T] = pOutput->u27_ipme_motionPool[motion_T][0];
	}
	else if(pOutput->u32_Mot_sequence[motion_T] == 0x0){
		pOutput->u27_FrmMotion_S[motion_T] = pOutput->u27_ipme_motionPool[motion_T][0];
	}
	else if(u1_FrmSeq==0){
		pOutput->u27_FrmMotion_S[motion_T] = (pOutput->u27_FrmMotion_S[motion_T]+pOutput->u27_ipme_motionPool[motion_T][0])/2;
	}
	pOutput->u27_FrmMotion_S[motion_T] = _CLIP_UBOUND_(pOutput->u27_FrmMotion_S[motion_T], 0x10000);

#endif
}

#define	SOFTWARE1__SOFTWARE1_63_ADDR	0xb809d7fc
void SE_CadenceDetect(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_FILM_MOT_TYPE motion_T)
{
	UINT8 u8_i = 0, u8_j = 0;
	UINT8 u1_match_flag = 0, u8_enter_th = 0, u8_len = 0;
	INT8 s8_Phase_Idx = 0;
	UINT32 u32_match_seq_sft = 0;
	UINT8 u8_preCad_Id = 0;
	UINT32 CadenceDetect_dbg_en = 0;
	CadenceDetect_dbg_en = (rtd_inl(SOFTWARE1__SOFTWARE1_63_ADDR)>>26)&0x1;
	u8_preCad_Id = pOutput->u8_pre_cadence_Id[motion_T];

//	UBYTE u1_qSwitch_cond = CadenceDetect_QSwitch_Judge(pParam, pOutput, motion_T);

	pOutput->u8_det_cadence_Id[motion_T] = _CAD_VIDEO;

	for (u8_i = 1; u8_i < _FRC_CADENCE_NUM_; u8_i ++){
		if(!((pParam->u32_filmDet_cadence_en >> u8_i) & 1)){
			continue;
		}

		u8_len = (u8_i == _CAD_22) ? se_frc_cadTable[u8_i].cad_len/2 :
			     (u8_i == _CAD_44) ? se_frc_cadTable[u8_i].cad_len/2 :
			     (u8_i == _CAD_55) ? se_frc_cadTable[u8_i].cad_len/2 :
			     (u8_i == _CAD_66) ? se_frc_cadTable[u8_i].cad_len/2 : se_frc_cadTable[u8_i].cad_len;
		s8_Phase_Idx = u8_len - 1;

		// if match?
		u1_match_flag = 0;
		u32_match_seq_sft = se_frc_cadTable[u8_i].cad_seq;
		for (u8_j = 0; u8_j < se_frc_cadTable[u8_i].cad_len; u8_j ++){
			u32_match_seq_sft = (u32_match_seq_sft>>1) | ((u32_match_seq_sft&0x1)<<(se_frc_cadTable[u8_i].cad_len-1));
			s8_Phase_Idx = s8_Phase_Idx - 1;
			if(s8_Phase_Idx < 0){
				s8_Phase_Idx = u8_len - 1;
			}

			if ((pOutput->u32_Mot_sequence[motion_T] & se_frc_cadTable[u8_i].cad_check) == u32_match_seq_sft){
				u1_match_flag = 1;
				break;
			}
		}

		// statistics of enter count
		#if 0
		u8_enter_th = (u8_i == _CAD_22)? ((pParam->u4_enter_22_cntGain-1) * se_frc_cadTable[u8_i].cad_len + 1):
			          (u8_i == _CAD_32)? ((pParam->u4_enter_32_cntGain-1) * se_frc_cadTable[u8_i].cad_len + 1):
			          (u8_i == _CAD_11i23) ? se_frc_cadTable[u8_i].cad_len :	((pParam->u4_enter_else_cntGain-1) * se_frc_cadTable[u8_i].cad_len + 1) ;
		#else // K2 use.
		u8_enter_th = (u8_i == _CAD_22) ? pParam->u4_enter_22_cntGain*(se_frc_cadTable[u8_i].cad_len): // 2*4=8
					(u8_i == _CAD_32) ? (pParam->u4_enter_32_cntGain*se_frc_cadTable[u8_i].cad_len)-2 : // (3*5)-2=13
					(u8_i == _CAD_32322) ? pParam->u4_enter_else_cntGain*(se_frc_cadTable[u8_i].cad_len-1) :
					(u8_i == _CAD_11i23) ? se_frc_cadTable[u8_i].cad_len :
					(u8_i == _CAD_44 || u8_i==_CAD_55 || u8_i == _CAD_66) ? 3 * se_frc_cadTable[u8_i].cad_len/2 :
					(u8_i == _CAD_2224) ? 2 * se_frc_cadTable[u8_i].cad_len :
					pParam->u4_enter_else_cntGain*se_frc_cadTable[u8_i].cad_len ;
		#endif
#if 0
		// dynamic control enter_th if switch from video to others
		if(pOutput->u8_pre_cadence_Id[motion_T] == _CAD_VIDEO && u1_qSwitch_cond){
			u8_enter_th =  (u8_i == _CAD_32 ) ? 1 : u8_enter_th;
			u8_enter_th =  (u8_i == _CAD_32322) ? (se_frc_cadTable[u8_i].cad_len - 1) : u8_enter_th;
		}

#endif

		se_filmCad_enterCnt[u8_i][motion_T] = (u1_match_flag == 1)? _CLIP_(se_filmCad_enterCnt[u8_i][motion_T] + 1, 0, u8_enter_th + 4) : 0;

		//printf("u8_enter_th = %d, u1_match_flag = %d, se_filmCad_enterCnt = %d\n", u8_enter_th, u1_match_flag, se_filmCad_enterCnt[u8_i][motion_T]);

		// ex. for _CAD_32, judge cadence detect successful if motionSeq == 10010.
		//u1_match_flag_def = (pOutput->u32_Mot_sequence[motion_T] & se_frc_cadTable[u8_i].cad_check) == se_frc_cadTable[u8_i].cad_seq? 1 : 0;
		if (se_filmCad_enterCnt[u8_i][motion_T] >= u8_enter_th)
		{
			pOutput->u8_det_cadence_Id[motion_T] = u8_i;
		}
		if((motion_T == _FILM_ALL) && (CadenceDetect_dbg_en == 1)){
			rtd_printk(KERN_DEBUG, TAG_NAME_SE_FILM, "[jerry_SE_CadenceDetect_AAA][u8_i = %d][enter_th = %d, enter_cnt = %d][det_cadence = %d]\n\r", u8_i, u8_enter_th, se_filmCad_enterCnt[u8_i][_FILM_ALL], pOutput->u8_det_cadence_Id[_FILM_ALL]);
			pr_notice("[jerry_SE_CadenceDetect_AAA][u8_i = %d][enter_th = %d, enter_cnt = %d][det_cadence = %d]\n\r", u8_i, u8_enter_th, se_filmCad_enterCnt[u8_i][_FILM_ALL], pOutput->u8_det_cadence_Id[_FILM_ALL]);
		}
	}

	//if(u8_preCad_Id == _CAD_32322  && s_pContext->_output_fblevelctrl.u1_HW_sc_true == 0 )
	//	pOutput->u8_det_cadence_Id[motion_T] = _CAD_32322;

	//debug
	//if ((motion_T == pOutput->u8_dbg_motion_t) && (((pOutput->u5_dbg_param1_pre & BIT_1) >> 1) == 1) && pOutput->u32_dbg_cnt_hold > 0)
	//{
	//	printk("[MEMC]%s::det_cadence_Id=%d \n",__FUNCTION__,pOutput->u8_det_cadence_Id[motion_T]);
	//}
}

UINT8 SE_cadence_seqFlag(SE_FRC_CADENCE cadInfo, UINT8 filmPh)
{
	UINT8 ret_seqFlag = 0;
	if (cadInfo.cad_isLRin == 0){
		ret_seqFlag = ((cadInfo.cad_seq >> (cadInfo.cad_outLen - 1 - filmPh))& 1);
	}
	else{
		ret_seqFlag = ((filmPh & 0x01) == 1)? 0 : ((cadInfo.cad_seq >> ((cadInfo.cad_outLen>>1) - 1 - (filmPh >> 1)))& 1);
	}
	return ret_seqFlag;
}

UINT8 SE_Film_PreFrm_MotWeight_autoGen(UINT32 u27_PreMot, UINT32 u27_CurMot)
{
	UINT8 u5_PreWgt          = 28;

	u27_CurMot  = u27_CurMot + 1;
	u27_PreMot  = u27_PreMot + 1;

	u5_PreWgt   = u27_PreMot * 1   > u27_CurMot? 12 : \
		         (u27_PreMot * 128 < u27_CurMot? 31 : \
			   	 (u27_PreMot * 64  < u27_CurMot? 30 : \
			   	 (u27_PreMot * 32  < u27_CurMot? 29 : \
			   	 (u27_PreMot * 16  < u27_CurMot? 28 : \
			   	 (u27_PreMot * 8   < u27_CurMot? 26 : \
			   	 (u27_PreMot * 4   < u27_CurMot? 24 : \
			   	 (u27_PreMot * 2   < u27_CurMot? 20 : \
			   	 (u27_PreMot * 1   < u27_CurMot? 18 : 28))))))));

	return u5_PreWgt;
}

UINT32 SE_Film_rgnSMot_Avg(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, UINT8 motion_T)
{
	UINT32 u27_rgnSMot_avg = pOutput->u27_quit_smlMot[motion_T];

	switch(motion_T)
	{
		case _FILM_5RGN_TOP:
			u27_rgnSMot_avg = (pOutput->u27_quit_smlMot[_FILM_5RGN_BOT] + pOutput->u27_quit_smlMot[_FILM_5RGN_CEN])/2;
			break;
		case _FILM_5RGN_BOT:
			u27_rgnSMot_avg = (pOutput->u27_quit_smlMot[_FILM_5RGN_TOP] + pOutput->u27_quit_smlMot[_FILM_5RGN_CEN])/2;
			break;
		case _FILM_5RGN_LFT:
			u27_rgnSMot_avg = (pOutput->u27_quit_smlMot[_FILM_5RGN_RHT] + pOutput->u27_quit_smlMot[_FILM_5RGN_CEN])/2;
			break;
		case _FILM_5RGN_RHT:
			u27_rgnSMot_avg = (pOutput->u27_quit_smlMot[_FILM_5RGN_LFT] + pOutput->u27_quit_smlMot[_FILM_5RGN_CEN])/2;
			break;
		default:
			break;
	}
	return u27_rgnSMot_avg;
}

void SE_Film_motThr_calc(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_FILM_MOT_TYPE motion_T)
{
	UINT8  u8_preCad_id = pOutput->u8_pre_cadence_Id[motion_T] < _FRC_CADENCE_NUM_ ? pOutput->u8_pre_cadence_Id[motion_T] : _CAD_VIDEO;
	UINT8  u1_curCad_motFlag = SE_cadence_seqFlag(se_frc_cadTable[u8_preCad_id], pOutput->u8_phase_Idx[motion_T]);
	UINT8  u1_curFrm_isBig = u8_preCad_id != _CAD_VIDEO? (u1_curCad_motFlag == 1? 1 : 0) : ((pOutput->u32_Mot_sequence[motion_T] & 0x01) ==1? 1 : 0);

	UINT8  u5_preFrm_adapt_big_motWgt = 0;
	UINT8  u5_preFrm_adapt_sml_motWgt = 0;
	UINT32 u27_pre_bigMot = pOutput->u27_quit_bigMot[motion_T];
	UINT32 u27_pre_smlMot = pOutput->u27_quit_smlMot[motion_T];
	UINT32 u27_curFrm_mot = pOutput->u27_ipme_motionPool[motion_T][0];

	UINT32 u16_SMot_Th = 256;
	UINT8 u8_SMot_ratio = 20;

	// motion IIR
/*	u5_preFrm_adapt_motWgt = (pParam->u1_quit_motWgt_auto_en == 0)? 28 : \
		                      Film_PreFrm_MotWeight_autoGen(pOutput->u27_quit_motTh[motion_T], u27_curFrm_mot); // u0.5*/
	u5_preFrm_adapt_big_motWgt = (pParam->u1_quit_motWgt_auto_en == 0)? 28 : \
                 SE_Film_PreFrm_MotWeight_autoGen(pOutput->u27_quit_bigMot[motion_T], u27_curFrm_mot); // u0.5

	u5_preFrm_adapt_sml_motWgt = (pParam->u1_quit_motWgt_auto_en == 0)? 28 : \
                 SE_Film_PreFrm_MotWeight_autoGen(pOutput->u27_quit_smlMot[motion_T], u27_curFrm_mot); // u0.5


	if (u1_curFrm_isBig == 1){
		pOutput->u27_quit_bigMot[motion_T] = _2Val_RndBlending_(u27_pre_bigMot, u27_curFrm_mot, u5_preFrm_adapt_big_motWgt, 5);
	}
	else{
		pOutput->u27_quit_smlMot[motion_T] = _2Val_RndBlending_(u27_pre_smlMot, u27_curFrm_mot, u5_preFrm_adapt_sml_motWgt, 5);
	}

	pOutput->u27_quit_motTh[motion_T] = (pOutput->u27_quit_bigMot[motion_T] * pParam->u4_quit_bigMot_wgt + pOutput->u27_quit_smlMot[motion_T] * pParam->u4_quit_smlMot_wgt) >> 3;

	//for mixmode@1112/11112, 1112/11112 is not easy to quit.
	if( motion_T!=_FILM_ALL && motion_T!=_FILM_5RGN_CEN
		&& (pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN]==_CAD_1112 ||pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN]==_CAD_11112))
	{
		UINT32 u27_rgnSmot_avg = SE_Film_rgnSMot_Avg(pParam, pOutput, motion_T);
		UINT32 u27_bMot_mapping = (pOutput->u27_quit_bigMot[motion_T] > 8*pOutput->u27_quit_smlMot[motion_T]) ? (pOutput->u27_quit_bigMot[motion_T]/8) :
								(pOutput->u27_quit_bigMot[motion_T] > 4*pOutput->u27_quit_smlMot[motion_T]) ? (pOutput->u27_quit_bigMot[motion_T]/4) :
								(pOutput->u27_quit_bigMot[motion_T]/2);

		if(u27_rgnSmot_avg < u16_SMot_Th && pOutput->u27_quit_smlMot[motion_T] > u8_SMot_ratio*(1+u27_rgnSmot_avg)){
			pOutput->u27_quit_motTh[motion_T] = (u27_bMot_mapping * _MIN_(1, pParam->u4_quit_bigMot_wgt/2) + u27_rgnSmot_avg * pParam->u4_quit_smlMot_wgt) >> 3;
		}
	}

}

VOID SE_Film_occasionally_fastOut(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput)
{
	UBYTE u8_curFrm_det_cadId = pOutput->u8_det_cadence_Id[_FILM_ALL];
	UBYTE u8_preFrm_cadId     = pOutput->u8_pre_cadence_Id[_FILM_ALL];
	//UBYTE u8_cad_enter_cnt_th = 0;

	pOutput->u1_cad_fastOut_true  = 0;
#if 1
	if (u8_preFrm_cadId == _CAD_32) // rule 1: 32->22 / 32322 / 3223
	{
		if (u8_curFrm_det_cadId == _CAD_22 || u8_curFrm_det_cadId == _CAD_32322 || u8_curFrm_det_cadId == _CAD_3223 || \
			u8_curFrm_det_cadId == _CAD_55)
		{
//			pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
			FilmQuitProtect_cnt = 60;
		}
	}else if (u8_preFrm_cadId == _CAD_22) // 22 -> 32 / 44 / 22224 / 2224 / 11'23
	{
		if (u8_curFrm_det_cadId == _CAD_32 || u8_curFrm_det_cadId == _CAD_44 || u8_curFrm_det_cadId == _CAD_22224 || \
			u8_curFrm_det_cadId == _CAD_2224 || u8_curFrm_det_cadId == _CAD_11i23 || u8_curFrm_det_cadId == _CAD_66)
		{
//			pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
			FilmQuitProtect_cnt = 60;
		}
	}

	//to avoid CAD_22 be quit by CAD_32's quit cnt
	if(pOutput->u8_pre_cadence_Id[_FILM_ALL] != pOutput->u8_cur_cadence_Id[_FILM_ALL]){
		pOutput->u8_quit_cnt[_FILM_ALL] = 0;
		pOutput->u8_quit_prd[_FILM_ALL] = 0;
	}
#else
	if (u8_preFrm_cadId == _CAD_32) // rule 1: 32->22 / 32322 / 3223
	{
		if (u8_curFrm_det_cadId == _CAD_22 || u8_curFrm_det_cadId == _CAD_32322 || u8_curFrm_det_cadId == _CAD_3223 || \
			u8_curFrm_det_cadId == _CAD_55)
		{
//			pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
		}
	}
	else if (u8_preFrm_cadId == _CAD_22) // 22 -> 32 / 44 / 22224 / 2224 / 11'23
	{
		if (u8_curFrm_det_cadId == _CAD_32 || u8_curFrm_det_cadId == _CAD_44 || u8_curFrm_det_cadId == _CAD_22224 || \
			u8_curFrm_det_cadId == _CAD_2224 || u8_curFrm_det_cadId == _CAD_11i23 || u8_curFrm_det_cadId == _CAD_66)
		{
//			pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
		}
	}
	else if (u8_preFrm_cadId == _CAD_11112) // 11112 -> 22. 11i23,32322,22224, not easy to quit
	{
		if (u8_curFrm_det_cadId == _CAD_22 || u8_curFrm_det_cadId == _CAD_11i23 || u8_curFrm_det_cadId == _CAD_32322 || \
			u8_curFrm_det_cadId == _CAD_22224 || u8_curFrm_det_cadId == _CAD_2224 || u8_curFrm_det_cadId == _CAD_55)
		{
//			pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
		}
	}
	else	if(u8_preFrm_cadId == _CAD_1112)// not easy to quit
	{
		if (u8_curFrm_det_cadId == _CAD_32 ||u8_curFrm_det_cadId == _CAD_3223 || u8_curFrm_det_cadId == _CAD_122 || \
			u8_curFrm_det_cadId == _CAD_55)
		{
//			pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
		}
	}
	else if(u8_preFrm_cadId == _CAD_3223)
	{
		if (u8_curFrm_det_cadId == _CAD_55)
		{
//			pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
		}
	}
	else if (u8_preFrm_cadId == _CAD_122)
	{
		if (u8_curFrm_det_cadId == _CAD_32)
		{
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
		}
	}
	else if (u8_preFrm_cadId == _CAD_334)
	{
		if (u8_curFrm_det_cadId == _CAD_66)
		{
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
			pOutput->u1_cad_fastOut_true          = 1;
		}
	}
	// 32322 bad-edit adjust, for quick switch 32
#if 1
	if((pOutput->u32_input_frame_rate > 0x59000000) && (pOutput->u32_input_frame_rate < 0x61000000)){
		else if(u8_preFrm_cadId == _CAD_32322)
		{
			u8_cad_enter_cnt_th =  se_frc_cadTable[_CAD_32322].cad_outLen + 4 - se_frc_cadTable[_CAD_32].cad_outLen;
			if(u8_curFrm_det_cadId == _CAD_32 && se_filmCad_enterCnt[_CAD_32][_FILM_ALL]> u8_cad_enter_cnt_th)
			{
				pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
				pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
				pOutput->u1_cad_fastOut_true          = 1;
			}
		}
	}
#endif

	// 32322 bad-edit adjust, for quick switch 32
//	if(u8_preFrm_cadId == _CAD_32322)
//	{
//		UBYTE u8_cad_enter_cnt_th =  frc_cadTable[_CAD_32322].cad_outLen + 4 - frc_cadTable[_CAD_32].cad_outLen;
//		if(u8_curFrm_det_cadId == _CAD_32 && u8_filmCad_enterCnt[_CAD_32][_FILM_ALL]> u8_cad_enter_cnt_th)
//		{
//			pOutput->u8_pre_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
//			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
//			pOutput->u1_cad_fastOut_true          = 1;
//		}
//	}
#endif
}

void SE_FilmEnter(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_FILM_MOT_TYPE motion_T, _SE_ReadBack_Regs *pRBRegs)
{
	UINT8 mot_isSml = 0;
	UINT8 u8_sys_N = pRBRegs->u8_sys_N_rb;
	UINT8 u8_sys_M = pRBRegs->u8_sys_M_rb;

	if(motion_T >= _FILM_MOT_NUM){
		pr_notice("[FilmEnter]Invalid Motion_Type:%d!!\n", motion_T);
		motion_T = _FILM_ALL;
	}
	mot_isSml = (pOutput->u27_ipme_motionPool[motion_T][0] < pOutput->u27_quit_motTh[motion_T])? 1 : 0;
	if ((pOutput->u8_det_cadence_Id[motion_T] != _CAD_VIDEO) && mot_isSml){
		if(((u8_sys_N == 5 && u8_sys_M == 6) || (u8_sys_N == 5 && u8_sys_M == 12))    //50 to 60  or 25 to 50
		&& ((pOutput->u8_det_cadence_Id[motion_T] != _CAD_22) && (pOutput->u8_det_cadence_Id[motion_T] != _CAD_55)))
		{
			pOutput->u8_cur_cadence_Id[motion_T] = _CAD_VIDEO;
			pOutput->u8_phase_Idx[motion_T] = 0;
		}
		else{
			pOutput->u8_cur_cadence_Id[motion_T] = pOutput->u8_det_cadence_Id[motion_T];
			//pOutput->u8_phase_Idx[motion_T] = pOutput->u8_Calc_phase_Idx[motion_T];
		}

		if(motion_T == _FILM_ALL){
			rtd_printk(KERN_DEBUG, TAG_NAME_SE_FILM, "[jerry_SE_FilmEnter][mot_isSml = %d][u8_det_cadence_Id = %d, u8_cur_cadence_Id = %d]\n\r", mot_isSml, pOutput->u8_det_cadence_Id[motion_T], pOutput->u8_cur_cadence_Id[motion_T]);
		}
	}
}

void SE_FilmQuit_BadEditPatch(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput)
{
	UINT32 flag = 0;
	UINT8 j = 0;
	UINT8 u8_checkbit = 16;
	UINT8 u8_totalcheck = 0;
	UINT8 u1_match32322_flag = 0;
	UINT8 u1_match32_flag = 0;
	UINT32 u32_match_data_temp = 0;

	u1_match32322_flag = 0;
	u8_totalcheck = u8_checkbit - 5;
	for(j = 0;j <= u8_totalcheck; j++){
		u32_match_data_temp = ((pOutput->u32_Mot_sequence[_FILM_ALL] & ((1<<u8_checkbit)-1))>>j); // at least check 16bits for 32322
		// confirm 32322 seq to quit
		if ((u32_match_data_temp & se_frc_cadTable[_CAD_32].cad_check) == 0x15){ // 10101(part of 32322)
			u1_match32322_flag = 1;
		}
	}

	//for 32 badedit
	u8_totalcheck = 13;
	for(j = 0;j <= u8_totalcheck; j++){
		u32_match_data_temp = pOutput->u32_Mot_sequence[_FILM_ALL] & (0xfff<<j); // at least check 12bits for 32
		// confirm 32 seq to quit
		if (u32_match_data_temp == 0xA53){ // for case "232311"
			u1_match32_flag = 1;
		}
	}

	if(pOutput->u8_pre_cadence_Id[_FILM_ALL] == _CAD_32322
		&& (se_filmCad_enterCnt[_CAD_32322][_FILM_ALL] >= 1 || (pOutput->u32_Mot_sequence[_FILM_ALL] & 0x3f) == 0)
		&& (se_filmCad_enterCnt[_CAD_32][_FILM_ALL] <= u8_totalcheck || u1_match32322_flag == 1) // avoid 32seq
		&& (pParam->u1_BadEditSlowOut_En == 1))
	{
		pOutput->u8_quit_cnt[_FILM_ALL] = (pOutput->u8_quit_cnt[_FILM_ALL] >= 1) ? pOutput->u8_quit_cnt[_FILM_ALL]-1 : 0;
		flag = 1;
	}

	if(pOutput->u8_pre_cadence_Id[_FILM_ALL] == _CAD_32 && u1_match32_flag == 1 && (pParam->u1_BadEditSlowOut_En == 1)){
		pOutput->u8_quit_cnt[_FILM_ALL] = (pOutput->u8_quit_cnt[_FILM_ALL] >= 1) ? pOutput->u8_quit_cnt[_FILM_ALL]-1 : 0;
	}
}

void SE_FilmQuit(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_FILM_MOT_TYPE motion_T, _SE_ReadBack_Regs *pRBRegs)
{
	UINT8  u8_preCad_id = 0,u1_curCad_motFlag = 0;
	UINT32 u27_curFrm_mot = 0,u27_quit_motTh = 0;
	UINT8 u8_pre_quit_prd = 0,u8_pre_quit_cnt = 0,u8_quit_prd_th = 0;

	UINT8 u8_quitCntTh = pParam->u8_quit_cnt_th;
	UINT32 u3_quitCntOffset = 333;
	UINT32 u3_quitCntOffset_2 = 60;
	UINT32 CadenceDetect_dbg_en = 0;
	CadenceDetect_dbg_en = (rtd_inl(SOFTWARE1__SOFTWARE1_63_ADDR)>>24)&0x1;

	if(motion_T >= _FILM_MOT_NUM){
		pr_notice("[FilmQuit]Invalid Motion_Type:%d!!\n", motion_T);
		motion_T = _FILM_ALL;
	}
	u8_preCad_id       = pOutput->u8_pre_cadence_Id[motion_T];

	if(u8_preCad_id >= _FRC_CADENCE_NUM_){
		pr_notice("[FilmQuit]Invalid u8_preCad_id = %d, motion = %d. Resume!\n", u8_preCad_id, motion_T);
		u8_preCad_id = _CAD_VIDEO;
	}
	u1_curCad_motFlag  = SE_cadence_seqFlag(se_frc_cadTable[u8_preCad_id], pOutput->u8_phase_Idx[motion_T]);

	u27_curFrm_mot     = pOutput->u27_ipme_motionPool[motion_T][0];
	u27_quit_motTh     = pOutput->u27_quit_motTh[motion_T];

	u8_pre_quit_prd     = pOutput->u8_quit_prd[motion_T];
	u8_pre_quit_cnt     = pOutput->u8_quit_cnt[motion_T];
	u8_quit_prd_th      = ((u8_preCad_id == _CAD_1112) || (u8_preCad_id == _CAD_11112)) ? pParam->u8_quit_prd_th/2 : pParam->u8_quit_prd_th;

	// bigger quitCntTh if many '0' in sequence => bad edit need
	if((motion_T == _FILM_ALL) && (pOutput->u8_pre_cadence_Id[motion_T] == _CAD_32322)){
		if(pRBRegs->u1_SW_sc_true == 1){
			u8_quitCntTh = u8_quitCntTh ;
		}else{
			//u8_quitCntTh = u8_quitCntTh + (u3_quitCntOffset>>4);
			u8_quitCntTh = u8_quitCntTh + u3_quitCntOffset;
		}
	}
	else if((motion_T == _FILM_ALL) && (pOutput->u8_pre_cadence_Id[motion_T] == _CAD_22)){ // CG_Pattern, video->22(very small motion),not easy to quit
		//u8_quitCntTh = (u8_quitCntTh > 1) ? (u8_quitCntTh -1) : 0;
		u8_quitCntTh = u8_quitCntTh + (u3_quitCntOffset_2);
	}
	else if((motion_T == _FILM_ALL) && (pOutput->u8_pre_cadence_Id[motion_T] == _CAD_32)){
		u8_quitCntTh = u8_quitCntTh + (u3_quitCntOffset_2);
		//u8_quitCntTh = u8_quitCntTh + 3;
	}

	// quit state-machine
	if (u1_curCad_motFlag == 0){
		if (u27_curFrm_mot > u27_quit_motTh){
			pOutput->u8_quit_cnt[motion_T] = _CLIP_(u8_pre_quit_cnt + 1, 0, u8_quitCntTh + 4);
			pOutput->u8_quit_prd[motion_T] = 0;
		}
		else{
			pOutput->u8_quit_prd[motion_T] = _MIN_(u8_pre_quit_prd + 1, u8_quit_prd_th);
			pOutput->u8_quit_cnt[motion_T] = pOutput->u8_quit_prd[motion_T] == u8_quit_prd_th ? (u8_pre_quit_cnt <= 1? 0 : u8_pre_quit_cnt-1) : u8_pre_quit_cnt;
		}
	}

	// for 32322 bad-editting
	if(motion_T == _FILM_ALL){
		SE_FilmQuit_BadEditPatch(pParam, pOutput);
		pOutput->u8_quit_cnt[motion_T] = _CLIP_UBOUND_(pOutput->u8_quit_cnt[motion_T], (u8_quitCntTh+4));
	}

	if(motion_T == _FILM_ALL && CadenceDetect_dbg_en){
		pr_notice("[jerry_SE_FilmQuit][curFrm_mot = %d, quit_motTh = %d][det_cadence = %d, cur_cadence = %d][%d, %d, %d]\n\r", u27_curFrm_mot, u27_quit_motTh,
			pOutput->u8_det_cadence_Id[motion_T], pOutput->u8_cur_cadence_Id[motion_T], pOutput->u8_quit_cnt[motion_T], pOutput->u8_quit_prd[motion_T], u8_quitCntTh);
	}
	//if ((motion_T == pOutput->u8_dbg_motion_t) && (((pOutput->u5_dbg_param1_pre & BIT_3) >> 3) == 1) && pOutput->u32_dbg_cnt_hold > 0)
	//{
	//	printf("[FilmQuit]::quit_cnt = %d, phase_ID = %d \n", pOutput->u8_quit_cnt[motion_T], pOutput->u8_phase_Idx[motion_T]);
	//	printf("[FilmQuit]::preCad_id = %d, pre_cadence_Id = %d \n", u8_preCad_id, pOutput->u8_pre_cadence_Id[motion_T]);
	//	printf("[FilmQuit]::u8_quitCntTh = %d, mixMode = %d \n", u8_quitCntTh, pOutput->u1_mixMode);
	//}

	// quit judge
	if (pOutput->u8_quit_cnt[motion_T] >= u8_quitCntTh || (pOutput->u1_mixMode == 1)){
		pOutput->u8_cur_cadence_Id[motion_T] = _CAD_VIDEO;
		//pOutput->u8_cur_cadence_Id[motion_T] = pOutput->u8_det_cadence_Id[motion_T];//_CAD_VIDEO;
		pOutput->u8_quit_cnt[motion_T]       = 0;
		pOutput->u8_quit_prd[motion_T]       = 0;
		if(motion_T == _FILM_ALL)
			FilmQuitProtect_cnt = 60;
	}
	else{
		pOutput->u8_cur_cadence_Id[motion_T] = u8_preCad_id;
	}
}

void SE_PhaseIdx_set(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_FILM_MOT_TYPE motion_T)
{
	UINT8 u8_cur_cadId = 0;

	if(motion_T >= _FILM_MOT_NUM){
		pr_notice("[PhaseIdx_set]Invalid Motion_Type:%d!!\n", motion_T);
		motion_T = _FILM_ALL;
	}

	u8_cur_cadId = pOutput->u8_cur_cadence_Id[motion_T];
	if((rtd_inl(SOFTWARE1__SOFTWARE1_00_ADDR)>>9)&0x1){//FRC_TOP__software1__reg_software_00_ADDR
		pOutput->u8_cur_cadence_Id[motion_T] = (rtd_inl(SOFTWARE1__SOFTWARE1_00_ADDR)>>11)&0xf;//FRC_TOP__software1__reg_software_00_ADDR
		u8_cur_cadId = pOutput->u8_cur_cadence_Id[motion_T];
	}

	if(u8_cur_cadId >= _FRC_CADENCE_NUM_){
		pr_notice("[PhaseIdx_set]Invalid u8_cur_cadId:%d, motion = %d. Resume!\n", u8_cur_cadId, motion_T);
		u8_cur_cadId = _CAD_VIDEO;
	}
	if (u8_cur_cadId == _CAD_VIDEO){
		pOutput->u8_phase_Idx[motion_T] = 0;
	}
	else{
		pOutput->u8_phase_Idx[motion_T] ++;

		if (pOutput->u8_phase_Idx[motion_T] == se_frc_cadTable[u8_cur_cadId].cad_outLen){
			pOutput->u8_phase_Idx[motion_T] = 0;
		}
	}

	// resync rule
	if ((pOutput->u32_Mot_sequence[motion_T] & se_frc_cadTable[u8_cur_cadId].cad_check) == se_frc_cadTable[u8_cur_cadId].cad_seq && pOutput->u8_phase_Idx[motion_T] != 0){
	#if 0
		if (u8_cur_cadId == _CAD_32322 && (pOutput->u8_phase_Idx[motion_T] == 7))
		{
			// 32322 <-> 32232 has no re-sync.
		}
		else if ((u8_cur_cadId == _CAD_32) && (pOutput->u8_phase_Idx[motion_T] == 2))
		{
		    //32<->23 has no resync
		}
		else
	#endif
		{
			pOutput->u1_cad_resync_true[motion_T] = 0;
			pOutput->u8_phase_Idx[motion_T] = 0;
		}
	}

	pOutput->u8_phT_phase_Idx[motion_T] = pOutput->u8_phase_Idx[motion_T];
}

void SE_MixModeQuit(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput)
{
	UBYTE u1_quit_cond1 = 0;
	UBYTE u1_quit_cond1_dly = 0;
	UINT32 u27_smot_th_l = _MIN_(pParam->u27_mixMode_rgnMove_minMot, 0x200);

	UINT32 u27_smot_th_h = 0x3072;//(u32_RB_val&0x7fffffff);

	UBYTE u5_quit_cond2 = 0;
	UBYTE i = 0;
	// rgn0=rgn1=rgn2=rgn3=rgn4
	u1_quit_cond1 = ((pOutput->u8_pre_cadence_Id[_FILM_5RGN_LFT]==pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN])
					&& (pOutput->u8_pre_cadence_Id[_FILM_5RGN_RHT]==pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN])
					&& (pOutput->u8_pre_cadence_Id[_FILM_5RGN_TOP]==pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN])
					&& (pOutput->u8_pre_cadence_Id[_FILM_5RGN_BOT]==pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN])
					&& (pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN]!=_CAD_VIDEO)) ? 1 : u1_quit_cond1;

	//avoid: 1. center area smot < th, bmot > N*th
	//		 2. t/b/l/r area smot > M*th
	u1_quit_cond1_dly = ((pOutput->u27_quit_smlMot[_FILM_5RGN_CEN] < u27_smot_th_l) && (pOutput->u27_quit_bigMot[_FILM_5RGN_CEN] > 8*u27_smot_th_l))
					&& ((_MIN_(pOutput->u27_quit_smlMot[_FILM_5RGN_LFT], pOutput->u27_quit_bigMot[_FILM_5RGN_LFT]) > 4*u27_smot_th_l)
							||(_MIN_(pOutput->u27_quit_smlMot[_FILM_5RGN_RHT], pOutput->u27_quit_bigMot[_FILM_5RGN_RHT]) > 4*u27_smot_th_l)
							||(_MIN_(pOutput->u27_quit_smlMot[_FILM_5RGN_TOP], pOutput->u27_quit_bigMot[_FILM_5RGN_TOP]) > 4*u27_smot_th_l)
							||(_MIN_(pOutput->u27_quit_smlMot[_FILM_5RGN_BOT], pOutput->u27_quit_bigMot[_FILM_5RGN_BOT]) > 4*u27_smot_th_l));

	if(u1_quit_cond1 && (!u1_quit_cond1_dly)){
		pOutput->u8_mixMode_cnt = (pOutput->u8_mixMode_cnt>2)? (pOutput->u8_mixMode_cnt-2) : 0;
	}

	// 5 region motion big => depend on full region detect
	for(i = _FILM_5RGN_TOP; i <= _FILM_5RGN_CEN; i++){
		if(pOutput->u27_FrmMotion_S[i]> u27_smot_th_h) // th = 0x3072
			u5_quit_cond2 = u5_quit_cond2 + (1<<i);
	}

	if(u5_quit_cond2 == 0x1f /*&& pParam->u1_MixModeQuitBySmv_En*/){
		pOutput->u8_mixMode_cnt = (pOutput->u8_mixMode_cnt>1)? (pOutput->u8_mixMode_cnt-1) : 0;
	}
}

void SE_MixMode_detect(const _SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput)
{
	UBYTE u1_mixMode_status = 0, u1_badMot_status  = 0, u1_badMot_flag = 0, u1_badCad_flag = 0;
	UBYTE u8_k = 0,u8_preCad_Id = 0,u1_preCad_motFlag = 0,u1_ipmeMot_flag = 0;
	UINT32 u17_dbg_1 = 0, u17_dbg_2 = 0, u17_dbg_3 = 0;
	#if MIX_MODE_REGION_17
	UBYTE u1_v1Cad_cond, u1_v2Cad_cond, u1_h1Cad_cond, u1_h2Cad_cond, u1_h3Cad_cond;
	#endif
	UBYTE u1_badCad_cond1, u1_badCad_cond2;
	static UBYTE u8_maxPossible_CadId = 0,u1_mixMode_pre=0;
	UBYTE u4_rgnMove_motWgt = pParam->u4_mixMode_rgnMove_motWgt;
	UINT32 u27_smlMot=0,u28_smlMot_xGain=0,u28_smlMot_badTh=0,u28_badMot_Th=0;


	u8_preCad_Id = pOutput->u8_pre_cadence_Id[_FILM_ALL];
	if(u8_preCad_Id >= _FRC_CADENCE_NUM_){
		rtd_printk(KERN_NOTICE, "MEMC", "[%s]Invalid u8_preCad_Id:%d,motion=%d.Resume!\n",\
			__FUNCTION__,u8_preCad_Id,_FILM_ALL);
		u8_preCad_Id = _CAD_VIDEO;
	}
	u1_preCad_motFlag = SE_cadence_seqFlag(se_frc_cadTable[u8_preCad_Id], pOutput->u8_phase_Idx[_FILM_ALL]);
	u1_ipmeMot_flag  = pOutput->u32_Mot_sequence[_FILM_ALL] & 0x01;

	if ((u8_preCad_Id != _CAD_VIDEO && u1_preCad_motFlag == 0  ) || (u8_preCad_Id == _CAD_VIDEO && u1_ipmeMot_flag == 0))
	{
		UBYTE u8_mixMode_cnt_p1 = 0, u8_mixMode_cnt_n1 = 0;
		#if MIX_MODE_REGION_17
		for (u8_k = _FILM_5RGN_TOP; u8_k <= _FILM_12RGN_12; u8_k ++)
		#else
		for (u8_k = _FILM_5RGN_TOP; u8_k <= _FILM_5RGN_CEN; u8_k ++)
		#endif
		{
			UBYTE  u8_preCad_Id_rgn  = pOutput->u8_pre_cadence_Id[u8_k];

			//UINT32 u28_smlMot_xGain  = (pOutput->u27_quit_smlMot[u8_k] * pParam->u4_mixMode_rgnMove_motWgt >> 3);
			#if MIX_MODE_REGION_17

			u27_smlMot = (pOutput->u27_quit_smlMot[_FILM_12RGN_01]+pOutput->u27_quit_smlMot[_FILM_12RGN_02]+pOutput->u27_quit_smlMot[_FILM_12RGN_03]+pOutput->u27_quit_smlMot[_FILM_12RGN_04]+
					 pOutput->u27_quit_smlMot[_FILM_12RGN_05]+pOutput->u27_quit_smlMot[_FILM_12RGN_06]+pOutput->u27_quit_smlMot[_FILM_12RGN_07]+pOutput->u27_quit_smlMot[_FILM_12RGN_08]+
					 pOutput->u27_quit_smlMot[_FILM_12RGN_09]+pOutput->u27_quit_smlMot[_FILM_12RGN_10]+pOutput->u27_quit_smlMot[_FILM_12RGN_11]+pOutput->u27_quit_smlMot[_FILM_12RGN_12]);

			u28_smlMot_xGain  = (u27_smlMot * u4_rgnMove_motWgt >> 3);   // u4_mixMode_rgnMove_motWgt =10
			u28_smlMot_badTh  = u28_smlMot_xGain;
			#else
			u27_smlMot = (u8_k==_FILM_5RGN_CEN) ? pOutput->u27_quit_smlMot[_FILM_ALL] : pOutput->u27_quit_smlMot[_FILM_5RGN_CEN];
			u28_smlMot_xGain  = (u27_smlMot * u4_rgnMove_motWgt >> 3);   // u4_mixMode_rgnMove_motWgt =10
			u28_smlMot_badTh  = (u8_k == _FILM_5RGN_CEN)? _MIN_(u28_smlMot_xGain, 0x3000/*0x5000*/) : u28_smlMot_xGain;
			#endif
			u28_badMot_Th     = _MAX_(u28_smlMot_badTh, pParam->u27_mixMode_rgnMove_minMot);   //  u27_mixMode_rgnMove_minMot = 544
			u1_badMot_flag    = pOutput->u27_ipme_motionPool[u8_k][0] > u28_badMot_Th?   1 : 0;

			u1_badCad_cond1 = (pOutput->u1_mixMode == 0 &&(u8_preCad_Id == _CAD_VIDEO || u8_preCad_Id_rgn != u8_preCad_Id));

			#if MIX_MODE_REGION_17
			u1_v1Cad_cond =  pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_02]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_06]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_10];
			u1_v2Cad_cond =  pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_03]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_07]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_11];
			u1_h1Cad_cond =  pOutput->u8_pre_cadence_Id[_FILM_12RGN_01]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_02]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_03]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_04];
			u1_h2Cad_cond =  pOutput->u8_pre_cadence_Id[_FILM_12RGN_05]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_06]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_07]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_08];
			u1_h3Cad_cond =  pOutput->u8_pre_cadence_Id[_FILM_12RGN_09]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_10]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_11]+pOutput->u8_pre_cadence_Id[_FILM_12RGN_12];

			u1_badCad_cond2 = (pOutput->u1_mixMode == 1 &&(( u8_k<_FILM_5RGN_CEN &&( u8_preCad_Id_rgn*4 !=u1_v1Cad_cond || u8_preCad_Id_rgn*4 !=u1_v2Cad_cond || u8_preCad_Id_rgn*4 !=u1_h1Cad_cond || u8_preCad_Id_rgn*4 !=u1_h2Cad_cond || u8_preCad_Id_rgn*4 !=u1_h3Cad_cond))
                                                                                                                       ||( u8_k>=_FILM_5RGN_CEN && CadenceComparison(pOutput,_FILM_5RGN_CEN,_FILM_12RGN_12) )));
			#else
			u1_badCad_cond2 = (pOutput->u1_mixMode == 1 &&((u8_preCad_Id_rgn != pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN] && u8_k!=_FILM_5RGN_CEN) ||(u8_preCad_Id_rgn == _CAD_VIDEO && u8_k==_FILM_5RGN_CEN)));
			#endif

           		 u1_badCad_flag    = (u1_badCad_cond1 || u1_badCad_cond2)? 1 : 0;
			//u1_badCad_flag    = (u8_preCad_Id == _CAD_VIDEO || u8_preCad_Id_rgn != u8_preCad_Id)? 1 : 0;

			u17_dbg_1 = (u17_dbg_1<<1) |u1_badMot_flag;
			u17_dbg_2 = (u17_dbg_2<<1) |u1_badCad_cond1;
			u17_dbg_3 = (u17_dbg_3<<1) |u1_badCad_cond2;

			//u1_badMot_status  = u1_badMot_status | u1_badMot_flag;
			u1_badMot_status  = u1_badMot_status | (u1_badMot_flag && pParam->u1_mixMode_rgnEn[u8_k-1]);
			u1_mixMode_status = u1_mixMode_status | (u1_badMot_flag && u1_badCad_flag && pParam->u1_mixMode_rgnEn[u8_k-1]);
		}

		u8_mixMode_cnt_n1 = pOutput->u8_mixMode_cnt > 0? (pOutput->u8_mixMode_cnt - 1) : 0;
		u8_mixMode_cnt_p1 = pOutput->u8_mixMode_cnt == pParam->u8_mixMode_cnt_max? pOutput->u8_mixMode_cnt : (pOutput->u8_mixMode_cnt + 1);
		pOutput->u8_mixMode_cnt =  u1_mixMode_status == 1?  u8_mixMode_cnt_p1 : (u1_badMot_status == 1?  pOutput->u8_mixMode_cnt : u8_mixMode_cnt_n1);
	}

	pOutput->u8_mixMode_cnt = _CLIP_(pOutput->u8_mixMode_cnt, 0, pParam->u8_mixMode_cnt_max);

	SE_MixModeQuit(pParam, pOutput);

	u8_maxPossible_CadId = (pOutput->u1_mixMode==0) ? u8_preCad_Id : u8_maxPossible_CadId;
	if(!(pOutput->u8_pre_cadence_Id[_FILM_ALL]==_CAD_VIDEO && pOutput->u1_mixMode==0))
	{
		UBYTE u8_mxMode_enterCnt_th = (u8_maxPossible_CadId==_CAD_1112 || u8_maxPossible_CadId==_CAD_11112 ||u8_maxPossible_CadId==_CAD_2224) ?
									(pParam->u8_mixMode_enter_cntTh/2) : pParam->u8_mixMode_enter_cntTh;//for mixmode@1112/11112, 1112/11112 is not easy to enter
		pOutput->u1_mixMode = (pOutput->u8_mixMode_cnt >= u8_mxMode_enterCnt_th)? 1 : 0;
	}

	u1_mixMode_pre = pOutput->u1_mixMode;

	//printf("pOutput->u1_mixMode = %d\n", pOutput->u1_mixMode);

	//if((((pOutput->u5_dbg_param1_pre & BIT_2) >> 2) == 1) && pOutput->u32_dbg_cnt_hold > 0)
	//{
	//	printf("(%d,%d,%d,%d)(%d,%d,%d,%d,%d)(%d,%d,%d,%d)(%d,%d,%d,%d)(%d,%d,%d,%d)(%d,%d,%d)(%d)\n",  u8_dbg_1, u8_dbg_2,u1_preCad_motFlag,u8_dbg_3,
	//				pOutput->u8_pre_cadence_Id[_FILM_5RGN_TOP],pOutput->u8_pre_cadence_Id[_FILM_5RGN_BOT],
	//				pOutput->u8_pre_cadence_Id[_FILM_5RGN_LFT],pOutput->u8_pre_cadence_Id[_FILM_5RGN_RHT],pOutput->u8_pre_cadence_Id[_FILM_5RGN_CEN],
	//				pOutput->u8_pre_cadence_Id[_FILM_12RGN_01],pOutput->u8_pre_cadence_Id[_FILM_12RGN_02],pOutput->u8_pre_cadence_Id[_FILM_12RGN_03],pOutput->u8_pre_cadence_Id[_FILM_12RGN_04],
	//				pOutput->u8_pre_cadence_Id[_FILM_12RGN_05],pOutput->u8_pre_cadence_Id[_FILM_12RGN_06],pOutput->u8_pre_cadence_Id[_FILM_12RGN_07],pOutput->u8_pre_cadence_Id[_FILM_12RGN_08],
	//				pOutput->u8_pre_cadence_Id[_FILM_12RGN_09],pOutput->u8_pre_cadence_Id[_FILM_12RGN_10],pOutput->u8_pre_cadence_Id[_FILM_12RGN_11],pOutput->u8_pre_cadence_Id[_FILM_12RGN_12],
	//				pOutput->u8_mixMode_cnt,pParam->u8_mixMode_enter_cntTh,pOutput->u1_mixMode, u8_preCad_Id);
	//	#if 0
	//	printk("(%d,%d,%d,%d,%d)(%d,%d,%d,%d)(%d,%d,%d,%d)(%d,%d,%d,%d)\n",
	//				pOutput->u27_ipme_motionPool[_FILM_5RGN_TOP][0],pOutput->u27_ipme_motionPool[_FILM_5RGN_BOT][0],
	//				pOutput->u27_ipme_motionPool[_FILM_5RGN_LFT][0],pOutput->u27_ipme_motionPool[_FILM_5RGN_RHT][0],pOutput->u27_ipme_motionPool[_FILM_5RGN_CEN][0],
	//				pOutput->u27_ipme_motionPool[_FILM_12RGN_01][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_02][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_03][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_04][0],
	//				pOutput->u27_ipme_motionPool[_FILM_12RGN_05][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_06][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_07][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_08][0],
	//				pOutput->u27_ipme_motionPool[_FILM_12RGN_09][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_10][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_11][0],pOutput->u27_ipme_motionPool[_FILM_12RGN_12][0]
	//				);
	//	printk("(%d,%d,%d,%d,%d,%d)(%d,%d,%d,%d)(%d,%d,%d,%d)(%d,%d,%d,%d)\n",pOutput->u27_quit_smlMot[_FILM_ALL] ,
	//				pOutput->u27_quit_smlMot[_FILM_5RGN_TOP],pOutput->u27_quit_smlMot[_FILM_5RGN_BOT],
	//				pOutput->u27_quit_smlMot[_FILM_5RGN_LFT],pOutput->u27_quit_smlMot[_FILM_5RGN_RHT],pOutput->u27_quit_smlMot[_FILM_5RGN_CEN],
	//				pOutput->u27_quit_smlMot[_FILM_12RGN_01],pOutput->u27_quit_smlMot[_FILM_12RGN_02],pOutput->u27_quit_smlMot[_FILM_12RGN_03],pOutput->u27_quit_smlMot[_FILM_12RGN_04],
	//				pOutput->u27_quit_smlMot[_FILM_12RGN_05],pOutput->u27_quit_smlMot[_FILM_12RGN_06],pOutput->u27_quit_smlMot[_FILM_12RGN_07],pOutput->u27_quit_smlMot[_FILM_12RGN_08],
	//				pOutput->u27_quit_smlMot[_FILM_12RGN_09],pOutput->u27_quit_smlMot[_FILM_12RGN_10],pOutput->u27_quit_smlMot[_FILM_12RGN_11],pOutput->u27_quit_smlMot[_FILM_12RGN_12]
	//				);
	//	#endif

	//}
}

//extern CAD_SUPPORT_TYPE PQL_FRCCaseSupportJudge(UBYTE CurCadence);
extern unsigned char g_Q13722_flag;
VOID SE_FilmDetect_UpdateOutput(_SE_OUTPUT_FilmDetectCtrl *pOutput)
{
#if 1
	UBYTE u8_k = 0;

	for(u8_k = _FILM_ALL; u8_k < _FILM_MOT_NUM; u8_k++)
	{
		pOutput->u8_cur_cadence_out[u8_k] = pOutput->u8_cur_cadence_Id[u8_k];
		pOutput->u8_phT_phase_Idx_out[u8_k] = pOutput->u8_phT_phase_Idx[u8_k];

		if((pOutput->u8_cur_cadence_Id[u8_k] == _CAD_55) || (pOutput->u8_cur_cadence_Id[u8_k] == _CAD_66) || (pOutput->u8_cur_cadence_Id[u8_k] == _CAD_44) || (VR360_en == 1))//not support & need to fallback
		{
			pOutput->u8_cur_cadence_out[u8_k] = _CAD_VIDEO;
			pOutput->u8_phT_phase_Idx_out[u8_k] = 0;
		}

		if(FilmQuitProtect_cnt > 0){
			pOutput->u8_cur_cadence_out[u8_k] = _CAD_VIDEO;
			pOutput->u8_phT_phase_Idx_out[u8_k] = 0;
		}

		if(g_Q13722_flag == 1){
			pOutput->u8_cur_cadence_out[u8_k] = _CAD_VIDEO;
			pOutput->u8_phT_phase_Idx_out[u8_k] = 0;
		}
	}

	if(FilmQuitProtect_cnt > 0){
		if(FilmQuitProtect_cnt == 30){
			pr_notice("[SE_FilmDetect_UpdateOutput][FilmQuitProtect_cnt]\n");
		}
		FilmQuitProtect_cnt--;
	}
#endif
}

VOID SE_FilmDetect_FlushProtect(_SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_FILM_MOT_TYPE motion_T)
{
#if 1
	unsigned char SE_flush = 0, u8_i = 0;
	unsigned int test_val = 0;
	static unsigned char SE_flush_cnt = 0;

	test_val = (rtd_inl(0xb809d700)>>15)&0xff;//14;
	SE_flush = pOutput->u8_flush_flag;

	if((SE_flush == 1) /*&& (SE_reset == 0)*/ && (Scaler_DispGetInputInfoByDisp(SLR_MAIN_DISPLAY, SLR_INPUT_STATE) == _MODE_STATE_ACTIVE)){
		SE_flush_cnt = test_val;//14;//
		for (u8_i = 1; u8_i < _FRC_CADENCE_NUM_; u8_i ++){
			se_filmCad_enterCnt[u8_i][motion_T] = 0;
		}
		pr_notice("[jerry_FlushProtect][AAA][%d][%d, %d][%d]\n\r", SE_flush_cnt, motion_T, pOutput->u8_cur_cadence_Id[motion_T],pOutput->u8_pre_cadence_Id[motion_T]);
	}

	if(SE_flush_cnt > 0){
		SE_flush_cnt--;
		FlushProtectStatus = 1;
		pOutput->u8_cur_cadence_Id[motion_T] = pOutput->u8_pre_cadence_Id[motion_T];
		pr_notice("[jerry_FlushProtect][BBB][%d][%d, %d][%d]\n\r", SE_flush_cnt, motion_T, pOutput->u8_cur_cadence_Id[motion_T],pOutput->u8_pre_cadence_Id[motion_T]);
	}else{
		FlushProtectStatus = 0;
	}
#endif
}

VOID SE_FilmDetect_BadEditProtect(_SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_ReadBack_Regs *pRBRegs)
{
	UINT32 u8_k = 0, score_BadEdit_1 = 0, score_BadEdit_2 = 0, BadEdit_Th_1 = 0, BadEdit_Th_2 = 0;
	static UINT32 score_GoodEdit = 0;
	UINT32 GoodEdit_Th = 300;
	UINT32 CadenceDetect_dbg_en = 0, BadEdit_en = 0;
	CadenceDetect_dbg_en = (rtd_inl(SOFTWARE1__SOFTWARE1_63_ADDR)>>25)&0x1;
	BadEdit_en = (rtd_inl(SOFTWARE1__SOFTWARE1_00_ADDR)>>23)&0x1;
	BadEdit_Th_1 = (rtd_inl(SOFTWARE1__SOFTWARE1_08_ADDR)>>0)&0xf; // 8
	BadEdit_Th_2 = (rtd_inl(SOFTWARE1__SOFTWARE1_08_ADDR)>>4)&0xf; // 4
	GoodEdit_Th = (rtd_inl(SOFTWARE1__SOFTWARE1_08_ADDR)>>8)&0xfff; // 300

	//if((Scaler_DispGetInputInfo(SLR_INPUT_V_FREQ) > 590) && (Scaler_DispGetInputInfo(SLR_INPUT_V_FREQ) < 610)){
	if((pOutput->u32_input_frame_rate > 0x59000000) && (pOutput->u32_input_frame_rate < 0x61000000)){
		BadEdit_en = 0;
	}

	if(BadEdit_en == 0){
		pOutput->u8_BadEdit_flag = 0;
		score_GoodEdit = 0;
	}else{
		pOutput->u8_cadence_sequence[0] = pOutput->u8_det_cadence_Id[_FILM_ALL];
		for(u8_k = KEEP_FRAME_NUM-1; u8_k > 0; u8_k--)
		{
			if(pOutput->u8_cadence_sequence[u8_k] != pOutput->u8_cadence_sequence[u8_k-1]){
				score_BadEdit_1++;
			}

			if(u8_k < 9){
				if(pOutput->u8_cadence_sequence[u8_k] != pOutput->u8_cadence_sequence[u8_k-1]){
					score_BadEdit_2++;
				}
			}

			pOutput->u8_cadence_sequence[u8_k] = pOutput->u8_cadence_sequence[u8_k-1];
		}

		if((score_BadEdit_1 >= BadEdit_Th_1) && (score_BadEdit_2 >= BadEdit_Th_2)){
//		if((score_BadEdit_1 >= BadEdit_Th_1)){
			pOutput->u8_BadEdit_flag = 1;
			score_GoodEdit = 0;
		}else
			score_GoodEdit++;

		if(score_GoodEdit >= GoodEdit_Th)
			pOutput->u8_BadEdit_flag = 0;
	}

	if(score_GoodEdit >= GoodEdit_Th+100)
		score_GoodEdit = GoodEdit_Th+100;

	if((CadenceDetect_dbg_en == 1)){
		pr_notice("[SE_FilmDetect_BadEditProtect][,%d,%d,][,%d,][,%d,%d,%d,][,%d,][,%d,]\n\r", pOutput->u8_det_cadence_Id[_FILM_ALL], pOutput->u8_cur_cadence_out[_FILM_ALL], pOutput->u8_BadEdit_flag, score_BadEdit_1, score_BadEdit_2, score_GoodEdit, pOutput->u32_input_frame_rate, (rtd_inl(0xb800c3f0)&0x7ffff));
	}

	if(pOutput->u8_BadEdit_flag == 1){
		pOutput->u8_cur_cadence_out[0] = _CAD_BAD_EDIT;
		pOutput->u8_phT_phase_Idx_out[0] = 0;
	}
}


UINT32 g_cur_cadence_id = 0;
UINT32 g_cur_cadence_out = 0;  
void SE_FilmDetectCtrl_Proc(_SE_PARAM_FilmDetectCtrl *pParam, _SE_OUTPUT_FilmDetectCtrl *pOutput, _SE_ReadBack_Regs *pRBRegs)
{
	//const _PQLCONTEXT *s_pContext = GetPQLContext();
	//UINT8 mPullDownMode;
	UINT8 u8_k = 0;

	SE_FilmDetect_reset(pParam, pOutput, pRBRegs);

	SE_FilmDtect_DataUpdate(pParam, pOutput, pRBRegs);

	pOutput->u8_dbg_motion_t = _CLIP_(pParam->u3_DbgPrt_Rgn, _FILM_ALL, _FILM_5RGN_CEN);

	if (pParam->u1_filmDet_bypass == 1)
	{
		pOutput->u8_det_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
		pOutput->u8_phase_Idx[_FILM_ALL]      = 0;

		pOutput->u8_cur_cadence_Id[_FILM_ALL] = (SE_FRC_CADENCE_ID)(pRBRegs->u3_ipme_filmMode_rb>>1);
	}
	else/* if ((s_pContext->_external_data._input_3dFormat != _PQL_IN_LR) ||\
		((s_pContext->_external_data._input_3dFormat == _PQL_IN_LR) && (s_pContext->_output_read_comreg.u1_kphase_inLR == _PQL_3D_FRAME_L)))*/
	{
	        pOutput->u32_dbg_cnt_hold = (pOutput->u5_dbg_param1_pre != pParam->u5_dbg_param1 || pOutput->u32_dbg_param2_pre!= pParam->u32_dbg_param2)?\
			                         pParam->u32_dbg_cnt : (pOutput->u32_dbg_cnt_hold > 0 ? (pOutput->u32_dbg_cnt_hold - 1) : 0);

		SE_Motion_Sequence_Gen(pParam, pOutput, _FILM_ALL, pRBRegs);
		SE_CadenceDetect(pParam,pOutput, _FILM_ALL);
		SE_Film_motThr_calc(pParam,pOutput, _FILM_ALL);
#if 1
		//Film_occasionally_fastOut(pParam,pOutput);

		if ((pParam->u1_mixMode_det_en == 1) && (pParam->u1_mixMode_en == 1))
		{
			#if MIX_MODE_REGION_17
			for (u8_k = _FILM_5RGN_TOP; u8_k <= _FILM_12RGN_12; u8_k ++)
			#else
			for (u8_k = _FILM_5RGN_TOP; u8_k <= _FILM_5RGN_CEN; u8_k ++)
			#endif
			{
				SE_Motion_Sequence_Gen(pParam, pOutput, (_SE_FILM_MOT_TYPE)u8_k, pRBRegs);
				SE_CadenceDetect(pParam, pOutput, (_SE_FILM_MOT_TYPE)u8_k);
				SE_Film_motThr_calc(pParam, pOutput, (_SE_FILM_MOT_TYPE)u8_k);

				if (pOutput->u8_pre_cadence_Id[u8_k] == _CAD_VIDEO)
				{
					SE_FilmEnter(pParam, pOutput, (_SE_FILM_MOT_TYPE)u8_k, pRBRegs);
				}
				else
				{
					SE_FilmQuit(pParam, pOutput, (_SE_FILM_MOT_TYPE)u8_k, pRBRegs);
				}

				//cadence+timing support or not
//				if(CAD_N == PQL_FRCCaseSupportJudge(pOutput->u8_cur_cadence_Id[u8_k]))
//				{
//					pOutput->u8_cur_cadence_Id[u8_k] = _CAD_VIDEO;
//				}

				//SE_FilmDetect_FlushProtect(pOutput, (_SE_FILM_MOT_TYPE)u8_k);

				SE_PhaseIdx_set(pParam, pOutput, (_SE_FILM_MOT_TYPE)u8_k);

				pOutput->u8_pre_cadence_Id[u8_k] = pOutput->u8_cur_cadence_Id[u8_k];

			}

			if((pOutput->u32_input_frame_rate > 0x59000000) && (pOutput->u32_input_frame_rate < 0x61000000)){
				SE_MixMode_detect(pParam, pOutput);
			}


		}
		else
		{
			pOutput->u1_mixMode     = 0;
			pOutput->u8_mixMode_cnt = 0;
		}

		if (pOutput->u8_pre_cadence_Id[_FILM_ALL] == _CAD_VIDEO && pOutput->u1_mixMode == 0)
		{
			SE_FilmEnter(pParam, pOutput, _FILM_ALL, pRBRegs);
		}
		else
		{
			SE_FilmQuit(pParam, pOutput, _FILM_ALL, pRBRegs);
		}

	#if 0 //SPECIAL_CASE
		//pull down mode
		//input 25hz/30hz/50hz/60hz, TruMotion off, Cinema off => clear cadence to avoid incorrect pulldown
		mPullDownMode = s_pContext->_external_data.u8_pulldown_mode;
		if(pOutput->u8_cur_cadence_Id[_FILM_ALL] != _CAD_VIDEO && s_pContext->_external_data._input_frameRate == _PQL_IN_24HZ &&
			/*mPullDownMode >= _PQL_IN24HZ_TRUMOTOFF_CINEMAON &&*/ mPullDownMode <= _PQL_IN24HZ_TRUMOTOFF_CINEMAOFF)
		{
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
		}

		// FF or FB force to video
		if((s_pContext->_external_info.s16_speed != 256) && (s_pContext->_external_info.s16_speed != -256))
		{
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
		}

		//cadence+timing support or not
		if(CAD_N == PQL_FRCCaseSupportJudge( pOutput->u8_cur_cadence_Id[_FILM_ALL] ))
		{
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_VIDEO;
		}
		// for 32322 bad edit
		if(pOutput->u8_pre_cadence_Id[_FILM_ALL] == _CAD_32322 && s_pContext->_output_fblevelctrl.u1_HW_sc_true == 0)
		{
			pOutput->u8_cur_cadence_Id[_FILM_ALL] = _CAD_32322;
		}

	#endif

		SE_FilmDetect_FlushProtect(pOutput, _FILM_ALL);

		if(FlushProtectStatus == 0){
			SE_Film_occasionally_fastOut(pParam,pOutput);
		}

		SE_PhaseIdx_set(pParam, pOutput, _FILM_ALL);

		if(FlushProtectStatus == 0){
			pOutput->u8_pre_cadence_Id[_FILM_ALL] = pOutput->u8_cur_cadence_Id[_FILM_ALL];
		}

		if(0) // ((((pOutput->u5_dbg_param1_pre & BIT_2) >> 2) == 1) && pOutput->u32_dbg_cnt_hold > 0)
		{
			pr_notice("[MEMC]::cur_cadence_Id=%d, phase_ID=%d, phT_phase_ID=%d \n", pOutput->u8_cur_cadence_Id[_FILM_ALL],pOutput->u8_phase_Idx[_FILM_ALL],pOutput->u8_phT_phase_Idx[_FILM_ALL]);
		}

		pOutput->u5_dbg_param1_pre  = pParam->u5_dbg_param1;
		pOutput->u32_dbg_param2_pre = pParam->u32_dbg_param2;

#endif
	}

	//update output to other module
	//pOutput->u8_cur_cadence_out[u8_k]
	//pOutput->u8_phT_phase_Idx_out[u8_k]
	if(FlushProtectStatus == 0){
		SE_FilmDetect_UpdateOutput(pOutput);
		SE_FilmDetect_BadEditProtect(pParam, pOutput, pRBRegs);
	}

	g_cur_cadence_id = pOutput->u8_cur_cadence_Id[_FILM_ALL];

	if(pOutput->u8_pre_cadence_out != pOutput->u8_cur_cadence_out[_FILM_ALL])
		pr_notice("[SE_FILM][cadence_out change]%d -> %d\n", pOutput->u8_pre_cadence_out, pOutput->u8_cur_cadence_out[_FILM_ALL]);

	pOutput->u8_pre_cadence_out = pOutput->u8_cur_cadence_out[_FILM_ALL];
#if 0
	// Pass out the film information
	g_scaler_memc_cadence[_FILM_MEMC_ALL] = pOutput->u8_cur_cadence_Id[_FILM_ALL];
	g_scaler_memc_cadence[_FILM_MEMC_TOP] = ( pParam->u1_mixMode_det_en == 1 )? pOutput->u8_cur_cadence_Id[_FILM_5RGN_TOP] : 255;
	g_scaler_memc_cadence[_FILM_MEMC_BOT] = ( pParam->u1_mixMode_det_en == 1 )? pOutput->u8_cur_cadence_Id[_FILM_5RGN_BOT] : 255;
	g_scaler_memc_cadence[_FILM_MEMC_LFT] = ( pParam->u1_mixMode_det_en == 1 )? pOutput->u8_cur_cadence_Id[_FILM_5RGN_LFT] : 255;
	g_scaler_memc_cadence[_FILM_MEMC_RHT] = ( pParam->u1_mixMode_det_en == 1 )? pOutput->u8_cur_cadence_Id[_FILM_5RGN_RHT] : 255;
	g_scaler_memc_cadence[_FILM_MEMC_CEN] = ( pParam->u1_mixMode_det_en == 1 )? pOutput->u8_cur_cadence_Id[_FILM_5RGN_CEN] : 255;
	g_scaler_memc_cadence[_FILM_MEMC_OUT_ALL] = pOutput->u8_cur_cadence_out[_FILM_ALL];
#endif
}
extern _SE_PARAM_FilmDetectCtrl pParam;
extern _SE_OUTPUT_FilmDetectCtrl pOutput;
extern _SE_ReadBack_Regs pRBRegs;
extern int SE_EXT_FilmDetect(SE_FMT_ST *pInfo);
SE_FMT_ST pInfo;
//#define  SB2_HD_SEM_NEW_3_reg	0xB801A62C
//extern void _rtd_hwsem_lock(enum LOCK_SEM hw_sem_addr, enum LOCK_UUID uuid);
//extern void _rtd_hwsem_unlock(enum LOCK_SEM hw_sem_addr, enum LOCK_UUID uuid);
int ScalerVIP_SE_Proc(void)
{
#ifdef CONFIG_RTK_KDRV_SE
	_RPC_system_setting_info* RPC_system_info_structure_table = NULL;
	unsigned char SE_rdPtr = 0;
	unsigned char SE_wrPtr = 0;
	unsigned char SE_status = 0;
	unsigned char SE_rdPtr_new = 0;
	unsigned int SE_Addr_Cur_tmp = 0;
	unsigned int SE_Addr_Pre_tmp = 0;
	unsigned int SE_width_tmp = 0;
	unsigned int SE_height_tmp = 0;
	unsigned int SE_Addr_Cur = 0;
	unsigned int SE_Addr_Pre = 0;
	unsigned int SE_width = 0;
	unsigned int SE_height = 0;
	unsigned char SE_reset_flag_new = 0;
	unsigned char SE_flush_flag_new = 0;
	unsigned int time1 = 0, time2 = 0, time3 = 0;
	UINT32 CadenceDetect_dbg_en = 0;

	CadenceDetect_dbg_en = (rtd_inl(SOFTWARE1__SOFTWARE1_63_ADDR)>>27)&0x1;

	RPC_system_info_structure_table = scaler_GetShare_Memory_RPC_system_setting_info_Struct();

	if((RPC_system_info_structure_table==NULL))
	{
		ROSPrintf(" Mem4 = %p\n",RPC_system_info_structure_table);
		return -1;
	}

	preempt_disable();
	_rtd_hwsem_lock(SB2_HD_SEM_NEW_3_reg, SEMA_HW_SEM_3_SCPU_2);
	SE_rdPtr = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.rdPtr;
	SE_wrPtr = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.wrPtr;
	SE_status = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].status;
	SE_Addr_Cur_tmp = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].SeqBufAddr_Curr;
	SE_Addr_Pre_tmp = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].SeqBufAddr_Prev;
	SE_width_tmp = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].Width;
	SE_height_tmp = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].Height;
	pOutput.u8_reset_flag = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.reset_flag;
	pOutput.u8_flush_flag = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.flush_flag;
	pOutput.u32_input_frame_rate = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.input_frame_rate;
	_rtd_hwsem_unlock(SB2_HD_SEM_NEW_3_reg, SEMA_HW_SEM_3_SCPU_2);
	preempt_enable();

	SE_Addr_Cur = Scaler_ChangeUINT32Endian(SE_Addr_Cur_tmp);
	SE_Addr_Pre = Scaler_ChangeUINT32Endian(SE_Addr_Pre_tmp);
	SE_width = Scaler_ChangeUINT32Endian(SE_width_tmp);
	SE_height = Scaler_ChangeUINT32Endian(SE_height_tmp);
	rtd_outl(0xb809d714, SE_rdPtr);
	rtd_outl(0xb809d718, SE_wrPtr);

	if(SE_status == 1){
		static unsigned int dumpCnt=1;
		time3 = rtd_inl(0xB801B6B8);
		//se_cmd
		pInfo.width = SE_width;//RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.se_info_width;
		pInfo.height = SE_height;//RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.se_info_height;
		pInfo.s1_Addr = SE_Addr_Pre; // 0x42c00000;
		pInfo.s2_Addr = SE_Addr_Cur; // 0x42c7e900

  		time2 = rtd_inl(0xB801B6B8);
		//SE_FilmDetect_SECmd(&pInfo);
		SE_EXT_FilmDetect(&pInfo);
		rtd_printk(KERN_DEBUG, TAG_NAME_SE_FILM, "[jerry_SE_FilmDetect_Success_01 !!][Read_Ptr, Write_Ptr, status][%d,%d, %d, %x, %x, %d, %d, %d]\n\r", SE_rdPtr, SE_wrPtr, SE_status, SE_Addr_Cur, SE_Addr_Pre, SE_width, SE_height, rtd_inl(0xB801B6B8)-time2);

		time1 = rtd_inl(0xB801B6B8);
		SE_FilmDetectCtrl_Proc(&pParam, &pOutput, &pRBRegs);
		if((rtd_inl(0xB801B6B8)-time1 > 90)|| (dumpCnt % 60 == 0)){
			rtd_printk(KERN_DEBUG, TAG_NAME_SE_FILM, "[jerry_SE_FilmDetect_Success_02 !!][Read_Ptr, Write_Ptr, status][%d,%d, %d, %x, %x, %d, %d, %d]", SE_rdPtr, SE_wrPtr, SE_status, SE_Addr_Cur, SE_Addr_Pre, SE_width, SE_height, rtd_inl(0xB801B6B8)-time1);
		}

#if defined(CONFIG_RTK_AI_DRV)
		//extern UINT8 vpq_stereo_face; 

		   if(/*vpq_stereo_face != V4L2_VPQ_EXT_STEREO_FACE_OFF && */get_svp_protect_status_aipq()==0)
		   {
		    scalerAI_preprocessing();
		   }
   #endif
		//update Film_all data
		preempt_disable();
		_rtd_hwsem_lock(SB2_HD_SEM_NEW_3_reg, SEMA_HW_SEM_3_SCPU_2);
		SE_rdPtr_new = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.rdPtr;
		SE_reset_flag_new = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.reset_flag;
		SE_flush_flag_new = RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.flush_flag;

		if((SE_rdPtr == SE_rdPtr_new) && (pOutput.u8_reset_flag == SE_reset_flag_new) && (pOutput.u8_flush_flag == SE_flush_flag_new)){
			RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].Film_Mode = pOutput.u8_cur_cadence_out[0];
			RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].Film_ID = pOutput.u8_phT_phase_Idx_out[0];

			RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.pic[SE_rdPtr].status = 2;//OUTPUT;
			RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.rdPtr = (SE_rdPtr + 1) % MAX_FILM_BUFF;
		}

		if(pOutput.u8_reset_flag)
			RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.reset_flag = 0;

		if(pOutput.u8_flush_flag)
			RPC_system_info_structure_table->SCPU_ISRIINFO_TO_VCPU.flush_flag = 0;
		_rtd_hwsem_unlock(SB2_HD_SEM_NEW_3_reg, SEMA_HW_SEM_3_SCPU_2);
		preempt_enable();

		rtd_printk(KERN_DEBUG, TAG_NAME_SE_FILM, "[jerry_SE_FilmDetect_SECmd_00][%d][%d,%d][%x][90Hz = %d]\n\r", (rtd_inl(0xb800c3f0)&0x7ffff), pOutput.u8_cur_cadence_Id[0], pOutput.u8_phase_Idx[0], pOutput.u32_Mot_sequence[0],
			rtd_inl(0xB801B6B8)-time3);
		if(CadenceDetect_dbg_en){
			pr_notice("[jerry_SE_FilmDetect_SECmd_00][,%d,][,%d,%d,%d,][,%d,%d,][,%x,][90Hz = %d]\n\r", (rtd_inl(0xb800c3f0)&0x7ffff), pOutput.u8_det_cadence_Id[0], pOutput.u8_cur_cadence_out[0], pOutput.u8_phT_phase_Idx_out[0], pOutput.u32_Mot_sequence[0]&0x1,
				pOutput.u8_quit_prd[0], pOutput.u8_quit_cnt[0], rtd_inl(0xB801B6B8)/*-time3*/);
		}

		dumpCnt++;
	}
	else{
		pr_notice("[jerry_SE_FilmDetect_Fail !!][Read_Ptr, Write_Ptr, status][%d,%d, %d, %x, %x, %d, %d]", SE_rdPtr, SE_wrPtr, SE_status, SE_Addr_Cur, SE_Addr_Pre, SE_width, SE_height);
		rtd_outl(0xb809d73c, 0x99999999);
	}

	rtd_printk(KERN_DEBUG, TAG_NAME, "Film_Mode = %d, status = %d\n", pOutput.u8_cur_cadence_out[0], SE_status);

	//rtd_outl(0xb809d730, SE_status);
	rtd_outl(0xb809d734, pOutput.u8_cur_cadence_out[0]);
	rtd_outl(0xb809d738, pOutput.u8_phT_phase_Idx_out[0]);
#endif
	return 0;

}

#ifdef BRING_UP_VERIFY_PQ//for bring up PQ default setting
void PQ_verify_initial(void)
{//for bring up PQ default setting

}
#endif


/* LGD OLED prevent image sticking algo */
unsigned int scalerVIP_TPC_detect(void)
{
    // temporal peak control: detect by peak brightness & motion
    // in: histogram, motion level
    // out: TPC flag, gain by time & peak
    _system_setting_info *VIP_system_info_structure_table=NULL;
    unsigned char cur_source=(RPC_system_info_structure_table->VIP_source);

    unsigned int image_width, image_height;
    unsigned int* HistCnt = (SmartPic_clue->Y_Main_Hist);
    static unsigned int HistCnt_pre[COLOR_HISTOGRAM_LEVEL];
    unsigned char GMV_ratio = scalerVIP_DI_MiddleWare_MCNR_Get_GMV_Ratio();
    /** memo: GMV_ratio may not be available on USB 4K !!! need to find alternatives **/
    unsigned int Y_mean = SmartPic_clue->Hist_Y_Mean_Value;
    unsigned int hist_diff = 0;
    unsigned int hist_total_cnt = 0;
    unsigned int hist_high_cnt = 0; // count of hist >= 75IRE
    static int TPC_counter = 0;
    int i;

    sys_reg_sys_clken3_RBUS sys_clken3_reg;
    kme_me1_top2_kme_me1_top2_b0_RBUS kme_me1_top2_b0_reg;
    int memc_mvx, memc_mvy; // signed value

    unsigned char still_cond_hist;
    unsigned char still_cond_gmv;
    unsigned char still_cond_memc;
    unsigned char peak_cond;

    unsigned int wait_time_sec = 100; // 100sec
    unsigned int drop_time_sec = 270; // 4min30sec
    unsigned int frmrate = Scaler_VOInfoPointer(0)->v_freq;
    unsigned int wait_time_frm = wait_time_sec * frmrate / 10;
    unsigned int drop_time_frm = drop_time_sec * frmrate / 10;

    unsigned short gain_limit; // 0~1x gain -> 0~1024
    unsigned short gain_final;

    VIP_system_info_structure_table = (_system_setting_info*)Scaler_GetShareMemVirAddr(SCALERIOC_VIP_system_info_structure);
    if(VIP_system_info_structure_table == NULL){
        //VIPprintf("[%s:%d] Warning here!! RPC_system_info=NULL! \n",__FILE__, __LINE__);
        gain_final = 1024;
        return gain_final;
    }
    image_width = VIP_system_info_structure_table->I_Width;
    image_height = VIP_system_info_structure_table->I_Height;

    hist_diff = 0;
    hist_total_cnt = 0;
    hist_high_cnt = 0;
    for( i=0; i<COLOR_HISTOGRAM_LEVEL; i++ )
    {
        hist_diff += abs_value((int)HistCnt[i] - (int)HistCnt_pre[i]);
        hist_total_cnt += HistCnt[i];
        if( i >= (COLOR_HISTOGRAM_LEVEL*3)>>2 ) // >= 75 IRE
            hist_high_cnt += HistCnt[i];
    }

    if( hist_diff < ( (image_height * image_width) >> 10) ) // hist diff count < 1/1024 of image
        still_cond_hist = true;
    else
        still_cond_hist = false;

    if( (cur_source != VIP_QUALITY_DTV_4k2kP_30) && (cur_source != VIP_QUALITY_DTV_4k2kP_60) ) // MCNR off, no GMV available
        still_cond_gmv = true;
    else if( GMV_ratio >= 99 ) // GMV condition
        still_cond_gmv = true;
    else
        still_cond_gmv = false;

    // memc condition
    sys_clken3_reg.regValue = rtd_inl(SYS_REG_SYS_CLKEN3_reg);
    if( sys_clken3_reg.clken_memc_me == 1 ) // check ME clock first
    {
        kme_me1_top2_b0_reg.regValue = rtd_inl(KME_ME1_TOP2_KME_ME1_TOP2_B0_reg);
        if( kme_me1_top2_b0_reg.regr_me1_gmv_grp0_mvx & _BIT10 ) // minus value
            memc_mvx = (int)(kme_me1_top2_b0_reg.regr_me1_gmv_grp0_mvx) - (1<<11);
        else
            memc_mvx = kme_me1_top2_b0_reg.regr_me1_gmv_grp0_mvx;
        if( kme_me1_top2_b0_reg.regr_me1_gmv_grp0_mvy & _BIT9 ) // minus value
            memc_mvy = (int)(kme_me1_top2_b0_reg.regr_me1_gmv_grp0_mvy) - (1<<10);
        else
            memc_mvy = kme_me1_top2_b0_reg.regr_me1_gmv_grp0_mvy;

        if( abs_value(memc_mvx)<10 && abs_value(memc_mvy)<10 )
            still_cond_memc = true;
        else
            still_cond_memc = false;
    }
    else // MEMC clock off, not available
        still_cond_memc = true;

    peak_cond = (hist_high_cnt >= hist_total_cnt/100); // temporary condition: 75+ IRE takes up 1% of image

    if( still_cond_hist && still_cond_gmv && still_cond_memc && peak_cond )
        TPC_counter++;
    else
        TPC_counter -= 100;

    if( TPC_counter >= wait_time_frm+drop_time_frm )
        TPC_counter = wait_time_frm+drop_time_frm;
    if( TPC_counter <= 0 )
        TPC_counter = 0;

    if( TPC_counter < wait_time_frm )
        gain_final = 1024;
    else
    {
        // gain level by APL
        // APL 25: gain 20%, APL 100: gain 60%
        if( Y_mean <= 25 )
            gain_limit = 200;
        else
            gain_limit = 200 + (Y_mean-25)*(600-200)/75;

        // final gain by still time
        gain_final = 1024 - (1024-gain_limit) *(TPC_counter-wait_time_frm)/drop_time_frm;
    }

    return gain_final;

}

#define LBC_BLK_HNUM 32
#define LBC_BLK_VNUM 18
unsigned int blk_apl_average[ LBC_BLK_HNUM*LBC_BLK_VNUM ];
int blk_temp_score[ LBC_BLK_HNUM*LBC_BLK_VNUM ];

unsigned int scalerVIP_LBC_detect(void)
{
    int i;
    unsigned char ok = false;
    unsigned int wait_time_sec = 180; // 3min
    unsigned int drop_time_sec = 300; // 5min
    unsigned int frmrate = Scaler_VOInfoPointer(0)->v_freq;
    unsigned int wait_time_frm = wait_time_sec * frmrate / 10;
    unsigned int drop_time_frm = drop_time_sec * frmrate / 10;

    int temp_score_th = 100;
    int temp_score_limit = 200;
    int LBC_block_cnt = 0;
    static int LBC_counter = 0;

    unsigned short gain_final; // 0~1x gain -> 0~1024
    unsigned short gain_limit = 700; // minimum drop to 70%

    ok = drvif_color_get_LD_APL_ave( blk_apl_average );

    LBC_block_cnt = 0;
    for( i=0; i<LBC_BLK_HNUM*LBC_BLK_VNUM; i++ )
    {
        if( ok ) // only update temp score when block APL read OK
        {
            // 0%----20%----40%----60%----80%----100%
            // |    -5    |    -3    |    -1     |    +1    |    +2     |
            if( blk_apl_average[i] > 800 ) // >80%
            {
                blk_temp_score[i]+=2;
            }
            else if( blk_apl_average[i] > 600 ) // 60%~80%
            {
                blk_temp_score[i]+=1;
            }
            else if( blk_apl_average[i] > 400 ) // 40%~60%
            {
                blk_temp_score[i]-=1;
            }
            else if( blk_apl_average[i] > 200 ) // 20%~40%
            {
                blk_temp_score[i]-=3;
            }
            else // <20%
            {
                blk_temp_score[i]-=5;
            }

            if( blk_temp_score[i] >= temp_score_limit )
                blk_temp_score[i] = temp_score_limit;
            if( blk_temp_score[i] <= 0 )
                blk_temp_score[i] = 0;

        }
        if( blk_temp_score[i] >= temp_score_th )
            LBC_block_cnt++;

    }

    // LBC gain condition: over 4 regions have score > temp_score_th
    if( LBC_block_cnt >= 4 )
        LBC_counter++;
    else
        LBC_counter -= 100;

    if( LBC_counter >= wait_time_frm+drop_time_frm )
        LBC_counter = wait_time_frm+drop_time_frm;
    if( LBC_counter <= 0 )
        LBC_counter = 0;

    if( LBC_counter < wait_time_frm )
        gain_final = 1024;
    else
    {
        // final gain by LBC_counter
        gain_final = 1024 - (1024-gain_limit) *(LBC_counter-wait_time_frm)/drop_time_frm;
    }

    return gain_final;

}

void scalerVIP_OLED_prevent_sticking_apply( unsigned int TPC_gain, unsigned int LBC_gain )
{
    // final gain: takes the minimum of TPC_gain and LBC_gain
    unsigned int final_gain;
    static unsigned int final_gain_pre;

    final_gain = min(TPC_gain, LBC_gain) * 2;
    if( final_gain != final_gain_pre )
    {
        fwif_color_setrgbcolortemp_contrast( final_gain, final_gain, final_gain );
    }

    final_gain_pre = final_gain;
}

void scalerVIP_reduce_flicker(unsigned char vip_source,unsigned char level)
{
	/*
	color_sharp_dm_maxmin_shp_gain_0_RBUS color_sharp_dm_maxmin_shp_gain_0;
	color_sharp_dm_maxmin_shp_gain_1_RBUS color_sharp_dm_maxmin_shp_gain_1;
 	color_sharp_dm_maxmin_shp_gain_2_RBUS color_sharp_dm_maxmin_shp_gain_2;
	color_sharp_dm_maxmin_shp_gain_3_RBUS color_sharp_dm_maxmin_shp_gain_3;
	color_sharp_dm_maxmin_shp_step_0_RBUS color_sharp_dm_maxmin_shp_step_0;
	color_sharp_dm_maxmin_shp_step_1_RBUS color_sharp_dm_maxmin_shp_step_1;
	color_sharp_dm_maxmin_shp_step_2_RBUS color_sharp_dm_maxmin_shp_step_2;
	color_sharp_dm_maxmin_shp_step_3_RBUS color_sharp_dm_maxmin_shp_step_3;

	color_sharp_dm_maxmin_shp_gain_0.regValue = IoReg_Read32(COLOR_SHARP_DM_MAXMIN_SHP_GAIN_0_reg);
	color_sharp_dm_maxmin_shp_gain_1.regValue = IoReg_Read32(COLOR_SHARP_DM_MAXMIN_SHP_GAIN_1_reg);
	color_sharp_dm_maxmin_shp_gain_2.regValue = IoReg_Read32(COLOR_SHARP_DM_MAXMIN_SHP_GAIN_2_reg);
	color_sharp_dm_maxmin_shp_gain_3.regValue = IoReg_Read32(COLOR_SHARP_DM_MAXMIN_SHP_GAIN_3_reg);
	color_sharp_dm_maxmin_shp_step_0.regValue = IoReg_Read32(COLOR_SHARP_DM_MAXMIN_SHP_STEP_0_reg);
	color_sharp_dm_maxmin_shp_step_1.regValue = IoReg_Read32(COLOR_SHARP_DM_MAXMIN_SHP_STEP_1_reg);
	color_sharp_dm_maxmin_shp_step_2.regValue = IoReg_Read32(COLOR_SHARP_DM_MAXMIN_SHP_STEP_2_reg);
	color_sharp_dm_maxmin_shp_step_3.regValue = IoReg_Read32(COLOR_SHARP_DM_MAXMIN_SHP_STEP_3_reg);
        */
       	color_sharp_dm_maxmin_shp_gain_2_RBUS color_sharp_dm_maxmin_shp_gain_2;

        UINT8 source=0,idx=0;
        SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
        gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
        if (gVip_Table == NULL) {
        	return ;
        }

        if (vip_source >= VIP_QUALITY_SOURCE_NUM)
        	vip_source = 0;

        idx = gVip_Table->VIP_QUALITY_Extend3_Coef[source][VIP_QUALITY_FUNCTION_SharpTable];


	color_sharp_dm_maxmin_shp_gain_2.regValue = rtd_inl(COLOR_SHARP_DM_MAXMIN_SHP_GAIN_2_reg);

        if(level >=10)
        {
	        color_sharp_dm_maxmin_shp_gain_2.s5 = 0;

        }
        else
        {
	        color_sharp_dm_maxmin_shp_gain_2.s5 = gVip_Table->Ddomain_SHPTable[idx].Max_Min_Gain.Gain_5;

       }


        rtd_outl(COLOR_SHARP_DM_MAXMIN_SHP_GAIN_2_reg,color_sharp_dm_maxmin_shp_gain_2.regValue);

}


